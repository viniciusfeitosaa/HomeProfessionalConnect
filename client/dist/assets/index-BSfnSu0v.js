const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-xMv99kT-.js","assets/vendor-C6Ba5J37.js","assets/ui-_cXOTB9P.js","assets/utils--BulIq_u.js"])))=>i.map(i=>d[i]);
import{r as _,j as e,P as ts,c as Vi,a as $m,u as Us,B as d1,b as gl,d as Io,e as zt,f as Bn,g as th,R as u1,h as Um,i as $n,k as h1,l as f1,m as ud,D as Hm,C as Wm,n as Vm,o as ic,p as Zm,A as Gm,q as Ym,S as m1,s as sh,O as rh,t as Km,v as nh,w as ah,T as ih,x as oh,y as Jm,z as Xm,E as Qm,F as p1,I as g1,G as x1,H as ep,J as tp,K as v1,L as sp,M as rp,N as np,Q as ap,U as ip,V as op,W as lp,X as y1,Y as b1,Z as w1,_ as cp,$ as N1,a0 as j1,a1 as fs,a2 as _1,a3 as S1,a4 as k1,a5 as C1,a6 as P1,a7 as dp,a8 as L1}from"./ui-_cXOTB9P.js";import{a as A1,r as T1,g as up}from"./vendor-C6Ba5J37.js";import{t as E1,c as I1,a as oc}from"./utils--BulIq_u.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Pc={},mf;function R1(){if(mf)return Pc;mf=1;var s=A1();return Pc.createRoot=s.createRoot,Pc.hydrateRoot=s.hydrateRoot,Pc}var M1=R1(),Cl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},So=typeof window>"u"||"Deno"in globalThis;function pn(){}function O1(s,t){return typeof s=="function"?s(t):s}function vu(s){return typeof s=="number"&&s>=0&&s!==1/0}function hp(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Di(s,t){return typeof s=="function"?s(t):s}function ya(s,t){return typeof s=="function"?s(t):s}function pf(s,t){const{type:r="all",exact:a,fetchStatus:i,predicate:o,queryKey:c,stale:h}=s;if(c){if(a){if(t.queryHash!==lh(c,t.options))return!1}else if(!Xl(t.queryKey,c))return!1}if(r!=="all"){const u=t.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||i&&i!==t.state.fetchStatus||o&&!o(t))}function gf(s,t){const{exact:r,status:a,predicate:i,mutationKey:o}=s;if(o){if(!t.options.mutationKey)return!1;if(r){if(ko(t.options.mutationKey)!==ko(o))return!1}else if(!Xl(t.options.mutationKey,o))return!1}return!(a&&t.state.status!==a||i&&!i(t))}function lh(s,t){return(t?.queryKeyHashFn||ko)(s)}function ko(s){return JSON.stringify(s,(t,r)=>yu(r)?Object.keys(r).sort().reduce((a,i)=>(a[i]=r[i],a),{}):r)}function Xl(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(r=>Xl(s[r],t[r])):!1}function fp(s,t){if(s===t)return s;const r=xf(s)&&xf(t);if(r||yu(s)&&yu(t)){const a=r?s:Object.keys(s),i=a.length,o=r?t:Object.keys(t),c=o.length,h=r?[]:{},u=new Set(a);let m=0;for(let x=0;x<c;x++){const v=r?x:o[x];(!r&&u.has(v)||r)&&s[v]===void 0&&t[v]===void 0?(h[v]=void 0,m++):(h[v]=fp(s[v],t[v]),h[v]===s[v]&&s[v]!==void 0&&m++)}return i===c&&m===i?s:h}return t}function Gc(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(s[r]!==t[r])return!1;return!0}function xf(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function yu(s){if(!vf(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!vf(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function vf(s){return Object.prototype.toString.call(s)==="[object Object]"}function D1(s){return new Promise(t=>{setTimeout(t,s)})}function bu(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?fp(s,t):t}function F1(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function z1(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var ch=Symbol();function mp(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===ch?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function pp(s,t){return typeof s=="function"?s(...t):!!s}var B1=class extends Cl{#t;#e;#s;constructor(){super(),this.#s=s=>{if(!So&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#s=s,this.#e?.(),this.#e=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#t!==s&&(this.#t=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},dh=new B1,q1=class extends Cl{#t=!0;#e;#s;constructor(){super(),this.#s=s=>{if(!So&&window.addEventListener){const t=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#s=s,this.#e?.(),this.#e=s(this.setOnline.bind(this))}setOnline(s){this.#t!==s&&(this.#t=s,this.listeners.forEach(r=>{r(s)}))}isOnline(){return this.#t}},Yc=new q1;function wu(){let s,t;const r=new Promise((i,o)=>{s=i,t=o});r.status="pending",r.catch(()=>{});function a(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{a({status:"fulfilled",value:i}),s(i)},r.reject=i=>{a({status:"rejected",reason:i}),t(i)},r}function $1(s){return Math.min(1e3*2**s,3e4)}function gp(s){return(s??"online")==="online"?Yc.isOnline():!0}var xp=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function Vd(s){return s instanceof xp}function vp(s){let t=!1,r=0,a=!1,i;const o=wu(),c=j=>{a||(b(new xp(j)),s.abort?.())},h=()=>{t=!0},u=()=>{t=!1},m=()=>dh.isFocused()&&(s.networkMode==="always"||Yc.isOnline())&&s.canRun(),x=()=>gp(s.networkMode)&&s.canRun(),v=j=>{a||(a=!0,s.onSuccess?.(j),i?.(),o.resolve(j))},b=j=>{a||(a=!0,s.onError?.(j),i?.(),o.reject(j))},g=()=>new Promise(j=>{i=T=>{(a||m())&&j(T)},s.onPause?.()}).then(()=>{i=void 0,a||s.onContinue?.()}),k=()=>{if(a)return;let j;const T=r===0?s.initialPromise:void 0;try{j=T??s.fn()}catch(S){j=Promise.reject(S)}Promise.resolve(j).then(v).catch(S=>{if(a)return;const P=s.retry??(So?0:3),B=s.retryDelay??$1,U=typeof B=="function"?B(r,S):B,Q=P===!0||typeof P=="number"&&r<P||typeof P=="function"&&P(r,S);if(t||!Q){b(S);return}r++,s.onFail?.(r,S),D1(U).then(()=>m()?void 0:g()).then(()=>{t?b(S):k()})})};return{promise:o,cancel:c,continue:()=>(i?.(),o),cancelRetry:h,continueRetry:u,canStart:x,start:()=>(x()?k():g().then(k),o)}}var U1=s=>setTimeout(s,0);function H1(){let s=[],t=0,r=h=>{h()},a=h=>{h()},i=U1;const o=h=>{t?s.push(h):i(()=>{r(h)})},c=()=>{const h=s;s=[],h.length&&i(()=>{a(()=>{h.forEach(u=>{r(u)})})})};return{batch:h=>{let u;t++;try{u=h()}finally{t--,t||c()}return u},batchCalls:h=>(...u)=>{o(()=>{h(...u)})},schedule:o,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{a=h},setScheduler:h=>{i=h}}}var jr=H1(),yp=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vu(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(So?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},W1=class extends yp{#t;#e;#s;#r;#n;#i;#o;constructor(s){super(),this.#o=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#r=s.client,this.#s=this.#r.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#t=V1(this.options),this.state=s.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(s){this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(s,t){const r=bu(this.state.data,s,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(s,t){this.#a({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#n?.promise;return this.#n?.cancel(s),t?t.then(pn).catch(pn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(s=>ya(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ch||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Di(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!hp(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(s,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(s&&this.setOptions(s),!this.options.queryFn){const u=this.observers.find(m=>m.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,a=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},i=()=>{const u=mp(this.options,t),x=(()=>{const v={client:this.#r,queryKey:this.queryKey,meta:this.meta};return a(v),v})();return this.#o=!1,this.options.persister?this.options.persister(u,x,this):u(x)},c=(()=>{const u={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};return a(u),u})();this.options.behavior?.onFetch(c,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#a({type:"fetch",meta:c.fetchOptions?.meta});const h=u=>{Vd(u)&&u.silent||this.#a({type:"error",error:u}),Vd(u)||(this.#s.config.onError?.(u,this),this.#s.config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return this.#n=vp({initialPromise:t?.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:u=>{if(u===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(m){h(m);return}this.#s.config.onSuccess?.(u,this),this.#s.config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:h,onFail:(u,m)=>{this.#a({type:"failed",failureCount:u,error:m})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(s){const t=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...bp(r.data,this.options),fetchMeta:s.meta??null};case"success":return this.#e=void 0,{...r,data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=s.error;return Vd(a)&&a.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=t(this.state),jr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:s})})}};function bp(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gp(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function V1(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Z1=class extends Cl{constructor(s={}){super(),this.config=s,this.#t=new Map}#t;build(s,t,r){const a=t.queryKey,i=t.queryHash??lh(a,t);let o=this.get(i);return o||(o=new W1({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(t),state:r,defaultOptions:s.getQueryDefaults(a)}),this.add(o)),o}add(s){this.#t.has(s.queryHash)||(this.#t.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#t.get(s.queryHash);t&&(s.destroy(),t===s&&this.#t.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){jr.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#t.get(s)}getAll(){return[...this.#t.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(r=>pf(t,r))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(r=>pf(s,r)):t}notify(s){jr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){jr.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){jr.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},G1=class extends yp{#t;#e;#s;constructor(s){super(),this.mutationId=s.mutationId,this.#e=s.mutationCache,this.#t=[],this.state=s.state||wp(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(t=>t!==s),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(s){const t=()=>{this.#r({type:"continue"})};this.#s=vp({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#r({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",a=!this.#s.canStart();try{if(r)t();else{this.#r({type:"pending",variables:s,isPaused:a}),await this.#e.config.onMutate?.(s,this);const o=await this.options.onMutate?.(s);o!==this.state.context&&this.#r({type:"pending",context:o,variables:s,isPaused:a})}const i=await this.#s.start();return await this.#e.config.onSuccess?.(i,s,this.state.context,this),await this.options.onSuccess?.(i,s,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,s,this.state.context),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,s,this.state.context,this),await this.options.onError?.(i,s,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,s,this.state.context),i}finally{this.#r({type:"error",error:i})}}finally{this.#e.runNext(this)}}#r(s){const t=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),jr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(s)}),this.#e.notify({mutation:this,type:"updated",action:s})})}};function wp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Y1=class extends Cl{constructor(s={}){super(),this.config=s,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(s,t,r){const a=new G1({mutationCache:this,mutationId:++this.#s,options:s.defaultMutationOptions(t),state:r});return this.add(a),a}add(s){this.#t.add(s);const t=Lc(s);if(typeof t=="string"){const r=this.#e.get(t);r?r.push(s):this.#e.set(t,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#t.delete(s)){const t=Lc(s);if(typeof t=="string"){const r=this.#e.get(t);if(r)if(r.length>1){const a=r.indexOf(s);a!==-1&&r.splice(a,1)}else r[0]===s&&this.#e.delete(t)}}this.notify({type:"removed",mutation:s})}canRun(s){const t=Lc(s);if(typeof t=="string"){const a=this.#e.get(t)?.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){const t=Lc(s);return typeof t=="string"?this.#e.get(t)?.find(a=>a!==s&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){jr.batch(()=>{this.#t.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(s){const t={exact:!0,...s};return this.getAll().find(r=>gf(t,r))}findAll(s={}){return this.getAll().filter(t=>gf(s,t))}notify(s){jr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return jr.batch(()=>Promise.all(s.map(t=>t.continue().catch(pn))))}};function Lc(s){return s.options.scope?.id}function yf(s){return{onFetch:(t,r)=>{const a=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let h={pages:[],pageParams:[]},u=0;const m=async()=>{let x=!1;const v=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},b=mp(t.options,t.fetchOptions),g=async(k,j,T)=>{if(x)return Promise.reject();if(j==null&&k.pages.length)return Promise.resolve(k);const P=(()=>{const ge={client:t.client,queryKey:t.queryKey,pageParam:j,direction:T?"backward":"forward",meta:t.options.meta};return v(ge),ge})(),B=await b(P),{maxPages:U}=t.options,Q=T?z1:F1;return{pages:Q(k.pages,B,U),pageParams:Q(k.pageParams,j,U)}};if(i&&o.length){const k=i==="backward",j=k?K1:bf,T={pages:o,pageParams:c},S=j(a,T);h=await g(T,S,k)}else{const k=s??o.length;do{const j=u===0?c[0]??a.initialPageParam:bf(a,h);if(u>0&&j==null)break;h=await g(h,j),u++}while(u<k)}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(m,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=m}}}function bf(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function K1(s,{pages:t,pageParams:r}){return t.length>0?s.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Np=class{#t;#e;#s;#r;#n;#i;#o;#a;constructor(s={}){this.#t=s.queryCache||new Z1,this.#e=s.mutationCache||new Y1,this.#s=s.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=dh.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=Yc.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(s){return this.#t.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#e.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),r=this.#t.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(Di(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(s){return this.#t.findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),o=this.#t.get(a.queryHash)?.state.data,c=O1(t,o);if(c!==void 0)return this.#t.build(this,a).setData(c,{...r,manual:!0})}setQueriesData(s,t,r){return jr.batch(()=>this.#t.findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state}removeQueries(s){const t=this.#t;jr.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=this.#t;return jr.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const r={revert:!0,...t},a=jr.batch(()=>this.#t.findAll(s).map(i=>i.cancel(r)));return Promise.all(a).then(pn).catch(pn)}invalidateQueries(s,t={}){return jr.batch(()=>(this.#t.findAll(s).forEach(r=>{r.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},t)))}refetchQueries(s,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=jr.batch(()=>this.#t.findAll(s).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(pn)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(pn)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=this.#t.build(this,t);return r.isStaleByTime(Di(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(pn).catch(pn)}fetchInfiniteQuery(s){return s.behavior=yf(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(pn).catch(pn)}ensureInfiniteQueryData(s){return s.behavior=yf(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Yc.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(s){this.#s=s}setQueryDefaults(s,t){this.#r.set(ko(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#r.values()],r={};return t.forEach(a=>{Xl(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,t){this.#n.set(ko(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#n.values()],r={};return t.forEach(a=>{Xl(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#s.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=lh(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ch&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#s.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},J1=class extends Cl{constructor(s,t){super(),this.options=t,this.#t=s,this.#a=null,this.#o=wu(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#s=void 0;#r=void 0;#n;#i;#o;#a;#p;#h;#f;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),wf(this.#e,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nu(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nu(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#e.removeObserver(this)}setOptions(s){const t=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ya(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),t._defaulted&&!Gc(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const a=this.hasListeners();a&&Nf(this.#e,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#e!==r||ya(this.options.enabled,this.#e)!==ya(t.enabled,this.#e)||Di(this.options.staleTime,this.#e)!==Di(t.staleTime,this.#e))&&this.#g();const i=this.#x();a&&(this.#e!==r||ya(this.options.enabled,this.#e)!==ya(t.enabled,this.#e)||i!==this.#l)&&this.#v(i)}getOptimisticResult(s){const t=this.#t.getQueryCache().build(this.#t,s),r=this.createResult(t,s);return Q1(this,r)&&(this.#r=r,this.#i=this.options,this.#n=this.#e.state),r}getCurrentResult(){return this.#r}trackResult(s,t){return new Proxy(s,{get:(r,a)=>(this.trackProp(a),t?.(a),Reflect.get(r,a))})}trackProp(s){this.#m.add(s)}getCurrentQuery(){return this.#e}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const t=this.#t.defaultQueryOptions(s),r=this.#t.getQueryCache().build(this.#t,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(s){return this.#u({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(s){this.#N();let t=this.#e.fetch(this.options,s);return s?.throwOnError||(t=t.catch(pn)),t}#g(){this.#b();const s=Di(this.options.staleTime,this.#e);if(So||this.#r.isStale||!vu(s))return;const r=hp(this.#r.dataUpdatedAt,s)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(s){this.#w(),this.#l=s,!(So||ya(this.options.enabled,this.#e)===!1||!vu(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||dh.isFocused())&&this.#u()},this.#l))}#y(){this.#g(),this.#v(this.#x())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(s,t){const r=this.#e,a=this.options,i=this.#r,o=this.#n,c=this.#i,u=s!==r?s.state:this.#s,{state:m}=s;let x={...m},v=!1,b;if(t._optimisticResults){const ee=this.hasListeners(),K=!ee&&wf(s,t),ue=ee&&Nf(s,r,t,a);(K||ue)&&(x={...x,...bp(m.data,s.options)}),t._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:g,errorUpdatedAt:k,status:j}=x;b=x.data;let T=!1;if(t.placeholderData!==void 0&&b===void 0&&j==="pending"){let ee;i?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(ee=i.data,T=!0):ee=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,ee!==void 0&&(j="success",b=bu(i?.data,ee,t),v=!0)}if(t.select&&b!==void 0&&!T)if(i&&b===o?.data&&t.select===this.#p)b=this.#h;else try{this.#p=t.select,b=t.select(b),b=bu(i?.data,b,t),this.#h=b,this.#a=null}catch(ee){this.#a=ee}this.#a&&(g=this.#a,b=this.#h,k=Date.now(),j="error");const S=x.fetchStatus==="fetching",P=j==="pending",B=j==="error",U=P&&S,Q=b!==void 0,ae={status:j,fetchStatus:x.fetchStatus,isPending:P,isSuccess:j==="success",isError:B,isInitialLoading:U,isLoading:U,data:b,dataUpdatedAt:x.dataUpdatedAt,error:g,errorUpdatedAt:k,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>u.dataUpdateCount||x.errorUpdateCount>u.errorUpdateCount,isFetching:S,isRefetching:S&&!P,isLoadingError:B&&!Q,isPaused:x.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:B&&Q,isStale:uh(s,t),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const ee=I=>{ae.status==="error"?I.reject(ae.error):ae.data!==void 0&&I.resolve(ae.data)},K=()=>{const I=this.#o=ae.promise=wu();ee(I)},ue=this.#o;switch(ue.status){case"pending":s.queryHash===r.queryHash&&ee(ue);break;case"fulfilled":(ae.status==="error"||ae.data!==ue.value)&&K();break;case"rejected":(ae.status!=="error"||ae.error!==ue.reason)&&K();break}}return ae}updateResult(){const s=this.#r,t=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#i=this.options,this.#n.data!==void 0&&(this.#f=this.#e),Gc(t,s))return;this.#r=t;const r=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!this.#m.size)return!0;const o=new Set(i??this.#m);return this.options.throwOnError&&o.add("error"),Object.keys(this.#r).some(c=>{const h=c;return this.#r[h]!==s[h]&&o.has(h)})};this.#j({listeners:r()})}#N(){const s=this.#t.getQueryCache().build(this.#t,this.options);if(s===this.#e)return;const t=this.#e;this.#e=s,this.#s=s.state,this.hasListeners()&&(t?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#j(s){jr.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function X1(s,t){return ya(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function wf(s,t){return X1(s,t)||s.state.data!==void 0&&Nu(s,t,t.refetchOnMount)}function Nu(s,t,r){if(ya(t.enabled,s)!==!1&&Di(t.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&uh(s,t)}return!1}function Nf(s,t,r,a){return(s!==t||ya(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&uh(s,r)}function uh(s,t){return ya(t.enabled,s)!==!1&&s.isStaleByTime(Di(t.staleTime,s))}function Q1(s,t){return!Gc(s.getCurrentResult(),t)}var e2=class extends Cl{#t;#e=void 0;#s;#r;constructor(t,r){super(),this.#t=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#t.defaultMutationOptions(t),Gc(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&ko(r.mutationKey)!==ko(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(t,r){return this.#r=r,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){const t=this.#s?.state??wp();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){jr.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#e.variables,a=this.#e.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,r,a),this.#r.onSettled?.(t.data,null,r,a)):t?.type==="error"&&(this.#r.onError?.(t.error,r,a),this.#r.onSettled?.(void 0,t.error,r,a))}this.listeners.forEach(r=>{r(this.#e)})})}},jp=_.createContext(void 0),hh=s=>{const t=_.useContext(jp);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},_p=({client:s,children:t})=>(_.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(jp.Provider,{value:s,children:t})),Sp=_.createContext(!1),t2=()=>_.useContext(Sp);Sp.Provider;function s2(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var r2=_.createContext(s2()),n2=()=>_.useContext(r2),a2=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},i2=s=>{_.useEffect(()=>{s.clearReset()},[s])},o2=({result:s,errorResetBoundary:t,throwOnError:r,query:a,suspense:i})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&(i&&s.data===void 0||pp(r,[s.error,a])),l2=s=>{if(s.suspense){const t=a=>a==="static"?a:Math.max(a??1e3,1e3),r=s.staleTime;s.staleTime=typeof r=="function"?(...a)=>t(r(...a)):t(r),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},c2=(s,t)=>s.isLoading&&s.isFetching&&!t,d2=(s,t)=>s?.suspense&&t.isPending,jf=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function u2(s,t,r){const a=t2(),i=n2(),o=hh(),c=o.defaultQueryOptions(s);o.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=a?"isRestoring":"optimistic",l2(c),a2(c,i),i2(i);const h=!o.getQueryCache().get(c.queryHash),[u]=_.useState(()=>new t(o,c)),m=u.getOptimisticResult(c),x=!a&&s.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(v=>{const b=x?u.subscribe(jr.batchCalls(v)):pn;return u.updateResult(),b},[u,x]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),_.useEffect(()=>{u.setOptions(c)},[c,u]),d2(c,m))throw jf(c,u,i);if(o2({result:m,errorResetBoundary:i,throwOnError:c.throwOnError,query:o.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw m.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(c,m),c.experimental_prefetchInRender&&!So&&c2(m,a)&&(h?jf(c,u,i):o.getQueryCache().get(c.queryHash)?.promise)?.catch(pn).finally(()=>{u.updateResult()}),c.notifyOnChangeProps?m:u.trackResult(m)}function Kc(s,t){return u2(s,J1)}function _f(s,t){const r=hh(),[a]=_.useState(()=>new e2(r,s));_.useEffect(()=>{a.setOptions(s)},[a,s]);const i=_.useSyncExternalStore(_.useCallback(c=>a.subscribe(jr.batchCalls(c)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=_.useCallback((c,h)=>{a.mutate(c,h).catch(pn)},[a]);if(i.error&&pp(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}const h2={development:{baseUrl:"http://localhost:8080"},production:{baseUrl:"http://localhost:8080"}},st=()=>h2["production"]?.baseUrl;async function f2(s){const t=st(),r=s.startsWith("http")?s:`${t}${s}`,a=sessionStorage.getItem("token"),i={"Content-Type":"application/json",Accept:"application/json"};a&&(i.Authorization=`Bearer ${a}`);try{const o=await fetch(r,{method:"GET",headers:i,mode:"cors",credentials:"include"});return o.ok?await o.json():null}catch{return null}}const m2=async({queryKey:s})=>await f2(s[0]),kp=new Np({defaultOptions:{queries:{queryFn:m2,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:5*60*1e3},mutations:{retry:!1}}}),p2={theme:"system",setTheme:()=>null},Cp=_.createContext(p2);function Pp({children:s,defaultTheme:t="system",storageKey:r="lifebee-ui-theme",...a}){const[i,o]=_.useState(()=>{try{return localStorage.getItem(r)||t}catch{return t}});_.useEffect(()=>{const h=window.document.documentElement;if(h.classList.remove("light","dark"),i==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";h.classList.add(u);return}h.classList.add(i)},[i]);const c={theme:i,setTheme:h=>{try{localStorage.setItem(r,h)}catch{}o(h)}};return e.jsx(Cp.Provider,{...a,value:c,children:s})}const Lp=()=>{const s=_.useContext(Cp);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},g2=1,x2=1e6;let Zd=0;function v2(){return Zd=(Zd+1)%Number.MAX_SAFE_INTEGER,Zd.toString()}const Gd=new Map,Sf=s=>{if(Gd.has(s))return;const t=setTimeout(()=>{Gd.delete(s),Gl({type:"REMOVE_TOAST",toastId:s})},x2);Gd.set(s,t)},y2=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,g2)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Sf(r):s.toasts.forEach(a=>{Sf(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},zc=[];let Bc={toasts:[]};function Gl(s){Bc=y2(Bc,s),zc.forEach(t=>{t(Bc)})}function b2({...s}){const t=v2(),r=i=>Gl({type:"UPDATE_TOAST",toast:{...i,id:t}}),a=()=>Gl({type:"DISMISS_TOAST",toastId:t});return Gl({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:i=>{i||a()}}}),{id:t,dismiss:a,update:r}}function ks(){const[s,t]=_.useState(Bc);return _.useEffect(()=>(zc.push(t),()=>{const r=zc.indexOf(t);r>-1&&zc.splice(r,1)}),[s]),{...s,toast:b2,dismiss:r=>Gl({type:"DISMISS_TOAST",toastId:r})}}var Ap=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),w2="VisuallyHidden",hd=_.forwardRef((s,t)=>e.jsx(ts.span,{...s,ref:t,style:{...Ap,...s.style}}));hd.displayName=w2;var N2=hd,fh="ToastProvider",[mh,j2,_2]=$m("Toast"),[Tp,T_]=Vi("Toast",[_2]),[S2,fd]=Tp(fh),Ep=s=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:c}=s,[h,u]=_.useState(null),[m,x]=_.useState(0),v=_.useRef(!1),b=_.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${fh}\`. Expected non-empty \`string\`.`),e.jsx(mh.Provider,{scope:t,children:e.jsx(S2,{scope:t,label:r,duration:a,swipeDirection:i,swipeThreshold:o,toastCount:m,viewport:h,onViewportChange:u,onToastAdd:_.useCallback(()=>x(g=>g+1),[]),onToastRemove:_.useCallback(()=>x(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:b,children:c})})};Ep.displayName=fh;var Ip="ToastViewport",k2=["F8"],ju="toast.viewportPause",_u="toast.viewportResume",Rp=_.forwardRef((s,t)=>{const{__scopeToast:r,hotkey:a=k2,label:i="Notifications ({hotkey})",...o}=s,c=fd(Ip,r),h=j2(r),u=_.useRef(null),m=_.useRef(null),x=_.useRef(null),v=_.useRef(null),b=Us(t,v,c.onViewportChange),g=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=c.toastCount>0;_.useEffect(()=>{const T=S=>{a.length!==0&&a.every(B=>S[B]||S.code===B)&&v.current?.focus()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[a]),_.useEffect(()=>{const T=u.current,S=v.current;if(k&&T&&S){const P=()=>{if(!c.isClosePausedRef.current){const ge=new CustomEvent(ju);S.dispatchEvent(ge),c.isClosePausedRef.current=!0}},B=()=>{if(c.isClosePausedRef.current){const ge=new CustomEvent(_u);S.dispatchEvent(ge),c.isClosePausedRef.current=!1}},U=ge=>{!T.contains(ge.relatedTarget)&&B()},Q=()=>{T.contains(document.activeElement)||B()};return T.addEventListener("focusin",P),T.addEventListener("focusout",U),T.addEventListener("pointermove",P),T.addEventListener("pointerleave",Q),window.addEventListener("blur",P),window.addEventListener("focus",B),()=>{T.removeEventListener("focusin",P),T.removeEventListener("focusout",U),T.removeEventListener("pointermove",P),T.removeEventListener("pointerleave",Q),window.removeEventListener("blur",P),window.removeEventListener("focus",B)}}},[k,c.isClosePausedRef]);const j=_.useCallback(({tabbingDirection:T})=>{const P=h().map(B=>{const U=B.ref.current,Q=[U,...z2(U)];return T==="forwards"?Q:Q.reverse()});return(T==="forwards"?P.reverse():P).flat()},[h]);return _.useEffect(()=>{const T=v.current;if(T){const S=P=>{const B=P.altKey||P.ctrlKey||P.metaKey;if(P.key==="Tab"&&!B){const Q=document.activeElement,ge=P.shiftKey;if(P.target===T&&ge){m.current?.focus();return}const K=j({tabbingDirection:ge?"backwards":"forwards"}),ue=K.findIndex(I=>I===Q);Yd(K.slice(ue+1))?P.preventDefault():ge?m.current?.focus():x.current?.focus()}};return T.addEventListener("keydown",S),()=>T.removeEventListener("keydown",S)}},[h,j]),e.jsxs(d1,{ref:u,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:k?void 0:"none"},children:[k&&e.jsx(Su,{ref:m,onFocusFromOutsideViewport:()=>{const T=j({tabbingDirection:"forwards"});Yd(T)}}),e.jsx(mh.Slot,{scope:r,children:e.jsx(ts.ol,{tabIndex:-1,...o,ref:b})}),k&&e.jsx(Su,{ref:x,onFocusFromOutsideViewport:()=>{const T=j({tabbingDirection:"backwards"});Yd(T)}})]})});Rp.displayName=Ip;var Mp="ToastFocusProxy",Su=_.forwardRef((s,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...i}=s,o=fd(Mp,r);return e.jsx(hd,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:c=>{const h=c.relatedTarget;!o.viewport?.contains(h)&&a()}})});Su.displayName=Mp;var lc="Toast",C2="toast.swipeStart",P2="toast.swipeMove",L2="toast.swipeCancel",A2="toast.swipeEnd",Op=_.forwardRef((s,t)=>{const{forceMount:r,open:a,defaultOpen:i,onOpenChange:o,...c}=s,[h,u]=gl({prop:a,defaultProp:i??!0,onChange:o,caller:lc});return e.jsx(Io,{present:r||h,children:e.jsx(I2,{open:h,...c,ref:t,onClose:()=>u(!1),onPause:Bn(s.onPause),onResume:Bn(s.onResume),onSwipeStart:zt(s.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:zt(s.onSwipeMove,m=>{const{x,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:zt(s.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:zt(s.onSwipeEnd,m=>{const{x,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),u(!1)})})})});Op.displayName=lc;var[T2,E2]=Tp(lc,{onClose(){}}),I2=_.forwardRef((s,t)=>{const{__scopeToast:r,type:a="foreground",duration:i,open:o,onClose:c,onEscapeKeyDown:h,onPause:u,onResume:m,onSwipeStart:x,onSwipeMove:v,onSwipeCancel:b,onSwipeEnd:g,...k}=s,j=fd(lc,r),[T,S]=_.useState(null),P=Us(t,Y=>S(Y)),B=_.useRef(null),U=_.useRef(null),Q=i||j.duration,ge=_.useRef(0),ae=_.useRef(Q),ee=_.useRef(0),{onToastAdd:K,onToastRemove:ue}=j,I=Bn(()=>{T?.contains(document.activeElement)&&j.viewport?.focus(),c()}),q=_.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(ee.current),ge.current=new Date().getTime(),ee.current=window.setTimeout(I,Y))},[I]);_.useEffect(()=>{const Y=j.viewport;if(Y){const he=()=>{q(ae.current),m?.()},pe=()=>{const oe=new Date().getTime()-ge.current;ae.current=ae.current-oe,window.clearTimeout(ee.current),u?.()};return Y.addEventListener(ju,pe),Y.addEventListener(_u,he),()=>{Y.removeEventListener(ju,pe),Y.removeEventListener(_u,he)}}},[j.viewport,Q,u,m,q]),_.useEffect(()=>{o&&!j.isClosePausedRef.current&&q(Q)},[o,Q,j.isClosePausedRef,q]),_.useEffect(()=>(K(),()=>ue()),[K,ue]);const ne=_.useMemo(()=>T?Up(T):null,[T]);return j.viewport?e.jsxs(e.Fragment,{children:[ne&&e.jsx(R2,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:ne}),e.jsx(T2,{scope:r,onClose:I,children:th.createPortal(e.jsx(mh.ItemSlot,{scope:r,children:e.jsx(u1,{asChild:!0,onEscapeKeyDown:zt(h,()=>{j.isFocusedToastEscapeKeyDownRef.current||I(),j.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(ts.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":j.swipeDirection,...k,ref:P,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:zt(s.onKeyDown,Y=>{Y.key==="Escape"&&(h?.(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(j.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:zt(s.onPointerDown,Y=>{Y.button===0&&(B.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:zt(s.onPointerMove,Y=>{if(!B.current)return;const he=Y.clientX-B.current.x,pe=Y.clientY-B.current.y,oe=!!U.current,ie=["left","right"].includes(j.swipeDirection),Ne=["left","up"].includes(j.swipeDirection)?Math.min:Math.max,J=ie?Ne(0,he):0,fe=ie?0:Ne(0,pe),R=Y.pointerType==="touch"?10:2,E={x:J,y:fe},D={originalEvent:Y,delta:E};oe?(U.current=E,Ac(P2,v,D,{discrete:!1})):kf(E,j.swipeDirection,R)?(U.current=E,Ac(C2,x,D,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(he)>R||Math.abs(pe)>R)&&(B.current=null)}),onPointerUp:zt(s.onPointerUp,Y=>{const he=U.current,pe=Y.target;if(pe.hasPointerCapture(Y.pointerId)&&pe.releasePointerCapture(Y.pointerId),U.current=null,B.current=null,he){const oe=Y.currentTarget,ie={originalEvent:Y,delta:he};kf(he,j.swipeDirection,j.swipeThreshold)?Ac(A2,g,ie,{discrete:!0}):Ac(L2,b,ie,{discrete:!0}),oe.addEventListener("click",Ne=>Ne.preventDefault(),{once:!0})}})})})}),j.viewport)})]}):null}),R2=s=>{const{__scopeToast:t,children:r,...a}=s,i=fd(lc,t),[o,c]=_.useState(!1),[h,u]=_.useState(!1);return D2(()=>c(!0)),_.useEffect(()=>{const m=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(m)},[]),h?null:e.jsx(Um,{asChild:!0,children:e.jsx(hd,{...a,children:o&&e.jsxs(e.Fragment,{children:[i.label," ",r]})})})},M2="ToastTitle",Dp=_.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(ts.div,{...a,ref:t})});Dp.displayName=M2;var O2="ToastDescription",Fp=_.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(ts.div,{...a,ref:t})});Fp.displayName=O2;var zp="ToastAction",Bp=_.forwardRef((s,t)=>{const{altText:r,...a}=s;return r.trim()?e.jsx($p,{altText:r,asChild:!0,children:e.jsx(ph,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${zp}\`. Expected non-empty \`string\`.`),null)});Bp.displayName=zp;var qp="ToastClose",ph=_.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s,i=E2(qp,r);return e.jsx($p,{asChild:!0,children:e.jsx(ts.button,{type:"button",...a,ref:t,onClick:zt(s.onClick,i.onClose)})})});ph.displayName=qp;var $p=_.forwardRef((s,t)=>{const{__scopeToast:r,altText:a,...i}=s;return e.jsx(ts.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...i,ref:t})});function Up(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),F2(a)){const i=a.ariaHidden||a.hidden||a.style.display==="none",o=a.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const c=a.dataset.radixToastAnnounceAlt;c&&t.push(c)}else t.push(...Up(a))}}),t}function Ac(s,t,r,{discrete:a}){const i=r.originalEvent.currentTarget,o=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(s,t,{once:!0}),a?h1(i,o):i.dispatchEvent(o)}var kf=(s,t,r=0)=>{const a=Math.abs(s.x),i=Math.abs(s.y),o=a>i;return t==="left"||t==="right"?o&&a>r:!o&&i>r};function D2(s=()=>{}){const t=Bn(s);$n(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function F2(s){return s.nodeType===s.ELEMENT_NODE}function z2(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const i=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||i?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Yd(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var B2=Ep,Hp=Rp,Wp=Op,Vp=Dp,Zp=Fp,Gp=Bp,Yp=ph;/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ct=(s,t)=>{const r=_.forwardRef(({color:a="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:h="",children:u,...m},x)=>_.createElement("svg",{ref:x,...q2,width:i,height:i,stroke:a,strokeWidth:c?Number(o)*24/Number(i):o,className:["lucide",`lucide-${$2(s)}`,h].join(" "),...m},[...t.map(([v,b])=>_.createElement(v,b)),...Array.isArray(u)?u:[u]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=ct("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ct("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=ct("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=ct("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ct("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=ct("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=ct("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=ct("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=ct("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=ct("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=ct("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=ct("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ct("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ct("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=ct("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ct("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ct("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=ct("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=ct("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=ct("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=ct("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=ct("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=ct("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=ct("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=ct("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=ct("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=ct("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=ct("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ct("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=ct("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=ct("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=ct("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=ct("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=ct("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ct("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=ct("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=ct("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ct("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ct("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ct("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ct("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=ct("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=ct("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ct("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=ct("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=ct("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=ct("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=ct("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=ct("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ct("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=ct("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=ct("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=ct("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=ct("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=ct("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=ct("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=ct("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=ct("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=ct("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ct("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=ct("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=ct("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ct("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=ct("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ct("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ct("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=ct("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function ut(...s){return E1(I1(s))}const ny=B2,ig=_.forwardRef(({className:s,...t},r)=>e.jsx(Hp,{ref:r,className:ut("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] pointer-events-none",s),...t}));ig.displayName=Hp.displayName;const ay=oc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-xl",destructive:"destructive group border-red-200 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 shadow-xl"}},defaultVariants:{variant:"default"}}),og=_.forwardRef(({className:s,variant:t,...r},a)=>e.jsx(Wp,{ref:a,className:ut(ay({variant:t}),s),...r}));og.displayName=Wp.displayName;const iy=_.forwardRef(({className:s,...t},r)=>e.jsx(Gp,{ref:r,className:ut("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));iy.displayName=Gp.displayName;const lg=_.forwardRef(({className:s,...t},r)=>e.jsx(Yp,{ref:r,className:ut("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(Mo,{className:"h-4 w-4"})}));lg.displayName=Yp.displayName;const cg=_.forwardRef(({className:s,...t},r)=>e.jsx(Vp,{ref:r,className:ut("text-sm font-semibold",s),...t}));cg.displayName=Vp.displayName;const dg=_.forwardRef(({className:s,...t},r)=>e.jsx(Zp,{ref:r,className:ut("text-sm opacity-90",s),...t}));dg.displayName=Zp.displayName;function ug(){const{toasts:s}=ks();return e.jsxs(ny,{children:[s.map(function({id:t,title:r,description:a,action:i,...o}){return e.jsxs(og,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(cg,{children:r}),a&&e.jsx(dg,{children:a})]}),i,e.jsx(lg,{})]},t)}),e.jsx(ig,{})]})}class oy extends _.Component{state={hasError:!1};static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.warn("Error caught by boundary:",t,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Algo deu errado"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Ocorreu um erro inesperado. Tente recarregar a página."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-500 text-black px-4 py-2 rounded-lg font-medium",children:"Recarregar página"})]})}):this.props.children}}function ly(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var r,a,i,o,c=[],h="",u=s.split("/");for(u[0]||u.shift();i=u.shift();)r=i[0],r==="*"?(c.push(r),h+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(a=i.indexOf("?",1),o=i.indexOf(".",1),c.push(i.substring(1,~a?a:~o?o:i.length)),h+=~a&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(h+=(~a?"?":"")+"\\"+i.substring(o))):h+="/"+i;return{keys:c,pattern:new RegExp("^"+h+(t?"(?=$|/)":"/?$"),"i")}}var Kd={exports:{}},Jd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf;function cy(){if(Lf)return Jd;Lf=1;var s=T1();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var r=typeof Object.is=="function"?Object.is:t,a=s.useState,i=s.useEffect,o=s.useLayoutEffect,c=s.useDebugValue;function h(v,b){var g=b(),k=a({inst:{value:g,getSnapshot:b}}),j=k[0].inst,T=k[1];return o(function(){j.value=g,j.getSnapshot=b,u(j)&&T({inst:j})},[v,g,b]),i(function(){return u(j)&&T({inst:j}),v(function(){u(j)&&T({inst:j})})},[v]),c(g),g}function u(v){var b=v.getSnapshot;v=v.value;try{var g=b();return!r(v,g)}catch{return!0}}function m(v,b){return b()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return Jd.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:x,Jd}var Af;function dy(){return Af||(Af=1,Kd.exports=cy()),Kd.exports}var hg=dy();const uy=f1.useInsertionEffect,hy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fy=hy?_.useLayoutEffect:_.useEffect,my=uy||fy,fg=s=>{const t=_.useRef([s,(...r)=>t[0](...r)]).current;return my(()=>{t[0]=s}),t[1]},py="popstate",wh="pushState",Nh="replaceState",gy="hashchange",Tf=[py,wh,Nh,gy],xy=s=>{for(const t of Tf)addEventListener(t,s);return()=>{for(const t of Tf)removeEventListener(t,s)}},mg=(s,t)=>hg.useSyncExternalStore(xy,s,t),vy=()=>location.search,yy=({ssrSearch:s=""}={})=>mg(vy,()=>s),Ef=()=>location.pathname,by=({ssrPath:s}={})=>mg(Ef,s?()=>s:Ef),wy=(s,{replace:t=!1,state:r=null}={})=>history[t?Nh:wh](r,"",s),Ny=(s={})=>[by(s),wy],If=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[If]>"u"){for(const s of[wh,Nh]){const t=history[s];history[s]=function(){const r=t.apply(this,arguments),a=new Event(s);return a.arguments=arguments,dispatchEvent(a),r}}Object.defineProperty(window,If,{value:!0})}const jy=(s,t)=>t.toLowerCase().indexOf(s.toLowerCase())?"~"+t:t.slice(s.length)||"/",pg=(s="")=>s==="/"?"":s,_y=(s,t)=>s[0]==="~"?s.slice(1):pg(t)+s,Sy=(s="",t)=>jy(Rf(pg(s)),Rf(t)),Rf=s=>{try{return decodeURI(s)}catch{return s}},gg={hook:Ny,searchHook:yy,parser:ly,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:s=>s},xg=_.createContext(gg),Ll=()=>_.useContext(xg),vg={},yg=_.createContext(vg),bg=()=>_.useContext(yg),md=s=>{const[t,r]=s.hook(s);return[Sy(s.base,t),fg((a,i)=>r(_y(a,s.base),i))]},qs=()=>md(Ll()),jh=(s,t,r,a)=>{const{pattern:i,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:s(t||"*",a),c=i.exec(r)||[],[h,...u]=c;return h!==void 0?[!0,(()=>{const m=o!==!1?Object.fromEntries(o.map((v,b)=>[v,u[b]])):c.groups;let x={...u};return m&&Object.assign(x,m),x})(),...a?[h]:[]]:[!1,null]},wg=s=>jh(Ll().parser,s,qs()[0]),ky=({children:s,...t})=>{const r=Ll(),a=t.hook?gg:r;let i=a;const[o,c]=t.ssrPath?.split("?")??[];c&&(t.ssrSearch=c,t.ssrPath=o),t.hrefs=t.hrefs??t.hook?.hrefs;let h=_.useRef({}),u=h.current,m=u;for(let x in a){const v=x==="base"?a[x]+(t[x]||""):t[x]||a[x];u===m&&v!==m[x]&&(h.current=m={...m}),m[x]=v,(v!==a[x]||v!==i[x])&&(i=m)}return _.createElement(xg.Provider,{value:i,children:s})},Mf=({children:s,component:t},r)=>t?_.createElement(t,{params:r}):typeof s=="function"?s(r):s,Cy=s=>{let t=_.useRef(vg);const r=t.current;return t.current=Object.keys(s).length!==Object.keys(r).length||Object.entries(s).some(([a,i])=>i!==r[a])?s:r},ns=({path:s,nest:t,match:r,...a})=>{const i=Ll(),[o]=md(i),[c,h,u]=r??jh(i.parser,s,o,t),m=Cy({...bg(),...h});if(!c)return null;const x=u?_.createElement(ky,{base:u},Mf(a,m)):Mf(a,m);return _.createElement(yg.Provider,{value:m,children:x})},Os=_.forwardRef((s,t)=>{const r=Ll(),[a,i]=md(r),{to:o="",href:c=o,onClick:h,asChild:u,children:m,className:x,replace:v,state:b,...g}=s,k=fg(T=>{T.ctrlKey||T.metaKey||T.altKey||T.shiftKey||T.button!==0||(h?.(T),T.defaultPrevented||(T.preventDefault(),i(c,s)))}),j=r.hrefs(c[0]==="~"?c.slice(1):r.base+c,r);return u&&_.isValidElement(m)?_.cloneElement(m,{onClick:k,href:j}):_.createElement("a",{...g,onClick:k,href:j,className:x?.call?x(a===c):x,children:m,ref:t})}),Ng=s=>Array.isArray(s)?s.flatMap(t=>Ng(t&&t.type===_.Fragment?t.props.children:t)):[s],Xd=({children:s,location:t})=>{const r=Ll(),[a]=md(r);for(const i of Ng(s)){let o=0;if(_.isValidElement(i)&&(o=jh(r.parser,i.props.path,t||a,i.props.nest))[0])return _.cloneElement(i,{match:o})}return null};var[pd,E_]=Vi("Tooltip",[ud]),gd=ud(),jg="TooltipProvider",Py=700,ku="tooltip.open",[Ly,_h]=pd(jg),_g=s=>{const{__scopeTooltip:t,delayDuration:r=Py,skipDelayDuration:a=300,disableHoverableContent:i=!1,children:o}=s,c=_.useRef(!0),h=_.useRef(!1),u=_.useRef(0);return _.useEffect(()=>{const m=u.current;return()=>window.clearTimeout(m)},[]),e.jsx(Ly,{scope:t,isOpenDelayedRef:c,delayDuration:r,onOpen:_.useCallback(()=>{window.clearTimeout(u.current),c.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:h,onPointerInTransitChange:_.useCallback(m=>{h.current=m},[]),disableHoverableContent:i,children:o})};_g.displayName=jg;var tc="Tooltip",[Ay,xd]=pd(tc),Sg=s=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:i,onOpenChange:o,disableHoverableContent:c,delayDuration:h}=s,u=_h(tc,s.__scopeTooltip),m=gd(t),[x,v]=_.useState(null),b=ic(),g=_.useRef(0),k=c??u.disableHoverableContent,j=h??u.delayDuration,T=_.useRef(!1),[S,P]=gl({prop:a,defaultProp:i??!1,onChange:ae=>{ae?(u.onOpen(),document.dispatchEvent(new CustomEvent(ku))):u.onClose(),o?.(ae)},caller:tc}),B=_.useMemo(()=>S?T.current?"delayed-open":"instant-open":"closed",[S]),U=_.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T.current=!1,P(!0)},[P]),Q=_.useCallback(()=>{window.clearTimeout(g.current),g.current=0,P(!1)},[P]),ge=_.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{T.current=!0,P(!0),g.current=0},j)},[j,P]);return _.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),e.jsx(Zm,{...m,children:e.jsx(Ay,{scope:t,contentId:b,open:S,stateAttribute:B,trigger:x,onTriggerChange:v,onTriggerEnter:_.useCallback(()=>{u.isOpenDelayedRef.current?ge():U()},[u.isOpenDelayedRef,ge,U]),onTriggerLeave:_.useCallback(()=>{k?Q():(window.clearTimeout(g.current),g.current=0)},[Q,k]),onOpen:U,onClose:Q,disableHoverableContent:k,children:r})})};Sg.displayName=tc;var Cu="TooltipTrigger",kg=_.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,i=xd(Cu,r),o=_h(Cu,r),c=gd(r),h=_.useRef(null),u=Us(t,h,i.onTriggerChange),m=_.useRef(!1),x=_.useRef(!1),v=_.useCallback(()=>m.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),e.jsx(Gm,{asChild:!0,...c,children:e.jsx(ts.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...a,ref:u,onPointerMove:zt(s.onPointerMove,b=>{b.pointerType!=="touch"&&!x.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),x.current=!0)}),onPointerLeave:zt(s.onPointerLeave,()=>{i.onTriggerLeave(),x.current=!1}),onPointerDown:zt(s.onPointerDown,()=>{i.open&&i.onClose(),m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:zt(s.onFocus,()=>{m.current||i.onOpen()}),onBlur:zt(s.onBlur,i.onClose),onClick:zt(s.onClick,i.onClose)})})});kg.displayName=Cu;var Ty="TooltipPortal",[I_,Ey]=pd(Ty,{forceMount:void 0}),bl="TooltipContent",Cg=_.forwardRef((s,t)=>{const r=Ey(bl,s.__scopeTooltip),{forceMount:a=r.forceMount,side:i="top",...o}=s,c=xd(bl,s.__scopeTooltip);return e.jsx(Io,{present:a||c.open,children:c.disableHoverableContent?e.jsx(Pg,{side:i,...o,ref:t}):e.jsx(Iy,{side:i,...o,ref:t})})}),Iy=_.forwardRef((s,t)=>{const r=xd(bl,s.__scopeTooltip),a=_h(bl,s.__scopeTooltip),i=_.useRef(null),o=Us(t,i),[c,h]=_.useState(null),{trigger:u,onClose:m}=r,x=i.current,{onPointerInTransitChange:v}=a,b=_.useCallback(()=>{h(null),v(!1)},[v]),g=_.useCallback((k,j)=>{const T=k.currentTarget,S={x:k.clientX,y:k.clientY},P=Fy(S,T.getBoundingClientRect()),B=zy(S,P),U=By(j.getBoundingClientRect()),Q=$y([...B,...U]);h(Q),v(!0)},[v]);return _.useEffect(()=>()=>b(),[b]),_.useEffect(()=>{if(u&&x){const k=T=>g(T,x),j=T=>g(T,u);return u.addEventListener("pointerleave",k),x.addEventListener("pointerleave",j),()=>{u.removeEventListener("pointerleave",k),x.removeEventListener("pointerleave",j)}}},[u,x,g,b]),_.useEffect(()=>{if(c){const k=j=>{const T=j.target,S={x:j.clientX,y:j.clientY},P=u?.contains(T)||x?.contains(T),B=!qy(S,c);P?b():B&&(b(),m())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[u,x,c,m,b]),e.jsx(Pg,{...s,ref:o})}),[Ry,My]=pd(tc,{isInside:!1}),Oy=Vm("TooltipContent"),Pg=_.forwardRef((s,t)=>{const{__scopeTooltip:r,children:a,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:c,...h}=s,u=xd(bl,r),m=gd(r),{onClose:x}=u;return _.useEffect(()=>(document.addEventListener(ku,x),()=>document.removeEventListener(ku,x)),[x]),_.useEffect(()=>{if(u.trigger){const v=b=>{b.target?.contains(u.trigger)&&x()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[u.trigger,x]),e.jsx(Hm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:v=>v.preventDefault(),onDismiss:x,children:e.jsxs(Wm,{"data-state":u.stateAttribute,...m,...h,ref:t,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Oy,{children:a}),e.jsx(Ry,{scope:r,isInside:!0,children:e.jsx(N2,{id:u.contentId,role:"tooltip",children:i||a})})]})})});Cg.displayName=bl;var Lg="TooltipArrow",Dy=_.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,i=gd(r);return My(Lg,r).isInside?null:e.jsx(Ym,{...i,...a,ref:t})});Dy.displayName=Lg;function Fy(s,t){const r=Math.abs(t.top-s.y),a=Math.abs(t.bottom-s.y),i=Math.abs(t.right-s.x),o=Math.abs(t.left-s.x);switch(Math.min(r,a,i,o)){case o:return"left";case i:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function zy(s,t,r=5){const a=[];switch(t){case"top":a.push({x:s.x-r,y:s.y+r},{x:s.x+r,y:s.y+r});break;case"bottom":a.push({x:s.x-r,y:s.y-r},{x:s.x+r,y:s.y-r});break;case"left":a.push({x:s.x+r,y:s.y-r},{x:s.x+r,y:s.y+r});break;case"right":a.push({x:s.x-r,y:s.y-r},{x:s.x-r,y:s.y+r});break}return a}function By(s){const{top:t,right:r,bottom:a,left:i}=s;return[{x:i,y:t},{x:r,y:t},{x:r,y:a},{x:i,y:a}]}function qy(s,t){const{x:r,y:a}=s;let i=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const h=t[o],u=t[c],m=h.x,x=h.y,v=u.x,b=u.y;x>a!=b>a&&r<(v-m)*(a-x)/(b-x)+m&&(i=!i)}return i}function $y(s){const t=s.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),Uy(t)}function Uy(s){if(s.length<=1)return s.slice();const t=[];for(let a=0;a<s.length;a++){const i=s[a];for(;t.length>=2;){const o=t[t.length-1],c=t[t.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let a=s.length-1;a>=0;a--){const i=s[a];for(;r.length>=2;){const o=r[r.length-1],c=r[r.length-2];if((o.x-c.x)*(i.y-c.y)>=(o.y-c.y)*(i.x-c.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Hy=_g,Wy=Sg,Vy=kg,Ag=Cg;const Tg=Hy,Zy=Wy,Gy=Vy,Eg=_.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Ag,{ref:a,sideOffset:t,className:ut("z-50 overflow-hidden rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-1.5 text-sm text-gray-900 dark:text-white shadow-lg animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...r}));Eg.displayName=Ag.displayName;const Yy="/assets/new-logo-ISLgSUsv.png";function dc({size:s=40,className:t=""}){return e.jsx("img",{src:Yy,alt:"Logo LifeBee",width:s,height:s,className:t,style:{objectFit:"contain",display:"block"}})}function Ky({onComplete:s}){const[t,r]=_.useState(0);return _.useEffect(()=>{const a=setInterval(()=>{r(i=>i>=100?(clearInterval(a),setTimeout(s,500),100):i+2)},30);return()=>clearInterval(a)},[s]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1a1a] via-[#f4c430] to-[#fdf6e3] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-[#fdf6e3]/20 backdrop-blur-sm rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center shadow-2xl animate-pulse",children:e.jsx("div",{className:"bg-[#fdf6e3] rounded-full w-24 h-24 flex items-center justify-center",children:e.jsx(dc,{size:60,className:"animate-bounce"})})}),e.jsx("h1",{className:"text-4xl font-bold text-[#fdf6e3] mb-2",children:"LifeBee"}),e.jsx("p",{className:"text-[#fdf6e3]/80 text-lg mb-8",children:"Conectando você aos melhores profissionais de saúde"}),e.jsx("div",{className:"w-64 mx-auto bg-[#fdf6e3]/20 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#fdf6e3] transition-all duration-300 ease-out rounded-full",style:{width:`${t}%`}})}),e.jsxs("p",{className:"text-[#fdf6e3]/70 text-sm mt-4",children:["Carregando... ",t,"%"]})]})})}const Of=()=>sessionStorage.getItem("token"),Df=s=>{sessionStorage.setItem("token",s)},Jy=()=>sessionStorage.getItem("user"),Ff=s=>{sessionStorage.setItem("user",s)},Tc=()=>{sessionStorage.removeItem("token"),sessionStorage.removeItem("user")};function cr(){const[s,t]=_.useState({user:null,isLoading:!0,isAuthenticated:!1});return _.useEffect(()=>{(async()=>{console.log("🔐 useAuth: Verificando token...");const o=localStorage.getItem("token"),c=localStorage.getItem("user");o&&!Of()&&(console.log("📦 Migrando token de localStorage para sessionStorage..."),Df(o),c&&Ff(c),localStorage.removeItem("token"),localStorage.removeItem("user"));const h=Of(),u=Jy();if(console.log("🔐 useAuth: Token presente:",!!h),console.log("🔐 useAuth: UserData presente:",!!u),h&&(!h.includes(".")||h.split(".").length!==3||h.length<50)){console.error("❌ useAuth: Token corrompido detectado! Limpando..."),console.log("Token length:",h.length),Tc(),t({user:null,isLoading:!1,isAuthenticated:!1});return}if(h&&u)try{console.log("🔐 useAuth: Verificando token com backend...");const m=await fetch(`${st()}/api/user`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}});if(m.ok){const x=await m.json();console.log("🔐 useAuth: Usuário verificado com sucesso:",x),t({user:x,isLoading:!1,isAuthenticated:!0})}else console.error("❌ useAuth: Token inválido no backend (status:",m.status,")"),Tc(),t({user:null,isLoading:!1,isAuthenticated:!1})}catch(m){console.error("❌ useAuth: Erro ao verificar token:",m),console.log("🔐 useAuth: Limpando dados corrompidos..."),Tc(),t({user:null,isLoading:!1,isAuthenticated:!1})}else t({user:null,isLoading:!1,isAuthenticated:!1})})()},[]),{...s,login:(i,o)=>{Df(i),Ff(JSON.stringify(o)),t({user:o,isLoading:!1,isAuthenticated:!0})},logout:()=>{Tc(),t({user:null,isLoading:!1,isAuthenticated:!1})}}}const Sh=oc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Te=_.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...i},o)=>{const c=a?m1:"button";return e.jsx(c,{className:ut(Sh({variant:t,size:r,className:s})),ref:o,...i})});Te.displayName="Button";function Pu(s,[t,r]){return Math.min(r,Math.max(t,s))}function Xy(s,t){return _.useReducer((r,a)=>t[r][a]??r,s)}var kh="ScrollArea",[Ig,R_]=Vi(kh),[Qy,ta]=Ig(kh),Rg=_.forwardRef((s,t)=>{const{__scopeScrollArea:r,type:a="hover",dir:i,scrollHideDelay:o=600,...c}=s,[h,u]=_.useState(null),[m,x]=_.useState(null),[v,b]=_.useState(null),[g,k]=_.useState(null),[j,T]=_.useState(null),[S,P]=_.useState(0),[B,U]=_.useState(0),[Q,ge]=_.useState(!1),[ae,ee]=_.useState(!1),K=Us(t,I=>u(I)),ue=sh(i);return e.jsx(Qy,{scope:r,type:a,dir:ue,scrollHideDelay:o,scrollArea:h,viewport:m,onViewportChange:x,content:v,onContentChange:b,scrollbarX:g,onScrollbarXChange:k,scrollbarXEnabled:Q,onScrollbarXEnabledChange:ge,scrollbarY:j,onScrollbarYChange:T,scrollbarYEnabled:ae,onScrollbarYEnabledChange:ee,onCornerWidthChange:P,onCornerHeightChange:U,children:e.jsx(ts.div,{dir:ue,...c,ref:K,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":B+"px",...s.style}})})});Rg.displayName=kh;var Mg="ScrollAreaViewport",Og=_.forwardRef((s,t)=>{const{__scopeScrollArea:r,children:a,nonce:i,...o}=s,c=ta(Mg,r),h=_.useRef(null),u=Us(t,h,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(ts.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...s.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});Og.displayName=Mg;var Va="ScrollAreaScrollbar",Ch=_.forwardRef((s,t)=>{const{forceMount:r,...a}=s,i=ta(Va,s.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:c}=i,h=s.orientation==="horizontal";return _.useEffect(()=>(h?o(!0):c(!0),()=>{h?o(!1):c(!1)}),[h,o,c]),i.type==="hover"?e.jsx(eb,{...a,ref:t,forceMount:r}):i.type==="scroll"?e.jsx(tb,{...a,ref:t,forceMount:r}):i.type==="auto"?e.jsx(Dg,{...a,ref:t,forceMount:r}):i.type==="always"?e.jsx(Ph,{...a,ref:t}):null});Ch.displayName=Va;var eb=_.forwardRef((s,t)=>{const{forceMount:r,...a}=s,i=ta(Va,s.__scopeScrollArea),[o,c]=_.useState(!1);return _.useEffect(()=>{const h=i.scrollArea;let u=0;if(h){const m=()=>{window.clearTimeout(u),c(!0)},x=()=>{u=window.setTimeout(()=>c(!1),i.scrollHideDelay)};return h.addEventListener("pointerenter",m),h.addEventListener("pointerleave",x),()=>{window.clearTimeout(u),h.removeEventListener("pointerenter",m),h.removeEventListener("pointerleave",x)}}},[i.scrollArea,i.scrollHideDelay]),e.jsx(Io,{present:r||o,children:e.jsx(Dg,{"data-state":o?"visible":"hidden",...a,ref:t})})}),tb=_.forwardRef((s,t)=>{const{forceMount:r,...a}=s,i=ta(Va,s.__scopeScrollArea),o=s.orientation==="horizontal",c=yd(()=>u("SCROLL_END"),100),[h,u]=Xy("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(h==="idle"){const m=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(m)}},[h,i.scrollHideDelay,u]),_.useEffect(()=>{const m=i.viewport,x=o?"scrollLeft":"scrollTop";if(m){let v=m[x];const b=()=>{const g=m[x];v!==g&&(u("SCROLL"),c()),v=g};return m.addEventListener("scroll",b),()=>m.removeEventListener("scroll",b)}},[i.viewport,o,u,c]),e.jsx(Io,{present:r||h!=="hidden",children:e.jsx(Ph,{"data-state":h==="hidden"?"hidden":"visible",...a,ref:t,onPointerEnter:zt(s.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:zt(s.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Dg=_.forwardRef((s,t)=>{const r=ta(Va,s.__scopeScrollArea),{forceMount:a,...i}=s,[o,c]=_.useState(!1),h=s.orientation==="horizontal",u=yd(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;c(h?m:x)}},10);return wl(r.viewport,u),wl(r.content,u),e.jsx(Io,{present:a||o,children:e.jsx(Ph,{"data-state":o?"visible":"hidden",...i,ref:t})})}),Ph=_.forwardRef((s,t)=>{const{orientation:r="vertical",...a}=s,i=ta(Va,s.__scopeScrollArea),o=_.useRef(null),c=_.useRef(0),[h,u]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=$g(h.viewport,h.content),x={...a,sizes:h,onSizesChange:u,hasThumb:m>0&&m<1,onThumbChange:b=>o.current=b,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:b=>c.current=b};function v(b,g){return ob(b,c.current,h,g)}return r==="horizontal"?e.jsx(sb,{...x,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const b=i.viewport.scrollLeft,g=zf(b,h,i.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:b=>{i.viewport&&(i.viewport.scrollLeft=b)},onDragScroll:b=>{i.viewport&&(i.viewport.scrollLeft=v(b,i.dir))}}):r==="vertical"?e.jsx(rb,{...x,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const b=i.viewport.scrollTop,g=zf(b,h);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:b=>{i.viewport&&(i.viewport.scrollTop=b)},onDragScroll:b=>{i.viewport&&(i.viewport.scrollTop=v(b))}}):null}),sb=_.forwardRef((s,t)=>{const{sizes:r,onSizesChange:a,...i}=s,o=ta(Va,s.__scopeScrollArea),[c,h]=_.useState(),u=_.useRef(null),m=Us(t,u,o.onScrollbarXChange);return _.useEffect(()=>{u.current&&h(getComputedStyle(u.current))},[u]),e.jsx(zg,{"data-orientation":"horizontal",...i,ref:m,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":vd(r)+"px",...s.style},onThumbPointerDown:x=>s.onThumbPointerDown(x.x),onDragScroll:x=>s.onDragScroll(x.x),onWheelScroll:(x,v)=>{if(o.viewport){const b=o.viewport.scrollLeft+x.deltaX;s.onWheelScroll(b),Hg(b,v)&&x.preventDefault()}},onResize:()=>{u.current&&o.viewport&&c&&a({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:sd(c.paddingLeft),paddingEnd:sd(c.paddingRight)}})}})}),rb=_.forwardRef((s,t)=>{const{sizes:r,onSizesChange:a,...i}=s,o=ta(Va,s.__scopeScrollArea),[c,h]=_.useState(),u=_.useRef(null),m=Us(t,u,o.onScrollbarYChange);return _.useEffect(()=>{u.current&&h(getComputedStyle(u.current))},[u]),e.jsx(zg,{"data-orientation":"vertical",...i,ref:m,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":vd(r)+"px",...s.style},onThumbPointerDown:x=>s.onThumbPointerDown(x.y),onDragScroll:x=>s.onDragScroll(x.y),onWheelScroll:(x,v)=>{if(o.viewport){const b=o.viewport.scrollTop+x.deltaY;s.onWheelScroll(b),Hg(b,v)&&x.preventDefault()}},onResize:()=>{u.current&&o.viewport&&c&&a({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:sd(c.paddingTop),paddingEnd:sd(c.paddingBottom)}})}})}),[nb,Fg]=Ig(Va),zg=_.forwardRef((s,t)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:i,onThumbChange:o,onThumbPointerUp:c,onThumbPointerDown:h,onThumbPositionChange:u,onDragScroll:m,onWheelScroll:x,onResize:v,...b}=s,g=ta(Va,r),[k,j]=_.useState(null),T=Us(t,K=>j(K)),S=_.useRef(null),P=_.useRef(""),B=g.viewport,U=a.content-a.viewport,Q=Bn(x),ge=Bn(u),ae=yd(v,10);function ee(K){if(S.current){const ue=K.clientX-S.current.left,I=K.clientY-S.current.top;m({x:ue,y:I})}}return _.useEffect(()=>{const K=ue=>{const I=ue.target;k?.contains(I)&&Q(ue,U)};return document.addEventListener("wheel",K,{passive:!1}),()=>document.removeEventListener("wheel",K,{passive:!1})},[B,k,U,Q]),_.useEffect(ge,[a,ge]),wl(k,ae),wl(g.content,ae),e.jsx(nb,{scope:r,scrollbar:k,hasThumb:i,onThumbChange:Bn(o),onThumbPointerUp:Bn(c),onThumbPositionChange:ge,onThumbPointerDown:Bn(h),children:e.jsx(ts.div,{...b,ref:T,style:{position:"absolute",...b.style},onPointerDown:zt(s.onPointerDown,K=>{K.button===0&&(K.target.setPointerCapture(K.pointerId),S.current=k.getBoundingClientRect(),P.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),ee(K))}),onPointerMove:zt(s.onPointerMove,ee),onPointerUp:zt(s.onPointerUp,K=>{const ue=K.target;ue.hasPointerCapture(K.pointerId)&&ue.releasePointerCapture(K.pointerId),document.body.style.webkitUserSelect=P.current,g.viewport&&(g.viewport.style.scrollBehavior=""),S.current=null})})})}),td="ScrollAreaThumb",Bg=_.forwardRef((s,t)=>{const{forceMount:r,...a}=s,i=Fg(td,s.__scopeScrollArea);return e.jsx(Io,{present:r||i.hasThumb,children:e.jsx(ab,{ref:t,...a})})}),ab=_.forwardRef((s,t)=>{const{__scopeScrollArea:r,style:a,...i}=s,o=ta(td,r),c=Fg(td,r),{onThumbPositionChange:h}=c,u=Us(t,v=>c.onThumbChange(v)),m=_.useRef(void 0),x=yd(()=>{m.current&&(m.current(),m.current=void 0)},100);return _.useEffect(()=>{const v=o.viewport;if(v){const b=()=>{if(x(),!m.current){const g=lb(v,h);m.current=g,h()}};return h(),v.addEventListener("scroll",b),()=>v.removeEventListener("scroll",b)}},[o.viewport,x,h]),e.jsx(ts.div,{"data-state":c.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:zt(s.onPointerDownCapture,v=>{const g=v.target.getBoundingClientRect(),k=v.clientX-g.left,j=v.clientY-g.top;c.onThumbPointerDown({x:k,y:j})}),onPointerUp:zt(s.onPointerUp,c.onThumbPointerUp)})});Bg.displayName=td;var Lh="ScrollAreaCorner",qg=_.forwardRef((s,t)=>{const r=ta(Lh,s.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(ib,{...s,ref:t}):null});qg.displayName=Lh;var ib=_.forwardRef((s,t)=>{const{__scopeScrollArea:r,...a}=s,i=ta(Lh,r),[o,c]=_.useState(0),[h,u]=_.useState(0),m=!!(o&&h);return wl(i.scrollbarX,()=>{const x=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(x),u(x)}),wl(i.scrollbarY,()=>{const x=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(x),c(x)}),m?e.jsx(ts.div,{...a,ref:t,style:{width:o,height:h,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function sd(s){return s?parseInt(s,10):0}function $g(s,t){const r=s/t;return isNaN(r)?0:r}function vd(s){const t=$g(s.viewport,s.content),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,a=(s.scrollbar.size-r)*t;return Math.max(a,18)}function ob(s,t,r,a="ltr"){const i=vd(r),o=i/2,c=t||o,h=i-c,u=r.scrollbar.paddingStart+c,m=r.scrollbar.size-r.scrollbar.paddingEnd-h,x=r.content-r.viewport,v=a==="ltr"?[0,x]:[x*-1,0];return Ug([u,m],v)(s)}function zf(s,t,r="ltr"){const a=vd(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,c=t.content-t.viewport,h=o-a,u=r==="ltr"?[0,c]:[c*-1,0],m=Pu(s,u);return Ug([0,c],[0,h])(m)}function Ug(s,t){return r=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(s[1]-s[0]);return t[0]+a*(r-s[0])}}function Hg(s,t){return s>0&&s<t}var lb=(s,t=()=>{})=>{let r={left:s.scrollLeft,top:s.scrollTop},a=0;return function i(){const o={left:s.scrollLeft,top:s.scrollTop},c=r.left!==o.left,h=r.top!==o.top;(c||h)&&t(),r=o,a=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(a)};function yd(s,t){const r=Bn(s),a=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(a.current),[]),_.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function wl(s,t){const r=Bn(t);$n(()=>{let a=0;if(s){const i=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return i.observe(s),()=>{window.cancelAnimationFrame(a),i.unobserve(s)}}},[s,r])}var Wg=Rg,cb=Og,db=qg;const Vg=_.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Wg,{ref:a,className:ut("relative overflow-hidden",s),...r,children:[e.jsx(cb,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Zg,{}),e.jsx(db,{})]}));Vg.displayName=Wg.displayName;const Zg=_.forwardRef(({className:s,orientation:t="vertical",...r},a)=>e.jsx(Ch,{ref:a,orientation:t,className:ut("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:e.jsx(Bg,{className:"relative flex-1 rounded-full bg-border"})}));Zg.displayName=Ch.displayName;function ub({isOpen:s,onClose:t,notificationCount:r}){const[a,i]=_.useState([]),[o,c]=_.useState(!1);_.useEffect(()=>{s&&h()},[s]);const h=async()=>{c(!0);try{const b=sessionStorage.getItem("token"),g=await fetch(`${st()}/api/notifications`,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(g.ok){const k=await g.json();i(k)}}catch(b){console.error("Erro ao buscar notificações:",b)}finally{c(!1)}},u=async b=>{try{const g=sessionStorage.getItem("token");await fetch(`${st()}/api/notifications/${b}/read`,{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}}),i(k=>k.map(j=>j.id===b?{...j,read:!0}:j))}catch(g){console.error("Erro ao marcar notificação como lida:",g)}},m=async()=>{try{const b=sessionStorage.getItem("token");await fetch(`${st()}/api/notifications/mark-all-read`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}}),i(g=>g.map(k=>({...k,read:!0})))}catch(b){console.error("Erro ao marcar todas como lidas:",b)}},x=b=>{switch(b){case"success":return e.jsx(Xt,{className:"h-4 w-4 text-green-500"});case"warning":return e.jsx(Wa,{className:"h-4 w-4 text-yellow-500"});case"error":return e.jsx(Wa,{className:"h-4 w-4 text-red-500"});default:return e.jsx(vh,{className:"h-4 w-4 text-blue-500"})}},v=b=>{const g=new Date(b),j=new Date().getTime()-g.getTime(),T=Math.floor(j/6e4),S=Math.floor(j/36e5),P=Math.floor(j/864e5);return T<1?"Agora":T<60?`${T}m`:S<24?`${S}h`:`${P}d`};return s?e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 sm:w-96 bg-transparent backdrop-blur-sm rounded-lg shadow-xl border border-gray-200/20 dark:border-gray-700/20 z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200/20 dark:border-gray-700/20 bg-white/10 dark:bg-gray-800/10 backdrop-blur-sm rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notificações"}),e.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&e.jsx(Te,{variant:"ghost",size:"sm",onClick:m,className:"text-xs",children:"Marcar todas como lidas"}),e.jsx(Te,{variant:"ghost",size:"sm",onClick:t,className:"p-1",children:e.jsx(Mo,{className:"h-4 w-4"})})]})]})}),e.jsx(Vg,{className:"max-h-96",children:o?e.jsxs("div",{className:"p-4 text-center bg-white/10 dark:bg-gray-800/10 backdrop-blur-sm rounded-lg m-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-500 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Carregando..."})]}):a.length===0?e.jsxs("div",{className:"p-8 text-center bg-white/10 dark:bg-gray-800/10 backdrop-blur-sm rounded-lg m-2",children:[e.jsx(Ql,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma notificação"})]}):e.jsx("div",{className:"p-2",children:a.map(b=>e.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors backdrop-blur-sm ${b.read?"bg-white/20 dark:bg-gray-700/20":"bg-yellow-50/30 dark:bg-yellow-900/30 border-l-4 border-yellow-500"} hover:bg-white/30 dark:hover:bg-gray-600/30 mb-2`,onClick:()=>{u(b.id),b.actionUrl&&(window.location.href=b.actionUrl)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:x(b.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:`text-sm font-medium ${b.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:b.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:v(b.timestamp)})]})]}),e.jsx("p",{className:`text-xs mt-1 ${b.read?"text-gray-600 dark:text-gray-400":"text-gray-700 dark:text-gray-300"}`,children:b.message}),b.data&&(b.data.startDate||b.data.numberOfDays)&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50/50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(zs,{className:"h-3 w-3 text-blue-600"}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[b.data.startDate&&b.data.endDate&&e.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:[new Date(b.data.startDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})," até ",new Date(b.data.endDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})]}),b.data.numberOfDays&&b.data.numberOfDays>1&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 text-[10px]",children:[b.data.numberOfDays," ",b.data.numberOfDays===1?"dia":"dias",b.data.scheduledTime&&` • ${b.data.scheduledTime}`]})]})]})})]}),!b.read&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"})})]})},b.id))})})]}):null}function hb(){const[s,t]=_.useState(!1),[r,a]=_.useState(0);_.useEffect(()=>{i();const o=setInterval(i,3e4);return()=>clearInterval(o)},[]);const i=async()=>{try{const o=sessionStorage.getItem("token"),c=await fetch(`${st()}/api/notifications/count`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(c.ok){const h=await c.json();a(h.count||0)}}catch(o){console.error("Erro ao buscar contador de notificações:",o)}};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"bg-white rounded-full p-2 sm:p-3 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group",onClick:()=>t(!s),children:[e.jsx(Ql,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 group-hover:text-primary transition-colors"}),r>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center font-bold",children:r>99?"99+":r})]}),e.jsx(ub,{isOpen:s,onClose:()=>t(!1),notificationCount:r})]})}function Ua({hidePlus:s}){const[t]=qs(),[,r]=qs(),{user:a}=cr(),{toast:i}=ks(),o=t.match(/^\/messages\/\d+$/),c=[{label:"Início",to:"/",icon:e.jsx(Pl,{className:"h-6 w-6"}),show:!0},{label:"Serviços",to:"/services",icon:e.jsx(Xn,{className:"h-6 w-6"}),show:!0},{label:"Adicionar",to:"/servico",isCenter:!0,show:!s},{label:"Chat",to:"/messages",icon:e.jsx(ba,{className:"h-6 w-6"}),show:!0},{label:"Perfil",to:"/profile",icon:e.jsx($r,{className:"h-6 w-6"}),show:!0}];return o?null:e.jsx("nav",{className:"bg-white border-t border-gray-200 fixed bottom-0 left-0 w-full z-50 shadow rounded-t-xl px-0",children:e.jsx("ul",{className:"flex justify-around items-center h-16 max-w-full px-2 sm:px-4",children:c.filter(h=>h.show).map(h=>e.jsx("li",{className:h.isCenter?"relative -mt-10 z-10":"",children:h.isCenter?e.jsx("button",{"aria-label":"Criar Serviço",onClick:()=>{if(console.log("🔍 Verificando cadastro do usuário:",{userExists:!!a,email:a?.email,phone:a?.phone,cpfLocalStorage:localStorage.getItem("client_cpf")}),!a||!a.email&&!a.phone){console.warn("⚠️ Dados do usuário não disponíveis"),i({title:"Carregando dados...",description:"Aguarde enquanto carregamos suas informações."}),setTimeout(()=>{(a?.email||a?.phone)&&r("/servico")},500);return}const u=!!(a?.email&&/.+@.+\..+/.test(a.email.trim())),m=(a?.phone||"").replace(/\D/g,""),x=m.length===11&&m[0]!=="0"&&m[1]!=="0"&&m[2]==="9",v=j=>{const T=j.replace(/\D/g,"");if(T.length!==11||/^(\d)\1{10}$/.test(T))return!1;const S=P=>{let B=0;for(let Q=0;Q<P;Q++)B+=parseInt(T[Q],10)*(P+1-Q);const U=B*10%11;return U===10?0:U};return S(9)===parseInt(T[9],10)&&S(10)===parseInt(T[10],10)},b=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",g=v(b),k=[u,x,g].filter(Boolean).length;if(console.log("✅ Validações:",{emailOk:u,phoneOk:x,cpfOk:g,steps:k,phoneDigits:m,cpfDigits:b.replace(/\D/g,"")}),k!==3){const j=[];u||j.push("Email válido"),x||j.push("Telefone válido (11 dígitos com 9 no início)"),g||j.push("CPF válido"),console.warn("⚠️ Cadastro incompleto. Faltam:",j),i({title:"Verificação em andamento",description:`Conclua seu cadastro (${k}/3): ${j.join(", ")}`}),r("/profile");return}console.log("✅ Todas as validações passaram! Redirecionando para /servico"),r("/servico")},className:"gap-2 whitespace-nowrap text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary hover:bg-primary/90 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-xl hover:shadow-2xl hover:from-yellow-600 hover:to-yellow-700 w-16 h-16 flex items-center justify-center transition-all duration-300 border-4 border-white dark:border-gray-900 focus:ring-4 focus:ring-yellow-200 dark:focus:ring-yellow-800 ring-4 ring-yellow-200 dark:ring-yellow-800",tabIndex:0,type:"button",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-plus h-8 w-8",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]})}):e.jsxs(Os,{href:h.to,className:`flex flex-col items-center text-xs font-medium transition-colors duration-200 ${t===h.to?"text-yellow-500":"text-gray-500 hover:text-yellow-500"}`,children:[h.icon,e.jsx("span",{className:"mt-1",children:h.label})]})},h.to))})})}function fb(){const{toast:s}=ks(),{user:t}=cr(),[r,a]=_.useState(""),[i,o]=_.useState([]),[c,h]=_.useState(!0),[,u]=qs();_.useEffect(()=>{m()},[]);const m=async()=>{try{h(!0);const k=await fetch(`${st()}/api/professionals`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(k.ok){const j=await k.json();o(j)}else console.error("Erro ao buscar profissionais:",k.statusText),o([]),s({title:"Erro",description:"Não foi possível carregar os profissionais",variant:"destructive"})}catch(k){console.error("Erro ao buscar profissionais:",k),s({title:"Erro",description:"Não foi possível carregar os profissionais",variant:"destructive"})}finally{h(!1)}},x=async(k,j)=>{try{const T=sessionStorage.getItem("token"),S=await fetch(`${st()}/api/messages/start-conversation`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({professionalId:k,message:"Olá! Gostaria de conversar sobre seus serviços."})});if(S.ok){const P=await S.json();console.log("Resposta do backend:",P),s({title:"Conversa iniciada!",description:`Você pode conversar com ${j} agora`});const B=P.conversationId||P.id||P.conversationID;u(B?`/messages/${B}`:"/messages")}else s({title:"Erro",description:"Não foi possível iniciar a conversa",variant:"destructive"})}catch(T){console.error("Erro ao iniciar conversa:",T),s({title:"Erro",description:"Erro de conexão ao iniciar conversa",variant:"destructive"})}},v=k=>{window.location.href=`tel:${k}`},b=k=>{switch(k){case"Home":u("/");break;case"Chat":u("/messages");break;case"Serviços":u("/services");break;case"Perfil":u("/profile");break;default:u("/")}};if(c)return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen flex items-center justify-center px-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"Carregando profissionais..."})]}),e.jsx(Ua,{})]});if(i.length===0)return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Olá,"}),e.jsx("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:t?.name||"Usuário"})]}),e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-500 rounded-full flex items-center justify-center cursor-pointer hover:bg-yellow-600 transition-colors",onClick:()=>u("/profile"),children:e.jsx($r,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] px-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-200 rounded-full mx-auto mb-4 sm:mb-6 flex items-center justify-center",children:e.jsx(Fi,{className:"h-8 w-8 sm:h-10 sm:w-10 text-gray-400"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Nenhum profissional disponível"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6",children:"No momento não há profissionais cadastrados na sua região. Tente novamente mais tarde."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-500 text-white px-6 sm:px-8 py-2 sm:py-3 rounded-full font-medium hover:bg-yellow-600 transition-colors text-sm sm:text-base",children:"Tentar novamente"})]})}),e.jsx("nav",{className:"fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 sm:py-3",children:[{icon:Pl,label:"Home"},{icon:qr,label:"Chat"},{icon:Xn,label:"Serviços"},{icon:$r,label:"Perfil"}].map((k,j)=>e.jsxs("button",{className:"flex flex-col items-center text-xs text-gray-600 hover:text-yellow-500 transition-colors",onClick:()=>b(k.label),children:[e.jsx(k.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 mb-1"}),k.label]},j))}),e.jsx(Ua,{})]});const g=i.filter(k=>k.name.toLowerCase().includes(r.toLowerCase())||k.specialization.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Olá,"}),e.jsx("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:t?.name||"Usuário"})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 items-center",children:[e.jsx(hb,{}),e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-500 rounded-full flex items-center justify-center cursor-pointer hover:bg-yellow-600 transition-colors",onClick:()=>u("/profile"),children:e.jsx($r,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]})]}),e.jsx("div",{className:"px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar profissional...",className:"w-full bg-white rounded-full px-10 sm:px-12 py-3 sm:py-4 text-sm sm:text-base text-gray-900 placeholder-gray-500 border-0 shadow-lg focus:ring-2 focus:ring-yellow-400 focus:outline-none",value:r,onChange:k=>a(k.target.value)})]})}),e.jsx("div",{className:"px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-3 sm:p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg",children:"Emergência 24h"}),e.jsx("p",{className:"text-xs sm:text-sm opacity-90",children:"Profissionais disponíveis agora"})]}),e.jsx("div",{className:"text-2xl sm:text-3xl",children:"🚨"})]})})}),e.jsxs("div",{className:"px-3 sm:px-4 pb-20 sm:pb-24",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-3 sm:mb-4",children:r?`Resultados para "${r}"`:"Profissionais Disponíveis"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:g.map(k=>e.jsx("div",{className:"bg-white rounded-2xl p-3 sm:p-4 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0",children:k.imageUrl?e.jsx("img",{src:k.imageUrl,alt:k.name,className:"w-12 h-12 sm:w-16 sm:h-16 object-cover"}):e.jsx($r,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-900 mb-1",children:k.name}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-2",children:k.specialization}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(gn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current mr-1"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:k.rating})]}),e.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500",children:[e.jsx(Ss,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"truncate",children:k.location})]}),e.jsxs("div",{className:"text-xs sm:text-sm font-medium text-green-600",children:["R$ ",k.hourlyRate,"/h"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{className:"flex-1 bg-yellow-500 text-white py-2 px-3 sm:px-4 rounded-full font-medium hover:bg-yellow-600 transition-colors flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm",onClick:()=>x(k.userId,k.name),children:[e.jsx(qr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Conversar"]}),k.phone&&e.jsxs("button",{className:"bg-green-500 text-white py-2 px-3 sm:px-4 rounded-full font-medium hover:bg-green-600 transition-colors flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm",onClick:()=>v(k.phone),children:[e.jsx(zi,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Ligar"]})]})]})]})},k.id))}),g.length===0&&r&&e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(Fi,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Nenhum profissional encontrado"})]})]}),e.jsx(Ua,{})]})}const ot=_.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));ot.displayName="Card";const Wt=_.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("flex flex-col space-y-1.5 p-6",s),...t}));Wt.displayName="CardHeader";const es=_.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("text-2xl font-semibold leading-none tracking-tight",s),...t}));es.displayName="CardTitle";const rd=_.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("text-sm text-muted-foreground",s),...t}));rd.displayName="CardDescription";const lt=_.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("p-6 pt-0",s),...t}));lt.displayName="CardContent";const mb=_.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("flex items-center p-6 pt-0",s),...t}));mb.displayName="CardFooter";const pb=oc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Zs({className:s,variant:t,...r}){return e.jsx("div",{className:ut(pb({variant:t}),s),...r})}function gb(){return hg.useSyncExternalStore(xb,()=>!0,()=>!1)}function xb(){return()=>{}}var Ah="Avatar",[vb,M_]=Vi(Ah),[yb,Gg]=vb(Ah),Yg=_.forwardRef((s,t)=>{const{__scopeAvatar:r,...a}=s,[i,o]=_.useState("idle");return e.jsx(yb,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:e.jsx(ts.span,{...a,ref:t})})});Yg.displayName=Ah;var Kg="AvatarImage",Jg=_.forwardRef((s,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:i=()=>{},...o}=s,c=Gg(Kg,r),h=bb(a,o),u=Bn(m=>{i(m),c.onImageLoadingStatusChange(m)});return $n(()=>{h!=="idle"&&u(h)},[h,u]),h==="loaded"?e.jsx(ts.img,{...o,ref:t,src:a}):null});Jg.displayName=Kg;var Xg="AvatarFallback",Qg=_.forwardRef((s,t)=>{const{__scopeAvatar:r,delayMs:a,...i}=s,o=Gg(Xg,r),[c,h]=_.useState(a===void 0);return _.useEffect(()=>{if(a!==void 0){const u=window.setTimeout(()=>h(!0),a);return()=>window.clearTimeout(u)}},[a]),c&&o.imageLoadingStatus!=="loaded"?e.jsx(ts.span,{...i,ref:t}):null});Qg.displayName=Xg;function Bf(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function bb(s,{referrerPolicy:t,crossOrigin:r}){const a=gb(),i=_.useRef(null),o=a?(i.current||(i.current=new window.Image),i.current):null,[c,h]=_.useState(()=>Bf(o,s));return $n(()=>{h(Bf(o,s))},[o,s]),$n(()=>{const u=v=>()=>{h(v)};if(!o)return;const m=u("loaded"),x=u("error");return o.addEventListener("load",m),o.addEventListener("error",x),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",m),o.removeEventListener("error",x)}},[o,r,t]),c}var e0=Yg,t0=Jg,s0=Qg;const Bi=_.forwardRef(({className:s,...t},r)=>e.jsx(e0,{ref:r,className:ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Bi.displayName=e0.displayName;const qi=_.forwardRef(({className:s,src:t,...r},a)=>e.jsx(t0,{ref:a,className:ut("aspect-square h-full w-full",s),src:t,onError:i=>{},...r}));qi.displayName=t0.displayName;const $i=_.forwardRef(({className:s,...t},r)=>e.jsx(s0,{ref:r,className:ut("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));$i.displayName=s0.displayName;const Nl=Jm,Lu=Xm,wb=Km,r0=_.forwardRef(({className:s,...t},r)=>e.jsx(rh,{ref:r,className:ut("fixed inset-0 z-50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),style:{backgroundColor:"rgba(0, 0, 0, 0.95)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:50,width:"100vw",height:"100vh"},...t}));r0.displayName=rh.displayName;const Co=_.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(wb,{children:[e.jsx(r0,{}),e.jsxs(nh,{ref:a,className:ut("fixed left-[50%] top-[50%] z-50 grid translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg overflow-y-auto",s),style:{backgroundColor:"var(--background)",border:"1px solid var(--border)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"min(95vw, 32rem)",maxWidth:"min(95vw, 32rem)",maxHeight:"min(85vh, 90vh)",height:"auto",minHeight:"auto"},...r,children:[t,e.jsxs(ah,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Mo,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Co.displayName=nh.displayName;const Po=({className:s,...t})=>e.jsx("div",{className:ut("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});Po.displayName="DialogHeader";const Lo=_.forwardRef(({className:s,...t},r)=>e.jsx(ih,{ref:r,className:ut("text-lg font-semibold leading-none tracking-tight",s),...t}));Lo.displayName=ih.displayName;const Th=_.forwardRef(({className:s,...t},r)=>e.jsx(oh,{ref:r,className:ut("text-sm text-muted-foreground",s),...t}));Th.displayName=oh.displayName;function An(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function Ui(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}function n0(s,t){const r=An(s);return isNaN(t)?Ui(s,NaN):(t&&r.setDate(r.getDate()+t),r)}const a0=6048e5,Nb=864e5;let jb={};function bd(){return jb}function jl(s,t){const r=bd(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=An(s),o=i.getDay(),c=(o<a?7:0)+o-a;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function nd(s){return jl(s,{weekStartsOn:1})}function i0(s){const t=An(s),r=t.getFullYear(),a=Ui(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=nd(a),o=Ui(s,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const c=nd(o);return t.getTime()>=i.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function ad(s){const t=An(s);return t.setHours(0,0,0,0),t}function qf(s){const t=An(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function _b(s,t){const r=ad(s),a=ad(t),i=+r-qf(r),o=+a-qf(a);return Math.round((i-o)/Nb)}function Sb(s){const t=i0(s),r=Ui(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),nd(r)}function o0(s,t){const r=t*7;return n0(s,r)}function Qd(s,t){const r=ad(s),a=ad(t);return+r==+a}function kb(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Cb(s){if(!kb(s)&&typeof s!="number")return!1;const t=An(s);return!isNaN(Number(t))}function Pb(s){const t=An(s),r=Ui(s,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Lb={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ab=(s,t,r)=>{let a;const i=Lb[s];return typeof i=="string"?a=i:t===1?a=i.one:a=i.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function cl(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const Tb={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Eb={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ib={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rb={date:cl({formats:Tb,defaultWidth:"full"}),time:cl({formats:Eb,defaultWidth:"full"}),dateTime:cl({formats:Ib,defaultWidth:"full"})},Mb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ob=(s,t,r,a)=>Mb[s];function za(s){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let i;if(a==="formatting"&&s.formattingValues){const c=s.defaultFormattingWidth||s.defaultWidth,h=r?.width?String(r.width):c;i=s.formattingValues[h]||s.formattingValues[c]}else{const c=s.defaultWidth,h=r?.width?String(r.width):s.defaultWidth;i=s.values[h]||s.values[c]}const o=s.argumentCallback?s.argumentCallback(t):t;return i[o]}}const Db={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fb={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zb={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bb={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qb={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$b={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ub=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Hb={ordinalNumber:Ub,era:za({values:Db,defaultWidth:"wide"}),quarter:za({values:Fb,defaultWidth:"wide",argumentCallback:s=>s-1}),month:za({values:zb,defaultWidth:"wide"}),day:za({values:Bb,defaultWidth:"wide"}),dayPeriod:za({values:qb,defaultWidth:"wide",formattingValues:$b,defaultFormattingWidth:"wide"})};function Ba(s){return(t,r={})=>{const a=r.width,i=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],o=t.match(i);if(!o)return null;const c=o[0],h=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],u=Array.isArray(h)?Vb(h,v=>v.test(c)):Wb(h,v=>v.test(c));let m;m=s.valueCallback?s.valueCallback(u):u,m=r.valueCallback?r.valueCallback(m):m;const x=t.slice(c.length);return{value:m,rest:x}}}function Wb(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function Vb(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function l0(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const i=a[0],o=t.match(s.parsePattern);if(!o)return null;let c=s.valueCallback?s.valueCallback(o[0]):o[0];c=r.valueCallback?r.valueCallback(c):c;const h=t.slice(i.length);return{value:c,rest:h}}}const Zb=/^(\d+)(th|st|nd|rd)?/i,Gb=/\d+/i,Yb={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kb={any:[/^b/i,/^(a|c)/i]},Jb={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xb={any:[/1/i,/2/i,/3/i,/4/i]},Qb={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},e5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},t5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},s5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},r5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},n5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},a5={ordinalNumber:l0({matchPattern:Zb,parsePattern:Gb,valueCallback:s=>parseInt(s,10)}),era:Ba({matchPatterns:Yb,defaultMatchWidth:"wide",parsePatterns:Kb,defaultParseWidth:"any"}),quarter:Ba({matchPatterns:Jb,defaultMatchWidth:"wide",parsePatterns:Xb,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ba({matchPatterns:Qb,defaultMatchWidth:"wide",parsePatterns:e5,defaultParseWidth:"any"}),day:Ba({matchPatterns:t5,defaultMatchWidth:"wide",parsePatterns:s5,defaultParseWidth:"any"}),dayPeriod:Ba({matchPatterns:r5,defaultMatchWidth:"any",parsePatterns:n5,defaultParseWidth:"any"})},i5={code:"en-US",formatDistance:Ab,formatLong:Rb,formatRelative:Ob,localize:Hb,match:a5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function o5(s){const t=An(s);return _b(t,Pb(t))+1}function l5(s){const t=An(s),r=+nd(t)-+Sb(t);return Math.round(r/a0)+1}function c0(s,t){const r=An(s),a=r.getFullYear(),i=bd(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=Ui(s,0);c.setFullYear(a+1,0,o),c.setHours(0,0,0,0);const h=jl(c,t),u=Ui(s,0);u.setFullYear(a,0,o),u.setHours(0,0,0,0);const m=jl(u,t);return r.getTime()>=h.getTime()?a+1:r.getTime()>=m.getTime()?a:a-1}function c5(s,t){const r=bd(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=c0(s,t),o=Ui(s,0);return o.setFullYear(i,0,a),o.setHours(0,0,0,0),jl(o,t)}function d5(s,t){const r=An(s),a=+jl(r,t)-+c5(r,t);return Math.round(a/a0)+1}function bs(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const Ti={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return bs(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):bs(r+1,2)},d(s,t){return bs(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return bs(s.getHours()%12||12,t.length)},H(s,t){return bs(s.getHours(),t.length)},m(s,t){return bs(s.getMinutes(),t.length)},s(s,t){return bs(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),i=Math.trunc(a*Math.pow(10,r-3));return bs(i,t.length)}},rl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$f={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),i=a>0?a:1-a;return r.ordinalNumber(i,{unit:"year"})}return Ti.y(s,t)},Y:function(s,t,r,a){const i=c0(s,a),o=i>0?i:1-i;if(t==="YY"){const c=o%100;return bs(c,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):bs(o,t.length)},R:function(s,t){const r=i0(s);return bs(r,t.length)},u:function(s,t){const r=s.getFullYear();return bs(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return bs(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return bs(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return Ti.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return bs(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const i=d5(s,a);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):bs(i,t.length)},I:function(s,t,r){const a=l5(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):bs(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):Ti.d(s,t)},D:function(s,t,r){const a=o5(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):bs(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const i=s.getDay(),o=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return bs(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const i=s.getDay(),o=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return bs(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),i=a===0?7:a;switch(t){case"i":return String(i);case"ii":return bs(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const i=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let i;switch(a===12?i=rl.noon:a===0?i=rl.midnight:i=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let i;switch(a>=17?i=rl.evening:a>=12?i=rl.afternoon:a>=4?i=rl.morning:i=rl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Ti.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):Ti.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):bs(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):bs(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):Ti.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):Ti.s(s,t)},S:function(s,t){return Ti.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Hf(a);case"XXXX":case"XX":return go(a);case"XXXXX":case"XXX":default:return go(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return Hf(a);case"xxxx":case"xx":return go(a);case"xxxxx":case"xxx":default:return go(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Uf(a,":");case"OOOO":default:return"GMT"+go(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Uf(a,":");case"zzzz":default:return"GMT"+go(a,":")}},t:function(s,t,r){const a=Math.trunc(s.getTime()/1e3);return bs(a,t.length)},T:function(s,t,r){const a=s.getTime();return bs(a,t.length)}};function Uf(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),i=Math.trunc(a/60),o=a%60;return o===0?r+String(i):r+String(i)+t+bs(o,2)}function Hf(s,t){return s%60===0?(s>0?"-":"+")+bs(Math.abs(s)/60,2):go(s,t)}function go(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),i=bs(Math.trunc(a/60),2),o=bs(a%60,2);return r+i+t+o}const Wf=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},d0=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},u5=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return Wf(s,t);let o;switch(a){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Wf(a,t)).replace("{{time}}",d0(i,t))},h5={p:d0,P:u5},f5=/^D+$/,m5=/^Y+$/,p5=["D","DD","YY","YYYY"];function g5(s){return f5.test(s)}function x5(s){return m5.test(s)}function v5(s,t,r){const a=y5(s,t,r);if(console.warn(a),p5.includes(s))throw new RangeError(a)}function y5(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const b5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,w5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,N5=/^'([^]*?)'?$/,j5=/''/g,_5=/[a-zA-Z]/;function Wl(s,t,r){const a=bd(),i=r?.locale??a.locale??i5,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,c=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,h=An(s);if(!Cb(h))throw new RangeError("Invalid time value");let u=t.match(w5).map(x=>{const v=x[0];if(v==="p"||v==="P"){const b=h5[v];return b(x,i.formatLong)}return x}).join("").match(b5).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const v=x[0];if(v==="'")return{isToken:!1,value:S5(x)};if($f[v])return{isToken:!0,value:x};if(v.match(_5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:x}});i.localize.preprocessor&&(u=i.localize.preprocessor(h,u));const m={firstWeekContainsDate:o,weekStartsOn:c,locale:i};return u.map(x=>{if(!x.isToken)return x.value;const v=x.value;(!r?.useAdditionalWeekYearTokens&&x5(v)||!r?.useAdditionalDayOfYearTokens&&g5(v))&&v5(v,t,String(s));const b=$f[v[0]];return b(h,v,i.localize,m)}).join("")}function S5(s){const t=s.match(N5);return t?t[1].replace(j5,"'"):s}function k5(s,t){const r=An(s),a=An(t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function C5(s,t){return o0(s,-4)}const P5={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},L5=(s,t,r)=>{let a;const i=P5[s];return typeof i=="string"?a=i:t===1?a=i.one:a=i.other.replace("{{count}}",String(t)),r?.addSuffix?r.comparison&&r.comparison>0?"em "+a:"há "+a:a},A5={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},T5={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},E5={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},I5={date:cl({formats:A5,defaultWidth:"full"}),time:cl({formats:T5,defaultWidth:"full"}),dateTime:cl({formats:E5,defaultWidth:"full"})},R5={lastWeek:s=>{const t=s.getDay();return"'"+(t===0||t===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},M5=(s,t,r,a)=>{const i=R5[s];return typeof i=="function"?i(t):i},O5={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},D5={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},F5={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},z5={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},B5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},q5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},$5=(s,t)=>{const r=Number(s);return t?.unit==="week"?r+"ª":r+"º"},U5={ordinalNumber:$5,era:za({values:O5,defaultWidth:"wide"}),quarter:za({values:D5,defaultWidth:"wide",argumentCallback:s=>s-1}),month:za({values:F5,defaultWidth:"wide"}),day:za({values:z5,defaultWidth:"wide"}),dayPeriod:za({values:B5,defaultWidth:"wide",formattingValues:q5,defaultFormattingWidth:"wide"})},H5=/^(\d+)[ºªo]?/i,W5=/\d+/i,V5={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Z5={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},G5={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Y5={any:[/1/i,/2/i,/3/i,/4/i]},K5={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},J5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},X5={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},Q5={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},ew={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},tw={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},sw={ordinalNumber:l0({matchPattern:H5,parsePattern:W5,valueCallback:s=>parseInt(s,10)}),era:Ba({matchPatterns:V5,defaultMatchWidth:"wide",parsePatterns:Z5,defaultParseWidth:"any"}),quarter:Ba({matchPatterns:G5,defaultMatchWidth:"wide",parsePatterns:Y5,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ba({matchPatterns:K5,defaultMatchWidth:"wide",parsePatterns:J5,defaultParseWidth:"any"}),day:Ba({matchPatterns:X5,defaultMatchWidth:"wide",parsePatterns:Q5,defaultParseWidth:"any"}),dayPeriod:Ba({matchPatterns:ew,defaultMatchWidth:"any",parsePatterns:tw,defaultParseWidth:"any"})},Au={code:"pt-BR",formatDistance:L5,formatLong:I5,formatRelative:M5,localize:U5,match:sw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vf(){const{toast:s}=ks(),[t,r]=_.useState(new Date),[a,i]=_.useState(new Date),[o,c]=_.useState(null),[h,u]=_.useState(!1),[m,x]=_.useState("all"),v=K=>{switch(K){case"agendado":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"confirmado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"em_andamento":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"concluido":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},b=K=>{switch(K){case"confirmado":return e.jsx(Xt,{className:"h-3 w-3"});case"cancelado":return e.jsx(Qn,{className:"h-3 w-3"});case"em_andamento":return e.jsx(Kp,{className:"h-3 w-3"});case"concluido":return e.jsx(Xt,{className:"h-3 w-3"});default:return e.jsx(Wa,{className:"h-3 w-3"})}},g=K=>{switch(K){case"agendado":return"Agendado";case"confirmado":return"Confirmado";case"em_andamento":return"Em Andamento";case"concluido":return"Concluído";case"cancelado":return"Cancelado";default:return K}},k=[],j=K=>k.filter(ue=>Qd(ue.date,K)),T=()=>{const K=jl(new Date(t.getFullYear(),t.getMonth(),1)),ue=[];for(let I=0;I<42;I++)ue.push(n0(K,I));return ue},S=()=>{r(C5(t))},P=()=>{r(o0(t,4))},B=K=>{c(K),u(!0)},U=()=>{s({title:"Agendamento cancelado",description:"Seu agendamento foi cancelado com sucesso."}),u(!1)},Q=()=>{s({title:"Reagendamento",description:"Redirecionando para reagendar consulta..."}),u(!1)},ge=()=>{o?.meetingLink&&(window.open(o.meetingLink,"_blank"),s({title:"Videochamada iniciada",description:"Abrindo link da reunião..."}))},ae=()=>{o?.professionalPhone&&window.open(`tel:${o.professionalPhone}`)},ee=()=>{if(o?.location){const K=encodeURIComponent(o.location);window.open(`https://maps.google.com/?q=${K}`,"_blank")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx($s,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Minha Agenda"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto p-4 lg:p-8",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agenda"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Gerencie seus agendamentos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Te,{variant:"outline",children:[e.jsx(J2,{className:"h-4 w-4 mr-2"}),"Filtros"]}),e.jsxs(Te,{className:"bg-yellow-500 hover:bg-yellow-600",children:[e.jsx(yh,{className:"h-4 w-4 mr-2"}),"Nova Consulta"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 overflow-x-auto",children:[e.jsx(Te,{variant:m==="all"?"default":"outline",size:"sm",onClick:()=>x("all"),className:m==="all"?"bg-yellow-500 hover:bg-yellow-600":"",children:"Todos"}),e.jsx(Te,{variant:m==="agendado"?"default":"outline",size:"sm",onClick:()=>x("agendado"),className:m==="agendado"?"bg-blue-500 hover:bg-blue-600":"",children:"Agendados"}),e.jsx(Te,{variant:m==="confirmado"?"default":"outline",size:"sm",onClick:()=>x("confirmado"),className:m==="confirmado"?"bg-green-500 hover:bg-green-600":"",children:"Confirmados"}),e.jsx(Te,{variant:m==="concluido"?"default":"outline",size:"sm",onClick:()=>x("concluido"),className:m==="concluido"?"bg-gray-500 hover:bg-gray-600":"",children:"Concluídos"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ot,{children:[e.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(es,{className:"text-lg",children:Wl(t,"MMMM yyyy",{locale:Au})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{variant:"outline",size:"sm",onClick:S,children:e.jsx(V2,{className:"h-4 w-4"})}),e.jsx(Te,{variant:"outline",size:"sm",onClick:P,children:e.jsx(eg,{className:"h-4 w-4"})})]})]}),e.jsxs(lt,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(K=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600 dark:text-gray-400",children:K},K))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:T().map((K,ue)=>{const I=j(K),q=k5(K,t),ne=Qd(K,new Date),Y=Qd(K,a);return e.jsxs("div",{className:`
                            min-h-[80px] p-1 border border-gray-200 dark:border-gray-700 cursor-pointer transition-colors
                            ${q?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"}
                            ${ne?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-700":""}
                            ${Y?"ring-2 ring-yellow-500":""}
                            hover:bg-gray-50 dark:hover:bg-gray-700
                          `,onClick:()=>i(K),children:[e.jsx("div",{className:`
                            text-sm font-medium mb-1
                            ${q?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"}
                            ${ne?"text-yellow-600 dark:text-yellow-400":""}
                          `,children:Wl(K,"d")}),e.jsxs("div",{className:"space-y-1",children:[I.slice(0,2).map(he=>e.jsxs("div",{className:`
                                  text-xs p-1 rounded cursor-pointer truncate
                                  ${v(he.status)}
                                `,onClick:pe=>{pe.stopPropagation(),B(he)},children:[he.time," - ",he.professionalName]},he.id)),I.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 p-1",children:["+",I.length-2," mais"]})]})]},ue)})})]})]})}),e.jsx("div",{children:e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"text-lg",children:["Agendamentos - ",Wl(a,"dd/MM/yyyy")]})}),e.jsx(lt,{className:"space-y-4",children:j(a).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(zs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Nenhum agendamento para este dia"})]}):j(a).map(K=>e.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",onClick:()=>B(K),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs(Bi,{className:"w-10 h-10",children:[e.jsx(qi,{src:K.professionalAvatar,alt:K.professionalName}),e.jsx($i,{children:K.professionalName.split(" ").map(ue=>ue[0]).join("")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:K.professionalName}),e.jsxs(Zs,{className:`text-xs ${v(K.status)}`,children:[b(K.status),e.jsx("span",{className:"ml-1",children:g(K.status)})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:K.specialization}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qs,{className:"h-3 w-3"}),K.time," (",K.duration,"min)"]}),K.type==="presencial"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"h-3 w-3"}),"Presencial"]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($c,{className:"h-3 w-3"}),"Online"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["R$ ",K.price]}),K.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:K.rating})]})]})]})]})},K.id))})]})})]}),e.jsx(Nl,{open:h,onOpenChange:u,children:e.jsxs(Co,{className:"max-w-2xl",children:[e.jsx(Po,{children:e.jsxs(Lo,{className:"flex items-center gap-3",children:[e.jsxs(Bi,{className:"w-12 h-12",children:[e.jsx(qi,{src:o?.professionalAvatar,alt:o?.professionalName}),e.jsx($i,{children:o?.professionalName.split(" ").map(K=>K[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:o?.professionalName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o?.specialization})]})]})}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Zs,{className:`${v(o.status)}`,children:[b(o.status),e.jsx("span",{className:"ml-1",children:g(o.status)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o.type==="online"&&o.meetingLink&&e.jsxs(Te,{size:"sm",onClick:ge,className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx($c,{className:"h-4 w-4 mr-2"}),"Entrar na Reunião"]}),o.professionalPhone&&e.jsxs(Te,{variant:"outline",size:"sm",onClick:ae,children:[e.jsx(zi,{className:"h-4 w-4 mr-2"}),"Ligar"]}),e.jsxs(Te,{variant:"outline",size:"sm",children:[e.jsx(qr,{className:"h-4 w-4 mr-2"}),"Mensagem"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Data e Horário"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(zs,{className:"h-4 w-4"}),Wl(o.date,"dd 'de' MMMM 'de' yyyy",{locale:Au})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 mt-1",children:[e.jsx(Qs,{className:"h-4 w-4"}),o.time," - ",o.duration," minutos"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Tipo de Consulta"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:o.type==="presencial"?e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-4 w-4"}),"Presencial"]}):e.jsxs(e.Fragment,{children:[e.jsx($c,{className:"h-4 w-4"}),"Online"]})})]}),o.location&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Local"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(Ss,{className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{children:o.location}),e.jsxs(Te,{variant:"link",size:"sm",className:"p-0 h-auto text-yellow-600 hover:text-yellow-700",onClick:ee,children:[e.jsx(sg,{className:"h-3 w-3 mr-1"}),"Ver no mapa"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Valor"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R$ ",o.price]})]}),o.rating&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Avaliação"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gn,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"font-semibold",children:o.rating})]}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Excelente profissional"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Contato"}),o.professionalPhone&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(zi,{className:"h-4 w-4"}),o.professionalPhone]})]})]})]}),o.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Observações"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:o.notes})]}),o.status!=="concluido"&&o.status!=="cancelado"&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.canReschedule&&e.jsxs(Te,{variant:"outline",onClick:()=>Q(),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Reagendar"]}),o.canCancel&&e.jsxs(Te,{variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-900/20",onClick:()=>U(),children:[e.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]})]})]})})]}),e.jsx(Ua,{})]})}const ht=_.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:ut("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));ht.displayName="Input";var rw="Label",u0=_.forwardRef((s,t)=>e.jsx(ts.label,{...s,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(s.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));u0.displayName=rw;var h0=u0;const nw=oc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ts=_.forwardRef(({className:s,...t},r)=>e.jsx(h0,{ref:r,className:ut(nw(),s),...t}));Ts.displayName=h0.displayName;const ea=_.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:ut("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));ea.displayName="Textarea";function Zf(){const[,s]=qs(),{logout:t}=cr(),{toast:r}=ks(),a=hh(),[i,o]=_.useState(!1),[c,h]=_.useState(!1),[u,m]=_.useState(!1),x=_.useRef(null),[v,b]=_.useState({name:"",email:"",phone:"",address:"",cpf:""}),{data:g,isLoading:k}=Kc({queryKey:["/api/user"]}),{data:j=[]}=Kc({queryKey:["/api/appointments"]});_.useEffect(()=>{g&&b({name:g.name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",cpf:localStorage.getItem("client_cpf")||""})},[g]);const T=(j||[]).filter(J=>new Date(J.scheduledFor)<=new Date).length,S=_f({mutationFn:async J=>{const fe=sessionStorage.getItem("token");if(!fe)throw new Error("Token não encontrado");const R=await fetch(`${st()}/api/user/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${fe}`},body:JSON.stringify({name:J.name,email:J.email,phone:J.phone,address:J.address})});if(!R.ok)throw new Error("Erro ao atualizar perfil");return R.json()},onSuccess:()=>{try{localStorage.setItem("client_cpf",v.cpf.trim())}catch{}b(J=>({...J,cpf:J.cpf.trim()})),a.invalidateQueries({queryKey:["/api/user"]}),o(!1),r({title:"Perfil atualizado",description:"Suas informações foram atualizadas com sucesso."})},onError:J=>{r({title:"Erro",description:"Não foi possível atualizar o perfil. Tente novamente.",variant:"destructive"})}}),P=_f({mutationFn:async J=>{const fe=sessionStorage.getItem("token");if(!fe)throw new Error("Token não encontrado");const R=new FormData;R.append("profileImage",J);const E=await fetch(`${st()}/api/user/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${fe}`},body:R});if(!E.ok)throw new Error("Erro ao fazer upload da imagem");return E.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/user"]}),h(!1),m(!1),r({title:"Foto atualizada",description:"Sua foto de perfil foi atualizada com sucesso."})},onError:J=>{h(!1),r({title:"Erro",description:"Não foi possível fazer upload da imagem. Tente novamente.",variant:"destructive"})}}),B=()=>{o(!0)},U=()=>{S.mutate(v)},Q=()=>{o(!1),g&&b({name:g.name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",cpf:localStorage.getItem("client_cpf")||""})};_.useEffect(()=>{if(!i)try{const J=localStorage.getItem("client_cpf")||"";J&&J!==v.cpf&&b(fe=>({...fe,cpf:J}))}catch{}},[i]);const ge=()=>{x.current?.click()},ae=J=>{const fe=J.target.files?.[0];fe&&(h(!0),P.mutate(fe))},ee=(J,fe)=>{b(R=>({...R,[J]:fe}))},K=J=>/.+@.+\..+/.test(J.trim()),ue=J=>{const fe=J.replace(/\D/g,"");return!(fe.length!==11||fe[0]==="0"||fe[1]==="0"||fe[2]!=="9")},I=J=>{const fe=J.replace(/\D/g,"");if(!fe||fe.length!==11||/^(\d)\1{10}$/.test(fe))return!1;const R=W=>{let se=0;for(let le=0;le<W;le++)se+=parseInt(fe[le],10)*(W+1-le);const X=se*10%11;return X===10?0:X},E=R(9),D=R(10);return E===parseInt(fe[9],10)&&D===parseInt(fe[10],10)},q=K(v.email),ne=ue(v.phone),Y=I(v.cpf),he=[q,ne,Y].filter(Boolean).length,pe=()=>{console.log("Opening privacy settings")},oe=()=>{console.log("Opening help center")},ie=()=>{s("/my-requests")},Ne=()=>{t(),window.location.href="/",r({title:"Logout realizado",description:"Você foi desconectado com sucesso."})};return k?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando perfil..."})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:e.jsxs("div",{className:"w-full max-w-sm lg:max-w-none mx-auto lg:mx-0 relative px-3 sm:px-4 lg:px-8 py-3 sm:py-4 lg:py-6",children:[e.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors mr-2 lg:hidden",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Meu Perfil"})]}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsxs("div",{className:"relative inline-block mb-3 sm:mb-4",children:[g?.profileImage&&!u?e.jsx("img",{src:`${st()}${g.profileImage}`,alt:`Foto de ${g?.name||"Cliente"}`,className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto rounded-full object-cover border-4 border-white shadow-lg",onError:()=>{console.log("Erro ao carregar imagem:",g.profileImage),m(!0)},onLoad:()=>{console.log("Imagem carregada com sucesso:",g.profileImage),m(!1)}}):e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto bg-yellow-500 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white",children:g?.name?.charAt(0)||"G"})}),e.jsx(Te,{size:"sm",variant:"secondary",className:"absolute -bottom-1 -right-1 sm:-bottom-2 sm:-right-2 rounded-full w-6 h-6 sm:w-8 sm:h-8 p-0 bg-white border-2 border-gray-200 hover:bg-gray-50",onClick:ge,disabled:c,children:c?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-gray-600"}):e.jsx(Ro,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:ae,className:"hidden"})]}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2",children:g?.name||"Gustavo Silva"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:g?.createdAt?`Membro desde ${new Date(g.createdAt).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}`:"Membro"}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:j?.length||0}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Agendamentos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:T}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Concluídos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:"4.8"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Avaliação"})]})]}),i?e.jsxs("div",{className:"flex gap-2 mb-4 sm:mb-6",children:[e.jsxs(Te,{onClick:U,className:"flex-1 h-10 sm:h-12 text-sm sm:text-base",disabled:S.isPending,children:[S.isPending?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(ed,{className:"h-4 w-4 mr-2"}),"Salvar"]}),e.jsx(Te,{variant:"outline",onClick:Q,className:"h-10 sm:h-12 text-sm sm:text-base",children:e.jsx(Mo,{className:"h-4 w-4"})})]}):e.jsxs(Te,{onClick:B,className:"w-full mb-4 sm:mb-6 h-10 sm:h-12 text-sm sm:text-base",children:[e.jsx(ag,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})]}),e.jsxs(ot,{className:"mb-4 sm:mb-6",children:[e.jsx(Wt,{className:"pb-3 sm:pb-4",children:e.jsx(es,{className:"text-base sm:text-lg",children:"Informações Pessoais"})}),e.jsx(lt,{className:"space-y-3 sm:space-y-4",children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"name",className:"text-xs sm:text-sm text-gray-600",children:"Nome"}),e.jsx(ht,{id:"name",value:v.name,onChange:J=>ee("name",J.target.value),className:"mt-1",placeholder:"Seu nome completo"})]}),e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"email",className:"text-xs sm:text-sm text-gray-600",children:"Email"}),e.jsx(ht,{id:"email",type:"email",value:v.email,onChange:J=>ee("email",J.target.value),className:"mt-1",placeholder:"seu@email.com"})]}),e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"phone",className:"text-xs sm:text-sm text-gray-600",children:"Telefone"}),e.jsx(ht,{id:"phone",value:v.phone,onChange:J=>ee("phone",J.target.value),className:`mt-1 ${v.phone&&!ne?"border-red-500":""}`,placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"cpf",className:"text-xs sm:text-sm text-gray-600",children:"CPF"}),e.jsx(ht,{id:"cpf",value:v.cpf,onChange:J=>ee("cpf",J.target.value),className:`mt-1 ${v.cpf&&!Y?"border-red-500":""}`,placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"address",className:"text-xs sm:text-sm text-gray-600",children:"Endereço"}),e.jsx(ea,{id:"address",value:v.address,onChange:J=>ee("address",J.target.value),className:"mt-1",placeholder:"Seu endereço completo",rows:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(ec,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:(g?.email||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(zi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Telefone"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(g?.phone||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(xl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"CPF"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(v.cpf||localStorage.getItem("client_cpf")||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Ss,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Endereço"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(g?.address||"").trim()||"Não informado"})]})]})]})})]}),e.jsx(ot,{className:`mb-4 sm:mb-6 ${he===3?"border-green-100 bg-gradient-to-r from-green-50 to-emerald-50":"border-yellow-100 bg-gradient-to-r from-yellow-50 to-amber-50"}`,children:e.jsx(lt,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${he===3?"bg-green-500":"bg-yellow-500"} rounded-full flex items-center justify-center shadow-lg`,children:e.jsx(oi,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-1",children:he===3?"Conta Verificada":"Verificação em andamento"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 leading-relaxed",children:he===3?"Todos os dados foram validados":`Complete ${he}/3 etapas para verificar sua conta`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Email"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ne?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Telefone"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"CPF"})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Zs,{className:`${he===3?"bg-green-500":"bg-yellow-500"} text-white shadow-md hover:opacity-90 transition-colors px-3 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm font-medium border-0`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsxs("span",{className:"text-base sm:text-lg",children:[he,"/3"]}),e.jsx("span",{children:he===3?"Verificado":"Pendente"})]})})})]})})}),e.jsxs("div",{className:"space-y-2 mb-16 sm:mb-20",children:[e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:ie,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(xh,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Minhas Solicitações"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s("/settings"),children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(bh,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Configurações"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:pe,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(oi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Privacidade e Segurança"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:oe,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Xc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Ajuda e Suporte"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700 my-3 sm:my-4"}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:Ne,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(vl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-red-500 text-sm sm:text-base",children:"Sair da Conta"})]})})})]}),e.jsx(Ua,{})]})})})}async function aw(s){if(!s.ok){const t=await s.text()||s.statusText;throw new Error(`${s.status}: ${t}`)}}async function sc(s,t,r){const a=r?{"Content-Type":"application/json"}:{},i=sessionStorage.getItem("token");i&&(a.Authorization=`Bearer ${i}`);const c=t.startsWith("http")?t:`http://localhost:8080${t}`;let h=await fetch(c,{method:s,headers:a,body:r?JSON.stringify(r):void 0,credentials:"include"});return h.status===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload(),h):(await aw(h),h)}const iw=({on401:s})=>async({queryKey:t})=>{try{const r="http://localhost:8080",a=t[0],i=a.startsWith("http")?a:`${r}${a}`,o=sessionStorage.getItem("token"),c={};o&&(c.Authorization=`Bearer ${o}`);const h=new AbortController,u=setTimeout(()=>h.abort(),1e4);let m=await fetch(i,{headers:c,credentials:"include",signal:h.signal});if(clearTimeout(u),s==="returnNull"&&(m.status===401||m.status===403))return null;if(!m.ok){if(s==="returnNull")return null;const x=await m.text()||m.statusText;throw new Error(`${m.status}: ${x}`)}return await m.json()}catch(r){return console.warn("API request failed:",r.message),null}};new Np({defaultOptions:{queries:{queryFn:iw({on401:"returnNull"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,retry:!1,retryOnMount:!1,refetchOnReconnect:!1},mutations:{retry:!1}}});function Gf(){const{user:s,logout:t}=cr(),{toast:r}=ks(),[a,i]=_.useState(!1),[o,c]=_.useState(!1),[h,u]=_.useState(!1),[m,x]=_.useState({name:s?.name||"",email:s?.email||"",phone:s?.phone||"",address:"",bio:""}),[v,b]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,k]=_.useState({current:!1,new:!1,confirm:!1}),j=async()=>{try{(await sc("PUT","/api/user/profile",m)).ok&&(r({title:"Perfil atualizado",description:"Suas informações foram salvas com sucesso."}),i(!1))}catch{r({title:"Erro",description:"Não foi possível atualizar o perfil.",variant:"destructive"})}},T=async()=>{if(v.newPassword!==v.confirmPassword){r({title:"Erro",description:"As senhas não coincidem.",variant:"destructive"});return}try{(await sc("PUT","/api/user/password",{currentPassword:v.currentPassword,newPassword:v.newPassword})).ok&&(r({title:"Senha alterada",description:"Sua senha foi atualizada com sucesso."}),c(!1),b({currentPassword:"",newPassword:"",confirmPassword:""}))}catch{r({title:"Erro",description:"Não foi possível alterar a senha.",variant:"destructive"})}},S=()=>{t(),window.location.href="/"};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"lg:hidden sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-3 sm:px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>window.history.back(),children:e.jsx($s,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-3 sm:p-4 lg:p-8 space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[e.jsx(dc,{size:24,className:"sm:w-8 sm:h-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Configurações"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:"Gerencie sua conta e preferências"})]})]})}),e.jsxs(ot,{children:[e.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-3 sm:pb-4",children:[e.jsxs(es,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx($r,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Perfil"]}),e.jsxs(Te,{variant:"outline",size:"sm",onClick:()=>i(!a),className:"text-xs sm:text-sm",children:[e.jsx(ng,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),a?"Cancelar":"Editar"]})]}),e.jsxs(lt,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-yellow-100 dark:bg-yellow-900/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx($r,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm sm:text-base",children:s?.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 truncate",children:s?.email}),e.jsx(Zs,{variant:"secondary",className:"mt-1 text-xs",children:s?.userType==="client"?"Cliente":"Profissional"})]}),a&&e.jsx(Te,{variant:"outline",size:"sm",className:"flex-shrink-0",children:e.jsx(Ro,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 pt-3 sm:pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome"}),e.jsx(ht,{value:m.name,onChange:P=>x({...m,name:P.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx(ht,{value:m.email,onChange:P=>x({...m,email:P.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefone"}),e.jsx(ht,{value:m.phone,onChange:P=>x({...m,phone:P.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Endereço"}),e.jsx(ht,{value:m.address,onChange:P=>x({...m,address:P.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bio"}),e.jsx("textarea",{value:m.bio,onChange:P=>x({...m,bio:P.target.value}),className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",rows:3,placeholder:"Conte um pouco sobre você..."})]}),e.jsx("div",{className:"md:col-span-2 flex gap-2",children:e.jsxs(Te,{onClick:j,className:"bg-yellow-500 hover:bg-yellow-600 text-sm",children:[e.jsx(ed,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Salvar"]})})]})]})]}),e.jsxs(ot,{children:[e.jsx(Wt,{className:"pb-3 sm:pb-4",children:e.jsxs(es,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(oi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Segurança"]})}),e.jsxs(lt,{className:"space-y-3 sm:space-y-4",children:[e.jsxs(Te,{variant:"outline",onClick:()=>c(!o),className:"w-full justify-start text-sm",children:[e.jsx(tg,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Alterar Senha"]}),o&&e.jsxs("div",{className:"space-y-3 sm:space-y-4 p-3 sm:p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha Atual"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(ht,{type:g.current?"text":"password",value:v.currentPassword,onChange:P=>b({...v,currentPassword:P.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Te,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>k({...g,current:!g.current}),children:g.current?e.jsx(qc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nova Senha"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(ht,{type:g.new?"text":"password",value:v.newPassword,onChange:P=>b({...v,newPassword:P.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Te,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>k({...g,new:!g.new}),children:g.new?e.jsx(qc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar Nova Senha"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(ht,{type:g.confirm?"text":"password",value:v.confirmPassword,onChange:P=>b({...v,confirmPassword:P.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Te,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>k({...g,confirm:!g.confirm}),children:g.confirm?e.jsx(qc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs(Te,{onClick:T,className:"bg-yellow-500 hover:bg-yellow-600 text-sm",children:[e.jsx(ed,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Alterar Senha"]})]})]})]}),e.jsxs(ot,{className:"border-red-200 dark:border-red-800",children:[e.jsx(Wt,{className:"pb-3 sm:pb-4",children:e.jsxs(es,{className:"flex items-center gap-2 text-base sm:text-lg text-red-600 dark:text-red-400",children:[e.jsx(yl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Zona de Perigo"]})}),e.jsx(lt,{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white mb-1",children:"Excluir Conta"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Esta ação não pode ser desfeita. Sua conta será permanentemente removida."}),e.jsxs(Te,{variant:"destructive",onClick:()=>u(!0),className:"text-sm",children:[e.jsx(yl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Excluir Conta"]})]})})]}),e.jsx("div",{className:"pt-4 sm:pt-6",children:e.jsxs(Te,{variant:"outline",onClick:S,className:"w-full text-red-600 border-red-200 hover:bg-red-50 dark:border-red-800 dark:hover:bg-red-900/20 text-sm",children:[e.jsx(vl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Sair da Conta"]})})]})]})}const ow=({amount:s})=>{const{toast:t}=ks(),[,r]=qs(),[a,i]=_.useState(!1),[o,c]=_.useState(""),[h,u]=_.useState(""),[m,x]=_.useState(""),[v,b]=_.useState(""),g=async k=>{k.preventDefault(),i(!0);try{(await sc("POST","/api/create-payment-intent",{amount:s,card:{cardNumber:o,expiryDate:h,cvv:m,cardHolder:v}})).ok&&(t({title:"Pagamento Realizado",description:"Seu pagamento foi processado com sucesso!"}),r("/profile"))}catch(j){t({title:"Erro no Pagamento",description:j.message||"Erro ao processar pagamento",variant:"destructive"})}i(!1)};return e.jsxs("form",{onSubmit:g,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Nome no Cartão"}),e.jsx(ht,{type:"text",placeholder:"João da Silva",value:v,onChange:k=>b(k.target.value),className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Número do Cartão"}),e.jsx(ht,{type:"text",placeholder:"0000 0000 0000 0000",value:o,onChange:k=>c(k.target.value),maxLength:19,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Validade"}),e.jsx(ht,{type:"text",placeholder:"MM/AA",value:h,onChange:k=>u(k.target.value),maxLength:5,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"CVV"}),e.jsx(ht,{type:"text",placeholder:"123",value:m,onChange:k=>x(k.target.value),maxLength:4,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]})]})]}),e.jsx(Te,{type:"submit",disabled:a,className:"w-full h-10 sm:h-12 text-sm sm:text-base font-semibold",children:a?"Processando...":`Pagar R$ ${s.toFixed(2)}`})]})};function lw(){const[,s]=qs(),t=150;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:e.jsx("div",{className:"max-w-lg mx-auto px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Te,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[e.jsx($s,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold",children:"Pagamento"}),e.jsx("div",{className:"w-12 sm:w-16"})]})})}),e.jsxs("div",{className:"max-w-lg mx-auto p-3 sm:p-4 space-y-4 sm:space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Wt,{className:"pb-3 sm:pb-4",children:e.jsxs(es,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(xl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Resumo do Serviço"]})}),e.jsxs(lt,{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Consulta Fisioterapia"}),e.jsx("span",{children:"R$ 120,00"})]}),e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Taxa de serviço"}),e.jsx("span",{children:"R$ 30,00"})]}),e.jsx("div",{className:"border-t pt-2 sm:pt-3",children:e.jsxs("div",{className:"flex justify-between font-semibold text-base sm:text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["R$ ",t.toFixed(2)]})]})})]})]}),e.jsxs(ot,{children:[e.jsx(Wt,{className:"pb-3 sm:pb-4",children:e.jsx(es,{className:"text-base sm:text-lg",children:"Informações de Pagamento"})}),e.jsx(lt,{children:e.jsx(ow,{amount:t})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(oi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-800 dark:text-green-300",children:"Pagamento Seguro"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Suas informações são protegidas com criptografia SSL"})]}),e.jsx(cc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"})]})]}),e.jsx(Ua,{hidePlus:!0})]})}var wd="Tabs",[cw,O_]=Vi(wd,[Qm]),f0=Qm(),[dw,Eh]=cw(wd),m0=_.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,onValueChange:i,defaultValue:o,orientation:c="horizontal",dir:h,activationMode:u="automatic",...m}=s,x=sh(h),[v,b]=gl({prop:a,onChange:i,defaultProp:o??"",caller:wd});return e.jsx(dw,{scope:r,baseId:ic(),value:v,onValueChange:b,orientation:c,dir:x,activationMode:u,children:e.jsx(ts.div,{dir:x,"data-orientation":c,...m,ref:t})})});m0.displayName=wd;var p0="TabsList",g0=_.forwardRef((s,t)=>{const{__scopeTabs:r,loop:a=!0,...i}=s,o=Eh(p0,r),c=f0(r);return e.jsx(p1,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:a,children:e.jsx(ts.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});g0.displayName=p0;var x0="TabsTrigger",v0=_.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,disabled:i=!1,...o}=s,c=Eh(x0,r),h=f0(r),u=w0(c.baseId,a),m=N0(c.baseId,a),x=a===c.value;return e.jsx(g1,{asChild:!0,...h,focusable:!i,active:x,children:e.jsx(ts.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...o,ref:t,onMouseDown:zt(s.onMouseDown,v=>{!i&&v.button===0&&v.ctrlKey===!1?c.onValueChange(a):v.preventDefault()}),onKeyDown:zt(s.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(a)}),onFocus:zt(s.onFocus,()=>{const v=c.activationMode!=="manual";!x&&!i&&v&&c.onValueChange(a)})})})});v0.displayName=x0;var y0="TabsContent",b0=_.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,forceMount:i,children:o,...c}=s,h=Eh(y0,r),u=w0(h.baseId,a),m=N0(h.baseId,a),x=a===h.value,v=_.useRef(x);return _.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),e.jsx(Io,{present:i||x,children:({present:b})=>e.jsx(ts.div,{"data-state":x?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":u,hidden:!b,id:m,tabIndex:0,...c,ref:t,style:{...s.style,animationDuration:v.current?"0s":void 0},children:b&&o})})});b0.displayName=y0;function w0(s,t){return`${s}-trigger-${t}`}function N0(s,t){return`${s}-content-${t}`}var uw=m0,j0=g0,_0=v0,S0=b0;const k0=uw,Ih=_.forwardRef(({className:s,...t},r)=>e.jsx(j0,{ref:r,className:ut("inline-flex h-auto min-h-12 items-center justify-center rounded-md bg-muted p-1.5 text-muted-foreground w-full border border-border shadow-sm",s),...t}));Ih.displayName=j0.displayName;const Ri=_.forwardRef(({className:s,...t},r)=>e.jsx(_0,{ref:r,className:ut("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 text-xs sm:text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm hover:bg-accent/50 hover:text-accent-foreground min-h-10 sm:min-h-11",s),...t}));Ri.displayName=_0.displayName;const Mi=_.forwardRef(({className:s,...t},r)=>e.jsx(S0,{ref:r,className:ut("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Mi.displayName=S0.displayName;function hw({params:s}){const[t,r]=_.useState(void 0),[a,i]=_.useState(new Date),[o,c]=_.useState(""),[h,u]=_.useState(!1);qs();const{data:m}=Kc({queryKey:[`/api/professionals/${s.id}`]}),{data:x=[]}=Kc({queryKey:["/api/professionals"]}),v=m||x.find(Q=>Q.id===parseInt(s.id));if(!v)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profissional não encontrado"}),e.jsx(Os,{href:"/",children:e.jsx(Te,{children:"Voltar para Home"})})]})});const b={acompanhante_hospitalar:"🏥"},g={acompanhante_hospitalar:"Acompanhante Hospitalar"},k=b[v.category]||"👨‍⚕️",j=g[v.category]||v.category,S=(()=>{const Q=[];for(let ge=8;ge<=18;ge++)for(let ae of[0,30]){const ee=`${ge.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}`;Q.push(ee)}return Q})(),P=()=>{o.trim()&&(console.log("Sending message:",o),c(""),u(!1))},B=[],U=[];return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{href:"/",children:e.jsx(Te,{variant:"ghost",size:"sm",children:e.jsx($s,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Perfil do Profissional"}),e.jsx("div",{className:"ml-auto flex gap-2",children:e.jsx(Te,{variant:"outline",size:"sm",children:e.jsx(Q2,{className:"h-4 w-4"})})})]})}),e.jsxs("div",{className:"p-4 pb-20 space-y-6",children:[e.jsx(ot,{children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:v.imageUrl||void 0,alt:v.name,className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover mx-auto sm:mx-0"})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:v.name}),e.jsxs("p",{className:"text-lg text-primary font-semibold flex items-center justify-center sm:justify-start gap-2 mb-2",children:[e.jsx("span",{children:k}),j]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:v.specialization})]}),e.jsx(Zs,{variant:v.available?"secondary":"outline",className:`${v.available?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:v.available?"Disponível":"Ocupado"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(gn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-semibold",children:v.rating})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avaliação"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold mb-1",children:v.totalReviews}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avaliações"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold mb-1",children:v.experience}),e.jsx("p",{className:"text-xs text-gray-500",children:"Experiência"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold mb-1 text-primary",children:["R$ ",v.hourlyRate,"/h"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Valor"})]})]}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-600 dark:text-gray-400 mb-6",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{children:v.location}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[v.distance," km de você"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Te,{className:"flex-1",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Agendar Consulta"]}),e.jsxs(Nl,{open:h,onOpenChange:u,children:[e.jsx(Lu,{asChild:!0,children:e.jsxs(Te,{variant:"outline",className:"flex-1",children:[e.jsx(ba,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})}),e.jsxs(Co,{children:[e.jsx(Po,{children:e.jsxs(Lo,{children:["Enviar mensagem para ",v.name]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ea,{placeholder:"Digite sua mensagem sobre o serviço que você precisa...",value:o,onChange:Q=>c(Q.target.value),rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Te,{onClick:P,disabled:!o.trim(),children:"Enviar Mensagem"}),e.jsx(Te,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"})]})]})]})]}),e.jsxs(Te,{variant:"outline",children:[e.jsx($c,{className:"h-4 w-4 mr-2"}),"Videochamada"]})]})]})]})})}),e.jsxs(k0,{defaultValue:"about",className:"space-y-4 sm:space-y-6",children:[e.jsxs(Ih,{className:"grid w-full grid-cols-4 h-auto sm:h-10 p-1 gap-1",children:[e.jsx(Ri,{value:"about",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Sobre"}),e.jsx(Ri,{value:"portfolio",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Portfólio"}),e.jsx(Ri,{value:"reviews",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Avaliações"}),e.jsx(Ri,{value:"schedule",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Agendar"})]}),e.jsxs(Mi,{value:"about",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(H2,{className:"h-5 w-5"}),"Sobre o Profissional"]})}),e.jsx(lt,{children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:v.description})})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Xp,{className:"h-5 w-5"}),"Certificações e Qualificações"]})}),e.jsx(lt,{children:e.jsx("div",{className:"space-y-3",children:v.certifications?.split(",").map((Q,ge)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Xt,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:Q.trim()})]},ge))})})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(zi,{className:"h-5 w-5"}),"Informações de Contato"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:v.location})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Atendimento de segunda a sábado"})]})]})})]})]}),e.jsx(Mi,{value:"portfolio",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Ro,{className:"h-5 w-5"}),"Portfólio de Serviços"]})}),e.jsx(lt,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:B.map(Q=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-sm border",children:[e.jsx("img",{src:Q.image,alt:Q.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx(Zs,{variant:"outline",className:"mb-2",children:Q.category}),e.jsx("h3",{className:"font-semibold mb-2",children:Q.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q.description})]})]},Q.id))})})]})}),e.jsx(Mi,{value:"reviews",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-5 w-5"}),"Avaliações dos Pacientes"]})}),e.jsx(lt,{children:e.jsx("div",{className:"space-y-6",children:U.map(Q=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-semibold text-sm",children:Q.patient[0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:Q.patient}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(Q.date).toLocaleDateString("pt-BR")})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((ge,ae)=>e.jsx(gn,{className:`h-4 w-4 ${ae<Q.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},ae))})]}),e.jsx(Zs,{variant:"outline",className:"mb-2",children:Q.service}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:Q.comment})]},Q.id))})})]})}),e.jsx(Mi,{value:"schedule",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5"}),"Agendar Consulta"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Selecione a data"}),e.jsx("input",{type:"date",value:a.toISOString().split("T")[0],onChange:Q=>i(new Date(Q.target.value)),className:"w-full p-3 border rounded-lg",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Horários disponíveis"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:S.map(Q=>e.jsx(Te,{variant:t===Q?"default":"outline",size:"sm",onClick:()=>r(Q),className:"text-xs",children:Q},Q))})]}),t&&e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Resumo do Agendamento"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Profissional:"})," ",v.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serviço:"})," ",v.specialization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Data:"})," ",a.toLocaleDateString("pt-BR")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Horário:"})," ",t]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor:"})," R$ ",v.hourlyRate,"/hora"]})]}),e.jsx(Os,{href:"/payment",children:e.jsx(Te,{className:"w-full mt-4",children:"Confirmar Agendamento"})})]})]})})]})})]})]})]})}function C0(s){const t=_.useRef({value:s,previous:s});return _.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var Nd="Switch",[fw,D_]=Vi(Nd),[mw,pw]=fw(Nd),P0=_.forwardRef((s,t)=>{const{__scopeSwitch:r,name:a,checked:i,defaultChecked:o,required:c,disabled:h,value:u="on",onCheckedChange:m,form:x,...v}=s,[b,g]=_.useState(null),k=Us(t,B=>g(B)),j=_.useRef(!1),T=b?x||!!b.closest("form"):!0,[S,P]=gl({prop:i,defaultProp:o??!1,onChange:m,caller:Nd});return e.jsxs(mw,{scope:r,checked:S,disabled:h,children:[e.jsx(ts.button,{type:"button",role:"switch","aria-checked":S,"aria-required":c,"data-state":E0(S),"data-disabled":h?"":void 0,disabled:h,value:u,...v,ref:k,onClick:zt(s.onClick,B=>{P(U=>!U),T&&(j.current=B.isPropagationStopped(),j.current||B.stopPropagation())})}),T&&e.jsx(T0,{control:b,bubbles:!j.current,name:a,value:u,checked:S,required:c,disabled:h,form:x,style:{transform:"translateX(-100%)"}})]})});P0.displayName=Nd;var L0="SwitchThumb",A0=_.forwardRef((s,t)=>{const{__scopeSwitch:r,...a}=s,i=pw(L0,r);return e.jsx(ts.span,{"data-state":E0(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});A0.displayName=L0;var gw="SwitchBubbleInput",T0=_.forwardRef(({__scopeSwitch:s,control:t,checked:r,bubbles:a=!0,...i},o)=>{const c=_.useRef(null),h=Us(c,o),u=C0(r),m=x1(t);return _.useEffect(()=>{const x=c.current;if(!x)return;const v=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(v,"checked").set;if(u!==r&&g){const k=new Event("click",{bubbles:a});g.call(x,r),x.dispatchEvent(k)}},[u,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:h,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});T0.displayName=gw;function E0(s){return s?"checked":"unchecked"}var I0=P0,xw=A0;const ai=_.forwardRef(({className:s,...t},r)=>e.jsx(I0,{className:ut("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input hover:shadow-md active:scale-95",s),...t,ref:r,children:e.jsx(xw,{className:ut("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-all duration-300 ease-in-out data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 hover:shadow-xl")})}));ai.displayName=I0.displayName;function vw({children:s}){const[t,r]=_.useState(!0),[a,i]=_.useState(!1);qs(),_.useEffect(()=>{o()},[]);const o=async()=>{try{const c=sessionStorage.getItem("token");console.log("🔍 StripeGuard - Iniciando verificação..."),console.log("🔑 Token existe?",!!c);const h=await fetch("/api/stripe/connect/account-status",{headers:{Authorization:`Bearer ${c}`}});if(console.log("📡 Response status:",h.status),h.ok){const u=await h.json();console.log("📊 StripeGuard - Dados completos:",{connected:u.connected,accountId:u.accountId,detailsSubmitted:u.detailsSubmitted,chargesEnabled:u.chargesEnabled,payoutsEnabled:u.payoutsEnabled,needsOnboarding:u.needsOnboarding}),console.log("✅ StripeGuard - Permitindo acesso (modo debug)"),i(!0),u.connected||(console.warn("⚠️ Profissional precisa configurar Stripe para receber pagamentos"),console.warn("Acesse /provider-settings para configurar"))}else{const u=await h.text();console.error("❌ Erro na resposta:",h.status,u),console.warn("⚠️ StripeGuard - Erro ao verificar, permitindo acesso"),i(!0)}}catch(c){console.error("❌ StripeGuard - Erro ao verificar Stripe:",c),i(!0)}finally{r(!1)}};return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verificando configuração de pagamentos..."})]})}):a?e.jsx(e.Fragment,{children:s}):null}const yw=y1,bw=b1,ww=_.forwardRef(({className:s,inset:t,children:r,...a},i)=>e.jsxs(ep,{ref:i,className:ut("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...a,children:[r,e.jsx(eg,{className:"ml-auto"})]}));ww.displayName=ep.displayName;const Nw=_.forwardRef(({className:s,...t},r)=>e.jsx(tp,{ref:r,className:ut("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t}));Nw.displayName=tp.displayName;const R0=_.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(v1,{children:e.jsx(sp,{ref:a,sideOffset:t,className:ut("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...r})}));R0.displayName=sp.displayName;const xo=_.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(rp,{ref:a,className:ut("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...r}));xo.displayName=rp.displayName;const jw=_.forwardRef(({className:s,children:t,checked:r,...a},i)=>e.jsxs(np,{ref:i,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ap,{children:e.jsx(cc,{className:"h-4 w-4"})})}),t]}));jw.displayName=np.displayName;const _w=_.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(ip,{ref:a,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ap,{children:e.jsx(G2,{className:"h-2 w-2 fill-current"})})}),t]}));_w.displayName=ip.displayName;const Sw=_.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(op,{ref:a,className:ut("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));Sw.displayName=op.displayName;const Tu=_.forwardRef(({className:s,...t},r)=>e.jsx(lp,{ref:r,className:ut("-mx-1 my-1 h-px bg-muted",s),...t}));Tu.displayName=lp.displayName;const kw=N1,Cw=j1,M0=_.forwardRef(({className:s,align:t="center",sideOffset:r=4,...a},i)=>e.jsx(w1,{children:e.jsx(cp,{ref:i,align:t,sideOffset:r,className:ut("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...a})}));M0.displayName=cp.displayName;const Pw=[{label:"Início",to:"/provider-dashboard",icon:e.jsx(Pl,{className:"h-6 w-6"})},{label:"Agenda",to:"/agenda-profissional",icon:e.jsx(zs,{className:"h-6 w-6"})},{label:"Chat",to:"/messages-provider",icon:e.jsx(ba,{className:"h-6 w-6"})},{label:"Pedidos",to:"/provider-orders",icon:e.jsx(Y2,{className:"h-6 w-6"})},{label:"Perfil",to:"/provider-profile",icon:e.jsx($r,{className:"h-6 w-6"})}];function O0(){const[s]=qs();return e.jsx("nav",{className:"bg-white border-t border-gray-200 fixed bottom-0 left-0 w-full z-50 shadow rounded-t-xl px-0",children:e.jsx("ul",{className:"flex justify-around items-center h-16 max-w-full px-2 sm:px-4",children:Pw.map(t=>e.jsx("li",{children:e.jsxs(Os,{href:t.to,className:`flex flex-col items-center text-xs font-medium transition-colors duration-200 ${s===t.to?"text-yellow-500":"text-gray-500 hover:text-yellow-500"}`,children:[t.icon,e.jsx("span",{className:"mt-1",children:t.label})]})},t.to))})})}function Ao({children:s}){return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:s}),e.jsx(O0,{})]})}function Lw({professionalId:s}){const[t,r]=_.useState([]),[a,i]=_.useState(!0),[o,c]=_.useState({totalEarnings:0,totalServices:0,averageRating:0,totalReviews:0}),{toast:h}=ks();_.useEffect(()=>{u()},[s]);const u=async()=>{try{i(!0);const b=sessionStorage.getItem("token");if(!b){h({title:"Erro",description:"Token de autenticação não encontrado",variant:"destructive"});return}const g=await fetch(`${st()}/api/professional/${s}/completed-services`,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(!g.ok)throw new Error("Erro ao buscar serviços concluídos");const j=(await g.json()).data||[];r(j);const T=j.reduce((Q,ge)=>Q+Number(ge.amount),0),S=j.length,P=j.filter(Q=>Q.hasReview),B=P.length,U=B>0?P.reduce((Q,ge)=>Q+(ge.reviewRating||0),0)/B:0;c({totalEarnings:T,totalServices:S,averageRating:Math.round(U*10)/10,totalReviews:B})}catch(b){console.error("Erro ao buscar serviços concluídos:",b),r([]),c({totalEarnings:0,totalServices:0,averageRating:0,totalReviews:0}),h({title:"Erro",description:"Não foi possível carregar os serviços concluídos",variant:"destructive"})}finally{i(!1)}},m=b=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(b),x=b=>new Date(b).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),v=b=>Array.from({length:5},(g,k)=>e.jsx(gn,{className:`h-4 w-4 ${k<b?"text-yellow-400 fill-current":"text-gray-300"}`},k));return a?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(sn,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ganhos Totais"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m(o.totalEarnings)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Xt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Serviços Concluídos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalServices})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(gn,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avaliação Média"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.averageRating})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ba,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avaliações"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalReviews})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Serviços Concluídos"})}),!t||t.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(Xt,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"Nenhum serviço concluído ainda"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t?.map(b=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:b.serviceTitle}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Concluído"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx($r,{className:"h-4 w-4"}),e.jsx("span",{children:b.clientName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Concluído em ",x(b.completedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(sn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-green-600",children:m(b.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Transação: ",b.transactionStatus]})]})]}),b.hasReview?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avaliação do Cliente:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[v(b.reviewRating||0),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",b.reviewRating,"/5)"]})]})]}),b.reviewComment&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',b.reviewComment,'"']}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Avaliado em ",x(b.reviewCreatedAt||"")]})]}):e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"⏳ Aguardando avaliação do cliente"})})]})})},b.serviceRequestId))})]})]})}function Aw(s,t){const r=_.useRef(t);_.useEffect(function(){t!==r.current&&s.attributionControl!=null&&(r.current!=null&&s.attributionControl.removeAttribution(r.current),t!=null&&s.attributionControl.addAttribution(t)),r.current=t},[s,t])}const Tw=1;function Ew(s){return Object.freeze({__version:Tw,map:s})}function Rh(s,t){return Object.freeze({...s,...t})}const D0=_.createContext(null),Mh=D0.Provider;function jd(){const s=_.useContext(D0);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function F0(s){function t(r,a){const{instance:i,context:o}=s(r).current;return _.useImperativeHandle(a,()=>i),r.children==null?null:fs.createElement(Mh,{value:o},r.children)}return _.forwardRef(t)}function Iw(s){function t(r,a){const{instance:i}=s(r).current;return _.useImperativeHandle(a,()=>i),null}return _.forwardRef(t)}function Rw(s){return function(r){const a=jd(),i=s(r,a),{instance:o}=i.current,c=_.useRef(r.position),{position:h}=r;return _.useEffect(function(){return o.addTo(a.map),function(){o.remove()}},[a.map,o]),_.useEffect(function(){h!=null&&h!==c.current&&(o.setPosition(h),c.current=h)},[o,h]),i}}function Mw(s,t){const r=_.useRef();_.useEffect(function(){return t!=null&&s.instance.on(t),r.current=t,function(){r.current!=null&&s.instance.off(r.current),r.current=null}},[s,t])}function z0(s,t){const r=s.pane??t.pane;return r?{...s,pane:r}:s}var Vl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Ow=Vl.exports,Yf;function Dw(){return Yf||(Yf=1,function(s,t){(function(r,a){a(t)})(Ow,function(r){var a="1.9.4";function i(n){var l,f,w,A;for(f=1,w=arguments.length;f<w;f++){A=arguments[f];for(l in A)n[l]=A[l]}return n}var o=Object.create||function(){function n(){}return function(l){return n.prototype=l,new n}}();function c(n,l){var f=Array.prototype.slice;if(n.bind)return n.bind.apply(n,f.call(arguments,1));var w=f.call(arguments,2);return function(){return n.apply(l,w.length?w.concat(f.call(arguments)):arguments)}}var h=0;function u(n){return"_leaflet_id"in n||(n._leaflet_id=++h),n._leaflet_id}function m(n,l,f){var w,A,$,de;return de=function(){w=!1,A&&($.apply(f,A),A=!1)},$=function(){w?A=arguments:(n.apply(f,arguments),setTimeout(de,l),w=!0)},$}function x(n,l,f){var w=l[1],A=l[0],$=w-A;return n===w&&f?n:((n-A)%$+$)%$+A}function v(){return!1}function b(n,l){if(l===!1)return n;var f=Math.pow(10,l===void 0?6:l);return Math.round(n*f)/f}function g(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function k(n){return g(n).split(/\s+/)}function j(n,l){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?o(n.options):{});for(var f in l)n.options[f]=l[f];return n.options}function T(n,l,f){var w=[];for(var A in n)w.push(encodeURIComponent(f?A.toUpperCase():A)+"="+encodeURIComponent(n[A]));return(!l||l.indexOf("?")===-1?"?":"&")+w.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function P(n,l){return n.replace(S,function(f,w){var A=l[w];if(A===void 0)throw new Error("No value provided for variable "+f);return typeof A=="function"&&(A=A(l)),A})}var B=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function U(n,l){for(var f=0;f<n.length;f++)if(n[f]===l)return f;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var ae=0;function ee(n){var l=+new Date,f=Math.max(0,16-(l-ae));return ae=l+f,window.setTimeout(n,f)}var K=window.requestAnimationFrame||ge("RequestAnimationFrame")||ee,ue=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function I(n,l,f){if(f&&K===ee)n.call(l);else return K.call(window,c(n,l))}function q(n){n&&ue.call(window,n)}var ne={__proto__:null,extend:i,create:o,bind:c,get lastId(){return h},stamp:u,throttle:m,wrapNum:x,falseFn:v,formatNum:b,trim:g,splitWords:k,setOptions:j,getParamString:T,template:P,isArray:B,indexOf:U,emptyImageUrl:Q,requestFn:K,cancelFn:ue,requestAnimFrame:I,cancelAnimFrame:q};function Y(){}Y.extend=function(n){var l=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=l.__super__=this.prototype,w=o(f);w.constructor=l,l.prototype=w;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(l[A]=this[A]);return n.statics&&i(l,n.statics),n.includes&&(he(n.includes),i.apply(null,[w].concat(n.includes))),i(w,n),delete w.statics,delete w.includes,w.options&&(w.options=f.options?o(f.options):{},i(w.options,n.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,de=w._initHooks.length;$<de;$++)w._initHooks[$].call(this)}},l},Y.include=function(n){var l=this.prototype.options;return i(this.prototype,n),n.options&&(this.prototype.options=l,this.mergeOptions(n.options)),this},Y.mergeOptions=function(n){return i(this.prototype.options,n),this},Y.addInitHook=function(n){var l=Array.prototype.slice.call(arguments,1),f=typeof n=="function"?n:function(){this[n].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function he(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=B(n)?n:[n];for(var l=0;l<n.length;l++)n[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var pe={on:function(n,l,f){if(typeof n=="object")for(var w in n)this._on(w,n[w],l);else{n=k(n);for(var A=0,$=n.length;A<$;A++)this._on(n[A],l,f)}return this},off:function(n,l,f){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var w in n)this._off(w,n[w],l);else{n=k(n);for(var A=arguments.length===1,$=0,de=n.length;$<de;$++)A?this._off(n[$]):this._off(n[$],l,f)}return this},_on:function(n,l,f,w){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(n,l,f)===!1){f===this&&(f=void 0);var A={fn:l,ctx:f};w&&(A.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(A)}},_off:function(n,l,f){var w,A,$;if(this._events&&(w=this._events[n],!!w)){if(arguments.length===1){if(this._firingCount)for(A=0,$=w.length;A<$;A++)w[A].fn=v;delete this._events[n];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var de=this._listens(n,l,f);if(de!==!1){var Ce=w[de];this._firingCount&&(Ce.fn=v,this._events[n]=w=w.slice()),w.splice(de,1)}}},fire:function(n,l,f){if(!this.listens(n,f))return this;var w=i({},l,{type:n,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var A=this._events[n];if(A){this._firingCount=this._firingCount+1||1;for(var $=0,de=A.length;$<de;$++){var Ce=A[$],Ae=Ce.fn;Ce.once&&this.off(n,Ae,Ce.ctx),Ae.call(Ce.ctx||this,w)}this._firingCount--}}return f&&this._propagateEvent(w),this},listens:function(n,l,f,w){typeof n!="string"&&console.warn('"string" type argument expected');var A=l;typeof l!="function"&&(w=!!l,A=void 0,f=void 0);var $=this._events&&this._events[n];if($&&$.length&&this._listens(n,A,f)!==!1)return!0;if(w){for(var de in this._eventParents)if(this._eventParents[de].listens(n,l,f,w))return!0}return!1},_listens:function(n,l,f){if(!this._events)return!1;var w=this._events[n]||[];if(!l)return!!w.length;f===this&&(f=void 0);for(var A=0,$=w.length;A<$;A++)if(w[A].fn===l&&w[A].ctx===f)return A;return!1},once:function(n,l,f){if(typeof n=="object")for(var w in n)this._on(w,n[w],l,!0);else{n=k(n);for(var A=0,$=n.length;A<$;A++)this._on(n[A],l,f,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[u(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[u(n)],this},_propagateEvent:function(n){for(var l in this._eventParents)this._eventParents[l].fire(n.type,i({layer:n.target,propagatedFrom:n.target},n),!0)}};pe.addEventListener=pe.on,pe.removeEventListener=pe.clearAllEventListeners=pe.off,pe.addOneTimeEventListener=pe.once,pe.fireEvent=pe.fire,pe.hasEventListeners=pe.listens;var oe=Y.extend(pe);function ie(n,l,f){this.x=f?Math.round(n):n,this.y=f?Math.round(l):l}var Ne=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(n){return this.clone()._add(J(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(J(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new ie(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new ie(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ne(this.x),this.y=Ne(this.y),this},distanceTo:function(n){n=J(n);var l=n.x-this.x,f=n.y-this.y;return Math.sqrt(l*l+f*f)},equals:function(n){return n=J(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=J(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function J(n,l,f){return n instanceof ie?n:B(n)?new ie(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new ie(n.x,n.y):new ie(n,l,f)}function fe(n,l){if(n)for(var f=l?[n,l]:n,w=0,A=f.length;w<A;w++)this.extend(f[w])}fe.prototype={extend:function(n){var l,f;if(!n)return this;if(n instanceof ie||typeof n[0]=="number"||"x"in n)l=f=J(n);else if(n=R(n),l=n.min,f=n.max,!l||!f)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=f.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(n){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var l,f;return typeof n[0]=="number"||n instanceof ie?n=J(n):n=R(n),n instanceof fe?(l=n.min,f=n.max):l=f=n,l.x>=this.min.x&&f.x<=this.max.x&&l.y>=this.min.y&&f.y<=this.max.y},intersects:function(n){n=R(n);var l=this.min,f=this.max,w=n.min,A=n.max,$=A.x>=l.x&&w.x<=f.x,de=A.y>=l.y&&w.y<=f.y;return $&&de},overlaps:function(n){n=R(n);var l=this.min,f=this.max,w=n.min,A=n.max,$=A.x>l.x&&w.x<f.x,de=A.y>l.y&&w.y<f.y;return $&&de},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var l=this.min,f=this.max,w=Math.abs(l.x-f.x)*n,A=Math.abs(l.y-f.y)*n;return R(J(l.x-w,l.y-A),J(f.x+w,f.y+A))},equals:function(n){return n?(n=R(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function R(n,l){return!n||n instanceof fe?n:new fe(n,l)}function E(n,l){if(n)for(var f=l?[n,l]:n,w=0,A=f.length;w<A;w++)this.extend(f[w])}E.prototype={extend:function(n){var l=this._southWest,f=this._northEast,w,A;if(n instanceof W)w=n,A=n;else if(n instanceof E){if(w=n._southWest,A=n._northEast,!w||!A)return this}else return n?this.extend(se(n)||D(n)):this;return!l&&!f?(this._southWest=new W(w.lat,w.lng),this._northEast=new W(A.lat,A.lng)):(l.lat=Math.min(w.lat,l.lat),l.lng=Math.min(w.lng,l.lng),f.lat=Math.max(A.lat,f.lat),f.lng=Math.max(A.lng,f.lng)),this},pad:function(n){var l=this._southWest,f=this._northEast,w=Math.abs(l.lat-f.lat)*n,A=Math.abs(l.lng-f.lng)*n;return new E(new W(l.lat-w,l.lng-A),new W(f.lat+w,f.lng+A))},getCenter:function(){return new W((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new W(this.getNorth(),this.getWest())},getSouthEast:function(){return new W(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof W||"lat"in n?n=se(n):n=D(n);var l=this._southWest,f=this._northEast,w,A;return n instanceof E?(w=n.getSouthWest(),A=n.getNorthEast()):w=A=n,w.lat>=l.lat&&A.lat<=f.lat&&w.lng>=l.lng&&A.lng<=f.lng},intersects:function(n){n=D(n);var l=this._southWest,f=this._northEast,w=n.getSouthWest(),A=n.getNorthEast(),$=A.lat>=l.lat&&w.lat<=f.lat,de=A.lng>=l.lng&&w.lng<=f.lng;return $&&de},overlaps:function(n){n=D(n);var l=this._southWest,f=this._northEast,w=n.getSouthWest(),A=n.getNorthEast(),$=A.lat>l.lat&&w.lat<f.lat,de=A.lng>l.lng&&w.lng<f.lng;return $&&de},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,l){return n?(n=D(n),this._southWest.equals(n.getSouthWest(),l)&&this._northEast.equals(n.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function D(n,l){return n instanceof E?n:new E(n,l)}function W(n,l,f){if(isNaN(n)||isNaN(l))throw new Error("Invalid LatLng object: ("+n+", "+l+")");this.lat=+n,this.lng=+l,f!==void 0&&(this.alt=+f)}W.prototype={equals:function(n,l){if(!n)return!1;n=se(n);var f=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return f<=(l===void 0?1e-9:l)},toString:function(n){return"LatLng("+b(this.lat,n)+", "+b(this.lng,n)+")"},distanceTo:function(n){return le.distance(this,se(n))},wrap:function(){return le.wrapLatLng(this)},toBounds:function(n){var l=180*n/40075017,f=l/Math.cos(Math.PI/180*this.lat);return D([this.lat-l,this.lng-f],[this.lat+l,this.lng+f])},clone:function(){return new W(this.lat,this.lng,this.alt)}};function se(n,l,f){return n instanceof W?n:B(n)&&typeof n[0]!="object"?n.length===3?new W(n[0],n[1],n[2]):n.length===2?new W(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new W(n.lat,"lng"in n?n.lng:n.lon,n.alt):l===void 0?null:new W(n,l,f)}var X={latLngToPoint:function(n,l){var f=this.projection.project(n),w=this.scale(l);return this.transformation._transform(f,w)},pointToLatLng:function(n,l){var f=this.scale(l),w=this.transformation.untransform(n,f);return this.projection.unproject(w)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var l=this.projection.bounds,f=this.scale(n),w=this.transformation.transform(l.min,f),A=this.transformation.transform(l.max,f);return new fe(w,A)},infinite:!1,wrapLatLng:function(n){var l=this.wrapLng?x(n.lng,this.wrapLng,!0):n.lng,f=this.wrapLat?x(n.lat,this.wrapLat,!0):n.lat,w=n.alt;return new W(f,l,w)},wrapLatLngBounds:function(n){var l=n.getCenter(),f=this.wrapLatLng(l),w=l.lat-f.lat,A=l.lng-f.lng;if(w===0&&A===0)return n;var $=n.getSouthWest(),de=n.getNorthEast(),Ce=new W($.lat-w,$.lng-A),Ae=new W(de.lat-w,de.lng-A);return new E(Ce,Ae)}},le=i({},X,{wrapLng:[-180,180],R:6371e3,distance:function(n,l){var f=Math.PI/180,w=n.lat*f,A=l.lat*f,$=Math.sin((l.lat-n.lat)*f/2),de=Math.sin((l.lng-n.lng)*f/2),Ce=$*$+Math.cos(w)*Math.cos(A)*de*de,Ae=2*Math.atan2(Math.sqrt(Ce),Math.sqrt(1-Ce));return this.R*Ae}}),ce=6378137,xe={R:ce,MAX_LATITUDE:85.0511287798,project:function(n){var l=Math.PI/180,f=this.MAX_LATITUDE,w=Math.max(Math.min(f,n.lat),-f),A=Math.sin(w*l);return new ie(this.R*n.lng*l,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(n){var l=180/Math.PI;return new W((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*l,n.x*l/this.R)},bounds:function(){var n=ce*Math.PI;return new fe([-n,-n],[n,n])}()};function je(n,l,f,w){if(B(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=l,this._c=f,this._d=w}je.prototype={transform:function(n,l){return this._transform(n.clone(),l)},_transform:function(n,l){return l=l||1,n.x=l*(this._a*n.x+this._b),n.y=l*(this._c*n.y+this._d),n},untransform:function(n,l){return l=l||1,new ie((n.x/l-this._b)/this._a,(n.y/l-this._d)/this._c)}};function Me(n,l,f,w){return new je(n,l,f,w)}var De=i({},le,{code:"EPSG:3857",projection:xe,transformation:function(){var n=.5/(Math.PI*xe.R);return Me(n,.5,-n,.5)}()}),Ye=i({},De,{code:"EPSG:900913"});function G(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Z(n,l){var f="",w,A,$,de,Ce,Ae;for(w=0,$=n.length;w<$;w++){for(Ce=n[w],A=0,de=Ce.length;A<de;A++)Ae=Ce[A],f+=(A?"L":"M")+Ae.x+" "+Ae.y;f+=l?Je.svg?"z":"x":""}return f||"M0 0"}var Fe=document.documentElement.style,Be="ActiveXObject"in window,_e=Be&&!document.addEventListener,Ie="msLaunchUri"in navigator&&!("documentMode"in document),ze=us("webkit"),Ge=us("android"),nt=us("android 2")||us("android 3"),pt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Nt=Ge&&us("Google")&&pt<537&&!("AudioNode"in window),yt=!!window.opera,qt=!Ie&&us("chrome"),is=us("gecko")&&!ze&&!yt&&!Be,xt=!qt&&us("safari"),Ct=us("phantom"),Ke="OTransition"in Fe,dr=navigator.platform.indexOf("Win")===0,Gt=Be&&"transition"in Fe,gr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,cs="MozPerspective"in Fe,ds=!window.L_DISABLE_3D&&(Gt||gr||cs)&&!Ke&&!Ct,_r=typeof orientation<"u"||us("mobile"),Yt=_r&&ze,sa=_r&&gr,Ns=!window.PointerEvent&&window.MSPointerEvent,Ur=!!(window.PointerEvent||Ns),xn="ontouchstart"in window||!!window.TouchEvent,Is=!window.L_NO_TOUCH&&(xn||Ur),Pt=_r&&yt,as=_r&&is,ra=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,er=function(){var n=!1;try{var l=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",v,l),window.removeEventListener("testPassiveEventSupport",v,l)}catch{}return n}(),Hr=function(){return!!document.createElement("canvas").getContext}(),Sr=!!(document.createElementNS&&G("svg").createSVGRect),ft=!!Sr&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),rn=!Sr&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var l=n.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),vn=navigator.platform.indexOf("Mac")===0,kr=navigator.platform.indexOf("Linux")===0;function us(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var Je={ie:Be,ielt9:_e,edge:Ie,webkit:ze,android:Ge,android23:nt,androidStock:Nt,opera:yt,chrome:qt,gecko:is,safari:xt,phantom:Ct,opera12:Ke,win:dr,ie3d:Gt,webkit3d:gr,gecko3d:cs,any3d:ds,mobile:_r,mobileWebkit:Yt,mobileWebkit3d:sa,msPointer:Ns,pointer:Ur,touch:Is,touchNative:xn,mobileOpera:Pt,mobileGecko:as,retina:ra,passiveEvents:er,canvas:Hr,svg:Sr,vml:rn,inlineSvg:ft,mac:vn,linux:kr},Cr=Je.msPointer?"MSPointerDown":"pointerdown",na=Je.msPointer?"MSPointerMove":"pointermove",Rr=Je.msPointer?"MSPointerUp":"pointerup",Mr=Je.msPointer?"MSPointerCancel":"pointercancel",xr={touchstart:Cr,touchmove:na,touchend:Rr,touchcancel:Mr},Wr={touchstart:Ft,touchmove:Et,touchend:Et,touchcancel:Et},ve={},Oe=!1;function Ve(n,l,f){return l==="touchstart"&&jt(),Wr[l]?(f=Wr[l].bind(this,f),n.addEventListener(xr[l],f,!1),f):(console.warn("wrong event specified:",l),v)}function rt(n,l,f){if(!xr[l]){console.warn("wrong event specified:",l);return}n.removeEventListener(xr[l],f,!1)}function Dt(n){ve[n.pointerId]=n}function At(n){ve[n.pointerId]&&(ve[n.pointerId]=n)}function Tt(n){delete ve[n.pointerId]}function jt(){Oe||(document.addEventListener(Cr,Dt,!0),document.addEventListener(na,At,!0),document.addEventListener(Rr,Tt,!0),document.addEventListener(Mr,Tt,!0),Oe=!0)}function Et(n,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var f in ve)l.touches.push(ve[f]);l.changedTouches=[l],n(l)}}function Ft(n,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Hs(l),Et(n,l)}function Kt(n){var l={},f,w;for(w in n)f=n[w],l[w]=f&&f.bind?f.bind(n):f;return n=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var bt=200;function gt(n,l){n.addEventListener("dblclick",l);var f=0,w;function A($){if($.detail!==1){w=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var de=la($);if(!(de.some(function(Ae){return Ae instanceof HTMLLabelElement&&Ae.attributes.for})&&!de.some(function(Ae){return Ae instanceof HTMLInputElement||Ae instanceof HTMLSelectElement}))){var Ce=Date.now();Ce-f<=bt?(w++,w===2&&l(Kt($))):w=1,f=Ce}}}return n.addEventListener("click",A),{dblclick:l,simDblclick:A}}function Cs(n,l){n.removeEventListener("dblclick",l.dblclick),n.removeEventListener("click",l.simDblclick)}var os=En(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tr=En(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Vr=tr==="webkitTransition"||tr==="OTransition"?tr+"End":"transitionend";function Ht(n){return typeof n=="string"?document.getElementById(n):n}function $t(n,l){var f=n.style[l]||n.currentStyle&&n.currentStyle[l];if((!f||f==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(n,null);f=w?w[l]:null}return f==="auto"?null:f}function mt(n,l,f){var w=document.createElement(n);return w.className=l||"",f&&f.appendChild(w),w}function Lt(n){var l=n.parentNode;l&&l.removeChild(n)}function vr(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function yn(n){var l=n.parentNode;l&&l.lastChild!==n&&l.appendChild(n)}function bn(n){var l=n.parentNode;l&&l.firstChild!==n&&l.insertBefore(n,l.firstChild)}function Un(n,l){if(n.classList!==void 0)return n.classList.contains(l);var f=js(n);return f.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(f)}function St(n,l){if(n.classList!==void 0)for(var f=k(l),w=0,A=f.length;w<A;w++)n.classList.add(f[w]);else if(!Un(n,l)){var $=js(n);sr(n,($?$+" ":"")+l)}}function Jt(n,l){n.classList!==void 0?n.classList.remove(l):sr(n,g((" "+js(n)+" ").replace(" "+l+" "," ")))}function sr(n,l){n.className.baseVal===void 0?n.className=l:n.className.baseVal=l}function js(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function ur(n,l){"opacity"in n.style?n.style.opacity=l:"filter"in n.style&&di(n,l)}function di(n,l){var f=!1,w="DXImageTransform.Microsoft.Alpha";try{f=n.filters.item(w)}catch{if(l===1)return}l=Math.round(l*100),f?(f.Enabled=l!==100,f.Opacity=l):n.style.filter+=" progid:"+w+"(opacity="+l+")"}function En(n){for(var l=document.documentElement.style,f=0;f<n.length;f++)if(n[f]in l)return n[f];return!1}function wn(n,l,f){var w=l||new ie(0,0);n.style[os]=(Je.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(f?" scale("+f+")":"")}function Rs(n,l){n._leaflet_pos=l,Je.any3d?wn(n,l):(n.style.left=l.x+"px",n.style.top=l.y+"px")}function Hn(n){return n._leaflet_pos||new ie(0,0)}var Ga,aa,Yi;if("onselectstart"in document)Ga=function(){Mt(window,"selectstart",Hs)},aa=function(){Qt(window,"selectstart",Hs)};else{var Ya=En(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ga=function(){if(Ya){var n=document.documentElement.style;Yi=n[Ya],n[Ya]="none"}},aa=function(){Ya&&(document.documentElement.style[Ya]=Yi,Yi=void 0)}}function Ki(){Mt(window,"dragstart",Hs)}function In(){Qt(window,"dragstart",Hs)}var ia,ja;function ui(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(rr(),ia=n,ja=n.style.outlineStyle,n.style.outlineStyle="none",Mt(window,"keydown",rr))}function rr(){ia&&(ia.style.outlineStyle=ja,ia=void 0,ja=void 0,Qt(window,"keydown",rr))}function Do(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function hi(n){var l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}var It={__proto__:null,TRANSFORM:os,TRANSITION:tr,TRANSITION_END:Vr,get:Ht,getStyle:$t,create:mt,remove:Lt,empty:vr,toFront:yn,toBack:bn,hasClass:Un,addClass:St,removeClass:Jt,setClass:sr,getClass:js,setOpacity:ur,testProp:En,setTransform:wn,setPosition:Rs,getPosition:Hn,get disableTextSelection(){return Ga},get enableTextSelection(){return aa},disableImageDrag:Ki,enableImageDrag:In,preventOutline:ui,restoreOutline:rr,getSizedParentNode:Do,getScale:hi};function Mt(n,l,f,w){if(l&&typeof l=="object")for(var A in l)_a(n,A,l[A],f);else{l=k(l);for(var $=0,de=l.length;$<de;$++)_a(n,l[$],f,w)}return this}var Nn="_leaflet_events";function Qt(n,l,f,w){if(arguments.length===1)Ji(n),delete n[Nn];else if(l&&typeof l=="object")for(var A in l)Ka(n,A,l[A],f);else if(l=k(l),arguments.length===2)Ji(n,function(Ce){return U(l,Ce)!==-1});else for(var $=0,de=l.length;$<de;$++)Ka(n,l[$],f,w);return this}function Ji(n,l){for(var f in n[Nn]){var w=f.split(/\d/)[0];(!l||l(w))&&Ka(n,w,null,null,f)}}var fi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _a(n,l,f,w){var A=l+u(f)+(w?"_"+u(w):"");if(n[Nn]&&n[Nn][A])return this;var $=function(Ce){return f.call(w||n,Ce||window.event)},de=$;!Je.touchNative&&Je.pointer&&l.indexOf("touch")===0?$=Ve(n,l,$):Je.touch&&l==="dblclick"?$=gt(n,$):"addEventListener"in n?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?n.addEventListener(fi[l]||l,$,Je.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?($=function(Ce){Ce=Ce||window.event,Sa(n,Ce)&&de(Ce)},n.addEventListener(fi[l],$,!1)):n.addEventListener(l,de,!1):n.attachEvent("on"+l,$),n[Nn]=n[Nn]||{},n[Nn][A]=$}function Ka(n,l,f,w,A){A=A||l+u(f)+(w?"_"+u(w):"");var $=n[Nn]&&n[Nn][A];if(!$)return this;!Je.touchNative&&Je.pointer&&l.indexOf("touch")===0?rt(n,l,$):Je.touch&&l==="dblclick"?Cs(n,$):"removeEventListener"in n?n.removeEventListener(fi[l]||l,$,!1):n.detachEvent("on"+l,$),n[Nn][A]=null}function oa(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Xi(n){return _a(n,"wheel",oa),this}function Ja(n){return Mt(n,"mousedown touchstart dblclick contextmenu",oa),n._leaflet_disable_click=!0,this}function Hs(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function nn(n){return Hs(n),oa(n),this}function la(n){if(n.composedPath)return n.composedPath();for(var l=[],f=n.target;f;)l.push(f),f=f.parentNode;return l}function Fo(n,l){if(!l)return new ie(n.clientX,n.clientY);var f=hi(l),w=f.boundingClientRect;return new ie((n.clientX-w.left)/f.x-l.clientLeft,(n.clientY-w.top)/f.y-l.clientTop)}var Xa=Je.linux&&Je.chrome?window.devicePixelRatio:Je.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mi(n){return Je.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Xa:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Sa(n,l){var f=l.relatedTarget;if(!f)return!0;try{for(;f&&f!==n;)f=f.parentNode}catch{return!1}return f!==n}var zo={__proto__:null,on:Mt,off:Qt,stopPropagation:oa,disableScrollPropagation:Xi,disableClickPropagation:Ja,preventDefault:Hs,stop:nn,getPropagationPath:la,getMousePosition:Fo,getWheelDelta:mi,isExternalTarget:Sa,addListener:Mt,removeListener:Qt},Qi=oe.extend({run:function(n,l,f,w){this.stop(),this._el=n,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=Hn(n),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=I(this._animate,this),this._step()},_step:function(n){var l=+new Date-this._startTime,f=this._duration*1e3;l<f?this._runFrame(this._easeOut(l/f),n):(this._runFrame(1),this._complete())},_runFrame:function(n,l){var f=this._startPos.add(this._offset.multiplyBy(n));l&&f._round(),Rs(this._el,f),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Zt=oe.extend({options:{crs:De,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,l){l=j(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(se(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tr&&Je.any3d&&!Je.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,Vr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,l,f){if(l=l===void 0?this._zoom:this._limitZoom(l),n=this._limitCenter(se(n),l,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=i({animate:f.animate},f.zoom),f.pan=i({animate:f.animate,duration:f.duration},f.pan));var w=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,l,f.zoom):this._tryAnimatedPan(n,f.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(n,l,f.pan&&f.pan.noMoveStart),this},setZoom:function(n,l){return this._loaded?this.setView(this.getCenter(),n,{zoom:l}):(this._zoom=n,this)},zoomIn:function(n,l){return n=n||(Je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,l)},zoomOut:function(n,l){return n=n||(Je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,l)},setZoomAround:function(n,l,f){var w=this.getZoomScale(l),A=this.getSize().divideBy(2),$=n instanceof ie?n:this.latLngToContainerPoint(n),de=$.subtract(A).multiplyBy(1-1/w),Ce=this.containerPointToLatLng(A.add(de));return this.setView(Ce,l,{zoom:f})},_getBoundsCenterZoom:function(n,l){l=l||{},n=n.getBounds?n.getBounds():D(n);var f=J(l.paddingTopLeft||l.padding||[0,0]),w=J(l.paddingBottomRight||l.padding||[0,0]),A=this.getBoundsZoom(n,!1,f.add(w));if(A=typeof l.maxZoom=="number"?Math.min(l.maxZoom,A):A,A===1/0)return{center:n.getCenter(),zoom:A};var $=w.subtract(f).divideBy(2),de=this.project(n.getSouthWest(),A),Ce=this.project(n.getNorthEast(),A),Ae=this.unproject(de.add(Ce).divideBy(2).add($),A);return{center:Ae,zoom:A}},fitBounds:function(n,l){if(n=D(n),!n.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(n,l);return this.setView(f.center,f.zoom,l)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,l){return this.setView(n,this._zoom,{pan:l})},panBy:function(n,l){if(n=J(n).round(),l=l||{},!n.x&&!n.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){St(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,f,l.duration||.25,l.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,l,f){if(f=f||{},f.animate===!1||!Je.any3d)return this.setView(n,l,f);this._stop();var w=this.project(this.getCenter()),A=this.project(n),$=this.getSize(),de=this._zoom;n=se(n),l=l===void 0?de:l;var Ce=Math.max($.x,$.y),Ae=Ce*this.getZoomScale(de,l),He=A.distanceTo(w)||1,tt=1.42,vt=tt*tt;function Vt(xs){var zr=xs?-1:1,Rd=xs?Ae:Ce,Md=Ae*Ae-Ce*Ce+zr*vt*vt*He*He,fc=2*Rd*vt*He,Jo=Md/fc,Ml=Math.sqrt(Jo*Jo+1)-Jo,mc=Ml<1e-9?-18:Math.log(Ml);return mc}function Fr(xs){return(Math.exp(xs)-Math.exp(-xs))/2}function ar(xs){return(Math.exp(xs)+Math.exp(-xs))/2}function Cn(xs){return Fr(xs)/ar(xs)}var Kr=Vt(0);function Si(xs){return Ce*(ar(Kr)/ar(Kr+tt*xs))}function Ed(xs){return Ce*(ar(Kr)*Cn(Kr+tt*xs)-Fr(Kr))/vt}function Oa(xs){return 1-Math.pow(1-xs,1.5)}var Dn=Date.now(),Kn=(Vt(1)-Kr)/tt,Id=f.duration?1e3*f.duration:1e3*Kn*.8;function Rl(){var xs=(Date.now()-Dn)/Id,zr=Oa(xs)*Kn;xs<=1?(this._flyToFrame=I(Rl,this),this._move(this.unproject(w.add(A.subtract(w).multiplyBy(Ed(zr)/He)),de),this.getScaleZoom(Ce/Si(zr),de),{flyTo:!0})):this._move(n,l)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Rl.call(this),this},flyToBounds:function(n,l){var f=this._getBoundsCenterZoom(n,l);return this.flyTo(f.center,f.zoom,l)},setMaxBounds:function(n){return n=D(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var l=this.options.minZoom;return this.options.minZoom=n,this._loaded&&l!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var l=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&l!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,l){this._enforcingBounds=!0;var f=this.getCenter(),w=this._limitCenter(f,this._zoom,D(n));return f.equals(w)||this.panTo(w,l),this._enforcingBounds=!1,this},panInside:function(n,l){l=l||{};var f=J(l.paddingTopLeft||l.padding||[0,0]),w=J(l.paddingBottomRight||l.padding||[0,0]),A=this.project(this.getCenter()),$=this.project(n),de=this.getPixelBounds(),Ce=R([de.min.add(f),de.max.subtract(w)]),Ae=Ce.getSize();if(!Ce.contains($)){this._enforcingBounds=!0;var He=$.subtract(Ce.getCenter()),tt=Ce.extend($).getSize().subtract(Ae);A.x+=He.x<0?-tt.x:tt.x,A.y+=He.y<0?-tt.y:tt.y,this.panTo(this.unproject(A),l),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=i({animate:!1,pan:!0},n===!0?{animate:!0}:n);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),w=l.divideBy(2).round(),A=f.divideBy(2).round(),$=w.subtract(A);return!$.x&&!$.y?this:(n.animate&&n.pan?this.panBy($):(n.pan&&this._rawPanBy($),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=i({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),f=c(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,f,n):navigator.geolocation.getCurrentPosition(l,f,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var l=n.code,f=n.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var l=n.coords.latitude,f=n.coords.longitude,w=new W(l,f),A=w.toBounds(n.coords.accuracy*2),$=this._locateOptions;if($.setView){var de=this.getBoundsZoom(A);this.setView(w,$.maxZoom?Math.min(de,$.maxZoom):de)}var Ce={latlng:w,bounds:A,timestamp:n.timestamp};for(var Ae in n.coords)typeof n.coords[Ae]=="number"&&(Ce[Ae]=n.coords[Ae]);this.fire("locationfound",Ce)}},addHandler:function(n,l){if(!l)return this;var f=this[n]=new l(this);return this._handlers.push(f),this.options[n]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Lt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,l){var f="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),w=mt("div",f,l||this._mapPane);return n&&(this._panes[n]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),l=this.unproject(n.getBottomLeft()),f=this.unproject(n.getTopRight());return new E(l,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,l,f){n=D(n),f=J(f||[0,0]);var w=this.getZoom()||0,A=this.getMinZoom(),$=this.getMaxZoom(),de=n.getNorthWest(),Ce=n.getSouthEast(),Ae=this.getSize().subtract(f),He=R(this.project(Ce,w),this.project(de,w)).getSize(),tt=Je.any3d?this.options.zoomSnap:1,vt=Ae.x/He.x,Vt=Ae.y/He.y,Fr=l?Math.max(vt,Vt):Math.min(vt,Vt);return w=this.getScaleZoom(Fr,w),tt&&(w=Math.round(w/(tt/100))*(tt/100),w=l?Math.ceil(w/tt)*tt:Math.floor(w/tt)*tt),Math.max(A,Math.min($,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,l){var f=this._getTopLeftPoint(n,l);return new fe(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,l){var f=this.options.crs;return l=l===void 0?this._zoom:l,f.scale(n)/f.scale(l)},getScaleZoom:function(n,l){var f=this.options.crs;l=l===void 0?this._zoom:l;var w=f.zoom(n*f.scale(l));return isNaN(w)?1/0:w},project:function(n,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(se(n),l)},unproject:function(n,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(n),l)},layerPointToLatLng:function(n){var l=J(n).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(n){var l=this.project(se(n))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(se(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(D(n))},distance:function(n,l){return this.options.crs.distance(se(n),se(l))},containerPointToLayerPoint:function(n){return J(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return J(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var l=this.containerPointToLayerPoint(J(n));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(n)))},mouseEventToContainerPoint:function(n){return Fo(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var l=this._container=Ht(n);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mt(l,"scroll",this._onScroll,this),this._containerId=u(l)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&Je.any3d,St(n,"leaflet-container"+(Je.touch?" leaflet-touch":"")+(Je.retina?" leaflet-retina":"")+(Je.ielt9?" leaflet-oldie":"")+(Je.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=$t(n,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Rs(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(St(n.markerPane,"leaflet-zoom-hide"),St(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,l,f){Rs(this._mapPane,new ie(0,0));var w=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var A=this._zoom!==l;this._moveStart(A,f)._move(n,l)._moveEnd(A),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(n,l){return n&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(n,l,f,w){l===void 0&&(l=this._zoom);var A=this._zoom!==l;return this._zoom=l,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),w?f&&f.pinch&&this.fire("zoom",f):((A||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Rs(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[u(this._container)]=this;var l=n?Qt:Mt;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Je.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=I(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,l){for(var f=[],w,A=l==="mouseout"||l==="mouseover",$=n.target||n.srcElement,de=!1;$;){if(w=this._targets[u($)],w&&(l==="click"||l==="preclick")&&this._draggableMoved(w)){de=!0;break}if(w&&w.listens(l,!0)&&(A&&!Sa($,n)||(f.push(w),A))||$===this._container)break;$=$.parentNode}return!f.length&&!de&&!A&&this.listens(l,!0)&&(f=[this]),f},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var l=n.target||n.srcElement;if(!(!this._loaded||l._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(l))){var f=n.type;f==="mousedown"&&ui(l),this._fireDOMEvent(n,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,l,f){if(n.type==="click"){var w=i({},n);w.type="preclick",this._fireDOMEvent(w,w.type,f)}var A=this._findEventTargets(n,l);if(f){for(var $=[],de=0;de<f.length;de++)f[de].listens(l,!0)&&$.push(f[de]);A=$.concat(A)}if(A.length){l==="contextmenu"&&Hs(n);var Ce=A[0],Ae={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var He=Ce.getLatLng&&(!Ce._radius||Ce._radius<=10);Ae.containerPoint=He?this.latLngToContainerPoint(Ce.getLatLng()):this.mouseEventToContainerPoint(n),Ae.layerPoint=this.containerPointToLayerPoint(Ae.containerPoint),Ae.latlng=He?Ce.getLatLng():this.layerPointToLatLng(Ae.layerPoint)}for(de=0;de<A.length;de++)if(A[de].fire(l,Ae,!0),Ae.originalEvent._stopped||A[de].options.bubblingMouseEvents===!1&&U(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,l=this._handlers.length;n<l;n++)this._handlers[n].disable()},whenReady:function(n,l){return this._loaded?n.call(l||this,{target:this}):this.on("load",n,l),this},_getMapPanePos:function(){return Hn(this._mapPane)||new ie(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,l){var f=n&&l!==void 0?this._getNewPixelOrigin(n,l):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,l){var f=this.getSize()._divideBy(2);return this.project(n,l)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,l,f){var w=this._getNewPixelOrigin(f,l);return this.project(n,l)._subtract(w)},_latLngBoundsToNewLayerBounds:function(n,l,f){var w=this._getNewPixelOrigin(f,l);return R([this.project(n.getSouthWest(),l)._subtract(w),this.project(n.getNorthWest(),l)._subtract(w),this.project(n.getSouthEast(),l)._subtract(w),this.project(n.getNorthEast(),l)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,l,f){if(!f)return n;var w=this.project(n,l),A=this.getSize().divideBy(2),$=new fe(w.subtract(A),w.add(A)),de=this._getBoundsOffset($,f,l);return Math.abs(de.x)<=1&&Math.abs(de.y)<=1?n:this.unproject(w.add(de),l)},_limitOffset:function(n,l){if(!l)return n;var f=this.getPixelBounds(),w=new fe(f.min.add(n),f.max.add(n));return n.add(this._getBoundsOffset(w,l))},_getBoundsOffset:function(n,l,f){var w=R(this.project(l.getNorthEast(),f),this.project(l.getSouthWest(),f)),A=w.min.subtract(n.min),$=w.max.subtract(n.max),de=this._rebound(A.x,-$.x),Ce=this._rebound(A.y,-$.y);return new ie(de,Ce)},_rebound:function(n,l){return n+l>0?Math.round(n-l)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(l))},_limitZoom:function(n){var l=this.getMinZoom(),f=this.getMaxZoom(),w=Je.any3d?this.options.zoomSnap:1;return w&&(n=Math.round(n/w)*w),Math.max(l,Math.min(f,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Jt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,l){var f=this._getCenterOffset(n)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,l),!0)},_createAnimProxy:function(){var n=this._proxy=mt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(l){var f=os,w=this._proxy.style[f];wn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),w===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),l=this.getZoom();wn(this._proxy,this.project(n,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,l,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(l),A=this._getCenterOffset(n)._divideBy(1-1/w);return f.animate!==!0&&!this.getSize().contains(A)?!1:(I(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(n,l,!0)},this),!0)},_animateZoom:function(n,l,f,w){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=l,St(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:l,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Jt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Bo(n,l){return new Zt(n,l)}var Gs=Y.extend({options:{position:"topright"},initialize:function(n){j(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var l=this._map;return l&&l.removeControl(this),this.options.position=n,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var l=this._container=this.onAdd(n),f=this.getPosition(),w=n._controlCorners[f];return St(l,"leaflet-control"),f.indexOf("bottom")!==-1?w.insertBefore(l,w.firstChild):w.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),an=function(n){return new Gs(n)};Zt.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},l="leaflet-",f=this._controlContainer=mt("div",l+"control-container",this._container);function w(A,$){var de=l+A+" "+l+$;n[A+$]=mt("div",de,f)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Lt(this._controlCorners[n]);Lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var qo=Gs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,l,f,w){return f<w?-1:w<f?1:0}},initialize:function(n,l,f){j(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in n)this._addLayer(n[w],w);for(w in l)this._addLayer(l[w],w,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Gs.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,l){return this._addLayer(n,l),this._map?this._update():this},addOverlay:function(n,l){return this._addLayer(n,l,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var l=this._getLayer(u(n));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){St(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(St(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Jt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Jt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",l=this._container=mt("div",n),f=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ja(l),Xi(l);var w=this._section=mt("section",n+"-list");f&&(this._map.on("click",this.collapse,this),Mt(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=mt("a",n+"-toggle",l);A.href="#",A.title="Layers",A.setAttribute("role","button"),Mt(A,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){Hs($),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=mt("div",n+"-base",w),this._separator=mt("div",n+"-separator",w),this._overlaysList=mt("div",n+"-overlays",w),l.appendChild(w)},_getLayer:function(n){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&u(this._layers[l].layer)===n)return this._layers[l]},_addLayer:function(n,l,f){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:l,overlay:f}),this.options.sortLayers&&this._layers.sort(c(function(w,A){return this.options.sortFunction(w.layer,A.layer,w.name,A.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;vr(this._baseLayersList),vr(this._overlaysList),this._layerControlInputs=[];var n,l,f,w,A=0;for(f=0;f<this._layers.length;f++)w=this._layers[f],this._addItem(w),l=l||w.overlay,n=n||!w.overlay,A+=w.overlay?0:1;return this.options.hideSingleBase&&(n=n&&A>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=l&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var l=this._getLayer(u(n.target)),f=l.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;f&&this._map.fire(f,l)},_createRadioElement:function(n,l){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(l?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=f,w.firstChild},_addItem:function(n){var l=document.createElement("label"),f=this._map.hasLayer(n.layer),w;n.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=f):w=this._createRadioElement("leaflet-base-layers_"+u(this),f),this._layerControlInputs.push(w),w.layerId=u(n.layer),Mt(w,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+n.name;var $=document.createElement("span");l.appendChild($),$.appendChild(w),$.appendChild(A);var de=n.overlay?this._overlaysList:this._baseLayersList;return de.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,l,f,w=[],A=[];this._handlingClick=!0;for(var $=n.length-1;$>=0;$--)l=n[$],f=this._getLayer(l.layerId).layer,l.checked?w.push(f):l.checked||A.push(f);for($=0;$<A.length;$++)this._map.hasLayer(A[$])&&this._map.removeLayer(A[$]);for($=0;$<w.length;$++)this._map.hasLayer(w[$])||this._map.addLayer(w[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,l,f,w=this._map.getZoom(),A=n.length-1;A>=0;A--)l=n[A],f=this._getLayer(l.layerId).layer,l.disabled=f.options.minZoom!==void 0&&w<f.options.minZoom||f.options.maxZoom!==void 0&&w>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Mt(n,"click",Hs),this.expand();var l=this;setTimeout(function(){Qt(n,"click",Hs),l._preventClick=!1})}}),ka=function(n,l,f){return new qo(n,l,f)},on=Gs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var l="leaflet-control-zoom",f=mt("div",l+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,l+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,l+"-out",f,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,l,f,w,A){var $=mt("a",f,w);return $.innerHTML=n,$.href="#",$.title=l,$.setAttribute("role","button"),$.setAttribute("aria-label",l),Ja($),Mt($,"click",nn),Mt($,"click",A,this),Mt($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var n=this._map,l="leaflet-disabled";Jt(this._zoomInButton,l),Jt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(St(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(St(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Zt.mergeOptions({zoomControl:!0}),Zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new on,this.addControl(this.zoomControl))});var eo=function(n){return new on(n)},Ca=Gs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var l="leaflet-control-scale",f=mt("div",l),w=this.options;return this._addScales(w,l+"-line",f),n.on(w.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),f},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,l,f){n.metric&&(this._mScale=mt("div",l,f)),n.imperial&&(this._iScale=mt("div",l,f))},_update:function(){var n=this._map,l=n.getSize().y/2,f=n.distance(n.containerPointToLatLng([0,l]),n.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(f)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var l=this._getRoundNum(n),f=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,f,l/n)},_updateImperial:function(n){var l=n*3.2808399,f,w,A;l>5280?(f=l/5280,w=this._getRoundNum(f),this._updateScale(this._iScale,w+" mi",w/f)):(A=this._getRoundNum(l),this._updateScale(this._iScale,A+" ft",A/l))},_updateScale:function(n,l,f){n.style.width=Math.round(this.options.maxWidth*f)+"px",n.innerHTML=l},_getRoundNum:function(n){var l=Math.pow(10,(Math.floor(n)+"").length-1),f=n/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,l*f}}),Tl=function(n){return new Ca(n)},pi='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',to=Gs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Je.inlineSvg?pi+" ":"")+"Leaflet</a>"},initialize:function(n){j(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=mt("div","leaflet-control-attribution"),Ja(this._container);for(var l in n._layers)n._layers[l].getAttribution&&this.addAttribution(n._layers[l].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var l in this._attributions)this._attributions[l]&&n.push(l);var f=[];this.options.prefix&&f.push(this.options.prefix),n.length&&f.push(n.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Zt.mergeOptions({attributionControl:!0}),Zt.addInitHook(function(){this.options.attributionControl&&new to().addTo(this)});var so=function(n){return new to(n)};Gs.Layers=qo,Gs.Zoom=on,Gs.Scale=Ca,Gs.Attribution=to,an.layers=ka,an.zoom=eo,an.scale=Tl,an.attribution=so;var Zr=Y.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zr.addTo=function(n,l){return n.addHandler(l,this),this};var $o={Events:pe},Qa=Je.touch?"touchstart mousedown":"mousedown",jn=oe.extend({options:{clickTolerance:3},initialize:function(n,l,f,w){j(this,w),this._element=n,this._dragStartTarget=l||n,this._preventOutline=f},enable:function(){this._enabled||(Mt(this._dragStartTarget,Qa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(jn._dragging===this&&this.finishDrag(!0),Qt(this._dragStartTarget,Qa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!Un(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){jn._dragging===this&&this.finishDrag();return}if(!(jn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(jn._dragging=this,this._preventOutline&&ui(this._element),Ki(),Ga(),!this._moving)){this.fire("down");var l=n.touches?n.touches[0]:n,f=Do(this._element);this._startPoint=new ie(l.clientX,l.clientY),this._startPos=Hn(this._element),this._parentScale=hi(f);var w=n.type==="mousedown";Mt(document,w?"mousemove":"touchmove",this._onMove,this),Mt(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var l=n.touches&&n.touches.length===1?n.touches[0]:n,f=new ie(l.clientX,l.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Hs(n),this._moved||(this.fire("dragstart"),this._moved=!0,St(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),St(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Rs(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Jt(document.body,"leaflet-dragging"),this._lastTarget&&(Jt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qt(document,"mousemove touchmove",this._onMove,this),Qt(document,"mouseup touchend touchcancel",this._onUp,this),In(),aa();var l=this._moved&&this._moving;this._moving=!1,jn._dragging=!1,l&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function gi(n,l,f){var w,A=[1,4,2,8],$,de,Ce,Ae,He,tt,vt,Vt;for($=0,tt=n.length;$<tt;$++)n[$]._code=Ee(n[$],l);for(Ce=0;Ce<4;Ce++){for(vt=A[Ce],w=[],$=0,tt=n.length,de=tt-1;$<tt;de=$++)Ae=n[$],He=n[de],Ae._code&vt?He._code&vt||(Vt=ke(He,Ae,vt,l,f),Vt._code=Ee(Vt,l),w.push(Vt)):(He._code&vt&&(Vt=ke(He,Ae,vt,l,f),Vt._code=Ee(Vt,l),w.push(Vt)),w.push(Ae));n=w}return n}function ro(n,l){var f,w,A,$,de,Ce,Ae,He,tt;if(!n||n.length===0)throw new Error("latlngs not passed");it(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var vt=se([0,0]),Vt=D(n),Fr=Vt.getNorthWest().distanceTo(Vt.getSouthWest())*Vt.getNorthEast().distanceTo(Vt.getNorthWest());Fr<1700&&(vt=no(n));var ar=n.length,Cn=[];for(f=0;f<ar;f++){var Kr=se(n[f]);Cn.push(l.project(se([Kr.lat-vt.lat,Kr.lng-vt.lng])))}for(Ce=Ae=He=0,f=0,w=ar-1;f<ar;w=f++)A=Cn[f],$=Cn[w],de=A.y*$.x-$.y*A.x,Ae+=(A.x+$.x)*de,He+=(A.y+$.y)*de,Ce+=de*3;Ce===0?tt=Cn[0]:tt=[Ae/Ce,He/Ce];var Si=l.unproject(J(tt));return se([Si.lat+vt.lat,Si.lng+vt.lng])}function no(n){for(var l=0,f=0,w=0,A=0;A<n.length;A++){var $=se(n[A]);l+=$.lat,f+=$.lng,w++}return se([l/w,f/w])}var xi={__proto__:null,clipPolygon:gi,polygonCenter:ro,centroid:no};function Pa(n,l){if(!l||!n.length)return n.slice();var f=l*l;return n=O(n,f),n=ao(n,f),n}function vi(n,l,f){return Math.sqrt(Qe(n,l,f,!0))}function La(n,l,f){return Qe(n,l,f)}function ao(n,l){var f=n.length,w=typeof Uint8Array<"u"?Uint8Array:Array,A=new w(f);A[0]=A[f-1]=1,y(n,A,l,0,f-1);var $,de=[];for($=0;$<f;$++)A[$]&&de.push(n[$]);return de}function y(n,l,f,w,A){var $=0,de,Ce,Ae;for(Ce=w+1;Ce<=A-1;Ce++)Ae=Qe(n[Ce],n[w],n[A],!0),Ae>$&&(de=Ce,$=Ae);$>f&&(l[de]=1,y(n,l,f,w,de),y(n,l,f,de,A))}function O(n,l){for(var f=[n[0]],w=1,A=0,$=n.length;w<$;w++)Ze(n[w],n[A])>l&&(f.push(n[w]),A=w);return A<$-1&&f.push(n[$-1]),f}var re;function me(n,l,f,w,A){var $=w?re:Ee(n,f),de=Ee(l,f),Ce,Ae,He;for(re=de;;){if(!($|de))return[n,l];if($&de)return!1;Ce=$||de,Ae=ke(n,l,Ce,f,A),He=Ee(Ae,f),Ce===$?(n=Ae,$=He):(l=Ae,de=He)}}function ke(n,l,f,w,A){var $=l.x-n.x,de=l.y-n.y,Ce=w.min,Ae=w.max,He,tt;return f&8?(He=n.x+$*(Ae.y-n.y)/de,tt=Ae.y):f&4?(He=n.x+$*(Ce.y-n.y)/de,tt=Ce.y):f&2?(He=Ae.x,tt=n.y+de*(Ae.x-n.x)/$):f&1&&(He=Ce.x,tt=n.y+de*(Ce.x-n.x)/$),new ie(He,tt,A)}function Ee(n,l){var f=0;return n.x<l.min.x?f|=1:n.x>l.max.x&&(f|=2),n.y<l.min.y?f|=4:n.y>l.max.y&&(f|=8),f}function Ze(n,l){var f=l.x-n.x,w=l.y-n.y;return f*f+w*w}function Qe(n,l,f,w){var A=l.x,$=l.y,de=f.x-A,Ce=f.y-$,Ae=de*de+Ce*Ce,He;return Ae>0&&(He=((n.x-A)*de+(n.y-$)*Ce)/Ae,He>1?(A=f.x,$=f.y):He>0&&(A+=de*He,$+=Ce*He)),de=n.x-A,Ce=n.y-$,w?de*de+Ce*Ce:new ie(A,$)}function it(n){return!B(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Ot(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),it(n)}function Rt(n,l){var f,w,A,$,de,Ce,Ae,He;if(!n||n.length===0)throw new Error("latlngs not passed");it(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var tt=se([0,0]),vt=D(n),Vt=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Vt<1700&&(tt=no(n));var Fr=n.length,ar=[];for(f=0;f<Fr;f++){var Cn=se(n[f]);ar.push(l.project(se([Cn.lat-tt.lat,Cn.lng-tt.lng])))}for(f=0,w=0;f<Fr-1;f++)w+=ar[f].distanceTo(ar[f+1])/2;if(w===0)He=ar[0];else for(f=0,$=0;f<Fr-1;f++)if(de=ar[f],Ce=ar[f+1],A=de.distanceTo(Ce),$+=A,$>w){Ae=($-w)/A,He=[Ce.x-Ae*(Ce.x-de.x),Ce.y-Ae*(Ce.y-de.y)];break}var Kr=l.unproject(J(He));return se([Kr.lat+tt.lat,Kr.lng+tt.lng])}var ss={__proto__:null,simplify:Pa,pointToSegmentDistance:vi,closestPointOnSegment:La,clipSegment:me,_getEdgeIntersection:ke,_getBitCode:Ee,_sqClosestPointOnSegment:Qe,isFlat:it,_flat:Ot,polylineCenter:Rt},Ps={project:function(n){return new ie(n.lng,n.lat)},unproject:function(n){return new W(n.y,n.x)},bounds:new fe([-180,-90],[180,90])},Ms={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var l=Math.PI/180,f=this.R,w=n.lat*l,A=this.R_MINOR/f,$=Math.sqrt(1-A*A),de=$*Math.sin(w),Ce=Math.tan(Math.PI/4-w/2)/Math.pow((1-de)/(1+de),$/2);return w=-f*Math.log(Math.max(Ce,1e-10)),new ie(n.lng*l*f,w)},unproject:function(n){for(var l=180/Math.PI,f=this.R,w=this.R_MINOR/f,A=Math.sqrt(1-w*w),$=Math.exp(-n.y/f),de=Math.PI/2-2*Math.atan($),Ce=0,Ae=.1,He;Ce<15&&Math.abs(Ae)>1e-7;Ce++)He=A*Math.sin(de),He=Math.pow((1-He)/(1+He),A/2),Ae=Math.PI/2-2*Math.atan($*He)-de,de+=Ae;return new W(de*l,n.x*l/f)}},Ys={__proto__:null,LonLat:Ps,Mercator:Ms,SphericalMercator:xe},Pr=i({},le,{code:"EPSG:3395",projection:Ms,transformation:function(){var n=.5/(Math.PI*Ms.R);return Me(n,.5,-n,.5)}()}),nr=i({},le,{code:"EPSG:4326",projection:Ps,transformation:Me(1/180,1,-1/180,.5)}),Rn=i({},X,{projection:Ps,transformation:Me(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,l){var f=l.lng-n.lng,w=l.lat-n.lat;return Math.sqrt(f*f+w*w)},infinite:!0});X.Earth=le,X.EPSG3395=Pr,X.EPSG3857=De,X.EPSG900913=Ye,X.EPSG4326=nr,X.Simple=Rn;var Ds=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[u(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[u(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var l=n.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var f=this.getEvents();l.on(f,this),this.once("remove",function(){l.off(f,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Zt.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var l=u(n);return this._layers[l]?this:(this._layers[l]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var l=u(n);return this._layers[l]?(this._loaded&&n.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return u(n)in this._layers},eachLayer:function(n,l){for(var f in this._layers)n.call(l,this._layers[f]);return this},_addLayers:function(n){n=n?B(n)?n:[n]:[];for(var l=0,f=n.length;l<f;l++)this.addLayer(n[l])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[u(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var l=u(n);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,l=-1/0,f=this._getZoomSpan();for(var w in this._zoomBoundLayers){var A=this._zoomBoundLayers[w].options;n=A.minZoom===void 0?n:Math.min(n,A.minZoom),l=A.maxZoom===void 0?l:Math.max(l,A.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=n===1/0?void 0:n,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Or=Ds.extend({initialize:function(n,l){j(this,l),this._layers={};var f,w;if(n)for(f=0,w=n.length;f<w;f++)this.addLayer(n[f])},addLayer:function(n){var l=this.getLayerId(n);return this._layers[l]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var l=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(n){var l=typeof n=="number"?n:this.getLayerId(n);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var l=Array.prototype.slice.call(arguments,1),f,w;for(f in this._layers)w=this._layers[f],w[n]&&w[n].apply(w,l);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,l){for(var f in this._layers)n.call(l,this._layers[f]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return u(n)}}),Uo=function(n,l){return new Or(n,l)},ln=Or.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Or.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Or.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new E;for(var l in this._layers){var f=this._layers[l];n.extend(f.getBounds?f.getBounds():f.getLatLng())}return n}}),io=function(n,l){return new ln(n,l)},Mn=Y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){j(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,l){var f=this._getIconUrl(n);if(!f){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(f,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(w,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(n,l){var f=this.options,w=f[l+"Size"];typeof w=="number"&&(w=[w,w]);var A=J(w),$=J(l==="shadow"&&f.shadowAnchor||f.iconAnchor||A&&A.divideBy(2,!0));n.className="leaflet-marker-"+l+" "+(f.className||""),$&&(n.style.marginLeft=-$.x+"px",n.style.marginTop=-$.y+"px"),A&&(n.style.width=A.x+"px",n.style.height=A.y+"px")},_createImg:function(n,l){return l=l||document.createElement("img"),l.src=n,l},_getIconUrl:function(n){return Je.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function oo(n){return new Mn(n)}var ca=Mn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ca.imagePath!="string"&&(ca.imagePath=this._detectIconPath()),(this.options.imagePath||ca.imagePath)+Mn.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var l=function(f,w,A){var $=w.exec(f);return $&&$[A]};return n=l(n,/^url\((['"])?(.+)\1\)$/,2),n&&l(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=mt("div","leaflet-default-icon-path",document.body),l=$t(n,"background-image")||$t(n,"backgroundImage");if(document.body.removeChild(n),l=this._stripUrl(l),l)return l;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),ei=Zr.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new jn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),St(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Jt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var l=this._marker,f=l._map,w=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,$=Hn(l._icon),de=f.getPixelBounds(),Ce=f.getPixelOrigin(),Ae=R(de.min._subtract(Ce).add(A),de.max._subtract(Ce).subtract(A));if(!Ae.contains($)){var He=J((Math.max(Ae.max.x,$.x)-Ae.max.x)/(de.max.x-Ae.max.x)-(Math.min(Ae.min.x,$.x)-Ae.min.x)/(de.min.x-Ae.min.x),(Math.max(Ae.max.y,$.y)-Ae.max.y)/(de.max.y-Ae.max.y)-(Math.min(Ae.min.y,$.y)-Ae.min.y)/(de.min.y-Ae.min.y)).multiplyBy(w);f.panBy(He,{animate:!1}),this._draggable._newPos._add(He),this._draggable._startPos._add(He),Rs(l._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=I(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=I(this._adjustPan.bind(this,n)))},_onDrag:function(n){var l=this._marker,f=l._shadow,w=Hn(l._icon),A=l._map.layerPointToLatLng(w);f&&Rs(f,w),l._latlng=A,n.latlng=A,n.oldLatLng=this._oldLatLng,l.fire("move",n).fire("drag",n)},_onDragEnd:function(n){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Ks=Ds.extend({options:{icon:new ca,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,l){j(this,l),this._latlng=se(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var l=this._latlng;return this._latlng=se(n),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=n.icon.createIcon(this._icon),w=!1;f!==this._icon&&(this._icon&&this._removeIcon(),w=!0,n.title&&(f.title=n.title),f.tagName==="IMG"&&(f.alt=n.alt||"")),St(f,l),n.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(f,"focus",this._panOnFocus,this);var A=n.icon.createShadow(this._shadow),$=!1;A!==this._shadow&&(this._removeShadow(),$=!0),A&&(St(A,l),A.alt=""),this._shadow=A,n.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&$&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(this._icon,"focus",this._panOnFocus,this),Lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Lt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Rs(this._icon,n),this._shadow&&Rs(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(St(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&ur(this._icon,n),this._shadow&&ur(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var l=this.options.icon.options,f=l.iconSize?J(l.iconSize):J(0,0),w=l.iconAnchor?J(l.iconAnchor):J(0,0);n.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:f.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yi(n,l){return new Ks(n,l)}var cn=Ds.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return j(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),da=cn.extend({options:{fill:!0,radius:10},initialize:function(n,l){j(this,l),this._latlng=se(n),this._radius=this.options.radius},setLatLng:function(n){var l=this._latlng;return this._latlng=se(n),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var l=n&&n.radius||this._radius;return cn.prototype.setStyle.call(this,n),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,l=this._radiusY||n,f=this._clickTolerance(),w=[n+f,l+f];this._pxBounds=new fe(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lo(n,l){return new da(n,l)}var Lr=da.extend({initialize:function(n,l,f){if(typeof l=="number"&&(l=i({},f,{radius:l})),j(this,l),this._latlng=se(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new E(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:cn.prototype.setStyle,_project:function(){var n=this._latlng.lng,l=this._latlng.lat,f=this._map,w=f.options.crs;if(w.distance===le.distance){var A=Math.PI/180,$=this._mRadius/le.R/A,de=f.project([l+$,n]),Ce=f.project([l-$,n]),Ae=de.add(Ce).divideBy(2),He=f.unproject(Ae).lat,tt=Math.acos((Math.cos($*A)-Math.sin(l*A)*Math.sin(He*A))/(Math.cos(l*A)*Math.cos(He*A)))/A;(isNaN(tt)||tt===0)&&(tt=$/Math.cos(Math.PI/180*l)),this._point=Ae.subtract(f.getPixelOrigin()),this._radius=isNaN(tt)?0:Ae.x-f.project([He,n-tt]).x,this._radiusY=Ae.y-de.y}else{var vt=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(vt).x}this._updateBounds()}});function El(n,l,f){return new Lr(n,l,f)}var dn=cn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,l){j(this,l),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var l=1/0,f=null,w=Qe,A,$,de=0,Ce=this._parts.length;de<Ce;de++)for(var Ae=this._parts[de],He=1,tt=Ae.length;He<tt;He++){A=Ae[He-1],$=Ae[He];var vt=w(n,A,$,!0);vt<l&&(l=vt,f=w(n,A,$))}return f&&(f.distance=Math.sqrt(l)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,l){return l=l||this._defaultShape(),n=se(n),l.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new E,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return it(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var l=[],f=it(n),w=0,A=n.length;w<A;w++)f?(l[w]=se(n[w]),this._bounds.extend(l[w])):l[w]=this._convertLatLngs(n[w]);return l},_project:function(){var n=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),l=new ie(n,n);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(n,l,f){var w=n[0]instanceof W,A=n.length,$,de;if(w){for(de=[],$=0;$<A;$++)de[$]=this._map.latLngToLayerPoint(n[$]),f.extend(de[$]);l.push(de)}else for($=0;$<A;$++)this._projectLatlngs(n[$],l,f)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,f,w,A,$,de,Ce,Ae;for(f=0,A=0,$=this._rings.length;f<$;f++)for(Ae=this._rings[f],w=0,de=Ae.length;w<de-1;w++)Ce=me(Ae[w],Ae[w+1],n,w,!0),Ce&&(l[A]=l[A]||[],l[A].push(Ce[0]),(Ce[1]!==Ae[w+1]||w===de-2)&&(l[A].push(Ce[1]),A++))}},_simplifyPoints:function(){for(var n=this._parts,l=this.options.smoothFactor,f=0,w=n.length;f<w;f++)n[f]=Pa(n[f],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,l){var f,w,A,$,de,Ce,Ae=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(f=0,$=this._parts.length;f<$;f++)for(Ce=this._parts[f],w=0,de=Ce.length,A=de-1;w<de;A=w++)if(!(!l&&w===0)&&vi(n,Ce[A],Ce[w])<=Ae)return!0;return!1}});function Ho(n,l){return new dn(n,l)}dn._flat=Ot;var yr=dn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ro(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var l=dn.prototype._convertLatLngs.call(this,n),f=l.length;return f>=2&&l[0]instanceof W&&l[0].equals(l[f-1])&&l.pop(),l},_setLatLngs:function(n){dn.prototype._setLatLngs.call(this,n),it(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return it(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,l=this.options.weight,f=new ie(l,l);if(n=new fe(n.min.subtract(f),n.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,A=this._rings.length,$;w<A;w++)$=gi(this._rings[w],n,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var l=!1,f,w,A,$,de,Ce,Ae,He;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for($=0,Ae=this._parts.length;$<Ae;$++)for(f=this._parts[$],de=0,He=f.length,Ce=He-1;de<He;Ce=de++)w=f[de],A=f[Ce],w.y>n.y!=A.y>n.y&&n.x<(A.x-w.x)*(n.y-w.y)/(A.y-w.y)+w.x&&(l=!l);return l||dn.prototype._containsPoint.call(this,n,!0)}});function bi(n,l){return new yr(n,l)}var _n=ln.extend({initialize:function(n,l){j(this,l),this._layers={},n&&this.addData(n)},addData:function(n){var l=B(n)?n:n.features,f,w,A;if(l){for(f=0,w=l.length;f<w;f++)A=l[f],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var $=this.options;if($.filter&&!$.filter(n))return this;var de=ti(n,$);return de?(de.feature=Sn(n),de.defaultOptions=de.options,this.resetStyle(de),$.onEachFeature&&$.onEachFeature(n,de),this.addLayer(de)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=i({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(l){this._setLayerStyle(l,n)},this)},_setLayerStyle:function(n,l){n.setStyle&&(typeof l=="function"&&(l=l(n.feature)),n.setStyle(l))}});function ti(n,l){var f=n.type==="Feature"?n.geometry:n,w=f?f.coordinates:null,A=[],$=l&&l.pointToLayer,de=l&&l.coordsToLatLng||ha,Ce,Ae,He,tt;if(!w&&!f)return null;switch(f.type){case"Point":return Ce=de(w),ua($,n,Ce,l);case"MultiPoint":for(He=0,tt=w.length;He<tt;He++)Ce=de(w[He]),A.push(ua($,n,Ce,l));return new ln(A);case"LineString":case"MultiLineString":return Ae=br(w,f.type==="LineString"?0:1,de),new dn(Ae,l);case"Polygon":case"MultiPolygon":return Ae=br(w,f.type==="Polygon"?1:2,de),new yr(Ae,l);case"GeometryCollection":for(He=0,tt=f.geometries.length;He<tt;He++){var vt=ti({geometry:f.geometries[He],type:"Feature",properties:n.properties},l);vt&&A.push(vt)}return new ln(A);case"FeatureCollection":for(He=0,tt=f.features.length;He<tt;He++){var Vt=ti(f.features[He],l);Vt&&A.push(Vt)}return new ln(A);default:throw new Error("Invalid GeoJSON object.")}}function ua(n,l,f,w){return n?n(l,f):new Ks(f,w&&w.markersInheritOptions&&w)}function ha(n){return new W(n[1],n[0],n[2])}function br(n,l,f){for(var w=[],A=0,$=n.length,de;A<$;A++)de=l?br(n[A],l-1,f):(f||ha)(n[A]),w.push(de);return w}function wr(n,l){return n=se(n),n.alt!==void 0?[b(n.lng,l),b(n.lat,l),b(n.alt,l)]:[b(n.lng,l),b(n.lat,l)]}function On(n,l,f,w){for(var A=[],$=0,de=n.length;$<de;$++)A.push(l?On(n[$],it(n[$])?0:l-1,f,w):wr(n[$],w));return!l&&f&&A.length>0&&A.push(A[0].slice()),A}function Gr(n,l){return n.feature?i({},n.feature,{geometry:l}):Sn(l)}function Sn(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Aa={toGeoJSON:function(n){return Gr(this,{type:"Point",coordinates:wr(this.getLatLng(),n)})}};Ks.include(Aa),Lr.include(Aa),da.include(Aa),dn.include({toGeoJSON:function(n){var l=!it(this._latlngs),f=On(this._latlngs,l?1:0,!1,n);return Gr(this,{type:(l?"Multi":"")+"LineString",coordinates:f})}}),yr.include({toGeoJSON:function(n){var l=!it(this._latlngs),f=l&&!it(this._latlngs[0]),w=On(this._latlngs,f?2:l?1:0,!0,n);return l||(w=[w]),Gr(this,{type:(f?"Multi":"")+"Polygon",coordinates:w})}}),Or.include({toMultiPoint:function(n){var l=[];return this.eachLayer(function(f){l.push(f.toGeoJSON(n).geometry.coordinates)}),Gr(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(n){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(n);var f=l==="GeometryCollection",w=[];return this.eachLayer(function(A){if(A.toGeoJSON){var $=A.toGeoJSON(n);if(f)w.push($.geometry);else{var de=Sn($);de.type==="FeatureCollection"?w.push.apply(w,de.features):w.push(de)}}}),f?Gr(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function Wn(n,l){return new _n(n,l)}var Ws=Wn,Ta=Ds.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,l,f){this._url=n,this._bounds=D(l),j(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(St(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&yn(this._image),this},bringToBack:function(){return this._map&&bn(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=D(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",l=this._image=n?this._url:mt("img");if(St(l,"leaflet-image-layer"),this._zoomAnimated&&St(l,"leaflet-zoom-animated"),this.options.className&&St(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(n){var l=this._map.getZoomScale(n.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;wn(this._image,f,l)},_reset:function(){var n=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=l.getSize();Rs(n,l.min),n.style.width=f.x+"px",n.style.height=f.y+"px"},_updateOpacity:function(){ur(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Dr=function(n,l,f){return new Ta(n,l,f)},un=Ta.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",l=this._image=n?this._url:mt("video");if(St(l,"leaflet-image-layer"),this._zoomAnimated&&St(l,"leaflet-zoom-animated"),this.options.className&&St(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onloadeddata=c(this.fire,this,"load"),n){for(var f=l.getElementsByTagName("source"),w=[],A=0;A<f.length;A++)w.push(f[A].src);this._url=f.length>0?w:[l.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var de=mt("source");de.src=this._url[$],l.appendChild(de)}}});function wi(n,l,f){return new un(n,l,f)}var co=Ta.extend({_initImage:function(){var n=this._image=this._url;St(n,"leaflet-image-layer"),this._zoomAnimated&&St(n,"leaflet-zoom-animated"),this.options.className&&St(n,this.options.className),n.onselectstart=v,n.onmousemove=v}});function uo(n,l,f){return new co(n,l,f)}var Ar=Ds.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,l){n&&(n instanceof W||B(n))?(this._latlng=se(n),j(this,l)):(j(this,n),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&ur(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&ur(this._container,1),this.bringToFront(),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(ur(this._container,0),this._removeTimeout=setTimeout(c(Lt,void 0,this._container),200)):Lt(this._container),this.options.interactive&&(Jt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=se(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&yn(this._container),this},bringToBack:function(){return this._map&&bn(this._container),this},_prepareOpen:function(n){var l=this._source;if(!l._map)return!1;if(l instanceof ln){l=null;var f=this._source._layers;for(var w in f)if(f[w]._map){l=f[w];break}if(!l)return!1;this._source=l}if(!n)if(l.getCenter)n=l.getCenter();else if(l.getLatLng)n=l.getLatLng();else if(l.getBounds)n=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")n.innerHTML=l;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),f=this._getAnchor();this._zoomAnimated?Rs(this._container,n.add(f)):l=l.add(n).add(f);var w=this._containerBottom=-l.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=w+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});Zt.include({_initOverlay:function(n,l,f,w){var A=l;return A instanceof n||(A=new n(w).setContent(l)),f&&A.setLatLng(f),A}}),Ds.include({_initOverlay:function(n,l,f,w){var A=f;return A instanceof n?(j(A,w),A._source=this):(A=l&&!w?l:new n(w,this),A.setContent(f)),A}});var Vn=Ar.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Ar.prototype.openOn.call(this,n)},onAdd:function(n){Ar.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof cn||this._source.on("preclick",oa))},onRemove:function(n){Ar.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof cn||this._source.off("preclick",oa))},getEvents:function(){var n=Ar.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",l=this._container=mt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=mt("div",n+"-content-wrapper",l);if(this._contentNode=mt("div",n+"-content",f),Ja(l),Xi(this._contentNode),Mt(l,"contextmenu",oa),this._tipContainer=mt("div",n+"-tip-container",l),this._tip=mt("div",n+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=mt("a",n+"-close-button",l);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(w,"click",function(A){Hs(A),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,l=n.style;l.width="",l.whiteSpace="nowrap";var f=n.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),l.width=f+1+"px",l.whiteSpace="",l.height="";var w=n.offsetHeight,A=this.options.maxHeight,$="leaflet-popup-scrolled";A&&w>A?(l.height=A+"px",St(n,$)):Jt(n,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),f=this._getAnchor();Rs(this._container,l.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,l=parseInt($t(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+l,w=this._containerWidth,A=new ie(this._containerLeft,-f-this._containerBottom);A._add(Hn(this._container));var $=n.layerPointToContainerPoint(A),de=J(this.options.autoPanPadding),Ce=J(this.options.autoPanPaddingTopLeft||de),Ae=J(this.options.autoPanPaddingBottomRight||de),He=n.getSize(),tt=0,vt=0;$.x+w+Ae.x>He.x&&(tt=$.x+w-He.x+Ae.x),$.x-tt-Ce.x<0&&(tt=$.x-Ce.x),$.y+f+Ae.y>He.y&&(vt=$.y+f-He.y+Ae.y),$.y-vt-Ce.y<0&&(vt=$.y-Ce.y),(tt||vt)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([tt,vt]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ea=function(n,l){return new Vn(n,l)};Zt.mergeOptions({closePopupOnClick:!0}),Zt.include({openPopup:function(n,l,f){return this._initOverlay(Vn,n,l,f).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),Ds.include({bindPopup:function(n,l){return this._popup=this._initOverlay(Vn,this._popup,n,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof ln||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){nn(n);var l=n.layer||n.target;if(this._popup._source===l&&!(l instanceof cn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=l,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Zn=Ar.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Ar.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Ar.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Ar.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",l=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=mt("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var l,f,w=this._map,A=this._container,$=w.latLngToContainerPoint(w.getCenter()),de=w.layerPointToContainerPoint(n),Ce=this.options.direction,Ae=A.offsetWidth,He=A.offsetHeight,tt=J(this.options.offset),vt=this._getAnchor();Ce==="top"?(l=Ae/2,f=He):Ce==="bottom"?(l=Ae/2,f=0):Ce==="center"?(l=Ae/2,f=He/2):Ce==="right"?(l=0,f=He/2):Ce==="left"?(l=Ae,f=He/2):de.x<$.x?(Ce="right",l=0,f=He/2):(Ce="left",l=Ae+(tt.x+vt.x)*2,f=He/2),n=n.subtract(J(l,f,!0)).add(tt).add(vt),Jt(A,"leaflet-tooltip-right"),Jt(A,"leaflet-tooltip-left"),Jt(A,"leaflet-tooltip-top"),Jt(A,"leaflet-tooltip-bottom"),St(A,"leaflet-tooltip-"+Ce),Rs(A,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&ur(this._container,n)},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ni=function(n,l){return new Zn(n,l)};Zt.include({openTooltip:function(n,l,f){return this._initOverlay(Zn,n,l,f).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),Ds.include({bindTooltip:function(n,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zn,this._tooltip,n,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var l=n?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[l](f),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof ln||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var l=typeof n.getElement=="function"&&n.getElement();l&&(Mt(l,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Mt(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var l=typeof n.getElement=="function"&&n.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var l=n.latlng,f,w;this._tooltip.options.sticky&&n.originalEvent&&(f=this._map.mouseEventToContainerPoint(n.originalEvent),w=this._map.containerPointToLayerPoint(f),l=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(l)}});var Ia=Mn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var l=n&&n.tagName==="DIV"?n:document.createElement("div"),f=this.options;if(f.html instanceof Element?(vr(l),l.appendChild(f.html)):l.innerHTML=f.html!==!1?f.html:"",f.bgPos){var w=J(f.bgPos);l.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Ra(n){return new Ia(n)}Mn.Default=ca;var fa=Ds.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Je.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){j(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Lt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(bn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof ie?n:new ie(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var l=this.getPane().children,f=-n(-1/0,1/0),w=0,A=l.length,$;w<A;w++)$=l[w].style.zIndex,l[w]!==this._container&&$&&(f=n(f,+$));isFinite(f)&&(this.options.zIndex=f+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Je.ielt9){ur(this._container,this.options.opacity);var n=+new Date,l=!1,f=!1;for(var w in this._tiles){var A=this._tiles[w];if(!(!A.current||!A.loaded)){var $=Math.min(1,(n-A.loaded)/200);ur(A.el,$),$<1?l=!0:(A.active?f=!0:this._onOpaqueTile(A),A.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),l&&(q(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=mt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,l=this.options.maxZoom;if(n!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===n?(this._levels[f].el.style.zIndex=l-Math.abs(n-f),this._onUpdateLevel(f)):(Lt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var w=this._levels[n],A=this._map;return w||(w=this._levels[n]={},w.el=mt("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=l,w.origin=A.project(A.unproject(A.getPixelOrigin()),n).round(),w.zoom=n,this._setZoomTransform(w,A.getCenter(),A.getZoom()),v(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var n,l,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)l=this._tiles[n],l.retain=l.current;for(n in this._tiles)if(l=this._tiles[n],l.current&&!l.active){var w=l.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var l in this._tiles)this._tiles[l].coords.z===n&&this._removeTile(l)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Lt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,l,f,w){var A=Math.floor(n/2),$=Math.floor(l/2),de=f-1,Ce=new ie(+A,+$);Ce.z=+de;var Ae=this._tileCoordsToKey(Ce),He=this._tiles[Ae];return He&&He.active?(He.retain=!0,!0):(He&&He.loaded&&(He.retain=!0),de>w?this._retainParent(A,$,de,w):!1)},_retainChildren:function(n,l,f,w){for(var A=2*n;A<2*n+2;A++)for(var $=2*l;$<2*l+2;$++){var de=new ie(A,$);de.z=f+1;var Ce=this._tileCoordsToKey(de),Ae=this._tiles[Ce];if(Ae&&Ae.active){Ae.retain=!0;continue}else Ae&&Ae.loaded&&(Ae.retain=!0);f+1<w&&this._retainChildren(A,$,f+1,w)}},_resetView:function(n){var l=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var l=this.options;return l.minNativeZoom!==void 0&&n<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<n?l.maxNativeZoom:n},_setView:function(n,l,f,w){var A=Math.round(l);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var $=this.options.updateWhenZooming&&A!==this._tileZoom;(!w||$)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(n),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(n,l)},_setZoomTransforms:function(n,l){for(var f in this._levels)this._setZoomTransform(this._levels[f],n,l)},_setZoomTransform:function(n,l,f){var w=this._map.getZoomScale(f,n.zoom),A=n.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(l,f)).round();Je.any3d?wn(n.el,A,w):Rs(n.el,A)},_resetGrid:function(){var n=this._map,l=n.options.crs,f=this._tileSize=this.getTileSize(),w=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,l.wrapLng[0]],w).x/f.x),Math.ceil(n.project([0,l.wrapLng[1]],w).x/f.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([l.wrapLat[0],0],w).y/f.x),Math.ceil(n.project([l.wrapLat[1],0],w).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var l=this._map,f=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),w=l.getZoomScale(f,this._tileZoom),A=l.project(n,this._tileZoom).floor(),$=l.getSize().divideBy(w*2);return new fe(A.subtract($),A.add($))},_update:function(n){var l=this._map;if(l){var f=this._clampZoom(l.getZoom());if(n===void 0&&(n=l.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(n),A=this._pxBoundsToTileRange(w),$=A.getCenter(),de=[],Ce=this.options.keepBuffer,Ae=new fe(A.getBottomLeft().subtract([Ce,-Ce]),A.getTopRight().add([Ce,-Ce]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var He in this._tiles){var tt=this._tiles[He].coords;(tt.z!==this._tileZoom||!Ae.contains(new ie(tt.x,tt.y)))&&(this._tiles[He].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(n,f);return}for(var vt=A.min.y;vt<=A.max.y;vt++)for(var Vt=A.min.x;Vt<=A.max.x;Vt++){var Fr=new ie(Vt,vt);if(Fr.z=this._tileZoom,!!this._isValidTile(Fr)){var ar=this._tiles[this._tileCoordsToKey(Fr)];ar?ar.current=!0:de.push(Fr)}}if(de.sort(function(Kr,Si){return Kr.distanceTo($)-Si.distanceTo($)}),de.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Cn=document.createDocumentFragment();for(Vt=0;Vt<de.length;Vt++)this._addTile(de[Vt],Cn);this._level.el.appendChild(Cn)}}}},_isValidTile:function(n){var l=this._map.options.crs;if(!l.infinite){var f=this._globalTileRange;if(!l.wrapLng&&(n.x<f.min.x||n.x>f.max.x)||!l.wrapLat&&(n.y<f.min.y||n.y>f.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(n);return D(this.options.bounds).overlaps(w)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var l=this._map,f=this.getTileSize(),w=n.scaleBy(f),A=w.add(f),$=l.unproject(w,n.z),de=l.unproject(A,n.z);return[$,de]},_tileCoordsToBounds:function(n){var l=this._tileCoordsToNwSe(n),f=new E(l[0],l[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var l=n.split(":"),f=new ie(+l[0],+l[1]);return f.z=+l[2],f},_removeTile:function(n){var l=this._tiles[n];l&&(Lt(l.el),delete this._tiles[n],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){St(n,"leaflet-tile");var l=this.getTileSize();n.style.width=l.x+"px",n.style.height=l.y+"px",n.onselectstart=v,n.onmousemove=v,Je.ielt9&&this.options.opacity<1&&ur(n,this.options.opacity)},_addTile:function(n,l){var f=this._getTilePos(n),w=this._tileCoordsToKey(n),A=this.createTile(this._wrapCoords(n),c(this._tileReady,this,n));this._initTile(A),this.createTile.length<2&&I(c(this._tileReady,this,n,null,A)),Rs(A,f),this._tiles[w]={el:A,coords:n,current:!0},l.appendChild(A),this.fire("tileloadstart",{tile:A,coords:n})},_tileReady:function(n,l,f){l&&this.fire("tileerror",{error:l,tile:f,coords:n});var w=this._tileCoordsToKey(n);f=this._tiles[w],f&&(f.loaded=+new Date,this._map._fadeAnimated?(ur(f.el,0),q(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),l||(St(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Je.ielt9||!this._map._fadeAnimated?I(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var l=new ie(this._wrapX?x(n.x,this._wrapX):n.x,this._wrapY?x(n.y,this._wrapY):n.y);return l.z=n.z,l},_pxBoundsToTileRange:function(n){var l=this.getTileSize();return new fe(n.min.unscaleBy(l).floor(),n.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function kn(n){return new fa(n)}var Nr=fa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,l){this._url=n,l=j(this,l),l.detectRetina&&Je.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,l){return this._url===n&&l===void 0&&(l=!0),this._url=n,l||this.redraw(),this},createTile:function(n,l){var f=document.createElement("img");return Mt(f,"load",c(this._tileOnLoad,this,l,f)),Mt(f,"error",c(this._tileOnError,this,l,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(n),f},getTileUrl:function(n){var l={r:Je.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-n.y;this.options.tms&&(l.y=f),l["-y"]=f}return P(this._url,i(l,this.options))},_tileOnLoad:function(n,l){Je.ielt9?setTimeout(c(n,this,null,l),0):n(null,l)},_tileOnError:function(n,l,f){var w=this.options.errorTileUrl;w&&l.getAttribute("src")!==w&&(l.src=w),n(f,l)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,l=this.options.maxZoom,f=this.options.zoomReverse,w=this.options.zoomOffset;return f&&(n=l-n),n+w},_getSubdomain:function(n){var l=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var n,l;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(l=this._tiles[n].el,l.onload=v,l.onerror=v,!l.complete)){l.src=Q;var f=this._tiles[n].coords;Lt(l),delete this._tiles[n],this.fire("tileabort",{tile:l,coords:f})}},_removeTile:function(n){var l=this._tiles[n];if(l)return l.el.setAttribute("src",Q),fa.prototype._removeTile.call(this,n)},_tileReady:function(n,l,f){if(!(!this._map||f&&f.getAttribute("src")===Q))return fa.prototype._tileReady.call(this,n,l,f)}});function ms(n,l){return new Nr(n,l)}var ps=Nr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,l){this._url=n;var f=i({},this.defaultWmsParams);for(var w in l)w in this.options||(f[w]=l[w]);l=j(this,l);var A=l.detectRetina&&Je.retina?2:1,$=this.getTileSize();f.width=$.x*A,f.height=$.y*A,this.wmsParams=f},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Nr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var l=this._tileCoordsToNwSe(n),f=this._crs,w=R(f.project(l[0]),f.project(l[1])),A=w.min,$=w.max,de=(this._wmsVersion>=1.3&&this._crs===nr?[A.y,A.x,$.y,$.x]:[A.x,A.y,$.x,$.y]).join(","),Ce=Nr.prototype.getTileUrl.call(this,n);return Ce+T(this.wmsParams,Ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+de},setParams:function(n,l){return i(this.wmsParams,n),l||this.redraw(),this}});function Vs(n,l){return new ps(n,l)}Nr.WMS=ps,ms.wms=Vs;var gs=Ds.extend({options:{padding:.1},initialize:function(n){j(this,n),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),St(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,l){var f=this._map.getZoomScale(l,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,l),$=w.multiplyBy(-f).add(A).subtract(this._map._getNewPixelOrigin(n,l));Je.any3d?wn(this._container,$,f):Rs(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,l=this._map.getSize(),f=this._map.containerPointToLayerPoint(l.multiplyBy(-n)).round();this._bounds=new fe(f,f.add(l.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gn=gs.extend({options:{tolerance:0},getEvents:function(){var n=gs.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Mt(n,"mousemove",this._onMouseMove,this),Mt(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,Lt(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var l in this._layers)n=this._layers[l],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gs.prototype._update.call(this);var n=this._bounds,l=this._container,f=n.getSize(),w=Je.retina?2:1;Rs(l,n.min),l.width=w*f.x,l.height=w*f.y,l.style.width=f.x+"px",l.style.height=f.y+"px",Je.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){gs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[u(n)]=n;var l=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var l=n._order,f=l.next,w=l.prev;f?f.prev=w:this._drawLast=w,w?w.next=f:this._drawFirst=f,delete n._order,delete this._layers[u(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var l=n.options.dashArray.split(/[, ]+/),f=[],w,A;for(A=0;A<l.length;A++){if(w=Number(l[A]),isNaN(w))return;f.push(w)}n.options._dashArray=f}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||I(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var l=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(n._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(n._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var l=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,l=this._redrawBounds;if(this._ctx.save(),l){var f=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)n=w.layer,(!l||n._pxBounds&&n._pxBounds.intersects(l))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,l){if(this._drawing){var f,w,A,$,de=n._parts,Ce=de.length,Ae=this._ctx;if(Ce){for(Ae.beginPath(),f=0;f<Ce;f++){for(w=0,A=de[f].length;w<A;w++)$=de[f][w],Ae[w?"lineTo":"moveTo"]($.x,$.y);l&&Ae.closePath()}this._fillStroke(Ae,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var l=n._point,f=this._ctx,w=Math.max(Math.round(n._radius),1),A=(Math.max(Math.round(n._radiusY),1)||w)/w;A!==1&&(f.save(),f.scale(1,A)),f.beginPath(),f.arc(l.x,l.y/A,w,0,Math.PI*2,!1),A!==1&&f.restore(),this._fillStroke(f,n)}},_fillStroke:function(n,l){var f=l.options;f.fill&&(n.globalAlpha=f.fillOpacity,n.fillStyle=f.fillColor||f.color,n.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(n.setLineDash&&n.setLineDash(l.options&&l.options._dashArray||[]),n.globalAlpha=f.opacity,n.lineWidth=f.weight,n.strokeStyle=f.color,n.lineCap=f.lineCap,n.lineJoin=f.lineJoin,n.stroke())},_onClick:function(n){for(var l=this._map.mouseEventToLayerPoint(n),f,w,A=this._drawFirst;A;A=A.next)f=A.layer,f.options.interactive&&f._containsPoint(l)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(f))&&(w=f);this._fireEvent(w?[w]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,l)}},_handleMouseOut:function(n){var l=this._hoveredLayer;l&&(Jt(this._container,"leaflet-interactive"),this._fireEvent([l],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,l){if(!this._mouseHoverThrottled){for(var f,w,A=this._drawFirst;A;A=A.next)f=A.layer,f.options.interactive&&f._containsPoint(l)&&(w=f);w!==this._hoveredLayer&&(this._handleMouseOut(n),w&&(St(this._container,"leaflet-interactive"),this._fireEvent([w],n,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,l,f){this._map._fireDOMEvent(l,f||l.type,n)},_bringToFront:function(n){var l=n._order;if(l){var f=l.next,w=l.prev;if(f)f.prev=w;else return;w?w.next=f:f&&(this._drawFirst=f),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(n)}},_bringToBack:function(n){var l=n._order;if(l){var f=l.next,w=l.prev;if(w)w.next=f;else return;f?f.prev=w:w&&(this._drawLast=w),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(n)}}});function ji(n){return Je.canvas?new Gn(n):null}var Yn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Wo={_initContainer:function(){this._container=mt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gs.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var l=n._container=Yn("shape");St(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",n._path=Yn("path"),l.appendChild(n._path),this._updateStyle(n),this._layers[u(n)]=n},_addPath:function(n){var l=n._container;this._container.appendChild(l),n.options.interactive&&n.addInteractiveTarget(l)},_removePath:function(n){var l=n._container;Lt(l),n.removeInteractiveTarget(l),delete this._layers[u(n)]},_updateStyle:function(n){var l=n._stroke,f=n._fill,w=n.options,A=n._container;A.stroked=!!w.stroke,A.filled=!!w.fill,w.stroke?(l||(l=n._stroke=Yn("stroke")),A.appendChild(l),l.weight=w.weight+"px",l.color=w.color,l.opacity=w.opacity,w.dashArray?l.dashStyle=B(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=w.lineCap.replace("butt","flat"),l.joinstyle=w.lineJoin):l&&(A.removeChild(l),n._stroke=null),w.fill?(f||(f=n._fill=Yn("fill")),A.appendChild(f),f.color=w.fillColor||w.color,f.opacity=w.fillOpacity):f&&(A.removeChild(f),n._fill=null)},_updateCircle:function(n){var l=n._point.round(),f=Math.round(n._radius),w=Math.round(n._radiusY||f);this._setPath(n,n._empty()?"M0 0":"AL "+l.x+","+l.y+" "+f+","+w+" 0,"+65535*360)},_setPath:function(n,l){n._path.v=l},_bringToFront:function(n){yn(n._container)},_bringToBack:function(n){bn(n._container)}},_i=Je.vml?Yn:G,Ma=gs.extend({_initContainer:function(){this._container=_i("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_i("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Lt(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gs.prototype._update.call(this);var n=this._bounds,l=n.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,f.setAttribute("width",l.x),f.setAttribute("height",l.y)),Rs(f,n.min),f.setAttribute("viewBox",[n.min.x,n.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(n){var l=n._path=_i("path");n.options.className&&St(l,n.options.className),n.options.interactive&&St(l,"leaflet-interactive"),this._updateStyle(n),this._layers[u(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Lt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[u(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var l=n._path,f=n.options;l&&(f.stroke?(l.setAttribute("stroke",f.color),l.setAttribute("stroke-opacity",f.opacity),l.setAttribute("stroke-width",f.weight),l.setAttribute("stroke-linecap",f.lineCap),l.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?l.setAttribute("stroke-dasharray",f.dashArray):l.removeAttribute("stroke-dasharray"),f.dashOffset?l.setAttribute("stroke-dashoffset",f.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),f.fill?(l.setAttribute("fill",f.fillColor||f.color),l.setAttribute("fill-opacity",f.fillOpacity),l.setAttribute("fill-rule",f.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(n,l){this._setPath(n,Z(n._parts,l))},_updateCircle:function(n){var l=n._point,f=Math.max(Math.round(n._radius),1),w=Math.max(Math.round(n._radiusY),1)||f,A="a"+f+","+w+" 0 1,0 ",$=n._empty()?"M0 0":"M"+(l.x-f)+","+l.y+A+f*2+",0 "+A+-f*2+",0 ";this._setPath(n,$)},_setPath:function(n,l){n._path.setAttribute("d",l)},_bringToFront:function(n){yn(n._path)},_bringToBack:function(n){bn(n._path)}});Je.vml&&Ma.include(Wo);function Yr(n){return Je.svg||Je.vml?new Ma(n):null}Zt.include({getRenderer:function(n){var l=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var l=this._paneRenderers[n];return l===void 0&&(l=this._createRenderer({pane:n}),this._paneRenderers[n]=l),l},_createRenderer:function(n){return this.options.preferCanvas&&ji(n)||Yr(n)}});var hn=yr.extend({initialize:function(n,l){yr.prototype.initialize.call(this,this._boundsToLatLngs(n),l)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=D(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Vo(n,l){return new hn(n,l)}Ma.create=_i,Ma.pointsToPath=Z,_n.geometryToLayer=ti,_n.coordsToLatLng=ha,_n.coordsToLatLngs=br,_n.latLngToCoords=wr,_n.latLngsToCoords=On,_n.getFeature=Gr,_n.asFeature=Sn,Zt.mergeOptions({boxZoom:!0});var ho=Zr.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ga(),Ki(),this._startPoint=this._map.mouseEventToContainerPoint(n),Mt(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=mt("div","leaflet-zoom-box",this._container),St(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var l=new fe(this._point,this._startPoint),f=l.getSize();Rs(this._box,l.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Lt(this._box),Jt(this._container,"leaflet-crosshair")),aa(),In(),Qt(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new E(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Zt.addInitHook("addHandler","boxZoom",ho),Zt.mergeOptions({doubleClickZoom:!0});var Il=Zr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var l=this._map,f=l.getZoom(),w=l.options.zoomDelta,A=n.originalEvent.shiftKey?f-w:f+w;l.options.doubleClickZoom==="center"?l.setZoom(A):l.setZoomAround(n.containerPoint,A)}});Zt.addInitHook("addHandler","doubleClickZoom",Il),Zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var fo=Zr.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new jn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}St(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Jt(this._map._container,"leaflet-grab"),Jt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=D(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var l=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(l),this._prunePositions(l)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,l){return n-(n-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;n.x<l.min.x&&(n.x=this._viscousLimit(n.x,l.min.x)),n.y<l.min.y&&(n.y=this._viscousLimit(n.y,l.min.y)),n.x>l.max.x&&(n.x=this._viscousLimit(n.x,l.max.x)),n.y>l.max.y&&(n.y=this._viscousLimit(n.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,l=Math.round(n/2),f=this._initialWorldOffset,w=this._draggable._newPos.x,A=(w-l+f)%n+l-f,$=(w+l+f)%n-l-f,de=Math.abs(A+f)<Math.abs($+f)?A:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=de},_onDragEnd:function(n){var l=this._map,f=l.options,w=!f.inertia||n.noInertia||this._times.length<2;if(l.fire("dragend",n),w)l.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,de=f.easeLinearity,Ce=A.multiplyBy(de/$),Ae=Ce.distanceTo([0,0]),He=Math.min(f.inertiaMaxSpeed,Ae),tt=Ce.multiplyBy(He/Ae),vt=He/(f.inertiaDeceleration*de),Vt=tt.multiplyBy(-vt/2).round();!Vt.x&&!Vt.y?l.fire("moveend"):(Vt=l._limitOffset(Vt,l.options.maxBounds),I(function(){l.panBy(Vt,{duration:vt,easeLinearity:de,noMoveStart:!0,animate:!0})}))}}});Zt.addInitHook("addHandler","dragging",fo),Zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mo=Zr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Mt(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,l=document.documentElement,f=n.scrollTop||l.scrollTop,w=n.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(w,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var l=this._panKeys={},f=this.keyCodes,w,A;for(w=0,A=f.left.length;w<A;w++)l[f.left[w]]=[-1*n,0];for(w=0,A=f.right.length;w<A;w++)l[f.right[w]]=[n,0];for(w=0,A=f.down.length;w<A;w++)l[f.down[w]]=[0,n];for(w=0,A=f.up.length;w<A;w++)l[f.up[w]]=[0,-1*n]},_setZoomDelta:function(n){var l=this._zoomKeys={},f=this.keyCodes,w,A;for(w=0,A=f.zoomIn.length;w<A;w++)l[f.zoomIn[w]]=n;for(w=0,A=f.zoomOut.length;w<A;w++)l[f.zoomOut[w]]=-n},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var l=n.keyCode,f=this._map,w;if(l in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(w=this._panKeys[l],n.shiftKey&&(w=J(w).multiplyBy(3)),f.options.maxBounds&&(w=f._limitOffset(J(w),f.options.maxBounds)),f.options.worldCopyJump){var A=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(w)));f.panTo(A)}else f.panBy(w)}else if(l in this._zoomKeys)f.setZoom(f.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;nn(n)}}});Zt.addInitHook("addHandler","keyboard",mo),Zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zo=Zr.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var l=mi(n),f=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var w=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),w),nn(n)},_performZoom:function(){var n=this._map,l=n.getZoom(),f=this._map.options.zoomSnap||0;n._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,$=f?Math.ceil(A/f)*f:A,de=n._limitZoom(l+(this._delta>0?$:-$))-l;this._delta=0,this._startTime=null,de&&(n.options.scrollWheelZoom==="center"?n.setZoom(l+de):n.setZoomAround(this._lastMousePos,l+de))}});Zt.addInitHook("addHandler","scrollWheelZoom",Zo);var hc=600;Zt.mergeOptions({tapHold:Je.touchNative&&Je.safari&&Je.mobile,tapTolerance:15});var Go=Zr.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var l=n.touches[0];this._startPos=this._newPos=new ie(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",Hs),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),hc),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Qt(document,"touchend",Hs),Qt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)},_onMove:function(n){var l=n.touches[0];this._newPos=new ie(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,l){var f=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});f._simulated=!0,l.target.dispatchEvent(f)}});Zt.addInitHook("addHandler","tapHold",Go),Zt.mergeOptions({touchZoom:Je.touch,bounceAtZoomLimits:!0});var Yo=Zr.extend({addHooks:function(){St(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Jt(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var l=this._map;if(!(!n.touches||n.touches.length!==2||l._animatingZoom||this._zooming)){var f=l.mouseEventToContainerPoint(n.touches[0]),w=l.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(f.add(w)._divideBy(2))),this._startDist=f.distanceTo(w),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),Hs(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var l=this._map,f=l.mouseEventToContainerPoint(n.touches[0]),w=l.mouseEventToContainerPoint(n.touches[1]),A=f.distanceTo(w)/this._startDist;if(this._zoom=l.getScaleZoom(A,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&A<1||this._zoom>l.getMaxZoom()&&A>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var $=f._add(w)._divideBy(2)._subtract(this._centerPoint);if(A===1&&$.x===0&&$.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var de=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=I(de,this,!0),Hs(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Zt.addInitHook("addHandler","touchZoom",Yo),Zt.BoxZoom=ho,Zt.DoubleClickZoom=Il,Zt.Drag=fo,Zt.Keyboard=mo,Zt.ScrollWheelZoom=Zo,Zt.TapHold=Go,Zt.TouchZoom=Yo,r.Bounds=fe,r.Browser=Je,r.CRS=X,r.Canvas=Gn,r.Circle=Lr,r.CircleMarker=da,r.Class=Y,r.Control=Gs,r.DivIcon=Ia,r.DivOverlay=Ar,r.DomEvent=zo,r.DomUtil=It,r.Draggable=jn,r.Evented=oe,r.FeatureGroup=ln,r.GeoJSON=_n,r.GridLayer=fa,r.Handler=Zr,r.Icon=Mn,r.ImageOverlay=Ta,r.LatLng=W,r.LatLngBounds=E,r.Layer=Ds,r.LayerGroup=Or,r.LineUtil=ss,r.Map=Zt,r.Marker=Ks,r.Mixin=$o,r.Path=cn,r.Point=ie,r.PolyUtil=xi,r.Polygon=yr,r.Polyline=dn,r.Popup=Vn,r.PosAnimation=Qi,r.Projection=Ys,r.Rectangle=hn,r.Renderer=gs,r.SVG=Ma,r.SVGOverlay=co,r.TileLayer=Nr,r.Tooltip=Zn,r.Transformation=je,r.Util=ne,r.VideoOverlay=un,r.bind=c,r.bounds=R,r.canvas=ji,r.circle=El,r.circleMarker=lo,r.control=an,r.divIcon=Ra,r.extend=i,r.featureGroup=io,r.geoJSON=Wn,r.geoJson=Ws,r.gridLayer=kn,r.icon=oo,r.imageOverlay=Dr,r.latLng=se,r.latLngBounds=D,r.layerGroup=Uo,r.map=Bo,r.marker=yi,r.point=J,r.polygon=bi,r.polyline=Ho,r.popup=Ea,r.rectangle=Vo,r.setOptions=j,r.stamp=u,r.svg=Yr,r.svgOverlay=uo,r.tileLayer=ms,r.tooltip=Ni,r.transformation=Me,r.version=a,r.videoOverlay=wi;var Ko=window.L;r.noConflict=function(){return window.L=Ko,this},window.L=r})}(Vl,Vl.exports)),Vl.exports}var uc=Dw();const Kf=up(uc);function Oh(s,t,r){return Object.freeze({instance:s,context:t,container:r})}function Dh(s,t){return t==null?function(a,i){const o=_.useRef();return o.current||(o.current=s(a,i)),o}:function(a,i){const o=_.useRef();o.current||(o.current=s(a,i));const c=_.useRef(a),{instance:h}=o.current;return _.useEffect(function(){c.current!==a&&(t(h,a,c.current),c.current=a)},[h,a,i]),o}}function Fw(s,t){_.useEffect(function(){return(t.layerContainer??t.map).addLayer(s.instance),function(){t.layerContainer?.removeLayer(s.instance),t.map.removeLayer(s.instance)}},[t,s])}function B0(s){return function(r){const a=jd(),i=s(z0(r,a),a);return Aw(a.map,r.attribution),Mw(i.current,r.eventHandlers),Fw(i.current,a),i}}function zw(s,t){const r=Dh(s,t),a=B0(r);return F0(a)}function Bw(s,t){const r=Dh(s,t),a=B0(r);return Iw(a)}function qw(s,t,r){const{opacity:a,zIndex:i}=t;a!=null&&a!==r.opacity&&s.setOpacity(a),i!=null&&i!==r.zIndex&&s.setZIndex(i)}function $w(){return jd().map}const Uw=Dh(function({children:t,...r},a){const i=new uc.Control.Layers(void 0,void 0,r);return Oh(i,Rh(a,{layersControl:i}))},function(t,r,a){r.collapsed!==a.collapsed&&(r.collapsed===!0?t.collapse():t.expand())}),Hw=Rw(Uw),Yl=F0(Hw);function q0(s){return function(r){const a=jd(),i=_.useRef(r),[o,c]=_.useState(null),{layersControl:h,map:u}=a,m=_.useCallback(b=>{h!=null&&(i.current.checked&&u.addLayer(b),s(h,b,i.current.name),c(b))},[h,u]),x=_.useCallback(b=>{h?.removeLayer(b),c(null)},[h]),v=_.useMemo(()=>Rh(a,{layerContainer:{addLayer:m,removeLayer:x}}),[a,m,x]);return _.useEffect(()=>{o!==null&&i.current!==r&&(r.checked===!0&&(i.current.checked==null||i.current.checked===!1)?u.addLayer(o):i.current.checked===!0&&(r.checked==null||r.checked===!1)&&u.removeLayer(o),i.current=r)}),r.children?fs.createElement(Mh,{value:v},r.children):null}}Yl.BaseLayer=q0(function(t,r,a){t.addBaseLayer(r,a)});Yl.Overlay=q0(function(t,r,a){t.addOverlay(r,a)});function Eu(){return Eu=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Eu.apply(this,arguments)}function Ww({bounds:s,boundsOptions:t,center:r,children:a,className:i,id:o,placeholder:c,style:h,whenReady:u,zoom:m,...x},v){const[b]=_.useState({className:i,id:o,style:h}),[g,k]=_.useState(null);_.useImperativeHandle(v,()=>g?.map??null,[g]);const j=_.useCallback(S=>{if(S!==null&&g===null){const P=new uc.Map(S,x);r!=null&&m!=null?P.setView(r,m):s!=null&&P.fitBounds(s,t),u!=null&&P.whenReady(u),k(Ew(P))}},[]);_.useEffect(()=>()=>{g?.map.remove()},[g]);const T=g?fs.createElement(Mh,{value:g},a):c??null;return fs.createElement("div",Eu({},b,{ref:j}),T)}const Vw=_.forwardRef(Ww),Jf=zw(function({position:t,...r},a){const i=new uc.Marker(t,r);return Oh(i,Rh(a,{overlayContainer:i}))},function(t,r,a){r.position!==a.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==a.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==a.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==a.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==a.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),Xf=Bw(function({url:t,...r},a){const i=new uc.TileLayer(t,z0(r,a));return Oh(i,a)},function(t,r,a){qw(t,r,a);const{url:i}=r;i!=null&&i!==a.url&&t.setUrl(i)}),Zw="modulepreload",Gw=function(s){return"/"+s},Qf={},Iu=function(t,r,a){let i=Promise.resolve();if(r&&r.length>0){let u=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=c?.nonce||c?.getAttribute("nonce");i=u(r.map(m=>{if(m=Gw(m),m in Qf)return;Qf[m]=!0;const x=m.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":Zw,x||(b.as="script"),b.crossOrigin="",b.href=m,h&&b.setAttribute("nonce",h),document.head.appendChild(b),x)return new Promise((g,k)=>{b.addEventListener("load",g),b.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return i.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})};function ws(s){"@babel/helpers - typeof";return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ws(s)}var tn=Uint8Array,qn=Uint16Array,Fh=Int32Array,_d=new tn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sd=new tn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ru=new tn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$0=function(s,t){for(var r=new qn(31),a=0;a<31;++a)r[a]=t+=1<<s[a-1];for(var i=new Fh(r[30]),a=1;a<30;++a)for(var o=r[a];o<r[a+1];++o)i[o]=o-r[a]<<5|a;return{b:r,r:i}},U0=$0(_d,2),H0=U0.b,Mu=U0.r;H0[28]=258,Mu[258]=28;var W0=$0(Sd,0),Yw=W0.b,em=W0.r,Ou=new qn(32768);for(var Bs=0;Bs<32768;++Bs){var Ei=(Bs&43690)>>1|(Bs&21845)<<1;Ei=(Ei&52428)>>2|(Ei&13107)<<2,Ei=(Ei&61680)>>4|(Ei&3855)<<4,Ou[Bs]=((Ei&65280)>>8|(Ei&255)<<8)>>1}var Ha=function(s,t,r){for(var a=s.length,i=0,o=new qn(t);i<a;++i)s[i]&&++o[s[i]-1];var c=new qn(t);for(i=1;i<t;++i)c[i]=c[i-1]+o[i-1]<<1;var h;if(r){h=new qn(1<<t);var u=15-t;for(i=0;i<a;++i)if(s[i])for(var m=i<<4|s[i],x=t-s[i],v=c[s[i]-1]++<<x,b=v|(1<<x)-1;v<=b;++v)h[Ou[v]>>u]=m}else for(h=new qn(a),i=0;i<a;++i)s[i]&&(h[i]=Ou[c[s[i]-1]++]>>15-s[i]);return h},Hi=new tn(288);for(var Bs=0;Bs<144;++Bs)Hi[Bs]=8;for(var Bs=144;Bs<256;++Bs)Hi[Bs]=9;for(var Bs=256;Bs<280;++Bs)Hi[Bs]=7;for(var Bs=280;Bs<288;++Bs)Hi[Bs]=8;var rc=new tn(32);for(var Bs=0;Bs<32;++Bs)rc[Bs]=5;var Kw=Ha(Hi,9,0),Jw=Ha(Hi,9,1),Xw=Ha(rc,5,0),Qw=Ha(rc,5,1),eu=function(s){for(var t=s[0],r=1;r<s.length;++r)s[r]>t&&(t=s[r]);return t},pa=function(s,t,r){var a=t/8|0;return(s[a]|s[a+1]<<8)>>(t&7)&r},tu=function(s,t){var r=t/8|0;return(s[r]|s[r+1]<<8|s[r+2]<<16)>>(t&7)},zh=function(s){return(s+7)/8|0},V0=function(s,t,r){return(r==null||r>s.length)&&(r=s.length),new tn(s.subarray(t,r))},eN=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],va=function(s,t,r){var a=new Error(t||eN[s]);if(a.code=s,Error.captureStackTrace&&Error.captureStackTrace(a,va),!r)throw a;return a},tN=function(s,t,r,a){var i=s.length,o=0;if(!i||t.f&&!t.l)return r||new tn(0);var c=!r,h=c||t.i!=2,u=t.i;c&&(r=new tn(i*3));var m=function(je){var Me=r.length;if(je>Me){var De=new tn(Math.max(Me*2,je));De.set(r),r=De}},x=t.f||0,v=t.p||0,b=t.b||0,g=t.l,k=t.d,j=t.m,T=t.n,S=i*8;do{if(!g){x=pa(s,v,1);var P=pa(s,v+1,3);if(v+=3,P)if(P==1)g=Jw,k=Qw,j=9,T=5;else if(P==2){var ge=pa(s,v,31)+257,ae=pa(s,v+10,15)+4,ee=ge+pa(s,v+5,31)+1;v+=14;for(var K=new tn(ee),ue=new tn(19),I=0;I<ae;++I)ue[Ru[I]]=pa(s,v+I*3,7);v+=ae*3;for(var q=eu(ue),ne=(1<<q)-1,Y=Ha(ue,q,1),I=0;I<ee;){var he=Y[pa(s,v,ne)];v+=he&15;var B=he>>4;if(B<16)K[I++]=B;else{var pe=0,oe=0;for(B==16?(oe=3+pa(s,v,3),v+=2,pe=K[I-1]):B==17?(oe=3+pa(s,v,7),v+=3):B==18&&(oe=11+pa(s,v,127),v+=7);oe--;)K[I++]=pe}}var ie=K.subarray(0,ge),Ne=K.subarray(ge);j=eu(ie),T=eu(Ne),g=Ha(ie,j,1),k=Ha(Ne,T,1)}else va(1);else{var B=zh(v)+4,U=s[B-4]|s[B-3]<<8,Q=B+U;if(Q>i){u&&va(0);break}h&&m(b+U),r.set(s.subarray(B,Q),b),t.b=b+=U,t.p=v=Q*8,t.f=x;continue}if(v>S){u&&va(0);break}}h&&m(b+131072);for(var J=(1<<j)-1,fe=(1<<T)-1,R=v;;R=v){var pe=g[tu(s,v)&J],E=pe>>4;if(v+=pe&15,v>S){u&&va(0);break}if(pe||va(2),E<256)r[b++]=E;else if(E==256){R=v,g=null;break}else{var D=E-254;if(E>264){var I=E-257,W=_d[I];D=pa(s,v,(1<<W)-1)+H0[I],v+=W}var se=k[tu(s,v)&fe],X=se>>4;se||va(3),v+=se&15;var Ne=Yw[X];if(X>3){var W=Sd[X];Ne+=tu(s,v)&(1<<W)-1,v+=W}if(v>S){u&&va(0);break}h&&m(b+131072);var le=b+D;if(b<Ne){var ce=o-Ne,xe=Math.min(Ne,le);for(ce+b<0&&va(3);b<xe;++b)r[b]=a[ce+b]}for(;b<le;++b)r[b]=r[b-Ne]}}t.l=g,t.p=R,t.b=b,t.f=x,g&&(x=1,t.m=j,t.d=k,t.n=T)}while(!x);return b!=r.length&&c?V0(r,0,b):r.subarray(0,b)},ni=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8},ql=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8,s[a+2]|=r>>16},su=function(s,t){for(var r=[],a=0;a<s.length;++a)s[a]&&r.push({s:a,f:s[a]});var i=r.length,o=r.slice();if(!i)return{t:G0,l:0};if(i==1){var c=new tn(r[0].s+1);return c[r[0].s]=1,{t:c,l:1}}r.sort(function(Q,ge){return Q.f-ge.f}),r.push({s:-1,f:25001});var h=r[0],u=r[1],m=0,x=1,v=2;for(r[0]={s:-1,f:h.f+u.f,l:h,r:u};x!=i-1;)h=r[r[m].f<r[v].f?m++:v++],u=r[m!=x&&r[m].f<r[v].f?m++:v++],r[x++]={s:-1,f:h.f+u.f,l:h,r:u};for(var b=o[0].s,a=1;a<i;++a)o[a].s>b&&(b=o[a].s);var g=new qn(b+1),k=Du(r[x-1],g,0);if(k>t){var a=0,j=0,T=k-t,S=1<<T;for(o.sort(function(ge,ae){return g[ae.s]-g[ge.s]||ge.f-ae.f});a<i;++a){var P=o[a].s;if(g[P]>t)j+=S-(1<<k-g[P]),g[P]=t;else break}for(j>>=T;j>0;){var B=o[a].s;g[B]<t?j-=1<<t-g[B]++-1:++a}for(;a>=0&&j;--a){var U=o[a].s;g[U]==t&&(--g[U],++j)}k=t}return{t:new tn(g),l:k}},Du=function(s,t,r){return s.s==-1?Math.max(Du(s.l,t,r+1),Du(s.r,t,r+1)):t[s.s]=r},tm=function(s){for(var t=s.length;t&&!s[--t];);for(var r=new qn(++t),a=0,i=s[0],o=1,c=function(u){r[a++]=u},h=1;h<=t;++h)if(s[h]==i&&h!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(i),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(i);o=1,i=s[h]}return{c:r.subarray(0,a),n:t}},$l=function(s,t){for(var r=0,a=0;a<t.length;++a)r+=s[a]*t[a];return r},Z0=function(s,t,r){var a=r.length,i=zh(t+2);s[i]=a&255,s[i+1]=a>>8,s[i+2]=s[i]^255,s[i+3]=s[i+1]^255;for(var o=0;o<a;++o)s[i+o+4]=r[o];return(i+4+a)*8},sm=function(s,t,r,a,i,o,c,h,u,m,x){ni(t,x++,r),++i[256];for(var v=su(i,15),b=v.t,g=v.l,k=su(o,15),j=k.t,T=k.l,S=tm(b),P=S.c,B=S.n,U=tm(j),Q=U.c,ge=U.n,ae=new qn(19),ee=0;ee<P.length;++ee)++ae[P[ee]&31];for(var ee=0;ee<Q.length;++ee)++ae[Q[ee]&31];for(var K=su(ae,7),ue=K.t,I=K.l,q=19;q>4&&!ue[Ru[q-1]];--q);var ne=m+5<<3,Y=$l(i,Hi)+$l(o,rc)+c,he=$l(i,b)+$l(o,j)+c+14+3*q+$l(ae,ue)+2*ae[16]+3*ae[17]+7*ae[18];if(u>=0&&ne<=Y&&ne<=he)return Z0(t,x,s.subarray(u,u+m));var pe,oe,ie,Ne;if(ni(t,x,1+(he<Y)),x+=2,he<Y){pe=Ha(b,g,0),oe=b,ie=Ha(j,T,0),Ne=j;var J=Ha(ue,I,0);ni(t,x,B-257),ni(t,x+5,ge-1),ni(t,x+10,q-4),x+=14;for(var ee=0;ee<q;++ee)ni(t,x+3*ee,ue[Ru[ee]]);x+=3*q;for(var fe=[P,Q],R=0;R<2;++R)for(var E=fe[R],ee=0;ee<E.length;++ee){var D=E[ee]&31;ni(t,x,J[D]),x+=ue[D],D>15&&(ni(t,x,E[ee]>>5&127),x+=E[ee]>>12)}}else pe=Kw,oe=Hi,ie=Xw,Ne=rc;for(var ee=0;ee<h;++ee){var W=a[ee];if(W>255){var D=W>>18&31;ql(t,x,pe[D+257]),x+=oe[D+257],D>7&&(ni(t,x,W>>23&31),x+=_d[D]);var se=W&31;ql(t,x,ie[se]),x+=Ne[se],se>3&&(ql(t,x,W>>5&8191),x+=Sd[se])}else ql(t,x,pe[W]),x+=oe[W]}return ql(t,x,pe[256]),x+oe[256]},sN=new Fh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),G0=new tn(0),rN=function(s,t,r,a,i,o){var c=o.z||s.length,h=new tn(a+c+5*(1+Math.ceil(c/7e3))+i),u=h.subarray(a,h.length-i),m=o.l,x=(o.r||0)&7;if(t){x&&(u[0]=o.r>>3);for(var v=sN[t-1],b=v>>13,g=v&8191,k=(1<<r)-1,j=o.p||new qn(32768),T=o.h||new qn(k+1),S=Math.ceil(r/3),P=2*S,B=function(Ye){return(s[Ye]^s[Ye+1]<<S^s[Ye+2]<<P)&k},U=new Fh(25e3),Q=new qn(288),ge=new qn(32),ae=0,ee=0,K=o.i||0,ue=0,I=o.w||0,q=0;K+2<c;++K){var ne=B(K),Y=K&32767,he=T[ne];if(j[Y]=he,T[ne]=Y,I<=K){var pe=c-K;if((ae>7e3||ue>24576)&&(pe>423||!m)){x=sm(s,u,0,U,Q,ge,ee,ue,q,K-q,x),ue=ae=ee=0,q=K;for(var oe=0;oe<286;++oe)Q[oe]=0;for(var oe=0;oe<30;++oe)ge[oe]=0}var ie=2,Ne=0,J=g,fe=Y-he&32767;if(pe>2&&ne==B(K-fe))for(var R=Math.min(b,pe)-1,E=Math.min(32767,K),D=Math.min(258,pe);fe<=E&&--J&&Y!=he;){if(s[K+ie]==s[K+ie-fe]){for(var W=0;W<D&&s[K+W]==s[K+W-fe];++W);if(W>ie){if(ie=W,Ne=fe,W>R)break;for(var se=Math.min(fe,W-2),X=0,oe=0;oe<se;++oe){var le=K-fe+oe&32767,ce=j[le],xe=le-ce&32767;xe>X&&(X=xe,he=le)}}}Y=he,he=j[Y],fe+=Y-he&32767}if(Ne){U[ue++]=268435456|Mu[ie]<<18|em[Ne];var je=Mu[ie]&31,Me=em[Ne]&31;ee+=_d[je]+Sd[Me],++Q[257+je],++ge[Me],I=K+ie,++ae}else U[ue++]=s[K],++Q[s[K]]}}for(K=Math.max(K,I);K<c;++K)U[ue++]=s[K],++Q[s[K]];x=sm(s,u,m,U,Q,ge,ee,ue,q,K-q,x),m||(o.r=x&7|u[x/8|0]<<3,x-=7,o.h=T,o.p=j,o.i=K,o.w=I)}else{for(var K=o.w||0;K<c+m;K+=65535){var De=K+65535;De>=c&&(u[x/8|0]=m,De=c),x=Z0(u,x+1,s.subarray(K,De))}o.i=c}return V0(h,0,a+zh(x)+i)},Y0=function(){var s=1,t=0;return{p:function(r){for(var a=s,i=t,o=r.length|0,c=0;c!=o;){for(var h=Math.min(c+2655,o);c<h;++c)i+=a+=r[c];a=(a&65535)+15*(a>>16),i=(i&65535)+15*(i>>16)}s=a,t=i},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},nN=function(s,t,r,a,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),c=new tn(o.length+s.length);c.set(o),c.set(s,o.length),s=c,i.w=o.length}return rN(s,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,r,a,i)},K0=function(s,t,r){for(;r;++t)s[t]=r,r>>>=8},aN=function(s,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(s[0]=120,s[1]=a<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var i=Y0();i.p(t.dictionary),K0(s,2,i.d())}},iN=function(s,t){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&va(6,"invalid zlib data"),(s[1]>>5&1)==1&&va(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function Fu(s,t){t||(t={});var r=Y0();r.p(s);var a=nN(s,t,t.dictionary?6:2,4);return aN(a,t),K0(a,a.length-4,r.d()),a}function oN(s,t){return tN(s.subarray(iN(s),-4),{i:2},t,t)}var lN=typeof TextDecoder<"u"&&new TextDecoder,cN=0;try{lN.decode(G0,{stream:!0}),cN=1}catch{}var kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ru(){kt.console&&typeof kt.console.log=="function"&&kt.console.log.apply(kt.console,arguments)}var As={log:ru,warn:function(s){kt.console&&(typeof kt.console.warn=="function"?kt.console.warn.apply(kt.console,arguments):ru.call(null,arguments))},error:function(s){kt.console&&(typeof kt.console.error=="function"?kt.console.error.apply(kt.console,arguments):ru(s))}};function nu(s,t,r){var a=new XMLHttpRequest;a.open("GET",s),a.responseType="blob",a.onload=function(){vo(a.response,t,r)},a.onerror=function(){As.error("could not download file")},a.send()}function rm(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ec(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var Kl,zu,vo=kt.saveAs||((typeof window>"u"?"undefined":ws(window))!=="object"||window!==kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,t,r){var a=kt.URL||kt.webkitURL,i=document.createElement("a");t=t||s.name||"download",i.download=t,i.rel="noopener",typeof s=="string"?(i.href=s,i.origin!==location.origin?rm(i.href)?nu(s,t,r):Ec(i,i.target="_blank"):Ec(i)):(i.href=a.createObjectURL(s),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){Ec(i)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,r){if(t=t||s.name||"download",typeof s=="string")if(rm(s))nu(s,t,r);else{var a=document.createElement("a");a.href=s,a.target="_blank",setTimeout(function(){Ec(a)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:ws(o)!=="object"&&(As.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(s,r),t)}:function(s,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof s=="string")return nu(s,t,r);var i=s.type==="application/octet-stream",o=/constructor/i.test(kt.HTMLElement)||kt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&o)&&(typeof FileReader>"u"?"undefined":ws(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var x=h.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=x:location=x,a=null},h.readAsDataURL(s)}else{var u=kt.URL||kt.webkitURL,m=u.createObjectURL(s);a?a.location=m:location.href=m,a=null,setTimeout(function(){u.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function J0(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],a=0;a<r.length;a++){var i=r[a].re,o=r[a].process,c=i.exec(s);c&&(t=o(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),u=this.g.toString(16),m=this.b.toString(16);return h.length==1&&(h="0"+h),u.length==1&&(u="0"+u),m.length==1&&(m="0"+m),"#"+h+u+m}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function au(s,t){var r=s[0],a=s[1],i=s[2],o=s[3];r=Jr(r,a,i,o,t[0],7,-680876936),o=Jr(o,r,a,i,t[1],12,-389564586),i=Jr(i,o,r,a,t[2],17,606105819),a=Jr(a,i,o,r,t[3],22,-1044525330),r=Jr(r,a,i,o,t[4],7,-176418897),o=Jr(o,r,a,i,t[5],12,1200080426),i=Jr(i,o,r,a,t[6],17,-1473231341),a=Jr(a,i,o,r,t[7],22,-45705983),r=Jr(r,a,i,o,t[8],7,1770035416),o=Jr(o,r,a,i,t[9],12,-1958414417),i=Jr(i,o,r,a,t[10],17,-42063),a=Jr(a,i,o,r,t[11],22,-1990404162),r=Jr(r,a,i,o,t[12],7,1804603682),o=Jr(o,r,a,i,t[13],12,-40341101),i=Jr(i,o,r,a,t[14],17,-1502002290),r=Xr(r,a=Jr(a,i,o,r,t[15],22,1236535329),i,o,t[1],5,-165796510),o=Xr(o,r,a,i,t[6],9,-1069501632),i=Xr(i,o,r,a,t[11],14,643717713),a=Xr(a,i,o,r,t[0],20,-373897302),r=Xr(r,a,i,o,t[5],5,-701558691),o=Xr(o,r,a,i,t[10],9,38016083),i=Xr(i,o,r,a,t[15],14,-660478335),a=Xr(a,i,o,r,t[4],20,-405537848),r=Xr(r,a,i,o,t[9],5,568446438),o=Xr(o,r,a,i,t[14],9,-1019803690),i=Xr(i,o,r,a,t[3],14,-187363961),a=Xr(a,i,o,r,t[8],20,1163531501),r=Xr(r,a,i,o,t[13],5,-1444681467),o=Xr(o,r,a,i,t[2],9,-51403784),i=Xr(i,o,r,a,t[7],14,1735328473),r=Qr(r,a=Xr(a,i,o,r,t[12],20,-1926607734),i,o,t[5],4,-378558),o=Qr(o,r,a,i,t[8],11,-2022574463),i=Qr(i,o,r,a,t[11],16,1839030562),a=Qr(a,i,o,r,t[14],23,-35309556),r=Qr(r,a,i,o,t[1],4,-1530992060),o=Qr(o,r,a,i,t[4],11,1272893353),i=Qr(i,o,r,a,t[7],16,-155497632),a=Qr(a,i,o,r,t[10],23,-1094730640),r=Qr(r,a,i,o,t[13],4,681279174),o=Qr(o,r,a,i,t[0],11,-358537222),i=Qr(i,o,r,a,t[3],16,-722521979),a=Qr(a,i,o,r,t[6],23,76029189),r=Qr(r,a,i,o,t[9],4,-640364487),o=Qr(o,r,a,i,t[12],11,-421815835),i=Qr(i,o,r,a,t[15],16,530742520),r=en(r,a=Qr(a,i,o,r,t[2],23,-995338651),i,o,t[0],6,-198630844),o=en(o,r,a,i,t[7],10,1126891415),i=en(i,o,r,a,t[14],15,-1416354905),a=en(a,i,o,r,t[5],21,-57434055),r=en(r,a,i,o,t[12],6,1700485571),o=en(o,r,a,i,t[3],10,-1894986606),i=en(i,o,r,a,t[10],15,-1051523),a=en(a,i,o,r,t[1],21,-2054922799),r=en(r,a,i,o,t[8],6,1873313359),o=en(o,r,a,i,t[15],10,-30611744),i=en(i,o,r,a,t[6],15,-1560198380),a=en(a,i,o,r,t[13],21,1309151649),r=en(r,a,i,o,t[4],6,-145523070),o=en(o,r,a,i,t[11],10,-1120210379),i=en(i,o,r,a,t[2],15,718787259),a=en(a,i,o,r,t[9],21,-343485551),s[0]=Oi(r,s[0]),s[1]=Oi(a,s[1]),s[2]=Oi(i,s[2]),s[3]=Oi(o,s[3])}function kd(s,t,r,a,i,o){return t=Oi(Oi(t,s),Oi(a,o)),Oi(t<<i|t>>>32-i,r)}function Jr(s,t,r,a,i,o,c){return kd(t&r|~t&a,s,t,i,o,c)}function Xr(s,t,r,a,i,o,c){return kd(t&a|r&~a,s,t,i,o,c)}function Qr(s,t,r,a,i,o,c){return kd(t^r^a,s,t,i,o,c)}function en(s,t,r,a,i,o,c){return kd(r^(t|~a),s,t,i,o,c)}function X0(s){var t,r=s.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)au(a,dN(s.substring(t-64,t)));s=s.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)i[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(au(a,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,au(a,i),a}function dN(s){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return r}Kl=kt.atob.bind(kt),zu=kt.btoa.bind(kt);var nm="0123456789abcdef".split("");function uN(s){for(var t="",r=0;r<4;r++)t+=nm[s>>8*r+4&15]+nm[s>>8*r&15];return t}function hN(s){return String.fromCharCode((255&s)>>0,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function Bu(s){return X0(s).map(hN).join("")}var fN=function(s){for(var t=0;t<s.length;t++)s[t]=uN(s[t]);return s.join("")}(X0("hello"))!="5d41402abc4b2a76b9719d911017c592";function Oi(s,t){if(fN){var r=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(r>>16)<<16|65535&r}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qu(s,t){var r,a,i,o;if(s!==r){for(var c=(i=s,o=1+(256/s.length>>0),new Array(o+1).join(i)),h=[],u=0;u<256;u++)h[u]=u;var m=0;for(u=0;u<256;u++){var x=h[u];m=(m+x+c.charCodeAt(u))%256,h[u]=h[m],h[m]=x}r=s,a=h}else h=a;var v=t.length,b=0,g=0,k="";for(u=0;u<v;u++)g=(g+(x=h[b=(b+1)%256]))%256,h[b]=h[g],h[g]=x,c=h[(h[b]+h[g])%256],k+=String.fromCharCode(t.charCodeAt(u)^c);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var am={print:4,modify:8,copy:16,"annot-forms":32};function il(s,t,r,a){this.v=1,this.r=2;var i=192;s.forEach(function(h){if(am.perm!==void 0)throw new Error("Invalid permission: "+h);i+=am[h]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(t+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^i)),this.encryptionKey=Bu(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=qu(this.encryptionKey,this.padding)}function ol(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",r=s.length,a=0;a<r;a++){var i=s.charCodeAt(a);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=s[a]}return t}function im(s){if(ws(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,i){if(i=i||!1,typeof r!="string"||typeof a!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var o=Math.random().toString(35);return t[r][o]=[a,!!i],o},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[r]){var c=t[r][o];try{c[0].apply(s,a)}catch(h){kt.console&&As.error("jsPDF PubSub Error",h.message,h)}c[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function id(s){if(!(this instanceof id))return new id(s);var t="opacity,stroke-opacity".split(",");for(var r in s)s.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=s[r]);this.id="",this.objectNumber=-1}function Q0(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function yo(s,t,r,a,i){if(!(this instanceof yo))return new yo(s,t,r,a,i);this.type=s==="axial"?2:3,this.coords=t,this.colors=r,Q0.call(this,a,i)}function ll(s,t,r,a,i){if(!(this instanceof ll))return new ll(s,t,r,a,i);this.boundingBox=s,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Q0.call(this,a,i)}function _t(s){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],i=arguments[2],o=arguments[3],c=[],h=1,u=16,m="S",x=null;ws(s=s||{})==="object"&&(r=s.orientation,a=s.unit||a,i=s.format||i,o=s.compress||s.compressPdf||o,(x=s.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),h=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(u=s.floatPrecision),m=s.defaultPathOperation||"S"),c=s.filters||(o===!0?["FlateEncode"]:c),a=a||"mm",r=(""+(r||"P")).toLowerCase();var v=s.putOnlyUsedFonts||!1,b={},g={internal:{},__private__:{}};g.__private__.PubSub=im;var k="1.3",j=g.__private__.getPdfVersion=function(){return k};g.__private__.setPdfVersion=function(y){k=y};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return T};var S=g.__private__.getPageFormat=function(y){return T[y]};i=i||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},B=P.COMPAT;function U(){this.saveGraphicsState(),Z(new ft(Ke,0,0,-Ke,0,La()*Ke).toString()+" cm"),this.setFontSize(this.getFontSize()/Ke),m="n",B=P.ADVANCED}function Q(){this.restoreGraphicsState(),m="S",B=P.COMPAT}var ge=g.__private__.combineFontStyleAndFontWeight=function(y,O){if(y=="bold"&&O=="normal"||y=="bold"&&O==400||y=="normal"&&O=="italic"||y=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(y=O==400||O==="normal"?y==="italic"?"italic":"normal":O!=700&&O!=="bold"||y!=="normal"?(O==700?"bold":O)+""+y:"bold"),y};g.advancedAPI=function(y){var O=B===P.COMPAT;return O&&U.call(this),typeof y!="function"||(y(this),O&&Q.call(this)),this},g.compatAPI=function(y){var O=B===P.ADVANCED;return O&&Q.call(this),typeof y!="function"||(y(this),O&&U.call(this)),this},g.isAdvancedAPI=function(){return B===P.ADVANCED};var ae,ee=function(y){if(B!==P.ADVANCED)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=g.roundToPrecision=g.__private__.roundToPrecision=function(y,O){var re=t||O;if(isNaN(y)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(re).replace(/0+$/,"")};ae=g.hpf=g.__private__.hpf=typeof u=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return K(y,u)}:u==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return K(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return K(y,16)};var ue=g.f2=g.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return K(y,2)},I=g.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return K(y,3)},q=g.scale=g.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return B===P.COMPAT?y*Ke:B===P.ADVANCED?y:void 0},ne=function(y){return B===P.COMPAT?La()-y:B===P.ADVANCED?y:void 0},Y=function(y){return q(ne(y))};g.__private__.setPrecision=g.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(t=parseInt(y,10))};var he,pe="00000000000000000000000000000000",oe=g.__private__.getFileId=function(){return pe},ie=g.__private__.setFileId=function(y){return pe=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(rr=new il(x.userPermissions,x.userPassword,x.ownerPassword,pe)),pe};g.setFileId=function(y){return ie(y),this},g.getFileId=function(){return oe()};var Ne=g.__private__.convertDateToPDFDate=function(y){var O=y.getTimezoneOffset(),re=O<0?"+":"-",me=Math.floor(Math.abs(O/60)),ke=Math.abs(O%60),Ee=[re,D(me),"'",D(ke),"'"].join("");return["D:",y.getFullYear(),D(y.getMonth()+1),D(y.getDate()),D(y.getHours()),D(y.getMinutes()),D(y.getSeconds()),Ee].join("")},J=g.__private__.convertPDFDateToDate=function(y){var O=parseInt(y.substr(2,4),10),re=parseInt(y.substr(6,2),10)-1,me=parseInt(y.substr(8,2),10),ke=parseInt(y.substr(10,2),10),Ee=parseInt(y.substr(12,2),10),Ze=parseInt(y.substr(14,2),10);return new Date(O,re,me,ke,Ee,Ze,0)},fe=g.__private__.setCreationDate=function(y){var O;if(y===void 0&&(y=new Date),y instanceof Date)O=Ne(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=y}return he=O},R=g.__private__.getCreationDate=function(y){var O=he;return y==="jsDate"&&(O=J(he)),O};g.setCreationDate=function(y){return fe(y),this},g.getCreationDate=function(y){return R(y)};var E,D=g.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},W=g.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},se=0,X=[],le=[],ce=0,xe=[],je=[],Me=!1,De=le,Ye=function(){se=0,ce=0,le=[],X=[],xe=[],Rr=Je(),Mr=Je()};g.__private__.setCustomOutputDestination=function(y){Me=!0,De=y};var G=function(y){Me||(De=y)};g.__private__.resetCustomOutputDestination=function(){Me=!1,De=le};var Z=g.__private__.out=function(y){return y=y.toString(),ce+=y.length+1,De.push(y),De},Fe=g.__private__.write=function(y){return Z(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Be=g.__private__.getArrayBuffer=function(y){for(var O=y.length,re=new ArrayBuffer(O),me=new Uint8Array(re);O--;)me[O]=y.charCodeAt(O);return re},_e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return _e};var Ie=s.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(y){return Ie=B===P.ADVANCED?y/Ke:y,this};var ze,Ge=g.__private__.getFontSize=g.getFontSize=function(){return B===P.COMPAT?Ie:Ie*Ke},nt=s.R2L||!1;g.__private__.setR2L=g.setR2L=function(y){return nt=y,this},g.__private__.getR2L=g.getR2L=function(){return nt};var pt,Nt=g.__private__.setZoomMode=function(y){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))ze=y;else if(isNaN(y)){if(O.indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');ze=y}else ze=parseInt(y,10)};g.__private__.getZoomMode=function(){return ze};var yt,qt=g.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');pt=y};g.__private__.getPageMode=function(){return pt};var is=g.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');yt=y};g.__private__.getLayoutMode=function(){return yt},g.__private__.setDisplayMode=g.setDisplayMode=function(y,O,re){return Nt(y),is(O),qt(re),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(y){if(Object.keys(xt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[y]},g.__private__.getDocumentProperties=function(){return xt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(y){for(var O in xt)xt.hasOwnProperty(O)&&y[O]&&(xt[O]=y[O]);return this},g.__private__.setDocumentProperty=function(y,O){if(Object.keys(xt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[y]=O};var Ct,Ke,dr,Gt,gr,cs={},ds={},_r=[],Yt={},sa={},Ns={},Ur={},xn=null,Is=0,Pt=[],as=new im(g),ra=s.hotfixes||[],er={},Hr={},Sr=[],ft=function y(O,re,me,ke,Ee,Ze){if(!(this instanceof y))return new y(O,re,me,ke,Ee,Ze);isNaN(O)&&(O=1),isNaN(re)&&(re=0),isNaN(me)&&(me=0),isNaN(ke)&&(ke=1),isNaN(Ee)&&(Ee=0),isNaN(Ze)&&(Ze=0),this._matrix=[O,re,me,ke,Ee,Ze]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ae).join(y)},ft.prototype.multiply=function(y){var O=y.sx*this.sx+y.shy*this.shx,re=y.sx*this.shy+y.shy*this.sy,me=y.shx*this.sx+y.sy*this.shx,ke=y.shx*this.shy+y.sy*this.sy,Ee=y.tx*this.sx+y.ty*this.shx+this.tx,Ze=y.tx*this.shy+y.ty*this.sy+this.ty;return new ft(O,re,me,ke,Ee,Ze)},ft.prototype.decompose=function(){var y=this.sx,O=this.shy,re=this.shx,me=this.sy,ke=this.tx,Ee=this.ty,Ze=Math.sqrt(y*y+O*O),Qe=(y/=Ze)*re+(O/=Ze)*me;re-=y*Qe,me-=O*Qe;var it=Math.sqrt(re*re+me*me);return Qe/=it,y*(me/=it)<O*(re/=it)&&(y=-y,O=-O,Qe=-Qe,Ze=-Ze),{scale:new ft(Ze,0,0,it,0,0),translate:new ft(1,0,0,1,ke,Ee),rotate:new ft(y,O,-O,y,0,0),skew:new ft(1,0,Qe,1,0,0)}},ft.prototype.toString=function(y){return this.join(" ")},ft.prototype.inversed=function(){var y=this.sx,O=this.shy,re=this.shx,me=this.sy,ke=this.tx,Ee=this.ty,Ze=1/(y*me-O*re),Qe=me*Ze,it=-O*Ze,Ot=-re*Ze,Rt=y*Ze;return new ft(Qe,it,Ot,Rt,-Qe*ke-Ot*Ee,-it*ke-Rt*Ee)},ft.prototype.applyToPoint=function(y){var O=y.x*this.sx+y.y*this.shx+this.tx,re=y.x*this.shy+y.y*this.sy+this.ty;return new Qa(O,re)},ft.prototype.applyToRectangle=function(y){var O=this.applyToPoint(y),re=this.applyToPoint(new Qa(y.x+y.w,y.y+y.h));return new jn(O.x,O.y,re.x-O.x,re.y-O.y)},ft.prototype.clone=function(){var y=this.sx,O=this.shy,re=this.shx,me=this.sy,ke=this.tx,Ee=this.ty;return new ft(y,O,re,me,ke,Ee)},g.Matrix=ft;var rn=g.matrixMult=function(y,O){return O.multiply(y)},vn=new ft(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=vn;var kr=function(y,O){if(!sa[y]){var re=(O instanceof yo?"Sh":"P")+(Object.keys(Yt).length+1).toString(10);O.id=re,sa[y]=re,Yt[re]=O,as.publish("addPattern",O)}};g.ShadingPattern=yo,g.TilingPattern=ll,g.addShadingPattern=function(y,O){return ee("addShadingPattern()"),kr(y,O),this},g.beginTilingPattern=function(y){ee("beginTilingPattern()"),ro(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},g.endTilingPattern=function(y,O){ee("endTilingPattern()"),O.stream=je[E].join(`
`),kr(y,O),as.publish("endTilingPattern",O),Sr.pop().restore()};var us=g.__private__.newObject=function(){var y=Je();return Cr(y,!0),y},Je=g.__private__.newObjectDeferred=function(){return se++,X[se]=function(){return ce},se},Cr=function(y,O){return O=typeof O=="boolean"&&O,X[y]=ce,O&&Z(y+" 0 obj"),y},na=g.__private__.newAdditionalObject=function(){var y={objId:Je(),content:""};return xe.push(y),y},Rr=Je(),Mr=Je(),xr=g.__private__.decodeColorString=function(y){var O=y.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var re=parseFloat(O[0]);O=[re,re,re,"r"]}for(var me="#",ke=0;ke<3;ke++)me+=("0"+Math.floor(255*parseFloat(O[ke])).toString(16)).slice(-2);return me},Wr=g.__private__.encodeColorString=function(y){var O;typeof y=="string"&&(y={ch1:y});var re=y.ch1,me=y.ch2,ke=y.ch3,Ee=y.ch4,Ze=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var Qe=new J0(re);if(Qe.ok)re=Qe.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var it=parseInt(re.substr(1),16);re=it>>16&255,me=it>>8&255,ke=255&it}if(me===void 0||Ee===void 0&&re===me&&me===ke)if(typeof re=="string")O=re+" "+Ze[0];else switch(y.precision){case 2:O=ue(re/255)+" "+Ze[0];break;case 3:default:O=I(re/255)+" "+Ze[0]}else if(Ee===void 0||ws(Ee)==="object"){if(Ee&&!isNaN(Ee.a)&&Ee.a===0)return O=["1.","1.","1.",Ze[1]].join(" ");if(typeof re=="string")O=[re,me,ke,Ze[1]].join(" ");else switch(y.precision){case 2:O=[ue(re/255),ue(me/255),ue(ke/255),Ze[1]].join(" ");break;default:case 3:O=[I(re/255),I(me/255),I(ke/255),Ze[1]].join(" ")}}else if(typeof re=="string")O=[re,me,ke,Ee,Ze[2]].join(" ");else switch(y.precision){case 2:O=[ue(re),ue(me),ue(ke),ue(Ee),Ze[2]].join(" ");break;case 3:default:O=[I(re),I(me),I(ke),I(Ee),Ze[2]].join(" ")}return O},ve=g.__private__.getFilters=function(){return c},Oe=g.__private__.putStream=function(y){var O=(y=y||{}).data||"",re=y.filters||ve(),me=y.alreadyAppliedFilters||[],ke=y.addLength1||!1,Ee=O.length,Ze=y.objectId,Qe=function(Pr){return Pr};if(x!==null&&Ze===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(Qe=rr.encryptor(Ze,0));var it={};re===!0&&(re=["FlateEncode"]);var Ot=y.additionalKeyValues||[],Rt=(it=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(O,re):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(it.data.length!==0&&(Ot.push({key:"Length",value:it.data.length}),ke===!0&&Ot.push({key:"Length1",value:Ee})),Rt.length!=0)if(Rt.split("/").length-1==1)Ot.push({key:"Filter",value:Rt});else{Ot.push({key:"Filter",value:"["+Rt+"]"});for(var ss=0;ss<Ot.length;ss+=1)if(Ot[ss].key==="DecodeParms"){for(var Ps=[],Ms=0;Ms<it.reverseChain.split("/").length-1;Ms+=1)Ps.push("null");Ps.push(Ot[ss].value),Ot[ss].value="["+Ps.join(" ")+"]"}}Z("<<");for(var Ys=0;Ys<Ot.length;Ys++)Z("/"+Ot[Ys].key+" "+Ot[Ys].value);Z(">>"),it.data.length!==0&&(Z("stream"),Z(Qe(it.data)),Z("endstream"))},Ve=g.__private__.putPage=function(y){var O=y.number,re=y.data,me=y.objId,ke=y.contentsObjId;Cr(me,!0),Z("<</Type /Page"),Z("/Parent "+y.rootDictionaryObjId+" 0 R"),Z("/Resources "+y.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(ae(y.mediaBox.bottomLeftX))+" "+parseFloat(ae(y.mediaBox.bottomLeftY))+" "+ae(y.mediaBox.topRightX)+" "+ae(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&Z("/CropBox ["+ae(y.cropBox.bottomLeftX)+" "+ae(y.cropBox.bottomLeftY)+" "+ae(y.cropBox.topRightX)+" "+ae(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&Z("/BleedBox ["+ae(y.bleedBox.bottomLeftX)+" "+ae(y.bleedBox.bottomLeftY)+" "+ae(y.bleedBox.topRightX)+" "+ae(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&Z("/TrimBox ["+ae(y.trimBox.bottomLeftX)+" "+ae(y.trimBox.bottomLeftY)+" "+ae(y.trimBox.topRightX)+" "+ae(y.trimBox.topRightY)+"]"),y.artBox!==null&&Z("/ArtBox ["+ae(y.artBox.bottomLeftX)+" "+ae(y.artBox.bottomLeftY)+" "+ae(y.artBox.topRightX)+" "+ae(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&Z("/UserUnit "+y.userUnit),as.publish("putPage",{objId:me,pageContext:Pt[O],pageNumber:O,page:re}),Z("/Contents "+ke+" 0 R"),Z(">>"),Z("endobj");var Ee=re.join(`
`);return B===P.ADVANCED&&(Ee+=`
Q`),Cr(ke,!0),Oe({data:Ee,filters:ve(),objectId:ke}),Z("endobj"),me},rt=g.__private__.putPages=function(){var y,O,re=[];for(y=1;y<=Is;y++)Pt[y].objId=Je(),Pt[y].contentsObjId=Je();for(y=1;y<=Is;y++)re.push(Ve({number:y,data:je[y],objId:Pt[y].objId,contentsObjId:Pt[y].contentsObjId,mediaBox:Pt[y].mediaBox,cropBox:Pt[y].cropBox,bleedBox:Pt[y].bleedBox,trimBox:Pt[y].trimBox,artBox:Pt[y].artBox,userUnit:Pt[y].userUnit,rootDictionaryObjId:Rr,resourceDictionaryObjId:Mr}));Cr(Rr,!0),Z("<</Type /Pages");var me="/Kids [";for(O=0;O<Is;O++)me+=re[O]+" 0 R ";Z(me+"]"),Z("/Count "+Is),Z(">>"),Z("endobj"),as.publish("postPutPages")},Dt=function(y){as.publish("putFont",{font:y,out:Z,newObject:us,putStream:Oe}),y.isAlreadyPutted!==!0&&(y.objectNumber=us(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+ol(y.postScriptName)),Z("/Subtype /Type1"),typeof y.encoding=="string"&&Z("/Encoding /"+y.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},At=function(){for(var y in cs)cs.hasOwnProperty(y)&&(v===!1||v===!0&&b.hasOwnProperty(y))&&Dt(cs[y])},Tt=function(y){y.objectNumber=us();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[ae(y.x),ae(y.y),ae(y.x+y.width),ae(y.y+y.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var re=y.pages[1].join(`
`);Oe({data:re,additionalKeyValues:O,objectId:y.objectNumber}),Z("endobj")},jt=function(){for(var y in er)er.hasOwnProperty(y)&&Tt(er[y])},Et=function(y,O){var re,me=[],ke=1/(O-1);for(re=0;re<1;re+=ke)me.push(re);if(me.push(1),y[0].offset!=0){var Ee={offset:0,color:y[0].color};y.unshift(Ee)}if(y[y.length-1].offset!=1){var Ze={offset:1,color:y[y.length-1].color};y.push(Ze)}for(var Qe="",it=0,Ot=0;Ot<me.length;Ot++){for(re=me[Ot];re>y[it+1].offset;)it++;var Rt=y[it].offset,ss=(re-Rt)/(y[it+1].offset-Rt),Ps=y[it].color,Ms=y[it+1].color;Qe+=W(Math.round((1-ss)*Ps[0]+ss*Ms[0]).toString(16))+W(Math.round((1-ss)*Ps[1]+ss*Ms[1]).toString(16))+W(Math.round((1-ss)*Ps[2]+ss*Ms[2]).toString(16))}return Qe.trim()},Ft=function(y,O){O||(O=21);var re=us(),me=Et(y.colors,O),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+O+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oe({data:me,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),Z("endobj"),y.objectNumber=us(),Z("<< /ShadingType "+y.type),Z("/ColorSpace /DeviceRGB");var Ee="/Coords ["+ae(parseFloat(y.coords[0]))+" "+ae(parseFloat(y.coords[1]))+" ";y.type===2?Ee+=ae(parseFloat(y.coords[2]))+" "+ae(parseFloat(y.coords[3])):Ee+=ae(parseFloat(y.coords[2]))+" "+ae(parseFloat(y.coords[3]))+" "+ae(parseFloat(y.coords[4]))+" "+ae(parseFloat(y.coords[5])),Z(Ee+="]"),y.matrix&&Z("/Matrix ["+y.matrix.toString()+"]"),Z("/Function "+re+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Kt=function(y,O){var re=Je(),me=us();O.push({resourcesOid:re,objectOid:me}),y.objectNumber=me;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+y.boundingBox.map(ae).join(" ")+"]"}),ke.push({key:"XStep",value:ae(y.xStep)}),ke.push({key:"YStep",value:ae(y.yStep)}),ke.push({key:"Resources",value:re+" 0 R"}),y.matrix&&ke.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),Oe({data:y.stream,additionalKeyValues:ke,objectId:y.objectNumber}),Z("endobj")},bt=function(y){var O;for(O in Yt)Yt.hasOwnProperty(O)&&(Yt[O]instanceof yo?Ft(Yt[O]):Yt[O]instanceof ll&&Kt(Yt[O],y))},gt=function(y){for(var O in y.objectNumber=us(),Z("<<"),y)switch(O){case"opacity":Z("/ca "+ue(y[O]));break;case"stroke-opacity":Z("/CA "+ue(y[O]))}Z(">>"),Z("endobj")},Cs=function(){var y;for(y in Ns)Ns.hasOwnProperty(y)&&gt(Ns[y])},os=function(){for(var y in Z("/XObject <<"),er)er.hasOwnProperty(y)&&er[y].objectNumber>=0&&Z("/"+y+" "+er[y].objectNumber+" 0 R");as.publish("putXobjectDict"),Z(">>")},tr=function(){rr.oid=us(),Z("<<"),Z("/Filter /Standard"),Z("/V "+rr.v),Z("/R "+rr.r),Z("/U <"+rr.toHexString(rr.U)+">"),Z("/O <"+rr.toHexString(rr.O)+">"),Z("/P "+rr.P),Z(">>"),Z("endobj")},Vr=function(){for(var y in Z("/Font <<"),cs)cs.hasOwnProperty(y)&&(v===!1||v===!0&&b.hasOwnProperty(y))&&Z("/"+y+" "+cs[y].objectNumber+" 0 R");Z(">>")},Ht=function(){if(Object.keys(Yt).length>0){for(var y in Z("/Shading <<"),Yt)Yt.hasOwnProperty(y)&&Yt[y]instanceof yo&&Yt[y].objectNumber>=0&&Z("/"+y+" "+Yt[y].objectNumber+" 0 R");as.publish("putShadingPatternDict"),Z(">>")}},$t=function(y){if(Object.keys(Yt).length>0){for(var O in Z("/Pattern <<"),Yt)Yt.hasOwnProperty(O)&&Yt[O]instanceof g.TilingPattern&&Yt[O].objectNumber>=0&&Yt[O].objectNumber<y&&Z("/"+O+" "+Yt[O].objectNumber+" 0 R");as.publish("putTilingPatternDict"),Z(">>")}},mt=function(){if(Object.keys(Ns).length>0){var y;for(y in Z("/ExtGState <<"),Ns)Ns.hasOwnProperty(y)&&Ns[y].objectNumber>=0&&Z("/"+y+" "+Ns[y].objectNumber+" 0 R");as.publish("putGStateDict"),Z(">>")}},Lt=function(y){Cr(y.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Vr(),Ht(),$t(y.objectOid),mt(),os(),Z(">>"),Z("endobj")},vr=function(){var y=[];At(),Cs(),jt(),bt(y),as.publish("putResources"),y.forEach(Lt),Lt({resourcesOid:Mr,objectOid:Number.MAX_SAFE_INTEGER}),as.publish("postPutResources")},yn=function(){as.publish("putAdditionalObjects");for(var y=0;y<xe.length;y++){var O=xe[y];Cr(O.objId,!0),Z(O.content),Z("endobj")}as.publish("postPutAdditionalObjects")},bn=function(y){ds[y.fontName]=ds[y.fontName]||{},ds[y.fontName][y.fontStyle]=y.id},Un=function(y,O,re,me,ke){var Ee={id:"F"+(Object.keys(cs).length+1).toString(10),postScriptName:y,fontName:O,fontStyle:re,encoding:me,isStandardFont:ke||!1,metadata:{}};return as.publish("addFont",{font:Ee,instance:this}),cs[Ee.id]=Ee,bn(Ee),Ee.id},St=function(y){for(var O=0,re=_e.length;O<re;O++){var me=Un.call(this,y[O][0],y[O][1],y[O][2],_e[O][3],!0);v===!1&&(b[me]=!0);var ke=y[O][0].split("-");bn({id:me,fontName:ke[0],fontStyle:ke[1]||""})}as.publish("addFonts",{fonts:cs,dictionary:ds})},Jt=function(y){return y.foo=function(){try{return y.apply(this,arguments)}catch(me){var O=me.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var re="Error in function "+O.split(`
`)[0].split("<")[0]+": "+me.message;if(!kt.console)throw new Error(re);kt.console.error(re,me),kt.alert&&alert(re)}},y.foo.bar=y,y.foo},sr=function(y,O){var re,me,ke,Ee,Ze,Qe,it,Ot,Rt;if(ke=(O=O||{}).sourceEncoding||"Unicode",Ze=O.outputEncoding,(O.autoencode||Ze)&&cs[Ct].metadata&&cs[Ct].metadata[ke]&&cs[Ct].metadata[ke].encoding&&(Ee=cs[Ct].metadata[ke].encoding,!Ze&&cs[Ct].encoding&&(Ze=cs[Ct].encoding),!Ze&&Ee.codePages&&(Ze=Ee.codePages[0]),typeof Ze=="string"&&(Ze=Ee[Ze]),Ze)){for(it=!1,Qe=[],re=0,me=y.length;re<me;re++)(Ot=Ze[y.charCodeAt(re)])?Qe.push(String.fromCharCode(Ot)):Qe.push(y[re]),Qe[re].charCodeAt(0)>>8&&(it=!0);y=Qe.join("")}for(re=y.length;it===void 0&&re!==0;)y.charCodeAt(re-1)>>8&&(it=!0),re--;if(!it)return y;for(Qe=O.noBOM?[]:[254,255],re=0,me=y.length;re<me;re++){if((Rt=(Ot=y.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(Rt),Qe.push(Ot-(Rt<<8))}return String.fromCharCode.apply(void 0,Qe)},js=g.__private__.pdfEscape=g.pdfEscape=function(y,O){return sr(y,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ur=g.__private__.beginPage=function(y){je[++Is]=[],Pt[Is]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},wn(Is),G(je[E])},di=function(y,O){var re,me,ke;switch(r=O||r,typeof y=="string"&&(re=S(y.toLowerCase()),Array.isArray(re)&&(me=re[0],ke=re[1])),Array.isArray(y)&&(me=y[0]*Ke,ke=y[1]*Ke),isNaN(me)&&(me=i[0],ke=i[1]),(me>14400||ke>14400)&&(As.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),ke=Math.min(14400,ke)),i=[me,ke],r.substr(0,1)){case"l":ke>me&&(i=[ke,me]);break;case"p":me>ke&&(i=[ke,me])}ur(i),zo(mi),Z(on),so!==0&&Z(so+" J"),Zr!==0&&Z(Zr+" j"),as.publish("addPage",{pageNumber:Is})},En=function(y){y>0&&y<=Is&&(je.splice(y,1),Pt.splice(y,1),Is--,E>Is&&(E=Is),this.setPage(E))},wn=function(y){y>0&&y<=Is&&(E=y)},Rs=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return je.length-1},Hn=function(y,O,re){var me,ke=void 0;return re=re||{},y=y!==void 0?y:cs[Ct].fontName,O=O!==void 0?O:cs[Ct].fontStyle,me=y.toLowerCase(),ds[me]!==void 0&&ds[me][O]!==void 0?ke=ds[me][O]:ds[y]!==void 0&&ds[y][O]!==void 0?ke=ds[y][O]:re.disableWarning===!1&&As.warn("Unable to look up font label for font '"+y+"', '"+O+"'. Refer to getFontList() for available fonts."),ke||re.noFallback||(ke=ds.times[O])==null&&(ke=ds.times.normal),ke},Ga=g.__private__.putInfo=function(){var y=us(),O=function(me){return me};for(var re in x!==null&&(O=rr.encryptor(y,0)),Z("<<"),Z("/Producer ("+js(O("jsPDF "+_t.version))+")"),xt)xt.hasOwnProperty(re)&&xt[re]&&Z("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+js(O(xt[re]))+")");Z("/CreationDate ("+js(O(he))+")"),Z(">>"),Z("endobj")},aa=g.__private__.putCatalog=function(y){var O=(y=y||{}).rootDictionaryObjId||Rr;switch(us(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+O+" 0 R"),ze||(ze="fullwidth"),ze){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+ze;re.substr(re.length-1)==="%"&&(ze=parseInt(ze)/100),typeof ze=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+ue(ze)+"]")}switch(yt||(yt="continuous"),yt){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}pt&&Z("/PageMode /"+pt),as.publish("putCatalog"),Z(">>"),Z("endobj")},Yi=g.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(se+1)),Z("/Root "+se+" 0 R"),Z("/Info "+(se-1)+" 0 R"),x!==null&&Z("/Encrypt "+rr.oid+" 0 R"),Z("/ID [ <"+pe+"> <"+pe+"> ]"),Z(">>")},Ya=g.__private__.putHeader=function(){Z("%PDF-"+k),Z("%ºß¬à")},Ki=g.__private__.putXRef=function(){var y="0000000000";Z("xref"),Z("0 "+(se+1)),Z("0000000000 65535 f ");for(var O=1;O<=se;O++)typeof X[O]=="function"?Z((y+X[O]()).slice(-10)+" 00000 n "):X[O]!==void 0?Z((y+X[O]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},In=g.__private__.buildDocument=function(){Ye(),G(le),as.publish("buildDocument"),Ya(),rt(),yn(),vr(),x!==null&&tr(),Ga(),aa();var y=ce;return Ki(),Yi(),Z("startxref"),Z(""+y),Z("%%EOF"),G(je[E]),le.join(`
`)},ia=g.__private__.getBlob=function(y){return new Blob([Be(y)],{type:"application/pdf"})},ja=g.output=g.__private__.output=Jt(function(y,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",y){case void 0:return In();case"save":g.save(O.filename);break;case"arraybuffer":return Be(In());case"blob":return ia(In());case"bloburi":case"bloburl":if(kt.URL!==void 0&&typeof kt.URL.createObjectURL=="function")return kt.URL&&kt.URL.createObjectURL(ia(In()))||void 0;As.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",me=In();try{re=zu(me)}catch{re=zu(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+O.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ee=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(ke=O.pdfObjectUrl,Ee="");var Ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Ee+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",Qe=kt.open();return Qe!==null&&Qe.document.write(Ze),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',Ot=kt.open();if(Ot!==null){Ot.document.write(it);var Rt=this;Ot.document.documentElement.querySelector("#pdfViewer").onload=function(){Ot.document.title=O.filename,Ot.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Rt.output("bloburl"))}}return Ot}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ss='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Ps=kt.open();if(Ps!==null&&(Ps.document.write(ss),Ps.document.title=O.filename),Ps||typeof safari>"u")return Ps;break;case"datauri":case"dataurl":return kt.document.location.href=this.output("datauristring",O);default:return null}}),ui=function(y){return Array.isArray(ra)===!0&&ra.indexOf(y)>-1};switch(a){case"pt":Ke=1;break;case"mm":Ke=72/25.4;break;case"cm":Ke=72/2.54;break;case"in":Ke=72;break;case"px":Ke=ui("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ke=12;break;case"ex":Ke=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Ke=a}var rr=null;fe(),ie();var Do=function(y){return x!==null?rr.encryptor(y,0):function(O){return O}},hi=g.__private__.getPageInfo=g.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pt[y].objId,pageNumber:y,pageContext:Pt[y]}},It=g.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in Pt)if(Pt[O].objId===y)break;return hi(O)},Mt=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Pt[E].objId,pageNumber:E,pageContext:Pt[E]}};g.addPage=function(){return di.apply(this,arguments),this},g.setPage=function(){return wn.apply(this,arguments),G.call(this,je[E]),this},g.insertPage=function(y){return this.addPage(),this.movePage(E,y),this},g.movePage=function(y,O){var re,me;if(y>O){re=je[y],me=Pt[y];for(var ke=y;ke>O;ke--)je[ke]=je[ke-1],Pt[ke]=Pt[ke-1];je[O]=re,Pt[O]=me,this.setPage(O)}else if(y<O){re=je[y],me=Pt[y];for(var Ee=y;Ee<O;Ee++)je[Ee]=je[Ee+1],Pt[Ee]=Pt[Ee+1];je[O]=re,Pt[O]=me,this.setPage(O)}return this},g.deletePage=function(){return En.apply(this,arguments),this},g.__private__.text=g.text=function(y,O,re,me,ke){var Ee,Ze,Qe,it,Ot,Rt,ss,Ps,Ms,Ys=(me=me||{}).scope||this;if(typeof y=="number"&&typeof O=="number"&&(typeof re=="string"||Array.isArray(re))){var Pr=re;re=O,O=y,y=Pr}if(arguments[3]instanceof ft?(ee("The transform parameter of text() with a Matrix value"),Ms=ke):(Qe=arguments[4],it=arguments[5],ws(ss=arguments[3])==="object"&&ss!==null||(typeof Qe=="string"&&(it=Qe,Qe=null),typeof ss=="string"&&(it=ss,ss=null),typeof ss=="number"&&(Qe=ss,ss=null),me={flags:ss,angle:Qe,align:it})),isNaN(O)||isNaN(re)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Ys;var nr="",Rn=!1,Ds=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:Xa,Or=Ys.internal.scaleFactor;function Uo(ms){return ms=ms.split("	").join(Array(me.TabLen||9).join(" ")),js(ms,ss)}function ln(ms){for(var ps,Vs=ms.concat(),gs=[],Gn=Vs.length;Gn--;)typeof(ps=Vs.shift())=="string"?gs.push(ps):Array.isArray(ms)&&(ps.length===1||ps[1]===void 0&&ps[2]===void 0)?gs.push(ps[0]):gs.push([ps[0],ps[1],ps[2]]);return gs}function io(ms,ps){var Vs;if(typeof ms=="string")Vs=ps(ms)[0];else if(Array.isArray(ms)){for(var gs,Gn,ji=ms.concat(),Yn=[],Wo=ji.length;Wo--;)typeof(gs=ji.shift())=="string"?Yn.push(ps(gs)[0]):Array.isArray(gs)&&typeof gs[0]=="string"&&(Gn=ps(gs[0],gs[1],gs[2]),Yn.push([Gn[0],Gn[1],Gn[2]]));Vs=Yn}return Vs}var Mn=!1,oo=!0;if(typeof y=="string")Mn=!0;else if(Array.isArray(y)){var ca=y.concat();Ze=[];for(var ei,Ks=ca.length;Ks--;)(typeof(ei=ca.shift())!="string"||Array.isArray(ei)&&typeof ei[0]!="string")&&(oo=!1);Mn=oo}if(Mn===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var yi=Ie/Ys.internal.scaleFactor,cn=yi*(Ds-1);switch(me.baseline){case"bottom":re-=cn;break;case"top":re+=yi-cn;break;case"hanging":re+=yi-2*cn;break;case"middle":re+=yi/2-cn}if((Rt=me.maxWidth||0)>0&&(typeof y=="string"?y=Ys.splitTextToSize(y,Rt):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(ms,ps){return ms.concat(Ys.splitTextToSize(ps,Rt))},[]))),Ee={text:y,x:O,y:re,options:me,mutex:{pdfEscape:js,activeFontKey:Ct,fonts:cs,activeFontSize:Ie}},as.publish("preProcessText",Ee),y=Ee.text,Qe=(me=Ee.options).angle,!(Ms instanceof ft)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,me.rotationDirection===0&&(Qe=-Qe),B===P.ADVANCED&&(Qe=-Qe);var da=Math.cos(Qe),lo=Math.sin(Qe);Ms=new ft(da,lo,-lo,da,0,0)}else Qe&&Qe instanceof ft&&(Ms=Qe);B!==P.ADVANCED||Ms||(Ms=vn),(Ot=me.charSpace||pi)!==void 0&&(nr+=ae(q(Ot))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ps=me.horizontalScale)!==void 0&&(nr+=ae(100*Ps)+` Tz
`),me.lang;var Lr=-1,El=me.renderingMode!==void 0?me.renderingMode:me.stroke,dn=Ys.internal.getCurrentPageInfo().pageContext;switch(El){case 0:case!1:case"fill":Lr=0;break;case 1:case!0:case"stroke":Lr=1;break;case 2:case"fillThenStroke":Lr=2;break;case 3:case"invisible":Lr=3;break;case 4:case"fillAndAddForClipping":Lr=4;break;case 5:case"strokeAndAddPathForClipping":Lr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Lr=6;break;case 7:case"addToPathForClipping":Lr=7}var Ho=dn.usedRenderingMode!==void 0?dn.usedRenderingMode:-1;Lr!==-1?nr+=Lr+` Tr
`:Ho!==-1&&(nr+=`0 Tr
`),Lr!==-1&&(dn.usedRenderingMode=Lr),it=me.align||"left";var yr,bi=Ie*Ds,_n=Ys.internal.pageSize.getWidth(),ti=cs[Ct];Ot=me.charSpace||pi,Rt=me.maxWidth||0,ss=Object.assign({autoencode:!0,noBOM:!0},me.flags);var ua=[],ha=function(ms){return Ys.getStringUnitWidth(ms,{font:ti,charSpace:Ot,fontSize:Ie,doKerning:!1})*Ie/Or};if(Object.prototype.toString.call(y)==="[object Array]"){var br;Ze=ln(y),it!=="left"&&(yr=Ze.map(ha));var wr,On=0;if(it==="right"){O-=yr[0],y=[],Ks=Ze.length;for(var Gr=0;Gr<Ks;Gr++)Gr===0?(wr=Gs(O),br=an(re)):(wr=q(On-yr[Gr]),br=-bi),y.push([Ze[Gr],wr,br]),On=yr[Gr]}else if(it==="center"){O-=yr[0]/2,y=[],Ks=Ze.length;for(var Sn=0;Sn<Ks;Sn++)Sn===0?(wr=Gs(O),br=an(re)):(wr=q((On-yr[Sn])/2),br=-bi),y.push([Ze[Sn],wr,br]),On=yr[Sn]}else if(it==="left"){y=[],Ks=Ze.length;for(var Aa=0;Aa<Ks;Aa++)y.push(Ze[Aa])}else if(it==="justify"&&ti.encoding==="Identity-H"){y=[],Ks=Ze.length,Rt=Rt!==0?Rt:_n;for(var Wn=0,Ws=0;Ws<Ks;Ws++)if(br=Ws===0?an(re):-bi,wr=Ws===0?Gs(O):Wn,Ws<Ks-1){var Ta=q((Rt-yr[Ws])/(Ze[Ws].split(" ").length-1)),Dr=Ze[Ws].split(" ");y.push([Dr[0]+" ",wr,br]),Wn=0;for(var un=1;un<Dr.length;un++){var wi=(ha(Dr[un-1]+" "+Dr[un])-ha(Dr[un]))*Or+Ta;un==Dr.length-1?y.push([Dr[un],wi,0]):y.push([Dr[un]+" ",wi,0]),Wn-=wi}}else y.push([Ze[Ws],wr,br]);y.push(["",Wn,0])}else{if(it!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],Ks=Ze.length,Rt=Rt!==0?Rt:_n,Ws=0;Ws<Ks;Ws++)br=Ws===0?an(re):-bi,wr=Ws===0?Gs(O):0,Ws<Ks-1?ua.push(ae(q((Rt-yr[Ws])/(Ze[Ws].split(" ").length-1)))):ua.push(0),y.push([Ze[Ws],wr,br])}}var co=typeof me.R2L=="boolean"?me.R2L:nt;co===!0&&(y=io(y,function(ms,ps,Vs){return[ms.split("").reverse().join(""),ps,Vs]})),Ee={text:y,x:O,y:re,options:me,mutex:{pdfEscape:js,activeFontKey:Ct,fonts:cs,activeFontSize:Ie}},as.publish("postProcessText",Ee),y=Ee.text,Rn=Ee.mutex.isHex||!1;var uo=cs[Ct].encoding;uo!=="WinAnsiEncoding"&&uo!=="StandardEncoding"||(y=io(y,function(ms,ps,Vs){return[Uo(ms),ps,Vs]})),Ze=ln(y),y=[];for(var Ar,Vn,Ea,Zn=0,Ni=1,Ia=Array.isArray(Ze[0])?Ni:Zn,Ra="",fa=function(ms,ps,Vs){var gs="";return Vs instanceof ft?(Vs=typeof me.angle=="number"?rn(Vs,new ft(1,0,0,1,ms,ps)):rn(new ft(1,0,0,1,ms,ps),Vs),B===P.ADVANCED&&(Vs=rn(new ft(1,0,0,-1,0,0),Vs)),gs=Vs.join(" ")+` Tm
`):gs=ae(ms)+" "+ae(ps)+` Td
`,gs},kn=0;kn<Ze.length;kn++){switch(Ra="",Ia){case Ni:Ea=(Rn?"<":"(")+Ze[kn][0]+(Rn?">":")"),Ar=parseFloat(Ze[kn][1]),Vn=parseFloat(Ze[kn][2]);break;case Zn:Ea=(Rn?"<":"(")+Ze[kn]+(Rn?">":")"),Ar=Gs(O),Vn=an(re)}ua!==void 0&&ua[kn]!==void 0&&(Ra=ua[kn]+` Tw
`),kn===0?y.push(Ra+fa(Ar,Vn,Ms)+Ea):Ia===Zn?y.push(Ra+Ea):Ia===Ni&&y.push(Ra+fa(Ar,Vn,Ms)+Ea)}y=Ia===Zn?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var Nr=`BT
/`;return Nr+=Ct+" "+Ie+` Tf
`,Nr+=ae(Ie*Ds)+` TL
`,Nr+=Ca+`
`,Nr+=nr,Nr+=y,Z(Nr+="ET"),b[Ct]=!0,Ys};var Nn=g.__private__.clip=g.clip=function(y){return Z(y==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Nn("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Z("n"),this};var Qt=g.__private__.isValidStyle=function(y){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(O=!0),O};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(y){return Qt(y)&&(m=y),this};var Ji=g.__private__.getStyle=g.getStyle=function(y){var O=m;switch(y){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=y}return O},fi=g.close=function(){return Z("h"),this};g.stroke=function(){return Z("S"),this},g.fill=function(y){return _a("f",y),this},g.fillEvenOdd=function(y){return _a("f*",y),this},g.fillStroke=function(y){return _a("B",y),this},g.fillStrokeEvenOdd=function(y){return _a("B*",y),this};var _a=function(y,O){ws(O)==="object"?Xi(O,y):Z(y)},Ka=function(y){y===null||B===P.ADVANCED&&y===void 0||(y=Ji(y),Z(y))};function oa(y,O,re,me,ke){var Ee=new ll(O||this.boundingBox,re||this.xStep,me||this.yStep,this.gState,ke||this.matrix);Ee.stream=this.stream;var Ze=y+"$$"+this.cloneIndex+++"$$";return kr(Ze,Ee),Ee}var Xi=function(y,O){var re=sa[y.key],me=Yt[re];if(me instanceof yo)Z("q"),Z(Ja(O)),me.gState&&g.setGState(me.gState),Z(y.matrix.toString()+" cm"),Z("/"+re+" sh"),Z("Q");else if(me instanceof ll){var ke=new ft(1,0,0,-1,0,La());y.matrix&&(ke=ke.multiply(y.matrix||vn),re=oa.call(me,y.key,y.boundingBox,y.xStep,y.yStep,ke).id),Z("q"),Z("/Pattern cs"),Z("/"+re+" scn"),me.gState&&g.setGState(me.gState),Z(O),Z("Q")}},Ja=function(y){switch(y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Hs=g.moveTo=function(y,O){return Z(ae(q(y))+" "+ae(Y(O))+" m"),this},nn=g.lineTo=function(y,O){return Z(ae(q(y))+" "+ae(Y(O))+" l"),this},la=g.curveTo=function(y,O,re,me,ke,Ee){return Z([ae(q(y)),ae(Y(O)),ae(q(re)),ae(Y(me)),ae(q(ke)),ae(Y(Ee)),"c"].join(" ")),this};g.__private__.line=g.line=function(y,O,re,me,ke){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(me)||!Qt(ke))throw new Error("Invalid arguments passed to jsPDF.line");return B===P.COMPAT?this.lines([[re-y,me-O]],y,O,[1,1],ke||"S"):this.lines([[re-y,me-O]],y,O,[1,1]).stroke()},g.__private__.lines=g.lines=function(y,O,re,me,ke,Ee){var Ze,Qe,it,Ot,Rt,ss,Ps,Ms,Ys,Pr,nr,Rn;if(typeof y=="number"&&(Rn=re,re=O,O=y,y=Rn),me=me||[1,1],Ee=Ee||!1,isNaN(O)||isNaN(re)||!Array.isArray(y)||!Array.isArray(me)||!Qt(ke)||typeof Ee!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hs(O,re),Ze=me[0],Qe=me[1],Ot=y.length,Pr=O,nr=re,it=0;it<Ot;it++)(Rt=y[it]).length===2?(Pr=Rt[0]*Ze+Pr,nr=Rt[1]*Qe+nr,nn(Pr,nr)):(ss=Rt[0]*Ze+Pr,Ps=Rt[1]*Qe+nr,Ms=Rt[2]*Ze+Pr,Ys=Rt[3]*Qe+nr,Pr=Rt[4]*Ze+Pr,nr=Rt[5]*Qe+nr,la(ss,Ps,Ms,Ys,Pr,nr));return Ee&&fi(),Ka(ke),this},g.path=function(y){for(var O=0;O<y.length;O++){var re=y[O],me=re.c;switch(re.op){case"m":Hs(me[0],me[1]);break;case"l":nn(me[0],me[1]);break;case"c":la.apply(this,me);break;case"h":fi()}}return this},g.__private__.rect=g.rect=function(y,O,re,me,ke){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(me)||!Qt(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return B===P.COMPAT&&(me=-me),Z([ae(q(y)),ae(Y(O)),ae(q(re)),ae(q(me)),"re"].join(" ")),Ka(ke),this},g.__private__.triangle=g.triangle=function(y,O,re,me,ke,Ee,Ze){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(me)||isNaN(ke)||isNaN(Ee)||!Qt(Ze))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-y,me-O],[ke-re,Ee-me],[y-ke,O-Ee]],y,O,[1,1],Ze,!0),this},g.__private__.roundedRect=g.roundedRect=function(y,O,re,me,ke,Ee,Ze){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(me)||isNaN(ke)||isNaN(Ee)||!Qt(Ze))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*re),Ee=Math.min(Ee,.5*me),this.lines([[re-2*ke,0],[ke*Qe,0,ke,Ee-Ee*Qe,ke,Ee],[0,me-2*Ee],[0,Ee*Qe,-ke*Qe,Ee,-ke,Ee],[2*ke-re,0],[-ke*Qe,0,-ke,-Ee*Qe,-ke,-Ee],[0,2*Ee-me],[0,-Ee*Qe,ke*Qe,-Ee,ke,-Ee]],y+ke,O,[1,1],Ze,!0),this},g.__private__.ellipse=g.ellipse=function(y,O,re,me,ke){if(isNaN(y)||isNaN(O)||isNaN(re)||isNaN(me)||!Qt(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ee=4/3*(Math.SQRT2-1)*re,Ze=4/3*(Math.SQRT2-1)*me;return Hs(y+re,O),la(y+re,O-Ze,y+Ee,O-me,y,O-me),la(y-Ee,O-me,y-re,O-Ze,y-re,O),la(y-re,O+Ze,y-Ee,O+me,y,O+me),la(y+Ee,O+me,y+re,O+Ze,y+re,O),Ka(ke),this},g.__private__.circle=g.circle=function(y,O,re,me){if(isNaN(y)||isNaN(O)||isNaN(re)||!Qt(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,O,re,re,me)},g.setFont=function(y,O,re){return re&&(O=ge(O,re)),Ct=Hn(y,O,{disableWarning:!1}),this};var Fo=g.__private__.getFont=g.getFont=function(){return cs[Hn.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var y,O,re={};for(y in ds)if(ds.hasOwnProperty(y))for(O in re[y]=[],ds[y])ds[y].hasOwnProperty(O)&&re[y].push(O);return re},g.addFont=function(y,O,re,me,ke){var Ee=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ee.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Ee.indexOf(arguments[3])==-1&&(re=ge(re,me)),ke=ke||"Identity-H",Un.call(this,y,O,re,ke)};var Xa,mi=s.lineWidth||.200025,Sa=g.__private__.getLineWidth=g.getLineWidth=function(){return mi},zo=g.__private__.setLineWidth=g.setLineWidth=function(y){return mi=y,Z(ae(q(y))+" w"),this};g.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(y,O){if(y=y||[],O=O||0,isNaN(O)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(re){return ae(q(re))}).join(" "),O=ae(q(O)),Z("["+y+"] "+O+" d"),this};var Qi=g.__private__.getLineHeight=g.getLineHeight=function(){return Ie*Xa};g.__private__.getLineHeight=g.getLineHeight=function(){return Ie*Xa};var Zt=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(Xa=y),this},Bo=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Xa};Zt(s.lineHeight);var Gs=g.__private__.getHorizontalCoordinate=function(y){return q(y)},an=g.__private__.getVerticalCoordinate=function(y){return B===P.ADVANCED?y:Pt[E].mediaBox.topRightY-Pt[E].mediaBox.bottomLeftY-q(y)},qo=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(y){return ae(Gs(y))},ka=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(y){return ae(an(y))},on=s.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return xr(on)},g.__private__.setStrokeColor=g.setDrawColor=function(y,O,re,me){return on=Wr({ch1:y,ch2:O,ch3:re,ch4:me,pdfColorType:"draw",precision:2}),Z(on),this};var eo=s.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return xr(eo)},g.__private__.setFillColor=g.setFillColor=function(y,O,re,me){return eo=Wr({ch1:y,ch2:O,ch3:re,ch4:me,pdfColorType:"fill",precision:2}),Z(eo),this};var Ca=s.textColor||"0 g",Tl=g.__private__.getTextColor=g.getTextColor=function(){return xr(Ca)};g.__private__.setTextColor=g.setTextColor=function(y,O,re,me){return Ca=Wr({ch1:y,ch2:O,ch3:re,ch4:me,pdfColorType:"text",precision:3}),this};var pi=s.charSpace,to=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(pi||0)};g.__private__.setCharSpace=g.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return pi=y,this};var so=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(y){var O=g.CapJoinStyles[y];if(O===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return so=O,Z(O+" J"),this};var Zr=0;g.__private__.setLineJoin=g.setLineJoin=function(y){var O=g.CapJoinStyles[y];if(O===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zr=O,Z(O+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(ae(q(y))+" M"),this},g.GState=id,g.setGState=function(y){(y=typeof y=="string"?Ns[Ur[y]]:$o(null,y)).equals(xn)||(Z("/"+y.id+" gs"),xn=y)};var $o=function(y,O){if(!y||!Ur[y]){var re=!1;for(var me in Ns)if(Ns.hasOwnProperty(me)&&Ns[me].equals(O)){re=!0;break}if(re)O=Ns[me];else{var ke="GS"+(Object.keys(Ns).length+1).toString(10);Ns[ke]=O,O.id=ke}return y&&(Ur[y]=O.id),as.publish("addGState",O),O}};g.addGState=function(y,O){return $o(y,O),this},g.saveGraphicsState=function(){return Z("q"),_r.push({key:Ct,size:Ie,color:Ca}),this},g.restoreGraphicsState=function(){Z("Q");var y=_r.pop();return Ct=y.key,Ie=y.size,Ca=y.color,xn=null,this},g.setCurrentTransformationMatrix=function(y){return Z(y.toString()+" cm"),this},g.comment=function(y){return Z("#"+y),this};var Qa=function(y,O){var re=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Ee){isNaN(Ee)||(re=parseFloat(Ee))}});var me=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Ee){isNaN(Ee)||(me=parseFloat(Ee))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Ee){ke=Ee.toString()}}),this},jn=function(y,O,re,me){Qa.call(this,y,O),this.type="rect";var ke=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(Ze){isNaN(Ze)||(ke=parseFloat(Ze))}});var Ee=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ee},set:function(Ze){isNaN(Ze)||(Ee=parseFloat(Ze))}}),this},gi=function(){this.page=Is,this.currentPage=E,this.pages=je.slice(0),this.pagesContext=Pt.slice(0),this.x=dr,this.y=Gt,this.matrix=gr,this.width=Pa(E),this.height=La(E),this.outputDestination=De,this.id="",this.objectNumber=-1};gi.prototype.restore=function(){Is=this.page,E=this.currentPage,Pt=this.pagesContext,je=this.pages,dr=this.x,Gt=this.y,gr=this.matrix,vi(E,this.width),ao(E,this.height),De=this.outputDestination};var ro=function(y,O,re,me,ke){Sr.push(new gi),Is=E=0,je=[],dr=y,Gt=O,gr=ke,ur([re,me])},no=function(y){if(Hr[y])Sr.pop().restore();else{var O=new gi,re="Xo"+(Object.keys(er).length+1).toString(10);O.id=re,Hr[y]=re,er[re]=O,as.publish("addFormObject",O),Sr.pop().restore()}};for(var xi in g.beginFormObject=function(y,O,re,me,ke){return ro(y,O,re,me,ke),this},g.endFormObject=function(y){return no(y),this},g.doFormObject=function(y,O){var re=er[Hr[y]];return Z("q"),Z(O.toString()+" cm"),Z("/"+re.id+" Do"),Z("Q"),this},g.getFormObject=function(y){var O=er[Hr[y]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},g.save=function(y,O){return y=y||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(vo(ia(In()),y),typeof vo.unload=="function"&&kt.setTimeout&&setTimeout(vo.unload,911),this):new Promise(function(re,me){try{var ke=vo(ia(In()),y);typeof vo.unload=="function"&&kt.setTimeout&&setTimeout(vo.unload,911),re(ke)}catch(Ee){me(Ee.message)}})},_t.API)_t.API.hasOwnProperty(xi)&&(xi==="events"&&_t.API.events.length?function(y,O){var re,me,ke;for(ke=O.length-1;ke!==-1;ke--)re=O[ke][0],me=O[ke][1],y.subscribe.apply(y,[re].concat(typeof me=="function"?[me]:me))}(as,_t.API.events):g[xi]=_t.API[xi]);var Pa=g.getPageWidth=function(y){return(Pt[y=y||E].mediaBox.topRightX-Pt[y].mediaBox.bottomLeftX)/Ke},vi=g.setPageWidth=function(y,O){Pt[y].mediaBox.topRightX=O*Ke+Pt[y].mediaBox.bottomLeftX},La=g.getPageHeight=function(y){return(Pt[y=y||E].mediaBox.topRightY-Pt[y].mediaBox.bottomLeftY)/Ke},ao=g.setPageHeight=function(y,O){Pt[y].mediaBox.topRightY=O*Ke+Pt[y].mediaBox.bottomLeftY};return g.internal={pdfEscape:js,getStyle:Ji,getFont:Fo,getFontSize:Ge,getCharSpace:to,getTextColor:Tl,getLineHeight:Qi,getLineHeightFactor:Bo,getLineWidth:Sa,write:Fe,getHorizontalCoordinate:Gs,getVerticalCoordinate:an,getCoordinateString:qo,getVerticalCoordinateString:ka,collections:{},newObject:us,newAdditionalObject:na,newObjectDeferred:Je,newObjectDeferredBegin:Cr,getFilters:ve,putStream:Oe,events:as,scaleFactor:Ke,pageSize:{getWidth:function(){return Pa(E)},setWidth:function(y){vi(E,y)},getHeight:function(){return La(E)},setHeight:function(y){ao(E,y)}},encryptionOptions:x,encryption:rr,getEncryptor:Do,output:ja,getNumberOfPages:Rs,pages:je,out:Z,f2:ue,f3:I,getPageInfo:hi,getPageInfoByObjId:It,getCurrentPageInfo:Mt,getPDFVersion:j,Point:Qa,Rectangle:jn,Matrix:ft,hasHotfix:ui},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Pa(E)},set:function(y){vi(E,y)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return La(E)},set:function(y){ao(E,y)},enumerable:!0,configurable:!0}),St.call(g,_e),Ct="F1",di(i,r),as.publish("initialized"),g}il.prototype.lsbFirstWord=function(s){return String.fromCharCode(s>>0&255,s>>8&255,s>>16&255,s>>24&255)},il.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},il.prototype.hexToBytes=function(s){for(var t=[],r=0;r<s.length;r+=2)t.push(String.fromCharCode(parseInt(s.substr(r,2),16)));return t.join("")},il.prototype.processOwnerPassword=function(s,t){return qu(Bu(t).substr(0,5),s)},il.prototype.encryptor=function(s,t){var r=Bu(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return qu(r,a)}},id.prototype.equals=function(s){var t,r="id,objectNumber,equals";if(!s||ws(s)!==ws(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;a++}for(t in s)s.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},_t.API={events:[]},_t.version="3.0.1";var Xs=_t.API,Bh=1,Oo=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nl=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bt=function(s){return s.toFixed(2)},Ii=function(s){return s.toFixed(5)};Xs.__acroform__={};var Tn=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},om=function(s){return s*Bh},Fa=function(s){var t=new tx,r=dt.internal.getHeight(s)||0,a=dt.internal.getWidth(s)||0;return t.BBox=[0,0,Number(Bt(a)),Number(Bt(r))],t},mN=Xs.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|=1<<t},pN=Xs.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&=~(1<<t)},gN=Xs.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(s&1<<t)==0?0:1},ir=Xs.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gN(s,t-1)},or=Xs.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return mN(s,t-1)},lr=Xs.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return pN(s,t-1)},xN=Xs.__acroform__.calculateCoordinates=function(s,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,i=s[0],o=s[1],c=s[2],h=s[3],u={};return u.lowerLeft_X=r(i)||0,u.lowerLeft_Y=a(o+h)||0,u.upperRight_X=r(i+c)||0,u.upperRight_Y=a(o)||0,[Number(Bt(u.lowerLeft_X)),Number(Bt(u.lowerLeft_Y)),Number(Bt(u.upperRight_X)),Number(Bt(u.upperRight_Y))]},vN=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],r=s._V||s.DV,a=$u(s,r),i=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+i+" "+Bt(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Fa(s);return o.scope=s.scope,o.stream=t.join(`
`),o}},$u=function(s,t){var r=s.fontSize===0?s.maxFontSize:s.fontSize,a={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=s.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var o=r,c=dt.internal.getHeight(s)||0;c=c<0?-c:c;var h=dt.internal.getWidth(s)||0;h=h<0?-h:h;var u=function(I,q,ne){if(I+1<i.length){var Y=q+" "+i[I+1][0];return Ic(Y,s,ne).width<=h-4}return!1};o++;e:for(;o>0;){t="",o--;var m,x,v=Ic("3",s,o).height,b=s.multiline?c-o:(c-v)/2,g=b+=2,k=0,j=0,T=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ic(t,s,o=12).width+", FieldWidth:"+h+`
`;break}for(var S="",P=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var U=!1;if(i[B].length!==1&&T!==i[B].length-1){if((v+2)*(P+2)+2>c)continue e;S+=i[B][T],U=!0,j=B,B--}else{S=(S+=i[B][T]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var Q=parseInt(B),ge=u(Q,S,o),ae=B>=i.length-1;if(ge&&!ae){S+=" ",T=0;continue}if(ge||ae){if(ae)j=Q;else if(s.multiline&&(v+2)*(P+2)+2>c)continue e}else{if(!s.multiline||(v+2)*(P+2)+2>c)continue e;j=Q}}for(var ee="",K=k;K<=j;K++){var ue=i[K];if(s.multiline){if(K===j){ee+=ue[T]+" ",T=(T+1)%ue.length;continue}if(K===k){ee+=ue[ue.length-1]+" ";continue}}ee+=ue[0]+" "}switch(ee=ee.substr(ee.length-1)==" "?ee.substr(0,ee.length-1):ee,x=Ic(ee,s,o).width,s.textAlign){case"right":m=h-x-2;break;case"center":m=(h-x)/2;break;case"left":default:m=2}t+=Bt(m)+" "+Bt(g)+` Td
`,t+="("+Oo(ee)+`) Tj
`,t+=-Bt(m)+` 0 Td
`,g=-(o+2),x=0,k=U?j:j+1,P++,S=""}break}return a.text=t,a.fontSize=o,a},Ic=function(s,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(s,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},yN={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bN=function(s,t){var r={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(r)},wN=function(s,t){for(var r in s)if(s.hasOwnProperty(r)){var a=r,i=s[r];t.internal.newObjectDeferredBegin(i.objId,!0),ws(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete s[a]}},NN=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(wa.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(yN)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Bh=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new sx,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];o.objId=void 0,o.hasAnnotation&&bN(o,r)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(r){(function(a,i){var o=!a;for(var c in a||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(c)){var h=a[c],u=[],m=h.Rect;if(h.Rect&&(h.Rect=xN(h.Rect,i)),i.internal.newObjectDeferredBegin(h.objId,!0),h.DA=dt.createDefaultAppearanceStream(h),ws(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(u=h.getKeyValueListForStream()),h.Rect=m,h.hasAppearanceStream&&!h.appearanceStreamContent){var x=vN(h);u.push({key:"AP",value:"<</N "+x+">>"}),i.internal.acroformPlugin.xForms.push(x)}if(h.appearanceStreamContent){var v="";for(var b in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(b)){var g=h.appearanceStreamContent[b];if(v+="/"+b+" ",v+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var c in g)if(g.hasOwnProperty(c)){var k=g[c];typeof k=="function"&&(k=k.call(i,h)),v+="/"+c+" "+k+" ",i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k)}}else typeof(k=g)=="function"&&(k=k.call(i,h)),v+="/"+c+" "+k,i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k);v+=">>"}u.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:h.objId}),i.internal.out("endobj")}o&&wN(i.internal.acroformPlugin.xForms,i)})(r,s)}),s.internal.acroformPlugin.isInitialized=!0}},ex=Xs.__acroform__.arrayToPdfArray=function(s,t,r){var a=function(c){return c};if(Array.isArray(s)){for(var i="[",o=0;o<s.length;o++)switch(o!==0&&(i+=" "),ws(s[o])){case"boolean":case"number":case"object":i+=s[o].toString();break;case"string":s[o].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),i+="("+Oo(a(s[o].toString()))+")"):i+=s[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},iu=function(s,t,r){var a=function(i){return i};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(s=s||"").toString(),s="("+Oo(a(s))+")"},$a=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$a.prototype.toString=function(){return this.objId+" 0 R"},$a.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},$a.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],i=this[a];i&&(Array.isArray(i)?s.push({key:a,value:ex(i,this.objId,this.scope)}):i instanceof $a?(i.scope=this.scope,s.push({key:a,value:i.objId+" 0 R"})):typeof i!="function"&&s.push({key:a,value:i}))}return s};var tx=function(){$a.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){s=r.trim()},get:function(){return s||null}})};Tn(tx,$a);var sx=function(){$a.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Oo(r(s))+")"}},set:function(r){s=r}})};Tn(sx,$a);var wa=function s(){$a.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ir(t,3)},set:function(S){S?this.F=or(t,3):this.F=lr(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(S){a=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(S){a[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(S){a[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(S){a[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(S){a[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof od)return;o="FieldObject"+s.FieldNum++}var S=function(P){return P};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Oo(S(o))+")"},set:function(S){o=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(S){o=S}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(S){h=S}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(S){u=S}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/Bh:m},set:function(S){m=S}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(S){x=S}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof od||this instanceof jo))return iu(v,this.objId,this.scope)},set:function(S){S=S.toString(),v=S}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ir?b:iu(b,this.objId,this.scope)},set:function(S){S=S.toString(),b=this instanceof Ir?S:S.substr(0,1)==="("?nl(S.substr(1,S.length-2)):nl(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ir?nl(b.substr(1,b.length-1)):b},set:function(S){S=S.toString(),b=this instanceof Ir?"/"+S:S}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ir?g:iu(g,this.objId,this.scope)},set:function(S){S=S.toString(),g=this instanceof Ir?S:S.substr(0,1)==="("?nl(S.substr(1,S.length-2)):nl(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ir?nl(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof Ir?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(S){S=!!S,j=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(S){k=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,1)},set:function(S){S?this.Ff=or(this.Ff,1):this.Ff=lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,2)},set:function(S){S?this.Ff=or(this.Ff,2):this.Ff=lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,3)},set:function(S){S?this.Ff=or(this.Ff,3):this.Ff=lr(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');T=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(T){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};Tn(wa,$a);var dl=function(){wa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(r){s=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ex(t,this.objId,this.scope)},set:function(r){var a,i;i=[],typeof(a=r)=="string"&&(i=function(o,c,h){h||(h=1);for(var u,m=[];u=c.exec(o);)m.push(u[h]);return m}(a,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,18)},set:function(r){r?this.Ff=or(this.Ff,18):this.Ff=lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=or(this.Ff,19):this.Ff=lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,20)},set:function(r){r?(this.Ff=or(this.Ff,20),t.sort()):this.Ff=lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,22)},set:function(r){r?this.Ff=or(this.Ff,22):this.Ff=lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,23)},set:function(r){r?this.Ff=or(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,27)},set:function(r){r?this.Ff=or(this.Ff,27):this.Ff=lr(this.Ff,27)}}),this.hasAppearanceStream=!1};Tn(dl,wa);var ul=function(){dl.call(this),this.fontName="helvetica",this.combo=!1};Tn(ul,dl);var hl=function(){ul.call(this),this.combo=!0};Tn(hl,ul);var Uc=function(){hl.call(this),this.edit=!0};Tn(Uc,hl);var Ir=function(){wa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,15)},set:function(r){r?this.Ff=or(this.Ff,15):this.Ff=lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,16)},set:function(r){r?this.Ff=or(this.Ff,16):this.Ff=lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,17)},set:function(r){r?this.Ff=or(this.Ff,17):this.Ff=lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,26)},set:function(r){r?this.Ff=or(this.Ff,26):this.Ff=lr(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,i=[];for(a in i.push("<<"),t)i.push("/"+a+" ("+Oo(r(t[a]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){ws(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(r){s="/"+r}})};Tn(Ir,wa);var Hc=function(){Ir.call(this),this.pushButton=!0};Tn(Hc,Ir);var fl=function(){Ir.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};Tn(fl,Ir);var od=function(){var s,t;wa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(i){s=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(h){return h};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),a)c.push("/"+o+" ("+Oo(i(a[o]))+")");return c.push(">>"),c.join(`
`)},set:function(i){ws(i)==="object"&&(a=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(i){typeof i=="string"&&(a.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Tn(od,wa),fl.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=s.createAppearanceStream(r.optionName),r.caption=s.getCA()}},fl.prototype.createOption=function(s){var t=new od;return t.Parent=this,t.optionName=s,this.Kids.push(t),jN.call(this.scope,t),t};var Wc=function(){Ir.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dt.CheckBox.createAppearanceStream()};Tn(Wc,Ir);var jo=function(){wa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,13)},set:function(t){t?this.Ff=or(this.Ff,13):this.Ff=lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,21)},set:function(t){t?this.Ff=or(this.Ff,21):this.Ff=lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,23)},set:function(t){t?this.Ff=or(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,24)},set:function(t){t?this.Ff=or(this.Ff,24):this.Ff=lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,25)},set:function(t){t?this.Ff=or(this.Ff,25):this.Ff=lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,26)},set:function(t){t?this.Ff=or(this.Ff,26):this.Ff=lr(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Tn(jo,wa);var Vc=function(){jo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ir(this.Ff,14)},set:function(s){s?this.Ff=or(this.Ff,14):this.Ff=lr(this.Ff,14)}}),this.password=!0};Tn(Vc,jo);var dt={CheckBox:{createAppearanceStream:function(){return{N:{On:dt.CheckBox.YesNormal},D:{On:dt.CheckBox.YesPushDown,Off:dt.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=Fa(s);t.scope=s.scope;var r=[],a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,i=s.scope.__private__.encodeColorString(s.color),o=$u(s,s.caption);return r.push("0.749023 g"),r.push("0 0 "+Bt(dt.internal.getWidth(s))+" "+Bt(dt.internal.getHeight(s))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Bt(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(s){var t=Fa(s);t.scope=s.scope;var r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color),i=[],o=dt.internal.getHeight(s),c=dt.internal.getWidth(s),h=$u(s,s.caption);return i.push("1 g"),i.push("0 0 "+Bt(c)+" "+Bt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Bt(c-1)+" "+Bt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Bt(h.fontSize)+" Tf "+a),i.push(h.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(s){var t=Fa(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Bt(dt.internal.getWidth(s))+" "+Bt(dt.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:dt.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=dt.RadioButton.Circle.YesNormal,t.D[s]=dt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=Fa(s);t.scope=s.scope;var r=[],a=dt.internal.getWidth(s)<=dt.internal.getHeight(s)?dt.internal.getWidth(s)/4:dt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=dt.internal.Bezier_C,o=Number((a*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ii(dt.internal.getWidth(s)/2)+" "+Ii(dt.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Fa(s);t.scope=s.scope;var r=[],a=dt.internal.getWidth(s)<=dt.internal.getHeight(s)?dt.internal.getWidth(s)/4:dt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),o=Number((i*dt.internal.Bezier_C).toFixed(5)),c=Number((a*dt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ii(dt.internal.getWidth(s)/2)+" "+Ii(dt.internal.getHeight(s)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ii(dt.internal.getWidth(s)/2)+" "+Ii(dt.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+c+" "+c+" "+a+" 0 "+a+" c"),r.push("-"+c+" "+a+" -"+a+" "+c+" -"+a+" 0 c"),r.push("-"+a+" -"+c+" -"+c+" -"+a+" 0 -"+a+" c"),r.push(c+" -"+a+" "+a+" -"+c+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=Fa(s);t.scope=s.scope;var r=[],a=dt.internal.getWidth(s)<=dt.internal.getHeight(s)?dt.internal.getWidth(s)/4:dt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),o=Number((i*dt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ii(dt.internal.getWidth(s)/2)+" "+Ii(dt.internal.getHeight(s)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:dt.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=dt.RadioButton.Cross.YesNormal,t.D[s]=dt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=Fa(s);t.scope=s.scope;var r=[],a=dt.internal.calculateCross(s);return r.push("q"),r.push("1 1 "+Bt(dt.internal.getWidth(s)-2)+" "+Bt(dt.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(Bt(a.x1.x)+" "+Bt(a.x1.y)+" m"),r.push(Bt(a.x2.x)+" "+Bt(a.x2.y)+" l"),r.push(Bt(a.x4.x)+" "+Bt(a.x4.y)+" m"),r.push(Bt(a.x3.x)+" "+Bt(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Fa(s);t.scope=s.scope;var r=dt.internal.calculateCross(s),a=[];return a.push("0.749023 g"),a.push("0 0 "+Bt(dt.internal.getWidth(s))+" "+Bt(dt.internal.getHeight(s))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Bt(dt.internal.getWidth(s)-2)+" "+Bt(dt.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(Bt(r.x1.x)+" "+Bt(r.x1.y)+" m"),a.push(Bt(r.x2.x)+" "+Bt(r.x2.y)+" l"),a.push(Bt(r.x4.x)+" "+Bt(r.x4.y)+" m"),a.push(Bt(r.x3.x)+" "+Bt(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=Fa(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Bt(dt.internal.getWidth(s))+" "+Bt(dt.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+r}};dt.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=dt.internal.getWidth(s),r=dt.internal.getHeight(s),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},dt.internal.getWidth=function(s){var t=0;return ws(s)==="object"&&(t=om(s.Rect[2])),t},dt.internal.getHeight=function(s){var t=0;return ws(s)==="object"&&(t=om(s.Rect[3])),t};var jN=Xs.addField=function(s){if(NN(this,s),!(s instanceof wa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};Xs.AcroFormChoiceField=dl,Xs.AcroFormListBox=ul,Xs.AcroFormComboBox=hl,Xs.AcroFormEditBox=Uc,Xs.AcroFormButton=Ir,Xs.AcroFormPushButton=Hc,Xs.AcroFormRadioButton=fl,Xs.AcroFormCheckBox=Wc,Xs.AcroFormTextField=jo,Xs.AcroFormPasswordField=Vc,Xs.AcroFormAppearance=dt,Xs.AcroForm={ChoiceField:dl,ListBox:ul,ComboBox:hl,EditBox:Uc,Button:Ir,PushButton:Hc,RadioButton:fl,CheckBox:Wc,TextField:jo,PasswordField:Vc,Appearance:dt},_t.AcroForm={ChoiceField:dl,ListBox:ul,ComboBox:hl,EditBox:Uc,Button:Ir,PushButton:Hc,RadioButton:fl,CheckBox:Wc,TextField:jo,PasswordField:Vc,Appearance:dt};_t.AcroForm;function rx(s){return s.reduce(function(t,r,a){return t[r]=a,t},{})}(function(s){s.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=s.__addimage__.getImageFileTypeByImageData=function(I,q){var ne,Y,he,pe,oe,ie=t;if((q=q||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(ge(I))for(oe in r)for(he=r[oe],ne=0;ne<he.length;ne+=1){for(pe=!0,Y=0;Y<he[ne].length;Y+=1)if(he[ne][Y]!==void 0&&he[ne][Y]!==I[Y]){pe=!1;break}if(pe===!0){ie=oe;break}}else for(oe in r)for(he=r[oe],ne=0;ne<he.length;ne+=1){for(pe=!0,Y=0;Y<he[ne].length;Y+=1)if(he[ne][Y]!==void 0&&he[ne][Y]!==I.charCodeAt(Y)){pe=!1;break}if(pe===!0){ie=oe;break}}return ie===t&&q!==t&&(ie=q),ie},i=function I(q){for(var ne=this.internal.write,Y=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:q.width}),pe.push({key:"Height",value:q.height}),q.colorSpace===T.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===T.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)){for(var oe="",ie=0,Ne=q.transparency.length;ie<Ne;ie++)oe+=q.transparency[ie]+" "+q.transparency[ie]+" ";pe.push({key:"Mask",value:"["+oe+"]"})}q.sMask!==void 0&&pe.push({key:"SMask",value:q.objectId+1+" 0 R"});var J=q.filter!==void 0?["/"+q.filter]:void 0;if(Y({data:q.data,additionalKeyValues:pe,alreadyAppliedFilters:J,objectId:q.objectId}),ne("endobj"),"sMask"in q&&q.sMask!==void 0){var fe="/Predictor "+q.predictor+" /Colors 1 /BitsPerComponent "+q.bitsPerComponent+" /Columns "+q.width,R={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:q.bitsPerComponent,decodeParameters:fe,data:q.sMask};"filter"in q&&(R.filter=q.filter),I.call(this,R)}if(q.colorSpace===T.INDEXED){var E=this.internal.newObject();Y({data:ee(new Uint8Array(q.palette)),objectId:E}),ne("endobj")}},o=function(){var I=this.internal.collections.addImage_images;for(var q in I)i.call(this,I[q])},c=function(){var I,q=this.internal.collections.addImage_images,ne=this.internal.write;for(var Y in q)ne("/I"+(I=q[Y]).index,I.objectId,"0","R")},h=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},u=function(){var I=this.internal.collections.addImage_images;return h.call(this),I},m=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(I){return typeof s["process"+I.toUpperCase()]=="function"},v=function(I){return ws(I)==="object"&&I.nodeType===1},b=function(I,q){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var ne=""+I.getAttribute("src");if(ne.indexOf("data:image/")===0)return Kl(unescape(ne).split("base64,").pop());var Y=s.loadFile(ne,!0);if(Y!==void 0)return Y}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var he;switch(q){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;case"JPEG":case"JPG":default:he="image/jpeg"}return Kl(I.toDataURL(he,1).split("base64,").pop())}},g=function(I){var q=this.internal.collections.addImage_images;if(q){for(var ne in q)if(I===q[ne].alias)return q[ne]}},k=function(I,q,ne){return I||q||(I=-96,q=-96),I<0&&(I=-1*ne.width*72/I/this.internal.scaleFactor),q<0&&(q=-1*ne.height*72/q/this.internal.scaleFactor),I===0&&(I=q*ne.width/ne.height),q===0&&(q=I*ne.height/ne.width),[I,q]},j=function(I,q,ne,Y,he,pe){var oe=k.call(this,ne,Y,he),ie=this.internal.getCoordinateString,Ne=this.internal.getVerticalCoordinateString,J=u.call(this);if(ne=oe[0],Y=oe[1],J[he.index]=he,pe){pe*=Math.PI/180;var fe=Math.cos(pe),R=Math.sin(pe),E=function(W){return W.toFixed(4)},D=[E(fe),E(R),E(-1*R),E(fe),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,ie(I),Ne(q+Y),"cm"].join(" ")),this.internal.write(D.join(" ")),this.internal.write([ie(ne),"0","0",ie(Y),"0","0","cm"].join(" "))):this.internal.write([ie(ne),"0","0",ie(Y),ie(I),Ne(q+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},T=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=s.__addimage__.sHashCode=function(I){var q,ne,Y=0;if(typeof I=="string")for(ne=I.length,q=0;q<ne;q++)Y=(Y<<5)-Y+I.charCodeAt(q),Y|=0;else if(ge(I))for(ne=I.byteLength/2,q=0;q<ne;q++)Y=(Y<<5)-Y+I[q],Y|=0;return Y},B=s.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var q=!0;return I.length===0&&(q=!1),I.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(q=!1),q},U=s.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var q=I.indexOf(",");return q<0?null:I.substring(0,q).trim().endsWith("base64")?I.substring(q+1):null},Q=s.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};s.__addimage__.isArrayBuffer=function(I){return Q()&&I instanceof ArrayBuffer};var ge=s.__addimage__.isArrayBufferView=function(I){return Q()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},ae=s.__addimage__.binaryStringToUint8Array=function(I){for(var q=I.length,ne=new Uint8Array(q),Y=0;Y<q;Y++)ne[Y]=I.charCodeAt(Y);return ne},ee=s.__addimage__.arrayBufferToBinaryString=function(I){for(var q="",ne=ge(I)?I:new Uint8Array(I),Y=0;Y<ne.length;Y+=8192)q+=String.fromCharCode.apply(null,ne.subarray(Y,Y+8192));return q};s.addImage=function(){var I,q,ne,Y,he,pe,oe,ie,Ne;if(typeof arguments[1]=="number"?(q=t,ne=arguments[1],Y=arguments[2],he=arguments[3],pe=arguments[4],oe=arguments[5],ie=arguments[6],Ne=arguments[7]):(q=arguments[1],ne=arguments[2],Y=arguments[3],he=arguments[4],pe=arguments[5],oe=arguments[6],ie=arguments[7],Ne=arguments[8]),ws(I=arguments[0])==="object"&&!v(I)&&"imageData"in I){var J=I;I=J.imageData,q=J.format||q||t,ne=J.x||ne||0,Y=J.y||Y||0,he=J.w||J.width||he,pe=J.h||J.height||pe,oe=J.alias||oe,ie=J.compression||ie,Ne=J.rotation||J.angle||Ne}var fe=this.internal.getFilters();if(ie===void 0&&fe.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(ne)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var R=K.call(this,I,q,oe,ie);return j.call(this,ne,Y,he,pe,R,Ne),this};var K=function(I,q,ne,Y){var he,pe,oe;if(typeof I=="string"&&a(I)===t){I=unescape(I);var ie=ue(I,!1);(ie!==""||(ie=s.loadFile(I,!0))!==void 0)&&(I=ie)}if(v(I)&&(I=b(I,q)),q=a(I,q),!x(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((oe=ne)==null||oe.length===0)&&(ne=function(Ne){return typeof Ne=="string"||ge(Ne)?P(Ne):ge(Ne.data)?P(Ne.data):null}(I)),(he=g.call(this,ne))||(Q()&&(I instanceof Uint8Array||q==="RGBA"||(pe=I,I=ae(I))),he=this["process"+q.toUpperCase()](I,m.call(this),ne,function(Ne){return Ne&&typeof Ne=="string"&&(Ne=Ne.toUpperCase()),Ne in s.image_compression?Ne:S.NONE}(Y),pe)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},ue=s.__addimage__.convertBase64ToBinaryString=function(I,q){q=typeof q!="boolean"||q;var ne,Y="";if(typeof I=="string"){var he;ne=(he=U(I))!==null&&he!==void 0?he:I;try{Y=Kl(ne)}catch(pe){if(q)throw B(ne)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};s.getImageProperties=function(I){var q,ne,Y="";if(v(I)&&(I=b(I)),typeof I=="string"&&a(I)===t&&((Y=ue(I,!1))===""&&(Y=s.loadFile(I)||""),I=Y),ne=a(I),!x(ne))throw new Error("addImage does not support files of type '"+ne+"', please ensure that a plugin for '"+ne+"' support is added.");if(!Q()||I instanceof Uint8Array||(I=ae(I)),!(q=this["process"+ne.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=ne,q}})(_t.API),function(s){var t=function(r){if(r!==void 0&&r!="")return!0};_t.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(r){for(var a,i,o,c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),m=r.pageContext.annotations,x=!1,v=0;v<m.length&&!x;v++)switch((a=m[v]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var b=0;b<m.length;b++){a=m[b];var g=this.internal.pdfEscape,k=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(j.objId),P=a.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(a.bounds.x)+" "+h(a.bounds.y+a.bounds.h)+" "+c(a.bounds.x+a.bounds.w)+" "+h(a.bounds.y)+"] ")+"/Contents ("+g(S(a.contents))+")",o+=" /Popup "+T.objId+" 0 R",o+=" /P "+u.objId+" 0 R",o+=" /T ("+g(S(P))+") >>",j.content=o;var B=j.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(a.bounds.x+30)+" "+h(a.bounds.y+a.bounds.h)+" "+c(a.bounds.x+a.bounds.w+30)+" "+h(a.bounds.y)+"] ")+" /Parent "+B,a.open&&(o+=" /Open true"),o+=" >>",T.content=o,this.internal.write(j.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+c(a.bounds.x)+" "+h(a.bounds.y)+" "+c(a.bounds.x+a.bounds.w)+" "+h(a.bounds.y+a.bounds.h)+"] ";var U=a.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(k(a.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(a.options.name){var Q=this.annotations._nameMap[a.options.name];a.options.pageNumber=Q.page,a.options.top=Q.y}else a.options.top||(a.options.top=0);if(i="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",o="",a.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(k(a.options.url))+") >>";else if(a.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,o+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var ge=h(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),o+=" /XYZ "+a.options.left+" "+ge+" "+a.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),s.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},s.link=function(r,a,i,o,c){var h=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:u(r),y:m(a),w:u(r+i),h:m(a+o)},options:c,type:"link"})},s.textWithLink=function(r,a,i,o){var c,h,u=this.getTextWidth(r),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){h=o.maxWidth;var x=this.splitTextToSize(r,h).length;c=Math.ceil(m*x)}else h=u,c=m;return this.text(r,a,i,o),i+=.2*m,o.align==="center"&&(a-=u/2),o.align==="right"&&(a-=u),this.link(a,i-m,h,c,o),u},s.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(_t.API),function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];s.__arabicParser__={};var o=s.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},c=s.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},h=s.__arabicParser__.isArabicEndLetter=function(j){return c(j)&&o(j)&&t[j.charCodeAt(0)].length<=2},u=s.__arabicParser__.isArabicAlfLetter=function(j){return c(j)&&i.indexOf(j.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return c(j)&&o(j)&&t[j.charCodeAt(0)].length>=1};var m=s.__arabicParser__.arabicLetterHasFinalForm=function(j){return c(j)&&o(j)&&t[j.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(j){return c(j)&&o(j)&&t[j.charCodeAt(0)].length>=3};var x=s.__arabicParser__.arabicLetterHasMedialForm=function(j){return c(j)&&o(j)&&t[j.charCodeAt(0)].length==4},v=s.__arabicParser__.resolveLigatures=function(j){var T=0,S=r,P="",B=0;for(T=0;T<j.length;T+=1)S[j.charCodeAt(T)]!==void 0?(B++,typeof(S=S[j.charCodeAt(T)])=="number"&&(P+=String.fromCharCode(S),S=r,B=0),T===j.length-1&&(S=r,P+=j.charAt(T-(B-1)),T-=B-1,B=0)):(S=r,P+=j.charAt(T-B),T-=B,B=0);return P};s.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&a[j.charCodeAt(0)]!==void 0};var b=s.__arabicParser__.getCorrectForm=function(j,T,S){return c(j)?o(j)===!1?-1:!m(j)||!c(T)&&!c(S)||!c(S)&&h(T)||h(j)&&!c(T)||h(j)&&u(T)||h(j)&&h(T)?0:x(j)&&c(T)&&!h(T)&&c(S)&&m(S)?3:h(j)||!c(S)?1:2:-1},g=function(j){var T=0,S=0,P=0,B="",U="",Q="",ge=(j=j||"").split("\\s+"),ae=[];for(T=0;T<ge.length;T+=1){for(ae.push(""),S=0;S<ge[T].length;S+=1)B=ge[T][S],U=ge[T][S-1],Q=ge[T][S+1],c(B)?(P=b(B,U,Q),ae[T]+=P!==-1?String.fromCharCode(t[B.charCodeAt(0)][P]):B):ae[T]+=B;ae[T]=v(ae[T])}return ae.join(" ")},k=s.__arabicParser__.processArabic=s.processArabic=function(){var j,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(T)){var P=0;for(S=[],P=0;P<T.length;P+=1)Array.isArray(T[P])?S.push([g(T[P][0]),T[P][1],T[P][2]]):S.push([g(T[P])]);j=S}else j=g(T);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};s.events.push(["preProcessText",k])}(_t.API),_t.API.autoPrint=function(s){var t;switch((s=s||{}).variant=s.variant||"non-conform",s.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(s){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(h){r=h}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(h){a=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(h){i=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(h){o=h}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(h){c=h}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var i;if((r=r||"2d")!=="2d")return null;for(i in a)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=a[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(_t.API),function(s){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(j){x=j}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(j){v=j}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(j){b=j}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(j){k=j}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(u){return a.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},s.getTextDimensions=function(u,m){a.call(this);var x=(m=m||{}).fontSize||this.getFontSize(),v=m.font||this.getFont(),b=m.scaleFactor||this.internal.scaleFactor,g=0,k=0,j=0,T=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var S=m.maxWidth;S>0?typeof u=="string"?u=this.splitTextToSize(u,S):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(B,U){return B.concat(T.splitTextToSize(U,S))},[])):u=Array.isArray(u)?u:[u];for(var P=0;P<u.length;P++)g<(j=this.getStringUnitWidth(u[P],{font:v})*x)&&(g=j);return g!==0&&(k=u.length),{w:g/=b,h:Math.max((k*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/b,0)}},s.cellAddPage=function(){a.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=s.cell=function(){var u;u=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var m=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,b=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===u.lineNumber?(u.x=(m.x||0)+(m.width||0),u.y=m.y||0):m.y+m.height+u.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=v.top,g&&b&&(this.printHeaderRow(u.lineNumber,!0),u.y+=b[0].height)):u.y=m.y+m.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-x,u.y+x,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+x,{align:"center",baseline:"top",maxWidth:u.width-x-x}):this.text(u.text,u.x+x,u.y+x,{align:"left",baseline:"top",maxWidth:u.width-x-x})),this.internal.__cell__.lastCell=u,this};s.table=function(u,m,x,v,b){if(a.call(this),!x)throw new Error("No data for PDF table.");var g,k,j,T,S=[],P=[],B=[],U={},Q={},ge=[],ae=[],ee=(b=b||{}).autoSize||!1,K=b.printHeaders!==!1,ue=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,I=b.margins||Object.assign({width:this.getPageWidth()},t),q=typeof b.padding=="number"?b.padding:3,ne=b.headerBackgroundColor||"#c8c8c8",Y=b.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=K,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=ue,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=ne,this.internal.__cell__.headerTextColor=Y,this.setFontSize(ue),v==null)P=S=Object.keys(x[0]),B=S.map(function(){return"left"});else if(Array.isArray(v)&&ws(v[0])==="object")for(S=v.map(function(J){return J.name}),P=v.map(function(J){return J.prompt||J.name||""}),B=v.map(function(J){return J.align||"left"}),g=0;g<v.length;g+=1)Q[v[g].name]=v[g].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(P=S=v,B=S.map(function(){return"left"}));if(ee||Array.isArray(v)&&typeof v[0]=="string")for(g=0;g<S.length;g+=1){for(U[T=S[g]]=x.map(function(J){return J[T]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(P[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=U[T],this.setFont(void 0,"normal"),j=0;j<k.length;j+=1)ge.push(this.getTextDimensions(k[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[T]=Math.max.apply(null,ge)+q+q,ge=[]}if(K){var he={};for(g=0;g<S.length;g+=1)he[S[g]]={},he[S[g]].text=P[g],he[S[g]].align=B[g];var pe=h.call(this,he,Q);ae=S.map(function(J){return new o(u,m,Q[J],pe,he[J].text,void 0,he[J].align)}),this.setTableHeaderRow(ae),this.printHeaderRow(1,!1)}var oe=v.reduce(function(J,fe){return J[fe.name]=fe.align,J},{});for(g=0;g<x.length;g+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:g,data:x[g]},this);var ie=h.call(this,x[g],Q);for(j=0;j<S.length;j+=1){var Ne=x[g][S[j]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:g,col:j,data:Ne},this),c.call(this,new o(u,m,Q[S[j]],ie,Ne,g+2,oe[S[j]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=m,this};var h=function(u,m){var x=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(u).map(function(g){var k=u[g];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,m[g]-x-x)},this).map(function(g){return this.getLineHeightFactor()*g.length*v/b+x+x},this).reduce(function(g,k){return Math.max(g,k)},0)};s.setTableHeaderRow=function(u){a.call(this),this.internal.__cell__.tableHeaderRow=u},s.printHeaderRow=function(u,m){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){x=this.internal.__cell__.tableHeaderRow[g].clone(),m&&(x.y=this.internal.__cell__.margins.top||0,b.push(x)),x.lineNumber=u;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(k)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),r=!1}}(_t.API);var nx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ax=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Uu=rx(ax),ix=[100,200,300,400,500,600,700,800,900],_N=rx(ix);function Hu(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return nx[o=o||"normal"]?o:"normal"}(s.style),a=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(s.weight),i=function(o){return typeof Uu[o=o||"normal"]=="number"?o:"normal"}(s.stretch);return{family:t,style:r,weight:a,stretch:i,src:s.src||[],ref:s.ref||{name:t,style:[i,r,a].join(" ")}}}function lm(s,t,r,a){var i;for(i=r;i>=0&&i<t.length;i+=a)if(s[t[i]])return s[t[i]];for(i=r;i>=0&&i<t.length;i-=a)if(s[t[i]])return s[t[i]]}var SN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},cm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dm(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function kN(s,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},SN,r.genericFontFamilies||{}),o=null,c=null,h=0;h<t.length;++h)if(i[(o=Hu(t[h])).family]&&(o.family=i[o.family]),s.hasOwnProperty(o.family)){c=s[o.family];break}if(!(c=c||s[a]))throw new Error("Could not find a font-family for the rule '"+dm(o)+"' and default family '"+a+"'.");if(c=function(u,m){if(m[u])return m[u];var x=Uu[u],v=x<=Uu.normal?-1:1,b=lm(m,ax,x,v);if(!b)throw new Error("Could not find a matching font-stretch value for "+u);return b}(o.stretch,c),c=function(u,m){if(m[u])return m[u];for(var x=nx[u],v=0;v<x.length;++v)if(m[x[v]])return m[x[v]];throw new Error("Could not find a matching font-style for "+u)}(o.style,c),!(c=function(u,m){if(m[u])return m[u];if(u===400&&m[500])return m[500];if(u===500&&m[400])return m[400];var x=_N[u],v=lm(m,ix,x,u<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+u);return v}(o.weight,c)))throw new Error("Failed to resolve a font for the rule '"+dm(o)+"'.");return c}function um(s){return s.trimLeft()}function CN(s,t){for(var r=0;r<s.length;){if(s.charAt(r)===t)return[s.substring(0,r),s.substring(r+1)];r+=1}return null}function PN(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var Rc,hm,fm,ou=["times"];(function(s){var t,r,a,i,o,c,h,u,m,x=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new u,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new c,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new c,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,h=this.internal.Rectangle,u=this.internal.Matrix,m=new x}]);var v=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var E=R;Object.defineProperty(this,"pdf",{get:function(){return E}});var D=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return D},set:function(G){D=!!G}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(G){W=!!G}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(G){isNaN(G)||(se=G)}});var X=0;Object.defineProperty(this,"posY",{get:function(){return X},set:function(G){isNaN(G)||(X=G)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(G){var Z;typeof G=="number"?Z=[G,G,G,G]:((Z=new Array(4))[0]=G[0],Z[1]=G.length>=2?G[1]:Z[0],Z[2]=G.length>=3?G[2]:Z[0],Z[3]=G.length>=4?G[3]:Z[1]),m.margin=Z}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(G){le=G}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(G){ce=G}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(G){xe=G}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(G){G instanceof x&&(m=G)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(G){m.path=G}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(G){je=G}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(G){var Z;Z=b(G),this.ctx.fillStyle=Z.style,this.ctx.isFillTransparent=Z.a===0,this.ctx.fillOpacity=Z.a,this.pdf.setFillColor(Z.r,Z.g,Z.b,{a:Z.a}),this.pdf.setTextColor(Z.r,Z.g,Z.b,{a:Z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(G){var Z=b(G);this.ctx.strokeStyle=Z.style,this.ctx.isStrokeTransparent=Z.a===0,this.ctx.strokeOpacity=Z.a,Z.a===0?this.pdf.setDrawColor(255,255,255):(Z.a,this.pdf.setDrawColor(Z.r,Z.g,Z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(G){["butt","round","square"].indexOf(G)!==-1&&(this.ctx.lineCap=G,this.pdf.setLineCap(G))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(G){isNaN(G)||(this.ctx.lineWidth=G,this.pdf.setLineWidth(G))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(G){["bevel","round","miter"].indexOf(G)!==-1&&(this.ctx.lineJoin=G,this.pdf.setLineJoin(G))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(G){isNaN(G)||(this.ctx.miterLimit=G,this.pdf.setMiterLimit(G))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(G){this.ctx.textBaseline=G}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(G){["right","end","center","left","start"].indexOf(G)!==-1&&(this.ctx.textAlign=G)}});var Me=null;function De(G,Z){if(Me===null){var Fe=function(Be){var _e=[];return Object.keys(Be).forEach(function(Ie){Be[Ie].forEach(function(ze){var Ge=null;switch(ze){case"bold":Ge={family:Ie,weight:"bold"};break;case"italic":Ge={family:Ie,style:"italic"};break;case"bolditalic":Ge={family:Ie,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:Ie}}Ge!==null&&(Ge.ref={name:Ie,style:ze},_e.push(Ge))})}),_e}(G.getFontList());Me=function(Be){for(var _e={},Ie=0;Ie<Be.length;++Ie){var ze=Hu(Be[Ie]),Ge=ze.family,nt=ze.stretch,pt=ze.style,Nt=ze.weight;_e[Ge]=_e[Ge]||{},_e[Ge][nt]=_e[Ge][nt]||{},_e[Ge][nt][pt]=_e[Ge][nt][pt]||{},_e[Ge][nt][pt][Nt]=ze}return _e}(Fe.concat(Z))}return Me}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(G){Me=null,Ye=G}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(G){var Z;if(this.ctx.font=G,(Z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(G))!==null){var Fe=Z[1];Z[2];var Be=Z[3],_e=Z[4];Z[5];var Ie=Z[6],ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(_e)[2];_e=Math.floor(ze==="px"?parseFloat(_e)*this.pdf.internal.scaleFactor:ze==="em"?parseFloat(_e)*this.pdf.getFontSize():parseFloat(_e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(_e);var Ge=function(xt){var Ct,Ke,dr=[],Gt=xt.trim();if(Gt==="")return ou;if(Gt in cm)return[cm[Gt]];for(;Gt!=="";){switch(Ke=null,Ct=(Gt=um(Gt)).charAt(0)){case'"':case"'":Ke=CN(Gt.substring(1),Ct);break;default:Ke=PN(Gt)}if(Ke===null||(dr.push(Ke[0]),(Gt=um(Ke[1]))!==""&&Gt.charAt(0)!==","))return ou;Gt=Gt.replace(/^,/,"")}return dr}(Ie);if(this.fontFaces){var nt=kN(De(this.pdf,this.fontFaces),Ge.map(function(xt){return{family:xt,stretch:"normal",weight:Be,style:Fe}}));this.pdf.setFont(nt.ref.name,nt.ref.style)}else{var pt="";(Be==="bold"||parseInt(Be,10)>=700||Fe==="bold")&&(pt="bold"),Fe==="italic"&&(pt+="italic"),pt.length===0&&(pt="normal");for(var Nt="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qt=0;qt<Ge.length;qt++){if(this.pdf.internal.getFont(Ge[qt],pt,{noFallback:!0,disableWarning:!0})!==void 0){Nt=Ge[qt];break}if(pt==="bolditalic"&&this.pdf.internal.getFont(Ge[qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nt=Ge[qt],pt="bold";else if(this.pdf.internal.getFont(Ge[qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nt=Ge[qt],pt="normal";break}}if(Nt===""){for(var is=0;is<Ge.length;is++)if(yt[Ge[is]]){Nt=yt[Ge[is]];break}}Nt=Nt===""?"Times":Nt,this.pdf.setFont(Nt,pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(G){this.ctx.globalCompositeOperation=G}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(G){this.ctx.globalAlpha=G}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(G){this.ctx.lineDashOffset=G,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(G){this.ctx.lineDash=G,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(G){this.ctx.ignoreClearRect=!!G}})};v.prototype.setLineDash=function(R){this.lineDash=R},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){U.call(this,"fill",!1)},v.prototype.stroke=function(){U.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(R,E){if(isNaN(R)||isNaN(E))throw As.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var D=this.ctx.transform.applyToPoint(new c(R,E));this.path.push({type:"mt",x:D.x,y:D.y}),this.ctx.lastPoint=new c(R,E)},v.prototype.closePath=function(){var R=new c(0,0),E=0;for(E=this.path.length-1;E!==-1;E--)if(this.path[E].type==="begin"&&ws(this.path[E+1])==="object"&&typeof this.path[E+1].x=="number"){R=new c(this.path[E+1].x,this.path[E+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(R.x,R.y)},v.prototype.lineTo=function(R,E){if(isNaN(R)||isNaN(E))throw As.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var D=this.ctx.transform.applyToPoint(new c(R,E));this.path.push({type:"lt",x:D.x,y:D.y}),this.ctx.lastPoint=new c(D.x,D.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},v.prototype.quadraticCurveTo=function(R,E,D,W){if(isNaN(D)||isNaN(W)||isNaN(R)||isNaN(E))throw As.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new c(D,W)),X=this.ctx.transform.applyToPoint(new c(R,E));this.path.push({type:"qct",x1:X.x,y1:X.y,x:se.x,y:se.y}),this.ctx.lastPoint=new c(se.x,se.y)},v.prototype.bezierCurveTo=function(R,E,D,W,se,X){if(isNaN(se)||isNaN(X)||isNaN(R)||isNaN(E)||isNaN(D)||isNaN(W))throw As.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new c(se,X)),ce=this.ctx.transform.applyToPoint(new c(R,E)),xe=this.ctx.transform.applyToPoint(new c(D,W));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:xe.x,y2:xe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new c(le.x,le.y)},v.prototype.arc=function(R,E,D,W,se,X){if(isNaN(R)||isNaN(E)||isNaN(D)||isNaN(W)||isNaN(se))throw As.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(X=!!X,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new c(R,E));R=le.x,E=le.y;var ce=this.ctx.transform.applyToPoint(new c(0,D)),xe=this.ctx.transform.applyToPoint(new c(0,0));D=Math.sqrt(Math.pow(ce.x-xe.x,2)+Math.pow(ce.y-xe.y,2))}Math.abs(se-W)>=2*Math.PI&&(W=0,se=2*Math.PI),this.path.push({type:"arc",x:R,y:E,radius:D,startAngle:W,endAngle:se,counterclockwise:X})},v.prototype.arcTo=function(R,E,D,W,se){throw new Error("arcTo not implemented.")},v.prototype.rect=function(R,E,D,W){if(isNaN(R)||isNaN(E)||isNaN(D)||isNaN(W))throw As.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,E),this.lineTo(R+D,E),this.lineTo(R+D,E+W),this.lineTo(R,E+W),this.lineTo(R,E),this.lineTo(R+D,E),this.lineTo(R,E)},v.prototype.fillRect=function(R,E,D,W){if(isNaN(R)||isNaN(E)||isNaN(D)||isNaN(W))throw As.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,E,D,W),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},v.prototype.strokeRect=function(R,E,D,W){if(isNaN(R)||isNaN(E)||isNaN(D)||isNaN(W))throw As.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(R,E,D,W),this.stroke())},v.prototype.clearRect=function(R,E,D,W){if(isNaN(R)||isNaN(E)||isNaN(D)||isNaN(W))throw As.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,E,D,W))},v.prototype.save=function(R){R=typeof R!="boolean"||R;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,D=0;D<this.pdf.internal.getNumberOfPages();D++)this.pdf.setPage(D+1),this.pdf.internal.out("q");if(this.pdf.setPage(E),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},v.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,D=0;D<this.pdf.internal.getNumberOfPages();D++)this.pdf.setPage(D+1),this.pdf.internal.out("Q");this.pdf.setPage(E),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(R){var E,D,W,se;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))E=0,D=0,W=0,se=0;else{var X=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(X!==null)E=parseInt(X[1]),D=parseInt(X[2]),W=parseInt(X[3]),se=1;else if((X=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)E=parseInt(X[1]),D=parseInt(X[2]),W=parseInt(X[3]),se=parseFloat(X[4]);else{if(se=1,typeof R=="string"&&R.charAt(0)!=="#"){var le=new J0(R);R=le.ok?le.toHex():"#000000"}R.length===4?(E=R.substring(1,2),E+=E,D=R.substring(2,3),D+=D,W=R.substring(3,4),W+=W):(E=R.substring(1,3),D=R.substring(3,5),W=R.substring(5,7)),E=parseInt(E,16),D=parseInt(D,16),W=parseInt(W,16)}}return{r:E,g:D,b:W,a:se,style:R}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(R,E,D,W){if(isNaN(E)||isNaN(D)||typeof R!="string")throw As.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!g.call(this)){var se=ie(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;q.call(this,{text:R,x:E,y:D,scale:X,angle:se,align:this.textAlign,maxWidth:W})}},v.prototype.strokeText=function(R,E,D,W){if(isNaN(E)||isNaN(D)||typeof R!="string")throw As.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){W=isNaN(W)?void 0:W;var se=ie(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;q.call(this,{text:R,x:E,y:D,scale:X,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:W})}},v.prototype.measureText=function(R){if(typeof R!="string")throw As.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var E=this.pdf,D=this.pdf.internal.scaleFactor,W=E.internal.getFontSize(),se=E.getStringUnitWidth(R)*W/E.internal.scaleFactor,X=function(le){var ce=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new X({width:se*=Math.round(96*D/72*1e4)/1e4})},v.prototype.scale=function(R,E){if(isNaN(R)||isNaN(E))throw As.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var D=new u(R,0,0,E,0,0);this.ctx.transform=this.ctx.transform.multiply(D)},v.prototype.rotate=function(R){if(isNaN(R))throw As.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var E=new u(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(E)},v.prototype.translate=function(R,E){if(isNaN(R)||isNaN(E))throw As.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var D=new u(1,0,0,1,R,E);this.ctx.transform=this.ctx.transform.multiply(D)},v.prototype.transform=function(R,E,D,W,se,X){if(isNaN(R)||isNaN(E)||isNaN(D)||isNaN(W)||isNaN(se)||isNaN(X))throw As.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new u(R,E,D,W,se,X);this.ctx.transform=this.ctx.transform.multiply(le)},v.prototype.setTransform=function(R,E,D,W,se,X){R=isNaN(R)?1:R,E=isNaN(E)?0:E,D=isNaN(D)?0:D,W=isNaN(W)?1:W,se=isNaN(se)?0:se,X=isNaN(X)?0:X,this.ctx.transform=new u(R,E,D,W,se,X)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(R,E,D,W,se,X,le,ce,xe){var je=this.pdf.getImageProperties(R),Me=1,De=1,Ye=1,G=1;W!==void 0&&ce!==void 0&&(Ye=ce/W,G=xe/se,Me=je.width/W*ce/W,De=je.height/se*xe/se),X===void 0&&(X=E,le=D,E=0,D=0),W!==void 0&&ce===void 0&&(ce=W,xe=se),W===void 0&&ce===void 0&&(ce=je.width,xe=je.height);for(var Z,Fe=this.ctx.transform.decompose(),Be=ie(Fe.rotate.shx),_e=new u,Ie=(_e=(_e=(_e=_e.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale)).applyToRectangle(new h(X-E*Ye,le-D*G,W*Me,se*De)),ze=T.call(this,Ie),Ge=[],nt=0;nt<ze.length;nt+=1)Ge.indexOf(ze[nt])===-1&&Ge.push(ze[nt]);if(B(Ge),this.autoPaging)for(var pt=Ge[0],Nt=Ge[Ge.length-1],yt=pt;yt<Nt+1;yt++){this.pdf.setPage(yt);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],is=yt===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=yt===1?0:xt+(yt-2)*Ct;if(this.ctx.clip_path.length!==0){var dr=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Z,this.posX+this.margin[3],-Ke+is+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=dr}var Gt=JSON.parse(JSON.stringify(Ie));Gt=P([Gt],this.posX+this.margin[3],-Ke+is+this.ctx.prevPageLastElemOffset)[0];var gr=(yt>pt||yt<Nt)&&j.call(this);gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,Ct,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,Be),gr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,Be)};var T=function(R,E,D){var W=[];E=E||this.pdf.internal.pageSize.width,D=D||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":W.push(Math.floor((R.y+se)/D)+1);break;case"arc":W.push(Math.floor((R.y+se-R.radius)/D)+1),W.push(Math.floor((R.y+se+R.radius)/D)+1);break;case"qct":var X=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);W.push(Math.floor((X.y+se)/D)+1),W.push(Math.floor((X.y+X.h+se)/D)+1);break;case"bct":var le=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);W.push(Math.floor((le.y+se)/D)+1),W.push(Math.floor((le.y+le.h+se)/D)+1);break;case"rect":W.push(Math.floor((R.y+se)/D)+1),W.push(Math.floor((R.y+R.h+se)/D)+1)}for(var ce=0;ce<W.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<W[ce];)S.call(this);return W},S=function(){var R=this.fillStyle,E=this.strokeStyle,D=this.font,W=this.lineCap,se=this.lineWidth,X=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=E,this.font=D,this.lineCap=W,this.lineWidth=se,this.lineJoin=X},P=function(R,E,D){for(var W=0;W<R.length;W++)switch(R[W].type){case"bct":R[W].x2+=E,R[W].y2+=D;case"qct":R[W].x1+=E,R[W].y1+=D;case"mt":case"lt":case"arc":default:R[W].x+=E,R[W].y+=D}return R},B=function(R){return R.sort(function(E,D){return E-D})},U=function(R,E){for(var D,W,se=this.fillStyle,X=this.strokeStyle,le=this.lineCap,ce=this.lineWidth,xe=Math.abs(ce*this.ctx.transform.scaleX),je=this.lineJoin,Me=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),Ye=[],G=0;G<De.length;G++)if(De[G].x!==void 0)for(var Z=T.call(this,De[G]),Fe=0;Fe<Z.length;Fe+=1)Ye.indexOf(Z[Fe])===-1&&Ye.push(Z[Fe]);for(var Be=0;Be<Ye.length;Be++)for(;this.pdf.internal.getNumberOfPages()<Ye[Be];)S.call(this);if(B(Ye),this.autoPaging)for(var _e=Ye[0],Ie=Ye[Ye.length-1],ze=_e;ze<Ie+1;ze++){this.pdf.setPage(ze),this.fillStyle=se,this.strokeStyle=X,this.lineCap=le,this.lineWidth=xe,this.lineJoin=je;var Ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=ze===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=ze===1?0:pt+(ze-2)*Nt;if(this.ctx.clip_path.length!==0){var qt=this.path;D=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(D,this.posX+this.margin[3],-yt+nt+this.ctx.prevPageLastElemOffset),Q.call(this,R,!0),this.path=qt}if(W=JSON.parse(JSON.stringify(Me)),this.path=P(W,this.posX+this.margin[3],-yt+nt+this.ctx.prevPageLastElemOffset),E===!1||ze===0){var is=(ze>_e||ze<Ie)&&j.call(this);is&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,Nt,null).clip().discardPath()),Q.call(this,R,E),is&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=xe,Q.call(this,R,E),this.lineWidth=ce;this.path=Me},Q=function(R,E){if((R!=="stroke"||E||!k.call(this))&&(R==="stroke"||E||!g.call(this))){for(var D,W,se=[],X=this.path,le=0;le<X.length;le++){var ce=X[le];switch(ce.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:ce,deltas:[],abs:[]});break;case"lt":var xe=se.length;if(X[le-1]&&!isNaN(X[le-1].x)&&(D=[ce.x-X[le-1].x,ce.y-X[le-1].y],xe>0)){for(;xe>=0;xe--)if(se[xe-1].close!==!0&&se[xe-1].begin!==!0){se[xe-1].deltas.push(D),se[xe-1].abs.push(ce);break}}break;case"bct":D=[ce.x1-X[le-1].x,ce.y1-X[le-1].y,ce.x2-X[le-1].x,ce.y2-X[le-1].y,ce.x-X[le-1].x,ce.y-X[le-1].y],se[se.length-1].deltas.push(D);break;case"qct":var je=X[le-1].x+2/3*(ce.x1-X[le-1].x),Me=X[le-1].y+2/3*(ce.y1-X[le-1].y),De=ce.x+2/3*(ce.x1-ce.x),Ye=ce.y+2/3*(ce.y1-ce.y),G=ce.x,Z=ce.y;D=[je-X[le-1].x,Me-X[le-1].y,De-X[le-1].x,Ye-X[le-1].y,G-X[le-1].x,Z-X[le-1].y],se[se.length-1].deltas.push(D);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(ce)}}W=E?null:R==="stroke"?"stroke":"fill";for(var Fe=!1,Be=0;Be<se.length;Be++)if(se[Be].arc)for(var _e=se[Be].abs,Ie=0;Ie<_e.length;Ie++){var ze=_e[Ie];ze.type==="arc"?ee.call(this,ze.x,ze.y,ze.radius,ze.startAngle,ze.endAngle,ze.counterclockwise,void 0,E,!Fe):ne.call(this,ze.x,ze.y),Fe=!0}else if(se[Be].close===!0)this.pdf.internal.out("h"),Fe=!1;else if(se[Be].begin!==!0){var Ge=se[Be].start.x,nt=se[Be].start.y;Y.call(this,se[Be].deltas,Ge,nt),Fe=!0}W&&K.call(this,W),E&&ue.call(this)}},ge=function(R){var E=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,D=E*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-D;case"top":return R+E-D;case"hanging":return R+E-2*D;case"middle":return R+E/2-D;case"ideographic":return R;case"alphabetic":default:return R}},ae=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(E,D){this.colorStops.push([E,D])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ee=function(R,E,D,W,se,X,le,ce,xe){for(var je=pe.call(this,D,W,se,X),Me=0;Me<je.length;Me++){var De=je[Me];Me===0&&(xe?I.call(this,De.x1+R,De.y1+E):ne.call(this,De.x1+R,De.y1+E)),he.call(this,R,E,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}ce?ue.call(this):K.call(this,le)},K=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ue=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(R,E){this.pdf.internal.out(r(R)+" "+a(E)+" m")},q=function(R){var E;switch(R.align){case"right":case"end":E="right";break;case"center":E="center";break;case"left":case"start":default:E="left"}var D=this.pdf.getTextDimensions(R.text),W=ge.call(this,R.y),se=ae.call(this,W)-D.h,X=this.ctx.transform.applyToPoint(new c(R.x,W)),le=this.ctx.transform.decompose(),ce=new u;ce=(ce=(ce=ce.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var xe,je,Me,De=this.ctx.transform.applyToRectangle(new h(R.x,W,D.w,D.h)),Ye=ce.applyToRectangle(new h(R.x,se,D.w,D.h)),G=T.call(this,Ye),Z=[],Fe=0;Fe<G.length;Fe+=1)Z.indexOf(G[Fe])===-1&&Z.push(G[Fe]);if(B(Z),this.autoPaging)for(var Be=Z[0],_e=Z[Z.length-1],Ie=Be;Ie<_e+1;Ie++){this.pdf.setPage(Ie);var ze=Ie===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[2],pt=nt-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],yt=Nt-this.margin[3],qt=Ie===1?0:Ge+(Ie-2)*pt;if(this.ctx.clip_path.length!==0){var is=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(xe,this.posX+this.margin[3],-1*qt+ze),Q.call(this,"fill",!0),this.path=is}var xt=P([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-qt+ze+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*R.scale),Me=this.lineWidth,this.lineWidth=Me*R.scale);var Ct=this.autoPaging!=="text";if(Ct||xt.y+xt.h<=nt){if(Ct||xt.y>=ze&&xt.x<=Nt){var Ke=Ct?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Nt-xt.x)[0],dr=P([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-qt+ze+this.ctx.prevPageLastElemOffset)[0],Gt=Ct&&(Ie>Be||Ie<_e)&&j.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,pt,null).clip().discardPath()),this.pdf.text(Ke,dr.x,dr.y,{angle:R.angle,align:E,renderingMode:R.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else xt.y<nt&&(this.ctx.prevPageLastElemOffset+=nt-xt.y);R.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=Me)}else R.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*R.scale),Me=this.lineWidth,this.lineWidth=Me*R.scale),this.pdf.text(R.text,X.x+this.posX,X.y+this.posY,{angle:R.angle,align:E,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=Me)},ne=function(R,E,D,W){D=D||0,W=W||0,this.pdf.internal.out(r(R+D)+" "+a(E+W)+" l")},Y=function(R,E,D){return this.pdf.lines(R,E,D,null,null)},he=function(R,E,D,W,se,X,le,ce){this.pdf.internal.out([t(i(D+R)),t(o(W+E)),t(i(se+R)),t(o(X+E)),t(i(le+R)),t(o(ce+E)),"c"].join(" "))},pe=function(R,E,D,W){for(var se=2*Math.PI,X=Math.PI/2;E>D;)E-=se;var le=Math.abs(D-E);le<se&&W&&(le=se-le);for(var ce=[],xe=W?-1:1,je=E;le>1e-5;){var Me=je+xe*Math.min(le,X);ce.push(oe.call(this,R,je,Me)),le-=Math.abs(Me-je),je=Me}return ce},oe=function(R,E,D){var W=(D-E)/2,se=R*Math.cos(W),X=R*Math.sin(W),le=se,ce=-X,xe=le*le+ce*ce,je=xe+le*se+ce*X,Me=4/3*(Math.sqrt(2*xe*je)-je)/(le*X-ce*se),De=le-Me*ce,Ye=ce+Me*le,G=De,Z=-Ye,Fe=W+E,Be=Math.cos(Fe),_e=Math.sin(Fe);return{x1:R*Math.cos(E),y1:R*Math.sin(E),x2:De*Be-Ye*_e,y2:De*_e+Ye*Be,x3:G*Be-Z*_e,y3:G*_e+Z*Be,x4:R*Math.cos(D),y4:R*Math.sin(D)}},ie=function(R){return 180*R/Math.PI},Ne=function(R,E,D,W,se,X){var le=R+.5*(D-R),ce=E+.5*(W-E),xe=se+.5*(D-se),je=X+.5*(W-X),Me=Math.min(R,se,le,xe),De=Math.max(R,se,le,xe),Ye=Math.min(E,X,ce,je),G=Math.max(E,X,ce,je);return new h(Me,Ye,De-Me,G-Ye)},J=function(R,E,D,W,se,X,le,ce){var xe,je,Me,De,Ye,G,Z,Fe,Be,_e,Ie,ze,Ge,nt,pt=D-R,Nt=W-E,yt=se-D,qt=X-W,is=le-se,xt=ce-X;for(je=0;je<41;je++)Be=(Z=(Me=R+(xe=je/40)*pt)+xe*((Ye=D+xe*yt)-Me))+xe*(Ye+xe*(se+xe*is-Ye)-Z),_e=(Fe=(De=E+xe*Nt)+xe*((G=W+xe*qt)-De))+xe*(G+xe*(X+xe*xt-G)-Fe),je==0?(Ie=Be,ze=_e,Ge=Be,nt=_e):(Ie=Math.min(Ie,Be),ze=Math.min(ze,_e),Ge=Math.max(Ge,Be),nt=Math.max(nt,_e));return new h(Math.round(Ie),Math.round(ze),Math.round(Ge-Ie),Math.round(nt-ze))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,E,D=(R=this.ctx.lineDash,E=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:E}));this.prevLineDash!==D&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=D)}}})(_t.API),function(s){var t=function(o){var c,h,u,m,x,v,b,g,k,j;for(h=[],u=0,m=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;m>u;u+=4)(x=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(v=(x=((x=((x=((x=(x-(j=x%85))/85)-(k=x%85))/85)-(g=x%85))/85)-(b=x%85))/85)%85,h.push(v+33,b+33,g+33,k+33,j+33)):h.push(122);return function(T,S){for(var P=S;P>0;P--)T.pop()}(h,c.length),String.fromCharCode.apply(String,h)+"~>"},r=function(o){var c,h,u,m,x,v=String,b="length",g=255,k="charCodeAt",j="slice",T="replace";for(o[j](-2),o=o[j](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),u=[],m=0,x=(o+=c="uuuuu"[j](o[b]%5||5))[b];x>m;m+=5)h=52200625*(o[k](m)-33)+614125*(o[k](m+1)-33)+7225*(o[k](m+2)-33)+85*(o[k](m+3)-33)+(o[k](m+4)-33),u.push(g&h>>24,g&h>>16,g&h>>8,g&h);return function(S,P){for(var B=P;B>0;B--)S.pop()}(u,c[b]),v.fromCharCode.apply(v,u)},a=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var h="",u=0;u<o.length;u+=2)h+=String.fromCharCode("0x"+(o[u]+o[u+1]));return h},i=function(o){for(var c=new Uint8Array(o.length),h=o.length;h--;)c[h]=o.charCodeAt(h);return o=(c=Fu(c)).reduce(function(u,m){return u+String.fromCharCode(m)},"")};s.processDataByFilters=function(o,c){var h=0,u=o||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),h=0;h<c.length;h+=1)switch(c[h]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[h]+'" is not implemented')}return{data:u,reverseChain:m.reverse().join(" ")}}}(_t.API),function(s){s.loadFile=function(t,r,a){return function(i,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var h=void 0;try{h=function(u,m,x){var v=new XMLHttpRequest,b=0,g=function(k){var j=k.length,T=[],S=String.fromCharCode;for(b=0;b<j;b+=1)T.push(S(255&k.charCodeAt(b)));return T.join("")};if(v.open("GET",u,!m),v.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(v.onload=function(){v.status===200?x(g(this.responseText)):x(void 0)}),v.send(null),m&&v.status===200)return g(v.responseText)}(i,o,c)}catch{}return h}(t,r,a)},s.loadImageFile=s.loadFile}(_t.API),function(s){function t(){return(kt.html2canvas?Promise.resolve(kt.html2canvas):Iu(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(kt.DOMPurify?Promise.resolve(kt.DOMPurify):Iu(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var a=function(c){var h=ws(c);return h==="undefined"?"undefined":h==="string"||c instanceof String?"string":h==="number"||c instanceof Number?"number":h==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(c,h){var u=document.createElement(c);for(var m in h.className&&(u.className=h.className),h.innerHTML&&h.dompurify&&(u.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)u.style[m]=h.style[m];return u},o=function c(h){var u=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),u);return m=(m=m.setProgress(1,c,1,[c])).set(h)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,h){return c.__proto__=h||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,h){return this.then(function(){switch(h=h||function(u){switch(a(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(u){return this.set({src:i("div",{innerHTML:c,dompurify:u})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=function u(m,x){for(var v=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),b=m.firstChild;b;b=b.nextSibling)x!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||v.appendChild(u(b,x));return m.nodeType===1&&(m.nodeName==="CANVAS"?(v.width=m.width,v.height=m.height,v.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(v.value=m.value),v.addEventListener("load",function(){v.scrollTop=m.scrollTop,v.scrollLeft=m.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(h){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,h(this.prop.container,u)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(h){var u=this.opt.jsPDF,m=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=m,m)for(var b=0;b<m.length;++b){var g=m[b],k=g.src.find(function(j){return j.format==="truetype"});k&&u.addFont(k.url,g.ref.name,g.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,u.context2d.save(!0),h(this.prop.container,v)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,h,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(c,h):this.outputPdf(c,h)},o.prototype.outputPdf=function(c,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,h)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(a(c)!=="object")return this;var h=Object.keys(c||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=c[u]};switch(u){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[u]=c[u]}}},this);return this.then(function(){return this.thenList(h)})},o.prototype.get=function(c,h){return this.then(function(){var u=c in o.template.prop?this.prop[c]:this.opt[c];return h?h(u):u})},o.prototype.setMargin=function(c){return this.then(function(){switch(a(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function h(u,m){return Math.floor(u*m/72*96)}return this.then(function(){(c=c||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:h(c.inner.width,c.k),height:h(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,h,u,m){return c!=null&&(this.progress.val=c),h!=null&&(this.progress.state=h),u!=null&&(this.progress.n=u),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,h,u,m){return this.setProgress(c?this.progress.val+c:null,h||null,u?this.progress.n+u:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(c,h){var u=this;return this.thenCore(c,h,function(m,x){return u.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(v){return u.updateProgress(null,m),v}).then(m,x).then(function(v){return u.updateProgress(1),v})})},o.prototype.thenCore=function(c,h,u){u=u||Promise.prototype.then,c&&(c=c.bind(this)),h&&(h=h.bind(this));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),x=u.call(m,c,h);return o.convert(x,this.__proto__)},o.prototype.thenExternal=function(c,h){return Promise.prototype.then.call(this,c,h)},o.prototype.thenList=function(c){var h=this;return c.forEach(function(u){h=h.thenCore(u)}),h},o.prototype.catch=function(c){c&&(c=c.bind(this));var h=Promise.prototype.catch.call(this,c);return o.convert(h,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,_t.getPageSize=function(c,h,u){if(ws(c)==="object"){var m=c;c=m.orientation,h=m.unit||h,u=m.format||u}h=h||"mm",u=u||"a4",c=(""+(c||"P")).toLowerCase();var x,v=(""+u).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+h}var g,k=0,j=0;if(b.hasOwnProperty(v))k=b[v][1]/x,j=b[v][0]/x;else try{k=u[1],j=u[0]}catch{throw new Error("Invalid format: "+u)}if(c==="p"||c==="portrait")c="p",j>k&&(g=j,j=k,k=g);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",k>j&&(g=j,j=k,k=g)}return{width:j,height:k,unit:h,k:x,orientation:c}},s.html=function(c,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Hu):null;var u=new o(h);return h.worker?u:u.from(c).doCallback()}}(_t.API),_t.API.addJS=function(s){return fm=s,this.internal.events.subscribe("postPutResources",function(){Rc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),hm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Rc!==void 0&&hm!==void 0&&this.internal.out("/Names <</JavaScript "+Rc+" 0 R>>")}),this},function(s){var t;s.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var c=i[o],h=a.exec(c);if(h!=null){var u=h[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,x=[];for(o=0;o<m;o++){var v=r.internal.newObject();x.push(v);var b=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<x.length;o++)r.internal.write("(page_"+(o+1)+")"+x[o]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,i,o){var c={title:i,options:o,children:[]};return a==null&&(a=this.root),a.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var i=0;i<a.children.length;i++)this.genIds_r(a.children[i])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<a.children.length;o++){var c=a.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(a)),o>0&&this.line("/Prev "+this.makeRef(a.children[o-1])),o<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var h=this.count=this.count_r({count:0},c);if(h>0&&this.line("/Count "+h),c.options&&c.options.pageNumber){var u=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var m=0;m<a.children.length;m++)this.renderItems(a.children[m])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,i){for(var o=0;o<i.children.length;o++)a.count++,this.count_r(a,i.children[o]);return a.count}}])}(_t.API),function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(r,a,i,o,c,h){var u,m=this.decode.DCT_DECODE,x=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(u=function(v){for(var b,g=256*v.charCodeAt(4)+v.charCodeAt(5),k=v.length,j={width:0,height:0,numcomponents:1},T=4;T<k;T+=2){if(T+=g,t.indexOf(v.charCodeAt(T+1))!==-1){b=256*v.charCodeAt(T+5)+v.charCodeAt(T+6),j={width:256*v.charCodeAt(T+7)+v.charCodeAt(T+8),height:b,numcomponents:v.charCodeAt(T+9)};break}g=256*v.charCodeAt(T+2)+v.charCodeAt(T+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}x={data:r,width:u.width,height:u.height,colorSpace:h,bitsPerComponent:8,filter:m,index:a,alias:i}}return x}}(_t.API);var al,Mc,mm,pm,gm,LN=function(){var s,t,r;function a(o){var c,h,u,m,x,v,b,g,k,j,T,S,P,B;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(c=this.readUInt32(),k=(function(){var U,Q;for(Q=[],U=0;U<4;++U)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),m=this.readUInt16()||100,v.delay=1e3*x/m,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(k==="fdAT"&&(this.pos+=4,c-=4),o=v?.data||this.imgData,S=0;0<=c?S<c:S>c;0<=c?++S:--S)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((j=u-this.transparency.indexed.length)>0)for(P=0;0<=j?P<j:P>j;0<=j?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":b=(T=this.read(c)).indexOf(0),g=String.fromCharCode.apply(String,T.slice(0,b)),this.text[g]=String.fromCharCode.apply(String,T.slice(b+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(o){var c,h;for(h=[],c=0;0<=o?c<o:c>o;0<=o?++c:--c)h.push(this.data[this.pos++]);return h},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(o){var c=this.pixelBitlength/8,h=new Uint8Array(this.width*this.height*c),u=0,m=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function x(v,b,g,k){var j,T,S,P,B,U,Q,ge,ae,ee,K,ue,I,q,ne,Y,he,pe,oe,ie,Ne,J=Math.ceil((m.width-v)/g),fe=Math.ceil((m.height-b)/k),R=m.width==J&&m.height==fe;for(q=c*J,ue=R?h:new Uint8Array(q*fe),U=o.length,I=0,T=0;I<fe&&u<U;){switch(o[u++]){case 0:for(P=he=0;he<q;P=he+=1)ue[T++]=o[u++];break;case 1:for(P=pe=0;pe<q;P=pe+=1)j=o[u++],B=P<c?0:ue[T-c],ue[T++]=(j+B)%256;break;case 2:for(P=oe=0;oe<q;P=oe+=1)j=o[u++],S=(P-P%c)/c,ne=I&&ue[(I-1)*q+S*c+P%c],ue[T++]=(ne+j)%256;break;case 3:for(P=ie=0;ie<q;P=ie+=1)j=o[u++],S=(P-P%c)/c,B=P<c?0:ue[T-c],ne=I&&ue[(I-1)*q+S*c+P%c],ue[T++]=(j+Math.floor((B+ne)/2))%256;break;case 4:for(P=Ne=0;Ne<q;P=Ne+=1)j=o[u++],S=(P-P%c)/c,B=P<c?0:ue[T-c],I===0?ne=Y=0:(ne=ue[(I-1)*q+S*c+P%c],Y=S&&ue[(I-1)*q+(S-1)*c+P%c]),Q=B+ne-Y,ge=Math.abs(Q-B),ee=Math.abs(Q-ne),K=Math.abs(Q-Y),ae=ge<=ee&&ge<=K?B:ee<=K?ne:Y,ue[T++]=(j+ae)%256;break;default:throw new Error("Invalid filter algorithm: "+o[u-1])}if(!R){var E=((b+I*k)*m.width+v)*c,D=I*q;for(P=0;P<J;P+=1){for(var W=0;W<c;W+=1)h[E++]=ue[D++];E+=(g-1)*c}}I++}}return o=oN(o),m.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),h},a.prototype.decodePalette=function(){var o,c,h,u,m,x,v,b,g;for(h=this.palette,x=this.transparency.indexed||[],m=new Uint8Array((x.length||0)+h.length),u=0,o=0,c=v=0,b=h.length;v<b;c=v+=3)m[u++]=h[c],m[u++]=h[c+1],m[u++]=h[c+2],m[u++]=(g=x[o++])!=null?g:255;return m},a.prototype.copyToImageData=function(o,c){var h,u,m,x,v,b,g,k,j,T,S;if(u=this.colors,j=null,h=this.hasAlphaChannel,this.palette.length&&(j=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),u=4,h=!0),k=(m=o.data||o).length,v=j||c,x=b=0,u===1)for(;x<k;)g=j?4*c[x/4]:b,T=v[g++],m[x++]=T,m[x++]=T,m[x++]=T,m[x++]=h?v[g++]:255,b=g;else for(;x<k;)g=j?4*c[x/4]:b,m[x++]=v[g++],m[x++]=v[g++],m[x++]=v[g++],m[x++]=h?v[g++]:255,b=g},a.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(kt)==="[object Window]"){try{t=kt.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),s=function(o){var c;if(i()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(c=new Image).src=t.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(o){var c,h,u,m,x,v,b,g;if(this.animation){for(g=[],h=x=0,v=(b=this.animation.frames).length;x<v;h=++x)c=b[h],u=o.createImageData(c.width,c.height),m=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(u,m),c.imageData=u,g.push(c.image=s(u));return g}},a.prototype.renderFrame=function(o,c){var h,u,m;return h=(u=this.animation.frames)[c],m=u[c-1],c===0&&o.clearRect(0,0,this.width,this.height),m?.disposeOp===1?o.clearRect(m.xOffset,m.yOffset,m.width,m.height):m?.disposeOp===2&&o.putImageData(m.imageData,m.xOffset,m.yOffset),h.blendOp===0&&o.clearRect(h.xOffset,h.yOffset,h.width,h.height),o.drawImage(h.image,h.xOffset,h.yOffset)},a.prototype.animate=function(o){var c,h,u,m,x,v,b=this;return h=0,v=this.animation,m=v.numFrames,u=v.frames,x=v.numPlays,(c=function(){var g,k;if(g=h++%m,k=u[g],b.renderFrame(o,g),m>1&&h/m<x)return b.animation._timeout=setTimeout(c,k.delay)})()},a.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},a.prototype.render=function(o){var c,h;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,c=o.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(h=c.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),c.putImageData(h,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function AN(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=s[t++]|s[t++]<<8,a=s[t++]|s[t++]<<8,i=s[t++],o=i>>7,c=1<<(7&i)+1;s[t++],s[t++];var h=null,u=null;o&&(h=t,u=c,t+=3*c);var m=!0,x=[],v=0,b=null,g=0,k=null;for(this.width=r,this.height=a;m&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,k=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((I=s[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=s[t++];v=s[t++]|s[t++]<<8,b=s[t++],(1&j)==0&&(b=null),g=j>>2&7,t++;break;case 254:for(;;){if(!((I=s[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var T=s[t++]|s[t++]<<8,S=s[t++]|s[t++]<<8,P=s[t++]|s[t++]<<8,B=s[t++]|s[t++]<<8,U=s[t++],Q=U>>6&1,ge=1<<(7&U)+1,ae=h,ee=u,K=!1;U>>7&&(K=!0,ae=t,ee=ge,t+=3*ge);var ue=t;for(t++;;){var I;if(!((I=s[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}x.push({x:T,y:S,width:P,height:B,has_local_palette:K,palette_offset:ae,palette_size:ee,data_offset:ue,data_length:t-ue,transparent_index:b,interlaced:!!Q,delay:v,disposal:g});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return k},this.frameInfo=function(q){if(q<0||q>=x.length)throw new Error("Frame index out of range.");return x[q]},this.decodeAndBlitFrameBGRA=function(q,ne){var Y=this.frameInfo(q),he=Y.width*Y.height,pe=new Uint8Array(he);xm(s,Y.data_offset,pe,he);var oe=Y.palette_offset,ie=Y.transparent_index;ie===null&&(ie=256);var Ne=Y.width,J=r-Ne,fe=Ne,R=4*(Y.y*r+Y.x),E=4*((Y.y+Y.height)*r+Y.x),D=R,W=4*J;Y.interlaced===!0&&(W+=4*r*7);for(var se=8,X=0,le=pe.length;X<le;++X){var ce=pe[X];if(fe===0&&(fe=Ne,(D+=W)>=E&&(W=4*J+4*r*(se-1),D=R+(Ne+J)*(se<<1),se>>=1)),ce===ie)D+=4;else{var xe=s[oe+3*ce],je=s[oe+3*ce+1],Me=s[oe+3*ce+2];ne[D++]=Me,ne[D++]=je,ne[D++]=xe,ne[D++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(q,ne){var Y=this.frameInfo(q),he=Y.width*Y.height,pe=new Uint8Array(he);xm(s,Y.data_offset,pe,he);var oe=Y.palette_offset,ie=Y.transparent_index;ie===null&&(ie=256);var Ne=Y.width,J=r-Ne,fe=Ne,R=4*(Y.y*r+Y.x),E=4*((Y.y+Y.height)*r+Y.x),D=R,W=4*J;Y.interlaced===!0&&(W+=4*r*7);for(var se=8,X=0,le=pe.length;X<le;++X){var ce=pe[X];if(fe===0&&(fe=Ne,(D+=W)>=E&&(W=4*J+4*r*(se-1),D=R+(Ne+J)*(se<<1),se>>=1)),ce===ie)D+=4;else{var xe=s[oe+3*ce],je=s[oe+3*ce+1],Me=s[oe+3*ce+2];ne[D++]=xe,ne[D++]=je,ne[D++]=Me,ne[D++]=255}--fe}}}function xm(s,t,r,a){for(var i=s[t++],o=1<<i,c=o+1,h=c+1,u=i+1,m=(1<<u)-1,x=0,v=0,b=0,g=s[t++],k=new Int32Array(4096),j=null;;){for(;x<16&&g!==0;)v|=s[t++]<<x,x+=8,g===1?g=s[t++]:--g;if(x<u)break;var T=v&m;if(v>>=u,x-=u,T!==o){if(T===c)break;for(var S=T<h?T:j,P=0,B=S;B>o;)B=k[B]>>8,++P;var U=B;if(b+P+(S!==T?1:0)>a)return void As.log("Warning, gif stream longer than expected.");r[b++]=U;var Q=b+=P;for(S!==T&&(r[b++]=U),B=S;P--;)B=k[B],r[--Q]=255&B,B>>=8;j!==null&&h<4096&&(k[h++]=j<<8|U,h>=m+1&&u<12&&(++u,m=m<<1|1)),j=T}else h=c+1,m=(1<<(u=i+1))-1,j=null}return b!==a&&As.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function lu(s){var t,r,a,i,o,c=Math.floor,h=new Array(64),u=new Array(64),m=new Array(64),x=new Array(64),v=new Array(65535),b=new Array(65535),g=new Array(64),k=new Array(64),j=[],T=0,S=7,P=new Array(64),B=new Array(64),U=new Array(64),Q=new Array(256),ge=new Array(2048),ae=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ee=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ne=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(R,E){for(var D=0,W=0,se=new Array,X=1;X<=16;X++){for(var le=1;le<=R[X];le++)se[E[W]]=[],se[E[W]][0]=D,se[E[W]][1]=X,W++,D++;D*=2}return se}function oe(R){for(var E=R[0],D=R[1]-1;D>=0;)E&1<<D&&(T|=1<<S),D--,--S<0&&(T==255?(ie(255),ie(0)):ie(T),S=7,T=0)}function ie(R){j.push(R)}function Ne(R){ie(R>>8&255),ie(255&R)}function J(R,E,D,W,se){for(var X,le=se[0],ce=se[240],xe=function(_e,Ie){var ze,Ge,nt,pt,Nt,yt,qt,is,xt,Ct,Ke=0;for(xt=0;xt<8;++xt){ze=_e[Ke],Ge=_e[Ke+1],nt=_e[Ke+2],pt=_e[Ke+3],Nt=_e[Ke+4],yt=_e[Ke+5],qt=_e[Ke+6];var dr=ze+(is=_e[Ke+7]),Gt=ze-is,gr=Ge+qt,cs=Ge-qt,ds=nt+yt,_r=nt-yt,Yt=pt+Nt,sa=pt-Nt,Ns=dr+Yt,Ur=dr-Yt,xn=gr+ds,Is=gr-ds;_e[Ke]=Ns+xn,_e[Ke+4]=Ns-xn;var Pt=.707106781*(Is+Ur);_e[Ke+2]=Ur+Pt,_e[Ke+6]=Ur-Pt;var as=.382683433*((Ns=sa+_r)-(Is=cs+Gt)),ra=.5411961*Ns+as,er=1.306562965*Is+as,Hr=.707106781*(xn=_r+cs),Sr=Gt+Hr,ft=Gt-Hr;_e[Ke+5]=ft+ra,_e[Ke+3]=ft-ra,_e[Ke+1]=Sr+er,_e[Ke+7]=Sr-er,Ke+=8}for(Ke=0,xt=0;xt<8;++xt){ze=_e[Ke],Ge=_e[Ke+8],nt=_e[Ke+16],pt=_e[Ke+24],Nt=_e[Ke+32],yt=_e[Ke+40],qt=_e[Ke+48];var rn=ze+(is=_e[Ke+56]),vn=ze-is,kr=Ge+qt,us=Ge-qt,Je=nt+yt,Cr=nt-yt,na=pt+Nt,Rr=pt-Nt,Mr=rn+na,xr=rn-na,Wr=kr+Je,ve=kr-Je;_e[Ke]=Mr+Wr,_e[Ke+32]=Mr-Wr;var Oe=.707106781*(ve+xr);_e[Ke+16]=xr+Oe,_e[Ke+48]=xr-Oe;var Ve=.382683433*((Mr=Rr+Cr)-(ve=us+vn)),rt=.5411961*Mr+Ve,Dt=1.306562965*ve+Ve,At=.707106781*(Wr=Cr+us),Tt=vn+At,jt=vn-At;_e[Ke+40]=jt+rt,_e[Ke+24]=jt-rt,_e[Ke+8]=Tt+Dt,_e[Ke+56]=Tt-Dt,Ke++}for(xt=0;xt<64;++xt)Ct=_e[xt]*Ie[xt],g[xt]=Ct>0?Ct+.5|0:Ct-.5|0;return g}(R,E),je=0;je<64;++je)k[ae[je]]=xe[je];var Me=k[0]-D;D=k[0],Me==0?oe(W[0]):(oe(W[b[X=32767+Me]]),oe(v[X]));for(var De=63;De>0&&k[De]==0;)De--;if(De==0)return oe(le),D;for(var Ye,G=1;G<=De;){for(var Z=G;k[G]==0&&G<=De;)++G;var Fe=G-Z;if(Fe>=16){Ye=Fe>>4;for(var Be=1;Be<=Ye;++Be)oe(ce);Fe&=15}X=32767+k[G],oe(se[(Fe<<4)+b[X]]),oe(v[X]),G++}return De!=63&&oe(le),D}function fe(R){R=Math.min(Math.max(R,1),100),o!=R&&(function(E){for(var D=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var se=c((D[W]*E+50)/100);se=Math.min(Math.max(se,1),255),h[ae[W]]=se}for(var X=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var ce=c((X[le]*E+50)/100);ce=Math.min(Math.max(ce,1),255),u[ae[le]]=ce}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,Me=0;Me<8;Me++)for(var De=0;De<8;De++)m[je]=1/(h[ae[je]]*xe[Me]*xe[De]*8),x[je]=1/(u[ae[je]]*xe[Me]*xe[De]*8),je++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),o=R)}this.encode=function(R,E){E&&fe(E),j=new Array,T=0,S=7,Ne(65496),Ne(65504),Ne(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),Ne(1),Ne(1),ie(0),ie(0),function(){Ne(65499),Ne(132),ie(0);for(var Ge=0;Ge<64;Ge++)ie(h[Ge]);ie(1);for(var nt=0;nt<64;nt++)ie(u[nt])}(),function(Ge,nt){Ne(65472),Ne(17),ie(8),Ne(nt),Ne(Ge),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)}(R.width,R.height),function(){Ne(65476),Ne(418),ie(0);for(var Ge=0;Ge<16;Ge++)ie(ee[Ge+1]);for(var nt=0;nt<=11;nt++)ie(K[nt]);ie(16);for(var pt=0;pt<16;pt++)ie(ue[pt+1]);for(var Nt=0;Nt<=161;Nt++)ie(I[Nt]);ie(1);for(var yt=0;yt<16;yt++)ie(q[yt+1]);for(var qt=0;qt<=11;qt++)ie(ne[qt]);ie(17);for(var is=0;is<16;is++)ie(Y[is+1]);for(var xt=0;xt<=161;xt++)ie(he[xt])}(),Ne(65498),Ne(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var D=0,W=0,se=0;T=0,S=7,this.encode.displayName="_encode_";for(var X,le,ce,xe,je,Me,De,Ye,G,Z=R.data,Fe=R.width,Be=R.height,_e=4*Fe,Ie=0;Ie<Be;){for(X=0;X<_e;){for(je=_e*Ie+X,De=-1,Ye=0,G=0;G<64;G++)Me=je+(Ye=G>>3)*_e+(De=4*(7&G)),Ie+Ye>=Be&&(Me-=_e*(Ie+1+Ye-Be)),X+De>=_e&&(Me-=X+De-_e+4),le=Z[Me++],ce=Z[Me++],xe=Z[Me++],P[G]=(ge[le]+ge[ce+256>>0]+ge[xe+512>>0]>>16)-128,B[G]=(ge[le+768>>0]+ge[ce+1024>>0]+ge[xe+1280>>0]>>16)-128,U[G]=(ge[le+1280>>0]+ge[ce+1536>>0]+ge[xe+1792>>0]>>16)-128;D=J(P,m,D,t,a),W=J(B,x,W,r,i),se=J(U,x,se,r,i),X+=32}Ie+=8}if(S>=0){var ze=[];ze[1]=S+1,ze[0]=(1<<S+1)-1,oe(ze)}return Ne(65497),new Uint8Array(j)},s=s||50,function(){for(var R=String.fromCharCode,E=0;E<256;E++)Q[E]=R(E)}(),t=pe(ee,K),r=pe(q,ne),a=pe(ue,I),i=pe(Y,he),function(){for(var R=1,E=2,D=1;D<=15;D++){for(var W=R;W<E;W++)b[32767+W]=D,v[32767+W]=[],v[32767+W][1]=D,v[32767+W][0]=W;for(var se=-(E-1);se<=-R;se++)b[32767+se]=D,v[32767+se]=[],v[32767+se][1]=D,v[32767+se][0]=E-1+se;R<<=1,E<<=1}}(),function(){for(var R=0;R<256;R++)ge[R]=19595*R,ge[R+256>>0]=38470*R,ge[R+512>>0]=7471*R+32768,ge[R+768>>0]=-11059*R,ge[R+1024>>0]=-21709*R,ge[R+1280>>0]=32768*R+8421375,ge[R+1536>>0]=-27439*R,ge[R+1792>>0]=-5329*R}(),fe(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ga(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function vm(s){function t(ee){if(!ee)throw Error("assert :P")}function r(ee,K,ue){for(var I=0;4>I;I++)if(ee[K+I]!=ue.charCodeAt(I))return!0;return!1}function a(ee,K,ue,I,q){for(var ne=0;ne<q;ne++)ee[K+ne]=ue[I+ne]}function i(ee,K,ue,I){for(var q=0;q<I;q++)ee[K+q]=ue}function o(ee){return new Int32Array(ee)}function c(ee,K){for(var ue=[],I=0;I<ee;I++)ue.push(new K);return ue}function h(ee,K){var ue=[];return function I(q,ne,Y){for(var he=Y[ne],pe=0;pe<he&&(q.push(Y.length>ne+1?[]:new K),!(Y.length<ne+1));pe++)I(q[pe],ne+1,Y)}(ue,0,ee),ue}var u=function(){var ee=this;function K(d,p){for(var N=1<<p-1>>>0;d&N;)N>>>=1;return N?(d&N-1)+N:d}function ue(d,p,N,C,M){t(!(C%N));do d[p+(C-=N)]=M;while(0<C)}function I(d,p,N,C,M){if(t(2328>=M),512>=M)var F=o(512);else if((F=o(M))==null)return 0;return function(z,H,V,te,ye,Pe){var Le,Se,Ue=H,Re=1<<V,be=o(16),we=o(16);for(t(ye!=0),t(te!=null),t(z!=null),t(0<V),Se=0;Se<ye;++Se){if(15<te[Se])return 0;++be[te[Se]]}if(be[0]==ye)return 0;for(we[1]=0,Le=1;15>Le;++Le){if(be[Le]>1<<Le)return 0;we[Le+1]=we[Le]+be[Le]}for(Se=0;Se<ye;++Se)Le=te[Se],0<te[Se]&&(Pe[we[Le]++]=Se);if(we[15]==1)return(te=new q).g=0,te.value=Pe[0],ue(z,Ue,1,Re,te),Re;var qe,We=-1,$e=Re-1,at=0,Xe=1,wt=1,et=1<<V;for(Se=0,Le=1,ye=2;Le<=V;++Le,ye<<=1){if(Xe+=wt<<=1,0>(wt-=be[Le]))return 0;for(;0<be[Le];--be[Le])(te=new q).g=Le,te.value=Pe[Se++],ue(z,Ue+at,ye,et,te),at=K(at,Le)}for(Le=V+1,ye=2;15>=Le;++Le,ye<<=1){if(Xe+=wt<<=1,0>(wt-=be[Le]))return 0;for(;0<be[Le];--be[Le]){if(te=new q,(at&$e)!=We){for(Ue+=et,qe=1<<(We=Le)-V;15>We&&!(0>=(qe-=be[We]));)++We,qe<<=1;Re+=et=1<<(qe=We-V),z[H+(We=at&$e)].g=qe+V,z[H+We].value=Ue-H-We}te.g=Le-V,te.value=Pe[Se++],ue(z,Ue+(at>>V),ye,et,te),at=K(at,Le)}}return Xe!=2*we[15]-1?0:Re}(d,p,N,C,M,F)}function q(){this.value=this.g=0}function ne(){this.value=this.g=0}function Y(){this.G=c(5,q),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ks,ne)}function he(d,p,N,C){t(d!=null),t(p!=null),t(2147483648>C),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=p,d.pa=N,d.Jd=p,d.Yc=N+C,d.Zc=4<=C?N+C-4+1:N,X(d)}function pe(d,p){for(var N=0;0<p--;)N|=ce(d,128)<<p;return N}function oe(d,p){var N=pe(d,p);return le(d)?-N:N}function ie(d,p,N,C){var M,F=0;for(t(d!=null),t(p!=null),t(4294967288>C),d.Sb=C,d.Ra=0,d.u=0,d.h=0,4<C&&(C=4),M=0;M<C;++M)F+=p[N+M]<<8*M;d.Ra=F,d.bb=C,d.oa=p,d.pa=N}function Ne(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<da-8>>>0,++d.bb,d.u-=8;D(d)&&(d.h=1,d.u=0)}function J(d,p){if(t(0<=p),!d.h&&p<=cn){var N=E(d)&yi[p];return d.u+=p,Ne(d),N}return d.h=1,d.u=0}function fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function E(d){return d.Ra>>>(d.u&da-1)>>>0}function D(d){return t(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>da}function W(d,p){d.u=p,d.h=D(d)}function se(d){d.u>=lo&&(t(d.u>=lo),Ne(d))}function X(d){t(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(t(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function le(d){return pe(d,1)}function ce(d,p){var N=d.Ca;0>d.b&&X(d);var C=d.b,M=N*p>>>8,F=(d.I>>>C>M)+0;for(F?(N-=M,d.I-=M+1<<C>>>0):N=M+1,C=N,M=0;256<=C;)M+=8,C>>=8;return C=7^M+Lr[C],d.b-=C,d.Ca=(N<<C)-1,F}function xe(d,p,N){d[p+0]=N>>24&255,d[p+1]=N>>16&255,d[p+2]=N>>8&255,d[p+3]=N>>0&255}function je(d,p){return d[p+0]<<0|d[p+1]<<8}function Me(d,p){return je(d,p)|d[p+2]<<16}function De(d,p){return je(d,p)|je(d,p+2)<<16}function Ye(d,p){var N=1<<p;return t(d!=null),t(0<p),d.X=o(N),d.X==null?0:(d.Mb=32-p,d.Xa=p,1)}function G(d,p){t(d!=null),t(p!=null),t(d.Xa==p.Xa),a(p.X,0,d.X,0,1<<p.Xa)}function Z(){this.X=[],this.Xa=this.Mb=0}function Fe(d,p,N,C){t(N!=null),t(C!=null);var M=N[0],F=C[0];return M==0&&(M=(d*F+p/2)/p),F==0&&(F=(p*M+d/2)/d),0>=M||0>=F?0:(N[0]=M,C[0]=F,1)}function Be(d,p){return d+(1<<p)-1>>>p}function _e(d,p){return((4278255360&d)+(4278255360&p)>>>0&4278255360)+((16711935&d)+(16711935&p)>>>0&16711935)>>>0}function Ie(d,p){ee[p]=function(N,C,M,F,z,H,V){var te;for(te=0;te<z;++te){var ye=ee[d](H[V+te-1],M,F+te);H[V+te]=_e(N[C+te],ye)}}}function ze(){this.ud=this.hd=this.jd=0}function Ge(d,p){return((4278124286&(d^p))>>>1)+(d&p)>>>0}function nt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function pt(d,p){return nt(d+(d-p+.5>>1))}function Nt(d,p,N){return Math.abs(p-N)-Math.abs(d-N)}function yt(d,p,N,C,M,F,z){for(C=F[z-1],N=0;N<M;++N)F[z+N]=C=_e(d[p+N],C)}function qt(d,p,N,C,M){var F;for(F=0;F<N;++F){var z=d[p+F],H=z>>8&255,V=16711935&(V=(V=16711935&z)+((H<<16)+H));C[M+F]=(4278255360&z)+V>>>0}}function is(d,p){p.jd=d>>0&255,p.hd=d>>8&255,p.ud=d>>16&255}function xt(d,p,N,C,M,F){var z;for(z=0;z<C;++z){var H=p[N+z],V=H>>>8,te=H,ye=255&(ye=(ye=H>>>16)+((d.jd<<24>>24)*(V<<24>>24)>>>5));te=255&(te=(te=te+((d.hd<<24>>24)*(V<<24>>24)>>>5))+((d.ud<<24>>24)*(ye<<24>>24)>>>5)),M[F+z]=(4278255360&H)+(ye<<16)+te}}function Ct(d,p,N,C,M){ee[p]=function(F,z,H,V,te,ye,Pe,Le,Se){for(V=Pe;V<Le;++V)for(Pe=0;Pe<Se;++Pe)te[ye++]=M(H[C(F[z++])])},ee[d]=function(F,z,H,V,te,ye,Pe){var Le=8>>F.b,Se=F.Ea,Ue=F.K[0],Re=F.w;if(8>Le)for(F=(1<<F.b)-1,Re=(1<<Le)-1;z<H;++z){var be,we=0;for(be=0;be<Se;++be)be&F||(we=C(V[te++])),ye[Pe++]=M(Ue[we&Re]),we>>=Le}else ee["VP8LMapColor"+N](V,te,Ue,Re,ye,Pe,z,H,Se)}}function Ke(d,p,N,C,M){for(N=p+N;p<N;){var F=d[p++];C[M++]=F>>16&255,C[M++]=F>>8&255,C[M++]=F>>0&255}}function dr(d,p,N,C,M){for(N=p+N;p<N;){var F=d[p++];C[M++]=F>>16&255,C[M++]=F>>8&255,C[M++]=F>>0&255,C[M++]=F>>24&255}}function Gt(d,p,N,C,M){for(N=p+N;p<N;){var F=(z=d[p++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;C[M++]=F,C[M++]=z}}function gr(d,p,N,C,M){for(N=p+N;p<N;){var F=(z=d[p++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;C[M++]=F,C[M++]=z}}function cs(d,p,N,C,M){for(N=p+N;p<N;){var F=d[p++];C[M++]=F>>0&255,C[M++]=F>>8&255,C[M++]=F>>16&255}}function ds(d,p,N,C,M,F){if(F==0)for(N=p+N;p<N;)xe(C,((F=d[p++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),M+=32;else a(C,M,d,p,N)}function _r(d,p){ee[p][0]=ee[d+"0"],ee[p][1]=ee[d+"1"],ee[p][2]=ee[d+"2"],ee[p][3]=ee[d+"3"],ee[p][4]=ee[d+"4"],ee[p][5]=ee[d+"5"],ee[p][6]=ee[d+"6"],ee[p][7]=ee[d+"7"],ee[p][8]=ee[d+"8"],ee[p][9]=ee[d+"9"],ee[p][10]=ee[d+"10"],ee[p][11]=ee[d+"11"],ee[p][12]=ee[d+"12"],ee[p][13]=ee[d+"13"],ee[p][14]=ee[d+"0"],ee[p][15]=ee[d+"0"]}function Yt(d){return d==Go||d==Yo||d==Ko||d==n}function sa(){this.eb=[],this.size=this.A=this.fb=0}function Ns(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ur(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new sa,this.f.kb=new Ns,this.sd=null}function xn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Is(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pt(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function as(d,p){var N=d.T,C=p.ba.f.RGBA,M=C.eb,F=C.fb+d.ka*C.A,z=zr[p.ba.S],H=d.y,V=d.O,te=d.f,ye=d.N,Pe=d.ea,Le=d.W,Se=p.cc,Ue=p.dc,Re=p.Mc,be=p.Nc,we=d.ka,qe=d.ka+d.T,We=d.U,$e=We+1>>1;for(we==0?z(H,V,null,null,te,ye,Pe,Le,te,ye,Pe,Le,M,F,null,null,We):(z(p.ec,p.fc,H,V,Se,Ue,Re,be,te,ye,Pe,Le,M,F-C.A,M,F,We),++N);we+2<qe;we+=2)Se=te,Ue=ye,Re=Pe,be=Le,ye+=d.Rc,Le+=d.Rc,F+=2*C.A,z(H,(V+=2*d.fa)-d.fa,H,V,Se,Ue,Re,be,te,ye,Pe,Le,M,F-C.A,M,F,We);return V+=d.fa,d.j+qe<d.o?(a(p.ec,p.fc,H,V,We),a(p.cc,p.dc,te,ye,$e),a(p.Mc,p.Nc,Pe,Le,$e),N--):1&qe||z(H,V,null,null,te,ye,Pe,Le,te,ye,Pe,Le,M,F+C.A,null,null,We),N}function ra(d,p,N){var C=d.F,M=[d.J];if(C!=null){var F=d.U,z=p.ba.S,H=z==mo||z==Ko;p=p.ba.f.RGBA;var V=[0],te=d.ka;V[0]=d.T,d.Kb&&(te==0?--V[0]:(--te,M[0]-=d.width),d.j+d.ka+d.T==d.o&&(V[0]=d.o-d.j-te));var ye=p.eb;te=p.fb+te*p.A,d=ps(C,M[0],d.width,F,V,ye,te+(H?0:3),p.A),t(N==V),d&&Yt(z)&&Nr(ye,te,H,F,V,p.A)}return 0}function er(d){var p=d.ma,N=p.ba.S,C=11>N,M=N==ho||N==fo||N==mo||N==Zo||N==12||Yt(N);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!oo(p.Oa,d,M?11:12))return 0;if(M&&Yt(N)&&Ze(),d.da)alert("todo:use_scaling");else{if(C){if(p.Ib=Pt,d.Kb){if(N=d.U+1>>1,p.memory=o(d.U+2*N),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+d.U,p.Mc=p.cc,p.Nc=p.dc+N,p.Ib=as,Ze()}}else alert("todo:EmitYUV");M&&(p.Jb=ra,C&&ke())}if(C&&!Yh){for(d=0;256>d;++d)Wv[d]=89858*(d-128)+gc>>pc,Gv[d]=-22014*(d-128)+gc,Zv[d]=-45773*(d-128),Vv[d]=113618*(d-128)+gc>>pc;for(d=Ol;d<Od;++d)p=76283*(d-16)+gc>>pc,Yv[d-Ol]=Ds(p,255),Kv[d-Ol]=Ds(p+8>>4,15);Yh=1}return 1}function Hr(d){var p=d.ma,N=d.U,C=d.T;return t(!(1&d.ka)),0>=N||0>=C?0:(N=p.Ib(d,p),p.Jb!=null&&p.Jb(d,p,N),p.Dc+=N,1)}function Sr(d){d.ma.memory=null}function ft(d,p,N,C){return J(d,8)!=47?0:(p[0]=J(d,14)+1,N[0]=J(d,14)+1,C[0]=J(d,1),J(d,3)!=0?0:!d.h)}function rn(d,p){if(4>d)return d+1;var N=d-2>>1;return(2+(1&d)<<N)+J(p,N)+1}function vn(d,p){return 120<p?p-120:1<=(N=((N=de[p-1])>>4)*d+(8-(15&N)))?N:1;var N}function kr(d,p,N){var C=E(N),M=d[p+=255&C].g-8;return 0<M&&(W(N,N.u+8),C=E(N),p+=d[p].value,p+=C&(1<<M)-1),W(N,N.u+d[p].g),d[p].value}function us(d,p,N){return N.g+=d.g,N.value+=d.value<<p>>>0,t(8>=N.g),d.g}function Je(d,p,N){var C=d.xc;return t((p=C==0?0:d.vc[d.md*(N>>C)+(p>>C)])<d.Wb),d.Ya[p]}function Cr(d,p,N,C){var M=d.ab,F=d.c*p,z=d.C;p=z+p;var H=N,V=C;for(C=d.Ta,N=d.Ua;0<M--;){var te=d.gc[M],ye=z,Pe=p,Le=H,Se=V,Ue=(V=C,H=N,te.Ea);switch(t(ye<Pe),t(Pe<=te.nc),te.hc){case 2:Ho(Le,Se,(Pe-ye)*Ue,V,H);break;case 0:var Re=ye,be=Pe,we=V,qe=H,We=(et=te).Ea;Re==0&&(El(Le,Se,null,null,1,we,qe),yt(Le,Se+1,0,0,We-1,we,qe+1),Se+=We,qe+=We,++Re);for(var $e=1<<et.b,at=$e-1,Xe=Be(We,et.b),wt=et.K,et=et.w+(Re>>et.b)*Xe;Re<be;){var hs=wt,vs=et,ls=1;for(dn(Le,Se,we,qe-We,1,we,qe);ls<We;){var rs=(ls&~at)+$e;rs>We&&(rs=We),(0,ua[hs[vs++]>>8&15])(Le,Se+ +ls,we,qe+ls-We,rs-ls,we,qe+ls),ls=rs}Se+=We,qe+=We,++Re&at||(et+=Xe)}Pe!=te.nc&&a(V,H-Ue,V,H+(Pe-ye-1)*Ue,Ue);break;case 1:for(Ue=Le,be=Se,We=(Le=te.Ea)-(qe=Le&~(we=(Se=1<<te.b)-1)),Re=Be(Le,te.b),$e=te.K,te=te.w+(ye>>te.b)*Re;ye<Pe;){for(at=$e,Xe=te,wt=new ze,et=be+qe,hs=be+Le;be<et;)is(at[Xe++],wt),ha(wt,Ue,be,Se,V,H),be+=Se,H+=Se;be<hs&&(is(at[Xe++],wt),ha(wt,Ue,be,We,V,H),be+=We,H+=We),++ye&we||(te+=Re)}break;case 3:if(Le==V&&Se==H&&0<te.b){for(be=V,Le=Ue=H+(Pe-ye)*Ue-(qe=(Pe-ye)*Be(te.Ea,te.b)),Se=V,we=H,Re=[],qe=(We=qe)-1;0<=qe;--qe)Re[qe]=Se[we+qe];for(qe=We-1;0<=qe;--qe)be[Le+qe]=Re[qe];yr(te,ye,Pe,V,Ue,V,H)}else yr(te,ye,Pe,Le,Se,V,H)}H=C,V=N}V!=N&&a(C,N,H,V,F)}function na(d,p){var N=d.V,C=d.Ba+d.c*d.C,M=p-d.C;if(t(p<=d.l.o),t(16>=M),0<M){var F=d.l,z=d.Ta,H=d.Ua,V=F.width;if(Cr(d,M,N,C),M=H=[H],t((N=d.C)<(C=p)),t(F.v<F.va),C>F.o&&(C=F.o),N<F.j){var te=F.j-N;N=F.j,M[0]+=te*V}if(N>=C?N=0:(M[0]+=4*F.v,F.ka=N-F.j,F.U=F.va-F.v,F.T=C-N,N=1),N){if(H=H[0],11>(N=d.ca).S){var ye=N.f.RGBA,Pe=(C=N.S,M=F.U,F=F.T,te=ye.eb,ye.A),Le=F;for(ye=ye.fb+d.Ma*ye.A;0<Le--;){var Se=z,Ue=H,Re=M,be=te,we=ye;switch(C){case Vo:br(Se,Ue,Re,be,we);break;case ho:wr(Se,Ue,Re,be,we);break;case Go:wr(Se,Ue,Re,be,we),Nr(be,we,0,Re,1,0);break;case Il:Sn(Se,Ue,Re,be,we);break;case fo:ds(Se,Ue,Re,be,we,1);break;case Yo:ds(Se,Ue,Re,be,we,1),Nr(be,we,0,Re,1,0);break;case mo:ds(Se,Ue,Re,be,we,0);break;case Ko:ds(Se,Ue,Re,be,we,0),Nr(be,we,1,Re,1,0);break;case Zo:On(Se,Ue,Re,be,we);break;case n:On(Se,Ue,Re,be,we),ms(be,we,Re,1,0);break;case hc:Gr(Se,Ue,Re,be,we);break;default:t(0)}H+=V,ye+=Pe}d.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");t(d.Ma<=N.height)}}d.C=p,t(d.C<=d.i)}function Rr(d){var p;if(0<d.ua)return 0;for(p=0;p<d.Wb;++p){var N=d.Ya[p].G,C=d.Ya[p].H;if(0<N[1][C[1]+0].g||0<N[2][C[2]+0].g||0<N[3][C[3]+0].g)return 0}return 1}function Mr(d,p,N,C,M,F){if(d.Z!=0){var z=d.qd,H=d.rd;for(t(xs[d.Z]!=null);p<N;++p)xs[d.Z](z,H,C,M,C,M,F),z=C,H=M,M+=F;d.qd=z,d.rd=H}}function xr(d,p){var N=d.l.ma,C=N.Z==0||N.Z==1?d.l.j:d.C;if(C=d.C<C?C:d.C,t(p<=d.l.o),p>C){var M=d.l.width,F=N.ca,z=N.tb+M*C,H=d.V,V=d.Ba+d.c*C,te=d.gc;t(d.ab==1),t(te[0].hc==3),_n(te[0],C,p,H,V,F,z),Mr(N,C,p,F,z,M)}d.C=d.Ma=p}function Wr(d,p,N,C,M,F,z){var H=d.$/C,V=d.$%C,te=d.m,ye=d.s,Pe=N+d.$,Le=Pe;M=N+C*M;var Se=N+C*F,Ue=280+ye.ua,Re=d.Pb?H:16777216,be=0<ye.ua?ye.Wa:null,we=ye.wc,qe=Pe<Se?Je(ye,V,H):null;t(d.C<F),t(Se<=M);var We=!1;e:for(;;){for(;We||Pe<Se;){var $e=0;if(H>=Re){var at=Pe-N;t((Re=d).Pb),Re.wd=Re.m,Re.xd=at,0<Re.s.ua&&G(Re.s.Wa,Re.s.vb),Re=H+Ae}if(V&we||(qe=Je(ye,V,H)),t(qe!=null),qe.Qb&&(p[Pe]=qe.qb,We=!0),!We)if(se(te),qe.jc){$e=te,at=p;var Xe=Pe,wt=qe.pd[E($e)&Ks-1];t(qe.jc),256>wt.g?(W($e,$e.u+wt.g),at[Xe]=wt.value,$e=0):(W($e,$e.u+wt.g-256),t(256<=wt.value),$e=wt.value),$e==0&&(We=!0)}else $e=kr(qe.G[0],qe.H[0],te);if(te.h)break;if(We||256>$e){if(!We)if(qe.nd)p[Pe]=(qe.qb|$e<<8)>>>0;else{if(se(te),We=kr(qe.G[1],qe.H[1],te),se(te),at=kr(qe.G[2],qe.H[2],te),Xe=kr(qe.G[3],qe.H[3],te),te.h)break;p[Pe]=(Xe<<24|We<<16|$e<<8|at)>>>0}if(We=!1,++Pe,++V>=C&&(V=0,++H,z!=null&&H<=F&&!(H%16)&&z(d,H),be!=null))for(;Le<Pe;)$e=p[Le++],be.X[(506832829*$e&4294967295)>>>be.Mb]=$e}else if(280>$e){if($e=rn($e-256,te),at=kr(qe.G[4],qe.H[4],te),se(te),at=vn(C,at=rn(at,te)),te.h)break;if(Pe-N<at||M-Pe<$e)break e;for(Xe=0;Xe<$e;++Xe)p[Pe+Xe]=p[Pe+Xe-at];for(Pe+=$e,V+=$e;V>=C;)V-=C,++H,z!=null&&H<=F&&!(H%16)&&z(d,H);if(t(Pe<=M),V&we&&(qe=Je(ye,V,H)),be!=null)for(;Le<Pe;)$e=p[Le++],be.X[(506832829*$e&4294967295)>>>be.Mb]=$e}else{if(!($e<Ue))break e;for(We=$e-280,t(be!=null);Le<Pe;)$e=p[Le++],be.X[(506832829*$e&4294967295)>>>be.Mb]=$e;$e=Pe,t(!(We>>>(at=be).Xa)),p[$e]=at.X[We],We=!0}We||t(te.h==D(te))}if(d.Pb&&te.h&&Pe<M)t(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&G(d.s.vb,d.s.Wa);else{if(te.h)break e;z?.(d,H>F?F:H),d.a=0,d.$=Pe-N}return 1}return d.a=3,0}function ve(d){t(d!=null),d.vc=null,d.yc=null,d.Ya=null;var p=d.Wa;p!=null&&(p.X=null),d.vb=null,t(d!=null)}function Oe(){var d=new no;return d==null?null:(d.a=0,d.xb=Rl,_r("Predictor","VP8LPredictors"),_r("Predictor","VP8LPredictors_C"),_r("PredictorAdd","VP8LPredictorsAdd"),_r("PredictorAdd","VP8LPredictorsAdd_C"),Ho=qt,ha=xt,br=Ke,wr=dr,On=Gt,Gr=gr,Sn=cs,ee.VP8LMapColor32b=bi,ee.VP8LMapColor8b=ti,d)}function Ve(d,p,N,C,M){var F=1,z=[d],H=[p],V=C.m,te=C.s,ye=null,Pe=0;e:for(;;){if(N)for(;F&&J(V,1);){var Le=z,Se=H,Ue=C,Re=1,be=Ue.m,we=Ue.gc[Ue.ab],qe=J(be,2);if(Ue.Oc&1<<qe)F=0;else{switch(Ue.Oc|=1<<qe,we.hc=qe,we.Ea=Le[0],we.nc=Se[0],we.K=[null],++Ue.ab,t(4>=Ue.ab),qe){case 0:case 1:we.b=J(be,3)+2,Re=Ve(Be(we.Ea,we.b),Be(we.nc,we.b),0,Ue,we.K),we.K=we.K[0];break;case 3:var We,$e=J(be,8)+1,at=16<$e?0:4<$e?1:2<$e?2:3;if(Le[0]=Be(we.Ea,at),we.b=at,We=Re=Ve($e,1,0,Ue,we.K)){var Xe,wt=$e,et=we,hs=1<<(8>>et.b),vs=o(hs);if(vs==null)We=0;else{var ls=et.K[0],rs=et.w;for(vs[0]=et.K[0][0],Xe=1;Xe<1*wt;++Xe)vs[Xe]=_e(ls[rs+Xe],vs[Xe-1]);for(;Xe<4*hs;++Xe)vs[Xe]=0;et.K[0]=null,et.K[0]=vs,We=1}}Re=We;break;case 2:break;default:t(0)}F=Re}}if(z=z[0],H=H[0],F&&J(V,1)&&!(F=1<=(Pe=J(V,4))&&11>=Pe)){C.a=3;break e}var Ls;if(Ls=F)t:{var _s,Ut,hr,Pn=C,fr=z,Ln=H,ys=Pe,Fn=N,zn=Pn.m,Tr=Pn.s,Br=[null],fn=1,Jn=0,Da=Ce[ys];s:for(;;){if(Fn&&J(zn,1)){var Er=J(zn,3)+2,si=Be(fr,Er),po=Be(Ln,Er),Xo=si*po;if(!Ve(si,po,0,Pn,Br))break s;for(Br=Br[0],Tr.xc=Er,_s=0;_s<Xo;++_s){var ki=Br[_s]>>8&65535;Br[_s]=ki,ki>=fn&&(fn=ki+1)}}if(zn.h)break s;for(Ut=0;5>Ut;++Ut){var Js=w[Ut];!Ut&&0<ys&&(Js+=1<<ys),Jn<Js&&(Jn=Js)}var Dd=c(fn*Da,q),Xh=fn,Qh=c(Xh,Y);if(Qh==null)var vc=null;else t(65536>=Xh),vc=Qh;var Dl=o(Jn);if(vc==null||Dl==null||Dd==null){Pn.a=1;break s}var yc=Dd;for(_s=hr=0;_s<fn;++_s){var ma=vc[_s],Qo=ma.G,el=ma.H,ef=0,bc=1,tf=0;for(Ut=0;5>Ut;++Ut){Js=w[Ut],Qo[Ut]=yc,el[Ut]=hr,!Ut&&0<ys&&(Js+=1<<ys);n:{var wc,Fd=Js,Nc=Pn,Fl=Dl,Qv=yc,e1=hr,zd=0,Ci=Nc.m,t1=J(Ci,1);if(i(Fl,0,0,Fd),t1){var s1=J(Ci,1)+1,r1=J(Ci,1),sf=J(Ci,r1==0?1:8);Fl[sf]=1,s1==2&&(Fl[sf=J(Ci,8)]=1);var jc=1}else{var rf=o(19),nf=J(Ci,4)+4;if(19<nf){Nc.a=3;var _c=0;break n}for(wc=0;wc<nf;++wc)rf[$[wc]]=J(Ci,3);var Bd=void 0,zl=void 0,af=Nc,n1=rf,Sc=Fd,of=Fl,qd=0,Pi=af.m,lf=8,cf=c(128,q);r:for(;I(cf,0,7,n1,19);){if(J(Pi,1)){var a1=2+2*J(Pi,3);if((Bd=2+J(Pi,a1))>Sc)break r}else Bd=Sc;for(zl=0;zl<Sc&&Bd--;){se(Pi);var df=cf[0+(127&E(Pi))];W(Pi,Pi.u+df.g);var tl=df.value;if(16>tl)of[zl++]=tl,tl!=0&&(lf=tl);else{var i1=tl==16,uf=tl-16,o1=f[uf],hf=J(Pi,l[uf])+o1;if(zl+hf>Sc)break r;for(var l1=i1?lf:0;0<hf--;)of[zl++]=l1}}qd=1;break r}qd||(af.a=3),jc=qd}(jc=jc&&!Ci.h)&&(zd=I(Qv,e1,8,Fl,Fd)),jc&&zd!=0?_c=zd:(Nc.a=3,_c=0)}if(_c==0)break s;if(bc&&A[Ut]==1&&(bc=yc[hr].g==0),ef+=yc[hr].g,hr+=_c,3>=Ut){var Bl,$d=Dl[0];for(Bl=1;Bl<Js;++Bl)Dl[Bl]>$d&&($d=Dl[Bl]);tf+=$d}}if(ma.nd=bc,ma.Qb=0,bc&&(ma.qb=(Qo[3][el[3]+0].value<<24|Qo[1][el[1]+0].value<<16|Qo[2][el[2]+0].value)>>>0,ef==0&&256>Qo[0][el[0]+0].value&&(ma.Qb=1,ma.qb+=Qo[0][el[0]+0].value<<8)),ma.jc=!ma.Qb&&6>tf,ma.jc){var kc,ri=ma;for(kc=0;kc<Ks;++kc){var Li=kc,Ai=ri.pd[Li],Cc=ri.G[0][ri.H[0]+Li];256<=Cc.value?(Ai.g=Cc.g+256,Ai.value=Cc.value):(Ai.g=0,Ai.value=0,Li>>=us(Cc,8,Ai),Li>>=us(ri.G[1][ri.H[1]+Li],16,Ai),Li>>=us(ri.G[2][ri.H[2]+Li],0,Ai),us(ri.G[3][ri.H[3]+Li],24,Ai))}}}Tr.vc=Br,Tr.Wb=fn,Tr.Ya=vc,Tr.yc=Dd,Ls=1;break t}Ls=0}if(!(F=Ls)){C.a=3;break e}if(0<Pe){if(te.ua=1<<Pe,!Ye(te.Wa,Pe)){C.a=1,F=0;break e}}else te.ua=0;var Ud=C,ff=z,c1=H,Hd=Ud.s,Wd=Hd.xc;if(Ud.c=ff,Ud.i=c1,Hd.md=Be(ff,Wd),Hd.wc=Wd==0?-1:(1<<Wd)-1,N){C.xb=Id;break e}if((ye=o(z*H))==null){C.a=1,F=0;break e}F=(F=Wr(C,ye,0,z,H,H,null))&&!V.h;break e}return F?(M!=null?M[0]=ye:(t(ye==null),t(N)),C.$=0,N||ve(te)):ve(te),F}function rt(d,p){var N=d.c*d.i,C=N+p+16*p;return t(d.c<=p),d.V=o(C),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+N+p,1)}function Dt(d,p){var N=d.C,C=p-N,M=d.V,F=d.Ba+d.c*N;for(t(p<=d.l.o);0<C;){var z=16<C?16:C,H=d.l.ma,V=d.l.width,te=V*z,ye=H.ca,Pe=H.tb+V*N,Le=d.Ta,Se=d.Ua;Cr(d,z,M,F),Vs(Le,Se,ye,Pe,te),Mr(H,N,N+z,ye,Pe,V),C-=z,M+=z*d.c,N+=z}t(N==p),d.C=d.Ma=p}function At(){this.ub=this.yd=this.td=this.Rb=0}function Tt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Et(){this.Yb=function(){var d=[];return function p(N,C,M){for(var F=M[C],z=0;z<F&&(N.push(M.length>C+1?[]:0),!(M.length<C+1));z++)p(N[z],C+1,M)}(d,0,[3,11]),d}()}function Ft(){this.jb=o(3),this.Wc=h([4,8],Et),this.Xc=h([4,17],Et)}function Kt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function bt(){this.ld=this.La=this.dd=this.tc=0}function gt(){this.Na=this.la=0}function Cs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function os(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tr(){this.uc=this.M=this.Nb=0,this.wa=Array(new bt),this.Y=0,this.ya=Array(new os),this.aa=0,this.l=new $t}function Vr(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ht(){this.cb=this.a=0,this.sc="",this.m=new fe,this.Od=new At,this.Kc=new Tt,this.ed=new Kt,this.Qa=new jt,this.Ic=this.$c=this.Aa=0,this.D=new tr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,fe),this.ia=0,this.pb=c(4,Cs),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vr),this.Hd=0,this.rb=Array(new gt),this.sb=0,this.wa=Array(new bt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new os),this.L=this.aa=0,this.gd=h([4,2],bt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function $t(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function mt(){var d=new Ht;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,vt||(vt=bn)),d}function Lt(d,p,N){return d.a==0&&(d.a=p,d.sc=N,d.cb=0),0}function vr(d,p,N){return 3<=N&&d[p+0]==157&&d[p+1]==1&&d[p+2]==42}function yn(d,p){if(d==null)return 0;if(d.a=0,d.sc="OK",p==null)return Lt(d,2,"null VP8Io passed to VP8GetHeaders()");var N=p.data,C=p.w,M=p.ha;if(4>M)return Lt(d,7,"Truncated header.");var F=N[C+0]|N[C+1]<<8|N[C+2]<<16,z=d.Od;if(z.Rb=!(1&F),z.td=F>>1&7,z.yd=F>>4&1,z.ub=F>>5,3<z.td)return Lt(d,3,"Incorrect keyframe parameters.");if(!z.yd)return Lt(d,4,"Frame not displayable.");C+=3,M-=3;var H=d.Kc;if(z.Rb){if(7>M)return Lt(d,7,"cannot parse picture header");if(!vr(N,C,M))return Lt(d,3,"Bad code word");H.c=16383&(N[C+4]<<8|N[C+3]),H.Td=N[C+4]>>6,H.i=16383&(N[C+6]<<8|N[C+5]),H.Ud=N[C+6]>>6,C+=7,M-=7,d.za=H.c+15>>4,d.Ub=H.i+15>>4,p.width=H.c,p.height=H.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i((F=d.Pa).jb,0,255,F.jb.length),t((F=d.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(z.ub>M)return Lt(d,7,"bad partition length");he(F=d.m,N,C,z.ub),C+=z.ub,M-=z.ub,z.Rb&&(H.Ld=le(F),H.Kd=le(F)),H=d.Qa;var V,te=d.Pa;if(t(F!=null),t(H!=null),H.Cb=le(F),H.Cb){if(H.Bb=le(F),le(F)){for(H.Fb=le(F),V=0;4>V;++V)H.Zb[V]=le(F)?oe(F,7):0;for(V=0;4>V;++V)H.Lb[V]=le(F)?oe(F,6):0}if(H.Bb)for(V=0;3>V;++V)te.jb[V]=le(F)?pe(F,8):255}else H.Bb=0;if(F.Ka)return Lt(d,3,"cannot parse segment header");if((H=d.ed).zd=le(F),H.Tb=pe(F,6),H.wb=pe(F,3),H.Pc=le(F),H.Pc&&le(F)){for(te=0;4>te;++te)le(F)&&(H.vd[te]=oe(F,6));for(te=0;4>te;++te)le(F)&&(H.od[te]=oe(F,6))}if(d.L=H.Tb==0?0:H.zd?1:2,F.Ka)return Lt(d,3,"cannot parse filter header");var ye=M;if(M=V=C,C=V+ye,H=ye,d.Xb=(1<<pe(d.m,2))-1,ye<3*(te=d.Xb))N=7;else{for(V+=3*te,H-=3*te,ye=0;ye<te;++ye){var Pe=N[M+0]|N[M+1]<<8|N[M+2]<<16;Pe>H&&(Pe=H),he(d.Jc[+ye],N,V,Pe),V+=Pe,H-=Pe,M+=3}he(d.Jc[+te],N,V,H),N=V<C?0:5}if(N!=0)return Lt(d,N,"cannot parse partitions");for(N=pe(V=d.m,7),M=le(V)?oe(V,4):0,C=le(V)?oe(V,4):0,H=le(V)?oe(V,4):0,te=le(V)?oe(V,4):0,V=le(V)?oe(V,4):0,ye=d.Qa,Pe=0;4>Pe;++Pe){if(ye.Cb){var Le=ye.Zb[Pe];ye.Fb||(Le+=N)}else{if(0<Pe){d.pb[Pe]=d.pb[0];continue}Le=N}var Se=d.pb[Pe];Se.Sc[0]=He[Ds(Le+M,127)],Se.Sc[1]=tt[Ds(Le+0,127)],Se.Eb[0]=2*He[Ds(Le+C,127)],Se.Eb[1]=101581*tt[Ds(Le+H,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=He[Ds(Le+te,117)],Se.Qc[1]=tt[Ds(Le+V,127)],Se.lc=Le+V}if(!z.Rb)return Lt(d,4,"Not a key frame.");for(le(F),z=d.Pa,N=0;4>N;++N){for(M=0;8>M;++M)for(C=0;3>C;++C)for(H=0;11>H;++H)te=ce(F,Si[N][M][C][H])?pe(F,8):Cn[N][M][C][H],z.Wc[N][M].Yb[C][H]=te;for(M=0;17>M;++M)z.Xc[N][M]=z.Wc[N][Ed[M]]}return d.kc=le(F),d.kc&&(d.Bd=pe(F,8)),d.cb=1}function bn(d,p,N,C,M,F,z){var H=p[M].Yb[N];for(N=0;16>M;++M){if(!ce(d,H[N+0]))return M;for(;!ce(d,H[N+1]);)if(H=p[++M].Yb[0],N=0,M==16)return 16;var V=p[M+1].Yb;if(ce(d,H[N+2])){var te=d,ye=0;if(ce(te,(Le=H)[(Pe=N)+3]))if(ce(te,Le[Pe+6])){for(H=0,Pe=2*(ye=ce(te,Le[Pe+8]))+(Le=ce(te,Le[Pe+9+ye])),ye=0,Le=Vt[Pe];Le[H];++H)ye+=ye+ce(te,Le[H]);ye+=3+(8<<Pe)}else ce(te,Le[Pe+7])?(ye=7+2*ce(te,165),ye+=ce(te,145)):ye=5+ce(te,159);else ye=ce(te,Le[Pe+4])?3+ce(te,Le[Pe+5]):2;H=V[2]}else ye=1,H=V[1];V=z+Fr[M],0>(te=d).b&&X(te);var Pe,Le=te.b,Se=(Pe=te.Ca>>1)-(te.I>>Le)>>31;--te.b,te.Ca+=Se,te.Ca|=1,te.I-=(Pe+1&Se)<<Le,F[V]=((ye^Se)-Se)*C[(0<M)+0]}return 16}function Un(d){var p=d.rb[d.sb-1];p.la=0,p.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function St(d,p){if(d==null)return 0;if(p==null)return Lt(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!yn(d,p))return 0;if(t(d.cb),p.ac==null||p.ac(p)){p.ob&&(d.L=0);var N=xc[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=p.v-N>>4,d.zb=p.j-N>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=p.o+15+N>>4,d.Hb=p.va+15+N>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var C=d.ed;for(N=0;4>N;++N){var M;if(d.Qa.Cb){var F=d.Qa.Lb[N];d.Qa.Fb||(F+=C.Tb)}else F=C.Tb;for(M=0;1>=M;++M){var z=d.gd[N][M],H=F;if(C.Pc&&(H+=C.vd[0],M&&(H+=C.od[0])),0<(H=0>H?0:63<H?63:H)){var V=H;0<C.wb&&(V=4<C.wb?V>>2:V>>1)>9-C.wb&&(V=9-C.wb),1>V&&(V=1),z.dd=V,z.tc=2*H+V,z.ld=40<=H?2:15<=H?1:0}else z.tc=0;z.La=M}}}N=0}else Lt(d,6,"Frame setup failed"),N=d.a;if(N=N==0){if(N){d.$c=0,0<d.Aa||(d.Ic=Xv);e:{N=d.Ic,C=4*(V=d.za);var te=32*V,ye=V+1,Pe=0<d.L?V*(0<d.Aa?2:1):0,Le=(d.Aa==2?2:1)*V;if((z=C+832+(M=3*(16*N+xc[d.L])/2*te)+(F=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=z)N=0;else{if(z>d.Vb){if(d.Vb=0,d.Ec=o(z),d.Fc=0,d.Ec==null){N=Lt(d,1,"no memory during frame initialization.");break e}d.Vb=z}z=d.Ec,H=d.Fc,d.Ac=z,d.Bc=H,H+=C,d.Gd=c(te,Vr),d.Hd=0,d.rb=c(ye+1,gt),d.sb=1,d.wa=Pe?c(Pe,bt):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=V),t(!0),d.oc=z,d.pc=H,H+=832,d.ya=c(Le,os),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=V),d.R=16*V,d.B=8*V,V=(te=xc[d.L])*d.R,te=te/2*d.B,d.sa=z,d.ta=H+V,d.qa=d.sa,d.ra=d.ta+16*N*d.R+te,d.Ha=d.qa,d.Ia=d.ra+8*N*d.B+te,d.$c=0,H+=M,d.mb=F?z:null,d.nb=F?H:null,t(H+F<=d.Fc+d.Vb),Un(d),i(d.Ac,d.Bc,0,C),N=1}}if(N){if(p.ka=0,p.y=d.sa,p.O=d.ta,p.f=d.qa,p.N=d.ra,p.ea=d.Ha,p.Vd=d.Ia,p.fa=d.R,p.Rc=d.B,p.F=null,p.J=0,!Wo){for(N=-255;255>=N;++N)gs[255+N]=0>N?-N:N;for(N=-1020;1020>=N;++N)Gn[1020+N]=-128>N?-128:127<N?127:N;for(N=-112;112>=N;++N)ji[112+N]=-16>N?-16:15<N?15:N;for(N=-255;510>=N;++N)Yn[255+N]=0>N?0:255<N?255:N;Wo=1}Aa=Ga,Wn=En,Ta=wn,Dr=Rs,un=Hn,Ws=di,wi=eo,co=Ca,uo=to,Ar=so,Vn=Tl,Ea=pi,Zn=Zr,Ni=$o,Ia=Bo,Ra=Gs,fa=an,kn=qo,Dn[0]=Qt,Dn[1]=Yi,Dn[2]=Mt,Dn[3]=Nn,Dn[4]=Ji,Dn[5]=_a,Dn[6]=fi,Dn[7]=Ka,Dn[8]=Xi,Dn[9]=oa,Oa[0]=ui,Oa[1]=Ki,Oa[2]=In,Oa[3]=ia,Oa[4]=rr,Oa[5]=Do,Oa[6]=hi,Kn[0]=la,Kn[1]=Ya,Kn[2]=Ja,Kn[3]=Hs,Kn[4]=Xa,Kn[5]=Fo,Kn[6]=mi,N=1}else N=0}N&&(N=function(Se,Ue){for(Se.M=0;Se.M<Se.Va;++Se.M){var Re,be=Se.Jc[Se.M&Se.Xb],we=Se.m,qe=Se;for(Re=0;Re<qe.za;++Re){var We=we,$e=qe,at=$e.Ac,Xe=$e.Bc+4*Re,wt=$e.zc,et=$e.ya[$e.aa+Re];if($e.Qa.Bb?et.$b=ce(We,$e.Pa.jb[0])?2+ce(We,$e.Pa.jb[2]):ce(We,$e.Pa.jb[1]):et.$b=0,$e.kc&&(et.Ad=ce(We,$e.Bd)),et.Za=!ce(We,145)+0,et.Za){var hs=et.Ob,vs=0;for($e=0;4>$e;++$e){var ls,rs=wt[0+$e];for(ls=0;4>ls;++ls){rs=Kr[at[Xe+ls]][rs];for(var Ls=ar[ce(We,rs[0])];0<Ls;)Ls=ar[2*Ls+ce(We,rs[Ls])];rs=-Ls,at[Xe+ls]=rs}a(hs,vs,at,Xe,4),vs+=4,wt[0+$e]=rs}}else rs=ce(We,156)?ce(We,128)?1:3:ce(We,163)?2:0,et.Ob[0]=rs,i(at,Xe,rs,4),i(wt,0,rs,4);et.Dd=ce(We,142)?ce(We,114)?ce(We,183)?1:3:2:0}if(qe.m.Ka)return Lt(Se,7,"Premature end-of-partition0 encountered.");for(;Se.ja<Se.za;++Se.ja){if(qe=be,We=(we=Se).rb[we.sb-1],at=we.rb[we.sb+we.ja],Re=we.ya[we.aa+we.ja],Xe=we.kc?Re.Ad:0)We.la=at.la=0,Re.Za||(We.Na=at.Na=0),Re.Hc=0,Re.Gc=0,Re.ia=0;else{var _s,Ut;if(We=at,at=qe,Xe=we.Pa.Xc,wt=we.ya[we.aa+we.ja],et=we.pb[wt.$b],$e=wt.ad,hs=0,vs=we.rb[we.sb-1],rs=ls=0,i($e,hs,0,384),wt.Za)var hr=0,Pn=Xe[3];else{Ls=o(16);var fr=We.Na+vs.Na;if(fr=vt(at,Xe[1],fr,et.Eb,0,Ls,0),We.Na=vs.Na=(0<fr)+0,1<fr)Aa(Ls,0,$e,hs);else{var Ln=Ls[0]+3>>3;for(Ls=0;256>Ls;Ls+=16)$e[hs+Ls]=Ln}hr=1,Pn=Xe[0]}var ys=15&We.la,Fn=15&vs.la;for(Ls=0;4>Ls;++Ls){var zn=1&Fn;for(Ln=Ut=0;4>Ln;++Ln)ys=ys>>1|(zn=(fr=vt(at,Pn,fr=zn+(1&ys),et.Sc,hr,$e,hs))>hr)<<7,Ut=Ut<<2|(3<fr?3:1<fr?2:$e[hs+0]!=0),hs+=16;ys>>=4,Fn=Fn>>1|zn<<7,ls=(ls<<8|Ut)>>>0}for(Pn=ys,hr=Fn>>4,_s=0;4>_s;_s+=2){for(Ut=0,ys=We.la>>4+_s,Fn=vs.la>>4+_s,Ls=0;2>Ls;++Ls){for(zn=1&Fn,Ln=0;2>Ln;++Ln)fr=zn+(1&ys),ys=ys>>1|(zn=0<(fr=vt(at,Xe[2],fr,et.Qc,0,$e,hs)))<<3,Ut=Ut<<2|(3<fr?3:1<fr?2:$e[hs+0]!=0),hs+=16;ys>>=2,Fn=Fn>>1|zn<<5}rs|=Ut<<4*_s,Pn|=ys<<4<<_s,hr|=(240&Fn)<<_s}We.la=Pn,vs.la=hr,wt.Hc=ls,wt.Gc=rs,wt.ia=43690&rs?0:et.ia,Xe=!(ls|rs)}if(0<we.L&&(we.wa[we.Y+we.ja]=we.gd[Re.$b][Re.Za],we.wa[we.Y+we.ja].La|=!Xe),qe.Ka)return Lt(Se,7,"Premature end-of-file encountered.")}if(Un(Se),we=Ue,qe=1,Re=(be=Se).D,We=0<be.L&&be.M>=be.zb&&be.M<=be.Va,be.Aa==0)e:{if(Re.M=be.M,Re.uc=We,io(be,Re),qe=1,Re=(Ut=be.D).Nb,We=(rs=xc[be.L])*be.R,at=rs/2*be.B,Ls=16*Re*be.R,Ln=8*Re*be.B,Xe=be.sa,wt=be.ta-We+Ls,et=be.qa,$e=be.ra-at+Ln,hs=be.Ha,vs=be.Ia-at+Ln,Fn=(ys=Ut.M)==0,ls=ys>=be.Va-1,be.Aa==2&&io(be,Ut),Ut.uc)for(zn=(fr=be).D.M,t(fr.D.uc),Ut=fr.yb;Ut<fr.Hb;++Ut){hr=Ut,Pn=zn;var Tr=(Br=(Js=fr).D).Nb;_s=Js.R;var Br=Br.wa[Br.Y+hr],fn=Js.sa,Jn=Js.ta+16*Tr*_s+16*hr,Da=Br.dd,Er=Br.tc;if(Er!=0)if(t(3<=Er),Js.L==1)0<hr&&Ra(fn,Jn,_s,Er+4),Br.La&&kn(fn,Jn,_s,Er),0<Pn&&Ia(fn,Jn,_s,Er+4),Br.La&&fa(fn,Jn,_s,Er);else{var si=Js.B,po=Js.qa,Xo=Js.ra+8*Tr*si+8*hr,ki=Js.Ha,Js=Js.Ia+8*Tr*si+8*hr;Tr=Br.ld,0<hr&&(co(fn,Jn,_s,Er+4,Da,Tr),Ar(po,Xo,ki,Js,si,Er+4,Da,Tr)),Br.La&&(Ea(fn,Jn,_s,Er,Da,Tr),Ni(po,Xo,ki,Js,si,Er,Da,Tr)),0<Pn&&(wi(fn,Jn,_s,Er+4,Da,Tr),uo(po,Xo,ki,Js,si,Er+4,Da,Tr)),Br.La&&(Vn(fn,Jn,_s,Er,Da,Tr),Zn(po,Xo,ki,Js,si,Er,Da,Tr))}}if(be.ia&&alert("todo:DitherRow"),we.put!=null){if(Ut=16*ys,ys=16*(ys+1),Fn?(we.y=be.sa,we.O=be.ta+Ls,we.f=be.qa,we.N=be.ra+Ln,we.ea=be.Ha,we.W=be.Ia+Ln):(Ut-=rs,we.y=Xe,we.O=wt,we.f=et,we.N=$e,we.ea=hs,we.W=vs),ls||(ys-=rs),ys>we.o&&(ys=we.o),we.F=null,we.J=null,be.Fa!=null&&0<be.Fa.length&&Ut<ys&&(we.J=ao(be,we,Ut,ys-Ut),we.F=be.mb,we.F==null&&we.F.length==0)){qe=Lt(be,3,"Could not decode alpha data.");break e}Ut<we.j&&(rs=we.j-Ut,Ut=we.j,t(!(1&rs)),we.O+=be.R*rs,we.N+=be.B*(rs>>1),we.W+=be.B*(rs>>1),we.F!=null&&(we.J+=we.width*rs)),Ut<ys&&(we.O+=we.v,we.N+=we.v>>1,we.W+=we.v>>1,we.F!=null&&(we.J+=we.v),we.ka=Ut-we.j,we.U=we.va-we.v,we.T=ys-Ut,qe=we.put(we))}Re+1!=be.Ic||ls||(a(be.sa,be.ta-We,Xe,wt+16*be.R,We),a(be.qa,be.ra-at,et,$e+8*be.B,at),a(be.Ha,be.Ia-at,hs,vs+8*be.B,at))}if(!qe)return Lt(Se,6,"Output aborted.")}return 1}(d,p)),p.bc!=null&&p.bc(p),N&=1}return N?(d.cb=0,N):0}function Jt(d,p,N,C,M){M=d[p+N+32*C]+(M>>3),d[p+N+32*C]=-256&M?0>M?0:255:M}function sr(d,p,N,C,M,F){Jt(d,p,0,N,C+M),Jt(d,p,1,N,C+F),Jt(d,p,2,N,C-F),Jt(d,p,3,N,C-M)}function js(d){return(20091*d>>16)+d}function ur(d,p,N,C){var M,F=0,z=o(16);for(M=0;4>M;++M){var H=d[p+0]+d[p+8],V=d[p+0]-d[p+8],te=(35468*d[p+4]>>16)-js(d[p+12]),ye=js(d[p+4])+(35468*d[p+12]>>16);z[F+0]=H+ye,z[F+1]=V+te,z[F+2]=V-te,z[F+3]=H-ye,F+=4,p++}for(M=F=0;4>M;++M)H=(d=z[F+0]+4)+z[F+8],V=d-z[F+8],te=(35468*z[F+4]>>16)-js(z[F+12]),Jt(N,C,0,0,H+(ye=js(z[F+4])+(35468*z[F+12]>>16))),Jt(N,C,1,0,V+te),Jt(N,C,2,0,V-te),Jt(N,C,3,0,H-ye),F++,C+=32}function di(d,p,N,C){var M=d[p+0]+4,F=35468*d[p+4]>>16,z=js(d[p+4]),H=35468*d[p+1]>>16;sr(N,C,0,M+z,d=js(d[p+1]),H),sr(N,C,1,M+F,d,H),sr(N,C,2,M-F,d,H),sr(N,C,3,M-z,d,H)}function En(d,p,N,C,M){ur(d,p,N,C),M&&ur(d,p+16,N,C+4)}function wn(d,p,N,C){Wn(d,p+0,N,C,1),Wn(d,p+32,N,C+128,1)}function Rs(d,p,N,C){var M;for(d=d[p+0]+4,M=0;4>M;++M)for(p=0;4>p;++p)Jt(N,C,p,M,d)}function Hn(d,p,N,C){d[p+0]&&Dr(d,p+0,N,C),d[p+16]&&Dr(d,p+16,N,C+4),d[p+32]&&Dr(d,p+32,N,C+128),d[p+48]&&Dr(d,p+48,N,C+128+4)}function Ga(d,p,N,C){var M,F=o(16);for(M=0;4>M;++M){var z=d[p+0+M]+d[p+12+M],H=d[p+4+M]+d[p+8+M],V=d[p+4+M]-d[p+8+M],te=d[p+0+M]-d[p+12+M];F[0+M]=z+H,F[8+M]=z-H,F[4+M]=te+V,F[12+M]=te-V}for(M=0;4>M;++M)z=(d=F[0+4*M]+3)+F[3+4*M],H=F[1+4*M]+F[2+4*M],V=F[1+4*M]-F[2+4*M],te=d-F[3+4*M],N[C+0]=z+H>>3,N[C+16]=te+V>>3,N[C+32]=z-H>>3,N[C+48]=te-V>>3,C+=64}function aa(d,p,N){var C,M=p-32,F=Yr,z=255-d[M-1];for(C=0;C<N;++C){var H,V=F,te=z+d[p-1];for(H=0;H<N;++H)d[p+H]=V[te+d[M+H]];p+=32}}function Yi(d,p){aa(d,p,4)}function Ya(d,p){aa(d,p,8)}function Ki(d,p){aa(d,p,16)}function In(d,p){var N;for(N=0;16>N;++N)a(d,p+32*N,d,p-32,16)}function ia(d,p){var N;for(N=16;0<N;--N)i(d,p,d[p-1],16),p+=32}function ja(d,p,N){var C;for(C=0;16>C;++C)i(p,N+32*C,d,16)}function ui(d,p){var N,C=16;for(N=0;16>N;++N)C+=d[p-1+32*N]+d[p+N-32];ja(C>>5,d,p)}function rr(d,p){var N,C=8;for(N=0;16>N;++N)C+=d[p-1+32*N];ja(C>>4,d,p)}function Do(d,p){var N,C=8;for(N=0;16>N;++N)C+=d[p+N-32];ja(C>>4,d,p)}function hi(d,p){ja(128,d,p)}function It(d,p,N){return d+2*p+N+2>>2}function Mt(d,p){var N,C=p-32;for(C=new Uint8Array([It(d[C-1],d[C+0],d[C+1]),It(d[C+0],d[C+1],d[C+2]),It(d[C+1],d[C+2],d[C+3]),It(d[C+2],d[C+3],d[C+4])]),N=0;4>N;++N)a(d,p+32*N,C,0,C.length)}function Nn(d,p){var N=d[p-1],C=d[p-1+32],M=d[p-1+64],F=d[p-1+96];xe(d,p+0,16843009*It(d[p-1-32],N,C)),xe(d,p+32,16843009*It(N,C,M)),xe(d,p+64,16843009*It(C,M,F)),xe(d,p+96,16843009*It(M,F,F))}function Qt(d,p){var N,C=4;for(N=0;4>N;++N)C+=d[p+N-32]+d[p-1+32*N];for(C>>=3,N=0;4>N;++N)i(d,p+32*N,C,4)}function Ji(d,p){var N=d[p-1+0],C=d[p-1+32],M=d[p-1+64],F=d[p-1-32],z=d[p+0-32],H=d[p+1-32],V=d[p+2-32],te=d[p+3-32];d[p+0+96]=It(C,M,d[p-1+96]),d[p+1+96]=d[p+0+64]=It(N,C,M),d[p+2+96]=d[p+1+64]=d[p+0+32]=It(F,N,C),d[p+3+96]=d[p+2+64]=d[p+1+32]=d[p+0+0]=It(z,F,N),d[p+3+64]=d[p+2+32]=d[p+1+0]=It(H,z,F),d[p+3+32]=d[p+2+0]=It(V,H,z),d[p+3+0]=It(te,V,H)}function fi(d,p){var N=d[p+1-32],C=d[p+2-32],M=d[p+3-32],F=d[p+4-32],z=d[p+5-32],H=d[p+6-32],V=d[p+7-32];d[p+0+0]=It(d[p+0-32],N,C),d[p+1+0]=d[p+0+32]=It(N,C,M),d[p+2+0]=d[p+1+32]=d[p+0+64]=It(C,M,F),d[p+3+0]=d[p+2+32]=d[p+1+64]=d[p+0+96]=It(M,F,z),d[p+3+32]=d[p+2+64]=d[p+1+96]=It(F,z,H),d[p+3+64]=d[p+2+96]=It(z,H,V),d[p+3+96]=It(H,V,V)}function _a(d,p){var N=d[p-1+0],C=d[p-1+32],M=d[p-1+64],F=d[p-1-32],z=d[p+0-32],H=d[p+1-32],V=d[p+2-32],te=d[p+3-32];d[p+0+0]=d[p+1+64]=F+z+1>>1,d[p+1+0]=d[p+2+64]=z+H+1>>1,d[p+2+0]=d[p+3+64]=H+V+1>>1,d[p+3+0]=V+te+1>>1,d[p+0+96]=It(M,C,N),d[p+0+64]=It(C,N,F),d[p+0+32]=d[p+1+96]=It(N,F,z),d[p+1+32]=d[p+2+96]=It(F,z,H),d[p+2+32]=d[p+3+96]=It(z,H,V),d[p+3+32]=It(H,V,te)}function Ka(d,p){var N=d[p+0-32],C=d[p+1-32],M=d[p+2-32],F=d[p+3-32],z=d[p+4-32],H=d[p+5-32],V=d[p+6-32],te=d[p+7-32];d[p+0+0]=N+C+1>>1,d[p+1+0]=d[p+0+64]=C+M+1>>1,d[p+2+0]=d[p+1+64]=M+F+1>>1,d[p+3+0]=d[p+2+64]=F+z+1>>1,d[p+0+32]=It(N,C,M),d[p+1+32]=d[p+0+96]=It(C,M,F),d[p+2+32]=d[p+1+96]=It(M,F,z),d[p+3+32]=d[p+2+96]=It(F,z,H),d[p+3+64]=It(z,H,V),d[p+3+96]=It(H,V,te)}function oa(d,p){var N=d[p-1+0],C=d[p-1+32],M=d[p-1+64],F=d[p-1+96];d[p+0+0]=N+C+1>>1,d[p+2+0]=d[p+0+32]=C+M+1>>1,d[p+2+32]=d[p+0+64]=M+F+1>>1,d[p+1+0]=It(N,C,M),d[p+3+0]=d[p+1+32]=It(C,M,F),d[p+3+32]=d[p+1+64]=It(M,F,F),d[p+3+64]=d[p+2+64]=d[p+0+96]=d[p+1+96]=d[p+2+96]=d[p+3+96]=F}function Xi(d,p){var N=d[p-1+0],C=d[p-1+32],M=d[p-1+64],F=d[p-1+96],z=d[p-1-32],H=d[p+0-32],V=d[p+1-32],te=d[p+2-32];d[p+0+0]=d[p+2+32]=N+z+1>>1,d[p+0+32]=d[p+2+64]=C+N+1>>1,d[p+0+64]=d[p+2+96]=M+C+1>>1,d[p+0+96]=F+M+1>>1,d[p+3+0]=It(H,V,te),d[p+2+0]=It(z,H,V),d[p+1+0]=d[p+3+32]=It(N,z,H),d[p+1+32]=d[p+3+64]=It(C,N,z),d[p+1+64]=d[p+3+96]=It(M,C,N),d[p+1+96]=It(F,M,C)}function Ja(d,p){var N;for(N=0;8>N;++N)a(d,p+32*N,d,p-32,8)}function Hs(d,p){var N;for(N=0;8>N;++N)i(d,p,d[p-1],8),p+=32}function nn(d,p,N){var C;for(C=0;8>C;++C)i(p,N+32*C,d,8)}function la(d,p){var N,C=8;for(N=0;8>N;++N)C+=d[p+N-32]+d[p-1+32*N];nn(C>>4,d,p)}function Fo(d,p){var N,C=4;for(N=0;8>N;++N)C+=d[p+N-32];nn(C>>3,d,p)}function Xa(d,p){var N,C=4;for(N=0;8>N;++N)C+=d[p-1+32*N];nn(C>>3,d,p)}function mi(d,p){nn(128,d,p)}function Sa(d,p,N){var C=d[p-N],M=d[p+0],F=3*(M-C)+_i[1020+d[p-2*N]-d[p+N]],z=Ma[112+(F+4>>3)];d[p-N]=Yr[255+C+Ma[112+(F+3>>3)]],d[p+0]=Yr[255+M-z]}function zo(d,p,N,C){var M=d[p+0],F=d[p+N];return hn[255+d[p-2*N]-d[p-N]]>C||hn[255+F-M]>C}function Qi(d,p,N,C){return 4*hn[255+d[p-N]-d[p+0]]+hn[255+d[p-2*N]-d[p+N]]<=C}function Zt(d,p,N,C,M){var F=d[p-3*N],z=d[p-2*N],H=d[p-N],V=d[p+0],te=d[p+N],ye=d[p+2*N],Pe=d[p+3*N];return 4*hn[255+H-V]+hn[255+z-te]>C?0:hn[255+d[p-4*N]-F]<=M&&hn[255+F-z]<=M&&hn[255+z-H]<=M&&hn[255+Pe-ye]<=M&&hn[255+ye-te]<=M&&hn[255+te-V]<=M}function Bo(d,p,N,C){var M=2*C+1;for(C=0;16>C;++C)Qi(d,p+C,N,M)&&Sa(d,p+C,N)}function Gs(d,p,N,C){var M=2*C+1;for(C=0;16>C;++C)Qi(d,p+C*N,1,M)&&Sa(d,p+C*N,1)}function an(d,p,N,C){var M;for(M=3;0<M;--M)Bo(d,p+=4*N,N,C)}function qo(d,p,N,C){var M;for(M=3;0<M;--M)Gs(d,p+=4,N,C)}function ka(d,p,N,C,M,F,z,H){for(F=2*F+1;0<M--;){if(Zt(d,p,N,F,z))if(zo(d,p,N,H))Sa(d,p,N);else{var V=d,te=p,ye=N,Pe=V[te-2*ye],Le=V[te-ye],Se=V[te+0],Ue=V[te+ye],Re=V[te+2*ye],be=27*(qe=_i[1020+3*(Se-Le)+_i[1020+Pe-Ue]])+63>>7,we=18*qe+63>>7,qe=9*qe+63>>7;V[te-3*ye]=Yr[255+V[te-3*ye]+qe],V[te-2*ye]=Yr[255+Pe+we],V[te-ye]=Yr[255+Le+be],V[te+0]=Yr[255+Se-be],V[te+ye]=Yr[255+Ue-we],V[te+2*ye]=Yr[255+Re-qe]}p+=C}}function on(d,p,N,C,M,F,z,H){for(F=2*F+1;0<M--;){if(Zt(d,p,N,F,z))if(zo(d,p,N,H))Sa(d,p,N);else{var V=d,te=p,ye=N,Pe=V[te-ye],Le=V[te+0],Se=V[te+ye],Ue=Ma[112+((Re=3*(Le-Pe))+4>>3)],Re=Ma[112+(Re+3>>3)],be=Ue+1>>1;V[te-2*ye]=Yr[255+V[te-2*ye]+be],V[te-ye]=Yr[255+Pe+Re],V[te+0]=Yr[255+Le-Ue],V[te+ye]=Yr[255+Se-be]}p+=C}}function eo(d,p,N,C,M,F){ka(d,p,N,1,16,C,M,F)}function Ca(d,p,N,C,M,F){ka(d,p,1,N,16,C,M,F)}function Tl(d,p,N,C,M,F){var z;for(z=3;0<z;--z)on(d,p+=4*N,N,1,16,C,M,F)}function pi(d,p,N,C,M,F){var z;for(z=3;0<z;--z)on(d,p+=4,1,N,16,C,M,F)}function to(d,p,N,C,M,F,z,H){ka(d,p,M,1,8,F,z,H),ka(N,C,M,1,8,F,z,H)}function so(d,p,N,C,M,F,z,H){ka(d,p,1,M,8,F,z,H),ka(N,C,1,M,8,F,z,H)}function Zr(d,p,N,C,M,F,z,H){on(d,p+4*M,M,1,8,F,z,H),on(N,C+4*M,M,1,8,F,z,H)}function $o(d,p,N,C,M,F,z,H){on(d,p+4,1,M,8,F,z,H),on(N,C+4,1,M,8,F,z,H)}function Qa(){this.ba=new Ur,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Is,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ro(){this.ua=0,this.Wa=new Z,this.vb=new Z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new q}function no(){this.xb=this.a=0,this.l=new $t,this.ca=new Ur,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ro,this.ab=0,this.gc=c(4,gi),this.Oc=0}function xi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $t,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Pa(d,p,N,C,M,F,z){for(d=d==null?0:d[p+0],p=0;p<z;++p)M[F+p]=d+N[C+p]&255,d=M[F+p]}function vi(d,p,N,C,M,F,z){var H;if(d==null)Pa(null,null,N,C,M,F,z);else for(H=0;H<z;++H)M[F+H]=d[p+H]+N[C+H]&255}function La(d,p,N,C,M,F,z){if(d==null)Pa(null,null,N,C,M,F,z);else{var H,V=d[p+0],te=V,ye=V;for(H=0;H<z;++H)te=ye+(V=d[p+H])-te,ye=N[C+H]+(-256&te?0>te?0:255:te)&255,te=V,M[F+H]=ye}}function ao(d,p,N,C){var M=p.width,F=p.o;if(t(d!=null&&p!=null),0>N||0>=C||N+C>F)return null;if(!d.Cc){if(d.ga==null){var z;if(d.ga=new xi,(z=d.ga==null)||(z=p.width*p.o,t(d.Gb.length==0),d.Gb=o(z),d.Uc=0,d.Gb==null?z=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,z=1),z=!z),!z){z=d.ga;var H=d.Fa,V=d.P,te=d.qc,ye=d.mb,Pe=d.nb,Le=V+1,Se=te-1,Ue=z.l;if(t(H!=null&&ye!=null&&p!=null),xs[0]=null,xs[1]=Pa,xs[2]=vi,xs[3]=La,z.ca=ye,z.tb=Pe,z.c=p.width,z.i=p.height,t(0<z.c&&0<z.i),1>=te)p=0;else if(z.$a=H[V+0]>>0&3,z.Z=H[V+0]>>2&3,z.Lc=H[V+0]>>4&3,V=H[V+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||V)p=0;else if(Ue.put=Hr,Ue.ac=er,Ue.bc=Sr,Ue.ma=z,Ue.width=p.width,Ue.height=p.height,Ue.Da=p.Da,Ue.v=p.v,Ue.va=p.va,Ue.j=p.j,Ue.o=p.o,z.$a)e:{t(z.$a==1),p=Oe();t:for(;;){if(p==null){p=0;break e}if(t(z!=null),z.mc=p,p.c=z.c,p.i=z.i,p.l=z.l,p.l.ma=z,p.l.width=z.c,p.l.height=z.i,p.a=0,ie(p.m,H,Le,Se),!Ve(z.c,z.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&Rr(p.s)?(z.ic=1,H=p.c*p.i,p.Ta=null,p.Ua=0,p.V=o(H),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(z.ic=0,p=rt(p,z.c)),!p))break t;p=1;break e}z.mc=null,p=0}else p=Se>=z.c*z.i;z=!p}if(z)return null;d.ga.Lc!=1?d.Ga=0:C=F-N}t(d.ga!=null),t(N+C<=F);e:{if(p=(H=d.ga).c,F=H.l.o,H.$a==0){if(Le=d.rc,Se=d.Vc,Ue=d.Fa,V=d.P+1+N*p,te=d.mb,ye=d.nb+N*p,t(V<=d.P+d.qc),H.Z!=0)for(t(xs[H.Z]!=null),z=0;z<C;++z)xs[H.Z](Le,Se,Ue,V,te,ye,p),Le=te,Se=ye,ye+=p,V+=p;else for(z=0;z<C;++z)a(te,ye,Ue,V,p),Le=te,Se=ye,ye+=p,V+=p;d.rc=Le,d.Vc=Se}else{if(t(H.mc!=null),p=N+C,t((z=H.mc)!=null),t(p<=z.i),z.C>=p)p=1;else if(H.ic||ke(),H.ic){H=z.V,Le=z.Ba,Se=z.c;var Re=z.i,be=(Ue=1,V=z.$/Se,te=z.$%Se,ye=z.m,Pe=z.s,z.$),we=Se*Re,qe=Se*p,We=Pe.wc,$e=be<qe?Je(Pe,te,V):null;t(be<=we),t(p<=Re),t(Rr(Pe));t:for(;;){for(;!ye.h&&be<qe;){if(te&We||($e=Je(Pe,te,V)),t($e!=null),se(ye),256>(Re=kr($e.G[0],$e.H[0],ye)))H[Le+be]=Re,++be,++te>=Se&&(te=0,++V<=p&&!(V%16)&&xr(z,V));else{if(!(280>Re)){Ue=0;break t}Re=rn(Re-256,ye);var at,Xe=kr($e.G[4],$e.H[4],ye);if(se(ye),!(be>=(Xe=vn(Se,Xe=rn(Xe,ye)))&&we-be>=Re)){Ue=0;break t}for(at=0;at<Re;++at)H[Le+be+at]=H[Le+be+at-Xe];for(be+=Re,te+=Re;te>=Se;)te-=Se,++V<=p&&!(V%16)&&xr(z,V);be<qe&&te&We&&($e=Je(Pe,te,V))}t(ye.h==D(ye))}xr(z,V>p?p:V);break t}!Ue||ye.h&&be<we?(Ue=0,z.a=ye.h?5:3):z.$=be,p=Ue}else p=Wr(z,z.V,z.Ba,z.c,z.i,p,Dt);if(!p){C=0;break e}}N+C>=F&&(d.Cc=1),C=1}if(!C)return null;if(d.Cc&&((C=d.ga)!=null&&(C.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+N*M}function y(d,p,N,C,M,F){for(;0<M--;){var z,H=d,V=p+(N?1:0),te=d,ye=p+(N?0:3);for(z=0;z<C;++z){var Pe=te[ye+4*z];Pe!=255&&(Pe*=32897,H[V+4*z+0]=H[V+4*z+0]*Pe>>23,H[V+4*z+1]=H[V+4*z+1]*Pe>>23,H[V+4*z+2]=H[V+4*z+2]*Pe>>23)}p+=F}}function O(d,p,N,C,M){for(;0<C--;){var F;for(F=0;F<N;++F){var z=d[p+2*F+0],H=15&(te=d[p+2*F+1]),V=4369*H,te=(240&te|te>>4)*V>>16;d[p+2*F+0]=(240&z|z>>4)*V>>16&240|(15&z|z<<4)*V>>16>>4&15,d[p+2*F+1]=240&te|H}p+=M}}function re(d,p,N,C,M,F,z,H){var V,te,ye=255;for(te=0;te<M;++te){for(V=0;V<C;++V){var Pe=d[p+V];F[z+4*V]=Pe,ye&=Pe}p+=N,z+=H}return ye!=255}function me(d,p,N,C,M){var F;for(F=0;F<M;++F)N[C+F]=d[p+F]>>8}function ke(){Nr=y,ms=O,ps=re,Vs=me}function Ee(d,p,N){ee[d]=function(C,M,F,z,H,V,te,ye,Pe,Le,Se,Ue,Re,be,we,qe,We){var $e,at=We-1>>1,Xe=H[V+0]|te[ye+0]<<16,wt=Pe[Le+0]|Se[Ue+0]<<16;t(C!=null);var et=3*Xe+wt+131074>>2;for(p(C[M+0],255&et,et>>16,Re,be),F!=null&&(et=3*wt+Xe+131074>>2,p(F[z+0],255&et,et>>16,we,qe)),$e=1;$e<=at;++$e){var hs=H[V+$e]|te[ye+$e]<<16,vs=Pe[Le+$e]|Se[Ue+$e]<<16,ls=Xe+hs+wt+vs+524296,rs=ls+2*(hs+wt)>>3;et=rs+Xe>>1,Xe=(ls=ls+2*(Xe+vs)>>3)+hs>>1,p(C[M+2*$e-1],255&et,et>>16,Re,be+(2*$e-1)*N),p(C[M+2*$e-0],255&Xe,Xe>>16,Re,be+(2*$e-0)*N),F!=null&&(et=ls+wt>>1,Xe=rs+vs>>1,p(F[z+2*$e-1],255&et,et>>16,we,qe+(2*$e-1)*N),p(F[z+2*$e+0],255&Xe,Xe>>16,we,qe+(2*$e+0)*N)),Xe=hs,wt=vs}1&We||(et=3*Xe+wt+131074>>2,p(C[M+We-1],255&et,et>>16,Re,be+(We-1)*N),F!=null&&(et=3*wt+Xe+131074>>2,p(F[z+We-1],255&et,et>>16,we,qe+(We-1)*N)))}}function Ze(){zr[Vo]=Rd,zr[ho]=fc,zr[Il]=Md,zr[fo]=Jo,zr[mo]=Ml,zr[Zo]=mc,zr[hc]=Uv,zr[Go]=fc,zr[Yo]=Jo,zr[Ko]=Ml,zr[n]=mc}function Qe(d){return d&-16384?0>d?0:255:d>>Hv}function it(d,p){return Qe((19077*d>>8)+(26149*p>>8)-14234)}function Ot(d,p,N){return Qe((19077*d>>8)-(6419*p>>8)-(13320*N>>8)+8708)}function Rt(d,p){return Qe((19077*d>>8)+(33050*p>>8)-17685)}function ss(d,p,N,C,M){C[M+0]=it(d,N),C[M+1]=Ot(d,p,N),C[M+2]=Rt(d,p)}function Ps(d,p,N,C,M){C[M+0]=Rt(d,p),C[M+1]=Ot(d,p,N),C[M+2]=it(d,N)}function Ms(d,p,N,C,M){var F=Ot(d,p,N);p=F<<3&224|Rt(d,p)>>3,C[M+0]=248&it(d,N)|F>>5,C[M+1]=p}function Ys(d,p,N,C,M){var F=240&Rt(d,p)|15;C[M+0]=240&it(d,N)|Ot(d,p,N)>>4,C[M+1]=F}function Pr(d,p,N,C,M){C[M+0]=255,ss(d,p,N,C,M+1)}function nr(d,p,N,C,M){Ps(d,p,N,C,M),C[M+3]=255}function Rn(d,p,N,C,M){ss(d,p,N,C,M),C[M+3]=255}function Ds(d,p){return 0>d?0:d>p?p:d}function Or(d,p,N){ee[d]=function(C,M,F,z,H,V,te,ye,Pe){for(var Le=ye+(-2&Pe)*N;ye!=Le;)p(C[M+0],F[z+0],H[V+0],te,ye),p(C[M+1],F[z+0],H[V+0],te,ye+N),M+=2,++z,++V,ye+=2*N;1&Pe&&p(C[M+0],F[z+0],H[V+0],te,ye)}}function Uo(d,p,N){return N==0?d==0?p==0?6:5:p==0?4:0:N}function ln(d,p,N,C,M){switch(d>>>30){case 3:Wn(p,N,C,M,0);break;case 2:Ws(p,N,C,M);break;case 1:Dr(p,N,C,M)}}function io(d,p){var N,C,M=p.M,F=p.Nb,z=d.oc,H=d.pc+40,V=d.oc,te=d.pc+584,ye=d.oc,Pe=d.pc+600;for(N=0;16>N;++N)z[H+32*N-1]=129;for(N=0;8>N;++N)V[te+32*N-1]=129,ye[Pe+32*N-1]=129;for(0<M?z[H-1-32]=V[te-1-32]=ye[Pe-1-32]=129:(i(z,H-32-1,127,21),i(V,te-32-1,127,9),i(ye,Pe-32-1,127,9)),C=0;C<d.za;++C){var Le=p.ya[p.aa+C];if(0<C){for(N=-1;16>N;++N)a(z,H+32*N-4,z,H+32*N+12,4);for(N=-1;8>N;++N)a(V,te+32*N-4,V,te+32*N+4,4),a(ye,Pe+32*N-4,ye,Pe+32*N+4,4)}var Se=d.Gd,Ue=d.Hd+C,Re=Le.ad,be=Le.Hc;if(0<M&&(a(z,H-32,Se[Ue].y,0,16),a(V,te-32,Se[Ue].f,0,8),a(ye,Pe-32,Se[Ue].ea,0,8)),Le.Za){var we=z,qe=H-32+16;for(0<M&&(C>=d.za-1?i(we,qe,Se[Ue].y[15],4):a(we,qe,Se[Ue+1].y,0,4)),N=0;4>N;N++)we[qe+128+N]=we[qe+256+N]=we[qe+384+N]=we[qe+0+N];for(N=0;16>N;++N,be<<=2)we=z,qe=H+Kh[N],Dn[Le.Ob[N]](we,qe),ln(be,Re,16*+N,we,qe)}else if(we=Uo(C,M,Le.Ob[0]),Oa[we](z,H),be!=0)for(N=0;16>N;++N,be<<=2)ln(be,Re,16*+N,z,H+Kh[N]);for(N=Le.Gc,we=Uo(C,M,Le.Dd),Kn[we](V,te),Kn[we](ye,Pe),be=Re,we=V,qe=te,255&(Le=N>>0)&&(170&Le?Ta(be,256,we,qe):un(be,256,we,qe)),Le=ye,be=Pe,255&(N>>=8)&&(170&N?Ta(Re,320,Le,be):un(Re,320,Le,be)),M<d.Ub-1&&(a(Se[Ue].y,0,z,H+480,16),a(Se[Ue].f,0,V,te+224,8),a(Se[Ue].ea,0,ye,Pe+224,8)),N=8*F*d.B,Se=d.sa,Ue=d.ta+16*C+16*F*d.R,Re=d.qa,Le=d.ra+8*C+N,be=d.Ha,we=d.Ia+8*C+N,N=0;16>N;++N)a(Se,Ue+N*d.R,z,H+32*N,16);for(N=0;8>N;++N)a(Re,Le+N*d.B,V,te+32*N,8),a(be,we+N*d.B,ye,Pe+32*N,8)}}function Mn(d,p,N,C,M,F,z,H,V){var te=[0],ye=[0],Pe=0,Le=V!=null?V.kd:0,Se=V??new jn;if(d==null||12>N)return 7;Se.data=d,Se.w=p,Se.ha=N,p=[p],N=[N],Se.gb=[Se.gb];e:{var Ue=p,Re=N,be=Se.gb;if(t(d!=null),t(Re!=null),t(be!=null),be[0]=0,12<=Re[0]&&!r(d,Ue[0],"RIFF")){if(r(d,Ue[0]+8,"WEBP")){be=3;break e}var we=De(d,Ue[0]+4);if(12>we||4294967286<we){be=3;break e}if(Le&&we>Re[0]-8){be=7;break e}be[0]=we,Ue[0]+=12,Re[0]-=12}be=0}if(be!=0)return be;for(we=0<Se.gb[0],N=N[0];;){e:{var qe=d;Re=p,be=N;var We=te,$e=ye,at=Ue=[0];if((et=Pe=[Pe])[0]=0,8>be[0])be=7;else{if(!r(qe,Re[0],"VP8X")){if(De(qe,Re[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var Xe=De(qe,Re[0]+8),wt=1+Me(qe,Re[0]+12);if(2147483648<=wt*(qe=1+Me(qe,Re[0]+15))){be=3;break e}at!=null&&(at[0]=Xe),We!=null&&(We[0]=wt),$e!=null&&($e[0]=qe),Re[0]+=18,be[0]-=18,et[0]=1}be=0}}if(Pe=Pe[0],Ue=Ue[0],be!=0)return be;if(Re=!!(2&Ue),!we&&Pe)return 3;if(F!=null&&(F[0]=!!(16&Ue)),z!=null&&(z[0]=Re),H!=null&&(H[0]=0),z=te[0],Ue=ye[0],Pe&&Re&&V==null){be=0;break}if(4>N){be=7;break}if(we&&Pe||!we&&!Pe&&!r(d,p[0],"ALPH")){N=[N],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{Xe=d,be=p,we=N;var et=Se.gb;We=Se.na,$e=Se.P,at=Se.Sa,wt=22,t(Xe!=null),t(we!=null),qe=be[0];var hs=we[0];for(t(We!=null),t(at!=null),We[0]=null,$e[0]=null,at[0]=0;;){if(be[0]=qe,we[0]=hs,8>hs){be=7;break e}var vs=De(Xe,qe+4);if(4294967286<vs){be=3;break e}var ls=8+vs+1&-2;if(wt+=ls,0<et&&wt>et){be=3;break e}if(!r(Xe,qe,"VP8 ")||!r(Xe,qe,"VP8L")){be=0;break e}if(hs[0]<ls){be=7;break e}r(Xe,qe,"ALPH")||(We[0]=Xe,$e[0]=qe+8,at[0]=vs),qe+=ls,hs-=ls}}if(N=N[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],be!=0)break}N=[N],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(et=d,be=p,we=N,We=Se.gb[0],$e=Se.Ja,at=Se.xa,Xe=be[0],qe=!r(et,Xe,"VP8 "),wt=!r(et,Xe,"VP8L"),t(et!=null),t(we!=null),t($e!=null),t(at!=null),8>we[0])be=7;else{if(qe||wt){if(et=De(et,Xe+4),12<=We&&et>We-12){be=3;break e}if(Le&&et>we[0]-8){be=7;break e}$e[0]=et,be[0]+=8,we[0]-=8,at[0]=wt}else at[0]=5<=we[0]&&et[Xe+0]==47&&!(et[Xe+4]>>5),$e[0]=we[0];be=0}if(N=N[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],p=p[0],be!=0)break;if(4294967286<Se.Ja)return 3;if(H==null||Re||(H[0]=Se.xa?2:1),z=[z],Ue=[Ue],Se.xa){if(5>N){be=7;break}H=z,Le=Ue,Re=F,d==null||5>N?d=0:5<=N&&d[p+0]==47&&!(d[p+4]>>5)?(we=[0],et=[0],We=[0],ie($e=new R,d,p,N),ft($e,we,et,We)?(H!=null&&(H[0]=we[0]),Le!=null&&(Le[0]=et[0]),Re!=null&&(Re[0]=We[0]),d=1):d=0):d=0}else{if(10>N){be=7;break}H=Ue,d==null||10>N||!vr(d,p+3,N-3)?d=0:(Le=d[p+0]|d[p+1]<<8|d[p+2]<<16,Re=16383&(d[p+7]<<8|d[p+6]),d=16383&(d[p+9]<<8|d[p+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=Se.Ja||!Re||!d?d=0:(z&&(z[0]=Re),H&&(H[0]=d),d=1))}if(!d||(z=z[0],Ue=Ue[0],Pe&&(te[0]!=z||ye[0]!=Ue)))return 3;V!=null&&(V[0]=Se,V.offset=p-V.w,t(4294967286>p-V.w),t(V.offset==V.ha-N));break}return be==0||be==7&&Pe&&V==null?(F!=null&&(F[0]|=Se.na!=null&&0<Se.na.length),C!=null&&(C[0]=z),M!=null&&(M[0]=Ue),0):be}function oo(d,p,N){var C=p.width,M=p.height,F=0,z=0,H=C,V=M;if(p.Da=d!=null&&0<d.Da,p.Da&&(H=d.cd,V=d.bd,F=d.v,z=d.j,11>N||(F&=-2,z&=-2),0>F||0>z||0>=H||0>=V||F+H>C||z+V>M))return 0;if(p.v=F,p.j=z,p.va=F+H,p.o=z+V,p.U=H,p.T=V,p.da=d!=null&&0<d.da,p.da){if(!Fe(H,V,N=[d.ib],F=[d.hb]))return 0;p.ib=N[0],p.hb=F[0]}return p.ob=d!=null&&d.ob,p.Kb=d==null||!d.Sd,p.da&&(p.ob=p.ib<3*C/4&&p.hb<3*M/4,p.Kb=0),1}function ca(d){if(d==null)return 2;if(11>d.S){var p=d.f.RGBA;p.fb+=(d.height-1)*p.A,p.A=-p.A}else p=d.f.kb,d=d.height,p.O+=(d-1)*p.fa,p.fa=-p.fa,p.N+=(d-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(d-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(d-1)*p.lb,p.lb=-p.lb);return 0}function ei(d,p,N,C){if(C==null||0>=d||0>=p)return 2;if(N!=null){if(N.Da){var M=N.cd,F=N.bd,z=-2&N.v,H=-2&N.j;if(0>z||0>H||0>=M||0>=F||z+M>d||H+F>p)return 2;d=M,p=F}if(N.da){if(!Fe(d,p,M=[N.ib],F=[N.hb]))return 2;d=M[0],p=F[0]}}C.width=d,C.height=p;e:{var V=C.width,te=C.height;if(d=C.S,0>=V||0>=te||!(d>=Vo&&13>d))d=2;else{if(0>=C.Rd&&C.sd==null){z=F=M=p=0;var ye=(H=V*Jh[d])*te;if(11>d||(F=(te+1)/2*(p=(V+1)/2),d==12&&(z=(M=V)*te)),(te=o(ye+2*F+z))==null){d=1;break e}C.sd=te,11>d?((V=C.f.RGBA).eb=te,V.fb=0,V.A=H,V.size=ye):((V=C.f.kb).y=te,V.O=0,V.fa=H,V.Fd=ye,V.f=te,V.N=0+ye,V.Ab=p,V.Cd=F,V.ea=te,V.W=0+ye+F,V.Db=p,V.Ed=F,d==12&&(V.F=te,V.J=0+ye+2*F),V.Tc=z,V.lb=M)}if(p=1,M=C.S,F=C.width,z=C.height,M>=Vo&&13>M)if(11>M)d=C.f.RGBA,p&=(H=Math.abs(d.A))*(z-1)+F<=d.size,p&=H>=F*Jh[M],p&=d.eb!=null;else{d=C.f.kb,H=(F+1)/2,ye=(z+1)/2,V=Math.abs(d.fa),te=Math.abs(d.Ab);var Pe=Math.abs(d.Db),Le=Math.abs(d.lb),Se=Le*(z-1)+F;p&=V*(z-1)+F<=d.Fd,p&=te*(ye-1)+H<=d.Cd,p=(p&=Pe*(ye-1)+H<=d.Ed)&V>=F&te>=H&Pe>=H,p&=d.y!=null,p&=d.f!=null,p&=d.ea!=null,M==12&&(p&=Le>=F,p&=Se<=d.Tc,p&=d.F!=null)}else p=0;d=p?0:2}}return d!=0||N!=null&&N.fd&&(d=ca(C)),d}var Ks=64,yi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cn=24,da=32,lo=8,Lr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),ee.Predictor0=function(){return 4278190080},ee.Predictor1=function(d){return d},ee.Predictor2=function(d,p,N){return p[N+0]},ee.Predictor3=function(d,p,N){return p[N+1]},ee.Predictor4=function(d,p,N){return p[N-1]},ee.Predictor5=function(d,p,N){return Ge(Ge(d,p[N+1]),p[N+0])},ee.Predictor6=function(d,p,N){return Ge(d,p[N-1])},ee.Predictor7=function(d,p,N){return Ge(d,p[N+0])},ee.Predictor8=function(d,p,N){return Ge(p[N-1],p[N+0])},ee.Predictor9=function(d,p,N){return Ge(p[N+0],p[N+1])},ee.Predictor10=function(d,p,N){return Ge(Ge(d,p[N-1]),Ge(p[N+0],p[N+1]))},ee.Predictor11=function(d,p,N){var C=p[N+0];return 0>=Nt(C>>24&255,d>>24&255,(p=p[N-1])>>24&255)+Nt(C>>16&255,d>>16&255,p>>16&255)+Nt(C>>8&255,d>>8&255,p>>8&255)+Nt(255&C,255&d,255&p)?C:d},ee.Predictor12=function(d,p,N){var C=p[N+0];return(nt((d>>24&255)+(C>>24&255)-((p=p[N-1])>>24&255))<<24|nt((d>>16&255)+(C>>16&255)-(p>>16&255))<<16|nt((d>>8&255)+(C>>8&255)-(p>>8&255))<<8|nt((255&d)+(255&C)-(255&p)))>>>0},ee.Predictor13=function(d,p,N){var C=p[N-1];return(pt((d=Ge(d,p[N+0]))>>24&255,C>>24&255)<<24|pt(d>>16&255,C>>16&255)<<16|pt(d>>8&255,C>>8&255)<<8|pt(d>>0&255,C>>0&255))>>>0};var El=ee.PredictorAdd0;ee.PredictorAdd1=yt,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var dn=ee.PredictorAdd2;Ct("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Ho,yr=ee.ColorIndexInverseTransform,bi=ee.MapARGB,_n=ee.VP8LColorIndexInverseTransformAlpha,ti=ee.MapAlpha,ua=ee.VP8LPredictorsAdd=[];ua.length=16,(ee.VP8LPredictors=[]).length=16,(ee.VP8LPredictorsAdd_C=[]).length=16,(ee.VP8LPredictors_C=[]).length=16;var ha,br,wr,On,Gr,Sn,Aa,Wn,Ws,Ta,Dr,un,wi,co,uo,Ar,Vn,Ea,Zn,Ni,Ia,Ra,fa,kn,Nr,ms,ps,Vs,gs=o(511),Gn=o(2041),ji=o(225),Yn=o(767),Wo=0,_i=Gn,Ma=ji,Yr=Yn,hn=gs,Vo=0,ho=1,Il=2,fo=3,mo=4,Zo=5,hc=6,Go=7,Yo=8,Ko=9,n=10,l=[2,3,7],f=[3,3,11],w=[280,256,256,256,40],A=[0,1,1,1,0],$=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],de=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ce=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ae=8,He=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vt=null,Vt=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Fr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ar=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Cn=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Kr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Si=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ed=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oa=[],Dn=[],Kn=[],Id=1,Rl=2,xs=[],zr=[];Ee("UpsampleRgbLinePair",ss,3),Ee("UpsampleBgrLinePair",Ps,3),Ee("UpsampleRgbaLinePair",Rn,4),Ee("UpsampleBgraLinePair",nr,4),Ee("UpsampleArgbLinePair",Pr,4),Ee("UpsampleRgba4444LinePair",Ys,2),Ee("UpsampleRgb565LinePair",Ms,2);var Rd=ee.UpsampleRgbLinePair,Md=ee.UpsampleBgrLinePair,fc=ee.UpsampleRgbaLinePair,Jo=ee.UpsampleBgraLinePair,Ml=ee.UpsampleArgbLinePair,mc=ee.UpsampleRgba4444LinePair,Uv=ee.UpsampleRgb565LinePair,pc=16,gc=1<<pc-1,Ol=-227,Od=482,Hv=6,Yh=0,Wv=o(256),Vv=o(256),Zv=o(256),Gv=o(256),Yv=o(Od-Ol),Kv=o(Od-Ol);Or("YuvToRgbRow",ss,3),Or("YuvToBgrRow",Ps,3),Or("YuvToRgbaRow",Rn,4),Or("YuvToBgraRow",nr,4),Or("YuvToArgbRow",Pr,4),Or("YuvToRgba4444Row",Ys,2),Or("YuvToRgb565Row",Ms,2);var Kh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xc=[0,2,8],Jv=[8,7,6,4,4,2,2,2,1,1,1,1],Xv=1;this.WebPDecodeRGBA=function(d,p,N,C,M){var F=ho,z=new Qa,H=new Ur;z.ba=H,H.S=F,H.width=[H.width],H.height=[H.height];var V=H.width,te=H.height,ye=new xn;if(ye==null||d==null)var Pe=2;else t(ye!=null),Pe=Mn(d,p,N,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Pe!=0?V=0:(V!=null&&(V[0]=ye.width[0]),te!=null&&(te[0]=ye.height[0]),V=1),V){H.width=H.width[0],H.height=H.height[0],C!=null&&(C[0]=H.width),M!=null&&(M[0]=H.height);e:{if(C=new $t,(M=new jn).data=d,M.w=p,M.ha=N,M.kd=1,p=[0],t(M!=null),((d=Mn(M.data,M.w,M.ha,null,null,null,p,null,M))==0||d==7)&&p[0]&&(d=4),(p=d)==0){if(t(z!=null),C.data=M.data,C.w=M.w+M.offset,C.ha=M.ha-M.offset,C.put=Hr,C.ac=er,C.bc=Sr,C.ma=z,M.xa){if((d=Oe())==null){z=1;break e}if(function(Le,Se){var Ue=[0],Re=[0],be=[0];t:for(;;){if(Le==null)return 0;if(Se==null)return Le.a=2,0;if(Le.l=Se,Le.a=0,ie(Le.m,Se.data,Se.w,Se.ha),!ft(Le.m,Ue,Re,be)){Le.a=3;break t}if(Le.xb=Rl,Se.width=Ue[0],Se.height=Re[0],!Ve(Ue[0],Re[0],1,Le,null))break t;return 1}return t(Le.a!=0),0}(d,C)){if(C=(p=ei(C.width,C.height,z.Oa,z.ba))==0){t:{C=d;s:for(;;){if(C==null){C=0;break t}if(t(C.s.yc!=null),t(C.s.Ya!=null),t(0<C.s.Wb),t((N=C.l)!=null),t((M=N.ma)!=null),C.xb!=0){if(C.ca=M.ba,C.tb=M.tb,t(C.ca!=null),!oo(M.Oa,N,fo)){C.a=2;break s}if(!rt(C,N.width)||N.da)break s;if((N.da||Yt(C.ca.S))&&ke(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&ke()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!Ye(C.s.vb,C.s.Wa.Xa)){C.a=1;break s}C.xb=0}if(!Wr(C,C.V,C.Ba,C.c,C.i,N.o,na))break s;M.Dc=C.Ma,C=1;break t}t(C.a!=0),C=0}C=!C}C&&(p=d.a)}else p=d.a}else{if((d=new mt)==null){z=1;break e}if(d.Fa=M.na,d.P=M.P,d.qc=M.Sa,yn(d,C)){if((p=ei(C.width,C.height,z.Oa,z.ba))==0){if(d.Aa=0,N=z.Oa,t((M=d)!=null),N!=null){if(0<(V=0>(V=N.Md)?0:100<V?255:255*V/100)){for(te=ye=0;4>te;++te)12>(Pe=M.pb[te]).lc&&(Pe.ia=V*Jv[0>Pe.lc?0:Pe.lc]>>3),ye|=Pe.ia;ye&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=N.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}St(d,C)||(p=d.a)}}else p=d.a}p==0&&z.Oa!=null&&z.Oa.fd&&(p=ca(z.ba))}z=p}F=z!=0?null:11>F?H.f.RGBA.eb:H.f.kb.y}else F=null;return F};var Jh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(ee,K){for(var ue="",I=0;I<4;I++)ue+=String.fromCharCode(ee[K++]);return ue}function x(ee,K){return(ee[K+0]<<0|ee[K+1]<<8|ee[K+2]<<16)>>>0}function v(ee,K){return(ee[K+0]<<0|ee[K+1]<<8|ee[K+2]<<16|ee[K+3]<<24)>>>0}new u;var b=[0],g=[0],k=[],j=new u,T=s,S=function(ee,K){var ue={},I=0,q=!1,ne=0,Y=0;if(ue.frames=[],!function(E,D,W,se){for(var X=0;X<se;X++)if(E[D+X]!=W.charCodeAt(X))return!0;return!1}(ee,K,"RIFF",4)){for(v(ee,K+=4),K+=8;K<ee.length;){var he=m(ee,K),pe=v(ee,K+=4);K+=4;var oe=pe+(1&pe);switch(he){case"VP8 ":case"VP8L":ue.frames[I]===void 0&&(ue.frames[I]={}),(J=ue.frames[I]).src_off=q?Y:K-8,J.src_size=ne+pe+8,I++,q&&(q=!1,ne=0,Y=0);break;case"VP8X":(J=ue.header={}).feature_flags=ee[K];var ie=K+4;J.canvas_width=1+x(ee,ie),ie+=3,J.canvas_height=1+x(ee,ie),ie+=3;break;case"ALPH":q=!0,ne=oe+8,Y=K-8;break;case"ANIM":(J=ue.header).bgcolor=v(ee,K),ie=K+4,J.loop_count=(fe=ee)[(R=ie)+0]<<0|fe[R+1]<<8,ie+=2;break;case"ANMF":var Ne,J;(J=ue.frames[I]={}).offset_x=2*x(ee,K),K+=3,J.offset_y=2*x(ee,K),K+=3,J.width=1+x(ee,K),K+=3,J.height=1+x(ee,K),K+=3,J.duration=x(ee,K),K+=3,Ne=ee[K++],J.dispose=1&Ne,J.blend=Ne>>1&1}he!="ANMF"&&(K+=oe)}var fe,R;return ue}}(T,0);S.response=T,S.rgbaoutput=!0,S.dataurl=!1;var P=S.header?S.header:null,B=S.frames?S.frames:null;if(P){P.loop_counter=P.loop_count,b=[P.canvas_height],g=[P.canvas_width];for(var U=0;U<B.length&&B[U].blend!=0;U++);}var Q=B[0],ge=j.WebPDecodeRGBA(T,Q.src_off,Q.src_size,g,b);Q.rgba=ge,Q.imgwidth=g[0],Q.imgheight=b[0];for(var ae=0;ae<g[0]*b[0]*4;ae++)k[ae]=ge[ae];return this.width=g,this.height=b,this.data=k,this}(function(s){var t=function(){return typeof Fu=="function"},r=function(b,g,k,j){var T=4,S=c;switch(j){case s.image_compression.FAST:T=1,S=o;break;case s.image_compression.MEDIUM:T=6,S=h;break;case s.image_compression.SLOW:T=9,S=u}b=a(b,g,k,S);var P=Fu(b,{level:T});return s.__addimage__.arrayBufferToBinaryString(P)},a=function(b,g,k,j){for(var T,S,P,B=b.length/g,U=new Uint8Array(b.length+B),Q=x(),ge=0;ge<B;ge+=1){if(P=ge*g,T=b.subarray(P,P+g),j)U.set(j(T,k,S),P+ge);else{for(var ae,ee=Q.length,K=[];ae<ee;ae+=1)K[ae]=Q[ae](T,k,S);var ue=v(K.concat());U.set(K[ue],P+ge)}S=T}return U},i=function(b){var g=Array.apply([],b);return g.unshift(0),g},o=function(b,g){var k,j=[],T=b.length;j[0]=1;for(var S=0;S<T;S+=1)k=b[S-g]||0,j[S+1]=b[S]-k+256&255;return j},c=function(b,g,k){var j,T=[],S=b.length;T[0]=2;for(var P=0;P<S;P+=1)j=k&&k[P]||0,T[P+1]=b[P]-j+256&255;return T},h=function(b,g,k){var j,T,S=[],P=b.length;S[0]=3;for(var B=0;B<P;B+=1)j=b[B-g]||0,T=k&&k[B]||0,S[B+1]=b[B]+256-(j+T>>>1)&255;return S},u=function(b,g,k){var j,T,S,P,B=[],U=b.length;B[0]=4;for(var Q=0;Q<U;Q+=1)j=b[Q-g]||0,T=k&&k[Q]||0,S=k&&k[Q-g]||0,P=m(j,T,S),B[Q+1]=b[Q]-P+256&255;return B},m=function(b,g,k){if(b===g&&g===k)return b;var j=Math.abs(g-k),T=Math.abs(b-k),S=Math.abs(b+g-k-k);return j<=T&&j<=S?b:T<=S?g:k},x=function(){return[i,o,c,h,u]},v=function(b){var g=b.map(function(k){return k.reduce(function(j,T){return j+Math.abs(T)},0)});return g.indexOf(Math.min.apply(null,g))};s.processPNG=function(b,g,k,j){var T,S,P,B,U,Q,ge,ae,ee,K,ue,I,q,ne,Y,he=this.decode.FLATE_DECODE,pe="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(P=new LN(b)).imgData,S=P.bits,T=P.colorSpace,U=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){ee=(ae=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,ue=new Uint8Array(ee*P.colors),K=new Uint8Array(ee);var oe,ie=P.pixelBitlength-P.bits;for(ne=0,Y=0;ne<ee;ne++){for(q=ae[ne],oe=0;oe<ie;)ue[Y++]=q>>>oe&255,oe+=P.bits;K[ne]=q>>>oe&255}}if(P.bits===16){ee=(ae=new Uint32Array(P.decodePixels().buffer)).length,ue=new Uint8Array(ee*(32/P.pixelBitlength)*P.colors),K=new Uint8Array(ee*(32/P.pixelBitlength)),I=P.colors>1,ne=0,Y=0;for(var Ne=0;ne<ee;)q=ae[ne++],ue[Y++]=q>>>0&255,I&&(ue[Y++]=q>>>16&255,q=ae[ne++],ue[Y++]=q>>>0&255),K[Ne++]=q>>>16&255;S=8}j!==s.image_compression.NONE&&t()?(b=r(ue,P.width*P.colors,P.colors,j),ge=r(K,P.width,1,j)):(b=ue,ge=K,he=void 0)}if(P.colorType===3&&(T=this.color_spaces.INDEXED,Q=P.palette,P.transparency.indexed)){var J=P.transparency.indexed,fe=0;for(ne=0,ee=J.length;ne<ee;++ne)fe+=J[ne];if((fe/=255)===ee-1&&J.indexOf(0)!==-1)B=[J.indexOf(0)];else if(fe!==ee){for(ae=P.decodePixels(),K=new Uint8Array(ae.length),ne=0,ee=ae.length;ne<ee;ne++)K[ne]=J[ae[ne]];ge=r(K,P.width,1)}}var R=function(E){var D;switch(E){case s.image_compression.FAST:D=11;break;case s.image_compression.MEDIUM:D=13;break;case s.image_compression.SLOW:D=14;break;default:D=12}return D}(j);return he===this.decode.FLATE_DECODE&&(pe="/Predictor "+R+" "),pe+="/Colors "+U+" /BitsPerComponent "+S+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:k,data:b,index:g,filter:he,decodeParameters:pe,transparency:B,palette:Q,sMask:ge,predictor:R,width:P.width,height:P.height,bitsPerComponent:S,colorSpace:T}}}})(_t.API),function(s){s.processGIF89A=function(t,r,a,i){var o=new AN(t),c=o.width,h=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var m={data:u,width:c,height:h},x=new lu(100).encode(m,100);return s.processJPEG.call(this,x,r,a,i)},s.processGIF87A=s.processGIF89A}(_t.API),ga.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:a,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ga.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(r){As.log("bit decode error:"+r)}},ga.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),r=t%4;for(s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),c=a*this.width*4+8*i*4,h=0;h<8&&8*i+h<this.width;h++){var u=this.palette[o>>7-h&1];this.data[c+4*h]=u.blue,this.data[c+4*h+1]=u.green,this.data[c+4*h+2]=u.red,this.data[c+4*h+3]=255}r!==0&&(this.pos+=4-r)}},ga.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<s;i++){var o=this.datav.getUint8(this.pos++,!0),c=a*this.width*4+2*i*4,h=o>>4,u=15&o,m=this.palette[h];if(this.data[c]=m.blue,this.data[c+1]=m.green,this.data[c+2]=m.red,this.data[c+3]=255,2*i+1>=this.width)break;m=this.palette[u],this.data[c+4]=m.blue,this.data[c+4+1]=m.green,this.data[c+4+2]=m.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},ga.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*a;if(i<this.palette.length){var c=this.palette[i];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}s!==0&&(this.pos+=4-s)}},ga.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&t)/t*255|0,h=(o>>5&t)/t*255|0,u=(o>>10&t)/t*255|0,m=o>>15?255:0,x=a*this.width*4+4*i;this.data[x]=u,this.data[x+1]=h,this.data[x+2]=c,this.data[x+3]=m}this.pos+=s}},ga.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var i=this.bottom_up?a:this.height-1-a,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(c&t)/t*255|0,u=(c>>5&r)/r*255|0,m=(c>>11)/t*255|0,x=i*this.width*4+4*o;this.data[x]=m,this.data[x+1]=u,this.data[x+2]=h,this.data[x+3]=255}this.pos+=s}},ga.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=o,this.data[c+1]=i,this.data[c+2]=a,this.data[c+3]=255}this.pos+=this.width%4}},ga.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*r;this.data[h]=o,this.data[h+1]=i,this.data[h+2]=a,this.data[h+3]=c}},ga.prototype.getData=function(){return this.data},function(s){s.processBMP=function(t,r,a,i){var o=new ga(t,!1),c=o.width,h=o.height,u={data:o.getData(),width:c,height:h},m=new lu(100).encode(u,100);return s.processJPEG.call(this,m,r,a,i)}}(_t.API),vm.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(t,r,a,i){var o=new vm(t),c=o.width,h=o.height,u={data:o.getData(),width:c,height:h},m=new lu(100).encode(u,100);return s.processJPEG.call(this,m,r,a,i)}}(_t.API),_t.API.processRGBA=function(s,t,r){for(var a=s.data,i=a.length,o=new Uint8Array(i/4*3),c=new Uint8Array(i/4),h=0,u=0,m=0;m<i;m+=4){var x=a[m],v=a[m+1],b=a[m+2],g=a[m+3];o[h++]=x,o[h++]=v,o[h++]=b,c[u++]=g}var k=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:k,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},_t.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},al=_t.API,Mc=al.getCharWidthsArray=function(s,t){var r,a,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),h=t.widths?t.widths:i.metadata.Unicode.widths,u=h.fof?h.fof:1,m=t.kerning?t.kerning:i.metadata.Unicode.kerning,x=m.fof?m.fof:1,v=t.doKerning!==!1,b=0,g=s.length,k=0,j=h[0]||u,T=[];for(r=0;r<g;r++)a=s.charCodeAt(r),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(a))+c*(1e3/o)||0)/1e3):(b=v&&ws(m[a])==="object"&&!isNaN(parseInt(m[a][k],10))?m[a][k]/x:0,T.push((h[a]||j)/u+b)),k=a;return T},mm=al.getStringUnitWidth=function(s,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return al.processArabic&&(s=al.processArabic(s)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(s,r,i)/r:Mc.apply(this,arguments).reduce(function(o,c){return o+c},0)},pm=function(s,t,r,a){for(var i=[],o=0,c=s.length,h=0;o!==c&&h+t[o]<r;)h+=t[o],o++;i.push(s.slice(0,o));var u=o;for(h=0;o!==c;)h+t[o]>a&&(i.push(s.slice(u,o)),h=0,u=o),h+=t[o],o++;return u!==o&&i.push(s.slice(u,o)),i},gm=function(s,t,r){r||(r={});var a,i,o,c,h,u,m,x=[],v=[x],b=r.textIndent||0,g=0,k=0,j=s.split(" "),T=Mc.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var S=Array(u).join(" "),P=[];j.map(function(U){(U=U.split(/\s*\n/)).length>1?P=P.concat(U.map(function(Q,ge){return(ge&&Q.length?`
`:"")+Q})):P.push(U[0])}),j=P,u=mm.apply(this,[S,r])}for(o=0,c=j.length;o<c;o++){var B=0;if(a=j[o],u&&a[0]==`
`&&(a=a.substr(1),B=1),b+g+(k=(i=Mc.apply(this,[a,r])).reduce(function(U,Q){return U+Q},0))>t||B){if(k>t){for(h=pm.apply(this,[a,i,t-(b+g),t]),x.push(h.shift()),x=[h.pop()];h.length;)v.push([h.shift()]);k=i.slice(a.length-(x[0]?x[0].length:0)).reduce(function(U,Q){return U+Q},0)}else x=[a];v.push(x),b=k+u,g=T}else x.push(a),b+=g+k,g=T}return m=u?function(U,Q){return(Q?S:"")+U.join(" ")}:function(U){return U.join(" ")},v.map(m)},al.splitTextToSize=function(s,t,r){var a,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var v=this.internal.getFont(x.fontName,x.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(s)?s:String(s).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var h,u,m=[];for(h=0,u=a.length;h<u;h++)m=m.concat(gm.apply(this,[a[h],c,o]));return m},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},i=0;i<t.length;i++)r[t[i]]="0123456789abcdef"[i],a["0123456789abcdef"[i]]=t[i];var o=function(v){return"0x"+parseInt(v,10).toString(16)},c=s.__fontmetrics__.compress=function(v){var b,g,k,j,T=["{"];for(var S in v){if(b=v[S],isNaN(parseInt(S,10))?g="'"+S+"'":(S=parseInt(S,10),g=(g=o(S).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof b=="number")b<0?(k=o(b).slice(3),j="-"):(k=o(b).slice(2),j=""),k=j+k.slice(0,-1)+a[k.slice(-1)];else{if(ws(b)!=="object")throw new Error("Don't know what to do with value type "+ws(b)+".");k=c(b)}T.push(g+k)}return T.push("}"),T.join("")},h=s.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,g,k,j,T={},S=1,P=T,B=[],U="",Q="",ge=v.length-1,ae=1;ae<ge;ae+=1)(j=v[ae])=="'"?b?(k=b.join(""),b=void 0):b=[]:b?b.push(j):j=="{"?(B.push([P,k]),P={},k=void 0):j=="}"?((g=B.pop())[0][g[1]]=P,k=void 0,P=g[0]):j=="-"?S=-1:k===void 0?r.hasOwnProperty(j)?(U+=r[j],k=parseInt(U,16)*S,S=1,U=""):U+=j:r.hasOwnProperty(j)?(Q+=r[j],P[k]=parseInt(Q,16)*S,S=1,k=void 0,Q=""):Q+=j;return T},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},x={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(v){var b=v.font,g=x.Unicode[b.postScriptName];g&&(b.metadata.Unicode={},b.metadata.Unicode.widths=g.widths,b.metadata.Unicode.kerning=g.kerning);var k=m.Unicode[b.postScriptName];k&&(b.metadata.Unicode.encoding=k,b.encoding=k.codePages[0])}])}(_t.API),function(s){var t=function(r){for(var a=r.length,i=new Uint8Array(a),o=0;o<a;o++)i[o]=r.charCodeAt(o);return i};s.API.events.push(["addFont",function(r){var a=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(a=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,h){h=/^\x00\x01\x00\x00/.test(h)?t(h):t(Kl(h)),c.metadata=s.API.TTFFont.open(h),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,a)}}])}(_t),function(s){function t(){return(kt.canvg?Promise.resolve(kt.canvg):Iu(()=>import("./index.es-xMv99kT-.js"),__vite__mapDeps([0,1,2,3]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}_t.API.addSvgAsImage=function(r,a,i,o,c,h,u,m){if(isNaN(a)||isNaN(i))throw As.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(c))throw As.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=o,x.height=c;var v=x.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,x.width,x.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(k){return k.fromString(v,r,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(b)}).then(function(){g.addImage(x.toDataURL("image/jpeg",1),a,i,o,c,u,m)})}}(),_t.API.putTotalPages=function(s){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var i=0;i<this.internal.pages[a].length;i++)this.internal.pages[a][i]=this.internal.pages[a][i].replace(t,r);return this},_t.API.viewerPreferences=function(s,t){var r;s=s||{},t=t||!1;var a,i,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(c),u=[],m=0,x=0,v=0;function b(k,j){var T,S=!1;for(T=0;T<k.length;T+=1)k[T]===j&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var g=h.length;for(v=0;v<g;v+=1)r[h[v]].value=r[h[v]].defaultValue,r[h[v]].explicitSet=!1}if(ws(s)==="object"){for(i in s)if(o=s[i],b(h,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&b(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(m=0;m<o.length;m+=1)if(a=!0,o[m].length===1&&typeof o[m][0]=="number")u.push(String(o[m]-1));else if(o[m].length>1){for(x=0;x<o[m].length;x+=1)typeof o[m][x]!="number"&&(a=!1);a===!0&&u.push([o[m][0]-1,o[m][1]-1].join(" "))}r[i].value="["+u.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,j=[];for(k in r)r[k].explicitSet===!0&&(r[k].type==="name"?j.push("/"+k+" /"+r[k].value):j.push("/"+k+" "+r[k].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(s){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(a)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),m=o.length+c.length+h.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(i+o+c+h+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(a,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(_t.API),function(s){var t=s.API,r=t.pdfEscape16=function(o,c){for(var h,u=c.metadata.Unicode.widths,m=["","0","00","000","0000"],x=[""],v=0,b=o.length;v<b;++v){if(h=c.metadata.characterToGlyph(o.charCodeAt(v)),c.metadata.glyIdsUsed.push(h),c.metadata.toUnicode[h]=o.charCodeAt(v),u.indexOf(h)==-1&&(u.push(h),u.push([parseInt(c.metadata.widthOfGlyph(h),10)])),h=="0")return x.join("");h=h.toString(16),x.push(m[4-h.length],h)}return x.join("")},a=function(o){var c,h,u,m,x,v,b;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],v=0,b=(h=Object.keys(o).sort(function(g,k){return g-k})).length;v<b;v++)c=h[v],u.length>=100&&(x+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(m=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),u.push("<"+c+"><"+m+">"));return u.length&&(x+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(c){var h=c.font,u=c.out,m=c.newObject,x=c.putStream;if(h.metadata instanceof s.API.TTFFont&&h.encoding==="Identity-H"){for(var v=h.metadata.Unicode.widths,b=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),g="",k=0;k<b.length;k++)g+=String.fromCharCode(b[k]);var j=m();x({data:g,addLength1:!0,objectId:j}),u("endobj");var T=m();x({data:a(h.metadata.toUnicode),addLength1:!0,objectId:T}),u("endobj");var S=m();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+ol(h.fontName)),u("/FontFile2 "+j+" 0 R"),u("/FontBBox "+s.API.PDFObject.convert(h.metadata.bbox)),u("/Flags "+h.metadata.flags),u("/StemV "+h.metadata.stemV),u("/ItalicAngle "+h.metadata.italicAngle),u("/Ascent "+h.metadata.ascender),u("/Descent "+h.metadata.decender),u("/CapHeight "+h.metadata.capHeight),u(">>"),u("endobj");var P=m();u("<<"),u("/Type /Font"),u("/BaseFont /"+ol(h.fontName)),u("/FontDescriptor "+S+" 0 R"),u("/W "+s.API.PDFObject.convert(v)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+h.encoding+")"),u(">>"),u(">>"),u("endobj"),h.objectNumber=m(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+T+" 0 R"),u("/BaseFont /"+ol(h.fontName)),u("/Encoding /"+h.encoding),u("/DescendantFonts ["+P+" 0 R]"),u(">>"),u("endobj"),h.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(c){var h=c.font,u=c.out,m=c.newObject,x=c.putStream;if(h.metadata instanceof s.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var v=h.metadata.rawData,b="",g=0;g<v.length;g++)b+=String.fromCharCode(v[g]);var k=m();x({data:b,addLength1:!0,objectId:k}),u("endobj");var j=m();x({data:a(h.metadata.toUnicode),addLength1:!0,objectId:j}),u("endobj");var T=m();u("<<"),u("/Descent "+h.metadata.decender),u("/CapHeight "+h.metadata.capHeight),u("/StemV "+h.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+k+" 0 R"),u("/Flags 96"),u("/FontBBox "+s.API.PDFObject.convert(h.metadata.bbox)),u("/FontName /"+ol(h.fontName)),u("/ItalicAngle "+h.metadata.italicAngle),u("/Ascent "+h.metadata.ascender),u(">>"),u("endobj"),h.objectNumber=m();for(var S=0;S<h.metadata.hmtx.widths.length;S++)h.metadata.hmtx.widths[S]=parseInt(h.metadata.hmtx.widths[S]*(1e3/h.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+ol(h.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),u("endobj"),h.isAlreadyPutted=!0}})(o)}]);var i=function(o){var c,h=o.text||"",u=o.x,m=o.y,x=o.options||{},v=o.mutex||{},b=v.pdfEscape,g=v.activeFontKey,k=v.fonts,j=g,T="",S=0,P="",B=k[j].encoding;if(k[j].encoding!=="Identity-H")return{text:h,x:u,y:m,options:x,mutex:v};for(P=h,j=g,Array.isArray(h)&&(P=h[0]),S=0;S<P.length;S+=1)k[j].metadata.hasOwnProperty("cmap")&&(c=k[j].metadata.cmap.unicode.codeMap[P[S].charCodeAt(0)]),c||P[S].charCodeAt(0)<256&&k[j].metadata.hasOwnProperty("Unicode")?T+=P[S]:T+="";var U="";return parseInt(j.slice(1))<14||B==="WinAnsiEncoding"?U=b(T,j).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(U=r(T,k[j])),v.isHex=!0,{text:U,x:u,y:m,options:x,mutex:v}};t.events.push(["postProcessText",function(o){var c=o.text||"",h=[],u={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var m=0;for(m=0;m<c.length;m+=1)Array.isArray(c[m])&&c[m].length===3?h.push([i(Object.assign({},u,{text:c[m][0]})).text,c[m][1],c[m][2]]):h.push(i(Object.assign({},u,{text:c[m]})).text);o.text=h}else o.text=i(Object.assign({},u,{text:c})).text}])}(_t),function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},s.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},s.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(_t.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(a){var i,o,c,h,u,m,x,v=t,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,B=0;this.__bidiEngine__={};var U=function(I){var q=I.charCodeAt(),ne=q>>8,Y=j[ne];return Y!==void 0?v[256*Y+(255&q)]:ne===252||ne===253?"AL":S.test(ne)?"L":ne===8?"R":"N"},Q=function(I){for(var q,ne=0;ne<I.length;ne++){if((q=U(I.charAt(ne)))==="L")return!1;if(q==="R")return!0}return!1},ge=function(I,q,ne,Y){var he,pe,oe,ie,Ne=q[Y];switch(Ne){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(Ne="AN");break;case"AL":P=!0,Ne="R";break;case"WS":Ne="N";break;case"CS":Y<1||Y+1>=q.length||(he=ne[Y-1])!=="EN"&&he!=="AN"||(pe=q[Y+1])!=="EN"&&pe!=="AN"?Ne="N":P&&(pe="AN"),Ne=pe===he?pe:"N";break;case"ES":Ne=(he=Y>0?ne[Y-1]:"B")==="EN"&&Y+1<q.length&&q[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&ne[Y-1]==="EN"){Ne="EN";break}if(P){Ne="N";break}for(oe=Y+1,ie=q.length;oe<ie&&q[oe]==="ET";)oe++;Ne=oe<ie&&q[oe]==="EN"?"EN":"N";break;case"NSM":if(c&&!h){for(ie=q.length,oe=Y+1;oe<ie&&q[oe]==="NSM";)oe++;if(oe<ie){var J=I[Y],fe=J>=1425&&J<=2303||J===64286;if(he=q[oe],fe&&(he==="R"||he==="AL")){Ne="R";break}}}Ne=Y<1||(he=q[Y-1])==="B"?"N":ne[Y-1];break;case"B":P=!1,i=!0,Ne=B;break;case"S":o=!0,Ne="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":Ne="N"}return Ne},ae=function(I,q,ne){var Y=I.split("");return ne&&ee(Y,ne,{hiLevel:B}),Y.reverse(),q&&q.reverse(),Y.join("")},ee=function(I,q,ne){var Y,he,pe,oe,ie,Ne=-1,J=I.length,fe=0,R=[],E=B?g:b,D=[];for(P=!1,i=!1,o=!1,he=0;he<J;he++)D[he]=U(I[he]);for(pe=0;pe<J;pe++){if(ie=fe,R[pe]=ge(I,D,R,pe),Y=240&(fe=E[ie][k[R[pe]]]),fe&=15,q[pe]=oe=E[fe][5],Y>0)if(Y===16){for(he=Ne;he<pe;he++)q[he]=1;Ne=-1}else Ne=-1;if(E[fe][6])Ne===-1&&(Ne=pe);else if(Ne>-1){for(he=Ne;he<pe;he++)q[he]=oe;Ne=-1}D[pe]==="B"&&(q[pe]=0),ne.hiLevel|=oe}o&&function(W,se,X){for(var le=0;le<X;le++)if(W[le]==="S"){se[le]=B;for(var ce=le-1;ce>=0&&W[ce]==="WS";ce--)se[ce]=B}}(D,q,J)},K=function(I,q,ne,Y,he){if(!(he.hiLevel<I)){if(I===1&&B===1&&!i)return q.reverse(),void(ne&&ne.reverse());for(var pe,oe,ie,Ne,J=q.length,fe=0;fe<J;){if(Y[fe]>=I){for(ie=fe+1;ie<J&&Y[ie]>=I;)ie++;for(Ne=fe,oe=ie-1;Ne<oe;Ne++,oe--)pe=q[Ne],q[Ne]=q[oe],q[oe]=pe,ne&&(pe=ne[Ne],ne[Ne]=ne[oe],ne[oe]=pe);fe=ie}fe++}}},ue=function(I,q,ne){var Y=I.split(""),he={hiLevel:B};return ne||(ne=[]),ee(Y,ne,he),function(pe,oe,ie){if(ie.hiLevel!==0&&x)for(var Ne,J=0;J<pe.length;J++)oe[J]===1&&(Ne=T.indexOf(pe[J]))>=0&&(pe[J]=T[Ne+1])}(Y,ne,he),K(2,Y,q,ne,he),K(1,Y,q,ne,he),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(I,q,ne){if(function(he,pe){if(pe)for(var oe=0;oe<he.length;oe++)pe[oe]=oe;h===void 0&&(h=Q(he)),m===void 0&&(m=Q(he))}(I,q),c||!u||m)if(c&&u&&h^m)B=h?1:0,I=ae(I,q,ne);else if(!c&&u&&m)B=h?1:0,I=ue(I,q,ne),I=ae(I,q);else if(!c||h||u||m){if(c&&!u&&h^m)I=ae(I,q),h?(B=0,I=ue(I,q,ne)):(B=1,I=ue(I,q,ne),I=ae(I,q));else if(c&&h&&!u&&m)B=1,I=ue(I,q,ne),I=ae(I,q);else if(!c&&!u&&h^m){var Y=x;h?(B=1,I=ue(I,q,ne),B=0,x=!1,I=ue(I,q,ne),x=Y):(B=0,I=ue(I,q,ne),I=ae(I,q),B=1,x=!1,I=ue(I,q,ne),x=Y,I=ae(I,q))}}else B=0,I=ue(I,q,ne);else B=h?1:0,I=ue(I,q,ne);return I},this.__bidiEngine__.setOptions=function(I){I&&(c=I.isInputVisual,u=I.isOutputVisual,h=I.isInputRtl,m=I.isOutputRtl,x=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(a){var i=a.text;a.x,a.y;var o=a.options||{};a.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var h=0;for(c=[],h=0;h<i.length;h+=1)Object.prototype.toString.call(i[h])==="[object Array]"?c.push([r.doBidiReorder(i[h][0]),i[h][1],i[h][2]]):c.push([r.doBidiReorder(i[h])]);a.text=c}else a.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(_t),_t.API.TTFFont=function(){function s(t){var r;if(this.rawData=t,r=this.contents=new Wi(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new WN(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new TN(this.contents),this.head=new IN(this),this.name=new FN(this),this.cmap=new ox(this),this.toUnicode={},this.hhea=new RN(this),this.maxp=new zN(this),this.hmtx=new BN(this),this.post=new ON(this),this.os2=new MN(this),this.loca=new HN(this),this.glyf=new qN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,r,a,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,h,u,m;for(m=[],c=0,h=(u=this.bbox).length;c<h;c++)t=u[c],m.push(Math.round(t*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(a=255&(i=this.post.italic_angle),(32768&(r=i>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},s.prototype.widthOfString=function(t,r,a){var i,o,c,h;for(c=0,o=0,h=(t=""+t).length;0<=h?o<h:o>h;o=0<=h?++o:--o)i=t.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(i))+a*(1e3/r)||0;return c*(r/1e3)},s.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},s}();var Na,Wi=function(){function s(t){this.data=t??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},s.prototype.writeString=function(t){var r,a,i;for(i=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,r,a,i,o,c,h,u;return t=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),h=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^i)+16777216*(255^o)+65536*(255^c)+256*(255^h)+(255^u)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*i+16777216*o+65536*c+256*h+u},s.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},s.prototype.write=function(t){var r,a,i,o;for(o=[],a=0,i=t.length;a<i;a++)r=t[a],o.push(this.writeByte(r));return o},s}(),TN=function(){var s;function t(r){var a,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,i,o,c,h,u,m,x,v,b,g,k,j;for(j in g=Object.keys(r).length,u=Math.log(2),v=16*Math.floor(Math.log(g)/u),c=Math.floor(v/u),x=16*g-v,(i=new Wi).writeInt(this.scalarType),i.writeShort(g),i.writeShort(v),i.writeShort(c),i.writeShort(x),o=16*g,m=i.pos+o,h=null,k=[],r)for(b=r[j],i.writeString(j),i.writeInt(s(b)),i.writeInt(m),i.writeInt(b.length),k=k.concat(b),j==="head"&&(h=m),m+=b.length;m%4;)k.push(0),m++;return i.write(k),a=2981146554-s(i.data),i.pos=h+8,i.writeUInt32(a),i.data},s=function(r){var a,i,o,c;for(r=lx.call(r);r.length%4;)r.push(0);for(o=new Wi(r),i=0,a=0,c=r.length;a<c;a=a+=4)i+=o.readUInt32();return 4294967295&i},t}(),EN={}.hasOwnProperty,Za=function(s,t){for(var r in t)EN.call(t,r)&&(s[r]=t[r]);function a(){this.constructor=s}return a.prototype=t.prototype,s.prototype=new a,s.__super__=t.prototype,s};Na=function(){function s(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var IN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new Wi).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),ym=function(){function s(t,r){var a,i,o,c,h,u,m,x,v,b,g,k,j,T,S,P,B;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(g=t.readUInt16(),b=g/2,t.pos+=6,o=function(){var U,Q;for(Q=[],u=U=0;0<=b?U<b:U>b;u=0<=b?++U:--U)Q.push(t.readUInt16());return Q}(),t.pos+=2,j=function(){var U,Q;for(Q=[],u=U=0;0<=b?U<b:U>b;u=0<=b?++U:--U)Q.push(t.readUInt16());return Q}(),m=function(){var U,Q;for(Q=[],u=U=0;0<=b?U<b:U>b;u=0<=b?++U:--U)Q.push(t.readUInt16());return Q}(),x=function(){var U,Q;for(Q=[],u=U=0;0<=b?U<b:U>b;u=0<=b?++U:--U)Q.push(t.readUInt16());return Q}(),i=(this.length-t.pos+this.offset)/2,h=function(){var U,Q;for(Q=[],u=U=0;0<=i?U<i:U>i;u=0<=i?++U:--U)Q.push(t.readUInt16());return Q}(),u=S=0,B=o.length;S<B;u=++S)for(T=o[u],a=P=k=j[u];k<=T?P<=T:P>=T;a=k<=T?++P:--P)x[u]===0?c=a+m[u]:(c=h[x[u]/2+(a-k)-(b-u)]||0)!==0&&(c+=m[u]),this.codeMap[a]=65535&c}t.pos=v}return s.encode=function(t,r){var a,i,o,c,h,u,m,x,v,b,g,k,j,T,S,P,B,U,Q,ge,ae,ee,K,ue,I,q,ne,Y,he,pe,oe,ie,Ne,J,fe,R,E,D,W,se,X,le,ce,xe,je,Me;switch(Y=new Wi,c=Object.keys(t).sort(function(De,Ye){return De-Ye}),r){case"macroman":for(j=0,T=function(){var De=[];for(k=0;k<256;++k)De.push(0);return De}(),P={0:0},o={},he=0,Ne=c.length;he<Ne;he++)P[ce=t[i=c[he]]]==null&&(P[ce]=++j),o[i]={old:t[i],new:P[t[i]]},T[i]=P[t[i]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(T),{charMap:o,subtable:Y.data,maxGlyphID:j+1};case"unicode":for(q=[],v=[],B=0,P={},a={},S=m=null,pe=0,J=c.length;pe<J;pe++)P[Q=t[i=c[pe]]]==null&&(P[Q]=++B),a[i]={old:Q,new:P[Q]},h=P[Q]-i,S!=null&&h===m||(S&&v.push(S),q.push(i),m=h),S=i;for(S&&v.push(S),v.push(65535),q.push(65535),ue=2*(K=q.length),ee=2*Math.pow(Math.log(K)/Math.LN2,2),b=Math.log(ee/2)/Math.LN2,ae=2*K-ee,u=[],ge=[],g=[],k=oe=0,fe=q.length;oe<fe;k=++oe){if(I=q[k],x=v[k],I===65535){u.push(0),ge.push(0);break}if(I-(ne=a[I].new)>=32768)for(u.push(0),ge.push(2*(g.length+K-k)),i=ie=I;I<=x?ie<=x:ie>=x;i=I<=x?++ie:--ie)g.push(a[i].new);else u.push(ne-I),ge.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*K+2*g.length),Y.writeUInt16(0),Y.writeUInt16(ue),Y.writeUInt16(ee),Y.writeUInt16(b),Y.writeUInt16(ae),X=0,R=v.length;X<R;X++)i=v[X],Y.writeUInt16(i);for(Y.writeUInt16(0),le=0,E=q.length;le<E;le++)i=q[le],Y.writeUInt16(i);for(xe=0,D=u.length;xe<D;xe++)h=u[xe],Y.writeUInt16(h);for(je=0,W=ge.length;je<W;je++)U=ge[je],Y.writeUInt16(U);for(Me=0,se=g.length;Me<se;Me++)j=g[Me],Y.writeUInt16(j);return{charMap:a,subtable:Y.data,maxGlyphID:B+1}}},s}(),ox=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,i,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)a=new ym(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var i,o;return a==null&&(a="macroman"),i=ym.encode(r,a),(o=new Wi).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},t}(),RN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),MN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,i;for(i=[],a=0;a<10;++a)i.push(r.readByte());return i}(),this.charRange=function(){var a,i;for(i=[],a=0;a<4;++a)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,i;for(i=[],a=0;a<2;a=++a)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),ON=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="post",t.prototype.parse=function(r){var a,i,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(i=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=i?c<i:c>i;c=0<=i?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)a=r.readByte(),o.push(this.names.push(r.readString(a)));return o;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var h,u,m;for(m=[],c=h=0,u=this.file.maxp.numGlyphs;0<=u?h<u:h>u;c=0<=u?++h:--h)m.push(r.readUInt32());return m}).call(this)}},t}(),DN=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},FN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="name",t.prototype.parse=function(r){var a,i,o,c,h,u,m,x,v,b,g;for(r.pos=this.offset,r.readShort(),a=r.readShort(),u=r.readShort(),i=[],c=0;0<=a?c<a:c>a;c=0<=a?++c:--c)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+u+r.readShort()});for(m={},c=v=0,b=i.length;v<b;c=++v)o=i[c],r.pos=o.offset,x=r.readString(o.length),h=new DN(x,o),m[g=o.nameID]==null&&(m[g]=[]),m[o.nameID].push(h);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},t}(),zN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),BN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,i,o,c,h,u,m;for(r.pos=this.offset,this.metrics=[],a=0,u=this.file.hhea.numberOfMetrics;0<=u?a<u:a>u;a=0<=u?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,v;for(v=[],a=x=0;0<=o?x<o:x>o;a=0<=o?++x:--x)v.push(r.readInt16());return v}(),this.widths=(function(){var x,v,b,g;for(g=[],x=0,v=(b=this.metrics).length;x<v;x++)c=b[x],g.push(c.advance);return g}).call(this),i=this.widths[this.widths.length-1],m=[],a=h=0;0<=o?h<o:h>o;a=0<=o?++h:--h)m.push(this.widths.push(i));return m},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),lx=[].slice,qN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,i,o,c,h,u,m,x,v,b;return r in this.cache?this.cache[r]:(c=this.file.loca,a=this.file.contents,i=c.indexOf(r),(o=c.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+i,h=(u=new Wi(a.read(o))).readShort(),x=u.readShort(),b=u.readShort(),m=u.readShort(),v=u.readShort(),this.cache[r]=h===-1?new UN(u,x,b,m,v):new $N(u,h,x,b,m,v),this.cache[r]))},t.prototype.encode=function(r,a,i){var o,c,h,u,m;for(h=[],c=[],u=0,m=a.length;u<m;u++)o=r[a[u]],c.push(h.length),o&&(h=h.concat(o.encode(i)));return c.push(h.length),{table:h,offsets:c}},t}(),$N=function(){function s(t,r,a,i,o,c){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=i,this.xMax=o,this.yMax=c,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),UN=function(){function s(t,r,a,i,o){var c,h;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;h=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&h;)c.pos+=1&h?4:2,128&h?c.pos+=8:64&h?c.pos+=4:8&h&&(c.pos+=2)}return s.prototype.encode=function(){var t,r,a;for(r=new Wi(lx.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},s}(),HN=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Za(t,Na),t.prototype.tag="loca",t.prototype.parse=function(r){var a,i;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var o,c;for(c=[],i=0,o=this.length;i<o;i+=2)c.push(2*r.readUInt16());return c}).call(this):(function(){var o,c;for(c=[],i=0,o=this.length;i<o;i+=4)c.push(r.readUInt32());return c}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var i=new Uint32Array(this.offsets.length),o=0,c=0,h=0;h<i.length;++h)if(i[h]=o,c<a.length&&a[c]==h){++c,i[h]=o;var u=this.offsets[h],m=this.offsets[h+1]-u;m>0&&(o+=m)}for(var x=new Array(4*i.length),v=0;v<i.length;++v)x[4*v+3]=255&i[v],x[4*v+2]=(65280&i[v])>>8,x[4*v+1]=(16711680&i[v])>>16,x[4*v]=(4278190080&i[v])>>24;return x},t}(),WN=function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,r,a,i,o;for(r in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)a=o[r],t[r]=i[a];return t},s.prototype.glyphsFor=function(t){var r,a,i,o,c,h,u;for(i={},c=0,h=t.length;c<h;c++)i[o=t[c]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(a=i[o])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(o in u=this.glyphsFor(r))a=u[o],i[o]=a;return i},s.prototype.encode=function(t,r){var a,i,o,c,h,u,m,x,v,b,g,k,j,T,S;for(i in a=ox.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),g={0:0},S=a.charMap)g[(u=S[i]).old]=u.new;for(k in b=a.maxGlyphID,c)k in g||(g[k]=b++);return x=function(P){var B,U;for(B in U={},P)U[P[B]]=B;return U}(g),v=Object.keys(x).sort(function(P,B){return P-B}),j=function(){var P,B,U;for(U=[],P=0,B=v.length;P<B;P++)h=v[P],U.push(x[h]);return U}(),o=this.font.glyf.encode(c,j,g),m=this.font.loca.encode(o.offsets,j),T={cmap:this.font.cmap.raw(),glyf:o.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},s}();_t.API.PDFObject=function(){var s;function t(){}return s=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,i,o,c;if(Array.isArray(r))return"["+function(){var h,u,m;for(m=[],h=0,u=r.length;h<u;h++)a=r[h],m.push(t.convert(a));return m}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+s(r.getUTCFullYear(),4)+s(r.getUTCMonth(),2)+s(r.getUTCDate(),2)+s(r.getUTCHours(),2)+s(r.getUTCMinutes(),2)+s(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)c=r[i],o.push("/"+i+" "+t.convert(c));return o.push(">>"),o.join(`
`)}return""+r},t}();function cx(s,t,r,a,i){a=a||{};var o=1.15,c=i.internal.scaleFactor,h=i.internal.getFontSize()/c,u=i.getLineHeightFactor?i.getLineHeightFactor():o,m=h*u,x=/\r\n|\r|\n/g,v="",b=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(v=typeof s=="string"?s.split(x):s,b=v.length||1),r+=h*(2-o),a.valign==="middle"?r-=b/2*m:a.valign==="bottom"&&(r-=b*m),a.halign==="center"||a.halign==="right"){var g=h;if(a.halign==="center"&&(g*=.5),v&&b>=1){for(var k=0;k<v.length;k++)i.text(v[k],t-i.getStringUnitWidth(v[k])*g,r),r+=m;return i}t-=i.getStringUnitWidth(s)*g}return a.halign==="justify"?i.text(s,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):i.text(s,t,r),i}var bm={},ml=function(){function s(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:bm=t},s.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},s.prototype.applyStyles=function(t,r){var a,i,o;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var c=this.jsPDFDocument.internal.getFont(),h=c.fontStyle,u=c.fontName;if(t.font&&(u=t.font),t.fontStyle){h=t.fontStyle;var m=this.getFontList()[u];m&&m.indexOf(h)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(m[0]),h=m[0])}if(this.jsPDFDocument.setFont(u,h),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var x=s.unifyColor(t.fillColor);x&&(a=this.jsPDFDocument).setFillColor.apply(a,x),x=s.unifyColor(t.textColor),x&&(i=this.jsPDFDocument).setTextColor.apply(i,x),x=s.unifyColor(t.lineColor),x&&(o=this.jsPDFDocument).setDrawColor.apply(o,x),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},s.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},s.prototype.rect=function(t,r,a,i,o){return this.jsPDFDocument.rect(t,r,a,i,o)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return bm||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s}(),Wu=function(s,t){return Wu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},Wu(s,t)};function dx(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Wu(s,t);function r(){this.constructor=s}s.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ux=function(s){dx(t,s);function t(r){var a=s.call(this)||this;return a._element=r,a}return t}(Array);function VN(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ZN(s){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[s]}function ld(s,t,r){r.applyStyles(t,!0);var a=Array.isArray(s)?s:[s],i=a.map(function(o){return r.getTextWidth(o)}).reduce(function(o,c){return Math.max(o,c)},0);return i}function hx(s,t,r,a){var i=t.settings.tableLineWidth,o=t.settings.tableLineColor;s.applyStyles({lineWidth:i,lineColor:o});var c=fx(i,!1);c&&s.rect(r.x,r.y,t.getWidth(s.pageSize().width),a.y-r.y,c)}function fx(s,t){var r=s>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function Cd(s,t){var r,a,i,o;if(s=s||t,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=t}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(r=s.left)!==null&&r!==void 0?r:t,top:(a=s.top)!==null&&a!==void 0?a:t,right:(i=s.right)!==null&&i!==void 0?i:t,bottom:(o=s.bottom)!==null&&o!==void 0?o:t}):(typeof s!="number"&&(s=t),{top:s,right:s,bottom:s,left:s})}function mx(s,t){var r=Cd(t.settings.margin,0);return s.pageSize().width-(r.left+r.right)}function GN(s,t,r,a,i){var o={},c=1.3333333333333333,h=cu(t,function(B){return i.getComputedStyle(B).backgroundColor});h!=null&&(o.fillColor=h);var u=cu(t,function(B){return i.getComputedStyle(B).color});u!=null&&(o.textColor=u);var m=KN(a,r);m&&(o.cellPadding=m);var x="borderTopColor",v=c*r,b=a.borderTopWidth;if(a.borderBottomWidth===b&&a.borderRightWidth===b&&a.borderLeftWidth===b){var g=(parseFloat(b)||0)/v;g&&(o.lineWidth=g)}else o.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/v,right:(parseFloat(a.borderRightWidth)||0)/v,bottom:(parseFloat(a.borderBottomWidth)||0)/v,left:(parseFloat(a.borderLeftWidth)||0)/v},o.lineWidth.top||(o.lineWidth.right?x="borderRightColor":o.lineWidth.bottom?x="borderBottomColor":o.lineWidth.left&&(x="borderLeftColor"));var k=cu(t,function(B){return i.getComputedStyle(B)[x]});k!=null&&(o.lineColor=k);var j=["left","right","center","justify"];j.indexOf(a.textAlign)!==-1&&(o.halign=a.textAlign),j=["middle","bottom","top"],j.indexOf(a.verticalAlign)!==-1&&(o.valign=a.verticalAlign);var T=parseInt(a.fontSize||"");isNaN(T)||(o.fontSize=T/c);var S=YN(a);S&&(o.fontStyle=S);var P=(a.fontFamily||"").toLowerCase();return s.indexOf(P)!==-1&&(o.font=P),o}function YN(s){var t="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(t="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(t+="italic"),t}function cu(s,t){var r=px(s,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var i=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],o=parseInt(a[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function px(s,t){var r=t(s);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?s.parentElement==null?null:px(s.parentElement,t):r}function KN(s,t){var r=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],a=96/(72/t),i=(parseInt(s.lineHeight)-parseInt(s.fontSize))/t/2,o=r.map(function(h){return parseInt(h||"0")/a}),c=Cd(o,0);return i>c.top&&(c.top=i),i>c.bottom&&(c.bottom=i),c}function gx(s,t,r,a,i){var o,c;a===void 0&&(a=!1),i===void 0&&(i=!1);var h;typeof t=="string"?h=r.document.querySelector(t):h=t;var u=Object.keys(s.getFontList()),m=s.scaleFactor(),x=[],v=[],b=[];if(!h)return console.error("Html table could not be found with input: ",t),{head:x,body:v,foot:b};for(var g=0;g<h.rows.length;g++){var k=h.rows[g],j=(c=(o=k?.parentElement)===null||o===void 0?void 0:o.tagName)===null||c===void 0?void 0:c.toLowerCase(),T=JN(u,m,r,k,a,i);T&&(j==="thead"?x.push(T):j==="tfoot"?b.push(T):v.push(T))}return{head:x,body:v,foot:b}}function JN(s,t,r,a,i,o){for(var c=new ux(a),h=0;h<a.cells.length;h++){var u=a.cells[h],m=r.getComputedStyle(u);if(i||m.display!=="none"){var x=void 0;o&&(x=GN(s,u,t,m,r)),c.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:x,_element:u,content:XN(u)})}}var v=r.getComputedStyle(a);if(c.length>0&&(i||v.display!=="none"))return c}function XN(s){var t=s.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function QN(s,t,r){for(var a=0,i=[s,t,r];a<i.length;a++){var o=i[a];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function ii(s,t,r,a,i){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(s),c=1;c<arguments.length;c++){var h=arguments[c];if(h!=null)for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&(o[u]=h[u])}return o}function xx(s,t){var r=new ml(s),a=r.getDocumentOptions(),i=r.getGlobalOptions();QN(i,a,t);var o=ii({},i,a,t),c;typeof window<"u"&&(c=window);var h=ej(i,a,t),u=tj(i,a,t),m=sj(r,o),x=nj(r,o,c);return{id:t.tableId,content:x,hooks:u,styles:h,settings:m}}function ej(s,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(u){if(u==="columnStyles"){var m=s[u],x=t[u],v=r[u];a.columnStyles=ii({},m,x,v)}else{var b=[s,t,r],g=b.map(function(k){return k[u]||{}});a[u]=ii({},g[0],g[1],g[2])}},o=0,c=Object.keys(a);o<c.length;o++){var h=c[o];i(h)}return a}function tj(s,t,r){for(var a=[s,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,c=a;o<c.length;o++){var h=c[o];h.didParseCell&&i.didParseCell.push(h.didParseCell),h.willDrawCell&&i.willDrawCell.push(h.willDrawCell),h.didDrawCell&&i.didDrawCell.push(h.didDrawCell),h.willDrawPage&&i.willDrawPage.push(h.willDrawPage),h.didDrawPage&&i.didDrawPage.push(h.didDrawPage)}return i}function sj(s,t){var r,a,i,o,c,h,u,m,x,v,b,g,k=Cd(t.margin,40/s.scaleFactor()),j=(r=rj(s,t.startY))!==null&&r!==void 0?r:k.top,T;t.showFoot===!0?T="everyPage":t.showFoot===!1?T="never":T=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var S;t.showHead===!0?S="everyPage":t.showHead===!1?S="never":S=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var P=(o=t.useCss)!==null&&o!==void 0?o:!1,B=t.theme||(P?"plain":"striped"),U=!!t.horizontalPageBreak,Q=(c=t.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(h=t.includeHiddenHtml)!==null&&h!==void 0?h:!1,useCss:P,theme:B,startY:j,margin:k,pageBreak:(u=t.pageBreak)!==null&&u!==void 0?u:"auto",rowPageBreak:(m=t.rowPageBreak)!==null&&m!==void 0?m:"auto",tableWidth:(x=t.tableWidth)!==null&&x!==void 0?x:"auto",showHead:S,showFoot:T,tableLineWidth:(v=t.tableLineWidth)!==null&&v!==void 0?v:0,tableLineColor:(b=t.tableLineColor)!==null&&b!==void 0?b:200,horizontalPageBreak:U,horizontalPageBreakRepeat:Q,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function rj(s,t){var r=s.getLastAutoTable(),a=s.scaleFactor(),i=s.pageNumber(),o=!1;if(r&&r.startPageNumber){var c=r.startPageNumber+r.pageNumber-1;o=c===i}return typeof t=="number"?t:(t==null||t===!1)&&o&&r?.finalY!=null?r.finalY+20/a:null}function nj(s,t,r){var a=t.head||[],i=t.body||[],o=t.foot||[];if(t.html){var c=t.includeHiddenHtml;if(r){var h=gx(s,t.html,r,c,t.useCss)||{};a=h.head||a,i=h.body||a,o=h.foot||a}else console.error("Cannot parse html in non browser environment")}var u=t.columns||aj(a,i,o);return{columns:u,head:a,body:i,foot:o}}function aj(s,t,r){var a=s[0]||t[0]||r[0]||[],i=[];return Object.keys(a).filter(function(o){return o!=="_element"}).forEach(function(o){var c=1,h;Array.isArray(a)?h=a[parseInt(o)]:h=a[o],typeof h=="object"&&!Array.isArray(h)&&(c=h?.colSpan||1);for(var u=0;u<c;u++){var m=void 0;Array.isArray(a)?m=i.length:m=o+(u>0?"_".concat(u):"");var x={dataKey:m};i.push(x)}}),i}var Vu=function(){function s(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return s}(),ij=function(s){dx(t,s);function t(r,a,i,o,c,h){var u=s.call(this,r,a,h)||this;return u.cell=i,u.row=o,u.column=c,u.section=o.section,u}return t}(Vu),oj=function(){function s(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return s.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(t,r,a,i,o,c){for(var h=0,u=r;h<u.length;h++){var m=u[h],x=new ij(t,this,a,i,o,c),v=m(x)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],v)return!1}return!0},s.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,i=this.hooks.didDrawPage;a<i.length;a++){var o=i[a];o(new Vu(t,this,r))}},s.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,i=this.hooks.willDrawPage;a<i.length;a++){var o=i[a];o(new Vu(t,this,r))}},s.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},s}(),vx=function(){function s(t,r,a,i,o){o===void 0&&(o=!1),this.height=0,this.raw=t,t instanceof ux&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=i,this.spansMultiplePages=o}return s.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,i){var o;return Math.max(a,((o=r.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},s.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var i=r.cells[a.index];return i?i.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},s.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(i,o){var c=a.cells[o.index];if(!c)return 0;var h=r.getLineHeight(c.styles.fontSize),u=c.padding("vertical"),m=u+h;return m>i?m:i},0)},s}(),yx=function(){function s(t,r,a){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var o=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,o=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var c=o!=null?""+o:"",h=/\r\n|\r|\n/g;this.text=c.split(h)}return s.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");a=this.x+i/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},s.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,o=a*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},s.prototype.padding=function(t){var r=Cd(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},s}(),lj=function(){function s(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return s.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,i=t.allRows();a<i.length;a++){var o=i[a],c=o.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(r=Math.max(r,c.styles.cellWidth))}return r},s}();function cj(s,t){dj(s,t);var r=[],a=0;t.columns.forEach(function(o){var c=o.getMaxCustomCellWidth(t);c?o.width=c:(o.width=o.wrappedWidth,r.push(o)),a+=o.width});var i=t.getWidth(s.pageSize().width)-a;i&&(i=Zu(r,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=Zu(r,i,function(o){return o.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/s.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),hj(t),fj(t,s),uj(t)}function dj(s,t){var r=s.scaleFactor(),a=t.settings.horizontalPageBreak,i=mx(s,t);t.allRows().forEach(function(o){for(var c=0,h=t.columns;c<h.length;c++){var u=h[c],m=o.cells[u.index];if(m){var x=t.hooks.didParseCell;t.callCellHooks(s,x,m,o,u,null);var v=m.padding("horizontal");m.contentWidth=ld(m.text,m.styles,s)+v;var b=ld(m.text.join(" ").split(/[^\S\u00A0]+/),m.styles,s);if(m.minReadableWidth=b+m.padding("horizontal"),typeof m.styles.cellWidth=="number")m.minWidth=m.styles.cellWidth,m.wrappedWidth=m.styles.cellWidth;else if(m.styles.cellWidth==="wrap"||a===!0)m.contentWidth>i?(m.minWidth=i,m.wrappedWidth=i):(m.minWidth=m.contentWidth,m.wrappedWidth=m.contentWidth);else{var g=10/r;m.minWidth=m.styles.minCellWidth||g,m.wrappedWidth=m.contentWidth,m.minWidth>m.wrappedWidth&&(m.wrappedWidth=m.minWidth)}}}}),t.allRows().forEach(function(o){for(var c=0,h=t.columns;c<h.length;c++){var u=h[c],m=o.cells[u.index];if(m&&m.colSpan===1)u.wrappedWidth=Math.max(u.wrappedWidth,m.wrappedWidth),u.minWidth=Math.max(u.minWidth,m.minWidth),u.minReadableWidth=Math.max(u.minReadableWidth,m.minReadableWidth);else{var x=t.styles.columnStyles[u.dataKey]||t.styles.columnStyles[u.index]||{},v=x.cellWidth||x.minCellWidth;v&&typeof v=="number"&&(u.minWidth=v,u.wrappedWidth=v)}m&&(m.colSpan>1&&!u.minWidth&&(u.minWidth=m.minWidth),m.colSpan>1&&!u.wrappedWidth&&(u.wrappedWidth=m.minWidth))}})}function Zu(s,t,r){for(var a=t,i=s.reduce(function(g,k){return g+k.wrappedWidth},0),o=0;o<s.length;o++){var c=s[o],h=c.wrappedWidth/i,u=a*h,m=c.width+u,x=r(c),v=m<x?x:m;t-=v-c.width,c.width=v}if(t=Math.round(t*1e10)/1e10,t){var b=s.filter(function(g){return t<0?g.width>r(g):!0});b.length&&(t=Zu(b,t,r))}return t}function uj(s){for(var t={},r=1,a=s.allRows(),i=0;i<a.length;i++)for(var o=a[i],c=0,h=s.columns;c<h.length;c++){var u=h[c],m=t[u.index];if(r>1)r--,delete o.cells[u.index];else if(m)m.cell.height+=o.height,r=m.cell.colSpan,delete o.cells[u.index],m.left--,m.left<=1&&delete t[u.index];else{var x=o.cells[u.index];if(!x)continue;if(x.height=o.height,x.rowSpan>1){var v=a.length-i,b=x.rowSpan>v?v:x.rowSpan;t[u.index]={cell:x,left:b,row:o}}}}}function hj(s){for(var t=s.allRows(),r=0;r<t.length;r++)for(var a=t[r],i=null,o=0,c=0,h=0;h<s.columns.length;h++){var u=s.columns[h];if(c-=1,c>1&&s.columns[h+1])o+=u.width,delete a.cells[u.index];else if(i){var m=i;delete a.cells[u.index],i=null,m.width=u.width+o}else{var m=a.cells[u.index];if(!m)continue;if(c=m.colSpan,o=0,m.colSpan>1){i=m,o+=u.width;continue}m.width=u.width+o}}}function fj(s,t){for(var r={count:0,height:0},a=0,i=s.allRows();a<i.length;a++){for(var o=i[a],c=0,h=s.columns;c<h.length;c++){var u=h[c],m=o.cells[u.index];if(m){t.applyStyles(m.styles,!0);var x=m.width-m.padding("horizontal");if(m.styles.overflow==="linebreak")m.text=t.splitTextToSize(m.text,x+1/t.scaleFactor(),{fontSize:m.styles.fontSize});else if(m.styles.overflow==="ellipsize")m.text=wm(m.text,x,m.styles,t,"...");else if(m.styles.overflow==="hidden")m.text=wm(m.text,x,m.styles,t,"");else if(typeof m.styles.overflow=="function"){var v=m.styles.overflow(m.text,x);typeof v=="string"?m.text=[v]:m.text=v}m.contentHeight=m.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var b=m.contentHeight/m.rowSpan;m.rowSpan>1&&r.count*r.height<b*m.rowSpan?r={height:b,count:m.rowSpan}:r&&r.count>0&&r.height>b&&(b=r.height),b>o.height&&(o.height=b)}}r.count--}}function wm(s,t,r,a,i){return s.map(function(o){return mj(o,t,r,a,i)})}function mj(s,t,r,a,i){var o=1e4*a.scaleFactor();if(t=Math.ceil(t*o)/o,t>=ld(s,r,a))return s;for(;t<ld(s+i,r,a)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+i}function bx(s,t){var r=new ml(s),a=pj(t,r.scaleFactor()),i=new oj(t,a);return cj(r,i),r.applyStyles(r.userStyles),i}function pj(s,t){var r=s.content,a=xj(r.columns);if(r.head.length===0){var i=Nm(a,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=Nm(a,"foot");i&&r.foot.push(i)}var o=s.settings.theme,c=s.styles;return{columns:a,head:du("head",r.head,a,c,o,t),body:du("body",r.body,a,c,o,t),foot:du("foot",r.foot,a,c,o,t)}}function du(s,t,r,a,i,o){var c={},h=t.map(function(u,m){for(var x=0,v={},b=0,g=0,k=0,j=r;k<j.length;k++){var T=j[k];if(c[T.index]==null||c[T.index].left===0)if(g===0){var S=void 0;Array.isArray(u)?S=u[T.index-b-x]:S=u[T.dataKey];var P={};typeof S=="object"&&!Array.isArray(S)&&(P=S?.styles||{});var B=vj(s,T,m,i,a,o,P),U=new yx(S,B,s);v[T.dataKey]=U,v[T.index]=U,g=U.colSpan-1,c[T.index]={left:U.rowSpan-1,times:g}}else g--,b++;else c[T.index].left--,g=c[T.index].times,x++}return new vx(u,m,s,v)});return h}function Nm(s,t){var r={};return s.forEach(function(a){if(a.raw!=null){var i=gj(t,a.raw);i!=null&&(r[a.dataKey]=i)}}),Object.keys(r).length>0?r:null}function gj(s,t){if(s==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(s==="foot"&&typeof t=="object")return t.footer;return null}function xj(s){return s.map(function(t,r){var a,i;return typeof t=="object"?i=(a=t.dataKey)!==null&&a!==void 0?a:r:i=r,new lj(i,t,r)})}function vj(s,t,r,a,i,o,c){var h=ZN(a),u;s==="head"?u=i.headStyles:s==="body"?u=i.bodyStyles:s==="foot"&&(u=i.footStyles);var m=ii({},h.table,h[s],i.styles,u),x=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},v=s==="body"?x:{},b=s==="body"&&r%2===0?ii({},h.alternateRow,i.alternateRowStyles):{},g=VN(o),k=ii({},g,m,b,v);return ii(k,c)}function yj(s,t,r){var a;r===void 0&&(r={});var i=mx(s,t),o=new Map,c=[],h=[],u=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?u=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(u=[t.settings.horizontalPageBreakRepeat]),u.forEach(function(b){var g=t.columns.find(function(k){return k.dataKey===b||k.index===b});g&&!o.has(g.index)&&(o.set(g.index,!0),c.push(g.index),h.push(t.columns[g.index]),i-=g.wrappedWidth)});for(var m=!0,x=(a=r?.start)!==null&&a!==void 0?a:0;x<t.columns.length;){if(o.has(x)){x++;continue}var v=t.columns[x].wrappedWidth;if(m||i>=v)m=!1,c.push(x),h.push(t.columns[x]),i-=v;else break;x++}return{colIndexes:c,columns:h,lastIndex:x-1}}function bj(s,t){for(var r=[],a=0;a<t.columns.length;a++){var i=yj(s,t,{start:a});i.columns.length&&(r.push(i),a=i.lastIndex)}return r}function wx(s,t){var r=t.settings,a=r.startY,i=r.margin,o={x:i.left,y:a},c=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),h=a+i.bottom+c;if(r.pageBreak==="avoid"){var u=t.body,m=u.reduce(function(b,g){return b+g.height},0);h+=m}var x=new ml(s);(r.pageBreak==="always"||r.startY!=null&&h>x.pageSize().height)&&(jx(x),o.y=i.top),t.callWillDrawPageHooks(x,o);var v=ii({},o);t.startPageNumber=x.pageNumber(),r.horizontalPageBreak?wj(x,t,v,o):(x.applyStyles(x.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(b){return li(x,t,b,o,t.columns)}),x.applyStyles(x.userStyles),t.body.forEach(function(b,g){var k=g===t.body.length-1;cd(x,t,b,k,v,o,t.columns)}),x.applyStyles(x.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(b){return li(x,t,b,o,t.columns)})),hx(x,t,v,o),t.callEndPageHooks(x,o),t.finalY=o.y,s.lastAutoTable=t,x.applyStyles(x.userStyles)}function wj(s,t,r,a){var i=bj(s,t),o=t.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(m,x){s.applyStyles(s.userStyles),x>0?Jl(s,t,r,a,m.columns,!0):jm(s,t,a,m.columns),Nj(s,t,r,a,m.columns),uu(s,t,a,m.columns)});else for(var c=-1,h=i[0],u=function(){var m=c;if(h){s.applyStyles(s.userStyles);var x=h.columns;c>=0?Jl(s,t,r,a,x,!0):jm(s,t,a,x),m=_m(s,t,c+1,a,x),uu(s,t,a,x)}var v=m-c;i.slice(1).forEach(function(b){s.applyStyles(s.userStyles),Jl(s,t,r,a,b.columns,!0),_m(s,t,c+1,a,b.columns,v),uu(s,t,a,b.columns)}),c=m};c<t.body.length-1;)u()}function jm(s,t,r,a){var i=t.settings;s.applyStyles(s.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(o){return li(s,t,o,r,a)})}function Nj(s,t,r,a,i){s.applyStyles(s.userStyles),t.body.forEach(function(o,c){var h=c===t.body.length-1;cd(s,t,o,h,r,a,i)})}function _m(s,t,r,a,i,o){s.applyStyles(s.userStyles),o=o??t.body.length;var c=Math.min(r+o,t.body.length),h=-1;return t.body.slice(r,c).forEach(function(u,m){var x=r+m===t.body.length-1,v=Nx(s,t,x,a);u.canEntireRowFit(v,i)&&(li(s,t,u,a,i),h=r+m)}),h}function uu(s,t,r,a){var i=t.settings;s.applyStyles(s.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(o){return li(s,t,o,r,a)})}function jj(s,t,r){var a=r.getLineHeight(s.styles.fontSize),i=s.padding("vertical"),o=Math.floor((t-i)/a);return Math.max(0,o)}function _j(s,t,r,a){var i={};s.spansMultiplePages=!0,s.height=0;for(var o=0,c=0,h=r.columns;c<h.length;c++){var u=h[c],m=s.cells[u.index];if(m){Array.isArray(m.text)||(m.text=[m.text]);var x=new yx(m.raw,m.styles,m.section);x=ii(x,m),x.text=[];var v=jj(m,t,a);m.text.length>v&&(x.text=m.text.splice(v,m.text.length));var b=a.scaleFactor(),g=a.getLineHeightFactor();m.contentHeight=m.getContentHeight(b,g),m.contentHeight>=t&&(m.contentHeight=t,x.styles.minCellHeight-=t),m.contentHeight>s.height&&(s.height=m.contentHeight),x.contentHeight=x.getContentHeight(b,g),x.contentHeight>o&&(o=x.contentHeight),i[u.index]=x}}var k=new vx(s.raw,-1,s.section,i,!0);k.height=o;for(var j=0,T=r.columns;j<T.length;j++){var u=T[j],x=k.cells[u.index];x&&(x.height=k.height);var m=s.cells[u.index];m&&(m.height=s.height)}return k}function Sj(s,t,r,a){var i=s.pageSize().height,o=a.settings.margin,c=o.top+o.bottom,h=i-c;t.section==="body"&&(h-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var u=t.getMinimumRowHeight(a.columns,s),m=u<r;if(u>h)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!m)return!1;var x=t.hasRowSpan(a.columns),v=t.getMaxCellHeight(a.columns)>h;return v?(x&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(x||a.settings.rowPageBreak==="avoid")}function cd(s,t,r,a,i,o,c){var h=Nx(s,t,a,o);if(r.canEntireRowFit(h,c))li(s,t,r,o,c);else if(Sj(s,r,h,t)){var u=_j(r,h,t,s);li(s,t,r,o,c),Jl(s,t,i,o,c),cd(s,t,u,a,i,o,c)}else Jl(s,t,i,o,c),cd(s,t,r,a,i,o,c)}function li(s,t,r,a,i){a.x=t.settings.margin.left;for(var o=0,c=i;o<c.length;o++){var h=c[o],u=r.cells[h.index];if(!u){a.x+=h.width;continue}s.applyStyles(u.styles),u.x=a.x,u.y=a.y;var m=t.callCellHooks(s,t.hooks.willDrawCell,u,r,h,a);if(m===!1){a.x+=h.width;continue}kj(s,u,a);var x=u.getTextPos();cx(u.text,x.x,x.y,{halign:u.styles.halign,valign:u.styles.valign,maxWidth:Math.ceil(u.width-u.padding("left")-u.padding("right"))},s.getDocument()),t.callCellHooks(s,t.hooks.didDrawCell,u,r,h,a),a.x+=h.width}a.y+=r.height}function kj(s,t,r){var a=t.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof a.lineWidth=="number"){var i=fx(a.lineWidth,a.fillColor);i&&s.rect(t.x,r.y,t.width,t.height,i)}else typeof a.lineWidth=="object"&&(a.fillColor&&s.rect(t.x,r.y,t.width,t.height,"F"),Cj(s,t,r,a.lineWidth))}function Cj(s,t,r,a){var i,o,c,h;a.top&&(i=r.x,o=r.y,c=r.x+t.width,h=r.y,a.right&&(c+=.5*a.right),a.left&&(i-=.5*a.left),u(a.top,i,o,c,h)),a.bottom&&(i=r.x,o=r.y+t.height,c=r.x+t.width,h=r.y+t.height,a.right&&(c+=.5*a.right),a.left&&(i-=.5*a.left),u(a.bottom,i,o,c,h)),a.left&&(i=r.x,o=r.y,c=r.x,h=r.y+t.height,a.top&&(o-=.5*a.top),a.bottom&&(h+=.5*a.bottom),u(a.left,i,o,c,h)),a.right&&(i=r.x+t.width,o=r.y,c=r.x+t.width,h=r.y+t.height,a.top&&(o-=.5*a.top),a.bottom&&(h+=.5*a.bottom),u(a.right,i,o,c,h));function u(m,x,v,b,g){s.getDocument().setLineWidth(m),s.getDocument().line(x,v,b,g,"S")}}function Nx(s,t,r,a){var i=t.settings.margin.bottom,o=t.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),s.pageSize().height-a.y-i}function Jl(s,t,r,a,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),s.applyStyles(s.userStyles),t.settings.showFoot==="everyPage"&&!o&&t.foot.forEach(function(h){return li(s,t,h,a,i)}),t.callEndPageHooks(s,a);var c=t.settings.margin;hx(s,t,r,a),jx(s),t.pageNumber++,a.x=c.left,a.y=c.top,r.y=c.top,t.callWillDrawPageHooks(s,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(h){return li(s,t,h,a,i)}),s.applyStyles(s.userStyles))}function jx(s){var t=s.pageNumber();s.setPage(t+1);var r=s.pageNumber();return r===t?(s.addPage(),!0):!1}function Pj(s){s.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],i=xx(this,a),o=bx(this,i);return wx(this,o),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(t,r,a,i){cx(t,r,a,i,this)},s.API.autoTableSetDefaults=function(t){return ml.setDefaults(t,this),this},s.autoTableSetDefaults=function(t,r){ml.setDefaults(t,r)},s.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new ml(this),o=gx(i,t,window,r,!1),c=o.head,h=o.body,u=((a=c[0])===null||a===void 0?void 0:a.map(function(m){return m.content}))||[];return{columns:u,rows:h,data:h}}}var hu;function Lj(s,t){var r=xx(s,t),a=bx(s,r);wx(s,a)}try{if(typeof window<"u"&&window){var Sm=window,km=Sm.jsPDF||((hu=Sm.jspdf)===null||hu===void 0?void 0:hu.jsPDF);km&&Pj(km)}}catch(s){console.error("Could not apply autoTable plugin",s)}console.log("📦 ProviderDashboard module loading...");function Aj({userLocation:s}){const t=$w();return _.useEffect(()=>{t&&s&&(console.log("🗺️ Centralizando mapa em:",s),t.setView(s,15))},[t,s]),null}function Cm(){console.log("🏗️ ========================================="),console.log("🏗️ ProviderDashboard component rendering"),console.log("🏗️ Timestamp:",new Date().toISOString()),console.log("🏗️ =========================================");const[s,t]=_.useState(null),[r,a]=_.useState(!0),[i,o]=_.useState(5),[c,h]=_.useState(!1),[u,m]=_.useState(null),[x,v]=_.useState(!1),[b,g]=_.useState(!1),[k,j]=_.useState(!1),[T,S]=_.useState(!1),[P,B]=_.useState(null),[U,Q]=_.useState(!1),{theme:ge,setTheme:ae}=Lp(),{logout:ee,user:K}=cr(),{toast:ue}=ks();console.log("👤 User from useAuth:",K),console.log("👤 User type:",K?.userType),console.log("👤 User ID:",K?.id),console.log("👤 User name:",K?.name);const[I,q]=_.useState(0),[ne,Y]=_.useState(!1),[he,pe]=_.useState(null),[oe,ie]=_.useState([]),[Ne,J]=_.useState(0),[fe,R]=_.useState(0),[E,D]=_.useState(0),[W,se]=_.useState(0),[X,le]=_.useState([]);console.log("📊 Estados atuais do dashboard:",{monthlyCompletedServices:Ne,monthlyCompletedEarnings:fe,totalCompletedServices:E,totalEarnings:W,completedServicesCount:X.length}),_.useEffect(()=>{console.log("📊 Estados do dashboard atualizados:",{monthlyCompletedServices:Ne,monthlyCompletedEarnings:fe,totalCompletedServices:E,totalEarnings:W,completedServicesCount:X.length}),console.log("📊 Valores específicos:",{monthlyCompletedServices:Ne,monthlyCompletedEarnings:fe,totalCompletedServices:E,totalEarnings:W})},[Ne,fe,E,W,X]);const[ce,xe]=_.useState(()=>{const ve=localStorage.getItem("lb_monthly_goal_mode");return ve==="revenue"||ve==="services"?ve:"services"}),[je,Me]=_.useState(()=>{const ve=localStorage.getItem("lb_monthly_goal_services"),Oe=ve?parseInt(ve):20;return Number.isFinite(Oe)&&Oe>0?Oe:20}),[De,Ye]=_.useState(()=>{const ve=localStorage.getItem("lb_monthly_goal_revenue"),Oe=ve?parseFloat(ve):5e3;return Number.isFinite(Oe)&&Oe>0?Oe:5e3}),[G,Z]=_.useState(()=>localStorage.getItem("lb_report_taxpayer_id")||""),[Fe,Be]=_.useState(()=>{const ve=localStorage.getItem("lb_report_start");if(ve)return ve;const Oe=new Date;return new Date(Oe.getFullYear(),Oe.getMonth(),1).toISOString().slice(0,10)}),[_e,Ie]=_.useState(()=>{const ve=localStorage.getItem("lb_report_end");if(ve)return ve;const Oe=new Date;return new Date(Oe.getFullYear(),Oe.getMonth()+1,0).toISOString().slice(0,10)}),ze=()=>{try{const ve=new _t({unit:"pt",format:"a4"}),Oe=48;let Ve=56;ve.setTextColor(33,33,33),ve.setFont(void 0,"bold"),ve.setFontSize(16),ve.text("Relatório de Ganhos",Oe,Ve),Ve+=14,ve.setFont(void 0,"normal"),ve.setFontSize(10),ve.setTextColor(90,90,90),ve.text(`Período: ${new Date(Fe).toLocaleDateString("pt-BR")} a ${new Date(_e).toLocaleDateString("pt-BR")}`,Oe,Ve),Ve+=14,ve.setDrawColor(180,180,180),ve.line(Oe,Ve,595-Oe,Ve),Ve+=16,ve.setFontSize(11),ve.setTextColor(33,33,33),ve.text(`Profissional: ${K?.name||"Profissional"}`,Oe,Ve),Ve+=14,G&&(ve.text(`CPF/CNPJ: ${G}`,Oe,Ve),Ve+=14),ve.text(`Meta de receita: R$ ${De.toLocaleString("pt-BR")}`,Oe,Ve),Ve+=14;const rt=new Date(Fe),Dt=new Date(_e),At=X.filter(bt=>{const gt=bt.completedAt?new Date(bt.completedAt):null;return gt&&gt>=rt&&gt<=Dt}).sort((bt,gt)=>{const Cs=bt.completedAt?new Date(bt.completedAt):new Date(0),os=gt.completedAt?new Date(gt.completedAt):new Date(0);return Cs.getTime()-os.getTime()}),Tt=At.length,jt=At.reduce((bt,gt)=>bt+(Number(gt.amount)||0),0);ve.text(`Serviços concluídos no período: ${Tt}`,Oe,Ve),Ve+=14,ve.text(`Receita no período: R$ ${jt.toLocaleString("pt-BR")}`,Oe,Ve),Ve+=10;const Et=At.map(bt=>{const gt=bt.completedAt?new Date(bt.completedAt).toLocaleDateString("pt-BR"):"Data não informada",Cs=bt.serviceTitle||"Serviço",os=Number(bt.amount)||0;return[gt,Cs,`R$ ${os.toLocaleString("pt-BR")}`]});Lj(ve,{head:[["Data","Serviço (apenas nome)","Valor (R$)"]],body:Et,startY:Ve+10,styles:{fontSize:10,textColor:[33,33,33],lineColor:[200,200,200],lineWidth:.5},headStyles:{fillColor:[240,240,240],textColor:[33,33,33],lineColor:[200,200,200]},columnStyles:{2:{halign:"right"}},margin:{left:Oe,right:Oe}});const Ft=ve.lastAutoTable?ve.lastAutoTable.finalY+24:Ve+60;ve.setFontSize(9),ve.setTextColor(120,120,120),ve.text("Documento gerado automaticamente pelo LifeBee.",Oe,Ft);const Kt=`${new Date(Fe).toLocaleDateString("pt-BR")}__${new Date(_e).toLocaleDateString("pt-BR")}`.replace(/[\\/]/g,"-");ve.save(`Relatorio-Ganhos-${Kt}.pdf`)}catch{alert("Não foi possível gerar o relatório agora. Tente novamente.")}};_.useEffect(()=>{q(ve=>ve+1)},[ge]),_.useEffect(()=>{try{localStorage.setItem("lb_monthly_goal_mode",ce),localStorage.setItem("lb_monthly_goal_services",String(je)),localStorage.setItem("lb_monthly_goal_revenue",String(De))}catch{}},[ce,je,De]),_.useEffect(()=>{try{localStorage.setItem("lb_report_taxpayer_id",G),Fe&&localStorage.setItem("lb_report_start",Fe),_e&&localStorage.setItem("lb_report_end",_e)}catch{}},[G,Fe,_e]),_.useEffect(()=>{(async()=>{try{const Oe=sessionStorage.getItem("token"),Ve=await fetch(`${st()}/api/appointments/provider`,{headers:{Authorization:`Bearer ${Oe}`,Accept:"application/json"}});if(!Ve.ok)return;const rt=await Ve.json();ie(Array.isArray(rt)?rt:[]);const Dt=new Date,At=new Date(Dt.getFullYear(),Dt.getMonth(),1),Tt=new Date(Dt.getFullYear(),Dt.getMonth()+1,0,23,59,59,999),jt=(Array.isArray(rt)?rt:[]).filter(Kt=>{const bt=Kt.scheduledFor?new Date(Kt.scheduledFor):Kt.createdAt?new Date(Kt.createdAt):null,gt=(Kt.status||"").toString();return bt&&bt>=At&&bt<=Tt&&gt==="completed"}),Et=jt.length,Ft=jt.reduce((Kt,bt)=>{const gt=typeof bt.totalCost=="string"?parseFloat(bt.totalCost):Number(bt.totalCost||0);return Kt+(Number.isFinite(gt)?gt:0)},0);J(Et),R(Ft)}catch{}})()},[]),_.useEffect(()=>{S(!1)},[K?.profileImage]),_.useEffect(()=>{const ve="geolocation"in navigator,Oe=window.location.protocol==="https:"||window.location.hostname==="localhost";j(ve),console.log("📍 Geolocalização suportada:",ve),console.log("📍 Contexto seguro (HTTPS/localhost):",Oe),console.log("📍 Protocolo atual:",window.location.protocol),console.log("📍 Hostname atual:",window.location.hostname)},[]),_.useEffect(()=>{console.log("📍 Localização do usuário atualizada:",u)},[u]),_.useEffect(()=>{k&&!u&&!x&&(console.log("📍 Ativando geolocalização automática..."),xr())},[k,u,x]);const[Ge,nt]=_.useState([]),[pt,Nt]=_.useState(!1),[yt,qt]=_.useState(0),[is,xt]=_.useState(""),[Ct,Ke]=_.useState({}),[dr,Gt]=_.useState(null),[gr,cs]=_.useState([]),[ds,_r]=_.useState(null),Yt=[],sa=0,Ns=ve=>{t(ve),window.location.href=`/service-offer/${ve}`},Ur=ve=>{B(ve),Q(!0)},xn=()=>{Q(!1),B(null)},Is=()=>{B(null)},Pt=()=>{ee(),window.location.href="/"},as=async()=>{try{const ve=sessionStorage.getItem("token");if(!ve)return;const Oe=await fetch(`${st()}/api/provider/profile`,{headers:{Authorization:`Bearer ${ve}`}});if(Oe.ok){const Ve=await Oe.json();a(Ve.available??!0),console.log("✅ Estado de disponibilidade carregado:",Ve.available)}}catch(ve){console.error("❌ Erro ao buscar estado de disponibilidade:",ve)}},ra=async ve=>{try{const Oe=sessionStorage.getItem("token");if(!Oe){ue({title:"Erro",description:"Token de autenticação não encontrado.",variant:"destructive"});return}(await fetch(`${st()}/api/provider/availability`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify({available:ve})})).ok?(a(ve),ue({title:ve?"Disponível":"Indisponível",description:ve?"Você está agora disponível para receber solicitações de serviço.":"Você está agora indisponível. Os clientes não verão seu perfil."})):ue({title:"Erro",description:"Não foi possível atualizar sua disponibilidade.",variant:"destructive"})}catch(Oe){console.error("Error updating availability:",Oe),ue({title:"Erro",description:"Erro ao conectar com o servidor.",variant:"destructive"})}},er=ve=>{console.log(`Marking notification ${ve} as read`)},Hr=(ve,Oe,Ve,rt)=>{const At=(Ve-ve)*Math.PI/180,Tt=(rt-Oe)*Math.PI/180,jt=Math.sin(At/2)*Math.sin(At/2)+Math.cos(ve*Math.PI/180)*Math.cos(Ve*Math.PI/180)*Math.sin(Tt/2)*Math.sin(Tt/2);return 6371*(2*Math.atan2(Math.sqrt(jt),Math.sqrt(1-jt)))},Sr={"rua das flores, 150, vila madalena, são paulo, sp":[-23.55,-46.68],"av. albert einstein, 627, morumbi, são paulo, sp":[-23.62,-46.72],"rua harmonia, 456, vila madalena, são paulo, sp":[-23.55,-46.68],"rua dos pinheiros, 789, pinheiros, são paulo, sp":[-23.5671,-46.7034],"rua dona adma jafet, 91, bela vista, são paulo, sp":[-23.56,-46.65],"av. paulista, 1000, bela vista, são paulo, sp":[-23.56,-46.66],"av. paulista, são paulo, sp":[-23.56,-46.66],"rua augusta, jardins, são paulo, sp":[-23.56,-46.66],"rua harmonia, vila madalena, são paulo, sp":[-23.55,-46.68],"rua das flores, vila madalena, são paulo, sp":[-23.55,-46.68],"rua dos pinheiros, pinheiros, são paulo, sp":[-23.5671,-46.7034],"rua dona adma jafet, bela vista, são paulo, sp":[-23.56,-46.65],"av. brigadeiro faria lima, são paulo, sp":[-23.59,-46.68],"shopping morumbi, são paulo, sp":[-23.62,-46.72],"hospital albert einstein, são paulo, sp":[-23.62,-46.72],"hospital sírio-libanês, são paulo, sp":[-23.56,-46.65],"vila madalena, são paulo, sp":[-23.55,-46.68],"jardins, são paulo, sp":[-23.56,-46.66],"morumbi, são paulo, sp":[-23.62,-46.72],"itaim bibi, são paulo, sp":[-23.6,-46.68],"moema, são paulo, sp":[-23.6,-46.66],"pinheiros, são paulo, sp":[-23.5671,-46.7034],"vila mariana, são paulo, sp":[-23.59,-46.63],"centro, são paulo, sp":[-23.5505,-46.6333],"sé, são paulo, sp":[-23.5505,-46.6333],"republica, são paulo, sp":[-23.54,-46.64],"bela vista, são paulo, sp":[-23.56,-46.65],"consolação, são paulo, sp":[-23.56,-46.66],"liberdade, são paulo, sp":[-23.56,-46.64],"bom retiro, são paulo, sp":[-23.53,-46.64],"brás, são paulo, sp":[-23.54,-46.62],"cambuci, são paulo, sp":[-23.57,-46.62],"tatuapé, são paulo, sp":[-23.54,-46.57],"vila prudente, são paulo, sp":[-23.58,-46.58],"mooca, são paulo, sp":[-23.55,-46.6],"belenzinho, são paulo, sp":[-23.54,-46.62],"penha, são paulo, sp":[-23.52,-46.54],"santana, são paulo, sp":[-23.5,-46.64],"tucuruvi, são paulo, sp":[-23.48,-46.62],"casa verde, são paulo, sp":[-23.51,-46.66],"vila guilherme, são paulo, sp":[-23.52,-46.61],"lapa, são paulo, sp":[-23.52,-46.7],"perdizes, são paulo, sp":[-23.53,-46.68],"vila pompeia, são paulo, sp":[-23.54,-46.68],"butantã, são paulo, sp":[-23.57,-46.72],"jabaquara, são paulo, sp":[-23.65,-46.64],"santo amaro, são paulo, sp":[-23.65,-46.72],"campo belo, são paulo, sp":[-23.61,-46.68],"vila olímpia, são paulo, sp":[-23.6,-46.69],"brooklin, são paulo, sp":[-23.61,-46.7],"vila andrade, são paulo, sp":[-23.63,-46.72],"jardim paulista, são paulo, sp":[-23.57,-46.67],"jardim europa, são paulo, sp":[-23.57,-46.68],"jardim paulistano, são paulo, sp":[-23.58,-46.68],"alto de pinheiros, são paulo, sp":[-23.57,-46.71],"vila leopoldina, são paulo, sp":[-23.53,-46.73],"barra funda, são paulo, sp":[-23.52,-46.66],"campos elíseos, são paulo, sp":[-23.54,-46.65],"santa cecília, são paulo, sp":[-23.54,-46.66],"vila buarque, são paulo, sp":[-23.54,-46.65],"higienópolis, são paulo, sp":[-23.55,-46.66],"pacifica, são paulo, sp":[-23.55,-46.67],"vila romana, são paulo, sp":[-23.54,-46.69],"sumaré, são paulo, sp":[-23.55,-46.67],"agua branca, são paulo, sp":[-23.52,-46.68],"vila nova cachoeirinha, são paulo, sp":[-23.49,-46.67],"limão, são paulo, sp":[-23.5,-46.65],"brasilândia, são paulo, sp":[-23.47,-46.64],"freguesia do ó, são paulo, sp":[-23.52,-46.7],"rua leão xiii, 431, serrinha, fortaleza, ce":[-3.7319,-38.5267],"rua leão xiii, serrinha, fortaleza, ce":[-3.7319,-38.5267],"leão xiii, serrinha, fortaleza, ce":[-3.7319,-38.5267],"serrinha, fortaleza, ce":[-3.7319,-38.5267],"avenida beira mar, fortaleza, ce":[-3.7319,-38.5267],"praça do ferreira, fortaleza, ce":[-3.7319,-38.5267],"centro, fortaleza, ce":[-3.7319,-38.5267],"aldeota, fortaleza, ce":[-3.7319,-38.5267],"meireles, fortaleza, ce":[-3.7319,-38.5267],"dionísio torres, fortaleza, ce":[-3.7319,-38.5267],"papicu, fortaleza, ce":[-3.7319,-38.5267],"cocó, fortaleza, ce":[-3.7319,-38.5267],"varjota, fortaleza, ce":[-3.7319,-38.5267],"montese, fortaleza, ce":[-3.7319,-38.5267],"fátima, fortaleza, ce":[-3.7319,-38.5267],"joaquim távora, fortaleza, ce":[-3.7319,-38.5267],"benfica, fortaleza, ce":[-3.7319,-38.5267],"damas, fortaleza, ce":[-3.7319,-38.5267],"são gerardo, fortaleza, ce":[-3.7319,-38.5267],"parangaba, fortaleza, ce":[-3.7319,-38.5267],"messejana, fortaleza, ce":[-3.7319,-38.5267],"conjunto ceará, fortaleza, ce":[-3.7319,-38.5267],"sabiguaba, fortaleza, ce":[-3.7319,-38.5267],"copacabana, rio de janeiro, rj":[-22.9707,-43.1824],"ipanema, rio de janeiro, rj":[-22.9844,-43.2034],"centro, belo horizonte, mg":[-19.9167,-43.9345],"centro, salvador, ba":[-12.9714,-38.5011],"centro, recife, pe":[-8.0476,-34.877],"centro, brasília, df":[-15.7942,-47.8822],"centro, curitiba, pr":[-25.4289,-49.2671],"centro, porto alegre, rs":[-30.0346,-51.2177],"centro, belém, pa":[-1.4554,-48.4898],"centro, manaus, am":[-3.119,-60.0217]},ft=new Map,rn=ve=>{let Oe=String(ve||"").trim();return Oe=Oe.replace(/\s-\s/g,", "),Oe=Oe.replace(/\s*,\s*/g,", ").replace(/\s+/g," ").replace(/,+/g,","),Oe=Oe.replace(/\bcep:?\s*\d{5}-?\d{3}\b/gi,"").replace(/\bbrasil\b/gi,""),Oe=Oe.replace(/,\s*$/g,""),Oe},vn=ve=>{const Oe={},Ve=ve.match(/\b([A-Za-zÀ-ÿ\s]+),\s*([A-Za-z]{2})\b/);if(Ve)return Oe.city=Ve[1].trim(),Oe.state=Ve[2].trim().toUpperCase(),Oe;const rt=ve.match(/\b([A-Za-zÀ-ÿ\s]+)\s*-\s*([A-Za-z]{2})\b/);return rt&&(Oe.city=rt[1].trim(),Oe.state=rt[2].trim().toUpperCase()),Oe},kr=ve=>{const Oe="https://nominatim.openstreetmap.org/search?format=json&limit=5&countrycodes=br&addressdetails=1&accept-language=pt-BR";if(u){const[Ve,rt]=u,Dt=.3,At=(rt-Dt).toFixed(6),Tt=(rt+Dt).toFixed(6),jt=(Ve+Dt).toFixed(6),Et=(Ve-Dt).toFixed(6);return`${Oe}&q=${encodeURIComponent(ve)}&viewbox=${At},${jt},${Tt},${Et}&bounded=1`}return`${Oe}&q=${encodeURIComponent(ve)}`},us=async(ve,Oe)=>{try{if(ft.has(ve)){const Ht=ft.get(ve);return console.log(`✅ Coordenadas encontradas no cache: "${ve}" → [${Ht[0]}, ${Ht[1]}]`),Ht}const Ve=rn(ve),rt=Ve.toLowerCase(),Dt=Ht=>Ht.normalize("NFD").replace(/[\u0300-\u036f]/g,""),At=Ht=>Ht.replace(/\b\d+[\w\s\/\-]*?(?=,|$)/g,"").replace(/,\s*,/g,",").replace(/,\s*$/,"").trim(),Tt=Ht=>Array.from(new Set(Ht.filter(Boolean))),jt=Tt([rt,Dt(rt),At(rt),Dt(At(rt))]);for(const[Ht,$t]of Object.entries(Sr))if(rt===Ht)return ft.set(ve,$t),console.log(`✅ Busca exata no mapeamento local: "${ve}" → [${$t[0]}, ${$t[1]}]`),$t;const Et=["rua leão xiii","serrinha","fortaleza"];for(const Ht of Et)if(rt.includes(Ht)){for(const[$t,mt]of Object.entries(Sr))if($t.includes(Ht))return ft.set(ve,mt),console.log(`✅ Busca por palavra-chave "${Ht}": "${ve}" → [${mt[0]}, ${mt[1]}]`),mt}let Ft=null;for(const[Ht,$t]of Object.entries(Sr)){const mt=Je(rt,Ht);mt>.6&&(!Ft||mt>Ft.score)&&(Ft={key:Ht,coords:$t,score:mt})}if(Ft)return ft.set(ve,Ft.coords),console.log(`✅ Busca parcial no mapeamento local: "${ve}" → "${Ft.key}" (score: ${Ft.score.toFixed(2)}) → [${Ft.coords[0]}, ${Ft.coords[1]}]`),Ft.coords;const Kt=vn(Ve),bt=rt.match(/([^,]+),\s*([a-z]{2})/);let gt="",Cs="";Kt.city&&Kt.state?(gt=Kt.city,Cs=Kt.state):bt&&(gt=bt[1].trim(),Cs=bt[2].trim().toUpperCase());const os=[];if(gt&&Cs)jt.forEach(Ht=>{os.push(Ht+", "+gt+", "+Cs+", brasil",Ht+", "+gt+", "+Cs,Ht+", "+Cs+", brasil",Ht+", brasil")});else{const Ht=ds?.city?String(ds.city).toLowerCase():"",$t=ds?.stateCode||(ds?.state?String(ds.state).toUpperCase():"");Ht&&$t?jt.forEach(mt=>{os.push(mt+", "+Ht+", "+$t+", brasil",mt+", "+Ht+", "+$t,mt+", "+$t+", brasil",mt+", brasil")}):jt.forEach(mt=>{os.push(mt+", brasil",mt)})}const tr=Tt(os);for(const Ht of tr)try{console.log(`🌐 Tentando geocoding externo para: "${Ht}"`);const $t=new AbortController,mt=setTimeout(()=>$t.abort(),7e3),Lt=kr(Ht),vr=await fetch(Lt,{signal:$t.signal,headers:{Accept:"application/json"}});if(clearTimeout(mt),vr.ok){const yn=await vr.json();if(yn.length>0){const bn=sr=>{const js=sr.address||{},ur=(js.city||js.town||js.village||js.suburb||"").toString().toLowerCase(),di=(js.state||"").toString().toUpperCase();let En=parseFloat(sr.importance||0);if(gt&&ur.includes(gt.toLowerCase())&&(En+=.5),Cs&&di===Cs.toUpperCase()&&(En+=.5),u){const wn=Hr(parseFloat(sr.lat),parseFloat(sr.lon),u[0],u[1]),Rs=Math.max(0,50-wn)/100;En+=Rs}return En},Un=yn.reduce((sr,js)=>bn(js)>bn(sr)?js:sr),St=parseFloat(Un.lat),Jt=parseFloat(Un.lon);if(Cr(St,Jt)){const sr=[St,Jt];return ft.set(ve,sr),console.log(`✅ Geocoding externo bem-sucedido para "${ve}": [${St}, ${Jt}] (ajustado por contexto)`),sr}else console.log(`⚠️ Coordenadas inválidas para "${ve}": [${St}, ${Jt}]`)}}}catch($t){$t.name==="AbortError"?console.warn(`⏰ Timeout na tentativa "${Ht}"`):console.warn(`❌ Erro na tentativa "${Ht}":`,$t)}if(Oe?.allowFallback===!1)return console.log(`🔄 Fallback desabilitado para "${ve}". Retornando null.`),null;const Vr=na(rt,gt,Cs);return ft.set(ve,Vr),console.log(`🔄 Usando fallback inteligente para "${ve}": [${Vr[0].toFixed(6)}, ${Vr[1].toFixed(6)}]`),Vr}catch(Ve){return console.error("Erro geral no geocoding:",Ve),console.log(`🔄 Fallback final desabilitado para "${ve}". Retornando null.`),null}},Je=(ve,Oe)=>{const Ve=ve.split(" ").filter(Et=>Et.length>2),rt=Oe.split(" ").filter(Et=>Et.length>2);if(Ve.length===0||rt.length===0)return 0;const At=["rua","avenida","fortaleza","serrinha","leão","xiii"].some(Et=>ve.includes(Et)&&Oe.includes(Et));let jt=Ve.filter(Et=>rt.some(Ft=>Ft.includes(Et)||Et.includes(Ft))).length/Math.max(Ve.length,rt.length);return At&&(jt+=.3),Math.min(jt,1)},Cr=(ve,Oe)=>ve>=-34&&ve<=6&&Oe>=-74&&Oe<=-34,na=(ve,Oe,Ve)=>{const rt={"são paulo":[-23.5505,-46.6333],sp:[-23.5505,-46.6333],fortaleza:[-3.7319,-38.5267],ce:[-3.7319,-38.5267],serrinha:[-3.7319,-38.5267],"rio de janeiro":[-22.9068,-43.1729],rj:[-22.9068,-43.1729],"belo horizonte":[-19.9167,-43.9345],mg:[-19.9167,-43.9345],salvador:[-12.9714,-38.5011],ba:[-12.9714,-38.5011],recife:[-8.0476,-34.877],pe:[-8.0476,-34.877],brasília:[-15.7942,-47.8822],df:[-15.7942,-47.8822],curitiba:[-25.4289,-49.2671],pr:[-25.4289,-49.2671],"porto alegre":[-30.0346,-51.2177],rs:[-30.0346,-51.2177],belém:[-1.4554,-48.4898],pa:[-1.4554,-48.4898],manaus:[-3.119,-60.0217],am:[-3.119,-60.0217]};if(ve.includes("fortaleza")||ve.includes("ce")||ve.includes("serrinha")||Oe.includes("fortaleza")||Oe.includes("ce")||Oe.includes("serrinha")||Ve.includes("CE"))return console.log(`🎯 Detecção específica de Fortaleza para: "${ve}"`),[-3.7319,-38.5267];for(const[jt,Et]of Object.entries(rt))if(ve.includes(jt)||Oe.includes(jt)||Ve.includes(jt))return Et;const Dt=ve.split("").reduce((jt,Et)=>(jt=(jt<<5)-jt+Et.charCodeAt(0),jt&jt),0),At=Math.abs(Dt)%2e3/1e4-.1,Tt=Math.abs(Dt>>10)%2e3/1e4-.1;return[-15.7942+At,-47.8822+Tt]},Rr=async()=>{if(console.log("🚀 fetchPerformanceStats iniciado"),console.log("🚀 User no fetchPerformanceStats:",K),console.log("🚀 Timestamp:",new Date().toISOString()),console.log("🚀 Estados antes da chamada:",{monthlyCompletedServices:Ne,monthlyCompletedEarnings:fe}),!K){console.log("❌ Usuário não encontrado");return}try{const ve=sessionStorage.getItem("token");if(!ve){console.log("❌ Token não encontrado");return}console.log(`📊 Buscando dados para usuário ID: ${K.id}`),console.log(`🔗 URL: ${st()}/api/professional/${K.id}/completed-services`);const Oe=await fetch(`${st()}/api/professional/${K.id}/completed-services`,{headers:{Authorization:`Bearer ${ve}`,"Content-Type":"application/json"}});if(console.log("📡 Resposta da API:",Oe.status,Oe.statusText),Oe.ok){const Ve=await Oe.json();console.log("📊 Dados brutos recebidos:",Ve);const rt=Ve.data||[];console.log("📋 Serviços concluídos encontrados:",rt.length),console.log("📋 Primeiro serviço:",rt[0]);const Dt=new Date,At=Dt.getMonth(),Tt=Dt.getFullYear(),jt=rt.filter(Kt=>{const bt=Kt.completedAt?new Date(Kt.completedAt):null;return bt?(console.log("🔍 Filtro mensal:",{serviceId:Kt.serviceRequestId,completedAt:Kt.completedAt,serviceDate:bt.toISOString(),currentMonth:At,currentYear:Tt,isCurrentMonth:bt.getMonth()===At&&bt.getFullYear()===Tt}),bt.getMonth()===At&&bt.getFullYear()===Tt):!1}),Et=jt.reduce((Kt,bt)=>Kt+(Number(bt.amount)||0),0),Ft=rt.reduce((Kt,bt)=>Kt+(Number(bt.amount)||0),0);console.log("💰 Valores calculados:",{monthlyServicesCount:jt.length,monthlyEarningsValue:Et,totalServicesCount:rt.length,totalEarningsValue:Ft}),console.log("🔄 Atualizando estados..."),J(jt.length),R(Et),D(rt.length),se(Ft),le(rt),console.log("✅ Estados atualizados:",{monthlyCompletedServices:jt.length,monthlyCompletedEarnings:Et,totalCompletedServices:rt.length,totalEarnings:Ft}),console.log("📊 Estatísticas carregadas e estados atualizados:",{totalServices:rt.length,monthlyServices:jt.length,monthlyEarnings:Et,totalEarnings:Ft,completedServices:rt.slice(0,3)})}else{console.log("❌ Erro na resposta da API:",Oe.status,Oe.statusText);const Ve=await Oe.text();console.log("❌ Detalhes do erro:",Ve)}}catch(ve){console.error("❌ Erro ao carregar estatísticas:",ve)}finally{console.log("🏁 fetchPerformanceStats finalizada")}},Mr=async()=>{if(console.log("🚀 Iniciando busca de solicitações..."),console.log("👤 Usuário:",K),!K){console.log("❌ Usuário não autenticado");return}Nt(!0),qt(0),xt("Iniciando busca de solicitações..."),nt([]),Ke({});try{const ve=sessionStorage.getItem("token");if(console.log("🔑 Token encontrado:",!!ve),!ve){ue({title:"Erro de Autenticação",description:"Token de autenticação não encontrado. Faça login novamente.",variant:"destructive"}),Nt(!1);return}const Oe=["acompanhante_hospitalar"],Ve=[];let rt=0;console.log("🌐 URL da API:",st()),console.log("🔑 Token presente:",!!ve);const Dt=Oe.map(async gt=>{const Cs=`${st()}/api/service-requests/category/${gt}`;console.log(`📡 Buscando solicitações para categoria: ${gt}`),console.log(`🔗 URL completa: ${Cs}`);try{const os=await fetch(Cs,{headers:{Authorization:`Bearer ${ve}`,"Content-Type":"application/json"}});if(console.log(`📊 Resposta para ${gt}:`,os.status,os.statusText),os.ok){const tr=await os.json();return console.log(`✅ Solicitações encontradas para ${gt}:`,tr),console.log(`📈 Quantidade de solicitações para ${gt}:`,tr.length),rt+=tr.length,tr}else{const tr=await os.text();return console.error(`❌ Erro na API para ${gt}:`,tr),console.error(`Status: ${os.status}, StatusText: ${os.statusText}`),[]}}catch(os){return console.error(`💥 Erro na requisição para ${gt}:`,os),[]}});if(qt(30),xt("Buscando solicitações das categorias..."),(await Promise.all(Dt)).forEach(gt=>Ve.push(...gt)),console.log("📋 Total de solicitações encontradas:",Ve.length),Ve.length===0){Nt(!1),ue({title:"Nenhuma solicitação encontrada",description:"Não há solicitações disponíveis no momento. Tente novamente mais tarde."});return}const Tt=Ve.filter(gt=>gt.status==="open").sort((gt,Cs)=>new Date(Cs.createdAt).getTime()-new Date(gt.createdAt).getTime());console.log("🔓 Solicitações abertas encontradas:",Tt.length),qt(50),xt(`Processando ${Tt.length} solicitações...`),nt(Tt);const jt={},Et=[],Ft=3;for(let gt=0;gt<Tt.length;gt+=Ft){const os=Tt.slice(gt,gt+Ft).map(async Vr=>{const Ht=Vr.address||Vr.location||"",$t=String(Ht||"").trim(),mt=$t.toLowerCase();if($t&&!(mt==="não informado"||mt==="nao informado"||mt==="não definido"||mt==="nao definido")&&$t.length>=5)try{const vr=await us($t,{allowFallback:!1});vr?(jt[Vr.id]=vr,console.log(`✅ Endereço geocodificado: ${$t} → [${vr[0]}, ${vr[1]}]`)):(Et.push($t),console.warn(`❌ Falha no geocoding: ${$t}`))}catch(vr){Et.push($t),console.error(`❌ Erro no geocoding para ${$t}:`,vr)}});await Promise.all(os);const tr=50+Math.min((gt+Ft)/Tt.length*40,40);qt(tr),xt(`Processando localizações... ${Math.round((gt+Ft)/Tt.length*100)}%`),console.log(`🔄 Progresso do geocoding: ${tr.toFixed(1)}%`)}qt(100),xt("Finalizando..."),Ke(jt),cs(Et);const Kt=Object.keys(jt).length,bt=Tt.length-Kt;console.log(`✅ Processamento concluído: ${Tt.length} solicitações`),console.log(`📍 Com coordenadas: ${Kt}`),console.log(`❓ Sem coordenadas: ${bt}`)}catch(ve){console.error("💥 Erro geral ao buscar solicitações:",ve),ue({title:"Erro de Conexão",description:"Erro ao carregar solicitações. Verifique sua conexão e tente novamente.",variant:"destructive"})}finally{Nt(!1)}},xr=()=>{if(console.log("📍 Iniciando geolocalização..."),console.log("📍 Geolocalização suportada:",k),v(!0),g(!0),k){console.log("📍 Geolocalização suportada pelo navegador");const ve={enableHighAccuracy:!0,timeout:3e4,maximumAge:0};navigator.geolocation.getCurrentPosition(async Oe=>{const{latitude:Ve,longitude:rt,accuracy:Dt}=Oe.coords;if(console.log("📍 Localização obtida com sucesso:",{latitude:Ve,longitude:rt,accuracy:`${Dt}m de precisão`}),Ve&&rt&&!isNaN(Ve)&&!isNaN(rt)&&Ve>=-90&&Ve<=90&&rt>=-180&&rt<=180){console.log("📍 Coordenadas válidas:",[Ve,rt]),m([Ve,rt]),pe(Dt||0),q(At=>At+1),v(!1),Y(!0),setTimeout(()=>{q(At=>At+1)},200),setTimeout(()=>{Y(!1)},3e3);try{const At=new AbortController,Tt=setTimeout(()=>At.abort(),5e3),jt=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Ve}&lon=${rt}&zoom=10&addressdetails=1&accept-language=pt-BR`,{signal:At.signal});if(clearTimeout(Tt),jt.ok){const Ft=(await jt.json())?.address||{},Kt=Ft.city||Ft.town||Ft.village||Ft.suburb||"",bt=Ft.state||"",gt=Ft["ISO3166-2-lvl4"]?.split("-")?.pop?.()||Ft.state_code||"";_r({city:Kt,state:bt,stateCode:gt}),console.log("🧭 Contexto geográfico detectado:",{city:Kt,state:bt,stateCode:gt})}}catch(At){console.warn("⚠️ Falha no reverse geocoding do contexto local:",At)}}else console.warn("📍 Coordenadas inválidas:",{latitude:Ve,longitude:rt}),v(!1),ue({title:"Erro na Localização",description:"Coordenadas inválidas obtidas. Tente novamente.",variant:"destructive"})},Oe=>{console.error("📍 Erro na geolocalização:",Oe);let Ve="Erro desconhecido na geolocalização";switch(Oe.code){case Oe.PERMISSION_DENIED:Ve="Permissão negada. Ative a localização nas configurações do navegador.";break;case Oe.POSITION_UNAVAILABLE:Ve="Localização indisponível. Verifique sua conexão de internet.";break;case Oe.TIMEOUT:Ve="Tempo limite excedido. Tente novamente em alguns segundos.";break}console.log(`📍 ${Ve}`),v(!1)},ve)}else console.log("📍 Geolocalização não suportada pelo navegador"),v(!1)};_.useEffect(()=>{console.log("🔄 useEffect triggered - user:",K),console.log("🔄 User type:",K?.userType),console.log("🔄 User ID:",K?.id),console.log("🔄 fetchPerformanceStats definida:",typeof Rr),K?(console.log("✅ User authenticated, calling functions"),console.log("🚀 Chamando fetchAvailabilityStatus..."),as(),console.log("🚀 Chamando fetchServiceRequests..."),Mr(),console.log("🚀 Chamando fetchPerformanceStats..."),typeof Rr=="function"?Rr():console.log("❌ fetchPerformanceStats não é uma função")):console.log("❌ User not authenticated yet")},[K]);const Wr=()=>{u&&(console.log("🗺️ Centralizando mapa na localização do usuário:",u),q(ve=>ve+1))};return e.jsx(vw,{children:e.jsxs(Ao,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-32",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b-2 border-gray-200 dark:border-gray-700 rounded-b-lg px-3 sm:px-4 py-2 sm:py-3",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:K?.profileImage&&!T?e.jsx("img",{src:`${st()}${K.profileImage}`,alt:`Foto de ${K?.name||"Profissional"}`,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",onError:ve=>{S(!0);const Oe=ve.target;Oe.src.includes("http")||(Oe.src=`https://lifebee.onrender.com${K.profileImage}`)},onLoad:()=>{console.log("Imagem carregada com sucesso:",K.profileImage),S(!1)}}):e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-yellow-500 flex items-center justify-center border-2 border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold",children:K?.name?K.name.charAt(0).toUpperCase():"P"})})}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white truncate",children:"Painel do Profissional"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Bem-vindo, ",K?.name||"Profissional","!"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 flex-shrink-0 min-w-0 ml-auto self-end",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-emerald-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:`text-xs sm:text-sm font-medium ${r?"text-emerald-700 dark:text-emerald-300":"text-gray-600 dark:text-gray-400"}`,children:r?"Disponível":"Indisponível"})]}),e.jsx(Tg,{children:e.jsxs(Zy,{children:[e.jsx(Gy,{asChild:!0,children:e.jsx(ai,{checked:r,onCheckedChange:ra,className:"h-6 w-11 sm:h-7 sm:w-12 [&>span]:h-5 [&>span]:w-5 sm:[&>span]:h-6 sm:[&>span]:w-6 flex-shrink-0 data-[state=checked]:bg-blue-500 data-[state=checked]:hover:bg-blue-600 data-[state=unchecked]:bg-gray-400 data-[state=unchecked]:hover:bg-gray-500 transition-all duration-300 ease-in-out shadow-md hover:shadow-lg"})}),e.jsx(Eg,{children:e.jsx("p",{children:r?"Clique para ficar indisponível":"Clique para ficar disponível"})})]})})]}),e.jsxs(kw,{open:c,onOpenChange:h,children:[e.jsx(Cw,{asChild:!0,children:e.jsxs(Te,{variant:"outline",size:"sm",className:"relative h-8 sm:h-9 w-8 sm:w-auto px-2.5 sm:px-3 min-w-0 flex-shrink-0 justify-center aspect-square sm:aspect-auto",children:[e.jsx(Ql,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),sa>0]})}),e.jsxs(M0,{className:"w-80 p-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl backdrop-blur-sm",align:"end",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Notificações"}),e.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:e.jsx(Mo,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:!Yt||Yt.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma notificação"}):Yt.map(ve=>{const Oe=ve.icon;return e.jsx("div",{className:`p-4 border-b hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer ${ve.read?"":"bg-blue-50 dark:bg-blue-900/20"}`,onClick:()=>er(ve.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full bg-gray-100 dark:bg-gray-700 ${ve.color}`,children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-medium ${ve.read?"text-gray-900 dark:text-white":"text-blue-900 dark:text-blue-100"}`,children:ve.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:ve.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ve.time})]}),!ve.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})]})},ve.id)})}),Yt&&Yt.length>0&&e.jsx("div",{className:"p-3 border-t",children:e.jsx(Te,{variant:"ghost",size:"sm",className:"w-full",children:"Ver todas as notificações"})})]})]}),e.jsxs(yw,{children:[e.jsx(bw,{asChild:!0,children:e.jsx(Te,{variant:"outline",size:"sm",className:"h-8 sm:h-9 w-8 sm:w-auto px-2 sm:px-3 min-w-0 flex-shrink-0 gap-1 sm:gap-1.5 justify-center aspect-square sm:aspect-auto",children:e.jsx(gh,{className:"h-2 w-2 sm:h-3 sm:w-3 flex-shrink-0"})})}),e.jsxs(R0,{align:"end",className:"w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg z-[100]",children:[e.jsx(xo,{asChild:!0,children:e.jsxs(Os,{href:"/provider-profile",className:"flex items-center cursor-pointer",children:[e.jsx($r,{className:"mr-2 h-4 w-4"}),"Meu Perfil"]})}),e.jsx(xo,{asChild:!0,children:e.jsxs(Os,{href:"/provider-proposals",className:"flex items-center cursor-pointer",children:[e.jsx(qa,{className:"mr-2 h-4 w-4"}),"Propostas"]})}),e.jsx(xo,{asChild:!0,children:e.jsxs(Os,{href:"/settings",className:"flex items-center cursor-pointer",children:[e.jsx(bh,{className:"mr-2 h-4 w-4"}),"Configurações"]})}),e.jsx(Tu,{}),e.jsxs(xo,{children:[e.jsx(oi,{className:"mr-2 h-4 w-4"}),"Privacidade e Segurança"]}),e.jsxs(xo,{children:[e.jsx(Xc,{className:"mr-2 h-4 w-4"}),"Central de Ajuda"]}),e.jsx(Tu,{}),e.jsxs(xo,{onClick:Pt,className:"text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400",children:[e.jsx(vl,{className:"mr-2 h-4 w-4"}),"Sair da Conta"]})]})]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 pb-8 sm:pb-12 lg:pb-16 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ot,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total de Serviços"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:E}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Total"})]}),e.jsx("div",{className:"p-3 bg-blue-500 rounded-full",children:e.jsx(Xt,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(ot,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Receita Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:["R$ ",W.toLocaleString("pt-BR")]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Total"})]}),e.jsx("div",{className:"p-3 bg-green-500 rounded-full",children:e.jsx(sn,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(ot,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Média por Serviço"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["R$ ",E>0?(W/E).toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"]}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Valor médio"})]}),e.jsx("div",{className:"p-3 bg-purple-500 rounded-full",children:e.jsx(U2,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(ot,{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border-orange-200 dark:border-orange-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Taxa de Conclusão"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:[oe&&oe.length>0?Math.round(E/oe.length*100):100,"%"]}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Serviços finalizados"})]}),e.jsx("div",{className:"p-3 bg-orange-500 rounded-full",children:e.jsx(Cf,{className:"h-6 w-6 text-white"})})]})})})]}),e.jsxs(k0,{defaultValue:"opportunities",className:"space-y-6 sm:space-y-8",children:[e.jsxs(Ih,{className:"grid w-full grid-cols-3 sm:grid-cols-3 h-auto min-h-12 p-1.5 gap-1.5 sm:gap-2 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsxs(Ri,{value:"opportunities",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Oportunidades"}),e.jsx("span",{className:"xs:hidden",children:"Oport."})]}),e.jsxs(Ri,{value:"performance",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Performance"}),e.jsx("span",{className:"xs:hidden",children:"Perf."})]}),e.jsxs(Ri,{value:"history",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Histórico"}),e.jsx("span",{className:"xs:hidden",children:"Hist."})]})]}),e.jsx(Mi,{value:"opportunities",className:"space-y-8",children:e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs(es,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(Ss,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"text-base sm:text-lg lg:text-xl",children:"Serviços Próximos a Você"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Raio:"}),e.jsx(ht,{type:"number",value:i,onChange:ve=>o(Number(ve.target.value)),className:"w-12 sm:w-16 h-7 sm:h-8 text-xs sm:text-sm",min:"1",max:"50"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"km"})]})})]})}),e.jsxs(lt,{children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg h-48 sm:h-56 md:h-64 mb-4 sm:mb-6 overflow-hidden sticky top-2 sm:top-4 z-10",children:[e.jsx("div",{className:"absolute top-2 right-2 z-20",children:e.jsx(Te,{size:"sm",variant:"outline",onClick:()=>{console.log("🔘 Botão de localização clicado!"),b&&u?Wr():xr()},className:"bg-white dark:bg-gray-800 shadow-md hover:shadow-lg",disabled:x,children:x?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}):b?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs hidden sm:inline",children:"Centralizar"})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs hidden sm:inline",children:"Minha Localização"})]})})}),x?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Obtendo sua localização..."})]})}):u?e.jsxs(Vw,{center:u||[-23.55052,-46.633308],zoom:15,style:{height:"100%",width:"100%"},children:[u&&e.jsx(Aj,{userLocation:u}),e.jsxs(Yl,{position:"topright",children:[e.jsx(Yl.BaseLayer,{checked:ge!=="dark",name:"OSM Claro",children:e.jsx(Xf,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),e.jsx(Yl.BaseLayer,{checked:ge==="dark",name:"Carto Escuro",children:e.jsx(Xf,{attribution:'© <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"})})]}),u&&e.jsx(Jf,{position:u,icon:Kf.divIcon({className:"custom-div-icon",html:`<div style="position: relative; width: 28px; height: 34px;">
                                <div style="position:absolute; left:50%; top:50%; transform: translate(-50%, -55%); background-color: ${ne?"#10b981":"#3b82f6"}; width: 24px; height: 24px; border-radius: 50%; border: 4px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.4); animation: pulse 2s infinite; ${ne?"border-color: #10b981;":""}"></div>
                                <div style="position:absolute; left:50%; bottom:0; transform: translate(-50%, 50%); width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #fff; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.25));"></div>
                              </div>`,iconSize:[28,34],iconAnchor:[14,30]})}),Ge.map(ve=>{const Oe=Ct[ve.id];if(!Oe)return null;const Ve=dr===ve.id,rt=P?.id===ve.id;return e.jsx(Jf,{position:Oe,draggable:Ve,icon:Kf.divIcon({className:"custom-div-icon",html:`<div style="position: relative; width: 34px; height: 34px;">
                                    <div style="position:absolute; left:50%; top:50%; transform: translate(-50%, -50%); width: 32px; height: 32px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); background-image: url('/service-icon.png'); background-size: cover; background-position: center; background-repeat: no-repeat; ${rt?"animation: pulse 2s infinite;":""}"></div>
                                    <div style="position:absolute; left:50%; bottom:0; transform: translate(-50%, 50%); width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #fff; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.25));"></div>
                                  </div>`,iconSize:[34,40],iconAnchor:[17,34]}),eventHandlers:{click:()=>{Ve?Gt(null):Ur(ve)},dragend:Dt=>{if(Ve){const At=Dt.target.getLatLng();Ke(Tt=>({...Tt,[ve.id]:[At.lat,At.lng]})),Gt(null),ue({title:"Posição Atualizada",description:"A posição da solicitação foi ajustada manualmente."})}}}},ve.id)})]},`map-${I}-${u?`${u[0]}-${u[1]}`:"fallback"}`):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ss,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Clique para obter sua localização"}),e.jsx(Te,{size:"sm",onClick:xr,disabled:x,className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:x?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-4 w-4 mr-1"}),"Obter Localização"]})})]})}),e.jsx("div",{className:"absolute left-0 right-0 bottom-0 p-2 text-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-lg px-3 py-2 shadow-lg",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium mb-1",children:["Mostrando serviços em um raio de ",i,"km"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Sua localização"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsxs("span",{children:["Solicitações (",Ge?.length||0,")"]})]}),P&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Selecionado"})]})]})]})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Solicitações Disponíveis"}),gr&&gr.length>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["⚠️ ",gr.length," endereço(s) não localizados"]})]}),e.jsx(Te,{variant:"outline",size:"sm",onClick:Mr,disabled:pt,className:"h-8 sm:h-9 px-3 sm:px-4 text-xs sm:text-sm",children:pt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-primary mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Carregando..."}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qc,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atualizar"})]})})]}),pt?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsxs("div",{className:"relative mx-auto mb-3 sm:mb-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 border-4 border-gray-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 sm:w-16 sm:h-16 border-4 border-primary rounded-full",style:{clipPath:`polygon(50% 50%, 50% 0%, ${50+yt*.36}% 0%, ${50+yt*.36}% 50%)`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-primary",children:[yt,"%"]})})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2",children:is}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 sm:h-2 max-w-xs mx-auto",children:e.jsx("div",{className:"bg-primary h-1.5 sm:h-2 rounded-full transition-all duration-300",style:{width:`${yt}%`}})})]}):!Ge||Ge.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center mx-auto mb-3 sm:mb-4",children:e.jsx(Ql,{className:"h-6 w-6 sm:h-8 sm:w-8 text-gray-400"})}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-2",children:"Nenhuma solicitação disponível"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-4",children:"Novas solicitações aparecerão aqui automaticamente"}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"Dica:"})," Clique nos pins amarelos no mapa para ver detalhes dos serviços!"]})})]}):Ge.map(ve=>e.jsx(ot,{id:`service-${ve.id}`,className:"border-l-4 border-l-primary transition-all duration-300",children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-semibold text-sm sm:text-base lg:text-lg",children:["Solicitação #",ve.id]}),e.jsx(Zs,{variant:"outline",className:"text-xs w-fit",children:ve.category==="fisioterapeuta"?"Fisioterapeuta":ve.category==="acompanhante_hospitalar"?"Acompanhante":ve.category==="tecnico_enfermagem"?"Técnico Enfermagem":ve.category})]}),e.jsx("p",{className:"font-medium text-primary mb-1 text-sm sm:text-base",children:ve.serviceType}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:ve.description}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-1 sm:gap-2 text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(Ss,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:ve.address||ve.location||"Não informado"})]}),e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(zs,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:(()=>{const Oe=new Date(ve.scheduledDate),Ve=ve.numberOfDays||1;if(Ve>1){const rt=new Date(Oe);return rt.setDate(Oe.getDate()+(Ve-1)),`${Oe.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})} até ${rt.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})} • ${Ve} dias • ${ve.scheduledTime}`}else return`${Oe.toLocaleDateString("pt-BR")} às ${ve.scheduledTime}`})()})]}),e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(ba,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{children:[ve.responses||0," respostas"]})]}),Ct[ve.id]&&u&&e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx("span",{className:"h-3 w-3 flex-shrink-0",children:"📏"}),e.jsxs("span",{children:[Hr(u[0],u[1],Ct[ve.id][0],Ct[ve.id][1]).toFixed(1)," km"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[ve.budget&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"text-sm sm:text-base lg:text-lg font-bold text-green-600",children:["R$ ",parseFloat(ve.budget).toFixed(2)]}),ve.numberOfDays&&ve.numberOfDays>1&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-2 py-0.5 rounded-full font-medium",children:[ve.numberOfDays," ",ve.numberOfDays===1?"dia":"dias"]}),ve.dailyRate&&e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:["R$ ",parseFloat(ve.dailyRate).toFixed(2),"/dia"]})]})]}),e.jsx(Te,{size:"sm",className:"w-full sm:w-auto h-9 sm:h-10 text-xs sm:text-sm",onClick:()=>Ns(ve.id),children:"Ofertar Serviço"})]})]})})},ve.id))]})]})]})}),e.jsxs(Mi,{value:"performance",className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Performance e Estatísticas"}),e.jsxs(Te,{onClick:Rr,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Qc,{className:"h-4 w-4"}),"Atualizar Dados"]})]}),e.jsx(ot,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vh,{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Dados de Performance"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Os dados de performance e estatísticas estão sendo exibidos na área principal do dashboard acima."})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(sy,{className:"h-5 w-5"}),"Metas do Mês"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>xe("services"),className:`px-3 py-1.5 rounded-md text-sm font-medium ${ce==="services"?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:"Meta por Serviços"}),e.jsx("button",{onClick:()=>xe("revenue"),className:`px-3 py-1.5 rounded-md text-sm font-medium ${ce==="revenue"?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:"Meta por Receita"}),e.jsxs("button",{onClick:ze,className:"ml-2 inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium bg-white dark:bg-gray-900 border hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx(xh,{className:"h-4 w-4"}),"Gerar Relatório (PDF)"]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto w-full sm:w-auto sm:flex-nowrap flex-wrap",children:[e.jsx("input",{type:"date",value:Fe,onChange:ve=>Be(ve.target.value),className:"px-3 py-1.5 rounded-md border bg-white dark:bg-gray-900 text-sm w-[140px]"}),e.jsx("span",{className:"text-sm text-gray-500",children:"a"}),e.jsx("input",{type:"date",value:_e,onChange:ve=>Ie(ve.target.value),className:"px-3 py-1.5 rounded-md border bg-white dark:bg-gray-900 text-sm w-[140px]"})]})]}),ce==="services"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Defina sua meta de serviços no mês"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:1,value:je,onChange:ve=>Me(Math.max(1,parseInt(ve.target.value||"0"))),className:"w-28 px-3 py-2 rounded-md border bg-white dark:bg-gray-900"}),e.jsx("span",{className:"self-center text-sm text-gray-500",children:"serviços"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Defina sua meta de receita no mês"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"self-center text-sm text-gray-500",children:"R$"}),e.jsx("input",{type:"number",min:100,step:50,value:De,onChange:ve=>Ye(Math.max(100,parseFloat(ve.target.value||"0"))),className:"w-32 px-3 py-2 rounded-md border bg-white dark:bg-gray-900"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Serviços concluídos"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Ne,"/",je," (",Math.min(100,Math.round(Ne/(je||1)*100)),"%)"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-2.5 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full transition-all",style:{width:`${Math.min(100,Ne/(je||1)*100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Receita do mês"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",fe.toLocaleString("pt-BR")," / R$ ",De.toLocaleString("pt-BR")," (",Math.min(100,Math.round(fe/(De||1)*100)),"%)"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-2.5 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all",style:{width:`${Math.min(100,fe/(De||1)*100)}%`}})})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Dica: aumente sua disponibilidade e responda rápido para bater a meta!"})]})})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Cf,{className:"h-5 w-5"}),"Performance Semanal"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:(()=>{const ve=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],Oe=new Date,Ve=new Date(Oe);Ve.setDate(Oe.getDate()-Oe.getDay()),Ve.setHours(0,0,0,0),console.log("🔍 Debug Gráfico Semanal:",{totalCompletedServices:X.length,completedServices:X.slice(0,3),weekStart:Ve.toISOString()});const rt=ve.map((Dt,At)=>{const Tt=new Date(Ve);Tt.setDate(Ve.getDate()+At);const jt=new Date(Tt);jt.setDate(Tt.getDate()+1);const Et=X.filter(Kt=>{const bt=Kt.completedAt?new Date(Kt.completedAt):null;if(!bt)return!1;const gt=Tt.getTime(),Cs=jt.getTime(),os=bt.getTime();return os>=gt&&os<Cs}).length;let Ft=0;return Et>0&&(Ft=Math.max(20,Math.min(100,Et*20))),console.log(`📊 ${Dt}: ${Et} serviços, altura: ${Ft}%`),{day:Dt,count:Et,height:Ft}});return e.jsx("div",{className:"flex items-end justify-between h-32",children:rt.map((Dt,At)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:Dt.count}),e.jsx("div",{className:"w-8 bg-gradient-to-t from-yellow-500 to-orange-500 rounded-t-sm transition-all duration-300",style:{height:`${Dt.height}%`}}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Dt.day})]},At))})})()}),e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Serviços concluídos por dia da semana"})]})})]})]})]}),e.jsx(Mi,{value:"history",className:"space-y-8",children:e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5"}),"Histórico de Serviços Concluídos"]})}),e.jsx(lt,{children:e.jsx(Lw,{professionalId:K?.id||0})})]})})]})]})]}),e.jsx(Nl,{open:U,onOpenChange:Q,children:e.jsxs(Co,{className:"max-w-2xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-xl",children:[e.jsxs(Po,{children:[e.jsxs(Lo,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Ss,{className:"h-6 w-6 text-yellow-500"}),"Detalhes da Solicitação"]}),e.jsx(Th,{children:"Informações completas sobre o cliente e o serviço solicitado"})]}),P&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:[e.jsx("div",{className:"flex flex-col space-y-1.5 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[P.clientProfileImage?e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${st()}${P.clientProfileImage}`,alt:P.clientName||"Cliente",className:"w-full h-full object-cover",onError:ve=>{const Oe=ve.target;Oe.style.display="none";const Ve=Oe.parentElement;Ve&&(Ve.innerHTML=`
                                  <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                    <span class="text-white text-xl font-bold">
                                      ${P.clientName?P.clientName.charAt(0).toUpperCase():"C"}
                                    </span>
                                  </div>
                                `)}})}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:P.clientName?P.clientName.charAt(0).toUpperCase():"C"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:P.clientName||"Cliente"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(gn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:P.clientRating||"5.0"}),e.jsx("span",{className:"text-gray-500",children:"•"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[P.clientServices||"0"," serviços"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente desde ",P.clientSince?new Date(P.clientSince).getFullYear():"2024"]})]})]}),e.jsx("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent hover:bg-primary/80 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:P.status==="open"?"Aberta":P.status==="in_progress"?"Em Andamento":P.status==="completed"?"Concluída":"Normal"})]})}),e.jsxs("div",{className:"p-6 pt-0 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-primary mb-2",children:P.serviceType||"Serviço Solicitado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:P.description||"Descrição do serviço não disponível"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(sn,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Orçamento"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["R$ ",P.budget?parseFloat(P.budget).toFixed(2):"0,00"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Ss,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Distância"}),e.jsx("p",{className:"font-semibold text-blue-600",children:Ct[P.id]&&u?`${Hr(u[0],u[1],Ct[P.id][0],Ct[P.id][1]).toFixed(1)} km`:"0 km"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Qs,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Horário"}),e.jsx("p",{className:"font-semibold text-purple-600",children:P.scheduledTime||"Não definido"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ba,{className:"h-5 w-5 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Respostas"}),e.jsx("p",{className:"font-semibold text-orange-600",children:P.responses||0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-500"}),"Endereço"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:P.address||"Endereço não informado"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4 text-gray-500"}),"Data"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:P.scheduledDate?new Date(P.scheduledDate).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Data não definida"})]}),P.additionalInfo&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(qr,{className:"h-4 w-4 text-gray-500"}),"Detalhes Adicionais"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:P.additionalInfo})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(Te,{onClick:()=>Ns(P.id),className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold",children:[e.jsx(ba,{className:"h-4 w-4 mr-2"}),"Fazer Proposta"]}),e.jsx(Te,{variant:"outline",onClick:xn,className:"flex-1",children:"Fechar"})]}),e.jsxs(Te,{variant:"ghost",size:"sm",onClick:Is,className:"w-full text-xs",children:[e.jsx(Ss,{className:"h-3 w-3 mr-1"}),"Limpar Seleção no Mapa"]})]})]})})]})})}var Tj=[" ","Enter","ArrowUp","ArrowDown"],Ej=[" ","Enter"],To="Select",[Pd,Ld,Ij]=$m(To),[Al,F_]=Vi(To,[Ij,ud]),Ad=ud(),[Rj,Zi]=Al(To),[Mj,Oj]=Al(To),_x=s=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:i,onOpenChange:o,value:c,defaultValue:h,onValueChange:u,dir:m,name:x,autoComplete:v,disabled:b,required:g,form:k}=s,j=Ad(t),[T,S]=_.useState(null),[P,B]=_.useState(null),[U,Q]=_.useState(!1),ge=sh(m),[ae,ee]=gl({prop:a,defaultProp:i??!1,onChange:o,caller:To}),[K,ue]=gl({prop:c,defaultProp:h,onChange:u,caller:To}),I=_.useRef(null),q=T?k||!!T.closest("form"):!0,[ne,Y]=_.useState(new Set),he=Array.from(ne).map(pe=>pe.props.value).join(";");return e.jsx(Zm,{...j,children:e.jsxs(Rj,{required:g,scope:t,trigger:T,onTriggerChange:S,valueNode:P,onValueNodeChange:B,valueNodeHasChildren:U,onValueNodeHasChildrenChange:Q,contentId:ic(),value:K,onValueChange:ue,open:ae,onOpenChange:ee,dir:ge,triggerPointerDownPosRef:I,disabled:b,children:[e.jsx(Pd.Provider,{scope:t,children:e.jsx(Mj,{scope:s.__scopeSelect,onNativeOptionAdd:_.useCallback(pe=>{Y(oe=>new Set(oe).add(pe))},[]),onNativeOptionRemove:_.useCallback(pe=>{Y(oe=>{const ie=new Set(oe);return ie.delete(pe),ie})},[]),children:r})}),q?e.jsxs(Gx,{"aria-hidden":!0,required:g,tabIndex:-1,name:x,autoComplete:v,value:K,onChange:pe=>ue(pe.target.value),disabled:b,form:k,children:[K===void 0?e.jsx("option",{value:""}):null,Array.from(ne)]},he):null]})})};_x.displayName=To;var Sx="SelectTrigger",kx=_.forwardRef((s,t)=>{const{__scopeSelect:r,disabled:a=!1,...i}=s,o=Ad(r),c=Zi(Sx,r),h=c.disabled||a,u=Us(t,c.onTriggerChange),m=Ld(r),x=_.useRef("touch"),[v,b,g]=Kx(j=>{const T=m().filter(B=>!B.disabled),S=T.find(B=>B.value===c.value),P=Jx(T,j,S);P!==void 0&&c.onValueChange(P.value)}),k=j=>{h||(c.onOpenChange(!0),g()),j&&(c.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return e.jsx(Gm,{asChild:!0,...o,children:e.jsx(ts.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":Yx(c.value)?"":void 0,...i,ref:u,onClick:zt(i.onClick,j=>{j.currentTarget.focus(),x.current!=="mouse"&&k(j)}),onPointerDown:zt(i.onPointerDown,j=>{x.current=j.pointerType;const T=j.target;T.hasPointerCapture(j.pointerId)&&T.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(k(j),j.preventDefault())}),onKeyDown:zt(i.onKeyDown,j=>{const T=v.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&b(j.key),!(T&&j.key===" ")&&Tj.includes(j.key)&&(k(),j.preventDefault())})})})});kx.displayName=Sx;var Cx="SelectValue",Px=_.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:i,children:o,placeholder:c="",...h}=s,u=Zi(Cx,r),{onValueNodeHasChildrenChange:m}=u,x=o!==void 0,v=Us(t,u.onValueNodeChange);return $n(()=>{m(x)},[m,x]),e.jsx(ts.span,{...h,ref:v,style:{pointerEvents:"none"},children:Yx(u.value)?e.jsx(e.Fragment,{children:c}):o})});Px.displayName=Cx;var Dj="SelectIcon",Lx=_.forwardRef((s,t)=>{const{__scopeSelect:r,children:a,...i}=s;return e.jsx(ts.span,{"aria-hidden":!0,...i,ref:t,children:a||"▼"})});Lx.displayName=Dj;var Fj="SelectPortal",Ax=s=>e.jsx(Um,{asChild:!0,...s});Ax.displayName=Fj;var Eo="SelectContent",Tx=_.forwardRef((s,t)=>{const r=Zi(Eo,s.__scopeSelect),[a,i]=_.useState();if($n(()=>{i(new DocumentFragment)},[]),!r.open){const o=a;return o?th.createPortal(e.jsx(Ex,{scope:s.__scopeSelect,children:e.jsx(Pd.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),o):null}return e.jsx(Ix,{...s,ref:t})});Tx.displayName=Eo;var xa=10,[Ex,Gi]=Al(Eo),zj="SelectContentImpl",Bj=C1("SelectContent.RemoveScroll"),Ix=_.forwardRef((s,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:h,sideOffset:u,align:m,alignOffset:x,arrowPadding:v,collisionBoundary:b,collisionPadding:g,sticky:k,hideWhenDetached:j,avoidCollisions:T,...S}=s,P=Zi(Eo,r),[B,U]=_.useState(null),[Q,ge]=_.useState(null),ae=Us(t,X=>U(X)),[ee,K]=_.useState(null),[ue,I]=_.useState(null),q=Ld(r),[ne,Y]=_.useState(!1),he=_.useRef(!1);_.useEffect(()=>{if(B)return _1(B)},[B]),S1();const pe=_.useCallback(X=>{const[le,...ce]=q().map(Me=>Me.ref.current),[xe]=ce.slice(-1),je=document.activeElement;for(const Me of X)if(Me===je||(Me?.scrollIntoView({block:"nearest"}),Me===le&&Q&&(Q.scrollTop=0),Me===xe&&Q&&(Q.scrollTop=Q.scrollHeight),Me?.focus(),document.activeElement!==je))return},[q,Q]),oe=_.useCallback(()=>pe([ee,B]),[pe,ee,B]);_.useEffect(()=>{ne&&oe()},[ne,oe]);const{onOpenChange:ie,triggerPointerDownPosRef:Ne}=P;_.useEffect(()=>{if(B){let X={x:0,y:0};const le=xe=>{X={x:Math.abs(Math.round(xe.pageX)-(Ne.current?.x??0)),y:Math.abs(Math.round(xe.pageY)-(Ne.current?.y??0))}},ce=xe=>{X.x<=10&&X.y<=10?xe.preventDefault():B.contains(xe.target)||ie(!1),document.removeEventListener("pointermove",le),Ne.current=null};return Ne.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",ce,{capture:!0})}}},[B,ie,Ne]),_.useEffect(()=>{const X=()=>ie(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[ie]);const[J,fe]=Kx(X=>{const le=q().filter(je=>!je.disabled),ce=le.find(je=>je.ref.current===document.activeElement),xe=Jx(le,X,ce);xe&&setTimeout(()=>xe.ref.current.focus())}),R=_.useCallback((X,le,ce)=>{const xe=!he.current&&!ce;(P.value!==void 0&&P.value===le||xe)&&(K(X),xe&&(he.current=!0))},[P.value]),E=_.useCallback(()=>B?.focus(),[B]),D=_.useCallback((X,le,ce)=>{const xe=!he.current&&!ce;(P.value!==void 0&&P.value===le||xe)&&I(X)},[P.value]),W=a==="popper"?Gu:Rx,se=W===Gu?{side:h,sideOffset:u,align:m,alignOffset:x,arrowPadding:v,collisionBoundary:b,collisionPadding:g,sticky:k,hideWhenDetached:j,avoidCollisions:T}:{};return e.jsx(Ex,{scope:r,content:B,viewport:Q,onViewportChange:ge,itemRefCallback:R,selectedItem:ee,onItemLeave:E,itemTextRefCallback:D,focusSelectedItem:oe,selectedItemText:ue,position:a,isPositioned:ne,searchRef:J,children:e.jsx(k1,{as:Bj,allowPinchZoom:!0,children:e.jsx(P1,{asChild:!0,trapped:P.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:zt(i,X=>{P.trigger?.focus({preventScroll:!0}),X.preventDefault()}),children:e.jsx(Hm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>P.onOpenChange(!1),children:e.jsx(W,{role:"listbox",id:P.contentId,"data-state":P.open?"open":"closed",dir:P.dir,onContextMenu:X=>X.preventDefault(),...S,...se,onPlaced:()=>Y(!0),ref:ae,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:zt(S.onKeyDown,X=>{const le=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!le&&X.key.length===1&&fe(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let xe=q().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(X.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const je=X.target,Me=xe.indexOf(je);xe=xe.slice(Me+1)}setTimeout(()=>pe(xe)),X.preventDefault()}})})})})})})});Ix.displayName=zj;var qj="SelectItemAlignedPosition",Rx=_.forwardRef((s,t)=>{const{__scopeSelect:r,onPlaced:a,...i}=s,o=Zi(Eo,r),c=Gi(Eo,r),[h,u]=_.useState(null),[m,x]=_.useState(null),v=Us(t,ae=>x(ae)),b=Ld(r),g=_.useRef(!1),k=_.useRef(!0),{viewport:j,selectedItem:T,selectedItemText:S,focusSelectedItem:P}=c,B=_.useCallback(()=>{if(o.trigger&&o.valueNode&&h&&m&&j&&T&&S){const ae=o.trigger.getBoundingClientRect(),ee=m.getBoundingClientRect(),K=o.valueNode.getBoundingClientRect(),ue=S.getBoundingClientRect();if(o.dir!=="rtl"){const je=ue.left-ee.left,Me=K.left-je,De=ae.left-Me,Ye=ae.width+De,G=Math.max(Ye,ee.width),Z=window.innerWidth-xa,Fe=Pu(Me,[xa,Math.max(xa,Z-G)]);h.style.minWidth=Ye+"px",h.style.left=Fe+"px"}else{const je=ee.right-ue.right,Me=window.innerWidth-K.right-je,De=window.innerWidth-ae.right-Me,Ye=ae.width+De,G=Math.max(Ye,ee.width),Z=window.innerWidth-xa,Fe=Pu(Me,[xa,Math.max(xa,Z-G)]);h.style.minWidth=Ye+"px",h.style.right=Fe+"px"}const I=b(),q=window.innerHeight-xa*2,ne=j.scrollHeight,Y=window.getComputedStyle(m),he=parseInt(Y.borderTopWidth,10),pe=parseInt(Y.paddingTop,10),oe=parseInt(Y.borderBottomWidth,10),ie=parseInt(Y.paddingBottom,10),Ne=he+pe+ne+ie+oe,J=Math.min(T.offsetHeight*5,Ne),fe=window.getComputedStyle(j),R=parseInt(fe.paddingTop,10),E=parseInt(fe.paddingBottom,10),D=ae.top+ae.height/2-xa,W=q-D,se=T.offsetHeight/2,X=T.offsetTop+se,le=he+pe+X,ce=Ne-le;if(le<=D){const je=I.length>0&&T===I[I.length-1].ref.current;h.style.bottom="0px";const Me=m.clientHeight-j.offsetTop-j.offsetHeight,De=Math.max(W,se+(je?E:0)+Me+oe),Ye=le+De;h.style.height=Ye+"px"}else{const je=I.length>0&&T===I[0].ref.current;h.style.top="0px";const De=Math.max(D,he+j.offsetTop+(je?R:0)+se)+ce;h.style.height=De+"px",j.scrollTop=le-D+j.offsetTop}h.style.margin=`${xa}px 0`,h.style.minHeight=J+"px",h.style.maxHeight=q+"px",a?.(),requestAnimationFrame(()=>g.current=!0)}},[b,o.trigger,o.valueNode,h,m,j,T,S,o.dir,a]);$n(()=>B(),[B]);const[U,Q]=_.useState();$n(()=>{m&&Q(window.getComputedStyle(m).zIndex)},[m]);const ge=_.useCallback(ae=>{ae&&k.current===!0&&(B(),P?.(),k.current=!1)},[B,P]);return e.jsx(Uj,{scope:r,contentWrapper:h,shouldExpandOnScrollRef:g,onScrollButtonChange:ge,children:e.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:U},children:e.jsx(ts.div,{...i,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Rx.displayName=qj;var $j="SelectPopperPosition",Gu=_.forwardRef((s,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:i=xa,...o}=s,c=Ad(r);return e.jsx(Wm,{...c,...o,ref:t,align:a,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Gu.displayName=$j;var[Uj,qh]=Al(Eo,{}),Yu="SelectViewport",Mx=_.forwardRef((s,t)=>{const{__scopeSelect:r,nonce:a,...i}=s,o=Gi(Yu,r),c=qh(Yu,r),h=Us(t,o.onViewportChange),u=_.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Pd.Slot,{scope:r,children:e.jsx(ts.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:zt(i.onScroll,m=>{const x=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:b}=c;if(b?.current&&v){const g=Math.abs(u.current-x.scrollTop);if(g>0){const k=window.innerHeight-xa*2,j=parseFloat(v.style.minHeight),T=parseFloat(v.style.height),S=Math.max(j,T);if(S<k){const P=S+g,B=Math.min(k,P),U=P-B;v.style.height=B+"px",v.style.bottom==="0px"&&(x.scrollTop=U>0?U:0,v.style.justifyContent="flex-end")}}}u.current=x.scrollTop})})})]})});Mx.displayName=Yu;var Ox="SelectGroup",[Hj,Wj]=Al(Ox),Vj=_.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=ic();return e.jsx(Hj,{scope:r,id:i,children:e.jsx(ts.div,{role:"group","aria-labelledby":i,...a,ref:t})})});Vj.displayName=Ox;var Dx="SelectLabel",Fx=_.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=Wj(Dx,r);return e.jsx(ts.div,{id:i.id,...a,ref:t})});Fx.displayName=Dx;var dd="SelectItem",[Zj,zx]=Al(dd),Bx=_.forwardRef((s,t)=>{const{__scopeSelect:r,value:a,disabled:i=!1,textValue:o,...c}=s,h=Zi(dd,r),u=Gi(dd,r),m=h.value===a,[x,v]=_.useState(o??""),[b,g]=_.useState(!1),k=Us(t,P=>u.itemRefCallback?.(P,a,i)),j=ic(),T=_.useRef("touch"),S=()=>{i||(h.onValueChange(a),h.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Zj,{scope:r,value:a,disabled:i,textId:j,isSelected:m,onItemTextChange:_.useCallback(P=>{v(B=>B||(P?.textContent??"").trim())},[]),children:e.jsx(Pd.ItemSlot,{scope:r,value:a,disabled:i,textValue:x,children:e.jsx(ts.div,{role:"option","aria-labelledby":j,"data-highlighted":b?"":void 0,"aria-selected":m&&b,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:k,onFocus:zt(c.onFocus,()=>g(!0)),onBlur:zt(c.onBlur,()=>g(!1)),onClick:zt(c.onClick,()=>{T.current!=="mouse"&&S()}),onPointerUp:zt(c.onPointerUp,()=>{T.current==="mouse"&&S()}),onPointerDown:zt(c.onPointerDown,P=>{T.current=P.pointerType}),onPointerMove:zt(c.onPointerMove,P=>{T.current=P.pointerType,i?u.onItemLeave?.():T.current==="mouse"&&P.currentTarget.focus({preventScroll:!0})}),onPointerLeave:zt(c.onPointerLeave,P=>{P.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:zt(c.onKeyDown,P=>{u.searchRef?.current!==""&&P.key===" "||(Ej.includes(P.key)&&S(),P.key===" "&&P.preventDefault())})})})})});Bx.displayName=dd;var Zl="SelectItemText",qx=_.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:i,...o}=s,c=Zi(Zl,r),h=Gi(Zl,r),u=zx(Zl,r),m=Oj(Zl,r),[x,v]=_.useState(null),b=Us(t,S=>v(S),u.onItemTextChange,S=>h.itemTextRefCallback?.(S,u.value,u.disabled)),g=x?.textContent,k=_.useMemo(()=>e.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:j,onNativeOptionRemove:T}=m;return $n(()=>(j(k),()=>T(k)),[j,T,k]),e.jsxs(e.Fragment,{children:[e.jsx(ts.span,{id:u.textId,...o,ref:b}),u.isSelected&&c.valueNode&&!c.valueNodeHasChildren?th.createPortal(o.children,c.valueNode):null]})});qx.displayName=Zl;var $x="SelectItemIndicator",Ux=_.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return zx($x,r).isSelected?e.jsx(ts.span,{"aria-hidden":!0,...a,ref:t}):null});Ux.displayName=$x;var Ku="SelectScrollUpButton",Hx=_.forwardRef((s,t)=>{const r=Gi(Ku,s.__scopeSelect),a=qh(Ku,s.__scopeSelect),[i,o]=_.useState(!1),c=Us(t,a.onScrollButtonChange);return $n(()=>{if(r.viewport&&r.isPositioned){let h=function(){const m=u.scrollTop>0;o(m)};const u=r.viewport;return h(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[r.viewport,r.isPositioned]),i?e.jsx(Vx,{...s,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:u}=r;h&&u&&(h.scrollTop=h.scrollTop-u.offsetHeight)}}):null});Hx.displayName=Ku;var Ju="SelectScrollDownButton",Wx=_.forwardRef((s,t)=>{const r=Gi(Ju,s.__scopeSelect),a=qh(Ju,s.__scopeSelect),[i,o]=_.useState(!1),c=Us(t,a.onScrollButtonChange);return $n(()=>{if(r.viewport&&r.isPositioned){let h=function(){const m=u.scrollHeight-u.clientHeight,x=Math.ceil(u.scrollTop)<m;o(x)};const u=r.viewport;return h(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[r.viewport,r.isPositioned]),i?e.jsx(Vx,{...s,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:u}=r;h&&u&&(h.scrollTop=h.scrollTop+u.offsetHeight)}}):null});Wx.displayName=Ju;var Vx=_.forwardRef((s,t)=>{const{__scopeSelect:r,onAutoScroll:a,...i}=s,o=Gi("SelectScrollButton",r),c=_.useRef(null),h=Ld(r),u=_.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return _.useEffect(()=>()=>u(),[u]),$n(()=>{h().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[h]),e.jsx(ts.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:zt(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(a,50))}),onPointerMove:zt(i.onPointerMove,()=>{o.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(a,50))}),onPointerLeave:zt(i.onPointerLeave,()=>{u()})})}),Gj="SelectSeparator",Zx=_.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return e.jsx(ts.div,{"aria-hidden":!0,...a,ref:t})});Zx.displayName=Gj;var Xu="SelectArrow",Yj=_.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=Ad(r),o=Zi(Xu,r),c=Gi(Xu,r);return o.open&&c.position==="popper"?e.jsx(Ym,{...i,...a,ref:t}):null});Yj.displayName=Xu;var Kj="SelectBubbleInput",Gx=_.forwardRef(({__scopeSelect:s,value:t,...r},a)=>{const i=_.useRef(null),o=Us(a,i),c=C0(t);return _.useEffect(()=>{const h=i.current;if(!h)return;const u=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(u,"value").set;if(c!==t&&x){const v=new Event("change",{bubbles:!0});x.call(h,t),h.dispatchEvent(v)}},[c,t]),e.jsx(ts.select,{...r,style:{...Ap,...r.style},ref:o,defaultValue:t})});Gx.displayName=Kj;function Yx(s){return s===""||s===void 0}function Kx(s){const t=Bn(s),r=_.useRef(""),a=_.useRef(0),i=_.useCallback(c=>{const h=r.current+c;t(h),function u(m){r.current=m,window.clearTimeout(a.current),m!==""&&(a.current=window.setTimeout(()=>u(""),1e3))}(h)},[t]),o=_.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,i,o]}function Jx(s,t,r){const i=t.length>1&&Array.from(t).every(m=>m===t[0])?t[0]:t,o=r?s.indexOf(r):-1;let c=Jj(s,Math.max(o,0));i.length===1&&(c=c.filter(m=>m!==r));const u=c.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==r?u:void 0}function Jj(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var Xj=_x,Xx=kx,Qj=Px,e4=Lx,t4=Ax,Qx=Tx,s4=Mx,ev=Fx,tv=Bx,r4=qx,n4=Ux,sv=Hx,rv=Wx,nv=Zx;const nc=Xj,ac=Qj,_l=_.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Xx,{ref:a,className:ut("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white dark:bg-gray-800 px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(e4,{asChild:!0,children:e.jsx(gh,{className:"h-4 w-4 opacity-50"})})]}));_l.displayName=Xx.displayName;const av=_.forwardRef(({className:s,...t},r)=>e.jsx(sv,{ref:r,className:ut("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Z2,{className:"h-4 w-4"})}));av.displayName=sv.displayName;const iv=_.forwardRef(({className:s,...t},r)=>e.jsx(rv,{ref:r,className:ut("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(gh,{className:"h-4 w-4"})}));iv.displayName=rv.displayName;const Sl=_.forwardRef(({className:s,children:t,position:r="popper",...a},i)=>e.jsx(t4,{children:e.jsxs(Qx,{ref:i,className:ut("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(av,{}),e.jsx(s4,{className:ut("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(iv,{})]})}));Sl.displayName=Qx.displayName;const a4=_.forwardRef(({className:s,...t},r)=>e.jsx(ev,{ref:r,className:ut("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));a4.displayName=ev.displayName;const _o=_.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(tv,{ref:a,className:ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(n4,{children:e.jsx(cc,{className:"h-4 w-4"})})}),e.jsx(r4,{children:t})]}));_o.displayName=tv.displayName;const i4=_.forwardRef(({className:s,...t},r)=>e.jsx(nv,{ref:r,className:ut("-mx-1 my-1 h-px bg-muted",s),...t}));i4.displayName=nv.displayName;const fu={acompanhante_hospitalar:{name:"Acompanhante Hospitalar",icon:"🏥",subServices:[{id:"acompanhamento_hospitalar",name:"Acompanhamento Hospitalar"},{id:"companhia_apoio_emocional",name:"Companhia e Apoio Emocional"}]}};function o4({onComplete:s}){const[,t]=qs(),[r,a]=_.useState(1),[i,o]=_.useState({name:"",email:"",phone:"",address:"",category:"",subService:"",specialization:"",description:"",experience:"",certifications:"",hourlyRate:"",profileImage:null,documents:[]}),c=4,h=()=>{r<c?a(r+1):(console.log("✅ Cadastro completo - redirecionando para Stripe Connect..."),t("/stripe-setup"))},u=()=>{r>1&&a(r-1)},m=(v,b)=>{o(g=>({...g,[v]:b}))},x=()=>{switch(r){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Informações Pessoais"}),e.jsx("p",{className:"text-gray-600",children:"Vamos começar com seus dados básicos"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx($r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(ht,{type:"text",placeholder:"Nome completo",value:i.name,onChange:v=>m("name",v.target.value),className:"pl-10 py-3",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ec,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(ht,{type:"email",placeholder:"E-mail profissional",value:i.email,onChange:v=>m("email",v.target.value),className:"pl-10 py-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(ht,{type:"tel",placeholder:"(11) 99999-9999",value:i.phone,onChange:v=>m("phone",v.target.value),className:"pl-10 py-3",required:!0})]}),i.phone&&i.phone.length>=10&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(Xt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:"Telefone válido"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(ht,{type:"text",placeholder:"Cidade, Estado",value:i.address,onChange:v=>m("address",v.target.value),className:"pl-10 py-3",required:!0})]})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Área de Atuação"}),e.jsx("p",{className:"text-gray-600",children:"Selecione sua especialidade profissional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Categoria Principal"}),e.jsxs(nc,{value:i.category,onValueChange:v=>m("category",v),children:[e.jsx(_l,{className:"bg-white dark:bg-gray-800",children:e.jsx(ac,{placeholder:"Selecione sua área de atuação"})}),e.jsx(Sl,{children:Object.entries(fu).map(([v,b])=>e.jsxs(_o,{value:v,children:[b.icon," ",b.name]},v))})]})]}),i.category&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Serviço Específico"}),e.jsxs(nc,{value:i.subService,onValueChange:v=>m("subService",v),children:[e.jsx(_l,{className:"bg-white dark:bg-gray-800",children:e.jsx(ac,{placeholder:"Selecione o serviço específico"})}),e.jsx(Sl,{children:fu[i.category]?.subServices.map(v=>e.jsx(_o,{value:v.id,children:v.name},v.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Especialização"}),e.jsx(ht,{placeholder:"Ex: Fisioterapia respiratória, Reabilitação neurológica...",value:i.specialization,onChange:v=>m("specialization",v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Descrição dos Serviços"}),e.jsx(ea,{placeholder:"Descreva em detalhes como você realiza seus serviços, metodologia e diferenciais...",rows:4,value:i.description,onChange:v=>m("description",v.target.value)})]})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Experiência e Qualificações"}),e.jsx("p",{className:"text-gray-600",children:"Conte-nos sobre sua experiência profissional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(ht,{placeholder:"Ex: 5 anos",value:i.experience,onChange:v=>m("experience",v.target.value),className:"pl-10"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tempo de Experiência"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(ht,{type:"number",placeholder:"80.00",value:i.hourlyRate,onChange:v=>m("hourlyRate",v.target.value),className:"pl-10"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Valor por Hora (R$)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(Xp,{className:"h-4 w-4"}),"Certificações e Qualificações"]}),e.jsx(ea,{placeholder:"Liste suas certificações, cursos e qualificações relevantes...",rows:4,value:i.certifications,onChange:v=>m("certifications",v.target.value)})]})]})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Documentação"}),e.jsx("p",{className:"text-gray-600",children:"Adicione sua foto e documentos profissionais"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(Ro,{className:"h-4 w-4"}),"Foto de Perfil"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Pf,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clique para adicionar uma foto profissional"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG até 2MB"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(xh,{className:"h-4 w-4"}),"Documentos Profissionais"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Pf,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Adicione diplomas, certificados e registros profissionais"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG até 5MB cada"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5 text-blue-600"}),"Revisão dos Dados"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",i.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Categoria:"})," ",i.category&&fu[i.category]?.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Especialização:"})," ",i.specialization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Experiência:"})," ",i.experience]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor/Hora:"})," R$ ",i.hourlyRate]})]})]})]})]});default:return null}};return e.jsx(Ao,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx($s,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cadastro de Profissional"})]})}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(dc,{size:40})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Cadastro do Profissional"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Junte-se à nossa rede de profissionais de saúde"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-white/80 text-sm",children:["Etapa ",r," de ",c]}),e.jsxs("span",{className:"text-white/80 text-sm",children:[Math.round(r/c*100),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${r/c*100}%`}})})]}),e.jsx(ot,{className:"bg-white/95 backdrop-blur-sm",children:e.jsxs(lt,{className:"p-6",children:[x(),e.jsxs("div",{className:"flex gap-3 mt-8",children:[r>1&&e.jsx(Te,{variant:"outline",onClick:u,className:"flex-1",children:"Voltar"}),e.jsxs(Te,{onClick:h,className:"flex-1",children:[r===c?"Finalizar Cadastro":"Continuar",e.jsx(Jp,{className:"ml-2 h-4 w-4"})]})]})]})})]})]})})}function l4(){const{toast:s}=ks(),[t,r]=_.useState(""),[a,i]=_.useState("all"),[o,c]=_.useState([]),[h,u]=_.useState(!0),[m,x]=_.useState(null);_.useEffect(()=>{v()},[]);const v=async()=>{try{u(!0);const U=await fetch(`${st()}/api/provider/orders`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(U.ok){const Q=await U.json();c(Q)}else console.error("Erro ao buscar pedidos:",U.statusText),s({title:"Erro",description:"Não foi possível carregar os pedidos",variant:"destructive"})}catch(U){console.error("Erro ao buscar pedidos:",U),s({title:"Erro",description:"Erro de conexão ao carregar pedidos",variant:"destructive"})}finally{u(!1)}},b=U=>{switch(U){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},g=U=>{switch(U){case"pending":return"Pendente";case"accepted":return"Aceito";case"rejected":return"Rejeitado";case"completed":return"Concluído";default:return"Desconhecido"}},k=U=>{switch(U){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},j=U=>{switch(U){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return"Desconhecida"}},T=o.filter(U=>{const Q=U.clientName.toLowerCase().includes(t.toLowerCase())||U.serviceType.toLowerCase().includes(t.toLowerCase()),ge=a==="all"||U.status===a;return Q&&ge}),S=async U=>{try{x(U);const Q=await fetch(`${st()}/api/provider/orders/${U}/accept`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(Q.ok)s({title:"Sucesso",description:"Pedido aceito com sucesso!"}),v();else{const ge=await Q.json();s({title:"Erro",description:ge.message||"Erro ao aceitar pedido",variant:"destructive"})}}catch(Q){console.error("Erro ao aceitar pedido:",Q),s({title:"Erro",description:"Erro de conexão ao aceitar pedido",variant:"destructive"})}finally{x(null)}},P=async U=>{try{x(U);const Q=await fetch(`${st()}/api/provider/orders/${U}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(Q.ok)s({title:"Sucesso",description:"Pedido rejeitado com sucesso!"}),v();else{const ge=await Q.json();s({title:"Erro",description:ge.message||"Erro ao rejeitar pedido",variant:"destructive"})}}catch(Q){console.error("Erro ao rejeitar pedido:",Q),s({title:"Erro",description:"Erro de conexão ao rejeitar pedido",variant:"destructive"})}finally{x(null)}},B=U=>{console.log(`Entrando em contato com cliente do pedido ${U}`)};return e.jsx(Ao,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx($s,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Meus Pedidos"})]})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(ht,{placeholder:"Buscar pedidos...",value:t,onChange:U=>r(U.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx(Te,{variant:a==="all"?"default":"outline",size:"sm",onClick:()=>i("all"),children:"Todos"}),e.jsx(Te,{variant:a==="pending"?"default":"outline",size:"sm",onClick:()=>i("pending"),children:"Pendentes"}),e.jsx(Te,{variant:a==="accepted"?"default":"outline",size:"sm",onClick:()=>i("accepted"),children:"Aceitos"}),e.jsx(Te,{variant:a==="completed"?"default":"outline",size:"sm",onClick:()=>i("completed"),children:"Concluídos"})]})]}),e.jsx("div",{className:"space-y-4",children:h?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Es,{className:"h-8 w-8 text-gray-400 animate-spin"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Carregando pedidos..."})]}):T.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Wa,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhum pedido encontrado"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"Tente ajustar sua busca":"Você ainda não tem pedidos"})]}):T.map(U=>e.jsxs(ot,{className:"overflow-hidden",children:[e.jsx(Wt,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:U.clientName}),e.jsx(Zs,{className:b(U.status),children:g(U.status)})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:U.serviceType})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["R$ ",U.budget]}),e.jsx("p",{className:"text-xs text-gray-500",children:U.timePosted})]})]})}),e.jsxs(lt,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:U.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{children:U.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(sg,{className:"h-4 w-4"}),e.jsxs("span",{children:[U.distance,"km"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qs,{className:"h-4 w-4"}),e.jsxs("span",{children:[U.responses," respostas"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Zs,{className:k(U.urgency),children:j(U.urgency)}),U.clientRating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gn,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm",children:U.clientRating})]})]}),e.jsxs("div",{className:"flex gap-2",children:[U.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(Te,{size:"sm",className:"flex-1",onClick:()=>S(U.id),disabled:m===U.id,children:[m===U.id?e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Aceitar"]}),e.jsxs(Te,{variant:"outline",size:"sm",onClick:()=>P(U.id),disabled:m===U.id,children:[m===U.id?e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Rejeitar"]})]}),U.status==="accepted"&&e.jsxs(Te,{size:"sm",className:"flex-1",onClick:()=>B(U.id),children:[e.jsx(ba,{className:"h-4 w-4 mr-2"}),"Entrar em Contato"]}),U.clientPhone&&e.jsxs(Te,{variant:"outline",size:"sm",children:[e.jsx(zi,{className:"h-4 w-4 mr-2"}),"Ligar"]})]}),U.scheduledDate&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W2,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:["Agendado para: ",U.scheduledDate]})]})})]})]},U.id))})]})]})})}function c4(){const[,s]=qs(),{user:t,logout:r}=cr(),{toast:a}=ks(),[i,o]=_.useState(!0),[c,h]=_.useState(!1),[u,m]=_.useState(!1),[x,v]=_.useState(!1),b=_.useRef(null),[g,k]=_.useState(null),[j,T]=_.useState(null),[S,P]=_.useState({name:"",email:"",phone:"",taxpayerId:"",specialization:"",category:"",subCategory:"",description:"",experience:"",certifications:"",hourlyRate:"",location:"",available:!0});_.useEffect(()=>{t?.userType==="provider"&&B()},[t]);const B=async()=>{try{o(!0);const J=sessionStorage.getItem("token"),fe={"Content-Type":"application/json"};J&&(fe.Authorization=`Bearer ${J}`);const R=await fetch(`${st()}/api/provider/profile`,{credentials:"include",headers:fe});if(R.ok){const D=await R.json();k(D)}const E=await fetch(`${st()}/api/user`,{credentials:"include",headers:fe});if(E.ok){const D=await E.json();T(D),P(W=>({name:W.name||g?.name||D.name||"",email:D.email||W.email||"",phone:D.phone||W.phone||"",taxpayerId:W.taxpayerId||D.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"",specialization:g?.specialization||W.specialization||"",category:g?.category||W.category||"",subCategory:g?.subCategory||W.subCategory||"",description:g?.description||W.description||"",experience:g?.experience||W.experience||"",certifications:g?.certifications||W.certifications||"",hourlyRate:g?.hourlyRate||W.hourlyRate||"",location:g?.location||D.address||W.location||"",available:g?.available??W.available??!0}))}}catch(J){console.error("Erro ao carregar dados do perfil:",J),a({title:"Erro",description:"Não foi possível carregar os dados do perfil",variant:"destructive"})}finally{o(!1)}},U=async()=>{try{h(!0);const J=sessionStorage.getItem("token"),fe={"Content-Type":"application/json"};J&&(fe.Authorization=`Bearer ${J}`);const R={name:S.name,email:S.email,phone:S.phone,address:S.location},E=await fetch(`${st()}/api/user/profile`,{method:"PUT",credentials:"include",headers:fe,body:JSON.stringify(R)}),D={name:S.name,specialization:S.specialization,category:S.category,subCategory:S.subCategory,description:S.description,experience:S.experience,certifications:S.certifications,hourlyRate:S.hourlyRate,location:S.location,available:S.available},W=await fetch(`${st()}/api/provider/profile`,{method:"PUT",credentials:"include",headers:fe,body:JSON.stringify(D)});if(E.ok&&W.ok){try{localStorage.setItem("lb_report_taxpayer_id",(S.taxpayerId||"").trim())}catch{}a({title:"Sucesso",description:"Perfil atualizado com sucesso!"}),m(!1),await B()}else{let se="Erro ao atualizar perfil";try{const X=E.ok?null:await E.json(),le=W.ok?null:await W.json();se=X?.message||le?.message||se}catch{}a({title:"Erro",description:se,variant:"destructive"})}}catch(J){console.error("Erro ao salvar perfil:",J),a({title:"Erro",description:"Erro de conexão ao salvar perfil",variant:"destructive"})}finally{h(!1)}},Q=()=>{m(!1),g&&j&&P({name:g.name||"",email:j.email||"",phone:j.phone||"",taxpayerId:S.taxpayerId||"",specialization:g.specialization||"",category:g.category||"",subCategory:g.subCategory||"",description:g.description||"",experience:g.experience||"",certifications:g.certifications||"",hourlyRate:g.hourlyRate||"",location:g.location||"",available:g.available||!0})},ge=async J=>{const fe=J.target.files?.[0];if(!fe)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(fe.type)){a({title:"Erro",description:"Apenas imagens são permitidas (JPEG, PNG, GIF, WebP)",variant:"destructive"});return}if(fe.size>5*1024*1024){a({title:"Erro",description:"A imagem deve ter no máximo 5MB",variant:"destructive"});return}try{v(!0);const E=sessionStorage.getItem("token"),D=new FormData;D.append("profileImage",fe);const W=await fetch(`${st()}/api/provider/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${E}`},body:D});if(W.ok){const se=await W.json();g&&k({...g,imageUrl:se.imageUrl}),a({title:"Sucesso",description:"Imagem de perfil atualizada com sucesso!"})}else{const se=await W.json();a({title:"Erro",description:se.message||"Erro ao fazer upload da imagem",variant:"destructive"})}}catch(E){console.error("Erro ao fazer upload da imagem:",E),a({title:"Erro",description:"Erro de conexão ao fazer upload da imagem",variant:"destructive"})}finally{v(!1)}},ae=()=>{b.current?.click()},ee=()=>{r(),window.location.href="/"},K=J=>/.+@.+\..+/.test((J||"").trim()),ue=J=>{const fe=(J||"").replace(/\D/g,"");return!(fe.length!==11||fe[0]==="0"||fe[1]==="0"||fe[2]!=="9")},I=J=>{const fe=(J||"").replace(/\D/g,"");if(!fe||fe.length!==11||/^(\d)\1{10}$/.test(fe))return!1;const R=E=>{let D=0;for(let se=0;se<E;se++)D+=parseInt(fe[se],10)*(E+1-se);const W=D*10%11;return W===10?0:W};return R(9)===parseInt(fe[9],10)&&R(10)===parseInt(fe[10],10)},q=J=>{const fe=(J||"").replace(/\D/g,"");if(!fe||fe.length!==14||/^(\d)\1{13}$/.test(fe))return!1;const R=(W,se)=>{const le=W.split("").reduce((ce,xe,je)=>ce+parseInt(xe,10)*se[je],0)%11;return le<2?0:11-le},E=R(fe.slice(0,12),[5,4,3,2,9,8,7,6,5,4,3,2]),D=R(fe.slice(0,12)+E.toString(),[6,5,4,3,2,9,8,7,6,5,4,3,2]);return E===parseInt(fe[12],10)&&D===parseInt(fe[13],10)},ne=K(j?.email||S.email),Y=ue(j?.phone||S.phone),he=S.taxpayerId||j?.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"",pe=I(he)||q(he),oe=[ne,Y,pe].filter(Boolean).length,ie=J=>({acompanhante_hospitalar:"Acompanhante Hospitalar"})[J]||J,Ne=J=>({companhia_apoio_emocional:"Companhia e Apoio Emocional",acompanhamento_hospitalar:"Acompanhamento Hospitalar"})[J]||J;return i?e.jsx(Ao,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando perfil..."})]})})}):e.jsx(Ao,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:e.jsxs("div",{className:"w-full max-w-sm lg:max-w-none mx-auto lg:mx-0 relative px-3 sm:px-4 lg:px-8 py-3 sm:py-4 lg:py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/provider-dashboard"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Meu Perfil"})]}),u?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Te,{onClick:Q,variant:"outline",size:"sm",children:[e.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),e.jsx(Te,{onClick:U,size:"sm",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ed,{className:"h-4 w-4 mr-2"}),"Salvar"]})})]}):e.jsxs(Te,{onClick:()=>m(!0),size:"sm",children:[e.jsx(ag,{className:"h-4 w-4 mr-2"}),"Editar"]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"mb-6",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsxs(Bi,{className:"w-24 h-24 mx-auto border-4 border-yellow-500",children:[e.jsx(qi,{src:g.imageUrl?`${st()}${g.imageUrl}`:void 0,alt:g.name}),e.jsx($i,{className:"bg-yellow-500 text-white text-2xl font-bold",children:g.name?.charAt(0)||"P"})]}),e.jsx(Te,{size:"sm",variant:"secondary",className:"absolute -bottom-1 -right-1 rounded-full w-8 h-8 p-0 bg-white border-2 border-gray-200 hover:bg-gray-50",onClick:ae,disabled:x,children:x?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full"}):e.jsx(Ro,{className:"h-4 w-4"})})]}),e.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:ge,className:"hidden"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:u?e.jsx(ht,{value:S.name,onChange:J=>P(fe=>({...fe,name:J.target.value})),className:"text-center text-2xl font-bold"}):g.name}),e.jsx("p",{className:"text-lg text-primary font-semibold mb-2",children:u?e.jsx(ht,{value:S.specialization,onChange:J=>P(fe=>({...fe,specialization:J.target.value})),className:"text-center text-lg"}):g.specialization}),e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g.totalReviews||0}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avaliações"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g.rating||"0.0"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nota"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["R$ ",parseFloat(g.hourlyRate||"0").toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"/Hora"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Zs,{variant:g.available?"secondary":"outline",className:`${g.available?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:g.available?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"h-3 w-3 mr-1"}),"Disponível"]}):e.jsxs(e.Fragment,{children:[e.jsx(Wa,{className:"h-3 w-3 mr-1"}),"Indisponível"]})})})]})})}),e.jsxs(ot,{className:"mb-6",children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx($r,{className:"h-5 w-5"}),"Informações Profissionais"]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ts,{children:"CPF/CNPJ"}),u?e.jsx(ht,{type:"text",inputMode:"numeric",autoComplete:"off",spellCheck:!1,placeholder:"CPF/CNPJ",value:S.taxpayerId,onChange:J=>P(fe=>({...fe,taxpayerId:J.target.value})),className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(S.taxpayerId||j?.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"").trim()||"Não informado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ts,{children:"Categoria"}),u?e.jsxs(nc,{value:S.category,onValueChange:J=>P(fe=>({...fe,category:J})),children:[e.jsx(_l,{className:"bg-white dark:bg-gray-800",children:e.jsx(ac,{placeholder:"Selecione a categoria"})}),e.jsx(Sl,{children:e.jsx(_o,{value:"acompanhante_hospitalar",children:"Acompanhante Hospitalar"})})]}):e.jsx("p",{className:"font-medium",children:ie(g.category)})]}),e.jsxs("div",{children:[e.jsx(Ts,{children:"Subcategoria"}),u?e.jsxs(nc,{value:S.subCategory,onValueChange:J=>P(fe=>({...fe,subCategory:J})),children:[e.jsx(_l,{className:"bg-white dark:bg-gray-800",children:e.jsx(ac,{placeholder:"Selecione a subcategoria"})}),e.jsxs(Sl,{children:[e.jsx(_o,{value:"companhia_apoio_emocional",children:"Companhia e Apoio Emocional"}),e.jsx(_o,{value:"acompanhamento_hospitalar",children:"Acompanhamento Hospitalar"})]})]}):e.jsx("p",{className:"font-medium",children:Ne(g.subCategory)})]})]}),e.jsxs("div",{children:[e.jsx(Ts,{children:"Descrição"}),u?e.jsx(ea,{value:S.description,onChange:J=>P(fe=>({...fe,description:J.target.value})),placeholder:"Descreva seus serviços...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.description})]}),e.jsxs("div",{children:[e.jsx(Ts,{children:"Experiência"}),u?e.jsx(ea,{value:S.experience,onChange:J=>P(fe=>({...fe,experience:J.target.value})),placeholder:"Descreva sua experiência...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.experience||"Não informado"})]}),e.jsxs("div",{children:[e.jsx(Ts,{children:"Certificações"}),u?e.jsx(ea,{value:S.certifications,onChange:J=>P(fe=>({...fe,certifications:J.target.value})),placeholder:"Liste suas certificações...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.certifications||"Não informado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ts,{children:"Valor por Hora (R$)"}),u?e.jsx(ht,{type:"number",value:S.hourlyRate,onChange:J=>P(fe=>({...fe,hourlyRate:J.target.value})),placeholder:"0.00"}):e.jsxs("p",{className:"font-medium",children:["R$ ",parseFloat(g.hourlyRate||"0").toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(Ts,{children:"Localização"}),u?e.jsx(ht,{value:S.location,onChange:J=>P(fe=>({...fe,location:J.target.value})),placeholder:"Sua localização"}):e.jsx("p",{className:"font-medium",children:g.location||"Não informado"})]})]})]})]}),e.jsxs(ot,{className:"mb-6",children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(ec,{className:"h-5 w-5"}),"Informações de Contato"]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ec,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),u?e.jsx(ht,{type:"email",value:S.email,onChange:J=>P(fe=>({...fe,email:J.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(S.email||j?.email||"").trim()||"Não informado"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(zi,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Telefone"}),u?e.jsx(ht,{value:S.phone,onChange:J=>P(fe=>({...fe,phone:J.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(S.phone||j?.phone||"").trim()||"Não informado"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ss,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Endereço"}),u?e.jsx(ht,{value:S.location,onChange:J=>P(fe=>({...fe,location:J.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(S.location||g.location||"").trim()||"Não informado"})]})]})]})]}),e.jsx(ot,{className:`mb-6 ${oe===3?"border-green-100 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20":"border-yellow-100 bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20"}`,children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${oe===3?"bg-green-500":"bg-yellow-500"} rounded-full flex items-center justify-center shadow-lg`,children:e.jsx(oi,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:oe===3?"Conta Verificada":"Verificação em andamento"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:oe===3?"Todos os dados foram validados":`Complete ${oe}/3 etapas para verificar sua conta`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ne?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Email"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Telefone"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${pe?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"CPF/CNPJ"})]})]})]}),e.jsx(Zs,{className:`${oe===3?"bg-green-500":"bg-yellow-500"} text-white shadow-md hover:opacity-90 transition-opacity`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg",children:[oe,"/3"]}),e.jsx("span",{children:oe===3?"Verificado":"Pendente"})]})})]})})}),e.jsx(ot,{className:"mb-6 border-red-100 bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(vl,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Sair da Conta"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Encerre sua sessão e saia do aplicativo"})]})]}),e.jsxs(Te,{onClick:ee,variant:"destructive",className:"bg-red-500 hover:bg-red-600 text-white shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(vl,{className:"h-4 w-4 mr-2"}),"Sair"]})]})})})]})]})})})}function d4(){const{user:s}=cr(),{toast:t}=ks();qs();const[r,a]=_.useState([]),[i,o]=_.useState(!0),[c,h]=_.useState(""),[u,m]=_.useState("all");_.useEffect(()=>{(async()=>{if(s)try{o(!0);const P=await fetch(`${st()}/api/professionals/${s.id}/proposals`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(P.ok){const B=await P.json();a(B)}else console.error("Erro ao buscar propostas:",P.status),t({title:"Erro",description:"Não foi possível carregar suas propostas",variant:"destructive"})}catch(P){console.error("Erro ao buscar propostas:",P),t({title:"Erro",description:"Erro ao carregar propostas",variant:"destructive"})}finally{o(!1)}})()},[s,t]);const x=r.filter(S=>{const P=S.serviceRequest.serviceType.toLowerCase().includes(c.toLowerCase())||S.serviceRequest.clientName.toLowerCase().includes(c.toLowerCase())||S.serviceRequest.description.toLowerCase().includes(c.toLowerCase()),B=u==="all"||S.status===u;return P&&B}),v=S=>{switch(S){case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},b=S=>{switch(S){case"accepted":return"Aceita";case"rejected":return"Rejeitada";case"completed":return"Concluída";case"pending":return"Pendente";default:return"Desconhecido"}},g=S=>{switch(S){case"accepted":return e.jsx(Xt,{className:"h-4 w-4"});case"rejected":return e.jsx(Qn,{className:"h-4 w-4"});case"completed":return e.jsx(Xt,{className:"h-4 w-4"});case"pending":return e.jsx(Qs,{className:"h-4 w-4"});default:return e.jsx(Qs,{className:"h-4 w-4"})}},k=S=>new Date(S).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),j=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(S)),T=async S=>{if(s)try{const P=await fetch(`${st()}/api/service/${S.serviceRequestId}/complete`,{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({notes:"Serviço concluído com sucesso"})});if(P.ok){const B=await P.json(),U=B.hasPendingPayment?` O pagamento de R$ ${B.paymentStatus==="authorized"?"está retido e ":""}será liberado quando o cliente confirmar.`:"";t({title:"Sucesso!",description:`Serviço marcado como concluído. Aguardando confirmação do cliente.${U}`,duration:5e3}),window.location.reload()}else{const B=await P.json();t({title:"Erro",description:B.error||"Erro ao confirmar conclusão do serviço",variant:"destructive"})}}catch(P){console.error("Erro ao confirmar conclusão:",P),t({title:"Erro",description:"Erro ao confirmar conclusão do serviço",variant:"destructive"})}};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-yellow-500"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando suas propostas..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{href:"/provider-dashboard",children:e.jsx(Te,{variant:"ghost",size:"sm",children:e.jsx($s,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Minhas Propostas"})]})}),e.jsxs("div",{className:"p-4 space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(ht,{placeholder:"Buscar por serviço, cliente ou descrição...",value:c,onChange:S=>h(S.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Te,{variant:u==="all"?"default":"outline",size:"sm",onClick:()=>m("all"),children:"Todas"}),e.jsx(Te,{variant:u==="pending"?"default":"outline",size:"sm",onClick:()=>m("pending"),children:"Pendentes"}),e.jsx(Te,{variant:u==="accepted"?"default":"outline",size:"sm",onClick:()=>m("accepted"),children:"Aceitas"}),e.jsx(Te,{variant:u==="rejected"?"default":"outline",size:"sm",onClick:()=>m("rejected"),children:"Rejeitadas"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Propostas"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),e.jsx(qa,{className:"h-6 w-6 text-blue-600"})]})})}),e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(S=>S.status==="pending").length})]}),e.jsx(Qs,{className:"h-6 w-6 text-yellow-600"})]})})}),e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aceitas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(S=>S.status==="accepted").length})]}),e.jsx(Xt,{className:"h-6 w-6 text-green-600"})]})})}),e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Concluídas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.filter(S=>S.status==="completed").length})]}),e.jsx(Xt,{className:"h-6 w-6 text-blue-600"})]})})})]}),e.jsx("div",{className:"space-y-4",children:x.length===0?e.jsx(ot,{children:e.jsxs(lt,{className:"p-8 text-center",children:[e.jsx(qa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:c||u!=="all"?"Nenhuma proposta encontrada":"Nenhuma proposta ainda"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:c||u!=="all"?"Tente ajustar os filtros de busca":"Você ainda não fez nenhuma proposta. Explore os serviços disponíveis!"}),!c&&u==="all"&&e.jsx(Os,{href:"/provider-dashboard",children:e.jsx(Te,{className:"mt-4",children:"Explorar Serviços"})})]})}):x.map(S=>e.jsx(ot,{className:"hover:shadow-md transition-shadow",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S.serviceRequest.serviceType}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:S.serviceRequest.description})]}),e.jsx(Zs,{className:v(S.status),children:e.jsxs("div",{className:"flex items-center gap-1",children:[g(S.status),b(S.status)]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[S.serviceRequest.clientProfileImage?e.jsx("img",{src:`${st()}${S.serviceRequest.clientProfileImage}`,alt:S.serviceRequest.clientName,className:"w-10 h-10 rounded-full object-cover",onError:P=>{const B=P.target;B.style.display="none";const U=B.parentElement;U&&(U.innerHTML=`
                                  <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-bold">
                                      ${S.serviceRequest.clientName.charAt(0).toUpperCase()}
                                    </span>
                                  </div>
                                `)}}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:S.serviceRequest.clientName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.serviceRequest.clientName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Cliente desde ",new Date(S.serviceRequest.clientCreatedAt).getFullYear()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(sn,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor Total"}),e.jsx("p",{className:"font-semibold text-green-600",children:j(S.serviceRequest.budget)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Qs,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Horário"}),e.jsx("p",{className:"font-semibold text-purple-600",children:S.serviceRequest.scheduledTime||"Não definido"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Início"}),e.jsx("p",{className:"font-semibold text-blue-600 text-xs",children:S.serviceRequest.scheduledDate?new Date(S.serviceRequest.scheduledDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):"-"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-5 w-5 text-indigo-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Fim"}),e.jsx("p",{className:"font-semibold text-indigo-600 text-xs",children:S.serviceRequest.scheduledDate?(()=>{const P=new Date(S.serviceRequest.scheduledDate),B=new Date(P),U=S.serviceRequest.numberOfDays||1;return B.setDate(P.getDate()+(U-1)),B.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})():"-"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-5 w-5 text-teal-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Período"}),e.jsxs("p",{className:"font-semibold text-teal-600",children:[S.serviceRequest.numberOfDays||1," ",(S.serviceRequest.numberOfDays||1)===1?"dia":"dias"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sn,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Sua Proposta:"})]}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:j(S.proposedPrice)})]}),S.serviceRequest.dailyRate&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:["Valor diário do cliente: ",j(S.serviceRequest.dailyRate),"/dia"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{children:S.serviceRequest.address})]}),S.message&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sua mensagem:"})," ",S.message]})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Proposta enviada em ",k(S.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col gap-2 lg:flex-shrink-0",children:[S.status==="accepted"&&S.serviceRequest?.status!=="awaiting_confirmation"&&e.jsxs(Te,{variant:"default",size:"sm",onClick:()=>T(S),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Confirmar Conclusão"]}),S.status==="accepted"&&S.serviceRequest?.status==="awaiting_confirmation"&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Serviço Concluído - Aguardando Confirmação do Cliente"})]})})]})]})})},S.id))})]})]})}var u4="Separator",Pm="horizontal",h4=["horizontal","vertical"],ov=_.forwardRef((s,t)=>{const{decorative:r,orientation:a=Pm,...i}=s,o=f4(a)?a:Pm,h=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(ts.div,{"data-orientation":o,...h,...i,ref:t})});ov.displayName=u4;function f4(s){return h4.includes(s)}var lv=ov;const cv=_.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...a},i)=>e.jsx(lv,{ref:i,decorative:r,orientation:t,className:ut("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));cv.displayName=lv.displayName;const m4=oc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),bo=_.forwardRef(({className:s,variant:t,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:ut(m4({variant:t}),s),...r}));bo.displayName="Alert";const p4=_.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:ut("mb-1 font-medium leading-none tracking-tight",s),...t}));p4.displayName="AlertTitle";const wo=_.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("text-sm [&_p]:leading-relaxed",s),...t}));wo.displayName="AlertDescription";function g4(){const[s,t]=_.useState(null),[r,a]=_.useState(!0),[i,o]=_.useState(!1),[c,h]=_.useState(null),[u,m]=_.useState(!1),{toast:x}=ks(),[,v]=qs();_.useEffect(()=>{const T=new URLSearchParams(window.location.search);if(T.get("stripe_setup")==="success"){console.log("🔄 Retornando do Stripe, verificando status..."),m(!0),x({title:"🔄 Verificando cadastro...",description:"Aguarde enquanto confirmamos sua conta Stripe."}),window.history.replaceState({},"",window.location.pathname);let P=0;const B=5,U=async()=>{P++,console.log(`📊 Tentativa ${P} de ${B} - Verificando status Stripe...`),await b();const Q=await fetch("/api/stripe/connect/account-status",{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});if(Q.ok){const ge=await Q.json();if(ge.connected&&ge.chargesEnabled){console.log("✅ Conta ativa confirmada!"),m(!1),x({title:"✅ Stripe conectado com sucesso!",description:"Sua conta foi configurada e você já pode receber pagamentos."}),setTimeout(()=>{console.log("🏠 Redirecionando para dashboard..."),v("/provider-dashboard")},2e3);return}if(ge.connected&&!ge.chargesEnabled){if(console.log("⏳ Conta conectada mas ainda processando..."),P<B){const ae=P*2e3;console.log(`⏰ Aguardando ${ae/1e3}s antes da próxima verificação...`),setTimeout(U,ae)}else m(!1),x({title:"✅ Cadastro registrado!",description:"Seu cadastro foi registrado no Stripe. Redirecionando para o dashboard..."}),setTimeout(()=>{console.log("🏠 Redirecionando para dashboard (processando)..."),v("/provider-dashboard")},2e3);return}}if(P<B){const ge=P*2e3;setTimeout(U,ge)}else m(!1),x({title:"✅ Cadastro enviado!",description:"Seu cadastro foi enviado ao Stripe. Redirecionando..."}),setTimeout(()=>{console.log("🏠 Redirecionando para dashboard (timeout)..."),v("/provider-dashboard")},2e3)};setTimeout(U,3e3)}else T.get("stripe_setup")==="refresh"&&(x({title:"Link expirado",description:"Vamos criar um novo link de configuração para você.",variant:"destructive"}),window.history.replaceState({},"",window.location.pathname)),b()},[]);const b=async()=>{try{a(!0),h(null);const T=await fetch("/api/stripe/connect/account-status",{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});if(!T.ok)throw new Error("Erro ao verificar status");const S=await T.json();t(S)}catch(T){console.error("Erro ao verificar status:",T),h("Erro ao carregar informações do Stripe"),x({title:"Erro",description:"Não foi possível carregar o status da conta Stripe.",variant:"destructive"})}finally{a(!1)}},g=async()=>{try{o(!0),h(null);const T=await fetch("/api/stripe/connect/create-account",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!T.ok){const P=await T.json();throw new Error(P.error||"Erro ao conectar Stripe")}const S=await T.json();window.location.href=S.onboardingUrl}catch(T){console.error("Erro ao iniciar onboarding:",T),h(T instanceof Error?T.message:"Erro ao conectar Stripe"),x({title:"Erro",description:T instanceof Error?T.message:"Erro ao conectar Stripe",variant:"destructive"}),o(!1)}},k=async()=>{try{o(!0),h(null);const T=await fetch("/api/stripe/connect/refresh-onboarding",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!T.ok)throw new Error("Erro ao criar novo link");const S=await T.json();window.location.href=S.onboardingUrl}catch(T){console.error("Erro ao refresh:",T),h("Erro ao criar novo link de configuração"),x({title:"Erro",description:"Erro ao criar novo link de configuração",variant:"destructive"}),o(!1)}},j=async()=>{try{o(!0);const T=await fetch("/api/stripe/connect/dashboard-link",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!T.ok)throw new Error("Erro ao abrir dashboard");const S=await T.json();window.open(S.dashboardUrl,"_blank")}catch(T){console.error("Erro ao abrir dashboard:",T),h("Erro ao abrir dashboard do Stripe"),x({title:"Erro",description:"Erro ao abrir dashboard do Stripe",variant:"destructive"})}finally{o(!1)}};return r||u?e.jsxs(ot,{children:[e.jsxs(Wt,{children:[e.jsx(es,{children:"Configuração de Pagamentos"}),e.jsx(rd,{children:u?"Verificando seu cadastro no Stripe...":"Carregando informações..."})]}),e.jsxs(lt,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin text-blue-500 mb-4"}),u&&e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"🔄 Confirmando seu cadastro com o Stripe..."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Isso pode levar alguns segundos"})]})]})]}):e.jsxs(ot,{children:[e.jsxs(Wt,{children:[e.jsx(es,{children:"Configuração de Pagamentos - Stripe"}),e.jsx(rd,{children:"Conecte sua conta Stripe para receber pagamentos automaticamente"})]}),e.jsxs(lt,{className:"space-y-4",children:[c&&e.jsxs(bo,{variant:"destructive",children:[e.jsx(Qn,{className:"h-4 w-4"}),e.jsx(wo,{children:c})]}),!s?.connected&&e.jsxs(bo,{className:"bg-yellow-50 border-yellow-200",children:[e.jsx(Jc,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(wo,{className:"text-yellow-800",children:[e.jsx("strong",{children:"Configure sua conta para receber pagamentos"}),e.jsx("p",{className:"text-sm mt-2",children:"Você precisa conectar uma conta Stripe para poder receber pagamentos dos seus serviços. É rápido, seguro e gratuito!"})]})]}),s?.connected&&s?.needsOnboarding&&e.jsxs(bo,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Jc,{className:"h-4 w-4 text-blue-600"}),e.jsxs(wo,{className:"text-blue-800",children:[e.jsx("strong",{children:"Complete sua configuração"}),e.jsx("p",{className:"text-sm mt-2",children:"Você começou a configuração mas ainda precisa completar algumas informações."})]})]}),s?.connected&&!s?.needsOnboarding&&s?.chargesEnabled&&e.jsxs(bo,{className:"bg-green-50 border-green-200",children:[e.jsx(Xt,{className:"h-4 w-4 text-green-600"}),e.jsxs(wo,{className:"text-green-800",children:[e.jsx("strong",{children:"✅ Conta Stripe Conectada e Ativa!"}),e.jsx("p",{className:"text-sm mt-2",children:"Sua conta está configurada e você pode receber pagamentos. Os valores serão depositados automaticamente em sua conta."})]})]}),s?.connected&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-2 bg-gray-50",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Status da Conta:"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.detailsSubmitted?e.jsx(Xt,{className:"h-4 w-4 text-green-600"}):e.jsx(Qn,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{children:"Informações enviadas"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.chargesEnabled?e.jsx(Xt,{className:"h-4 w-4 text-green-600"}):e.jsx(Qn,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{children:"Pode receber pagamentos"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.payoutsEnabled?e.jsx(Xt,{className:"h-4 w-4 text-green-600"}):e.jsx(Qn,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{children:"Pode fazer saques"})]}),s.accountId&&e.jsxs("div",{className:"text-xs text-gray-500 mt-3 pt-3 border-t font-mono",children:["ID: ",s.accountId]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[!s?.connected&&e.jsx(Te,{onClick:g,disabled:i,className:"flex-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}),"Conectando..."]}):"Conectar Stripe"}),s?.connected&&s?.needsOnboarding&&e.jsx(Te,{onClick:k,disabled:i,className:"flex-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}),"Carregando..."]}):"Completar Configuração"}),s?.connected&&s?.chargesEnabled&&e.jsxs(Te,{onClick:j,disabled:i,variant:"outline",className:"flex-1",children:[e.jsx(K2,{className:"h-4 w-4 mr-2"}),"Abrir Dashboard Stripe"]}),e.jsx(Te,{onClick:b,disabled:r,variant:"outline",children:"Atualizar Status"})]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-4 border-t space-y-1",children:[e.jsx("p",{children:"• Seus dados são protegidos pelo Stripe"}),e.jsx("p",{children:"• Não cobramos taxas adicionais pela conexão"}),e.jsx("p",{children:"• Você pode desconectar a qualquer momento"}),e.jsx("p",{children:"• Os pagamentos são depositados automaticamente"})]})]})]})}function x4(){const{theme:s,setTheme:t}=Lp(),{logout:r}=cr(),{toast:a}=ks(),[i,o]=_.useState(!0),[c,h]=_.useState(!1),[u,m]=_.useState({name:"",email:"",phone:"",specialization:""}),[x,v]=_.useState({isAvailable:!0,workStartTime:"08:00",workEndTime:"18:00"}),[b,g]=_.useState({newOrders:!0,messages:!0,payments:!0,reminders:!0,marketing:!1}),[k,j]=_.useState({bankAccount:"",pixKey:""});_.useEffect(()=>{T()},[]);const T=async()=>{try{o(!0);const U=await fetch(`${st()}/api/provider/settings`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(U.ok){const Q=await U.json();m(Q.profile),v(Q.availability),g(Q.notifications),j(Q.payments)}else console.error("Erro ao buscar configurações:",U.statusText),a({title:"Erro",description:"Não foi possível carregar as configurações",variant:"destructive"})}catch(U){console.error("Erro ao buscar configurações:",U),a({title:"Erro",description:"Erro de conexão ao carregar configurações",variant:"destructive"})}finally{o(!1)}},S=async()=>{try{h(!0);const U=await fetch(`${st()}/api/provider/settings`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:u,availability:x,notifications:b,payments:k})});if(U.ok)a({title:"Sucesso",description:"Configurações salvas com sucesso!"});else{const Q=await U.json();a({title:"Erro",description:Q.message||"Erro ao salvar configurações",variant:"destructive"})}}catch(U){console.error("Erro ao salvar configurações:",U),a({title:"Erro",description:"Erro de conexão ao salvar configurações",variant:"destructive"})}finally{h(!1)}},P=()=>{r(),window.location.href="/"},B=(U,Q)=>{g(ge=>({...ge,[U]:Q}))};return e.jsx(Ao,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{variant:"ghost",size:"sm",className:"lg:hidden p-2",onClick:()=>window.history.back(),children:e.jsx($s,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gerencie suas preferências"})]})]})})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx($r,{className:"h-5 w-5"}),"Perfil"]})}),e.jsx(lt,{className:"space-y-4",children:i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"h-8 w-8 text-gray-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando configurações..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"name",children:"Nome Completo"}),e.jsx(ht,{id:"name",value:u.name,onChange:U=>m(Q=>({...Q,name:U.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"email",children:"E-mail"}),e.jsx(ht,{id:"email",type:"email",value:u.email,onChange:U=>m(Q=>({...Q,email:U.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"phone",children:"Telefone"}),e.jsx(ht,{id:"phone",value:u.phone,onChange:U=>m(Q=>({...Q,phone:U.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Ts,{htmlFor:"specialization",children:"Especialização"}),e.jsx(ht,{id:"specialization",value:u.specialization,onChange:U=>m(Q=>({...Q,specialization:U.target.value}))})]})]}),e.jsx(Te,{className:"w-full",onClick:S,disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):"Salvar Alterações"})]})})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-5 w-5"}),"Disponibilidade"]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ts,{className:"text-base font-medium",children:"Disponível para Serviços"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receber solicitações de novos clientes"})]}),e.jsx(ai,{checked:x.isAvailable,onCheckedChange:U=>v(Q=>({...Q,isAvailable:U}))})]}),e.jsx(cv,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Horário de Trabalho"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ts,{children:"Início"}),e.jsx(ht,{type:"time",value:x.workStartTime,onChange:U=>v(Q=>({...Q,workStartTime:U.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Ts,{children:"Fim"}),e.jsx(ht,{type:"time",value:x.workEndTime,onChange:U=>v(Q=>({...Q,workEndTime:U.target.value}))})]})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Ql,{className:"h-5 w-5"}),"Notificações"]})}),e.jsx(lt,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ts,{className:"text-base font-medium",children:"Novos Pedidos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Notificar quando receber novas solicitações"})]}),e.jsx(ai,{checked:b.newOrders,onCheckedChange:U=>B("newOrders",U)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ts,{className:"text-base font-medium",children:"Mensagens"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Notificar novas mensagens dos clientes"})]}),e.jsx(ai,{checked:b.messages,onCheckedChange:U=>B("messages",U)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ts,{className:"text-base font-medium",children:"Pagamentos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Notificar quando receber pagamentos"})]}),e.jsx(ai,{checked:b.payments,onCheckedChange:U=>B("payments",U)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ts,{className:"text-base font-medium",children:"Lembretes"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Lembretes de consultas agendadas"})]}),e.jsx(ai,{checked:b.reminders,onCheckedChange:U=>B("reminders",U)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ts,{className:"text-base font-medium",children:"Marketing"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Promoções e novidades da plataforma"})]}),e.jsx(ai,{checked:b.marketing,onCheckedChange:U=>B("marketing",U)})]})]})})]}),e.jsx(g4,{}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(oi,{className:"h-5 w-5"}),"Segurança"]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs(Te,{variant:"outline",className:"w-full justify-start",children:[e.jsx(tg,{className:"h-4 w-4 mr-2"}),"Alterar Senha"]}),e.jsxs(Te,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ey,{className:"h-4 w-4 mr-2"}),"Autenticação em Duas Etapas"]})]})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(bh,{className:"h-5 w-5"}),"Aparência"]})}),e.jsx(lt,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ts,{className:"text-base font-medium",children:"Modo Escuro"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alternar entre tema claro e escuro"})]}),e.jsx(ai,{checked:s==="dark",onCheckedChange:U=>t(U?"dark":"light")})]})})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(Xc,{className:"h-5 w-5"}),"Suporte"]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs(Te,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Central de Ajuda"]}),e.jsxs(Te,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ec,{className:"h-4 w-4 mr-2"}),"Contatar Suporte"]}),e.jsxs(Te,{variant:"outline",className:"w-full justify-start",children:[e.jsx(vh,{className:"h-4 w-4 mr-2"}),"Sobre o App"]})]})]}),e.jsx(ot,{children:e.jsx(lt,{className:"pt-6",children:e.jsxs(Te,{variant:"destructive",className:"w-full",onClick:P,children:[e.jsx(vl,{className:"h-4 w-4 mr-2"}),"Sair da Conta"]})})})]})]})})}function v4(){const t=bg()?.id;cr();const{toast:r}=ks(),[a,i]=_.useState(""),[o,c]=_.useState(""),[h,u]=_.useState(!1),[m,x]=_.useState(!0),[v,b]=_.useState(null),[g,k]=_.useState(null),[j,T]=_.useState(!1),[S,P]=_.useState([]),[B,U]=_.useState(!1),[Q,ge]=_.useState(!1),[ae,ee]=_.useState(""),[K,ue]=_.useState(!1),[I,q]=_.useState(!1),[ne,Y]=_.useState(""),[he,pe]=_.useState(!1),[oe,ie]=_.useState({id:parseInt(t||"0"),clientName:"",clientAvatar:"",clientProfileImage:"",serviceType:"",location:"",distance:0,urgency:"low",budget:0,description:"",timePosted:"",responses:0,preferredTime:"",scheduledTime:"",clientRating:0,previousServices:0,additionalDetails:"",additionalInfo:"",address:"",scheduledDate:"",status:"open",clientCreatedAt:""}),Ne=(X,le,ce,xe)=>{const Me=(ce-X)*Math.PI/180,De=(xe-le)*Math.PI/180,Ye=Math.sin(Me/2)*Math.sin(Me/2)+Math.cos(X*Math.PI/180)*Math.cos(ce*Math.PI/180)*Math.sin(De/2)*Math.sin(De/2);return 6371*(2*Math.atan2(Math.sqrt(Ye),Math.sqrt(1-Ye)))},J=()=>new Promise(X=>{if(!navigator.geolocation){X(null);return}navigator.geolocation.getCurrentPosition(le=>{const{latitude:ce,longitude:xe}=le.coords;X([ce,xe])},le=>{X(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),fe=async X=>{try{const le=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(X)}&limit=1&countrycodes=br`,{method:"GET",headers:{Accept:"application/json","User-Agent":"LifeBee-App/1.0"}});if(!le.ok)return null;const ce=await le.json();if(ce&&ce.length>0){const{lat:xe,lon:je}=ce[0];return[parseFloat(xe),parseFloat(je)]}return null}catch{return null}};_.useEffect(()=>{(async()=>{if(!t){b("ID do serviço não fornecido"),x(!1);return}try{x(!0),b(null);const le=await fetch(`${st()}/api/service-requests/${t}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!le.ok)throw new Error(`Erro ao carregar serviço: ${le.status}`);const ce=await le.json(),xe={id:ce.id,clientName:ce.clientName||"Cliente",clientAvatar:ce.clientProfileImage||"",clientProfileImage:ce.clientProfileImage||"",serviceType:ce.serviceType||"Serviço",location:ce.address||"",distance:0,urgency:ce.urgency||"low",budget:ce.budget||0,description:ce.description||"Descrição não disponível",timePosted:ce.createdAt||"",responses:ce.responses||0,preferredTime:ce.scheduledTime||"Não definido",scheduledTime:ce.scheduledTime||"Não definido",clientRating:5,previousServices:0,additionalDetails:ce.description||"",additionalInfo:ce.description||"",address:ce.address||"Endereço não informado",scheduledDate:ce.scheduledDate||"",status:ce.status||"open",clientCreatedAt:ce.clientCreatedAt||""};if(ie(xe),xe.address&&xe.address!=="Endereço não informado"){T(!0);try{const je=await J();k(je);const Me=await fe(xe.address);if(Me&&je){const De=Ne(je[0],je[1],Me[0],Me[1]);ie(Ye=>({...Ye,distance:Math.round(De*10)/10}))}else ie(De=>({...De,distance:-1}))}catch{ie(Me=>({...Me,distance:-1}))}finally{T(!1)}}}catch(le){console.error("Erro ao carregar serviço:",le),b(le instanceof Error?le.message:"Erro desconhecido"),r({title:"Erro",description:"Não foi possível carregar os detalhes do serviço",variant:"destructive"})}finally{x(!1)}})()},[t,r]),_.useEffect(()=>{(async()=>{if(t)try{U(!0);const le=await fetch(`${st()}/api/service-requests/${t}/offers`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(le.ok){const ce=await le.json();P(ce)}else console.error("Erro ao buscar propostas:",le.status)}catch(le){console.error("Erro ao buscar propostas:",le)}finally{U(!1)}})()},[t]);const R=async()=>{if(a.trim()&&o)try{const X=await fetch(`${st()}/api/service-requests/${t}/offers`,{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({proposedPrice:parseFloat(o),estimatedTime:"A combinar",message:a})});if(X.ok){const le=await X.json();r({title:"Sucesso!",description:"Sua proposta foi enviada com sucesso"});const ce=await fetch(`${st()}/api/service-requests/${t}/offers`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ce.ok){const xe=await ce.json();P(xe)}u(!0)}else{const le=await X.json();r({title:"Erro",description:le.message||"Não foi possível enviar a proposta",variant:"destructive"})}}catch{r({title:"Erro",description:"Não foi possível enviar a proposta",variant:"destructive"})}},E=async()=>{if(!ae.trim()){r({title:"Erro",description:"Digite uma mensagem antes de enviar",variant:"destructive"});return}ue(!0);try{await new Promise(X=>setTimeout(X,1e3)),r({title:"Sucesso",description:"Mensagem enviada com sucesso!"}),ee(""),ge(!1)}catch(X){console.error("Erro ao enviar mensagem:",X),r({title:"Erro",description:"Erro ao enviar mensagem. Tente novamente.",variant:"destructive"})}finally{ue(!1)}},D=async()=>{if(!ne.trim()){r({title:"Erro",description:"Digite uma mensagem antes de enviar",variant:"destructive"});return}pe(!0);try{await new Promise(X=>setTimeout(X,1e3)),r({title:"Sucesso",description:"Mensagem enviada com sucesso!"}),Y(""),q(!1)}catch(X){console.error("Erro ao enviar mensagem:",X),r({title:"Erro",description:"Erro ao enviar mensagem. Tente novamente.",variant:"destructive"})}finally{pe(!1)}},W=X=>{switch(X){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},se=X=>{const le=new Date(X),xe=Math.floor((new Date().getTime()-le.getTime())/(1e3*60));return xe<1?"agora mesmo":xe<60?`há ${xe} min`:xe<1440?`há ${Math.floor(xe/60)}h`:`há ${Math.floor(xe/1440)} dias`};return m?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-yellow-500"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando detalhes do serviço..."})]})}):v?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx(Wa,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Erro ao carregar serviço"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:v}),e.jsx(Os,{href:"/provider-dashboard",children:e.jsxs(Te,{children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),"Voltar ao Dashboard"]})})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{href:"/provider-dashboard",children:e.jsx(Te,{variant:"ghost",size:"sm",children:e.jsx($s,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Detalhes do Serviço"})]})}),e.jsx("div",{className:"p-3 sm:p-4 space-y-4 sm:space-y-6 max-w-4xl mx-auto",children:h?e.jsx(ot,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:e.jsxs(lt,{className:"p-4 sm:p-6 text-center",children:[e.jsx(Xt,{className:"h-12 w-12 sm:h-16 sm:w-16 text-green-600 mx-auto mb-3 sm:mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-green-800 dark:text-green-200 mb-2",children:"Oferta Enviada com Sucesso!"}),e.jsxs("p",{className:"text-sm sm:text-base text-green-700 dark:text-green-300 mb-4",children:["Sua proposta foi enviada para ",oe.clientName,". Você receberá uma notificação quando ela responder."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(Os,{href:"/provider-dashboard",children:e.jsx(Te,{variant:"outline",className:"h-10 sm:h-11 text-sm sm:text-base",children:"Voltar ao Dashboard"})}),e.jsxs(Nl,{open:Q,onOpenChange:ge,children:[e.jsx(Lu,{asChild:!0,children:e.jsxs(Te,{className:"h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(ba,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})}),e.jsxs(Co,{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700",children:[e.jsx(Po,{children:e.jsxs(Lo,{className:"text-lg sm:text-xl",children:["Mensagem para ",oe.clientName]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ea,{placeholder:"Digite uma mensagem adicional...",rows:4,className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]",value:ae,onChange:X=>ee(X.target.value)}),e.jsx(Te,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",onClick:E,disabled:K,children:K?e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})})]})]})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[oe.clientProfileImage?e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${st()}${oe.clientProfileImage}`,alt:oe.clientName||"Cliente",className:"w-full h-full object-cover",onError:X=>{const le=X.target;le.style.display="none";const ce=le.parentElement;ce&&(ce.innerHTML=`
                                <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                  <span class="text-white text-xl font-bold">
                                    ${oe.clientName?oe.clientName.charAt(0).toUpperCase():"C"}
                                  </span>
                                </div>
                              `)}})}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:oe.clientName?oe.clientName.charAt(0).toUpperCase():"C"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:oe.clientName||"Cliente"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(gn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:oe.clientRating||"5.0"}),e.jsx("span",{className:"text-gray-500",children:"•"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[oe.previousServices||"0"," serviços"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente desde ",oe.clientCreatedAt?new Date(oe.clientCreatedAt).getFullYear():"2024"]})]})]}),e.jsx(Zs,{className:W(oe.urgency),children:oe.status==="open"?"Aberta":oe.status==="in_progress"?"Em Andamento":oe.status==="completed"?"Concluída":"Normal"})]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-primary mb-2",children:oe.serviceType||"Serviço Solicitado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:oe.description||"Descrição do serviço não disponível"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(sn,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor Total"}),e.jsxs("div",{className:"font-semibold text-green-600",children:["R$ ",oe.budget?typeof oe.budget=="string"?parseFloat(oe.budget).toFixed(2):oe.budget.toFixed(2):"0,00"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Qs,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Horário"}),e.jsx("div",{className:"font-semibold text-purple-600",children:oe.preferredTime||oe.scheduledTime||"Não definido"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Início"}),e.jsx("div",{className:"font-semibold text-blue-600 text-xs",children:oe.scheduledDate?new Date(oe.scheduledDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):"-"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-5 w-5 text-indigo-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Fim"}),e.jsx("div",{className:"font-semibold text-indigo-600 text-xs",children:oe.scheduledDate?(()=>{const X=new Date(oe.scheduledDate),le=new Date(X),ce=oe.numberOfDays||1;return le.setDate(X.getDate()+(ce-1)),le.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})():"-"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-5 w-5 text-teal-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Período"}),e.jsxs("div",{className:"font-semibold text-teal-600",children:[oe.numberOfDays||1," ",(oe.numberOfDays||1)===1?"dia":"dias"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-500"}),"Endereço"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:oe.address||"Endereço não informado"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4 text-gray-500"}),"Data"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:oe.scheduledDate?new Date(oe.scheduledDate).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Data não definida"})]}),oe.numberOfDays&&oe.numberOfDays>1&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4 text-gray-500"}),"Período do Serviço"]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Duração:"}),e.jsxs("span",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:[oe.numberOfDays," ",oe.numberOfDays===1?"dia":"dias"]})]}),oe.dailyRate&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor por dia:"}),e.jsxs("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:["R$ ",typeof oe.dailyRate=="string"?parseFloat(oe.dailyRate).toFixed(2):(oe.dailyRate||0).toFixed(2)]})]}),e.jsxs("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-700 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Valor Total:"}),e.jsxs("span",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:["R$ ",oe.budget?typeof oe.budget=="string"?parseFloat(oe.budget).toFixed(2):oe.budget.toFixed(2):"0,00"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:[oe.numberOfDays," ",oe.numberOfDays===1?"dia":"dias"," × R$ ",oe.dailyRate?typeof oe.dailyRate=="string"?parseFloat(oe.dailyRate).toFixed(2):(oe.dailyRate||0).toFixed(2):"0,00","/dia = R$ ",oe.budget?typeof oe.budget=="string"?parseFloat(oe.budget).toFixed(2):oe.budget.toFixed(2):"0,00"]})]})]}),oe.additionalInfo&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(qr,{className:"h-4 w-4 text-gray-500"}),"Detalhes Adicionais"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:oe.additionalInfo})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(qa,{className:"h-5 w-5"}),"Fazer Proposta"]})}),e.jsxs(lt,{className:"space-y-4 p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Valor Proposto (R$)"}),e.jsx(ht,{type:"number",placeholder:"120.00",value:o,onChange:X=>c(X.target.value),className:"h-10 sm:h-11 text-sm sm:text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Mensagem da Proposta"}),e.jsx(ea,{placeholder:"Olá! Sou fisioterapeuta especializada em reabilitação respiratória pós-COVID. Tenho experiência com pacientes na sua faixa etária e posso levar equipamentos específicos para o atendimento domiciliar...",rows:4,value:a,onChange:X=>i(X.target.value),className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]"})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(Wa,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Dicas para uma boa proposta:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Demonstre sua experiência específica no tipo de serviço"}),e.jsx("li",{children:"• Mencione equipamentos ou materiais que você possui"}),e.jsx("li",{children:"• Seja claro sobre disponibilidade e tempo de resposta"}),e.jsx("li",{children:"• Ofereça um valor competitivo mas justo"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[e.jsxs(Te,{onClick:R,disabled:!a.trim()||!o,className:"flex-1 h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Enviar Proposta"]}),e.jsxs(Nl,{open:I,onOpenChange:q,children:[e.jsx(Lu,{asChild:!0,children:e.jsxs(Te,{variant:"outline",className:"h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(ba,{className:"h-4 w-4 mr-2"}),"Observações"]})}),e.jsxs(Co,{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700",children:[e.jsx(Po,{children:e.jsxs(Lo,{className:"text-lg sm:text-xl",children:["Observações para ",oe.clientName]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ea,{placeholder:"Faça uma pergunta sobre o serviço...",rows:4,className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]",value:ne,onChange:X=>Y(X.target.value)}),e.jsx(Te,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",onClick:D,disabled:he,children:he?e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})})]})]})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Outras Propostas"}),B&&e.jsx(Es,{className:"h-4 w-4 animate-spin text-gray-500"})]})}),e.jsx(lt,{children:S.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ba,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:B?"Carregando propostas...":"Nenhuma proposta ainda"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Seja o primeiro a fazer uma proposta!"})]}):e.jsx("div",{className:"space-y-3",children:S.map(X=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[X.professionalProfileImage?e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:e.jsx("img",{src:`${st()}${X.professionalProfileImage}`,alt:X.professionalName||"Profissional",className:"w-full h-full object-cover",onError:le=>{const ce=le.target;ce.style.display="none";const xe=ce.parentElement;xe&&(xe.innerHTML=`
                                       <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                                         <span class="text-white text-xs font-bold">
                                           ${X.professionalName?X.professionalName.charAt(0).toUpperCase():"P"}
                                         </span>
                                       </div>
                                     `)}})}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:X.professionalName?X.professionalName.charAt(0).toUpperCase():"P"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:X.professionalName||"Profissional"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["⭐ ",X.professionalRating||"5.0"," • ",X.professionalTotalReviews||"0"," serviços"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-sm",children:["R$ ",X.proposedPrice?parseFloat(X.proposedPrice).toFixed(2):"0,00"]}),e.jsx("p",{className:"text-xs text-gray-500",children:se(X.createdAt)})]})]},X.id))})})]})]})})]})}function y4(){console.log("Servico component rendering");const[,s]=qs(),{toast:t}=ks(),{isAuthenticated:r,isLoading:a,user:i}=cr(),[o,c]=_.useState(""),[h,u]=_.useState(""),[m,x]=_.useState(""),[v,b]=_.useState(""),[g,k]=_.useState(""),[j,T]=_.useState(""),[S,P]=_.useState(""),[B,U]=_.useState(""),[Q,ge]=_.useState(""),[ae,ee]=_.useState(""),[K,ue]=_.useState(""),[I,q]=_.useState(""),[ne,Y]=_.useState(""),[he,pe]=_.useState("1"),[oe,ie]=_.useState(""),[Ne,J]=_.useState(""),[fe,R]=_.useState(!1),[E,D]=_.useState(!1),[W,se]=_.useState(!1),X=(_e,Ie)=>{if(!_e||!Ie)return 1;const ze=new Date(_e),nt=new Date(Ie).getTime()-ze.getTime(),pt=Math.ceil(nt/(1e3*60*60*24))+1;return pt>0?pt:1};_.useEffect(()=>{if(I&&ne){const _e=X(I,ne);pe(_e.toString()),ee(I)}else I&&(ee(I),pe("1"))},[I,ne]);const le=()=>{const _e=parseInt(he)||0,Ie=parseFloat(oe)||0;return _e*Ie};_.useEffect(()=>{const _e=le();_e>0&&J(_e.toFixed(2))},[he,oe]);const ce=_e=>!!(_e&&/.+@.+\..+/.test(_e.trim())),xe=_e=>{const Ie=(_e||"").replace(/\D/g,"");return Ie.length===11&&Ie[0]!=="0"&&Ie[1]!=="0"&&Ie[2]==="9"},je=_e=>{const ze=(_e||"").replace(/\D/g,"");if(ze.length!==11||/^(\d)\1{10}$/.test(ze))return!1;const Ge=nt=>{let pt=0;for(let yt=0;yt<nt;yt++)pt+=parseInt(ze[yt],10)*(nt+1-yt);const Nt=pt*10%11;return Nt===10?0:Nt};return Ge(9)===parseInt(ze[9],10)&&Ge(10)===parseInt(ze[10],10)},Me=()=>{const _e=ce(i?.email),Ie=xe(i?.phone),ze=i?.taxpayerId,Ge=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",nt=je(ze||Ge),pt=[_e,Ie,nt].filter(Boolean).length;return{verified:pt===3,steps:pt}};if(_.useEffect(()=>{if(console.log("Auth state:",{isAuthenticated:r,isLoading:a}),!a&&!r&&(t({title:"Acesso Negado",description:"Você precisa estar logado para acessar esta página",variant:"destructive"}),s("/")),!a&&r){const{verified:_e,steps:Ie}=Me();_e||(t({title:"Verificação em andamento",description:`Conclua seu cadastro (${Ie}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile"))}},[r,a,s,t]),a)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Redirecionando para login..."})})});const De=[{value:"acompanhante_hospitalar",label:"Acompanhante Hospitalar",icon:"🏥"}],Ye=async _e=>{_e.preventDefault(),R(!0),D(!1);const Ie=sessionStorage.getItem("token");if(!Ie){t({title:"Erro",description:"Você precisa estar logado para solicitar um serviço",variant:"destructive"}),R(!1);return}try{const ze=await fetch(`${st()}/api/service-requests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify({category:o,serviceType:h,description:m,address:Be(),scheduledDate:ae,scheduledTime:K,numberOfDays:parseInt(he)||1,dailyRate:parseFloat(oe)||0,budget:Ne?parseFloat(Ne):null}),credentials:"include"});if(ze.ok){const Ge=await ze.json();D(!0),t({title:"Sucesso!",description:"Sua solicitação foi enviada com sucesso. Profissionais serão notificados."}),c(""),u(""),x(""),b(""),k(""),T(""),P(""),U(""),ge(""),ee(""),ue(""),J("")}else{const Ge=await ze.json();t({title:"Erro",description:Ge.message||"Erro ao enviar solicitação",variant:"destructive"})}}catch{t({title:"Erro",description:"Erro de conexão. Tente novamente.",variant:"destructive"})}finally{R(!1)}},G=_e=>De.find(Ie=>Ie.value===_e)?.icon||"📋",Z=async _e=>{if(_e.length===8){se(!0);try{const ze=await(await fetch(`https://viacep.com.br/ws/${_e}/json/`)).json();ze.erro?t({title:"CEP não encontrado",description:"Verifique se o CEP está correto",variant:"destructive"}):(k(ze.logradouro||""),P(ze.bairro||""),U(ze.localidade||""),ge(ze.uf||""),t({title:"Endereço encontrado!",description:"Endereço preenchido automaticamente pelo CEP",variant:"default"}))}catch(Ie){console.error("Erro ao buscar CEP:",Ie),t({title:"Erro",description:"Erro ao buscar endereço pelo CEP",variant:"destructive"})}finally{se(!1)}}},Fe=_e=>_e.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"),Be=()=>[g,j,S,B,Q].filter(Boolean).join(", ");return console.log("Rendering Servico component, auth state:",{isAuthenticated:r,isLoading:a}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col pb-24",children:[e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors mb-4",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Solicitar Serviço"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preencha os dados abaixo para solicitar um profissional"})]}),e.jsxs(ot,{className:"w-full",children:[e.jsx(Wt,{children:e.jsxs(es,{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5"}),"Nova Solicitação"]})}),e.jsxs(lt,{children:[e.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Categoria do Serviço"}),e.jsxs(nc,{value:o,onValueChange:c,required:!0,children:[e.jsx(_l,{className:"bg-white",children:e.jsx(ac,{placeholder:"Selecione uma categoria"})}),e.jsx(Sl,{className:"bg-white",children:De.map(_e=>e.jsx(_o,{value:_e.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:_e.icon}),e.jsx("span",{children:_e.label})]})},_e.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Tipo de Serviço"}),e.jsx(ht,{placeholder:"Ex: Fisioterapia domiciliar, Acompanhamento hospitalar...",value:h,onChange:_e=>u(_e.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Descrição Detalhada"}),e.jsx(ea,{placeholder:"Descreva o serviço que precisa, sintomas, necessidades específicas...",value:m,onChange:_e=>x(_e.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(Ss,{className:"h-4 w-4 inline mr-1"}),"Endereço"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ht,{placeholder:"CEP (00000-000)",value:v,onChange:_e=>{const Ie=Fe(_e.target.value);b(Ie),Ie.length===9&&Z(Ie.replace(/\D/g,""))},maxLength:9,required:!0}),W&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Es,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(ht,{placeholder:"Rua/Avenida",value:g,onChange:_e=>k(_e.target.value),required:!0})}),e.jsx("div",{children:e.jsx(ht,{placeholder:"Número",value:j,onChange:_e=>T(_e.target.value),required:!0})})]}),e.jsx(ht,{placeholder:"Bairro",value:S,onChange:_e=>P(_e.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ht,{placeholder:"Cidade",value:B,onChange:_e=>U(_e.target.value),required:!0}),e.jsx(ht,{placeholder:"Estado",value:Q,onChange:_e=>ge(_e.target.value),maxLength:2,required:!0})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Endereço Completo"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:Be()||"Preencha os campos acima ou digite o CEP para preenchimento automático"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4"}),"Período do Serviço"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Data de Início *"}),e.jsx(ht,{type:"date",value:I,onChange:_e=>q(_e.target.value),min:new Date().toISOString().split("T")[0],required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quando começa?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Data de Término *"}),e.jsx(ht,{type:"date",value:ne,onChange:_e=>Y(_e.target.value),min:I||new Date().toISOString().split("T")[0],disabled:!I,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quando termina?"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Horário de Início *"}),e.jsx(ht,{type:"time",value:K,onChange:_e=>ue(_e.target.value),required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Que horas deve chegar?"})]}),I&&ne&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-blue-300 dark:border-blue-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duração do serviço:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[he," ",parseInt(he)===1?"dia":"dias"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["De ",new Date(I).toLocaleDateString("pt-BR")," até ",new Date(ne).toLocaleDateString("pt-BR")]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-green-900 dark:text-green-100 flex items-center gap-2",children:[e.jsx(sn,{className:"h-4 w-4"}),"Valor do Serviço"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Quanto Pode Pagar por Dia? *"}),e.jsx(ht,{type:"number",placeholder:"R$ 150,00",value:oe,onChange:_e=>ie(_e.target.value),min:"1",step:"0.01",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Valor que está disposto a pagar por diária"})]}),le()>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-blue-300 dark:border-blue-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Valor Total do Serviço:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["R$ ",le().toFixed(2)]})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[he," ",parseInt(he)===1?"dia":"dias"," × R$ ",parseFloat(oe||"0").toFixed(2),"/dia"]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-2 text-xs text-orange-700 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 p-2 rounded",children:[e.jsx("span",{className:"text-base",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Importante: Pagamentos pela Plataforma"}),e.jsxs("p",{children:["Para sua segurança, ",e.jsx("strong",{children:"todos os pagamentos devem ser feitos pela plataforma"}),". Transações fora da plataforma não são protegidas e não podemos intervir em caso de problemas."]})]})]})})]})]}),e.jsx(Te,{type:"submit",className:"w-full",disabled:fe,size:"lg",children:fe?e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"mr-2 h-4 w-4"}),"Solicitar Serviço"]})})]}),E&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800 dark:text-green-200",children:[e.jsx(Xt,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Solicitação Enviada!"})]}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 text-sm mt-1",children:["Profissionais da categoria ",G(o)," serão notificados sobre sua solicitação."]})]})]})]})]})}),e.jsx(Ua,{hidePlus:!0})]})}var dv="AlertDialog",[b4,z_]=Vi(dv,[dp]),ci=dp(),uv=s=>{const{__scopeAlertDialog:t,...r}=s,a=ci(t);return e.jsx(Jm,{...a,...r,modal:!0})};uv.displayName=dv;var w4="AlertDialogTrigger",hv=_.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=ci(r);return e.jsx(Xm,{...i,...a,ref:t})});hv.displayName=w4;var N4="AlertDialogPortal",fv=s=>{const{__scopeAlertDialog:t,...r}=s,a=ci(t);return e.jsx(Km,{...a,...r})};fv.displayName=N4;var j4="AlertDialogOverlay",mv=_.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=ci(r);return e.jsx(rh,{...i,...a,ref:t})});mv.displayName=j4;var pl="AlertDialogContent",[_4,S4]=b4(pl),k4=Vm("AlertDialogContent"),pv=_.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:a,...i}=s,o=ci(r),c=_.useRef(null),h=Us(t,c),u=_.useRef(null);return e.jsx(L1,{contentName:pl,titleName:gv,docsSlug:"alert-dialog",children:e.jsx(_4,{scope:r,cancelRef:u,children:e.jsxs(nh,{role:"alertdialog",...o,...i,ref:h,onOpenAutoFocus:zt(i.onOpenAutoFocus,m=>{m.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[e.jsx(k4,{children:a}),e.jsx(P4,{contentRef:c})]})})})});pv.displayName=pl;var gv="AlertDialogTitle",xv=_.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=ci(r);return e.jsx(ih,{...i,...a,ref:t})});xv.displayName=gv;var vv="AlertDialogDescription",yv=_.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=ci(r);return e.jsx(oh,{...i,...a,ref:t})});yv.displayName=vv;var C4="AlertDialogAction",bv=_.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=ci(r);return e.jsx(ah,{...i,...a,ref:t})});bv.displayName=C4;var wv="AlertDialogCancel",Nv=_.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,{cancelRef:i}=S4(wv,r),o=ci(r),c=Us(t,i);return e.jsx(ah,{...o,...a,ref:c})});Nv.displayName=wv;var P4=({contentRef:s})=>{const t=`\`${pl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${pl}\` by passing a \`${vv}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${pl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},L4=uv,A4=hv,T4=fv,jv=mv,_v=pv,Sv=bv,kv=Nv,Cv=xv,Pv=yv;const Lv=L4,Av=A4,E4=T4,Tv=_.forwardRef(({className:s,...t},r)=>e.jsx(jv,{className:ut("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));Tv.displayName=jv.displayName;const $h=_.forwardRef(({className:s,...t},r)=>e.jsxs(E4,{children:[e.jsx(Tv,{}),e.jsx(_v,{ref:r,className:ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));$h.displayName=_v.displayName;const Uh=({className:s,...t})=>e.jsx("div",{className:ut("flex flex-col space-y-2 text-center sm:text-left",s),...t});Uh.displayName="AlertDialogHeader";const Hh=({className:s,...t})=>e.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Hh.displayName="AlertDialogFooter";const Wh=_.forwardRef(({className:s,...t},r)=>e.jsx(Cv,{ref:r,className:ut("text-lg font-semibold",s),...t}));Wh.displayName=Cv.displayName;const Vh=_.forwardRef(({className:s,...t},r)=>e.jsx(Pv,{ref:r,className:ut("text-sm text-muted-foreground",s),...t}));Vh.displayName=Pv.displayName;const Zh=_.forwardRef(({className:s,...t},r)=>e.jsx(Sv,{ref:r,className:ut(Sh(),s),...t}));Zh.displayName=Sv.displayName;const Gh=_.forwardRef(({className:s,...t},r)=>e.jsx(kv,{ref:r,className:ut(Sh({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));Gh.displayName=kv.displayName;function I4(){const[,s]=qs(),{user:t}=cr(),{toast:r}=ks(),[a,i]=_.useState([]),[o,c]=_.useState(!0),[h,u]=_.useState(null),m=async()=>{if(t){c(!0);try{const j=sessionStorage.getItem("token");if(console.log("👤 Usuário:",t),!j){r({title:"Erro de Autenticação",description:"Token não encontrado. Faça login novamente.",variant:"destructive"});return}const S=`${st()}/api/service-requests/client`;console.log("🌐 Fazendo requisição para:",S),console.log("🔑 Token:",j.substring(0,20)+"...");const P=await fetch(S,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(console.log("📡 Resposta do servidor:",P.status,P.statusText),P.ok){const B=await P.json();console.log("✅ Dados recebidos:",B),i(B)}else{console.error("❌ Erro ao buscar solicitações:",P.status);const B=await P.text();console.error("📄 Resposta de erro:",B),r({title:"Erro",description:"Erro ao carregar suas solicitações.",variant:"destructive"})}}catch(j){console.error("💥 Erro ao buscar solicitações:",j),r({title:"Erro de Conexão",description:"Erro ao conectar com o servidor.",variant:"destructive"})}finally{c(!1)}}},x=async j=>{u(j);try{const T=sessionStorage.getItem("token");if(!T){r({title:"Erro de Autenticação",description:"Token não encontrado. Faça login novamente.",variant:"destructive"});return}const S=await fetch(`${st()}/api/service-requests/${j}`,{method:"DELETE",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(S.ok)i(P=>P.filter(B=>B.id!==j)),r({title:"Solicitação Excluída",description:"Sua solicitação foi excluída com sucesso."});else{const P=await S.json();r({title:"Erro",description:P.message||"Erro ao excluir solicitação.",variant:"destructive"})}}catch(T){console.error("Erro ao excluir solicitação:",T),r({title:"Erro de Conexão",description:"Erro ao conectar com o servidor.",variant:"destructive"})}finally{u(null)}};_.useEffect(()=>{m()},[t]);const v=j=>{switch(j){case"open":return"bg-blue-100 text-blue-800 border-blue-200";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},b=j=>{switch(j){case"open":return"Aberta";case"in_progress":return"Em Andamento";case"completed":return"Concluída";case"cancelled":return"Cancelada";default:return"Desconhecido"}},g=j=>{switch(j){case"open":return e.jsx(No,{className:"h-4 w-4"});case"in_progress":return e.jsx(Qs,{className:"h-4 w-4"});case"completed":return e.jsx(Xt,{className:"h-4 w-4"});case"cancelled":return e.jsx(Qn,{className:"h-4 w-4"});default:return e.jsx(Jc,{className:"h-4 w-4"})}},k=j=>{switch(j){case"acompanhante_hospitalar":return"Acompanhante Hospitalar";default:return j}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col pb-24",children:[e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"mr-2",children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Minhas Solicitações"})]}),o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando suas solicitações..."})]}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(qr,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Nenhuma solicitação encontrada"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Você ainda não fez nenhuma solicitação de serviço"}),e.jsx(Te,{onClick:()=>{const j=!!(t?.email&&/.+@.+\..+/.test(t.email.trim())),T=(t?.phone||"").replace(/\D/g,""),S=T.length===11&&T[0]!=="0"&&T[1]!=="0"&&T[2]==="9",P=ge=>{const ae=ge.replace(/\D/g,"");if(ae.length!==11||/^(\d)\1{10}$/.test(ae))return!1;const ee=K=>{let ue=0;for(let q=0;q<K;q++)ue+=parseInt(ae[q],10)*(K+1-q);const I=ue*10%11;return I===10?0:I};return ee(9)===parseInt(ae[9],10)&&ee(10)===parseInt(ae[10],10)},B=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",U=P(B),Q=[j,S,U].filter(Boolean).length;if(Q!==3){r({title:"Verificação em andamento",description:`Conclua seu cadastro (${Q}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile");return}s("/servico")},children:"Fazer Primeira Solicitação"})]}):e.jsx("div",{className:"space-y-4",children:a.map(j=>e.jsxs(ot,{className:"border-l-4 border-l-primary",children:[e.jsx(Wt,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Solicitação #",j.id]}),e.jsx(Zs,{variant:"outline",className:`text-xs ${v(j.status)}`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[g(j.status),b(j.status)]})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k(j.category)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{variant:"outline",size:"sm",onClick:()=>s(`/service-offer/${j.id}`),disabled:j.status!=="open",children:e.jsx(No,{className:"h-4 w-4"})}),e.jsxs(Lv,{children:[e.jsx(Av,{asChild:!0,children:e.jsx(Te,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:j.status!=="open"||h===j.id,children:h===j.id?e.jsx(Es,{className:"h-4 w-4 animate-spin"}):e.jsx(yl,{className:"h-4 w-4"})})}),e.jsxs($h,{children:[e.jsxs(Uh,{children:[e.jsx(Wh,{children:"Excluir Solicitação"}),e.jsx(Vh,{children:"Tem certeza que deseja excluir esta solicitação? Esta ação não pode ser desfeita e todos os profissionais que responderam não poderão mais ver sua solicitação."})]}),e.jsxs(Hh,{children:[e.jsx(Gh,{children:"Cancelar"}),e.jsx(Zh,{onClick:()=>x(j.id),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})]})}),e.jsx(lt,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary mb-1",children:j.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 truncate",children:j.address})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:new Date(j.scheduledDate).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:j.scheduledTime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sn,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["R$ ",j.budget&&!isNaN(Number(j.budget))?Number(j.budget).toFixed(2):"Não informado"]})]})]}),j.responses!==void 0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(qr,{className:"h-4 w-4"}),e.jsxs("span",{children:[j.responses," profissional(is) responderam"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Criada em ",new Date(j.createdAt).toLocaleDateString("pt-BR")," às"," ",new Date(j.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})})]},j.id))}),e.jsx("div",{className:"mt-6",children:e.jsx(Te,{onClick:()=>{const j=!!(t?.email&&/.+@.+\..+/.test(t.email.trim())),T=(t?.phone||"").replace(/\D/g,""),S=T.length===11&&T[0]!=="0"&&T[1]!=="0"&&T[2]==="9",P=ge=>{const ae=ge.replace(/\D/g,"");if(ae.length!==11||/^(\d)\1{10}$/.test(ae))return!1;const ee=K=>{let ue=0;for(let q=0;q<K;q++)ue+=parseInt(ae[q],10)*(K+1-q);const I=ue*10%11;return I===10?0:I};return ee(9)===parseInt(ae[9],10)&&ee(10)===parseInt(ae[10],10)},B=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",U=P(B),Q=[j,S,U].filter(Boolean).length;if(Q!==3){r({title:"Verificação em andamento",description:`Conclua seu cadastro (${Q}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile");return}s("/servico")},className:"w-full",children:"Nova Solicitação"})})]})}),e.jsx(Ua,{})]})}function R4({isOpen:s,onClose:t,serviceRequestId:r,onRatingSubmitted:a}){const[i,o]=_.useState(0),[c,h]=_.useState(0),[u,m]=_.useState(""),[x,v]=_.useState(!1),{toast:b}=ks(),g=P=>{o(P)},k=P=>{h(P)},j=()=>{h(0)},T=async()=>{if(i===0){b({title:"Avaliação obrigatória",description:"Por favor, selecione uma avaliação de 1 a 5 estrelas.",variant:"destructive"});return}v(!0);try{const P=sessionStorage.getItem("token"),B=await fetch(`${st()}/api/service/${r}/review`,{method:"POST",headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"},body:JSON.stringify({rating:i,comment:u.trim()||null})});if(B.ok)b({title:"Avaliação enviada!",description:"Obrigado por avaliar o serviço. Sua opinião é muito importante para nós."}),a(),t();else{const U=await B.json();b({title:"Erro ao enviar avaliação",description:U.error||"Não foi possível enviar sua avaliação. Tente novamente.",variant:"destructive"})}}catch(P){console.error("Erro ao enviar avaliação:",P),b({title:"Erro de conexão",description:"Erro de conexão ao enviar avaliação. Verifique sua internet e tente novamente.",variant:"destructive"})}finally{v(!1)}},S=()=>{x||(o(0),m(""),t())};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Avaliar Serviço"}),e.jsx("button",{onClick:S,disabled:x,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:e.jsx(Mo,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Como você avalia o serviço prestado pelo profissional?"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(P=>e.jsx("button",{onClick:()=>g(P),onMouseEnter:()=>k(P),onMouseLeave:j,disabled:x,className:"transition-all duration-200 transform hover:scale-110 disabled:opacity-50",children:e.jsx(gn,{size:40,className:`${P<=(c||i)?"fill-yellow-400 text-yellow-400":"text-gray-300"} transition-colors duration-200`})},P))})}),i>0&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("p",{className:"text-lg font-medium text-gray-800",children:[i===1&&"Péssimo",i===2&&"Ruim",i===3&&"Regular",i===4&&"Bom",i===5&&"Excelente"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i," ",i===1?"estrela":"estrelas"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentário (opcional)"}),e.jsx("textarea",{id:"comment",value:u,onChange:P=>m(P.target.value),placeholder:"Conte-nos sobre sua experiência com o serviço...",disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none h-24 disabled:opacity-50"})]}),e.jsx("button",{onClick:T,disabled:i===0||x,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Enviando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Enviar Avaliação"})]})})]})]})}):null}var Ev="basil",M4=function(t){return t===3?"v3":t},Iv="https://js.stripe.com",O4="".concat(Iv,"/").concat(Ev,"/stripe.js"),D4=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,F4=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var z4=function(t){return D4.test(t)||F4.test(t)},B4=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Iv,'"]')),r=0;r<t.length;r++){var a=t[r];if(z4(a.src))return a}return null},Lm=function(t){var r="",a=document.createElement("script");a.src="".concat(O4).concat(r);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(a),a},q4=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:r})},Ul=null,Oc=null,Dc=null,$4=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},U4=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},H4=function(t){return Ul!==null?Ul:(Ul=new Promise(function(r,a){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var i=B4();if(!(i&&t)){if(!i)i=Lm(t);else if(i&&Dc!==null&&Oc!==null){var o;i.removeEventListener("load",Dc),i.removeEventListener("error",Oc),(o=i.parentNode)===null||o===void 0||o.removeChild(i),i=Lm(t)}}Dc=U4(r,a),Oc=$4(a),i.addEventListener("load",Dc),i.addEventListener("error",Oc)}catch(c){a(c);return}}),Ul.catch(function(r){return Ul=null,Promise.reject(r)}))},W4=function(t,r,a){if(t===null)return null;var i=r[0],o=i.match(/^pk_test/),c=M4(t.version),h=Ev;o&&c!==h&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(h,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var u=t.apply(void 0,r);return q4(u,a),u},Hl,Rv=!1,Mv=function(){return Hl||(Hl=H4(null).catch(function(t){return Hl=null,Promise.reject(t)}),Hl)};Promise.resolve().then(function(){return Mv()}).catch(function(s){Rv||console.warn(s)});var V4=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];Rv=!0;var i=Date.now();return Mv().then(function(o){return W4(o,r,i)})},mu={exports:{}},pu,Am;function Z4(){if(Am)return pu;Am=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pu=s,pu}var gu,Tm;function G4(){if(Tm)return gu;Tm=1;var s=Z4();function t(){}function r(){}return r.resetWarningCache=t,gu=function(){function a(c,h,u,m,x,v){if(v!==s){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}a.isRequired=a;function i(){return a}var o={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o},gu}var Em;function Y4(){return Em||(Em=1,mu.exports=G4()()),mu.exports}var K4=Y4();const Fs=up(K4);function Im(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function Rm(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Im(Object(r),!0).forEach(function(a){Ov(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Im(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function Zc(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zc=function(t){return typeof t}:Zc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(s)}function Ov(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function J4(s,t){if(s==null)return{};var r={},a=Object.keys(s),i,o;for(o=0;o<a.length;o++)i=a[o],!(t.indexOf(i)>=0)&&(r[i]=s[i]);return r}function X4(s,t){if(s==null)return{};var r=J4(s,t),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Dv(s,t){return Q4(s)||e_(s,t)||t_(s,t)||s_()}function Q4(s){if(Array.isArray(s))return s}function e_(s,t){var r=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(r!=null){var a=[],i=!0,o=!1,c,h;try{for(r=r.call(s);!(i=(c=r.next()).done)&&(a.push(c.value),!(t&&a.length===t));i=!0);}catch(u){o=!0,h=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw h}}return a}}function t_(s,t){if(s){if(typeof s=="string")return Mm(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mm(s,t)}}function Mm(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=s[r];return a}function s_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mn=function(t,r,a){var i=!!a,o=fs.useRef(a);fs.useEffect(function(){o.current=a},[a]),fs.useEffect(function(){if(!i||!t)return function(){};var c=function(){o.current&&o.current.apply(o,arguments)};return t.on(r,c),function(){t.off(r,c)}},[i,r,t,o])},Qu=function(t){var r=fs.useRef(t);return fs.useEffect(function(){r.current=t},[t]),r.current},kl=function(t){return t!==null&&Zc(t)==="object"},r_=function(t){return kl(t)&&typeof t.then=="function"},n_=function(t){return kl(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},Om="[object Object]",a_=function s(t,r){if(!kl(t)||!kl(r))return t===r;var a=Array.isArray(t),i=Array.isArray(r);if(a!==i)return!1;var o=Object.prototype.toString.call(t)===Om,c=Object.prototype.toString.call(r)===Om;if(o!==c)return!1;if(!o&&!a)return t===r;var h=Object.keys(t),u=Object.keys(r);if(h.length!==u.length)return!1;for(var m={},x=0;x<h.length;x+=1)m[h[x]]=!0;for(var v=0;v<u.length;v+=1)m[u[v]]=!0;var b=Object.keys(m);if(b.length!==h.length)return!1;var g=t,k=r,j=function(S){return s(g[S],k[S])};return b.every(j)},Fv=function(t,r,a){return kl(t)?Object.keys(t).reduce(function(i,o){var c=!kl(r)||!a_(t[o],r[o]);return a.includes(o)?(c&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),i):c?Rm(Rm({},i||{}),{},Ov({},o,t[o])):i},null):null},zv="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Dm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zv;if(t===null||n_(t))return t;throw new Error(r)},i_=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zv;if(r_(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(i){return Dm(i,r)})};var a=Dm(t,r);return a===null?{tag:"empty"}:{tag:"sync",stripe:a}},o_=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"4.0.2"}),t.registerAppInfo({name:"react-stripe-js",version:"4.0.2",url:"https://stripe.com/docs/stripe-js/react"}))},Td=fs.createContext(null);Td.displayName="ElementsContext";var Bv=function(t,r){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return t},qv=function(t){var r=t.stripe,a=t.options,i=t.children,o=fs.useMemo(function(){return i_(r)},[r]),c=fs.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(a):null}}),h=Dv(c,2),u=h[0],m=h[1];fs.useEffect(function(){var b=!0,g=function(j){m(function(T){return T.stripe?T:{stripe:j,elements:j.elements(a)}})};return o.tag==="async"&&!u.stripe?o.stripePromise.then(function(k){k&&b&&g(k)}):o.tag==="sync"&&!u.stripe&&g(o.stripe),function(){b=!1}},[o,u,a]);var x=Qu(r);fs.useEffect(function(){x!==null&&x!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[x,r]);var v=Qu(a);return fs.useEffect(function(){if(u.elements){var b=Fv(a,v,["clientSecret","fonts"]);b&&u.elements.update(b)}},[a,v,u.elements]),fs.useEffect(function(){o_(u.stripe)},[u.stripe]),fs.createElement(Td.Provider,{value:u},i)};qv.propTypes={stripe:Fs.any,options:Fs.object};var l_=function(t){var r=fs.useContext(Td);return Bv(r,t)},c_=function(){var t=l_("calls useElements()"),r=t.elements;return r};Fs.func.isRequired;var $v=fs.createContext(null);$v.displayName="CheckoutContext";Fs.any,Fs.shape({fetchClientSecret:Fs.func.isRequired,elementsOptions:Fs.object}).isRequired;var eh=function(t){var r=fs.useContext($v),a=fs.useContext(Td);if(r){if(a)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return r}else return Bv(a,t)},d_=["mode"],u_=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},mr=function(t,r){var a="".concat(u_(t),"Element"),i=function(u){var m=u.id,x=u.className,v=u.options,b=v===void 0?{}:v,g=u.onBlur,k=u.onFocus,j=u.onReady,T=u.onChange,S=u.onEscape,P=u.onClick,B=u.onLoadError,U=u.onLoaderStart,Q=u.onNetworksChange,ge=u.onConfirm,ae=u.onCancel,ee=u.onShippingAddressChange,K=u.onShippingRateChange,ue=u.onSavedPaymentMethodRemove,I=u.onSavedPaymentMethodUpdate,q=eh("mounts <".concat(a,">")),ne="elements"in q?q.elements:null,Y="checkoutState"in q?q.checkoutState:null,he=Y?.type==="success"?Y.checkout:null,pe=fs.useState(null),oe=Dv(pe,2),ie=oe[0],Ne=oe[1],J=fs.useRef(null),fe=fs.useRef(null);mn(ie,"blur",g),mn(ie,"focus",k),mn(ie,"escape",S),mn(ie,"click",P),mn(ie,"loaderror",B),mn(ie,"loaderstart",U),mn(ie,"networkschange",Q),mn(ie,"confirm",ge),mn(ie,"cancel",ae),mn(ie,"shippingaddresschange",ee),mn(ie,"shippingratechange",K),mn(ie,"savedpaymentmethodremove",ue),mn(ie,"savedpaymentmethodupdate",I),mn(ie,"change",T);var R;j&&(t==="expressCheckout"?R=j:R=function(){j(ie)}),mn(ie,"ready",R),fs.useLayoutEffect(function(){if(J.current===null&&fe.current!==null&&(ne||he)){var D=null;if(he)switch(t){case"payment":D=he.createPaymentElement(b);break;case"address":if("mode"in b){var W=b.mode,se=X4(b,d_);if(W==="shipping")D=he.createShippingAddressElement(se);else if(W==="billing")D=he.createBillingAddressElement(se);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":D=he.createExpressCheckoutElement(b);break;case"currencySelector":D=he.createCurrencySelectorElement();break;case"taxId":D=he.createTaxIdElement(b);break;default:throw new Error("Invalid Element type ".concat(a,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else ne&&(D=ne.create(t,b));J.current=D,Ne(D),D&&D.mount(fe.current)}},[ne,he,b]);var E=Qu(b);return fs.useEffect(function(){if(J.current){var D=Fv(b,E,["paymentRequest"]);D&&"update"in J.current&&J.current.update(D)}},[b,E]),fs.useLayoutEffect(function(){return function(){if(J.current&&typeof J.current.destroy=="function")try{J.current.destroy(),J.current=null}catch{}}},[]),fs.createElement("div",{id:m,className:x,ref:fe})},o=function(u){eh("mounts <".concat(a,">"));var m=u.id,x=u.className;return fs.createElement("div",{id:m,className:x})},c=r?o:i;return c.propTypes={id:Fs.string,className:Fs.string,onChange:Fs.func,onBlur:Fs.func,onFocus:Fs.func,onReady:Fs.func,onEscape:Fs.func,onClick:Fs.func,onLoadError:Fs.func,onLoaderStart:Fs.func,onNetworksChange:Fs.func,onConfirm:Fs.func,onCancel:Fs.func,onShippingAddressChange:Fs.func,onShippingRateChange:Fs.func,onSavedPaymentMethodRemove:Fs.func,onSavedPaymentMethodUpdate:Fs.func,options:Fs.object},c.displayName=a,c.__elementType=t,c},pr=typeof window>"u",h_=fs.createContext(null);h_.displayName="EmbeddedCheckoutProviderContext";var f_=function(){var t=eh("calls useStripe()"),r=t.stripe;return r};mr("auBankAccount",pr);var Fm=mr("card",pr);mr("cardNumber",pr);mr("cardExpiry",pr);mr("cardCvc",pr);mr("fpxBank",pr);mr("iban",pr);mr("idealBank",pr);mr("p24Bank",pr);mr("epsBank",pr);mr("payment",pr);mr("expressCheckout",pr);mr("paymentRequestButton",pr);mr("linkAuthentication",pr);mr("address",pr);mr("shippingAddress",pr);mr("paymentMethodMessaging",pr);mr("affirmMessage",pr);mr("afterpayClearpayMessage",pr);mr("taxId",pr);let xu=null;async function m_(){if(!xu){const s=await fetch(`${st()}/api/payment/config`);if(!s.ok)throw new Error("Não foi possível obter a configuração do Stripe");const t=await s.json();if(!t.publishableKey)throw new Error("Chave pública do Stripe não configurada no servidor");xu=V4(t.publishableKey)}return xu}function p_({serviceOfferId:s,amount:t,serviceName:r,professionalName:a,clientSecret:i,onPaymentSuccess:o}){const c=f_(),h=c_(),[u,m]=_.useState(!1),[x,v]=_.useState(!1);cr();const{toast:b}=ks(),[g,k]=_.useState(""),[j,T]=_.useState(!1),S=async(ae,ee=6)=>{try{T(!0);const K="http://localhost:8080";for(let ue=1;ue<=ee;ue++){console.log(`🔄 Verificando status via webhook (tentativa ${ue}/${ee})`);const I=await fetch(`${K}/api/payment/status/${s}`,{method:"GET",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")||""}`}}),q=await I.json();if(console.log("🔍 Status atual:",q),I.ok&&q.status==="completed"){b({title:"Serviço Concluído!",description:"Pagamento aprovado! O serviço está concluído e o profissional foi notificado."}),v(!1),setTimeout(()=>window.location.reload(),2e3),T(!1),k("");return}ue<ee&&(k("Pagamento registrado, aguardando confirmação do servidor..."),await new Promise(ne=>setTimeout(ne,2e3)))}b({title:"Pagamento Aprovado",description:"Pagamento processado, mas o status deve atualizar em instantes. Recarregaremos a página..."}),v(!1),setTimeout(()=>window.location.reload(),4e3)}catch(K){console.error("❌ Erro ao verificar status via webhook:",K)}finally{T(!1)}};fs.useEffect(()=>{i&&(v(!0),b({title:"Pagamento Criado",description:"Preencha os dados do pagamento para continuar"}))},[i,b]);const P=async ae=>{if(ae.preventDefault(),!c||!h||!i){console.error("❌ Stripe, Elements ou clientSecret não disponível");return}console.log("🚀 Iniciando confirmação de pagamento..."),console.log("🔑 Client Secret:",i.substring(0,20)+"..."),m(!0);const ee=h.getElement(Fm);if(!ee){console.error("❌ CardElement não encontrado"),b({title:"Erro",description:"Formulário de cartão não carregado",variant:"destructive"}),m(!1);return}const{error:K,paymentIntent:ue}=await c.confirmCardPayment(i,{payment_method:{card:ee}});if(K){console.error("❌ Erro no pagamento:",K),console.error("❌ Tipo do erro:",K.type),console.error("❌ Código do erro:",K.code),console.error("❌ Mensagem do erro:",K.message),b({title:"Erro no Pagamento",description:K.message||"Erro ao processar pagamento",variant:"destructive"}),m(!1);return}const I=["succeeded","requires_capture"];if(!ue||!I.includes(ue.status)){console.error("❌ PaymentIntent com status inválido:",ue),console.error("❌ Status recebido:",ue?.status),console.error("❌ Status esperados:",I),b({title:"Erro no Pagamento",description:`Status do pagamento: ${ue?.status||"desconhecido"}. Tente novamente.`,variant:"destructive"}),m(!1);return}ue.status==="requires_capture"?console.log("🔒 ESCROW: Pagamento AUTORIZADO (retido) - Status: requires_capture"):console.log("✅ Pagamento capturado - Status: succeeded"),console.log("✅ Pagamento aprovado:",ue.id),console.log("🔍 Verificando token JWT...");const q="http://localhost:8080",ne=sessionStorage.getItem("token");if(console.log("🔑 Token encontrado no sessionStorage?",!!ne),console.log("🆕🆕🆕 NOVO CÓDIGO CARREGADO - VERSÃO ATUALIZADA 2025 🆕🆕🆕"),console.log("🔑 Tipo do token:",typeof ne),console.log("🔑 Token length:",ne?.length),ne&&ne.length>0?console.log("🔑 Token (primeiros 20 chars):",ne.substring(0,20)+"..."):console.error("❌ Token é null, undefined ou vazio!"),console.log("✅ Passou da verificação do token"),!ne){console.error("❌ Token JWT não encontrado"),b({title:"Pagamento Aprovado",description:"Pagamento realizado, mas o usuário não está autenticado. Faça login novamente.",variant:"destructive"}),m(!1);return}console.log("✅ Token válido, iniciando requisição...");try{const Y={serviceOfferId:s,paymentIntentId:ue.id,amount:ue.amount};console.log(""),console.log("=".repeat(80)),console.log("🔄 FRONTEND: Enviando requisição para atualizar status..."),console.log("=".repeat(80)),console.log("📝 Request body:",JSON.stringify(Y,null,2)),console.log("🔑 Token presente:",!!ne),console.log("🌐 API URL:",`${q}/api/payment/update-status`),console.log("📅 Timestamp:",new Date().toISOString());const he=await fetch(`${q}/api/payment/update-status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify(Y)});console.log("📊 Response status:",he.status),console.log("📊 Response ok:",he.ok),console.log("📊 Response headers:",Object.fromEntries(he.headers.entries()));const pe=await he.text();console.log("📊 Response text:",pe);let oe;try{oe=JSON.parse(pe),console.log("📊 Response data (parsed):",oe)}catch(Ne){console.error("❌ Erro ao parsear response como JSON:",Ne),console.error("❌ Response text bruto:",pe)}if(he.status===401){b({title:"Sessão expirada",description:"Entre novamente para concluir a atualização do status.",variant:"destructive"}),m(!1);return}if(he.ok){console.log("✅ FRONTEND: Status atualizado com sucesso!"),console.log("✅ Response data:",oe),b({title:"Pagamento Autorizado! 🔒",description:"Pagamento retido com sucesso! Aguarde o profissional executar o serviço. Você confirmará a conclusão para liberar o pagamento.",duration:5e3}),v(!1),m(!1),o&&(console.log("🔄 Chamando onPaymentSuccess callback..."),o());return}else console.error("❌ FRONTEND: Erro ao atualizar status"),console.error("❌ Status code:",he.status),console.error("❌ Response data:",oe);const ie=await he.json().catch(()=>null);console.error("❌ Erro na atualização imediata:",ie||he.statusText),b({title:"Pagamento Aprovado",description:"Pagamento processado; sincronizando status..."}),S(ue.id)}catch(Y){console.error("❌ Erro ao atualizar status:",Y),b({title:"Pagamento Aprovado",description:"Pagamento processado; sincronizando status..."}),S(ue.id)}finally{m(!1)}},U=Math.max(t,5),Q=U*.05,ge=U-Q;return e.jsx(Nl,{open:x,onOpenChange:v,children:e.jsxs(Co,{className:"w-[95vw] max-w-md max-h-[85vh] overflow-y-auto mx-auto",children:[e.jsx("div",{className:"relative -m-6 mb-3 p-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-t-lg",children:e.jsxs(Po,{children:[e.jsxs(Lo,{className:"flex flex-col sm:flex-row items-start sm:items-center gap-1 text-white text-base font-bold",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oi,{className:"h-4 w-4"}),e.jsxs("span",{children:["Pagamento - R$ ",U.toFixed(2)]})]}),U>t&&e.jsx("span",{className:"text-xs bg-yellow-500 px-2 py-1 rounded self-start sm:self-auto",children:"Mín. R$ 5,00"})]}),e.jsx(Th,{className:"text-blue-100 text-xs",children:"Stripe • Rápido e Seguro"})]})}),e.jsxs("div",{className:"space-y-3",children:[g&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-2 rounded-lg text-xs text-blue-700",children:g}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sn,{className:"h-3 w-3 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-900 text-xs",children:"Resumo"})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1 sm:gap-0",children:[e.jsx("span",{className:"text-gray-600",children:"Serviço:"}),e.jsx("span",{className:"font-medium text-gray-900 max-w-[200px] truncate",children:r})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1 sm:gap-0",children:[e.jsx("span",{className:"text-gray-600",children:"Profissional:"}),e.jsx("span",{className:"font-medium text-gray-900 max-w-[200px] truncate",children:a})]}),e.jsxs("div",{className:"border-t pt-1 mt-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-gray-900 text-xs",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["R$ ",U.toFixed(2)]})]}),U>t&&e.jsx("div",{className:"text-xs text-yellow-600 bg-yellow-50 px-1 py-0.5 rounded mt-1",children:"⚠️ Mín. R$ 5,00"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1 sm:gap-0 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["Taxa LifeBee (5%): R$ ",Q.toFixed(2)]}),e.jsxs("span",{children:["Profissional: R$ ",ge.toFixed(2)]})]})]})]})]}),e.jsxs("form",{onSubmit:P,className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-2 rounded-lg",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Método de Pagamento"}),e.jsx("div",{className:"p-2 border border-gray-300 rounded-md bg-white",children:e.jsx(Fm,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},onReady:()=>{console.log("✅ CardElement - Pronto!")}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center sm:text-left",children:"💳 Cartão de Crédito/Débito"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 p-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 text-xs",children:"Pagamento Protegido"}),e.jsx("p",{className:"text-xs text-green-600",children:"SSL • Criptografia • PCI"})]})]})}),e.jsxs(Te,{type:"submit",disabled:!c||u,className:"w-full h-10 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 text-xs sm:text-sm",children:[u?e.jsx(Es,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(xl,{className:"h-4 w-4 mr-2"}),j?"Sincronizando...":u?"Processando...":`Pagar R$ ${U.toFixed(2)}`]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center px-1",children:"🔒 Dados seguros e criptografados"})]})]})})}function zm(s){const[t,r]=_.useState(null),[a,i]=_.useState(!1),[o,c]=_.useState(null),[h,u]=_.useState(null),[m,x]=_.useState(null),{toast:v}=ks();_.useEffect(()=>(console.log("🔄 PaymentButton - Carregando Stripe..."),x(m_()),()=>{}),[]);const b=async()=>{if(!t&&!a){i(!0),c(null);try{const g=sessionStorage.getItem("token"),k=await fetch(`${st()}/api/payment/create-intent`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify({serviceOfferId:s.serviceOfferId,serviceRequestId:s.serviceRequestId})}),j=await k.json();if(k.ok&&j.success)console.log("✅ Client Secret recebido:",j.clientSecret?.substring(0,20)+"..."),r(j.clientSecret),v({title:"Pagamento Criado",description:"Escolha seu método de pagamento"});else{if(j.errorCode==="STRIPE_NOT_CONNECTED"||j.errorCode==="STRIPE_NOT_ENABLED"){v({title:"Profissional precisa configurar Stripe",description:"O profissional ainda não conectou sua conta Stripe. Por favor, aguarde enquanto ele completa a configuração.",variant:"destructive"}),c("Profissional precisa configurar sua conta Stripe");return}throw new Error(j.error||"Erro ao criar pagamento")}}catch(g){console.error("Erro ao criar pagamento:",g),c(g instanceof Error?g.message:"Erro interno do servidor"),v({title:"Erro no Pagamento",description:g instanceof Error?g.message:"Erro interno do servidor",variant:"destructive"})}finally{i(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs(Te,{onClick:b,disabled:a,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[a?e.jsx(Es,{className:"h-4 w-4 animate-spin"}):e.jsx(xl,{className:"h-4 w-4"}),a?"Criando pagamento...":`Pagar R$ ${Math.max(s.amount,5).toFixed(2)}`]}),o&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:o})}),h&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:h})}),t&&m&&!h&&e.jsx(qv,{stripe:m,children:e.jsx(p_,{...s,clientSecret:t})})]})}function g_(){const[s,t]=qs(),{user:r}=cr(),{toast:a}=ks(),[i,o]=_.useState([]),[c,h]=_.useState([]),[u,m]=_.useState(!0),[x,v]=_.useState("requests"),[b,g]=_.useState(null),[k,j]=_.useState(null),[T,S]=_.useState(null),[P,B]=_.useState(new Set),[U,Q]=_.useState(""),[ge,ae]=_.useState("all"),[ee,K]=_.useState({}),[ue,I]=_.useState(!1),[q,ne]=_.useState(null),Y=(G,Z=0)=>{if(typeof G=="number"&&!Number.isNaN(G))return G;const Fe=parseFloat(String(G??""));return Number.isNaN(Fe)?Z:Fe},he=_.useCallback(G=>{const Z=G.replace(/\D/g,"");if(Z.length!==11||/^(\d)\1{10}$/.test(Z))return!1;const Fe=Be=>{let _e=0;for(let ze=0;ze<Be;ze++)_e+=parseInt(Z[ze],10)*(Be+1-ze);const Ie=_e*10%11;return Ie===10?0:Ie};return Fe(9)===parseInt(Z[9],10)&&Fe(10)===parseInt(Z[10],10)},[]),pe=_.useCallback(G=>{const Z=G.replace(/\D/g,"");return Z.length===11&&Z[0]!=="0"&&Z[1]!=="0"&&Z[2]==="9"},[]),oe=_.useCallback(G=>!!(G&&/.+@.+\..+/.test(G.trim())),[]),ie=_.useCallback(()=>{const G=oe(r?.email||""),Z=pe(r?.phone||""),Fe=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",Be=he(Fe),_e=[G,Z,Be].filter(Boolean).length;return{complete:_e===3,steps:_e,total:3}},[r?.email,r?.phone,oe,pe,he]);console.log("🔍 Services Component - Estado atual:",{activeTab:x,serviceRequestsLength:i.length,serviceOffersLength:c.length,loading:u});const Ne=_.useCallback(async()=>{try{const G=sessionStorage.getItem("token");if(!G)return console.error("❌ Token não encontrado"),[];console.log("🔍 Buscando pedidos...");const Z=await fetch(`${st()}/api/service-requests/client`,{headers:{Authorization:`Bearer ${G}`}});if(Z.ok){const Fe=await Z.json();return console.log("✅ Pedidos carregados:",Fe),o(Fe),Fe}else{const Fe=await Z.text();console.error("❌ Erro ao buscar pedidos:",Z.status,Fe),a({title:"Erro",description:"Não foi possível carregar seus pedidos de serviço",variant:"destructive"})}}catch(G){console.error("❌ Erro ao buscar pedidos:",G),a({title:"Erro de conexão",description:"Verifique sua conexão com a internet",variant:"destructive"})}return[]},[a]),J=_.useCallback(async()=>{try{const G=sessionStorage.getItem("token");if(!G)return console.error("❌ Token não encontrado"),[];console.log("🔍 Buscando propostas...");const Z=await fetch(`${st()}/api/service-offers/client`,{headers:{Authorization:`Bearer ${G}`}});if(Z.ok){const Fe=await Z.json();console.log("✅ Propostas carregadas:",Fe);let Be=Array.isArray(Fe)?Fe:[];Be=Be.map(Ie=>({...Ie,professionalRating:Y(Ie?.professionalRating,5),professionalTotalReviews:Y(Ie?.professionalTotalReviews,0),price:Y(Ie?.price??Ie?.proposedPrice,0),estimatedTime:Y(Ie?.estimatedTime,0),serviceStatus:Ie?.serviceStatus||"open"})),h(Be);const _e=Be.filter(Ie=>Ie.status==="accepted");for(const Ie of _e)try{const ze=await fetch(`${st()}/api/payment/status/${Ie.id}`,{headers:{Authorization:`Bearer ${G}`}});if(ze.ok){const Ge=await ze.json();console.log(`💰 Status de pagamento para oferta ${Ie.id}:`,Ge),Ge.isPaid&&B(nt=>new Set(nt).add(Ie.id))}}catch(ze){console.error(`❌ Erro ao verificar pagamento da oferta ${Ie.id}:`,ze)}return Be}else{const Fe=await Z.text();console.error("❌ Erro ao buscar propostas:",Z.status,Fe),a({title:"Erro",description:"Não foi possível carregar as propostas",variant:"destructive"})}}catch(G){console.error("❌ Erro ao buscar propostas:",G),a({title:"Erro de conexão",description:"Verifique sua conexão com a internet",variant:"destructive"})}finally{m(!1)}return[]},[a]);_.useEffect(()=>{r?.id&&(async()=>(m(!0),await Promise.all([Ne(),J()])))()},[r?.id,Ne,J]),_.useEffect(()=>{r?.id&&(x==="offers"?J():x==="requests"&&Ne())},[x,r?.id,Ne,J]),_.useEffect(()=>{const G=()=>{!document.hidden&&r?.id&&(x==="offers"?J():Ne())};return document.addEventListener("visibilitychange",G),()=>document.removeEventListener("visibilitychange",G)},[x,r?.id,Ne,J]);const fe=async G=>{try{const Z=sessionStorage.getItem("token"),Fe=await fetch(`${st()}/api/service-offers/${G}/accept`,{method:"POST",headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}});if(Fe.ok)a({title:"Proposta Aceita! 🎉",description:"Aguarde... Você será redirecionado para o pagamento.",duration:3e3}),setTimeout(()=>{v("offers"),window.scrollTo({top:0,behavior:"smooth"}),a({title:"💳 Efetue o Pagamento",description:"Para garantir o serviço, clique em 'Pagar Agora' no card do serviço aceito.",duration:8e3})},1500),await Promise.all([J(),Ne()]);else{const Be=await Fe.json();a({title:"Erro",description:Be.message||"Não foi possível aceitar a proposta",variant:"destructive"})}}catch(Z){console.error("Erro ao aceitar proposta:",Z),a({title:"Erro",description:"Erro de conexão ao aceitar a proposta",variant:"destructive"})}},R=async G=>{try{const Z=sessionStorage.getItem("token"),Fe=await fetch(`${st()}/api/service-offers/${G}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}});if(Fe.ok)a({title:"Proposta rejeitada",description:"A proposta foi rejeitada com sucesso."}),h(Be=>Be.filter(_e=>_e.id!==G)),g(null),await Promise.all([Ne(),J()]);else{const Be=await Fe.json();a({title:"Erro",description:Be.message||"Não foi possível rejeitar a proposta",variant:"destructive"})}}catch(Z){console.error("Erro ao rejeitar proposta:",Z),a({title:"Erro",description:"Erro de conexão ao rejeitar a proposta",variant:"destructive"})}},E=async(G,Z)=>{j(Z);try{const Fe=sessionStorage.getItem("token"),Be=c.find(ze=>ze.id===Z),_e=`Olá! Gostaria de conversar sobre sua proposta para "${Be?.serviceTitle}".`;console.log("🔍 Tentando iniciar conversa:",{professionalId:G,offerId:Z,offerDetails:Be?{id:Be.id,professionalId:Be.professionalId,professionalName:Be.professionalName,professionalUserId:Be.professionalUserId}:"Offer não encontrado"});const Ie=await fetch(`${st()}/api/messages/start-conversation`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"Content-Type":"application/json"},body:JSON.stringify({professionalId:G,message:_e})});if(Ie.ok){const ze=await Ie.json();console.log("✅ Conversa iniciada:",ze),a({title:"Conversa iniciada!",description:"Redirecionando para as mensagens..."}),t("/messages")}else{const ze=await Ie.json();console.error("❌ Erro ao iniciar conversa:",ze),a({title:"Erro",description:ze.message||"Não foi possível iniciar a conversa",variant:"destructive"})}}catch(Fe){console.error("Erro ao iniciar conversa:",Fe),a({title:"Erro",description:"Erro de conexão ao iniciar conversa",variant:"destructive"})}finally{j(null)}},D=async G=>{try{S(G);const Z=sessionStorage.getItem("token"),Fe=await fetch(`${st()}/api/service/${G}/confirm`,{method:"POST",headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}});if(Fe.ok){const Be=await Fe.json();a({title:"Sucesso!",description:"Serviço confirmado como concluído. O pagamento será liberado para o profissional."}),await Promise.all([J(),Ne()]),Be.requiresReview&&(ne(G),I(!0))}else{const Be=await Fe.json();Be.errorCode==="PAYMENT_NOT_AUTHORIZED"?(a({title:"⚠️ Pagamento Pendente",description:"Você precisa efetuar o pagamento antes de confirmar a conclusão do serviço. Procure pelo botão 'Pagar Agora' no card do serviço.",variant:"destructive",duration:8e3}),window.scrollTo({top:0,behavior:"smooth"})):a({title:"Erro",description:Be.message||"Não foi possível confirmar a conclusão do serviço",variant:"destructive"})}}catch(Z){console.error("Erro ao confirmar conclusão do serviço:",Z),a({title:"Erro",description:"Erro de conexão ao confirmar conclusão do serviço",variant:"destructive"})}finally{S(null)}},W=G=>{switch(G){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},se=G=>{switch(G){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return G}},X=G=>({acompanhante_hospitalar:"Acompanhante Hospitalar"})[G]||G.replace(/_/g," ").replace(/\b\w/g,Fe=>Fe.toUpperCase()),le=async G=>{try{const Z=sessionStorage.getItem("token"),Fe=await fetch(`${st()}/api/service-requests/${G}`,{method:"DELETE",headers:{Authorization:`Bearer ${Z}`}});if(Fe.ok)a({title:"Pedido excluído",description:"O pedido foi excluído com sucesso."}),o(Be=>Be.filter(_e=>_e.id!==G));else{const Be=await Fe.json();a({title:"Erro",description:Be.message||"Não foi possível excluir o pedido",variant:"destructive"})}}catch(Z){console.error("Erro ao excluir pedido:",Z),a({title:"Erro",description:"Erro de conexão ao excluir o pedido",variant:"destructive"})}},ce=()=>{const G=ie();if(!G.complete){a({title:"Verificação em andamento",description:`Conclua seu cadastro (${G.steps}/${G.total}): Email, Telefone e CPF para criar um serviço.`}),t("/profile");return}t("/servico")},xe=()=>{J(),Ne()},je=()=>{I(!1),ne(null)},Me=new Set(i.map(G=>G.id)),De=c.filter(G=>{if(!(i.length===0||Me.has(G.serviceRequestId)))return!1;const Fe=U===""||G.professionalName.toLowerCase().includes(U.toLowerCase())||G.serviceTitle.toLowerCase().includes(U.toLowerCase())||G.message.toLowerCase().includes(U.toLowerCase()),Be=ge==="all"?G.status!=="rejected":G.status===ge;return Fe&&Be}),Ye=c.reduce((G,Z)=>(G[Z.serviceRequestId]||(G[Z.serviceRequestId]=[]),G[Z.serviceRequestId].push(Z),G),{});return u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando serviços..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Xn,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Meus Serviços"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{href:"/agenda",children:e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-yellow-600 transition-colors",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Agenda"})]})}),e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg text-sm font-medium hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(yh,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Novo Pedido"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>{console.log("🔍 Clicou na aba Pedidos"),v("requests")},className:`py-4 px-1 border-b-2 font-medium text-sm ${x==="requests"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pedidos (",i.length,")"]}),e.jsxs("button",{onClick:()=>{console.log("🔍 Clicou na aba Propostas"),v("offers")},className:`py-4 px-1 border-b-2 font-medium text-sm ${x==="offers"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Propostas (",c.length,")"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[x==="offers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por profissional, serviço ou mensagem...",value:U,onChange:G=>Q(G.target.value),className:"w-full pl-10 pr-4 py-2.5 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>ae("all"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${ge==="all"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todas"}),e.jsx("button",{onClick:()=>ae("pending"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${ge==="pending"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pendentes"}),e.jsx("button",{onClick:()=>ae("accepted"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${ge==="accepted"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Aceitas"}),e.jsx("button",{onClick:()=>ae("rejected"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${ge==="rejected"?"bg-red-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Rejeitadas"}),e.jsx("button",{onClick:()=>ae("completed"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${ge==="completed"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Concluídas"})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-5 w-5 text-orange-500"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"Propostas Recebidas"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white",children:De.length})]})}),De.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(qr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Não há propostas no momento"}),e.jsx("p",{className:"text-gray-600",children:"Assim que profissionais enviarem propostas, elas aparecerão aqui."})]}):e.jsx("div",{className:"space-y-4",children:De.map(G=>e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-md border border-gray-100 hover:shadow-lg hover:ring-1 hover:ring-orange-200 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 rounded-full flex items-center justify-center overflow-hidden shadow-md ring-2 ring-white",children:G.professionalProfileImage&&!ee[G.id]?e.jsx("img",{src:G.professionalProfileImage.startsWith("http")?G.professionalProfileImage:`${st()}${G.professionalProfileImage}`,alt:G.professionalName,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",sizes:"(max-width: 640px) 3rem, (max-width: 1024px) 3.5rem, 4rem",onError:()=>K(Z=>({...Z,[G.id]:!0}))}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:e.jsx($r,{className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8 text-white"})})}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 truncate",children:G.professionalName}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:G.professionalRating})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["(",G.professionalTotalReviews," ",G.professionalTotalReviews===1?"avaliação":"avaliações",")"]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-2 sm:mt-0",children:e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${G.status==="accepted"?"bg-green-100 text-green-800":G.status==="rejected"?"bg-red-100 text-red-800":G.status==="completed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:G.status==="accepted"?"Aceita":G.status==="rejected"?"Rejeitada":G.status==="completed"?"Concluída":"Pendente"})})]})})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xn,{className:"h-4 w-4 text-blue-600"}),e.jsx("p",{className:"text-sm text-blue-800 font-semibold",children:"Serviço Solicitado"})]}),e.jsx("p",{className:"text-base text-blue-900 font-bold",children:X(G.serviceTitle)}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-xs text-blue-700",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(zs,{className:"h-3 w-3"}),new Date(G.createdAt).toLocaleDateString("pt-BR")]})})]}),(()=>{const Z=i.find(ze=>ze.id===G.serviceRequestId);if(!Z)return null;const Fe=typeof Z.budget=="number"?Z.budget:parseFloat(Z.budget??"0")||0,Be=typeof G.price=="number"?G.price:parseFloat(G.price??"0")||0,_e=Be<=Fe,Ie=Math.abs(Fe-Be);return e.jsxs("div",{className:"mb-4 p-4 rounded-lg border bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Comparação com orçamento"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${_e?"bg-green-100 text-green-700":"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-sm"}`,children:_e?"Dentro do orçamento":"Acima do orçamento"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Orçamento do pedido"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["R$ ",Fe.toFixed(2)]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Proposta do profissional"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["R$ ",Be.toFixed(2)]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Diferença"}),e.jsxs("p",{className:`text-sm font-semibold ${_e?"text-green-700":"text-red-700"}`,children:[_e?"-":"+"," R$ ",Ie.toFixed(2)]})]})]})]})})(),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qr,{className:"h-4 w-4 text-gray-600"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Proposta do Profissional"})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-4 border border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed italic",children:['"',G.message,'"']})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(sn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Preço"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold text-green-800 truncate",children:["R$ ",Y(G.price,0).toFixed(2)]})]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Qs,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Tempo estimado"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold text-blue-800 truncate",children:[G.estimatedTime," horas"]})]})]})})]}),G.status==="pending"&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>fe(G.id),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:[e.jsx(Xt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Aceitar"}),e.jsx("span",{className:"sm:hidden",children:"Aceitar"})]}),e.jsxs(Lv,{open:b===G.id,onOpenChange:Z=>!Z&&g(null),children:[e.jsx(Av,{asChild:!0,children:e.jsxs("button",{onClick:()=>g(G.id),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:[e.jsx(Qn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Rejeitar"}),e.jsx("span",{className:"sm:hidden",children:"Rejeitar"})]})}),e.jsxs($h,{className:"bg-white border border-gray-200",children:[e.jsxs(Uh,{children:[e.jsxs(Wh,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Jc,{className:"h-5 w-5 text-red-500"})}),"Rejeitar Proposta"]}),e.jsx(Vh,{asChild:!0,children:e.jsxs("div",{className:"text-left space-y-4",children:[e.jsxs("p",{children:["Tem certeza que deseja rejeitar a proposta de ",e.jsx("strong",{children:G.professionalName}),"?"]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center overflow-hidden",children:G.professionalProfileImage&&!ee[G.id]?e.jsx("img",{src:G.professionalProfileImage.startsWith("http")?G.professionalProfileImage:`${st()}${G.professionalProfileImage}`,alt:G.professionalName,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",sizes:"2.5rem",onError:()=>K(Z=>({...Z,[G.id]:!0}))}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:e.jsx($r,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:G.professionalName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(sn,{className:"h-4 w-4"}),"R$ ",Y(G.price,0).toFixed(2)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qs,{className:"h-4 w-4"}),G.estimatedTime," horas"]})]})]})]})}),e.jsx("p",{className:"text-red-600 font-medium",children:"Esta ação não pode ser desfeita e o profissional será notificado."})]})})]}),e.jsxs(Hh,{children:[e.jsx(Gh,{children:"Cancelar"}),e.jsx(Zh,{onClick:()=>R(G.id),className:"bg-red-500 hover:bg-red-600 text-white",children:"Sim, Rejeitar"})]})]})]}),e.jsxs("button",{onClick:()=>E(G.professionalUserId||G.professionalId,G.id),disabled:k===G.id,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2.5 sm:py-3 px-4 sm:px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[k===G.id?e.jsx(Es,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin"}):e.jsx(qr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Conversar"}),e.jsx("span",{className:"sm:hidden",children:"Chat"})]})]}),(G.status==="accepted"||G.status==="completed")&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:(()=>{const Z=i.find(Be=>Be.id===G.serviceRequestId);if(!Z)return e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Wa,{className:"h-5 w-5 text-yellow-600"}),e.jsx("p",{className:"text-sm font-semibold text-yellow-800",children:"Carregando informações do pedido..."})]}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Recarregue a página para sincronizar o status do pedido vinculado a esta proposta."})]});const Fe=Z.status;return Fe==="awaiting_confirmation"?P.has(G.id)?e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sl,{className:"h-5 w-5 text-blue-600"}),e.jsx("p",{className:"text-sm font-semibold text-blue-800",children:"✅ Pagamento Autorizado"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"O profissional marcou o serviço como concluído e seu pagamento está retido. Confirme se tudo está correto para liberar o pagamento ao profissional."})]}),e.jsxs("button",{onClick:()=>D(G.serviceRequestId),disabled:T===G.serviceRequestId,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[T===G.serviceRequestId?e.jsx(Es,{className:"h-4 w-4 animate-spin"}):e.jsx(sl,{className:"h-4 w-4"}),e.jsx("span",{children:"Confirmar Conclusão do Serviço"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Confirme para liberar o pagamento ao profissional"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-4 border border-orange-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qs,{className:"h-5 w-5 text-orange-600"}),e.jsx("p",{className:"text-sm font-semibold text-orange-800",children:"⚠️ Ação Necessária: Pagamento Pendente"})]}),e.jsxs("p",{className:"text-sm text-orange-700 mb-2",children:["O profissional marcou o serviço como concluído, mas ",e.jsx("strong",{children:"você ainda não efetuou o pagamento"}),"."]}),e.jsxs("p",{className:"text-sm text-orange-700",children:[e.jsx("strong",{children:"Pague agora"})," para garantir o serviço. Após o pagamento, você poderá confirmar a conclusão para liberar o valor ao profissional."]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sn,{className:"h-5 w-5 text-green-600"}),e.jsx("p",{className:"text-sm font-semibold text-green-800",children:"Efetue o Pagamento"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Pague agora para garantir o serviço executado pelo profissional."}),e.jsx(zm,{serviceOfferId:G.id,serviceRequestId:G.serviceRequestId,amount:G.price,serviceName:`${Z.title||"Serviço"}`,professionalName:G.professionalName,onPaymentSuccess:()=>{B(_e=>new Set(_e).add(G.id)),J(),Ne(),a({title:"Pagamento Autorizado! 🔒",description:"Pagamento retido com sucesso! Agora você pode confirmar a conclusão para liberar o pagamento ao profissional.",duration:6e3})}})]})]}):G.status==="completed"?e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 rounded-lg p-4 border border-emerald-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sl,{className:"h-5 w-5 text-emerald-600"}),e.jsx("p",{className:"text-sm font-semibold text-emerald-800",children:"Proposta Concluída"})]}),e.jsx("p",{className:"text-sm text-emerald-700 mb-3",children:"✅ Pagamento realizado com sucesso! O serviço foi concluído e o profissional foi pago."}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-600 bg-emerald-100 px-3 py-2 rounded-lg",children:[e.jsx(sl,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Status: Concluído e Pago"})]})]}):Fe==="completed"?e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sl,{className:"h-5 w-5 text-blue-600"}),e.jsx("p",{className:"text-sm font-semibold text-blue-800",children:"Serviço e pedido concluídos"})]}),e.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"✅ Pagamento aprovado! O profissional foi notificado e o pedido correspondente está marcado como concluído."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Caso o card do pedido ainda mostre outro status, recarregue esta página para sincronizar os dados."})]}):e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sl,{className:"h-5 w-5 text-green-600"}),e.jsx("p",{className:"text-sm font-semibold text-green-800",children:"Proposta Aceita"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Proposta aceita! Efetue o pagamento para que o profissional possa iniciar o serviço."}),e.jsx(zm,{serviceOfferId:G.id,serviceRequestId:G.serviceRequestId,amount:G.price,serviceName:`${Z.title||"Serviço"}`,professionalName:G.professionalName,onPaymentSuccess:()=>{B(Be=>new Set(Be).add(G.id)),J(),Ne(),a({title:"Pagamento Realizado",description:"Pagamento processado com sucesso! O profissional foi notificado."})}})]})})()})]},G.id))})]}),x==="requests"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xn,{className:"h-5 w-5 text-orange-500"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"Meus Pedidos"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white",children:i.length})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Xn,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(qr,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Propostas Recebidas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Xt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(G=>G.status==="open"||G.status==="assigned").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Qs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Em Andamento"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(G=>G.status==="in_progress"||G.status==="awaiting_confirmation").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-green-500 to-emerald-500",children:e.jsx(Xt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Concluídos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(G=>G.status==="completed").length})]})]})})]}),i.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(Xn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido criado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Crie seu primeiro pedido de serviço e receba propostas de profissionais qualificados."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(Os,{href:"/servico",children:e.jsx("button",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-lg font-medium hover:from-yellow-600 hover:to-orange-600 transition-all duration-200",children:"Criar Pedido"})}),e.jsx(Os,{href:"/my-service-requests",children:e.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:"Ver Todos os Pedidos"})})]})]}):e.jsx("div",{className:"space-y-4",children:i.map(G=>{const Z=Ye[G.id]||[];return Z.filter(Fe=>Fe.status==="pending"),Z.filter(Fe=>Fe.status==="accepted"),e.jsxs("div",{className:`bg-white rounded-xl p-4 sm:p-5 shadow-md border transition-all duration-200 ${G.status==="completed"?"border-green-200 bg-green-50/30 hover:shadow-lg hover:ring-1 hover:ring-green-200":"border-gray-100 hover:shadow-lg hover:ring-1 hover:ring-orange-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md ${G.status==="completed"?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-blue-500 to-purple-600"}`,children:G.status==="completed"?e.jsx(Xt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}):e.jsx(Xn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-900 mb-1 line-clamp-2",children:G.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:X(G.category)})]})]}),e.jsxs("div",{className:"flex flex-row gap-2 items-center sm:items-end",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${G.status==="completed"?"bg-green-100 text-green-800":G.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:G.status==="completed"?"Concluído":G.status==="in_progress"?"Em Andamento":"Aberto"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W(G.urgency)}`,children:se(G.urgency)})]})]}),G.status==="completed"&&e.jsx("div",{className:"mb-4 bg-green-100 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4 text-green-600"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Serviço Concluído - Este serviço foi finalizado e não pode mais ser editado"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Descrição do serviço"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed line-clamp-3",children:G.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ss,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Localização"}),e.jsx("p",{className:"text-sm font-medium text-blue-800 truncate",children:(()=>{const Fe=G.location??G.address??"",Be=typeof Fe=="string"?Fe:String(Fe??"");return Be.trim()!==""?Be:"Não informado"})()})]})]})}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(sn,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Orçamento"}),e.jsxs("p",{className:"text-sm font-medium text-green-800 truncate",children:["R$ ",(()=>{const Fe=typeof G.budget=="number"?G.budget:parseFloat(G.budget??"0");return isNaN(Fe)?"0,00":Fe.toFixed(2)})()]})]})]})}),e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(zs,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-purple-700 mb-1",children:"Criado em"}),e.jsx("p",{className:"text-sm font-medium text-purple-800 truncate",children:new Date(G.createdAt).toLocaleDateString("pt-BR")})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[G.responseCount>0&&e.jsxs("button",{onClick:()=>v("offers"),className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:["Ver Propostas (",G.responseCount,")"]}),e.jsx("button",{onClick:()=>le(G.id),className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg text-sm font-medium hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Excluir"})]})]})]},G.id)})})]}),x!=="offers"&&x!=="requests"&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Selecione uma aba para continuar"})})]}),e.jsx(R4,{isOpen:ue,onClose:je,serviceRequestId:q||0,onRatingSubmitted:xe})]})}function x_(){const[s,t]=qs(),{user:r}=cr(),{toast:a}=ks(),[i,o]=_.useState([]),[c,h]=_.useState(!0);_.useEffect(()=>{r?.id&&u()},[r]);const u=async()=>{try{h(!0);const k=sessionStorage.getItem("token"),j=await fetch(`${st()}/api/service-requests/client`,{headers:{Authorization:`Bearer ${k}`}});if(j.ok){const T=await j.json();o(T),console.log("✅ Pedidos carregados:",T.length)}else console.error("❌ Erro ao buscar pedidos - Status:",j.status)}catch(k){console.error("❌ Erro ao buscar pedidos:",k)}finally{h(!1)}},m=k=>{switch(k){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=k=>{switch(k){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return k}},v=k=>{switch(k){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}},b=k=>{switch(k){case"completed":return"Concluído";case"in_progress":return"Em Andamento";case"cancelled":return"Cancelado";case"open":return"Aberto";default:return k}},g=k=>({acompanhante_hospitalar:"Acompanhante Hospitalar",cuidador_idosos:"Cuidador de Idosos",enfermagem_domiciliar:"Enfermagem Domiciliar",fisioterapia:"Fisioterapia",nutricao:"Nutrição",psicologia:"Psicologia",terapia_ocupacional:"Terapia Ocupacional",servicos_gerais:"Serviços Gerais"})[k]||k.replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase());return c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando seus pedidos..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/services"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Xn,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Meus Pedidos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{href:"/services",children:e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(qr,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Propostas"})]})}),e.jsxs("button",{onClick:()=>{const k=!!(r?.email&&/.+@.+\..+/.test(r.email.trim())),j=(r?.phone||"").replace(/\D/g,""),T=j.length===11&&j[0]!=="0"&&j[1]!=="0"&&j[2]==="9",S=Q=>{const ge=Q.replace(/\D/g,"");if(ge.length!==11||/^(\d)\1{10}$/.test(ge))return!1;const ae=ee=>{let K=0;for(let I=0;I<ee;I++)K+=parseInt(ge[I],10)*(ee+1-I);const ue=K*10%11;return ue===10?0:ue};return ae(9)===parseInt(ge[9],10)&&ae(10)===parseInt(ge[10],10)},P=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",B=S(P),U=[k,T,B].filter(Boolean).length;if(U!==3){a({title:"Verificação em andamento",description:`Conclua seu cadastro (${U}/3): Email, Telefone e CPF para criar um serviço.`}),t("/profile");return}t("/servico")},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(yh,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Novo Pedido"})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Xn,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(qr,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Propostas Recebidas"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.reduce((k,j)=>k+(Number(j.responseCount)||0),0)})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(Qs,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos Ativos"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.filter(k=>k.status==="open"||k.status==="in_progress").length})]})]})})]}),e.jsx("div",{className:"space-y-6",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido criado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Crie seu primeiro pedido de serviço e receba propostas de profissionais qualificados."}),e.jsx(Os,{href:"/servico",children:e.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:"Criar Primeiro Pedido"})})]}):i.map(k=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(Xn,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2",children:k.title}),e.jsx("p",{className:"text-sm text-blue-600 font-semibold mb-3 bg-blue-50 px-3 py-1 rounded-full inline-block",children:g(k.category)})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${v(k.status)}`,children:b(k.status)}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${m(k.urgency)}`,children:["Urgência ",x(k.urgency)]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Descrição do Serviço"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:k.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Ss,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"Localização"}),e.jsx("p",{className:"text-sm font-semibold text-blue-800 truncate",children:k.location})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(sn,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 font-medium mb-1",children:"Orçamento Máximo"}),e.jsxs("p",{className:"text-sm font-semibold text-green-800",children:["R$ ",(()=>{const j=typeof k.budget=="number"?k.budget:parseFloat(k.budget??"0");return isNaN(j)?"0,00":j.toFixed(2)})()]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx(zs,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-purple-700 font-medium mb-1",children:"Criado em"}),e.jsx("p",{className:"text-sm font-semibold text-purple-800",children:new Date(k.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(qr,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Propostas Recebidas"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-orange-600",children:k.responseCount}),e.jsx("span",{className:"text-sm text-gray-600",children:k.responseCount===1?"proposta recebida":"propostas recebidas"})]}),k.responseCount>0&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-semibold",children:"Aguardando análise"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[k.responseCount>0&&e.jsx(Os,{href:"/services",className:"flex-1",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(No,{className:"h-4 w-4"}),"Ver Propostas (",k.responseCount,")"]})}),e.jsx(Os,{href:"/servico",className:"flex-1",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(ng,{className:"h-4 w-4"}),"Editar Pedido"]})}),k.status==="open"&&e.jsxs("button",{className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(yl,{className:"h-4 w-4"}),"Cancelar"]})]})]},k.id))})]})]})}function v_({onLogin:s}){const[t,r]=_.useState(!0),[a,i]=_.useState(!1),[o,c]=_.useState("client"),[h,u]=_.useState(""),[m,x]=_.useState(""),[v,b]=_.useState(""),[g,k]=_.useState(""),[j,T]=_.useState(""),[S,P]=_.useState(!1),{toast:B}=ks(),[U,Q]=_.useState(""),[ge,ae]=_.useState(""),[ee,K]=_.useState(""),[ue,I]=_.useState(""),[q,ne]=_.useState(""),Y=xe=>{const je=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return xe?je.test(xe)?xe.length>100?"Email muito longo":"":"Digite um email válido":"Email é obrigatório"},he=xe=>{const je=/^\(\d{2}\) \d{4,5}-\d{4}$/;return xe?je.test(xe)?"":"Digite um telefone válido: (11) 99999-9999":"Telefone é obrigatório"},pe=xe=>xe?xe.length<8?"Senha deve ter pelo menos 8 caracteres":/(?=.*[a-z])/.test(xe)?/(?=.*[A-Z])/.test(xe)?/(?=.*\d)/.test(xe)?/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(xe)?xe.length>50?"Senha muito longa":"":"Senha deve conter pelo menos um caractere especial":"Senha deve conter pelo menos um número":"Senha deve conter pelo menos uma letra maiúscula":"Senha deve conter pelo menos uma letra minúscula":"Senha é obrigatória",oe=xe=>xe?xe.length<2?"Nome deve ter pelo menos 2 caracteres":xe.length>100?"Nome muito longo":/^[a-zA-ZÀ-ÿ\s]+$/.test(xe)?"":"Nome deve conter apenas letras":"Nome é obrigatório",ie=xe=>xe?xe!==m?"As senhas não coincidem":"":"Confirme sua senha",Ne=xe=>{if(!xe)return{strength:0,color:"bg-gray-200",text:""};let je=0;return xe.length>=8&&je++,/(?=.*[a-z])/.test(xe)&&je++,/(?=.*[A-Z])/.test(xe)&&je++,/(?=.*\d)/.test(xe)&&je++,/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(xe)&&je++,je<=1?{strength:je,color:"bg-red-500",text:"Muito fraca"}:je<=2?{strength:je,color:"bg-orange-500",text:"Fraca"}:je<=3?{strength:je,color:"bg-yellow-500",text:"Média"}:je<=4?{strength:je,color:"bg-blue-500",text:"Forte"}:{strength:je,color:"bg-green-500",text:"Muito forte"}},J=xe=>{const Me=xe.replace(/\D/g,"").substring(0,11);return Me.length<=2?Me:Me.length<=7?`(${Me.substring(0,2)}) ${Me.substring(2)}`:`(${Me.substring(0,2)}) ${Me.substring(2,7)}-${Me.substring(7)}`},fe=xe=>{const je=J(xe.target.value);T(je),t||ae(he(je))},R=xe=>{const je=xe.target.value;u(je),Q(Y(je))},E=xe=>{const je=xe.target.value;x(je),K(t?je?"":"Senha é obrigatória":pe(je)),v&&I(ie(v))},D=xe=>{const je=xe.target.value;b(je),I(ie(je))},W=xe=>{const je=xe.target.value;k(je),t||ne(oe(je))},se=async xe=>{console.log("🔐 Iniciando login social:",xe),P(!0);try{const Me=`http://localhost:8080/api/auth/${xe}`;console.log("🔐 URL de autenticação:",Me),console.log("🔐 Redirecionando diretamente..."),window.location.href=Me}catch(je){console.error("❌ Erro no login social:",je),P(!1),B({title:"Erro no login social",description:je.message,variant:"destructive"})}},X=()=>{Q(""),ae(""),K(""),I(""),ne("")},le=()=>{r(!t),X(),t||K("")},ce=async xe=>{xe.preventDefault();const je=Y(h),Me=m?"":"Senha é obrigatória";if(Q(je),K(Me),t){if(je||Me){B({title:"Erro de validação",description:"Por favor, preencha todos os campos",variant:"destructive"});return}}else{const De=oe(g),Ye=he(j),G=ie(v),Z=pe(m);if(ne(De),ae(Ye),I(G),K(Z),je||Z||De||Ye||G){B({title:"Erro de validação",description:"Por favor, corrija os campos destacados",variant:"destructive"});return}}P(!0);try{if(t){const De=await sc("POST","/api/login",{username:h,password:m}),Ye=await De.json();if(De.ok)console.log("🔐 Login bem-sucedido!"),console.log("🔑 Token recebido:",Ye.token?"Sim":"Não"),console.log("👤 User recebido:",Ye.user),localStorage.setItem("token",Ye.token),localStorage.setItem("user",JSON.stringify(Ye.user)),console.log("💾 Token salvo no localStorage"),console.log("💾 User salvo no localStorage"),console.log("🔍 Verificando localStorage..."),console.log("🔍 Token no localStorage:",localStorage.getItem("token")?"Presente":"Ausente"),console.log("🔍 User no localStorage:",localStorage.getItem("user")?"Presente":"Ausente"),B({title:"Login realizado com sucesso!",description:`Bem-vindo(a), ${Ye.user.name}`}),s(Ye.user.userType);else throw new Error(Ye.message||"Erro no login")}else{const De=await sc("POST","/api/register",{username:h,email:h,password:m,name:g,userType:o,phone:j}),Ye=await De.json();if(De.ok)localStorage.setItem("token",Ye.token),localStorage.setItem("user",JSON.stringify(Ye.user)),B({title:"Conta criada com sucesso!",description:`Bem-vindo(a), ${Ye.user.name}`}),s(Ye.user.userType);else throw new Error(Ye.message||"Erro no cadastro")}}catch(De){B({title:t?"Erro no login":"Erro no cadastro",description:De.message,variant:"destructive"})}finally{P(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-8 xl:p-12",children:e.jsxs("div",{className:"max-w-md w-full text-center lg:text-left space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 sm:gap-3",children:[e.jsx(dc,{size:40,className:"sm:w-12 sm:h-12"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"LifeBee"}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400 text-xs sm:text-sm font-medium",children:"Cuidados Profissionais"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white leading-tight",children:"Conectamos você com profissionais de saúde qualificados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base lg:text-lg",children:"Acompanhantes hospitalares prontos para cuidar de você"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center lg:justify-start",children:[e.jsx(Zs,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 text-xs sm:text-sm",children:"🏃‍♂️ Fisioterapia"}),e.jsx(Zs,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 text-xs sm:text-sm",children:"💉 Enfermagem"}),e.jsx(Zs,{variant:"secondary",className:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200 text-xs sm:text-sm",children:"🏥 Acompanhamento"})]})]})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-8 xl:p-12",children:e.jsxs(ot,{className:"w-full max-w-md shadow-xl border-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:[e.jsxs(Wt,{className:"space-y-3 sm:space-y-4 pb-4 sm:pb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t?"Entrar na conta":"Criar conta"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs sm:text-sm",children:t?"Acesse sua conta para continuar":"Junte-se à nossa comunidade de cuidados"})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-1 flex w-full",children:[e.jsx(Te,{variant:"ghost",className:`flex-1 rounded-lg transition-all duration-200 text-xs sm:text-sm lg:text-base py-2 sm:py-3 lg:py-4 px-2 sm:px-4 lg:px-6 ${t?"bg-white shadow-sm text-gray-900 dark:bg-gray-600 dark:text-white":"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"}`,onClick:()=>{r(!0),X()},children:"Entrar"}),e.jsx(Te,{variant:"ghost",className:`flex-1 rounded-lg transition-all duration-200 text-xs sm:text-sm lg:text-base py-2 sm:py-3 lg:py-4 px-2 sm:px-4 lg:px-6 ${t?"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white":"bg-white shadow-sm text-gray-900 dark:bg-gray-600 dark:text-white"}`,onClick:()=>{r(!1),X()},children:"Cadastrar"})]})]}),e.jsxs(lt,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("form",{onSubmit:ce,className:"space-y-3 sm:space-y-4",children:[!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Você é:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 lg:gap-4",children:[e.jsxs(Te,{type:"button",variant:o==="client"?"default":"outline",className:`h-10 sm:h-12 lg:h-14 text-xs sm:text-sm lg:text-base px-2 sm:px-4 lg:px-6 ${o==="client"?"bg-yellow-500 hover:bg-yellow-600":"border-gray-300"}`,onClick:()=>c("client"),children:[e.jsx($r,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 mr-1 sm:mr-2"}),"Cliente"]}),e.jsxs(Te,{type:"button",variant:o==="provider"?"default":"outline",className:`h-10 sm:h-12 lg:h-14 text-xs sm:text-sm lg:text-base px-2 sm:px-4 lg:px-6 ${o==="provider"?"bg-yellow-500 hover:bg-yellow-600":"border-gray-300"}`,onClick:()=>c("provider"),children:[e.jsx(ty,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 mr-1 sm:mr-2"}),"Profissional"]})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome completo"}),e.jsx(ht,{type:"text",placeholder:"Seu nome completo",value:g,onChange:W,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${q?"border-red-500 focus:border-red-500":""}`,autoComplete:"name",required:!t}),q&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:q})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefone"}),e.jsx(ht,{type:"tel",placeholder:"(11) 99999-9999",value:j,onChange:fe,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${ge?"border-red-500 focus:border-red-500":""}`,autoComplete:"tel",required:!t}),ge&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:ge})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx(ht,{type:"email",placeholder:"seu@email.com",value:h,onChange:R,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${U?"border-red-500 focus:border-red-500":""}`,autoComplete:"email",required:!0}),U&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:U})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(ht,{type:a?"text":"password",placeholder:"Sua senha",value:m,onChange:E,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 pr-10 ${ee?"border-red-500 focus:border-red-500":""}`,autoComplete:t?"current-password":"new-password",required:!0}),e.jsx(Te,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-10 sm:h-12 w-10 sm:w-12 p-0 hover:bg-transparent",onClick:()=>i(!a),children:a?e.jsx(qc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}):e.jsx(No,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]}),ee&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:ee}),!t&&m&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(xe=>{const je=Ne(m);return e.jsx("div",{className:`h-1 flex-1 rounded-full transition-all duration-300 ${xe<=je.strength?je.color:"bg-gray-200"}`},xe)})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Força da senha: ",Ne(m).text]})]})]}),!t&&e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar senha"}),e.jsx(ht,{type:"password",placeholder:"Confirme sua senha",value:v,onChange:D,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${ue?"border-red-500 focus:border-red-500":""}`,autoComplete:"new-password",required:!t}),ue&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:ue})]}),e.jsx(Te,{type:"submit",disabled:S,className:"w-full h-10 sm:h-12 lg:h-14 bg-yellow-500 hover:bg-yellow-600 text-white font-medium text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8",children:S?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),t?"Entrando...":"Cadastrando..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t?"Entrar":"Criar conta"}),e.jsx(Jp,{className:"h-4 w-4"})]})})]}),e.jsxs("div",{className:"text-center space-y-2 sm:space-y-3",children:[e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[t?"Não tem uma conta?":"Já tem uma conta?",e.jsx("button",{type:"button",className:"ml-1 text-yellow-600 hover:text-yellow-700 font-medium",onClick:le,children:t?"Cadastre-se":"Faça login"})]}),t&&e.jsx("button",{type:"button",className:"text-xs sm:text-sm text-yellow-600 hover:text-yellow-700",children:"Esqueceu sua senha?"})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:e.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-500 dark:text-gray-400",children:"Ou continue com"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs(Te,{type:"button",variant:"outline",className:"h-10 sm:h-12 flex items-center justify-center gap-2 text-xs sm:text-sm border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",onClick:xe=>{xe.preventDefault(),xe.stopPropagation(),console.log("🔘 Botão Google clicado!"),console.log("🔘 Estado isLoading:",S),console.log("🔘 Evento:",xe),console.log("🔘 Target:",xe.target),console.log("🔘 Current Target:",xe.currentTarget),S?console.log("❌ Botão desabilitado devido ao estado de loading"):se("google")},disabled:S,children:[e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),e.jsxs(Te,{type:"button",variant:"outline",className:"h-10 sm:h-12 flex items-center justify-center gap-2 text-xs sm:text-sm border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",onClick:()=>se("apple"),disabled:S,children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Apple"]})]})]})]})]})})]})}function Bm(){const[,s]=qs();return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(ot,{className:"w-full max-w-md mx-4",children:e.jsxs(lt,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(Wa,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Página não encontrada"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600 mb-6",children:"A página que você está procurando não existe ou foi movida."}),e.jsxs(Te,{onClick:()=>s("/"),className:"w-full",children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),"Voltar para Home"]})]})})})}function y_(){const{user:s}=cr(),{toast:t}=ks(),[r,a]=_.useState([]),[i,o]=_.useState(!0),[c,h]=_.useState("all");_.useEffect(()=>{s?.userType==="provider"&&u()},[s]);const u=async()=>{o(!0);try{const g=await fetch(`${st()}/api/appointments/provider`,{credentials:"include"});if(g.ok){const k=await g.json();a(k)}else a([])}catch{a([])}finally{o(!1)}},m=g=>{switch(g){case"agendado":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"confirmado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"em_andamento":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"concluido":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},x=g=>{switch(g){case"confirmado":return e.jsx(Xt,{className:"h-3 w-3"});case"cancelado":return e.jsx(Qn,{className:"h-3 w-3"});case"em_andamento":return e.jsx(Kp,{className:"h-3 w-3"});case"concluido":return e.jsx(Xt,{className:"h-3 w-3"});default:return e.jsx(Wa,{className:"h-3 w-3"})}},v=g=>{switch(g){case"agendado":return"Agendado";case"confirmado":return"Confirmado";case"em_andamento":return"Em Andamento";case"concluido":return"Concluído";case"cancelado":return"Cancelado";default:return g}},b=c==="all"?r:r.filter(g=>g.status===c);return e.jsx(Ao,{children:e.jsxs("div",{className:"max-w-3xl mx-auto py-4 sm:py-6 px-2 sm:px-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[e.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),children:e.jsx($s,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Agenda do Profissional"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx(Te,{variant:c==="all"?"default":"outline",size:"sm",onClick:()=>h("all"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${c==="all"?"bg-yellow-500 hover:bg-yellow-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Todos"}),e.jsx(Te,{variant:c==="agendado"?"default":"outline",size:"sm",onClick:()=>h("agendado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${c==="agendado"?"bg-blue-500 hover:bg-blue-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Agendados"}),e.jsx(Te,{variant:c==="confirmado"?"default":"outline",size:"sm",onClick:()=>h("confirmado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${c==="confirmado"?"bg-green-500 hover:bg-green-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Confirmados"}),e.jsx(Te,{variant:c==="em_andamento"?"default":"outline",size:"sm",onClick:()=>h("em_andamento"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${c==="em_andamento"?"bg-orange-500 hover:bg-orange-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Em andamento"}),e.jsx(Te,{variant:c==="concluido"?"default":"outline",size:"sm",onClick:()=>h("concluido"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${c==="concluido"?"bg-gray-500 hover:bg-gray-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Concluídos"}),e.jsx(Te,{variant:c==="cancelado"?"default":"outline",size:"sm",onClick:()=>h("cancelado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${c==="cancelado"?"bg-red-500 hover:bg-red-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Cancelados"})]}),i?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Carregando agendamentos..."}):b.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Nenhum agendamento encontrado."}):e.jsx("div",{className:"space-y-4",children:b.map(g=>e.jsxs(ot,{children:[e.jsxs(Wt,{className:"flex flex-col sm:flex-row sm:items-center gap-3 p-4",children:[e.jsx($r,{className:"h-6 w-6 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(es,{className:"text-base sm:text-lg font-semibold truncate",children:g.clientName}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[Wl(new Date(g.date),"dd 'de' MMMM 'de' yyyy",{locale:Au})," às ",g.time]})]}),e.jsxs(Zs,{className:`${m(g.status)} flex-shrink-0`,children:[x(g.status),e.jsx("span",{className:"ml-1 hidden sm:inline",children:v(g.status)}),e.jsx("span",{className:"ml-1 sm:hidden",children:v(g.status).charAt(0)})]})]}),e.jsx(lt,{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Tipo: ",e.jsx("span",{className:"font-medium",children:g.type==="presencial"?"Presencial":"Online"})]}),g.location&&e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Local: ",e.jsx("span",{className:"font-medium truncate block",children:g.location})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Duração: ",e.jsxs("span",{className:"font-medium",children:[g.duration," min"]})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Valor: ",e.jsxs("span",{className:"font-medium",children:["R$ ",g.price]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.canConfirm&&e.jsx(Te,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Agendamento confirmado!"}),children:"Confirmar"}),g.canStart&&e.jsx(Te,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Atendimento iniciado!"}),children:"Iniciar"}),g.canFinish&&e.jsx(Te,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Atendimento concluído!"}),children:"Concluir"}),g.canCancel&&e.jsx(Te,{size:"sm",variant:"destructive",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Agendamento cancelado!"}),children:"Cancelar"})]})]})})]},g.id))})]})})}function qm({params:s}){const{user:t}=cr(),{toast:r}=ks(),[a,i]=_.useState(""),[o,c]=_.useState(""),[h,u]=_.useState(null),[m,x]=_.useState(!1),v=_.useRef(null),b=_.useRef(null),g=_.useRef(null),[k,j]=_.useState([]),[T,S]=_.useState([]),[P,B]=_.useState(!0),[,U]=qs(),[Q,ge]=wg("/messages/:conversationId"),ae=s?.conversationId||null,ee=async()=>{try{B(!0);const E=sessionStorage.getItem("token");if(!E){r({title:"Erro de autenticação",description:"Faça login para acessar as mensagens",variant:"destructive"});return}const D=await fetch(`${st()}/api/messages`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`}});if(D.ok){const W=await D.json();S(W)}else D.status===401?r({title:"Sessão expirada",description:"Faça login novamente",variant:"destructive"}):r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}catch{r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}finally{B(!1)}},K=async E=>{try{const D=sessionStorage.getItem("token");if(!D)return;const W=await fetch(`${st()}/api/messages/${E}`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`}});if(W.ok){const se=await W.json();j(se)}else W.status===404&&(r({title:"Conversa não encontrada",description:"Esta conversa não existe ou você não tem acesso.",variant:"destructive"}),U("/messages"))}catch{}};_.useEffect(()=>{ee()},[]),_.useEffect(()=>{ae&&K(ae)},[ae]);const ue=T.filter(E=>E.professionalName.toLowerCase().includes(o.toLowerCase())||E.specialization.toLowerCase().includes(o.toLowerCase())),I=T.find(E=>String(E.id)===String(ae)),q=()=>{g.current?.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{q()},[k]);const ne=E=>{const D=new Date,W=new Date(E),se=D.getTime()-W.getTime(),X=Math.floor(se/(1e3*60)),le=Math.floor(se/(1e3*60*60)),ce=Math.floor(se/(1e3*60*60*24));return X<1?"agora":X<60?`${X}m`:le<24?`${le}h`:ce<7?`${ce}d`:W.toLocaleDateString("pt-BR")},Y=E=>new Date(E).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),he=async E=>{if(!I)return;x(!0);const D=sessionStorage.getItem("token");if(!D){r({title:"Erro de autenticação",description:"Faça login para enviar arquivos",variant:"destructive"}),x(!1);return}try{const W=new FormData;W.append("file",E),W.append("conversationId",I.id.toString()),W.append("messageType",E.type.startsWith("image/")?"image":"file");const se=await fetch(`${st()}/api/messages/upload`,{method:"POST",credentials:"include",headers:{Authorization:`Bearer ${D}`},body:W});if(se.ok){const X=await se.json(),le={id:Date.now(),senderId:t?.id||0,content:E.type.startsWith("image/")?"📷 Imagem enviada":`📎 ${E.name}`,timestamp:new Date,isRead:!1,type:E.type.startsWith("image/")?"image":"file",attachmentUrl:X.attachmentUrl,fileName:E.name};j(ce=>[...ce,le]),r({title:"Arquivo enviado",description:"Seu arquivo foi enviado com sucesso"})}else throw new Error("Erro ao enviar arquivo")}catch(W){console.error("Erro ao enviar arquivo:",W),r({title:"Erro",description:"Não foi possível enviar o arquivo",variant:"destructive"})}finally{x(!1)}},pe=E=>{const D=E.target.files?.[0];if(D){if(D.size>10*1024*1024){r({title:"Arquivo muito grande",description:"O arquivo deve ter no máximo 10MB",variant:"destructive"});return}if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(D.type)){r({title:"Tipo de arquivo não suportado",description:"Apenas imagens, PDFs e documentos são permitidos",variant:"destructive"});return}he(D)}},oe=()=>{b.current?.click()},ie=()=>{v.current?.click()},Ne=async()=>{if(!a.trim()||!I)return;const E=sessionStorage.getItem("token");if(!E){r({title:"Erro de autenticação",description:"Faça login para enviar mensagens",variant:"destructive"});return}try{const D={id:Date.now(),senderId:t?.id||0,content:a,timestamp:new Date,isRead:!1,type:"text"};j(se=>[...se,D]),i(""),(await fetch(`${st()}/api/messages`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({recipientId:I.professionalId,conversationId:Number(ae),content:a,type:"text"})})).ok?ae&&K(ae):(j(se=>se.filter(X=>X.id!==D.id)),r({title:"Erro",description:"Não foi possível enviar a mensagem",variant:"destructive"}))}catch{r({title:"Erro de conexão",description:"Não foi possível enviar a mensagem",variant:"destructive"})}},J=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),Ne())},fe=E=>{U(`/messages/${E}`)},R=async E=>{try{const D=sessionStorage.getItem("token");if(!D)return;(await fetch(`${st()}/api/messages/conversation/${E}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`}})).ok?(r({title:"Conversa excluída",description:"A conversa foi removida com sucesso."}),ee()):r({title:"Erro",description:"Não foi possível excluir a conversa",variant:"destructive"})}catch{r({title:"Erro",description:"Erro ao excluir conversa",variant:"destructive"})}};return ae?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>U("/messages"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors lg:hidden",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white sticky top-[57px] z-40 shadow-sm",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Bi,{className:"w-10 h-10",children:[e.jsx(qi,{src:I?.professionalAvatar?`${st()}${I.professionalAvatar}`:void 0,alt:I?.professionalName}),e.jsx($i,{className:"bg-yellow-500 text-white",children:I?.professionalName.split(" ").map(E=>E[0]).join("")})]}),I?.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:I?.professionalName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:I?.specialization}),I?.isOnline&&e.jsx("span",{className:"text-xs text-green-600",children:"online"})]})]})]})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-32 space-y-4",children:[k.map(E=>{const D=E.senderId===t?.id;return e.jsx("div",{className:`flex ${D?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md ${D?"order-2":""}`,children:[!D&&e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:I?.professionalName})}),e.jsx("div",{className:`rounded-2xl px-4 py-2 ${D?"bg-yellow-500 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:E.content})}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${D?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:Y(E.timestamp)}),D&&e.jsx("div",{className:"text-gray-500",children:E.isRead?e.jsx(Qp,{className:"h-3 w-3 text-blue-500"}):e.jsx(cc,{className:"h-3 w-3"})})]})]})},E.id)}),e.jsx("div",{ref:g})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-white z-40",children:e.jsxs("div",{className:"flex items-center gap-2 max-w-4xl mx-auto",children:[e.jsx(Te,{variant:"ghost",size:"sm",onClick:ie,disabled:m,title:"Enviar arquivo",children:e.jsx(rg,{className:"h-4 w-4"})}),e.jsx(Te,{variant:"ghost",size:"sm",onClick:oe,disabled:m,title:"Tirar foto",children:e.jsx(Ro,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsx(ht,{placeholder:"Digite sua mensagem...",value:a,onChange:E=>i(E.target.value),onKeyPress:J,className:"pr-10"})}),e.jsx(Te,{onClick:Ne,disabled:!a.trim(),className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e.jsx(qa,{className:"h-4 w-4"})})]})})]}),e.jsx("input",{type:"file",ref:v,onChange:pe,accept:"image/*,.pdf,.txt,.doc,.docx",style:{display:"none"}}),e.jsx("input",{type:"file",ref:b,onChange:pe,accept:"image/*",capture:"environment",style:{display:"none"}}),e.jsx(Ua,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>U("/"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors lg:hidden",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"w-full lg:w-96 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(ht,{placeholder:"Buscar conversas...",value:o,onChange:E=>c(E.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Carregando conversas..."})]})}):ue.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qr,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma conversa encontrada"}),e.jsx("p",{className:"text-gray-500",children:"Você ainda não tem conversas ativas"})]})}):ue.map(E=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",onClick:()=>fe(E.id),children:[e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Bi,{className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx(qi,{src:E.professionalAvatar?`${st()}${E.professionalAvatar}`:void 0,alt:E.professionalName}),e.jsx($i,{className:"bg-yellow-500 text-white text-xs sm:text-sm",children:E.professionalName.split(" ").map(D=>D[0]).join("")})]}),E.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm sm:text-base",children:E.professionalName}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:ne(E.lastMessageTime)})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mb-1 flex-wrap",children:[e.jsx(Zs,{variant:"secondary",className:"text-xs px-2 py-0 bg-yellow-100 text-yellow-800",children:E.specialization}),E.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600",children:E.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex-1 min-w-0",children:E.lastMessage}),E.unreadCount>0&&e.jsx(Zs,{className:"bg-yellow-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center flex-shrink-0",children:E.unreadCount})]}),E.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ss,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:E.location})]})]})]}),e.jsx("button",{className:"ml-1 sm:ml-2 p-1.5 sm:p-2 rounded-full hover:bg-red-100 text-red-600 flex-shrink-0",title:"Excluir conversa",onClick:D=>{D.stopPropagation(),R(E.id)},children:e.jsx(yl,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]},E.id))})]}),e.jsx(Ua,{})]})}function Fc({params:s}){const{user:t}=cr(),{toast:r}=ks(),[a,i]=_.useState(""),[o,c]=_.useState(""),[h,u]=_.useState(null),[m,x]=_.useState(!1),v=_.useRef(null),b=_.useRef(null),g=_.useRef(null),[k,j]=_.useState([]),[T,S]=_.useState([]),[P,B]=_.useState(!0),[,U]=qs(),[Q,ge]=wg("/messages-provider/:conversationId"),ae=s?.conversationId||null,ee=async()=>{try{console.log("🔄 fetchConversations - Iniciando busca de conversas..."),B(!0);const E=sessionStorage.getItem("token");if(!E){console.log("❌ Token não encontrado"),r({title:"Erro de autenticação",description:"Faça login para acessar as mensagens",variant:"destructive"});return}const D=await fetch(`${st()}/api/messages`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`}});if(D.ok){const W=await D.json();console.log("📋 Dados recebidos do backend:",W),S(W),console.log("✅ Conversas atualizadas no estado:",W.length,"conversas")}else D.status===401?(console.log("❌ Erro 401 - Sessão expirada"),r({title:"Sessão expirada",description:"Faça login novamente",variant:"destructive"})):(console.log("❌ Erro na resposta:",D.status),r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"}))}catch(E){console.log("❌ Erro na busca de conversas:",E),r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}finally{B(!1),console.log("🔄 fetchConversations - Finalizado")}},K=async E=>{try{const D=sessionStorage.getItem("token");if(!D)return;const W=await fetch(`${st()}/api/messages/${E}`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`}});if(W.ok){const se=await W.json();j(se)}}catch{}};_.useEffect(()=>{ee()},[]),_.useEffect(()=>{ae&&K(ae)},[ae]),_.useEffect(()=>{console.log("Mensagens carregadas do backend:",k)},[k]);const ue=T.filter(E=>E.clientName?.toLowerCase().includes(o.toLowerCase())),I=T.find(E=>String(E.id)===String(ae)),q=()=>{g.current?.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{q()},[k]);const ne=E=>{const D=new Date,W=new Date(E),se=D.getTime()-W.getTime(),X=Math.floor(se/(1e3*60)),le=Math.floor(se/(1e3*60*60)),ce=Math.floor(se/(1e3*60*60*24));return X<1?"agora":X<60?`${X}m`:le<24?`${le}h`:ce<7?`${ce}d`:W.toLocaleDateString("pt-BR")},Y=E=>new Date(E).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),he=async E=>{if(!I)return;x(!0);const D=sessionStorage.getItem("token");if(!D){r({title:"Erro de autenticação",description:"Faça login para enviar arquivos",variant:"destructive"}),x(!1);return}try{const W=new FormData;W.append("file",E),W.append("conversationId",I.id.toString()),W.append("messageType",E.type.startsWith("image/")?"image":"file");const se=await fetch(`${st()}/api/messages/upload`,{method:"POST",credentials:"include",headers:{Authorization:`Bearer ${D}`},body:W});if(se.ok){const X=await se.json(),le={id:Date.now(),senderId:t?.id||0,content:E.type.startsWith("image/")?"📷 Imagem enviada":`📎 ${E.name}`,timestamp:new Date,isRead:!1,type:E.type.startsWith("image/")?"image":"file",attachmentUrl:X.attachmentUrl,fileName:E.name};j(ce=>[...ce,le]),r({title:"Arquivo enviado",description:"Seu arquivo foi enviado com sucesso"})}else throw new Error("Erro ao enviar arquivo")}catch(W){console.error("Erro ao enviar arquivo:",W),r({title:"Erro",description:"Não foi possível enviar o arquivo",variant:"destructive"})}finally{x(!1)}},pe=E=>{const D=E.target.files?.[0];if(D){if(D.size>10*1024*1024){r({title:"Arquivo muito grande",description:"O arquivo deve ter no máximo 10MB",variant:"destructive"});return}if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(D.type)){r({title:"Tipo de arquivo não suportado",description:"Apenas imagens, PDFs e documentos são permitidos",variant:"destructive"});return}he(D)}},oe=()=>{b.current?.click()},ie=()=>{v.current?.click()},Ne=async()=>{if(!a.trim()||!I)return;const E=sessionStorage.getItem("token");if(!E){r({title:"Erro de autenticação",description:"Faça login para enviar mensagens",variant:"destructive"});return}try{const D={id:Date.now(),senderId:t?.id||0,content:a,timestamp:new Date,isRead:!1,type:"text"};j(se=>[...se,D]),i(""),(await fetch(`${st()}/api/messages`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({recipientId:I.clientId,conversationId:Number(ae),content:a,type:"text"})})).ok?ae&&K(ae):(j(se=>se.filter(X=>X.id!==D.id)),r({title:"Erro",description:"Não foi possível enviar a mensagem",variant:"destructive"}))}catch{r({title:"Erro de conexão",description:"Não foi possível enviar a mensagem",variant:"destructive"})}},J=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),Ne())},fe=E=>{U(`/messages-provider/${E}`)},R=async E=>{try{console.log("🗑️ Tentando excluir conversa:",E);const D=sessionStorage.getItem("token");if(!D)return;const W=await fetch(`${st()}/api/messages/conversation/${E}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`}});W.ok?(console.log("✅ Conversa excluída com sucesso, recarregando lista..."),r({title:"Conversa excluída",description:"A conversa foi removida com sucesso."}),await ee(),console.log("✅ Lista de conversas recarregada")):(console.log("❌ Erro ao excluir conversa:",W.status),r({title:"Erro",description:"Não foi possível excluir a conversa",variant:"destructive"}))}catch(D){console.log("❌ Erro ao excluir conversa:",D),r({title:"Erro",description:"Erro ao excluir conversa",variant:"destructive"})}};return ae?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>U("/messages-provider"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors lg:hidden",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white sticky top-[57px] z-40 shadow-sm",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Bi,{className:"w-10 h-10",children:[e.jsx(qi,{src:I?.clientAvatar?`${st()}${I.clientAvatar}`:void 0,alt:I?.clientName}),e.jsx($i,{className:"bg-yellow-500 text-white",children:I?.clientName?.split(" ").map(E=>E[0]).join("")})]}),I?.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:I?.clientName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:I?.specialization}),I?.isOnline&&e.jsx("span",{className:"text-xs text-green-600",children:"online"})]})]})]})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pb-36 space-y-4",children:[k.map(E=>{const D=E.senderId===t?.id;return e.jsx("div",{className:`flex ${D?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md ${D?"order-2":""}`,children:[!D&&e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:I?.clientName})}),e.jsx("div",{className:`rounded-2xl px-4 py-2 ${D?"bg-yellow-500 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:E.content})}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${D?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:Y(E.timestamp)}),D&&e.jsx("div",{className:"text-gray-500",children:E.isRead?e.jsx(Qp,{className:"h-3 w-3 text-blue-500"}):e.jsx(cc,{className:"h-3 w-3"})})]})]})},E.id)}),e.jsx("div",{ref:g})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-white z-40",children:e.jsxs("div",{className:"flex items-center gap-2 max-w-4xl mx-auto",children:[e.jsx(Te,{variant:"ghost",size:"sm",onClick:ie,disabled:m,title:"Enviar arquivo",children:e.jsx(rg,{className:"h-4 w-4"})}),e.jsx(Te,{variant:"ghost",size:"sm",onClick:oe,disabled:m,title:"Tirar foto",children:e.jsx(Ro,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsx(ht,{placeholder:"Digite sua mensagem...",value:a,onChange:E=>i(E.target.value),onKeyPress:J,className:"pr-10"})}),e.jsx(Te,{onClick:Ne,disabled:!a.trim(),className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e.jsx(qa,{className:"h-4 w-4"})})]})})]}),e.jsx("input",{type:"file",ref:v,onChange:pe,accept:"image/*,.pdf,.txt,.doc,.docx",style:{display:"none"}}),e.jsx("input",{type:"file",ref:b,onChange:pe,accept:"image/*",capture:"environment",style:{display:"none"}})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>U("/provider-dashboard"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors lg:hidden",children:e.jsx($s,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"w-full lg:w-96 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(ht,{placeholder:"Buscar conversas...",value:o,onChange:E=>c(E.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Carregando conversas..."})]})}):ue.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qr,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma conversa encontrada"}),e.jsx("p",{className:"text-gray-500",children:"Você ainda não tem conversas ativas"})]})}):ue.map(E=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",onClick:()=>fe(E.id),children:[e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Bi,{className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx(qi,{src:E.clientAvatar?`${st()}${E.clientAvatar}`:void 0,alt:E.clientName}),e.jsx($i,{className:"bg-yellow-500 text-white text-xs sm:text-sm",children:E.clientName?.split(" ").map(D=>D[0]).join("")})]}),E.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm sm:text-base",children:E.clientName}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:ne(E.lastMessageTime)})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mb-1 flex-wrap",children:[e.jsx(Zs,{variant:"secondary",className:"text-xs px-1.5 sm:px-2 py-0 bg-yellow-100 text-yellow-800",children:E.specialization}),E.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600",children:E.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex-1 min-w-0",children:E.lastMessage}),E.unreadCount>0&&e.jsx(Zs,{className:"bg-yellow-500 text-white text-xs min-w-[18px] sm:min-w-[20px] h-4 sm:h-5 flex items-center justify-center flex-shrink-0",children:E.unreadCount})]}),E.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ss,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:E.location})]})]})]}),e.jsx("button",{className:"ml-1 sm:ml-2 p-1.5 sm:p-2 rounded-full hover:bg-red-100 text-red-600 flex-shrink-0",title:"Excluir conversa",onClick:D=>{D.stopPropagation(),R(E.id)},children:e.jsx(yl,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]},E.id))})]}),e.jsx(O0,{})]})}function b_(){const{toast:s}=ks();return _.useEffect(()=>{console.log("🔄 AuthCallback iniciado"),console.log("🔄 URL atual:",window.location.href),console.log("🔄 Search params:",window.location.search);const t=new URLSearchParams(window.location.search),r=t.get("token"),a=t.get("userType"),i=t.get("error");if(console.log("🔄 Token:",r?"Presente":"Ausente"),console.log("🔄 UserType:",a),console.log("🔄 Error:",i),i){console.log("❌ Erro detectado:",i),s({title:"Erro na autenticação",description:i==="google_auth_failed"?"Falha no login com Google":"Falha no login com Apple",variant:"destructive"}),window.location.href="/login";return}if(r&&a){console.log("✅ Token e userType presentes, processando..."),localStorage.setItem("token",r),console.log("✅ Token salvo no localStorage");try{console.log("🔍 Decodificando token...");const o=JSON.parse(atob(r.split(".")[1]));console.log("🔍 Payload decodificado:",o);const c={id:o.id,email:o.email,userType:o.userType,name:o.name||"Usuário"};console.log("👤 Usuário processado:",c),localStorage.setItem("user",JSON.stringify(c)),console.log("✅ Usuário salvo no localStorage"),s({title:"Login realizado com sucesso!",description:`Bem-vindo(a), ${c.name}`});const h=a==="provider"?"/provider-dashboard":"/home";console.log("🔄 Redirecionando para:",h),window.location.href=h}catch(o){console.error("❌ Erro ao decodificar token:",o),s({title:"Erro na autenticação",description:"Token inválido",variant:"destructive"}),console.log("🔄 Redirecionando para /login devido a erro no token"),window.location.href="/login"}}else console.log("❌ Token ou userType ausentes"),s({title:"Erro na autenticação",description:"Dados de autenticação inválidos",variant:"destructive"}),console.log("🔄 Redirecionando para /login devido a dados inválidos"),window.location.href="/login"},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(dc,{size:48,className:"text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"LifeBee"}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:"Cuidados Profissionais"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processando autenticação..."})]})]})})}function w_(){qs();const{user:s}=cr(),[t,r]=_.useState(null);return _.useEffect(()=>{const a=new URLSearchParams(window.location.search),i=a.get("payment_intent"),o=a.get("redirect_status");i&&o&&r({paymentId:i,status:o==="succeeded"?"approved":o,externalReference:i})},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 flex items-center justify-center p-4",children:e.jsxs(ot,{className:"max-w-md w-full",children:[e.jsxs(Wt,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Xt,{className:"h-8 w-8 text-green-500"})}),e.jsx(es,{className:"text-2xl text-green-700",children:"Pagamento Aprovado!"})]}),e.jsxs(lt,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Seu pagamento foi processado com sucesso. O profissional foi notificado e em breve entrará em contato."}),t&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:"ID do Pagamento:"}),e.jsx("span",{className:"font-mono",children:t.paymentId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-medium text-green-600",children:t.status==="approved"?"Aprovado":t.status})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Próximos passos:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"O profissional foi notificado sobre o pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Ele entrará em contato para agendar o serviço"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Após a conclusão, você poderá avaliar o serviço"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Te,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsxs(Os,{href:"/services",children:[e.jsx(X2,{className:"h-4 w-4 mr-2"}),"Meus Serviços"]})}),e.jsx(Te,{asChild:!0,className:"flex-1",children:e.jsxs(Os,{href:s?.userType==="client"?"/home":"/provider-dashboard",children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Início"]})})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Você receberá um e-mail de confirmação em breve"})})]})]})})}function N_(){qs();const{user:s}=cr(),[t,r]=_.useState(null);_.useEffect(()=>{const o=new URLSearchParams(window.location.search),c=o.get("payment_intent"),h=o.get("redirect_status");c&&h&&r({paymentId:c,status:h==="failed"?"rejected":h,externalReference:c})},[]);const a=o=>{switch(o){case"rejected":return"Pagamento rejeitado";case"cancelled":return"Pagamento cancelado";case"failed":return"Falha no pagamento";default:return"Pagamento não processado"}},i=o=>{switch(o){case"rejected":return"O pagamento foi rejeitado. Isso pode acontecer por falta de limite, dados incorretos ou outros motivos relacionados ao método de pagamento.";case"cancelled":return"O pagamento foi cancelado. Você pode tentar novamente quando desejar.";case"failed":return"Ocorreu uma falha técnica durante o processamento do pagamento.";default:return"Não foi possível processar seu pagamento no momento."}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center p-4",children:e.jsxs(ot,{className:"max-w-md w-full",children:[e.jsxs(Wt,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Qn,{className:"h-8 w-8 text-red-500"})}),e.jsx(es,{className:"text-2xl text-red-700",children:t?a(t.status):"Pagamento não processado"})]}),e.jsxs(lt,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:t?i(t.status):"Ocorreu um problema durante o processamento do seu pagamento."}),t&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:"ID do Pagamento:"}),e.jsx("span",{className:"font-mono",children:t.paymentId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-medium text-red-600",children:a(t.status)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"O que você pode fazer:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Verificar os dados do cartão ou método de pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Tentar novamente com outro método de pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Entrar em contato com nosso suporte se o problema persistir"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Te,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsxs(Os,{href:"/services",children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),"Voltar"]})}),e.jsx(Te,{asChild:!0,className:"flex-1",children:e.jsxs(Os,{href:s?.userType==="client"?"/home":"/provider-dashboard",children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Início"]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs(Te,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[e.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Tentar pagamento novamente"]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Se precisar de ajuda, entre em contato conosco"})})]})]})})}function j_(){qs();const{user:s}=cr(),[t,r]=_.useState(null);return _.useEffect(()=>{const a=new URLSearchParams(window.location.search),i=a.get("payment_intent"),o=a.get("redirect_status");i&&o&&r({paymentId:i,status:o==="processing"?"pending":o,externalReference:i})},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs(ot,{className:"max-w-md w-full",children:[e.jsxs(Wt,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Qs,{className:"h-8 w-8 text-yellow-500"})}),e.jsx(es,{className:"text-2xl text-yellow-700",children:"Pagamento Pendente"})]}),e.jsxs(lt,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Seu pagamento está sendo processado. Isso pode levar alguns minutos para ser confirmado."}),t&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:"ID do Pagamento:"}),e.jsx("span",{className:"font-mono",children:t.paymentId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:"Processando"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"O que acontece agora:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Aguardando confirmação do pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Você receberá uma notificação quando for aprovado"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"O profissional será notificado automaticamente"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Para pagamentos via PIX ou Boleto:"}),e.jsx("p",{className:"text-sm text-blue-700",children:"O pagamento pode levar até 1 hora para ser processado. Você receberá um e-mail de confirmação assim que for aprovado."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Te,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsxs(Os,{href:"/services",children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),"Meus Serviços"]})}),e.jsx(Te,{asChild:!0,className:"flex-1",children:e.jsxs(Os,{href:s?.userType==="client"?"/home":"/provider-dashboard",children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Início"]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs(Te,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",onClick:()=>window.location.reload(),children:[e.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Verificar status"]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Esta página será atualizada automaticamente quando o pagamento for processado"})})]})]})})}function __(){const[s,t]=_.useState(!1),[r,a]=_.useState(!0),{toast:i}=ks(),[,o]=qs();_.useEffect(()=>{c()},[]);const c=async()=>{try{const u=await fetch("/api/stripe/connect/account-status",{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});if(u.ok){const m=await u.json();if(m.connected&&m.chargesEnabled){i({title:"✅ Stripe já configurado!",description:"Redirecionando para o dashboard..."}),setTimeout(()=>{o("/provider-dashboard")},1500);return}}}catch(u){console.error("Erro ao verificar status:",u)}finally{a(!1)}},h=async()=>{try{t(!0);const u=await fetch("/api/stripe/connect/create-account",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!u.ok){const x=await u.json();throw new Error(x.error||"Erro ao conectar Stripe")}const m=await u.json();window.location.href=m.onboardingUrl}catch(u){console.error("Erro ao conectar Stripe:",u),i({title:"Erro",description:u instanceof Error?u.message:"Erro ao conectar Stripe",variant:"destructive"}),t(!1)}};return r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsx(ot,{className:"w-full max-w-2xl",children:e.jsxs(lt,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Es,{className:"h-12 w-12 animate-spin text-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verificando configuração..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsxs(ot,{className:"w-full max-w-2xl shadow-lg",children:[e.jsxs(Wt,{className:"text-center space-y-4 pb-8",children:[e.jsx("div",{className:"mx-auto bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center",children:e.jsx(xl,{className:"h-10 w-10 text-blue-600"})}),e.jsx(es,{className:"text-3xl font-bold",children:"Configure Sua Conta de Pagamentos"}),e.jsx(rd,{className:"text-base",children:"Para começar a receber propostas e pagamentos, você precisa conectar sua conta Stripe"})]}),e.jsxs(lt,{className:"space-y-6",children:[e.jsxs(bo,{className:"bg-blue-50 border-blue-200",children:[e.jsx(oi,{className:"h-5 w-5 text-blue-600"}),e.jsxs(wo,{className:"text-blue-900",children:[e.jsx("strong",{children:"Por que isso é necessário?"}),e.jsx("p",{className:"text-sm mt-2",children:"Para garantir que você receba seus pagamentos de forma rápida e segura, usamos o Stripe - a mesma plataforma usada por empresas como Uber e Airbnb."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"O que você ganha:"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xt,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Pagamentos Automáticos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receba o dinheiro direto na sua conta assim que o serviço for concluído"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xt,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Seguro e Confiável"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Seus dados bancários são protegidos com criptografia de nível bancário"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xt,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Rápido e Fácil"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Leva apenas 3-5 minutos para configurar"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ry,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Comece a Ganhar Hoje"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Após configurar, você já pode receber propostas e pagamentos"})]})]})]}),e.jsx(bo,{children:e.jsxs(wo,{children:[e.jsx("strong",{children:"Você vai precisar ter em mãos:"}),e.jsxs("ul",{className:"text-sm mt-2 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"CPF"}),e.jsx("li",{children:"Data de nascimento"}),e.jsx("li",{children:"Endereço completo"}),e.jsx("li",{children:"Dados bancários (banco, agência, conta)"})]})]})}),e.jsx(Te,{onClick:h,disabled:s,className:"w-full py-6 text-lg bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",size:"lg",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-5 w-5 mr-2 animate-spin"}),"Conectando ao Stripe..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xl,{className:"h-5 w-5 mr-2"}),"Conectar Stripe Agora"]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Ao conectar, você será redirecionado para o site seguro do Stripe.",e.jsx("br",{}),"Seus dados estão protegidos e não são compartilhados com o LifeBee."]})})]})]})})}function S_(){const{user:s,isLoading:t,isAuthenticated:r}=cr();return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full"})}):r?s?.userType==="provider"?e.jsxs(Xd,{children:[e.jsx(ns,{path:"/stripe-setup",component:__}),e.jsx(ns,{path:"/",component:Cm}),e.jsx(ns,{path:"/provider-dashboard",component:Cm}),e.jsx(ns,{path:"/provider-registration",children:e.jsx(o4,{onComplete:()=>window.location.reload()})}),e.jsx(ns,{path:"/provider-orders",component:l4}),e.jsx(ns,{path:"/provider-proposals",component:d4}),e.jsx(ns,{path:"/service-offer/:id",component:v4}),e.jsx(ns,{path:"/messages/:conversationId",component:Fc}),e.jsx(ns,{path:"/messages",component:Fc}),e.jsx(ns,{path:"/messages-provider/:conversationId",component:Fc}),e.jsx(ns,{path:"/messages-provider",component:Fc}),e.jsx(ns,{path:"/agenda",component:Vf}),e.jsx(ns,{path:"/agenda-profissional",component:y_}),e.jsx(ns,{path:"/profile",component:Zf}),e.jsx(ns,{path:"/provider-profile",component:c4}),e.jsx(ns,{path:"/settings",component:Gf}),e.jsx(ns,{path:"/provider-settings",component:x4}),e.jsx(ns,{component:Bm})]}):e.jsxs(Xd,{children:[e.jsx(ns,{path:"/",component:fb}),e.jsx(ns,{path:"/services",component:g_}),e.jsx(ns,{path:"/my-service-requests",component:x_}),e.jsx(ns,{path:"/agenda",component:Vf}),e.jsx(ns,{path:"/messages/:conversationId",component:qm}),e.jsx(ns,{path:"/messages",component:qm}),e.jsx(ns,{path:"/profile",component:Zf}),e.jsx(ns,{path:"/settings",component:Gf}),e.jsx(ns,{path:"/payment",component:lw}),e.jsx(ns,{path:"/payment/success",component:w_}),e.jsx(ns,{path:"/payment/failure",component:N_}),e.jsx(ns,{path:"/payment/pending",component:j_}),e.jsx(ns,{path:"/professional/:id",component:hw}),e.jsx(ns,{path:"/servico",component:y4}),e.jsx(ns,{path:"/my-requests",component:I4}),e.jsx(ns,{component:Bm})]}):e.jsxs(Xd,{children:[e.jsx(ns,{path:"/auth-callback",component:b_}),e.jsx(ns,{path:"*",children:e.jsx(v_,{onLogin:()=>{window.location.reload()}})})]})}function k_(){const[s,t]=_.useState(!0);return e.jsx(_p,{client:kp,children:e.jsx(Pp,{defaultTheme:"light",storageKey:"lifebee-theme",children:e.jsxs(Tg,{children:[s?e.jsx(Ky,{onComplete:()=>t(!1)}):e.jsx(S_,{}),e.jsx(ug,{})]})})})}window.addEventListener("unhandledrejection",s=>{console.warn("Unhandled promise rejection:",s.reason),s.preventDefault()});window.addEventListener("error",s=>{console.warn("Uncaught error:",s.error)});(()=>{const s=()=>{try{const r=document.getElementById("torrent-scanner-popup");r&&r.parentNode&&r.parentNode.removeChild(r),document.querySelectorAll('[id*="torrent-scanner-popup"], [class*="torrent-scanner-popup"]').forEach(i=>i.parentNode&&i.parentNode.removeChild(i))}catch{}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s,{once:!0}):s();const t=new MutationObserver(r=>{for(const a of r)a.addedNodes.forEach(i=>{if(!(i instanceof HTMLElement))return;const o=i.id||"",c=i.className?.toString?.()||"";if(o.includes("torrent-scanner-popup")||c.includes("torrent-scanner-popup"))try{i.parentNode&&i.parentNode.removeChild(i)}catch{}i.querySelectorAll?.('[id*="torrent-scanner-popup"], [class*="torrent-scanner-popup"]')?.forEach(u=>{try{u.parentNode&&u.parentNode.removeChild(u)}catch{}})})});try{t.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})();M1.createRoot(document.getElementById("root")).render(e.jsx(_.StrictMode,{children:e.jsx(oy,{children:e.jsx(_p,{client:kp,children:e.jsxs(Pp,{defaultTheme:"light",storageKey:"lifebee-ui-theme",children:[e.jsx(k_,{}),e.jsx(ug,{})]})})})}));export{ws as _};
