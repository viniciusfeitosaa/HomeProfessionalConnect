const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-R2fo7FM4.js","assets/vendor-C6Ba5J37.js","assets/ui-BgcdD96O.js","assets/utils--BulIq_u.js"])))=>i.map(i=>d[i]);
import{r as P,j as e,P as hs,c as wo,a as Uf,u as Lr,B as Hx,b as sl,d as jh,e as Gt,f as rl,g as _h,R as $x,h as Wf,i as Gn,k as Ux,l as Wx,m as qc,D as Vf,C as Zf,n as Gf,o as Ul,p as Yf,A as Kf,q as Jf,S as Vx,O as Sh,s as Qf,t as kh,v as Ph,T as Ch,w as Lh,x as Xf,y as em,z as Zx,E as tm,F as Gx,I as Yx,G as sm,H as rm,J as nm,K as Kx,L as am,M as im,N as om,Q as lm,U as cm,V as dm,W as hm,X as Jx,Y as Qx,Z as Xx,_ as um,$ as ev,a0 as tv,a1 as Pc,a2 as sv,a3 as rv,a4 as nv,a5 as av,a6 as iv,a7 as fm,a8 as ov}from"./ui-BgcdD96O.js";import{a as lv,r as cv,g as dv}from"./vendor-C6Ba5J37.js";import{t as hv,c as uv,a as Hc}from"./utils--BulIq_u.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var hc={},Lu;function fv(){if(Lu)return hc;Lu=1;var s=lv();return hc.createRoot=s.createRoot,hc.hydrateRoot=s.hydrateRoot,hc}var mv=fv(),hl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uo=typeof window>"u"||"Deno"in globalThis;function on(){}function pv(s,t){return typeof s=="function"?s(t):s}function Hd(s){return typeof s=="number"&&s>=0&&s!==1/0}function mm(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Pi(s,t){return typeof s=="function"?s(t):s}function ua(s,t){return typeof s=="function"?s(t):s}function Au(s,t){const{type:r="all",exact:a,fetchStatus:i,predicate:l,queryKey:d,stale:u}=s;if(d){if(a){if(t.queryHash!==Ah(d,t.options))return!1}else if(!Ol(t.queryKey,d))return!1}if(r!=="all"){const h=t.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||i&&i!==t.state.fetchStatus||l&&!l(t))}function Tu(s,t){const{exact:r,status:a,predicate:i,mutationKey:l}=s;if(l){if(!t.options.mutationKey)return!1;if(r){if(fo(t.options.mutationKey)!==fo(l))return!1}else if(!Ol(t.options.mutationKey,l))return!1}return!(a&&t.state.status!==a||i&&!i(t))}function Ah(s,t){return(t?.queryKeyHashFn||fo)(s)}function fo(s){return JSON.stringify(s,(t,r)=>$d(r)?Object.keys(r).sort().reduce((a,i)=>(a[i]=r[i],a),{}):r)}function Ol(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ol(s[r],t[r])):!1}function pm(s,t){if(s===t)return s;const r=Eu(s)&&Eu(t);if(r||$d(s)&&$d(t)){const a=r?s:Object.keys(s),i=a.length,l=r?t:Object.keys(t),d=l.length,u=r?[]:{},h=new Set(a);let p=0;for(let v=0;v<d;v++){const y=r?v:l[v];(!r&&h.has(y)||r)&&s[y]===void 0&&t[y]===void 0?(u[y]=void 0,p++):(u[y]=pm(s[y],t[y]),u[y]===s[y]&&s[y]!==void 0&&p++)}return i===d&&p===i?s:u}return t}function Cc(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(s[r]!==t[r])return!1;return!0}function Eu(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function $d(s){if(!Mu(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Mu(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Mu(s){return Object.prototype.toString.call(s)==="[object Object]"}function gv(s){return new Promise(t=>{setTimeout(t,s)})}function Ud(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?pm(s,t):t}function xv(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function vv(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var Th=Symbol();function gm(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===Th?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function xm(s,t){return typeof s=="function"?s(...t):!!s}var yv=class extends hl{#t;#e;#s;constructor(){super(),this.#s=s=>{if(!uo&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#s=s,this.#e?.(),this.#e=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#t!==s&&(this.#t=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Eh=new yv,bv=class extends hl{#t=!0;#e;#s;constructor(){super(),this.#s=s=>{if(!uo&&window.addEventListener){const t=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#s=s,this.#e?.(),this.#e=s(this.setOnline.bind(this))}setOnline(s){this.#t!==s&&(this.#t=s,this.listeners.forEach(r=>{r(s)}))}isOnline(){return this.#t}},Lc=new bv;function Wd(){let s,t;const r=new Promise((i,l)=>{s=i,t=l});r.status="pending",r.catch(()=>{});function a(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{a({status:"fulfilled",value:i}),s(i)},r.reject=i=>{a({status:"rejected",reason:i}),t(i)},r}function wv(s){return Math.min(1e3*2**s,3e4)}function vm(s){return(s??"online")==="online"?Lc.isOnline():!0}var ym=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function bd(s){return s instanceof ym}function bm(s){let t=!1,r=0,a=!1,i;const l=Wd(),d=j=>{a||(N(new ym(j)),s.abort?.())},u=()=>{t=!0},h=()=>{t=!1},p=()=>Eh.isFocused()&&(s.networkMode==="always"||Lc.isOnline())&&s.canRun(),v=()=>vm(s.networkMode)&&s.canRun(),y=j=>{a||(a=!0,s.onSuccess?.(j),i?.(),l.resolve(j))},N=j=>{a||(a=!0,s.onError?.(j),i?.(),l.reject(j))},g=()=>new Promise(j=>{i=T=>{(a||p())&&j(T)},s.onPause?.()}).then(()=>{i=void 0,a||s.onContinue?.()}),C=()=>{if(a)return;let j;const T=r===0?s.initialPromise:void 0;try{j=T??s.fn()}catch(A){j=Promise.reject(A)}Promise.resolve(j).then(y).catch(A=>{if(a)return;const S=s.retry??(uo?0:3),q=s.retryDelay??wv,V=typeof q=="function"?q(r,A):q,Y=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,A);if(t||!Y){N(A);return}r++,s.onFail?.(r,A),gv(V).then(()=>p()?void 0:g()).then(()=>{t?N(A):C()})})};return{promise:l,cancel:d,continue:()=>(i?.(),l),cancelRetry:u,continueRetry:h,canStart:v,start:()=>(v()?C():g().then(C),l)}}var Nv=s=>setTimeout(s,0);function jv(){let s=[],t=0,r=u=>{u()},a=u=>{u()},i=Nv;const l=u=>{t?s.push(u):i(()=>{r(u)})},d=()=>{const u=s;s=[],u.length&&i(()=>{a(()=>{u.forEach(h=>{r(h)})})})};return{batch:u=>{let h;t++;try{h=u()}finally{t--,t||d()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{a=u},setScheduler:u=>{i=u}}}var mr=jv(),wm=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hd(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(uo?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},_v=class extends wm{#t;#e;#s;#r;#n;#i;#o;constructor(s){super(),this.#o=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#r=s.client,this.#s=this.#r.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#t=Sv(this.options),this.state=s.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(s){this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(s,t){const r=Ud(this.state.data,s,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(s,t){this.#a({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#n?.promise;return this.#n?.cancel(s),t?t.then(on).catch(on):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(s=>ua(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Th||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Pi(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!mm(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(s,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(s&&this.setOptions(s),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},i=()=>{const h=gm(this.options,t),v=(()=>{const y={client:this.#r,queryKey:this.queryKey,meta:this.meta};return a(y),y})();return this.#o=!1,this.options.persister?this.options.persister(h,v,this):h(v)},d=(()=>{const h={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};return a(h),h})();this.options.behavior?.onFetch(d,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta});const u=h=>{bd(h)&&h.silent||this.#a({type:"error",error:h}),bd(h)||(this.#s.config.onError?.(h,this),this.#s.config.onSettled?.(this.state.data,h,this)),this.scheduleGc()};return this.#n=bm({initialPromise:t?.initialPromise,fn:d.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{if(h===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(p){u(p);return}this.#s.config.onSuccess?.(h,this),this.#s.config.onSettled?.(h,this.state.error,this),this.scheduleGc()},onError:u,onFail:(h,p)=>{this.#a({type:"failed",failureCount:h,error:p})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(s){const t=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Nm(r.data,this.options),fetchMeta:s.meta??null};case"success":return this.#e=void 0,{...r,data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=s.error;return bd(a)&&a.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=t(this.state),mr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:s})})}};function Nm(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vm(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Sv(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var kv=class extends hl{constructor(s={}){super(),this.config=s,this.#t=new Map}#t;build(s,t,r){const a=t.queryKey,i=t.queryHash??Ah(a,t);let l=this.get(i);return l||(l=new _v({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(t),state:r,defaultOptions:s.getQueryDefaults(a)}),this.add(l)),l}add(s){this.#t.has(s.queryHash)||(this.#t.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#t.get(s.queryHash);t&&(s.destroy(),t===s&&this.#t.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){mr.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#t.get(s)}getAll(){return[...this.#t.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(r=>Au(t,r))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(r=>Au(s,r)):t}notify(s){mr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){mr.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){mr.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Pv=class extends wm{#t;#e;#s;constructor(s){super(),this.mutationId=s.mutationId,this.#e=s.mutationCache,this.#t=[],this.state=s.state||jm(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(t=>t!==s),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(s){const t=()=>{this.#r({type:"continue"})};this.#s=bm({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(i,l)=>{this.#r({type:"failed",failureCount:i,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",a=!this.#s.canStart();try{if(r)t();else{this.#r({type:"pending",variables:s,isPaused:a}),await this.#e.config.onMutate?.(s,this);const l=await this.options.onMutate?.(s);l!==this.state.context&&this.#r({type:"pending",context:l,variables:s,isPaused:a})}const i=await this.#s.start();return await this.#e.config.onSuccess?.(i,s,this.state.context,this),await this.options.onSuccess?.(i,s,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,s,this.state.context),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,s,this.state.context,this),await this.options.onError?.(i,s,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,s,this.state.context),i}finally{this.#r({type:"error",error:i})}}finally{this.#e.runNext(this)}}#r(s){const t=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),mr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(s)}),this.#e.notify({mutation:this,type:"updated",action:s})})}};function jm(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Cv=class extends hl{constructor(s={}){super(),this.config=s,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(s,t,r){const a=new Pv({mutationCache:this,mutationId:++this.#s,options:s.defaultMutationOptions(t),state:r});return this.add(a),a}add(s){this.#t.add(s);const t=uc(s);if(typeof t=="string"){const r=this.#e.get(t);r?r.push(s):this.#e.set(t,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#t.delete(s)){const t=uc(s);if(typeof t=="string"){const r=this.#e.get(t);if(r)if(r.length>1){const a=r.indexOf(s);a!==-1&&r.splice(a,1)}else r[0]===s&&this.#e.delete(t)}}this.notify({type:"removed",mutation:s})}canRun(s){const t=uc(s);if(typeof t=="string"){const a=this.#e.get(t)?.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){const t=uc(s);return typeof t=="string"?this.#e.get(t)?.find(a=>a!==s&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){mr.batch(()=>{this.#t.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(s){const t={exact:!0,...s};return this.getAll().find(r=>Tu(t,r))}findAll(s={}){return this.getAll().filter(t=>Tu(s,t))}notify(s){mr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return mr.batch(()=>Promise.all(s.map(t=>t.continue().catch(on))))}};function uc(s){return s.options.scope?.id}function Iu(s){return{onFetch:(t,r)=>{const a=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const p=async()=>{let v=!1;const y=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},N=gm(t.options,t.fetchOptions),g=async(C,j,T)=>{if(v)return Promise.reject();if(j==null&&C.pages.length)return Promise.resolve(C);const S=(()=>{const ue={client:t.client,queryKey:t.queryKey,pageParam:j,direction:T?"backward":"forward",meta:t.options.meta};return y(ue),ue})(),q=await N(S),{maxPages:V}=t.options,Y=T?vv:xv;return{pages:Y(C.pages,q,V),pageParams:Y(C.pageParams,j,V)}};if(i&&l.length){const C=i==="backward",j=C?Lv:Ru,T={pages:l,pageParams:d},A=j(a,T);u=await g(T,A,C)}else{const C=s??l.length;do{const j=h===0?d[0]??a.initialPageParam:Ru(a,u);if(h>0&&j==null)break;u=await g(u,j),h++}while(h<C)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=p}}}function Ru(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function Lv(s,{pages:t,pageParams:r}){return t.length>0?s.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var _m=class{#t;#e;#s;#r;#n;#i;#o;#a;constructor(s={}){this.#t=s.queryCache||new kv,this.#e=s.mutationCache||new Cv,this.#s=s.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=Eh.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=Lc.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(s){return this.#t.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#e.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),r=this.#t.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(Pi(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(s){return this.#t.findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),l=this.#t.get(a.queryHash)?.state.data,d=pv(t,l);if(d!==void 0)return this.#t.build(this,a).setData(d,{...r,manual:!0})}setQueriesData(s,t,r){return mr.batch(()=>this.#t.findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state}removeQueries(s){const t=this.#t;mr.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=this.#t;return mr.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const r={revert:!0,...t},a=mr.batch(()=>this.#t.findAll(s).map(i=>i.cancel(r)));return Promise.all(a).then(on).catch(on)}invalidateQueries(s,t={}){return mr.batch(()=>(this.#t.findAll(s).forEach(r=>{r.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},t)))}refetchQueries(s,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=mr.batch(()=>this.#t.findAll(s).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let l=i.fetch(void 0,r);return r.throwOnError||(l=l.catch(on)),i.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(on)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=this.#t.build(this,t);return r.isStaleByTime(Pi(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(on).catch(on)}fetchInfiniteQuery(s){return s.behavior=Iu(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(on).catch(on)}ensureInfiniteQueryData(s){return s.behavior=Iu(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Lc.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(s){this.#s=s}setQueryDefaults(s,t){this.#r.set(fo(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#r.values()],r={};return t.forEach(a=>{Ol(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,t){this.#n.set(fo(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#n.values()],r={};return t.forEach(a=>{Ol(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#s.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=Ah(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Th&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#s.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Av=class extends hl{constructor(s,t){super(),this.options=t,this.#t=s,this.#a=null,this.#o=Wd(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#s=void 0;#r=void 0;#n;#i;#o;#a;#p;#u;#f;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Ou(this.#e,this.options)?this.#h():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vd(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vd(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#e.removeObserver(this)}setOptions(s){const t=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ua(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),t._defaulted&&!Cc(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const a=this.hasListeners();a&&Du(this.#e,r,this.options,t)&&this.#h(),this.updateResult(),a&&(this.#e!==r||ua(this.options.enabled,this.#e)!==ua(t.enabled,this.#e)||Pi(this.options.staleTime,this.#e)!==Pi(t.staleTime,this.#e))&&this.#g();const i=this.#x();a&&(this.#e!==r||ua(this.options.enabled,this.#e)!==ua(t.enabled,this.#e)||i!==this.#l)&&this.#v(i)}getOptimisticResult(s){const t=this.#t.getQueryCache().build(this.#t,s),r=this.createResult(t,s);return Ev(this,r)&&(this.#r=r,this.#i=this.options,this.#n=this.#e.state),r}getCurrentResult(){return this.#r}trackResult(s,t){return new Proxy(s,{get:(r,a)=>(this.trackProp(a),t?.(a),Reflect.get(r,a))})}trackProp(s){this.#m.add(s)}getCurrentQuery(){return this.#e}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const t=this.#t.defaultQueryOptions(s),r=this.#t.getQueryCache().build(this.#t,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(s){return this.#h({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(s){this.#N();let t=this.#e.fetch(this.options,s);return s?.throwOnError||(t=t.catch(on)),t}#g(){this.#b();const s=Pi(this.options.staleTime,this.#e);if(uo||this.#r.isStale||!Hd(s))return;const r=mm(this.#r.dataUpdatedAt,s)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(s){this.#w(),this.#l=s,!(uo||ua(this.options.enabled,this.#e)===!1||!Hd(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||Eh.isFocused())&&this.#h()},this.#l))}#y(){this.#g(),this.#v(this.#x())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(s,t){const r=this.#e,a=this.options,i=this.#r,l=this.#n,d=this.#i,h=s!==r?s.state:this.#s,{state:p}=s;let v={...p},y=!1,N;if(t._optimisticResults){const ee=this.hasListeners(),te=!ee&&Ou(s,t),we=ee&&Du(s,r,t,a);(te||we)&&(v={...v,...Nm(p.data,s.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:g,errorUpdatedAt:C,status:j}=v;N=v.data;let T=!1;if(t.placeholderData!==void 0&&N===void 0&&j==="pending"){let ee;i?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(ee=i.data,T=!0):ee=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,ee!==void 0&&(j="success",N=Ud(i?.data,ee,t),y=!0)}if(t.select&&N!==void 0&&!T)if(i&&N===l?.data&&t.select===this.#p)N=this.#u;else try{this.#p=t.select,N=t.select(N),N=Ud(i?.data,N,t),this.#u=N,this.#a=null}catch(ee){this.#a=ee}this.#a&&(g=this.#a,N=this.#u,C=Date.now(),j="error");const A=v.fetchStatus==="fetching",S=j==="pending",q=j==="error",V=S&&A,Y=N!==void 0,le={status:j,fetchStatus:v.fetchStatus,isPending:S,isSuccess:j==="success",isError:q,isInitialLoading:V,isLoading:V,data:N,dataUpdatedAt:v.dataUpdatedAt,error:g,errorUpdatedAt:C,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>h.dataUpdateCount||v.errorUpdateCount>h.errorUpdateCount,isFetching:A,isRefetching:A&&!S,isLoadingError:q&&!Y,isPaused:v.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:q&&Y,isStale:Mh(s,t),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const ee=R=>{le.status==="error"?R.reject(le.error):le.data!==void 0&&R.resolve(le.data)},te=()=>{const R=this.#o=le.promise=Wd();ee(R)},we=this.#o;switch(we.status){case"pending":s.queryHash===r.queryHash&&ee(we);break;case"fulfilled":(le.status==="error"||le.data!==we.value)&&te();break;case"rejected":(le.status!=="error"||le.error!==we.reason)&&te();break}}return le}updateResult(){const s=this.#r,t=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#i=this.options,this.#n.data!==void 0&&(this.#f=this.#e),Cc(t,s))return;this.#r=t;const r=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!this.#m.size)return!0;const l=new Set(i??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(d=>{const u=d;return this.#r[u]!==s[u]&&l.has(u)})};this.#j({listeners:r()})}#N(){const s=this.#t.getQueryCache().build(this.#t,this.options);if(s===this.#e)return;const t=this.#e;this.#e=s,this.#s=s.state,this.hasListeners()&&(t?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#j(s){mr.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Tv(s,t){return ua(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function Ou(s,t){return Tv(s,t)||s.state.data!==void 0&&Vd(s,t,t.refetchOnMount)}function Vd(s,t,r){if(ua(t.enabled,s)!==!1&&Pi(t.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&Mh(s,t)}return!1}function Du(s,t,r,a){return(s!==t||ua(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&Mh(s,r)}function Mh(s,t){return ua(t.enabled,s)!==!1&&s.isStaleByTime(Pi(t.staleTime,s))}function Ev(s,t){return!Cc(s.getCurrentResult(),t)}var Mv=class extends hl{#t;#e=void 0;#s;#r;constructor(t,r){super(),this.#t=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#t.defaultMutationOptions(t),Cc(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&fo(r.mutationKey)!==fo(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(t,r){return this.#r=r,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){const t=this.#s?.state??jm();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){mr.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#e.variables,a=this.#e.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,r,a),this.#r.onSettled?.(t.data,null,r,a)):t?.type==="error"&&(this.#r.onError?.(t.error,r,a),this.#r.onSettled?.(void 0,t.error,r,a))}this.listeners.forEach(r=>{r(this.#e)})})}},Sm=P.createContext(void 0),Ih=s=>{const t=P.useContext(Sm);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},km=({client:s,children:t})=>(P.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(Sm.Provider,{value:s,children:t})),Pm=P.createContext(!1),Iv=()=>P.useContext(Pm);Pm.Provider;function Rv(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Ov=P.createContext(Rv()),Dv=()=>P.useContext(Ov),Fv=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},zv=s=>{P.useEffect(()=>{s.clearReset()},[s])},Bv=({result:s,errorResetBoundary:t,throwOnError:r,query:a,suspense:i})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&(i&&s.data===void 0||xm(r,[s.error,a])),qv=s=>{if(s.suspense){const t=a=>a==="static"?a:Math.max(a??1e3,1e3),r=s.staleTime;s.staleTime=typeof r=="function"?(...a)=>t(r(...a)):t(r),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},Hv=(s,t)=>s.isLoading&&s.isFetching&&!t,$v=(s,t)=>s?.suspense&&t.isPending,Fu=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function Uv(s,t,r){const a=Iv(),i=Dv(),l=Ih(),d=l.defaultQueryOptions(s);l.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=a?"isRestoring":"optimistic",qv(d),Fv(d,i),zv(i);const u=!l.getQueryCache().get(d.queryHash),[h]=P.useState(()=>new t(l,d)),p=h.getOptimisticResult(d),v=!a&&s.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(y=>{const N=v?h.subscribe(mr.batchCalls(y)):on;return h.updateResult(),N},[h,v]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),P.useEffect(()=>{h.setOptions(d)},[d,h]),$v(d,p))throw Fu(d,h,i);if(Bv({result:p,errorResetBoundary:i,throwOnError:d.throwOnError,query:l.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw p.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(d,p),d.experimental_prefetchInRender&&!uo&&Hv(p,a)&&(u?Fu(d,h,i):l.getQueryCache().get(d.queryHash)?.promise)?.catch(on).finally(()=>{h.updateResult()}),d.notifyOnChangeProps?p:h.trackResult(p)}function Ac(s,t){return Uv(s,Av)}function zu(s,t){const r=Ih(),[a]=P.useState(()=>new Mv(r,s));P.useEffect(()=>{a.setOptions(s)},[a,s]);const i=P.useSyncExternalStore(P.useCallback(d=>a.subscribe(mr.batchCalls(d)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=P.useCallback((d,u)=>{a.mutate(d,u).catch(on)},[a]);if(i.error&&xm(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:l,mutateAsync:i.mutate}}const Wv={development:{baseUrl:"http://localhost:8080"},production:{baseUrl:"http://localhost:8080"}},ht=()=>Wv["production"]?.baseUrl;async function Vv(s){const t=ht(),r=s.startsWith("http")?s:`${t}${s}`,a=localStorage.getItem("token"),i={"Content-Type":"application/json",Accept:"application/json"};a&&(i.Authorization=`Bearer ${a}`);try{const l=await fetch(r,{method:"GET",headers:i,mode:"cors",credentials:"include"});return l.ok?await l.json():null}catch{return null}}const Zv=async({queryKey:s})=>await Vv(s[0]),Cm=new _m({defaultOptions:{queries:{queryFn:Zv,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:5*60*1e3},mutations:{retry:!1}}}),Gv={theme:"system",setTheme:()=>null},Lm=P.createContext(Gv);function Am({children:s,defaultTheme:t="system",storageKey:r="lifebee-ui-theme",...a}){const[i,l]=P.useState(()=>{try{return localStorage.getItem(r)||t}catch{return t}});P.useEffect(()=>{const u=window.document.documentElement;if(u.classList.remove("light","dark"),i==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u.classList.add(h);return}u.classList.add(i)},[i]);const d={theme:i,setTheme:u=>{try{localStorage.setItem(r,u)}catch{}l(u)}};return e.jsx(Lm.Provider,{...a,value:d,children:s})}const Tm=()=>{const s=P.useContext(Lm);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},Yv=1,Kv=1e6;let wd=0;function Jv(){return wd=(wd+1)%Number.MAX_SAFE_INTEGER,wd.toString()}const Nd=new Map,Bu=s=>{if(Nd.has(s))return;const t=setTimeout(()=>{Nd.delete(s),Tl({type:"REMOVE_TOAST",toastId:s})},Kv);Nd.set(s,t)},Qv=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,Yv)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Bu(r):s.toasts.forEach(a=>{Bu(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},yc=[];let bc={toasts:[]};function Tl(s){bc=Qv(bc,s),yc.forEach(t=>{t(bc)})}function Xv({...s}){const t=Jv(),r=i=>Tl({type:"UPDATE_TOAST",toast:{...i,id:t}}),a=()=>Tl({type:"DISMISS_TOAST",toastId:t});return Tl({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:i=>{i||a()}}}),{id:t,dismiss:a,update:r}}function Rs(){const[s,t]=P.useState(bc);return P.useEffect(()=>(yc.push(t),()=>{const r=yc.indexOf(t);r>-1&&yc.splice(r,1)}),[s]),{...s,toast:Xv,dismiss:r=>Tl({type:"DISMISS_TOAST",toastId:r})}}var Em=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),e1="VisuallyHidden",$c=P.forwardRef((s,t)=>e.jsx(hs.span,{...s,ref:t,style:{...Em,...s.style}}));$c.displayName=e1;var t1=$c,Rh="ToastProvider",[Oh,s1,r1]=Uf("Toast"),[Mm,ij]=wo("Toast",[r1]),[n1,Uc]=Mm(Rh),Im=s=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:i="right",swipeThreshold:l=50,children:d}=s,[u,h]=P.useState(null),[p,v]=P.useState(0),y=P.useRef(!1),N=P.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Rh}\`. Expected non-empty \`string\`.`),e.jsx(Oh.Provider,{scope:t,children:e.jsx(n1,{scope:t,label:r,duration:a,swipeDirection:i,swipeThreshold:l,toastCount:p,viewport:u,onViewportChange:h,onToastAdd:P.useCallback(()=>v(g=>g+1),[]),onToastRemove:P.useCallback(()=>v(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:N,children:d})})};Im.displayName=Rh;var Rm="ToastViewport",a1=["F8"],Zd="toast.viewportPause",Gd="toast.viewportResume",Om=P.forwardRef((s,t)=>{const{__scopeToast:r,hotkey:a=a1,label:i="Notifications ({hotkey})",...l}=s,d=Uc(Rm,r),u=s1(r),h=P.useRef(null),p=P.useRef(null),v=P.useRef(null),y=P.useRef(null),N=Lr(t,y,d.onViewportChange),g=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=d.toastCount>0;P.useEffect(()=>{const T=A=>{a.length!==0&&a.every(q=>A[q]||A.code===q)&&y.current?.focus()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[a]),P.useEffect(()=>{const T=h.current,A=y.current;if(C&&T&&A){const S=()=>{if(!d.isClosePausedRef.current){const ue=new CustomEvent(Zd);A.dispatchEvent(ue),d.isClosePausedRef.current=!0}},q=()=>{if(d.isClosePausedRef.current){const ue=new CustomEvent(Gd);A.dispatchEvent(ue),d.isClosePausedRef.current=!1}},V=ue=>{!T.contains(ue.relatedTarget)&&q()},Y=()=>{T.contains(document.activeElement)||q()};return T.addEventListener("focusin",S),T.addEventListener("focusout",V),T.addEventListener("pointermove",S),T.addEventListener("pointerleave",Y),window.addEventListener("blur",S),window.addEventListener("focus",q),()=>{T.removeEventListener("focusin",S),T.removeEventListener("focusout",V),T.removeEventListener("pointermove",S),T.removeEventListener("pointerleave",Y),window.removeEventListener("blur",S),window.removeEventListener("focus",q)}}},[C,d.isClosePausedRef]);const j=P.useCallback(({tabbingDirection:T})=>{const S=u().map(q=>{const V=q.ref.current,Y=[V,...v1(V)];return T==="forwards"?Y:Y.reverse()});return(T==="forwards"?S.reverse():S).flat()},[u]);return P.useEffect(()=>{const T=y.current;if(T){const A=S=>{const q=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!q){const Y=document.activeElement,ue=S.shiftKey;if(S.target===T&&ue){p.current?.focus();return}const te=j({tabbingDirection:ue?"backwards":"forwards"}),we=te.findIndex(R=>R===Y);jd(te.slice(we+1))?S.preventDefault():ue?p.current?.focus():v.current?.focus()}};return T.addEventListener("keydown",A),()=>T.removeEventListener("keydown",A)}},[u,j]),e.jsxs(Hx,{ref:h,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:C?void 0:"none"},children:[C&&e.jsx(Yd,{ref:p,onFocusFromOutsideViewport:()=>{const T=j({tabbingDirection:"forwards"});jd(T)}}),e.jsx(Oh.Slot,{scope:r,children:e.jsx(hs.ol,{tabIndex:-1,...l,ref:N})}),C&&e.jsx(Yd,{ref:v,onFocusFromOutsideViewport:()=>{const T=j({tabbingDirection:"backwards"});jd(T)}})]})});Om.displayName=Rm;var Dm="ToastFocusProxy",Yd=P.forwardRef((s,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...i}=s,l=Uc(Dm,r);return e.jsx($c,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:d=>{const u=d.relatedTarget;!l.viewport?.contains(u)&&a()}})});Yd.displayName=Dm;var Wl="Toast",i1="toast.swipeStart",o1="toast.swipeMove",l1="toast.swipeCancel",c1="toast.swipeEnd",Fm=P.forwardRef((s,t)=>{const{forceMount:r,open:a,defaultOpen:i,onOpenChange:l,...d}=s,[u,h]=sl({prop:a,defaultProp:i??!0,onChange:l,caller:Wl});return e.jsx(jh,{present:r||u,children:e.jsx(u1,{open:u,...d,ref:t,onClose:()=>h(!1),onPause:rl(s.onPause),onResume:rl(s.onResume),onSwipeStart:Gt(s.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Gt(s.onSwipeMove,p=>{const{x:v,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${v}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Gt(s.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Gt(s.onSwipeEnd,p=>{const{x:v,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${v}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});Fm.displayName=Wl;var[d1,h1]=Mm(Wl,{onClose(){}}),u1=P.forwardRef((s,t)=>{const{__scopeToast:r,type:a="foreground",duration:i,open:l,onClose:d,onEscapeKeyDown:u,onPause:h,onResume:p,onSwipeStart:v,onSwipeMove:y,onSwipeCancel:N,onSwipeEnd:g,...C}=s,j=Uc(Wl,r),[T,A]=P.useState(null),S=Lr(t,B=>A(B)),q=P.useRef(null),V=P.useRef(null),Y=i||j.duration,ue=P.useRef(0),le=P.useRef(Y),ee=P.useRef(0),{onToastAdd:te,onToastRemove:we}=j,R=rl(()=>{T?.contains(document.activeElement)&&j.viewport?.focus(),d()}),z=P.useCallback(B=>{!B||B===1/0||(window.clearTimeout(ee.current),ue.current=new Date().getTime(),ee.current=window.setTimeout(R,B))},[R]);P.useEffect(()=>{const B=j.viewport;if(B){const pe=()=>{z(le.current),p?.()},he=()=>{const be=new Date().getTime()-ue.current;le.current=le.current-be,window.clearTimeout(ee.current),h?.()};return B.addEventListener(Zd,he),B.addEventListener(Gd,pe),()=>{B.removeEventListener(Zd,he),B.removeEventListener(Gd,pe)}}},[j.viewport,Y,h,p,z]),P.useEffect(()=>{l&&!j.isClosePausedRef.current&&z(Y)},[l,Y,j.isClosePausedRef,z]),P.useEffect(()=>(te(),()=>we()),[te,we]);const H=P.useMemo(()=>T?Wm(T):null,[T]);return j.viewport?e.jsxs(e.Fragment,{children:[H&&e.jsx(f1,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),e.jsx(d1,{scope:r,onClose:R,children:_h.createPortal(e.jsx(Oh.ItemSlot,{scope:r,children:e.jsx($x,{asChild:!0,onEscapeKeyDown:Gt(u,()=>{j.isFocusedToastEscapeKeyDownRef.current||R(),j.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(hs.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":j.swipeDirection,...C,ref:S,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:Gt(s.onKeyDown,B=>{B.key==="Escape"&&(u?.(B.nativeEvent),B.nativeEvent.defaultPrevented||(j.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Gt(s.onPointerDown,B=>{B.button===0&&(q.current={x:B.clientX,y:B.clientY})}),onPointerMove:Gt(s.onPointerMove,B=>{if(!q.current)return;const pe=B.clientX-q.current.x,he=B.clientY-q.current.y,be=!!V.current,ne=["left","right"].includes(j.swipeDirection),xe=["left","up"].includes(j.swipeDirection)?Math.min:Math.max,ae=ne?xe(0,pe):0,fe=ne?0:xe(0,he),E=B.pointerType==="touch"?10:2,W={x:ae,y:fe},Z={originalEvent:B,delta:W};be?(V.current=W,fc(o1,y,Z,{discrete:!1})):qu(W,j.swipeDirection,E)?(V.current=W,fc(i1,v,Z,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(pe)>E||Math.abs(he)>E)&&(q.current=null)}),onPointerUp:Gt(s.onPointerUp,B=>{const pe=V.current,he=B.target;if(he.hasPointerCapture(B.pointerId)&&he.releasePointerCapture(B.pointerId),V.current=null,q.current=null,pe){const be=B.currentTarget,ne={originalEvent:B,delta:pe};qu(pe,j.swipeDirection,j.swipeThreshold)?fc(c1,g,ne,{discrete:!0}):fc(l1,N,ne,{discrete:!0}),be.addEventListener("click",xe=>xe.preventDefault(),{once:!0})}})})})}),j.viewport)})]}):null}),f1=s=>{const{__scopeToast:t,children:r,...a}=s,i=Uc(Wl,t),[l,d]=P.useState(!1),[u,h]=P.useState(!1);return g1(()=>d(!0)),P.useEffect(()=>{const p=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:e.jsx(Wf,{asChild:!0,children:e.jsx($c,{...a,children:l&&e.jsxs(e.Fragment,{children:[i.label," ",r]})})})},m1="ToastTitle",zm=P.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(hs.div,{...a,ref:t})});zm.displayName=m1;var p1="ToastDescription",Bm=P.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(hs.div,{...a,ref:t})});Bm.displayName=p1;var qm="ToastAction",Hm=P.forwardRef((s,t)=>{const{altText:r,...a}=s;return r.trim()?e.jsx(Um,{altText:r,asChild:!0,children:e.jsx(Dh,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${qm}\`. Expected non-empty \`string\`.`),null)});Hm.displayName=qm;var $m="ToastClose",Dh=P.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s,i=h1($m,r);return e.jsx(Um,{asChild:!0,children:e.jsx(hs.button,{type:"button",...a,ref:t,onClick:Gt(s.onClick,i.onClose)})})});Dh.displayName=$m;var Um=P.forwardRef((s,t)=>{const{__scopeToast:r,altText:a,...i}=s;return e.jsx(hs.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...i,ref:t})});function Wm(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),x1(a)){const i=a.ariaHidden||a.hidden||a.style.display==="none",l=a.dataset.radixToastAnnounceExclude==="";if(!i)if(l){const d=a.dataset.radixToastAnnounceAlt;d&&t.push(d)}else t.push(...Wm(a))}}),t}function fc(s,t,r,{discrete:a}){const i=r.originalEvent.currentTarget,l=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(s,t,{once:!0}),a?Ux(i,l):i.dispatchEvent(l)}var qu=(s,t,r=0)=>{const a=Math.abs(s.x),i=Math.abs(s.y),l=a>i;return t==="left"||t==="right"?l&&a>r:!l&&i>r};function g1(s=()=>{}){const t=rl(s);Gn(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function x1(s){return s.nodeType===s.ELEMENT_NODE}function v1(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const i=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||i?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function jd(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var y1=Im,Vm=Om,Zm=Fm,Gm=zm,Ym=Bm,Km=Hm,Jm=Dh;/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),rt=(s,t)=>{const r=P.forwardRef(({color:a="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:h,...p},v)=>P.createElement("svg",{ref:v,...b1,width:i,height:i,stroke:a,strokeWidth:d?Number(l)*24/Number(i):l,className:["lucide",`lucide-${w1(s)}`,u].join(" "),...p},[...t.map(([y,N])=>P.createElement(y,N)),...Array.isArray(h)?h:[h]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=rt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=rt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=rt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=rt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=rt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=rt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=rt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=rt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=rt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=rt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=rt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=rt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=rt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=rt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=rt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=rt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=rt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=rt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=rt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=rt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=rt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=rt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=rt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=rt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=rt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=rt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=rt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=rt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=rt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=rt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=rt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=rt("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=rt("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=rt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=rt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=rt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=rt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=rt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=rt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=rt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=rt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=rt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=rt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=rt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=rt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=rt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=rt("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=rt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=rt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=rt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=rt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=rt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=rt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ut(...s){return hv(uv(s))}const D1=y1,mp=P.forwardRef(({className:s,...t},r)=>e.jsx(Vm,{ref:r,className:ut("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] pointer-events-none",s),...t}));mp.displayName=Vm.displayName;const F1=Hc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-xl",destructive:"destructive group border-red-200 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 shadow-xl"}},defaultVariants:{variant:"default"}}),pp=P.forwardRef(({className:s,variant:t,...r},a)=>e.jsx(Zm,{ref:a,className:ut(F1({variant:t}),s),...r}));pp.displayName=Zm.displayName;const z1=P.forwardRef(({className:s,...t},r)=>e.jsx(Km,{ref:r,className:ut("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));z1.displayName=Km.displayName;const gp=P.forwardRef(({className:s,...t},r)=>e.jsx(Jm,{ref:r,className:ut("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(fl,{className:"h-4 w-4"})}));gp.displayName=Jm.displayName;const xp=P.forwardRef(({className:s,...t},r)=>e.jsx(Gm,{ref:r,className:ut("text-sm font-semibold",s),...t}));xp.displayName=Gm.displayName;const vp=P.forwardRef(({className:s,...t},r)=>e.jsx(Ym,{ref:r,className:ut("text-sm opacity-90",s),...t}));vp.displayName=Ym.displayName;function yp(){const{toasts:s}=Rs();return e.jsxs(D1,{children:[s.map(function({id:t,title:r,description:a,action:i,...l}){return e.jsxs(pp,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(xp,{children:r}),a&&e.jsx(vp,{children:a})]}),i,e.jsx(gp,{})]},t)}),e.jsx(mp,{})]})}class B1 extends P.Component{state={hasError:!1};static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.warn("Error caught by boundary:",t,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Algo deu errado"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Ocorreu um erro inesperado. Tente recarregar a página."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-500 text-black px-4 py-2 rounded-lg font-medium",children:"Recarregar página"})]})}):this.props.children}}function q1(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var r,a,i,l,d=[],u="",h=s.split("/");for(h[0]||h.shift();i=h.shift();)r=i[0],r==="*"?(d.push(r),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(a=i.indexOf("?",1),l=i.indexOf(".",1),d.push(i.substring(1,~a?a:~l?l:i.length)),u+=~a&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(u+=(~a?"?":"")+"\\"+i.substring(l))):u+="/"+i;return{keys:d,pattern:new RegExp("^"+u+(t?"(?=$|/)":"/?$"),"i")}}var _d={exports:{}},Sd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu;function H1(){if(Wu)return Sd;Wu=1;var s=cv();function t(y,N){return y===N&&(y!==0||1/y===1/N)||y!==y&&N!==N}var r=typeof Object.is=="function"?Object.is:t,a=s.useState,i=s.useEffect,l=s.useLayoutEffect,d=s.useDebugValue;function u(y,N){var g=N(),C=a({inst:{value:g,getSnapshot:N}}),j=C[0].inst,T=C[1];return l(function(){j.value=g,j.getSnapshot=N,h(j)&&T({inst:j})},[y,g,N]),i(function(){return h(j)&&T({inst:j}),y(function(){h(j)&&T({inst:j})})},[y]),d(g),g}function h(y){var N=y.getSnapshot;y=y.value;try{var g=N();return!r(y,g)}catch{return!0}}function p(y,N){return N()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return Sd.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:v,Sd}var Vu;function $1(){return Vu||(Vu=1,_d.exports=H1()),_d.exports}var bp=$1();const U1=Wx.useInsertionEffect,W1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V1=W1?P.useLayoutEffect:P.useEffect,Z1=U1||V1,wp=s=>{const t=P.useRef([s,(...r)=>t[0](...r)]).current;return Z1(()=>{t[0]=s}),t[1]},G1="popstate",qh="pushState",Hh="replaceState",Y1="hashchange",Zu=[G1,qh,Hh,Y1],K1=s=>{for(const t of Zu)addEventListener(t,s);return()=>{for(const t of Zu)removeEventListener(t,s)}},Np=(s,t)=>bp.useSyncExternalStore(K1,s,t),J1=()=>location.search,Q1=({ssrSearch:s=""}={})=>Np(J1,()=>s),Gu=()=>location.pathname,X1=({ssrPath:s}={})=>Np(Gu,s?()=>s:Gu),e2=(s,{replace:t=!1,state:r=null}={})=>history[t?Hh:qh](r,"",s),t2=(s={})=>[X1(s),e2],Yu=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Yu]>"u"){for(const s of[qh,Hh]){const t=history[s];history[s]=function(){const r=t.apply(this,arguments),a=new Event(s);return a.arguments=arguments,dispatchEvent(a),r}}Object.defineProperty(window,Yu,{value:!0})}const s2=(s,t)=>t.toLowerCase().indexOf(s.toLowerCase())?"~"+t:t.slice(s.length)||"/",jp=(s="")=>s==="/"?"":s,r2=(s,t)=>s[0]==="~"?s.slice(1):jp(t)+s,n2=(s="",t)=>s2(Ku(jp(s)),Ku(t)),Ku=s=>{try{return decodeURI(s)}catch{return s}},_p={hook:t2,searchHook:Q1,parser:q1,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:s=>s},Sp=P.createContext(_p),ml=()=>P.useContext(Sp),kp={},Pp=P.createContext(kp),Cp=()=>P.useContext(Pp),Wc=s=>{const[t,r]=s.hook(s);return[n2(s.base,t),wp((a,i)=>r(r2(a,s.base),i))]},sr=()=>Wc(ml()),$h=(s,t,r,a)=>{const{pattern:i,keys:l}=t instanceof RegExp?{keys:!1,pattern:t}:s(t||"*",a),d=i.exec(r)||[],[u,...h]=d;return u!==void 0?[!0,(()=>{const p=l!==!1?Object.fromEntries(l.map((y,N)=>[y,h[N]])):d.groups;let v={...h};return p&&Object.assign(v,p),v})(),...a?[u]:[]]:[!1,null]},Lp=s=>$h(ml().parser,s,sr()[0]),a2=({children:s,...t})=>{const r=ml(),a=t.hook?_p:r;let i=a;const[l,d]=t.ssrPath?.split("?")??[];d&&(t.ssrSearch=d,t.ssrPath=l),t.hrefs=t.hrefs??t.hook?.hrefs;let u=P.useRef({}),h=u.current,p=h;for(let v in a){const y=v==="base"?a[v]+(t[v]||""):t[v]||a[v];h===p&&y!==p[v]&&(u.current=p={...p}),p[v]=y,(y!==a[v]||y!==i[v])&&(i=p)}return P.createElement(Sp.Provider,{value:i,children:s})},Ju=({children:s,component:t},r)=>t?P.createElement(t,{params:r}):typeof s=="function"?s(r):s,i2=s=>{let t=P.useRef(kp);const r=t.current;return t.current=Object.keys(s).length!==Object.keys(r).length||Object.entries(s).some(([a,i])=>i!==r[a])?s:r},ss=({path:s,nest:t,match:r,...a})=>{const i=ml(),[l]=Wc(i),[d,u,h]=r??$h(i.parser,s,l,t),p=i2({...Cp(),...u});if(!d)return null;const v=h?P.createElement(a2,{base:h},Ju(a,p)):Ju(a,p);return P.createElement(Pp.Provider,{value:p,children:v})},ks=P.forwardRef((s,t)=>{const r=ml(),[a,i]=Wc(r),{to:l="",href:d=l,onClick:u,asChild:h,children:p,className:v,replace:y,state:N,...g}=s,C=wp(T=>{T.ctrlKey||T.metaKey||T.altKey||T.shiftKey||T.button!==0||(u?.(T),T.defaultPrevented||(T.preventDefault(),i(d,s)))}),j=r.hrefs(d[0]==="~"?d.slice(1):r.base+d,r);return h&&P.isValidElement(p)?P.cloneElement(p,{onClick:C,href:j}):P.createElement("a",{...g,onClick:C,href:j,className:v?.call?v(a===d):v,children:p,ref:t})}),Ap=s=>Array.isArray(s)?s.flatMap(t=>Ap(t&&t.type===P.Fragment?t.props.children:t)):[s],kd=({children:s,location:t})=>{const r=ml(),[a]=Wc(r);for(const i of Ap(s)){let l=0;if(P.isValidElement(i)&&(l=$h(r.parser,i.props.path,t||a,i.props.nest))[0])return P.cloneElement(i,{match:l})}return null};var[Vc,oj]=wo("Tooltip",[qc]),Zc=qc(),Tp="TooltipProvider",o2=700,Kd="tooltip.open",[l2,Uh]=Vc(Tp),Ep=s=>{const{__scopeTooltip:t,delayDuration:r=o2,skipDelayDuration:a=300,disableHoverableContent:i=!1,children:l}=s,d=P.useRef(!0),u=P.useRef(!1),h=P.useRef(0);return P.useEffect(()=>{const p=h.current;return()=>window.clearTimeout(p)},[]),e.jsx(l2,{scope:t,isOpenDelayedRef:d,delayDuration:r,onOpen:P.useCallback(()=>{window.clearTimeout(h.current),d.current=!1},[]),onClose:P.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>d.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:P.useCallback(p=>{u.current=p},[]),disableHoverableContent:i,children:l})};Ep.displayName=Tp;var zl="Tooltip",[c2,Gc]=Vc(zl),Mp=s=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:i,onOpenChange:l,disableHoverableContent:d,delayDuration:u}=s,h=Uh(zl,s.__scopeTooltip),p=Zc(t),[v,y]=P.useState(null),N=Ul(),g=P.useRef(0),C=d??h.disableHoverableContent,j=u??h.delayDuration,T=P.useRef(!1),[A,S]=sl({prop:a,defaultProp:i??!1,onChange:le=>{le?(h.onOpen(),document.dispatchEvent(new CustomEvent(Kd))):h.onClose(),l?.(le)},caller:zl}),q=P.useMemo(()=>A?T.current?"delayed-open":"instant-open":"closed",[A]),V=P.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T.current=!1,S(!0)},[S]),Y=P.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),ue=P.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{T.current=!0,S(!0),g.current=0},j)},[j,S]);return P.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),e.jsx(Yf,{...p,children:e.jsx(c2,{scope:t,contentId:N,open:A,stateAttribute:q,trigger:v,onTriggerChange:y,onTriggerEnter:P.useCallback(()=>{h.isOpenDelayedRef.current?ue():V()},[h.isOpenDelayedRef,ue,V]),onTriggerLeave:P.useCallback(()=>{C?Y():(window.clearTimeout(g.current),g.current=0)},[Y,C]),onOpen:V,onClose:Y,disableHoverableContent:C,children:r})})};Mp.displayName=zl;var Jd="TooltipTrigger",Ip=P.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,i=Gc(Jd,r),l=Uh(Jd,r),d=Zc(r),u=P.useRef(null),h=Lr(t,u,i.onTriggerChange),p=P.useRef(!1),v=P.useRef(!1),y=P.useCallback(()=>p.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),e.jsx(Kf,{asChild:!0,...d,children:e.jsx(hs.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...a,ref:h,onPointerMove:Gt(s.onPointerMove,N=>{N.pointerType!=="touch"&&!v.current&&!l.isPointerInTransitRef.current&&(i.onTriggerEnter(),v.current=!0)}),onPointerLeave:Gt(s.onPointerLeave,()=>{i.onTriggerLeave(),v.current=!1}),onPointerDown:Gt(s.onPointerDown,()=>{i.open&&i.onClose(),p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Gt(s.onFocus,()=>{p.current||i.onOpen()}),onBlur:Gt(s.onBlur,i.onClose),onClick:Gt(s.onClick,i.onClose)})})});Ip.displayName=Jd;var d2="TooltipPortal",[lj,h2]=Vc(d2,{forceMount:void 0}),al="TooltipContent",Rp=P.forwardRef((s,t)=>{const r=h2(al,s.__scopeTooltip),{forceMount:a=r.forceMount,side:i="top",...l}=s,d=Gc(al,s.__scopeTooltip);return e.jsx(jh,{present:a||d.open,children:d.disableHoverableContent?e.jsx(Op,{side:i,...l,ref:t}):e.jsx(u2,{side:i,...l,ref:t})})}),u2=P.forwardRef((s,t)=>{const r=Gc(al,s.__scopeTooltip),a=Uh(al,s.__scopeTooltip),i=P.useRef(null),l=Lr(t,i),[d,u]=P.useState(null),{trigger:h,onClose:p}=r,v=i.current,{onPointerInTransitChange:y}=a,N=P.useCallback(()=>{u(null),y(!1)},[y]),g=P.useCallback((C,j)=>{const T=C.currentTarget,A={x:C.clientX,y:C.clientY},S=x2(A,T.getBoundingClientRect()),q=v2(A,S),V=y2(j.getBoundingClientRect()),Y=w2([...q,...V]);u(Y),y(!0)},[y]);return P.useEffect(()=>()=>N(),[N]),P.useEffect(()=>{if(h&&v){const C=T=>g(T,v),j=T=>g(T,h);return h.addEventListener("pointerleave",C),v.addEventListener("pointerleave",j),()=>{h.removeEventListener("pointerleave",C),v.removeEventListener("pointerleave",j)}}},[h,v,g,N]),P.useEffect(()=>{if(d){const C=j=>{const T=j.target,A={x:j.clientX,y:j.clientY},S=h?.contains(T)||v?.contains(T),q=!b2(A,d);S?N():q&&(N(),p())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[h,v,d,p,N]),e.jsx(Op,{...s,ref:l})}),[f2,m2]=Vc(zl,{isInside:!1}),p2=Gf("TooltipContent"),Op=P.forwardRef((s,t)=>{const{__scopeTooltip:r,children:a,"aria-label":i,onEscapeKeyDown:l,onPointerDownOutside:d,...u}=s,h=Gc(al,r),p=Zc(r),{onClose:v}=h;return P.useEffect(()=>(document.addEventListener(Kd,v),()=>document.removeEventListener(Kd,v)),[v]),P.useEffect(()=>{if(h.trigger){const y=N=>{N.target?.contains(h.trigger)&&v()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,v]),e.jsx(Vf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:y=>y.preventDefault(),onDismiss:v,children:e.jsxs(Zf,{"data-state":h.stateAttribute,...p,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(p2,{children:a}),e.jsx(f2,{scope:r,isInside:!0,children:e.jsx(t1,{id:h.contentId,role:"tooltip",children:i||a})})]})})});Rp.displayName=al;var Dp="TooltipArrow",g2=P.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,i=Zc(r);return m2(Dp,r).isInside?null:e.jsx(Jf,{...i,...a,ref:t})});g2.displayName=Dp;function x2(s,t){const r=Math.abs(t.top-s.y),a=Math.abs(t.bottom-s.y),i=Math.abs(t.right-s.x),l=Math.abs(t.left-s.x);switch(Math.min(r,a,i,l)){case l:return"left";case i:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function v2(s,t,r=5){const a=[];switch(t){case"top":a.push({x:s.x-r,y:s.y+r},{x:s.x+r,y:s.y+r});break;case"bottom":a.push({x:s.x-r,y:s.y-r},{x:s.x+r,y:s.y-r});break;case"left":a.push({x:s.x+r,y:s.y-r},{x:s.x+r,y:s.y+r});break;case"right":a.push({x:s.x-r,y:s.y-r},{x:s.x-r,y:s.y+r});break}return a}function y2(s){const{top:t,right:r,bottom:a,left:i}=s;return[{x:i,y:t},{x:r,y:t},{x:r,y:a},{x:i,y:a}]}function b2(s,t){const{x:r,y:a}=s;let i=!1;for(let l=0,d=t.length-1;l<t.length;d=l++){const u=t[l],h=t[d],p=u.x,v=u.y,y=h.x,N=h.y;v>a!=N>a&&r<(y-p)*(a-v)/(N-v)+p&&(i=!i)}return i}function w2(s){const t=s.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),N2(t)}function N2(s){if(s.length<=1)return s.slice();const t=[];for(let a=0;a<s.length;a++){const i=s[a];for(;t.length>=2;){const l=t[t.length-1],d=t[t.length-2];if((l.x-d.x)*(i.y-d.y)>=(l.y-d.y)*(i.x-d.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let a=s.length-1;a>=0;a--){const i=s[a];for(;r.length>=2;){const l=r[r.length-1],d=r[r.length-2];if((l.x-d.x)*(i.y-d.y)>=(l.y-d.y)*(i.x-d.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var j2=Ep,_2=Mp,S2=Ip,Fp=Rp;const zp=j2,k2=_2,P2=S2,Bp=P.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Fp,{ref:a,sideOffset:t,className:ut("z-50 overflow-hidden rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-1.5 text-sm text-gray-900 dark:text-white shadow-lg animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...r}));Bp.displayName=Fp.displayName;const C2="/assets/new-logo-ISLgSUsv.png";function Zl({size:s=40,className:t=""}){return e.jsx("img",{src:C2,alt:"Logo LifeBee",width:s,height:s,className:t,style:{objectFit:"contain",display:"block"}})}function L2({onComplete:s}){const[t,r]=P.useState(0);return P.useEffect(()=>{const a=setInterval(()=>{r(i=>i>=100?(clearInterval(a),setTimeout(s,500),100):i+2)},30);return()=>clearInterval(a)},[s]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1a1a] via-[#f4c430] to-[#fdf6e3] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-[#fdf6e3]/20 backdrop-blur-sm rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center shadow-2xl animate-pulse",children:e.jsx("div",{className:"bg-[#fdf6e3] rounded-full w-24 h-24 flex items-center justify-center",children:e.jsx(Zl,{size:60,className:"animate-bounce"})})}),e.jsx("h1",{className:"text-4xl font-bold text-[#fdf6e3] mb-2",children:"LifeBee"}),e.jsx("p",{className:"text-[#fdf6e3]/80 text-lg mb-8",children:"Conectando você aos melhores profissionais de saúde"}),e.jsx("div",{className:"w-64 mx-auto bg-[#fdf6e3]/20 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#fdf6e3] transition-all duration-300 ease-out rounded-full",style:{width:`${t}%`}})}),e.jsxs("p",{className:"text-[#fdf6e3]/70 text-sm mt-4",children:["Carregando... ",t,"%"]})]})})}function lr(){const[s,t]=P.useState({user:null,isLoading:!0,isAuthenticated:!1});return P.useEffect(()=>{(async()=>{const l=localStorage.getItem("token"),d=localStorage.getItem("user");if(l&&d)try{const u=await fetch(`${ht()}/api/user`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(u.ok){const h=await u.json();t({user:h,isLoading:!1,isAuthenticated:!0})}else localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,isLoading:!1,isAuthenticated:!1})}catch(u){console.error("Error verifying token:",u);try{const h=JSON.parse(d);t({user:h,isLoading:!1,isAuthenticated:!0})}catch{localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,isLoading:!1,isAuthenticated:!1})}}else t({user:null,isLoading:!1,isAuthenticated:!1})})()},[]),{...s,login:(i,l)=>{localStorage.setItem("token",i),localStorage.setItem("user",JSON.stringify(l)),t({user:l,isLoading:!1,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,isLoading:!1,isAuthenticated:!1})}}}function Da({hidePlus:s}){const[t]=sr(),[,r]=sr(),{user:a}=lr(),{toast:i}=Rs(),l=[{label:"Início",to:"/",icon:e.jsx(ul,{className:"h-6 w-6"}),show:!0},{label:"Serviços",to:"/services",icon:e.jsx(Vn,{className:"h-6 w-6"}),show:!0},{label:"Adicionar",to:"/servico",isCenter:!0,show:!s},{label:"Chat",to:"/messages",icon:e.jsx(In,{className:"h-6 w-6"}),show:!0},{label:"Perfil",to:"/profile",icon:e.jsx(Gr,{className:"h-6 w-6"}),show:!0}];return e.jsx("nav",{className:"bg-white border-t border-gray-200 fixed bottom-0 left-0 w-full z-50 shadow rounded-t-xl px-0",children:e.jsx("ul",{className:"flex justify-around items-center h-16 max-w-full px-2 sm:px-4",children:l.filter(d=>d.show).map(d=>e.jsx("li",{className:d.isCenter?"relative -mt-10 z-10":"",children:d.isCenter?e.jsx("button",{"aria-label":"Criar Serviço",onClick:()=>{const u=!!(a?.email&&/.+@.+\..+/.test(a.email.trim())),h=(a?.phone||"").replace(/\D/g,""),p=h.length===11&&h[0]!=="0"&&h[1]!=="0"&&h[2]==="9",v=C=>{const j=C.replace(/\D/g,"");if(j.length!==11||/^(\d)\1{10}$/.test(j))return!1;const T=A=>{let S=0;for(let V=0;V<A;V++)S+=parseInt(j[V],10)*(A+1-V);const q=S*10%11;return q===10?0:q};return T(9)===parseInt(j[9],10)&&T(10)===parseInt(j[10],10)},y=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",N=v(y),g=[u,p,N].filter(Boolean).length;if(g!==3){i({title:"Verificação em andamento",description:`Conclua seu cadastro (${g}/3): Email, Telefone e CPF para criar um serviço.`}),r("/profile");return}r("/servico")},className:"gap-2 whitespace-nowrap text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary hover:bg-primary/90 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-xl hover:shadow-2xl hover:from-yellow-600 hover:to-yellow-700 w-16 h-16 flex items-center justify-center transition-all duration-300 border-4 border-white dark:border-gray-900 focus:ring-4 focus:ring-yellow-200 dark:focus:ring-yellow-800 ring-4 ring-yellow-200 dark:ring-yellow-800",tabIndex:0,type:"button",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-plus h-8 w-8",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]})}):e.jsxs(ks,{href:d.to,className:`flex flex-col items-center text-xs font-medium transition-colors duration-200 ${t===d.to?"text-yellow-500":"text-gray-500 hover:text-yellow-500"}`,children:[d.icon,e.jsx("span",{className:"mt-1",children:d.label})]})},d.to))})})}function A2(){const{toast:s}=Rs(),{user:t}=lr(),[r,a]=P.useState(""),[i,l]=P.useState([]),[d,u]=P.useState(!0),[,h]=sr();P.useEffect(()=>{p()},[]);const p=async()=>{try{u(!0);const C=await fetch(`${ht()}/api/professionals`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(C.ok){const j=await C.json();l(j)}else console.error("Erro ao buscar profissionais:",C.statusText),l([]),s({title:"Erro",description:"Não foi possível carregar os profissionais",variant:"destructive"})}catch(C){console.error("Erro ao buscar profissionais:",C),s({title:"Erro",description:"Não foi possível carregar os profissionais",variant:"destructive"})}finally{u(!1)}},v=async(C,j)=>{try{const T=localStorage.getItem("token"),A=await fetch(`${ht()}/api/messages/start-conversation`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({professionalId:C,message:"Olá! Gostaria de conversar sobre seus serviços."})});if(A.ok){const S=await A.json();console.log("Resposta do backend:",S),s({title:"Conversa iniciada!",description:`Você pode conversar com ${j} agora`});const q=S.conversationId||S.id||S.conversationID;h(q?`/messages/${q}`:"/messages")}else s({title:"Erro",description:"Não foi possível iniciar a conversa",variant:"destructive"})}catch(T){console.error("Erro ao iniciar conversa:",T),s({title:"Erro",description:"Erro de conexão ao iniciar conversa",variant:"destructive"})}},y=C=>{window.location.href=`tel:${C}`},N=C=>{switch(C){case"Home":h("/");break;case"Chat":h("/messages");break;case"Serviços":h("/services");break;case"Perfil":h("/profile");break;default:h("/")}};if(d)return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen flex items-center justify-center px-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"Carregando profissionais..."})]}),e.jsx(Da,{})]});if(i.length===0)return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Olá,"}),e.jsx("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:t?.name||"Usuário"})]}),e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-500 rounded-full flex items-center justify-center cursor-pointer hover:bg-yellow-600 transition-colors",onClick:()=>h("/profile"),children:e.jsx(Gr,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] px-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-200 rounded-full mx-auto mb-4 sm:mb-6 flex items-center justify-center",children:e.jsx(Ci,{className:"h-8 w-8 sm:h-10 sm:w-10 text-gray-400"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Nenhum profissional disponível"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6",children:"No momento não há profissionais cadastrados na sua região. Tente novamente mais tarde."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-500 text-white px-6 sm:px-8 py-2 sm:py-3 rounded-full font-medium hover:bg-yellow-600 transition-colors text-sm sm:text-base",children:"Tentar novamente"})]})}),e.jsx("nav",{className:"fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 sm:py-3",children:[{icon:ul,label:"Home"},{icon:Or,label:"Chat"},{icon:Vn,label:"Serviços"},{icon:Gr,label:"Perfil"}].map((C,j)=>e.jsxs("button",{className:"flex flex-col items-center text-xs text-gray-600 hover:text-yellow-500 transition-colors",onClick:()=>N(C.label),children:[e.jsx(C.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 mb-1"}),C.label]},j))}),e.jsx(Da,{})]});const g=i.filter(C=>C.name.toLowerCase().includes(r.toLowerCase())||C.specialization.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Olá,"}),e.jsx("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:t?.name||"Usuário"})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(El,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-600"}),e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center font-bold",children:"3"})]}),e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-500 rounded-full flex items-center justify-center cursor-pointer hover:bg-yellow-600 transition-colors",onClick:()=>h("/profile"),children:e.jsx(Gr,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]})]}),e.jsx("div",{className:"px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ci,{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar profissional...",className:"w-full bg-white rounded-full px-10 sm:px-12 py-3 sm:py-4 text-sm sm:text-base text-gray-900 placeholder-gray-500 border-0 shadow-lg focus:ring-2 focus:ring-yellow-400 focus:outline-none",value:r,onChange:C=>a(C.target.value)})]})}),e.jsx("div",{className:"px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-3 sm:p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg",children:"Emergência 24h"}),e.jsx("p",{className:"text-xs sm:text-sm opacity-90",children:"Profissionais disponíveis agora"})]}),e.jsx("div",{className:"text-2xl sm:text-3xl",children:"🚨"})]})})}),e.jsxs("div",{className:"px-3 sm:px-4 pb-20 sm:pb-24",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-3 sm:mb-4",children:r?`Resultados para "${r}"`:"Profissionais Disponíveis"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:g.map(C=>e.jsx("div",{className:"bg-white rounded-2xl p-3 sm:p-4 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0",children:C.imageUrl?e.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-12 h-12 sm:w-16 sm:h-16 object-cover"}):e.jsx(Gr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-900 mb-1",children:C.name}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-2",children:C.specialization}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current mr-1"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:C.rating})]}),e.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500",children:[e.jsx(Ns,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"truncate",children:C.location})]}),e.jsxs("div",{className:"text-xs sm:text-sm font-medium text-green-600",children:["R$ ",C.hourlyRate,"/h"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{className:"flex-1 bg-yellow-500 text-white py-2 px-3 sm:px-4 rounded-full font-medium hover:bg-yellow-600 transition-colors flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm",onClick:()=>v(C.userId,C.name),children:[e.jsx(Or,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Conversar"]}),C.phone&&e.jsxs("button",{className:"bg-green-500 text-white py-2 px-3 sm:px-4 rounded-full font-medium hover:bg-green-600 transition-colors flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm",onClick:()=>y(C.phone),children:[e.jsx(Li,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Ligar"]})]})]})]})},C.id))}),g.length===0&&r&&e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(Ci,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Nenhum profissional encontrado"})]})]}),e.jsx(Da,{})]})}const Wh=Hc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Me=P.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...i},l)=>{const d=a?Vx:"button";return e.jsx(d,{className:ut(Wh({variant:t,size:r,className:s})),ref:l,...i})});Me.displayName="Button";const lt=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));lt.displayName="Card";const rs=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("flex flex-col space-y-1.5 p-6",s),...t}));rs.displayName="CardHeader";const us=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("text-2xl font-semibold leading-none tracking-tight",s),...t}));us.displayName="CardTitle";const T2=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("text-sm text-muted-foreground",s),...t}));T2.displayName="CardDescription";const ct=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("p-6 pt-0",s),...t}));ct.displayName="CardContent";const E2=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:ut("flex items-center p-6 pt-0",s),...t}));E2.displayName="CardFooter";const M2=Hc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Bs({className:s,variant:t,...r}){return e.jsx("div",{className:ut(M2({variant:t}),s),...r})}function I2(){return bp.useSyncExternalStore(R2,()=>!0,()=>!1)}function R2(){return()=>{}}var Vh="Avatar",[O2,cj]=wo(Vh),[D2,qp]=O2(Vh),Hp=P.forwardRef((s,t)=>{const{__scopeAvatar:r,...a}=s,[i,l]=P.useState("idle");return e.jsx(D2,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:e.jsx(hs.span,{...a,ref:t})})});Hp.displayName=Vh;var $p="AvatarImage",Up=P.forwardRef((s,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:i=()=>{},...l}=s,d=qp($p,r),u=F2(a,l),h=rl(p=>{i(p),d.onImageLoadingStatusChange(p)});return Gn(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?e.jsx(hs.img,{...l,ref:t,src:a}):null});Up.displayName=$p;var Wp="AvatarFallback",Vp=P.forwardRef((s,t)=>{const{__scopeAvatar:r,delayMs:a,...i}=s,l=qp(Wp,r),[d,u]=P.useState(a===void 0);return P.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>u(!0),a);return()=>window.clearTimeout(h)}},[a]),d&&l.imageLoadingStatus!=="loaded"?e.jsx(hs.span,{...i,ref:t}):null});Vp.displayName=Wp;function Qu(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function F2(s,{referrerPolicy:t,crossOrigin:r}){const a=I2(),i=P.useRef(null),l=a?(i.current||(i.current=new window.Image),i.current):null,[d,u]=P.useState(()=>Qu(l,s));return Gn(()=>{u(Qu(l,s))},[l,s]),Gn(()=>{const h=y=>()=>{u(y)};if(!l)return;const p=h("loaded"),v=h("error");return l.addEventListener("load",p),l.addEventListener("error",v),t&&(l.referrerPolicy=t),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",p),l.removeEventListener("error",v)}},[l,r,t]),d}var Zp=Hp,Gp=Up,Yp=Vp;const Ti=P.forwardRef(({className:s,...t},r)=>e.jsx(Zp,{ref:r,className:ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Ti.displayName=Zp.displayName;const Ei=P.forwardRef(({className:s,src:t,...r},a)=>e.jsx(Gp,{ref:a,className:ut("aspect-square h-full w-full",s),src:t,onError:i=>{},...r}));Ei.displayName=Gp.displayName;const Mi=P.forwardRef(({className:s,...t},r)=>e.jsx(Yp,{ref:r,className:ut("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Mi.displayName=Yp.displayName;const il=Xf,Qd=em,z2=Qf,Kp=P.forwardRef(({className:s,...t},r)=>e.jsx(Sh,{ref:r,className:ut("fixed inset-0 z-50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),style:{backgroundColor:"rgba(0, 0, 0, 0.95)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:50,width:"100vw",height:"100vh"},...t}));Kp.displayName=Sh.displayName;const go=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(z2,{children:[e.jsx(Kp,{}),e.jsxs(kh,{ref:a,className:ut("fixed left-[50%] top-[50%] z-50 grid translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg overflow-y-auto",s),style:{backgroundColor:"var(--background)",border:"1px solid var(--border)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"min(95vw, 32rem)",maxWidth:"min(95vw, 32rem)",maxHeight:"min(85vh, 90vh)",height:"auto",minHeight:"auto"},...r,children:[t,e.jsxs(Ph,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(fl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));go.displayName=kh.displayName;const xo=({className:s,...t})=>e.jsx("div",{className:ut("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});xo.displayName="DialogHeader";const vo=P.forwardRef(({className:s,...t},r)=>e.jsx(Ch,{ref:r,className:ut("text-lg font-semibold leading-none tracking-tight",s),...t}));vo.displayName=Ch.displayName;const Zh=P.forwardRef(({className:s,...t},r)=>e.jsx(Lh,{ref:r,className:ut("text-sm text-muted-foreground",s),...t}));Zh.displayName=Lh.displayName;function Sn(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function Ii(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}function Jp(s,t){const r=Sn(s);return isNaN(t)?Ii(s,NaN):(t&&r.setDate(r.getDate()+t),r)}const Qp=6048e5,B2=864e5;let q2={};function Yc(){return q2}function ol(s,t){const r=Yc(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Sn(s),l=i.getDay(),d=(l<a?7:0)+l-a;return i.setDate(i.getDate()-d),i.setHours(0,0,0,0),i}function Ic(s){return ol(s,{weekStartsOn:1})}function Xp(s){const t=Sn(s),r=t.getFullYear(),a=Ii(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Ic(a),l=Ii(s,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const d=Ic(l);return t.getTime()>=i.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function Rc(s){const t=Sn(s);return t.setHours(0,0,0,0),t}function Xu(s){const t=Sn(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function H2(s,t){const r=Rc(s),a=Rc(t),i=+r-Xu(r),l=+a-Xu(a);return Math.round((i-l)/B2)}function $2(s){const t=Xp(s),r=Ii(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ic(r)}function eg(s,t){const r=t*7;return Jp(s,r)}function Pd(s,t){const r=Rc(s),a=Rc(t);return+r==+a}function U2(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function W2(s){if(!U2(s)&&typeof s!="number")return!1;const t=Sn(s);return!isNaN(Number(t))}function V2(s){const t=Sn(s),r=Ii(s,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Z2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},G2=(s,t,r)=>{let a;const i=Z2[s];return typeof i=="string"?a=i:t===1?a=i.one:a=i.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Yo(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const Y2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},J2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Q2={date:Yo({formats:Y2,defaultWidth:"full"}),time:Yo({formats:K2,defaultWidth:"full"}),dateTime:Yo({formats:J2,defaultWidth:"full"})},X2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ey=(s,t,r,a)=>X2[s];function Ma(s){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let i;if(a==="formatting"&&s.formattingValues){const d=s.defaultFormattingWidth||s.defaultWidth,u=r?.width?String(r.width):d;i=s.formattingValues[u]||s.formattingValues[d]}else{const d=s.defaultWidth,u=r?.width?String(r.width):s.defaultWidth;i=s.values[u]||s.values[d]}const l=s.argumentCallback?s.argumentCallback(t):t;return i[l]}}const ty={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ry={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ny={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ay={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oy=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ly={ordinalNumber:oy,era:Ma({values:ty,defaultWidth:"wide"}),quarter:Ma({values:sy,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ma({values:ry,defaultWidth:"wide"}),day:Ma({values:ny,defaultWidth:"wide"}),dayPeriod:Ma({values:ay,defaultWidth:"wide",formattingValues:iy,defaultFormattingWidth:"wide"})};function Ia(s){return(t,r={})=>{const a=r.width,i=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],l=t.match(i);if(!l)return null;const d=l[0],u=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],h=Array.isArray(u)?dy(u,y=>y.test(d)):cy(u,y=>y.test(d));let p;p=s.valueCallback?s.valueCallback(h):h,p=r.valueCallback?r.valueCallback(p):p;const v=t.slice(d.length);return{value:p,rest:v}}}function cy(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function dy(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function tg(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const i=a[0],l=t.match(s.parsePattern);if(!l)return null;let d=s.valueCallback?s.valueCallback(l[0]):l[0];d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}const hy=/^(\d+)(th|st|nd|rd)?/i,uy=/\d+/i,fy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},my={any:[/^b/i,/^(a|c)/i]},py={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gy={any:[/1/i,/2/i,/3/i,/4/i]},xy={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vy={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yy={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},by={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ny={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jy={ordinalNumber:tg({matchPattern:hy,parsePattern:uy,valueCallback:s=>parseInt(s,10)}),era:Ia({matchPatterns:fy,defaultMatchWidth:"wide",parsePatterns:my,defaultParseWidth:"any"}),quarter:Ia({matchPatterns:py,defaultMatchWidth:"wide",parsePatterns:gy,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ia({matchPatterns:xy,defaultMatchWidth:"wide",parsePatterns:vy,defaultParseWidth:"any"}),day:Ia({matchPatterns:yy,defaultMatchWidth:"wide",parsePatterns:by,defaultParseWidth:"any"}),dayPeriod:Ia({matchPatterns:wy,defaultMatchWidth:"any",parsePatterns:Ny,defaultParseWidth:"any"})},_y={code:"en-US",formatDistance:G2,formatLong:Q2,formatRelative:ey,localize:ly,match:jy,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Sy(s){const t=Sn(s);return H2(t,V2(t))+1}function ky(s){const t=Sn(s),r=+Ic(t)-+$2(t);return Math.round(r/Qp)+1}function sg(s,t){const r=Sn(s),a=r.getFullYear(),i=Yc(),l=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,d=Ii(s,0);d.setFullYear(a+1,0,l),d.setHours(0,0,0,0);const u=ol(d,t),h=Ii(s,0);h.setFullYear(a,0,l),h.setHours(0,0,0,0);const p=ol(h,t);return r.getTime()>=u.getTime()?a+1:r.getTime()>=p.getTime()?a:a-1}function Py(s,t){const r=Yc(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=sg(s,t),l=Ii(s,0);return l.setFullYear(i,0,a),l.setHours(0,0,0,0),ol(l,t)}function Cy(s,t){const r=Sn(s),a=+ol(r,t)-+Py(r,t);return Math.round(a/Qp)+1}function ws(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const bi={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return ws(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):ws(r+1,2)},d(s,t){return ws(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return ws(s.getHours()%12||12,t.length)},H(s,t){return ws(s.getHours(),t.length)},m(s,t){return ws(s.getMinutes(),t.length)},s(s,t){return ws(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),i=Math.trunc(a*Math.pow(10,r-3));return ws(i,t.length)}},$o={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ef={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),i=a>0?a:1-a;return r.ordinalNumber(i,{unit:"year"})}return bi.y(s,t)},Y:function(s,t,r,a){const i=sg(s,a),l=i>0?i:1-i;if(t==="YY"){const d=l%100;return ws(d,2)}return t==="Yo"?r.ordinalNumber(l,{unit:"year"}):ws(l,t.length)},R:function(s,t){const r=Xp(s);return ws(r,t.length)},u:function(s,t){const r=s.getFullYear();return ws(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return ws(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return ws(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return bi.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return ws(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const i=Cy(s,a);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):ws(i,t.length)},I:function(s,t,r){const a=ky(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):ws(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):bi.d(s,t)},D:function(s,t,r){const a=Sy(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):ws(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const i=s.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return ws(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const i=s.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return ws(l,t.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),i=a===0?7:a;switch(t){case"i":return String(i);case"ii":return ws(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const i=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let i;switch(a===12?i=$o.noon:a===0?i=$o.midnight:i=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let i;switch(a>=17?i=$o.evening:a>=12?i=$o.afternoon:a>=4?i=$o.morning:i=$o.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return bi.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):bi.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):ws(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):ws(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):bi.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):bi.s(s,t)},S:function(s,t){return bi.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return sf(a);case"XXXX":case"XX":return ao(a);case"XXXXX":case"XXX":default:return ao(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return sf(a);case"xxxx":case"xx":return ao(a);case"xxxxx":case"xxx":default:return ao(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+tf(a,":");case"OOOO":default:return"GMT"+ao(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+tf(a,":");case"zzzz":default:return"GMT"+ao(a,":")}},t:function(s,t,r){const a=Math.trunc(s.getTime()/1e3);return ws(a,t.length)},T:function(s,t,r){const a=s.getTime();return ws(a,t.length)}};function tf(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),i=Math.trunc(a/60),l=a%60;return l===0?r+String(i):r+String(i)+t+ws(l,2)}function sf(s,t){return s%60===0?(s>0?"-":"+")+ws(Math.abs(s)/60,2):ao(s,t)}function ao(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),i=ws(Math.trunc(a/60),2),l=ws(a%60,2);return r+i+t+l}const rf=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},rg=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ly=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return rf(s,t);let l;switch(a){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"});break}return l.replace("{{date}}",rf(a,t)).replace("{{time}}",rg(i,t))},Ay={p:rg,P:Ly},Ty=/^D+$/,Ey=/^Y+$/,My=["D","DD","YY","YYYY"];function Iy(s){return Ty.test(s)}function Ry(s){return Ey.test(s)}function Oy(s,t,r){const a=Dy(s,t,r);if(console.warn(a),My.includes(s))throw new RangeError(a)}function Dy(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Fy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,By=/^'([^]*?)'?$/,qy=/''/g,Hy=/[a-zA-Z]/;function Cl(s,t,r){const a=Yc(),i=r?.locale??a.locale??_y,l=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,d=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,u=Sn(s);if(!W2(u))throw new RangeError("Invalid time value");let h=t.match(zy).map(v=>{const y=v[0];if(y==="p"||y==="P"){const N=Ay[y];return N(v,i.formatLong)}return v}).join("").match(Fy).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const y=v[0];if(y==="'")return{isToken:!1,value:$y(v)};if(ef[y])return{isToken:!0,value:v};if(y.match(Hy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(h=i.localize.preprocessor(u,h));const p={firstWeekContainsDate:l,weekStartsOn:d,locale:i};return h.map(v=>{if(!v.isToken)return v.value;const y=v.value;(!r?.useAdditionalWeekYearTokens&&Ry(y)||!r?.useAdditionalDayOfYearTokens&&Iy(y))&&Oy(y,t,String(s));const N=ef[y[0]];return N(u,y,i.localize,p)}).join("")}function $y(s){const t=s.match(By);return t?t[1].replace(qy,"'"):s}function Uy(s,t){const r=Sn(s),a=Sn(t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function Wy(s,t){return eg(s,-4)}const Vy={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Zy=(s,t,r)=>{let a;const i=Vy[s];return typeof i=="string"?a=i:t===1?a=i.one:a=i.other.replace("{{count}}",String(t)),r?.addSuffix?r.comparison&&r.comparison>0?"em "+a:"há "+a:a},Gy={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Yy={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ky={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jy={date:Yo({formats:Gy,defaultWidth:"full"}),time:Yo({formats:Yy,defaultWidth:"full"}),dateTime:Yo({formats:Ky,defaultWidth:"full"})},Qy={lastWeek:s=>{const t=s.getDay();return"'"+(t===0||t===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},Xy=(s,t,r,a)=>{const i=Qy[s];return typeof i=="function"?i(t):i},eb={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},tb={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},sb={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},rb={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},nb={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},ab={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},ib=(s,t)=>{const r=Number(s);return t?.unit==="week"?r+"ª":r+"º"},ob={ordinalNumber:ib,era:Ma({values:eb,defaultWidth:"wide"}),quarter:Ma({values:tb,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ma({values:sb,defaultWidth:"wide"}),day:Ma({values:rb,defaultWidth:"wide"}),dayPeriod:Ma({values:nb,defaultWidth:"wide",formattingValues:ab,defaultFormattingWidth:"wide"})},lb=/^(\d+)[ºªo]?/i,cb=/\d+/i,db={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},hb={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},ub={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},fb={any:[/1/i,/2/i,/3/i,/4/i]},mb={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},pb={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},gb={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},xb={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},vb={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},yb={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},bb={ordinalNumber:tg({matchPattern:lb,parsePattern:cb,valueCallback:s=>parseInt(s,10)}),era:Ia({matchPatterns:db,defaultMatchWidth:"wide",parsePatterns:hb,defaultParseWidth:"any"}),quarter:Ia({matchPatterns:ub,defaultMatchWidth:"wide",parsePatterns:fb,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ia({matchPatterns:mb,defaultMatchWidth:"wide",parsePatterns:pb,defaultParseWidth:"any"}),day:Ia({matchPatterns:gb,defaultMatchWidth:"wide",parsePatterns:xb,defaultParseWidth:"any"}),dayPeriod:Ia({matchPatterns:vb,defaultMatchWidth:"any",parsePatterns:yb,defaultParseWidth:"any"})},Xd={code:"pt-BR",formatDistance:Zy,formatLong:Jy,formatRelative:Xy,localize:ob,match:bb,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nf(){const{toast:s}=Rs(),[t,r]=P.useState(new Date),[a,i]=P.useState(new Date),[l,d]=P.useState(null),[u,h]=P.useState(!1),[p,v]=P.useState("all"),y=te=>{switch(te){case"agendado":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"confirmado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"em_andamento":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"concluido":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},N=te=>{switch(te){case"confirmado":return e.jsx(fs,{className:"h-3 w-3"});case"cancelado":return e.jsx(Ai,{className:"h-3 w-3"});case"em_andamento":return e.jsx(Qm,{className:"h-3 w-3"});case"concluido":return e.jsx(fs,{className:"h-3 w-3"});default:return e.jsx(mo,{className:"h-3 w-3"})}},g=te=>{switch(te){case"agendado":return"Agendado";case"confirmado":return"Confirmado";case"em_andamento":return"Em Andamento";case"concluido":return"Concluído";case"cancelado":return"Cancelado";default:return te}},C=[],j=te=>C.filter(we=>Pd(we.date,te)),T=()=>{const te=ol(new Date(t.getFullYear(),t.getMonth(),1)),we=[];for(let R=0;R<42;R++)we.push(Jp(te,R));return we},A=()=>{r(Wy(t))},S=()=>{r(eg(t,4))},q=te=>{d(te),h(!0)},V=()=>{s({title:"Agendamento cancelado",description:"Seu agendamento foi cancelado com sucesso."}),h(!1)},Y=()=>{s({title:"Reagendamento",description:"Redirecionando para reagendar consulta..."}),h(!1)},ue=()=>{l?.meetingLink&&(window.open(l.meetingLink,"_blank"),s({title:"Videochamada iniciada",description:"Abrindo link da reunião..."}))},le=()=>{l?.professionalPhone&&window.open(`tel:${l.professionalPhone}`)},ee=()=>{if(l?.location){const te=encodeURIComponent(l.location);window.open(`https://maps.google.com/?q=${te}`,"_blank")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Minha Agenda"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto p-4 lg:p-8",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agenda"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Gerencie seus agendamentos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Me,{variant:"outline",children:[e.jsx(A1,{className:"h-4 w-4 mr-2"}),"Filtros"]}),e.jsxs(Me,{className:"bg-yellow-500 hover:bg-yellow-600",children:[e.jsx(Bh,{className:"h-4 w-4 mr-2"}),"Nova Consulta"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 overflow-x-auto",children:[e.jsx(Me,{variant:p==="all"?"default":"outline",size:"sm",onClick:()=>v("all"),className:p==="all"?"bg-yellow-500 hover:bg-yellow-600":"",children:"Todos"}),e.jsx(Me,{variant:p==="agendado"?"default":"outline",size:"sm",onClick:()=>v("agendado"),className:p==="agendado"?"bg-blue-500 hover:bg-blue-600":"",children:"Agendados"}),e.jsx(Me,{variant:p==="confirmado"?"default":"outline",size:"sm",onClick:()=>v("confirmado"),className:p==="confirmado"?"bg-green-500 hover:bg-green-600":"",children:"Confirmados"}),e.jsx(Me,{variant:p==="concluido"?"default":"outline",size:"sm",onClick:()=>v("concluido"),className:p==="concluido"?"bg-gray-500 hover:bg-gray-600":"",children:"Concluídos"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(lt,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(us,{className:"text-lg",children:Cl(t,"MMMM yyyy",{locale:Xd})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{variant:"outline",size:"sm",onClick:A,children:e.jsx(S1,{className:"h-4 w-4"})}),e.jsx(Me,{variant:"outline",size:"sm",onClick:S,children:e.jsx(rp,{className:"h-4 w-4"})})]})]}),e.jsxs(ct,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(te=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600 dark:text-gray-400",children:te},te))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:T().map((te,we)=>{const R=j(te),z=Uy(te,t),H=Pd(te,new Date),B=Pd(te,a);return e.jsxs("div",{className:`
                            min-h-[80px] p-1 border border-gray-200 dark:border-gray-700 cursor-pointer transition-colors
                            ${z?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"}
                            ${H?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-700":""}
                            ${B?"ring-2 ring-yellow-500":""}
                            hover:bg-gray-50 dark:hover:bg-gray-700
                          `,onClick:()=>i(te),children:[e.jsx("div",{className:`
                            text-sm font-medium mb-1
                            ${z?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"}
                            ${H?"text-yellow-600 dark:text-yellow-400":""}
                          `,children:Cl(te,"d")}),e.jsxs("div",{className:"space-y-1",children:[R.slice(0,2).map(pe=>e.jsxs("div",{className:`
                                  text-xs p-1 rounded cursor-pointer truncate
                                  ${y(pe.status)}
                                `,onClick:he=>{he.stopPropagation(),q(pe)},children:[pe.time," - ",pe.professionalName]},pe.id)),R.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 p-1",children:["+",R.length-2," mais"]})]})]},we)})})]})]})}),e.jsx("div",{children:e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"text-lg",children:["Agendamentos - ",Cl(a,"dd/MM/yyyy")]})}),e.jsx(ct,{className:"space-y-4",children:j(a).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Nenhum agendamento para este dia"})]}):j(a).map(te=>e.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",onClick:()=>q(te),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs(Ti,{className:"w-10 h-10",children:[e.jsx(Ei,{src:te.professionalAvatar,alt:te.professionalName}),e.jsx(Mi,{children:te.professionalName.split(" ").map(we=>we[0]).join("")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:te.professionalName}),e.jsxs(Bs,{className:`text-xs ${y(te.status)}`,children:[N(te.status),e.jsx("span",{className:"ml-1",children:g(te.status)})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:te.specialization}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(or,{className:"h-3 w-3"}),te.time," (",te.duration,"min)"]}),te.type==="presencial"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-3 w-3"}),"Presencial"]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nc,{className:"h-3 w-3"}),"Online"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["R$ ",te.price]}),te.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:te.rating})]})]})]})]})},te.id))})]})})]}),e.jsx(il,{open:u,onOpenChange:h,children:e.jsxs(go,{className:"max-w-2xl",children:[e.jsx(xo,{children:e.jsxs(vo,{className:"flex items-center gap-3",children:[e.jsxs(Ti,{className:"w-12 h-12",children:[e.jsx(Ei,{src:l?.professionalAvatar,alt:l?.professionalName}),e.jsx(Mi,{children:l?.professionalName.split(" ").map(te=>te[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:l?.professionalName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:l?.specialization})]})]})}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Bs,{className:`${y(l.status)}`,children:[N(l.status),e.jsx("span",{className:"ml-1",children:g(l.status)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.type==="online"&&l.meetingLink&&e.jsxs(Me,{size:"sm",onClick:ue,className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(Nc,{className:"h-4 w-4 mr-2"}),"Entrar na Reunião"]}),l.professionalPhone&&e.jsxs(Me,{variant:"outline",size:"sm",onClick:le,children:[e.jsx(Li,{className:"h-4 w-4 mr-2"}),"Ligar"]}),e.jsxs(Me,{variant:"outline",size:"sm",children:[e.jsx(Or,{className:"h-4 w-4 mr-2"}),"Mensagem"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Data e Horário"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(gr,{className:"h-4 w-4"}),Cl(l.date,"dd 'de' MMMM 'de' yyyy",{locale:Xd})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 mt-1",children:[e.jsx(or,{className:"h-4 w-4"}),l.time," - ",l.duration," minutos"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Tipo de Consulta"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:l.type==="presencial"?e.jsxs(e.Fragment,{children:[e.jsx(Ns,{className:"h-4 w-4"}),"Presencial"]}):e.jsxs(e.Fragment,{children:[e.jsx(Nc,{className:"h-4 w-4"}),"Online"]})})]}),l.location&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Local"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(Ns,{className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{children:l.location}),e.jsxs(Me,{variant:"link",size:"sm",className:"p-0 h-auto text-yellow-600 hover:text-yellow-700",onClick:ee,children:[e.jsx(op,{className:"h-3 w-3 mr-1"}),"Ver no mapa"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Valor"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R$ ",l.price]})]}),l.rating&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Avaliação"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"font-semibold",children:l.rating})]}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Excelente profissional"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Contato"}),l.professionalPhone&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(Li,{className:"h-4 w-4"}),l.professionalPhone]})]})]})]}),l.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Observações"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:l.notes})]}),l.status!=="concluido"&&l.status!=="cancelado"&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.canReschedule&&e.jsxs(Me,{variant:"outline",onClick:()=>Y(),children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Reagendar"]}),l.canCancel&&e.jsxs(Me,{variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-900/20",onClick:()=>V(),children:[e.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]})]})]})})]}),e.jsx(Da,{})]})}const xt=P.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:ut("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));xt.displayName="Input";var wb="Label",ng=P.forwardRef((s,t)=>e.jsx(hs.label,{...s,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(s.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ng.displayName=wb;var ag=ng;const Nb=Hc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_n=P.forwardRef(({className:s,...t},r)=>e.jsx(ag,{ref:r,className:ut(Nb(),s),...t}));_n.displayName=ag.displayName;const Zn=P.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:ut("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));Zn.displayName="Textarea";function af(){const[,s]=sr(),{logout:t}=lr(),{toast:r}=Rs(),a=Ih(),[i,l]=P.useState(!1),[d,u]=P.useState(!1),[h,p]=P.useState(!1),v=P.useRef(null),[y,N]=P.useState({name:"",email:"",phone:"",address:"",cpf:""}),{data:g,isLoading:C}=Ac({queryKey:["/api/user"]}),{data:j=[]}=Ac({queryKey:["/api/appointments"]});P.useEffect(()=>{g&&N({name:g.name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",cpf:localStorage.getItem("client_cpf")||""})},[g]);const T=(j||[]).filter(fe=>new Date(fe.scheduledFor)<=new Date).length,A=zu({mutationFn:async fe=>{const E=localStorage.getItem("token");if(!E)throw new Error("Token não encontrado");const W=await fetch(`${ht()}/api/user/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({name:fe.name,email:fe.email,phone:fe.phone,address:fe.address})});if(!W.ok)throw new Error("Erro ao atualizar perfil");return W.json()},onSuccess:()=>{try{localStorage.setItem("client_cpf",y.cpf.trim())}catch{}N(fe=>({...fe,cpf:fe.cpf.trim()})),a.invalidateQueries({queryKey:["/api/user"]}),l(!1),r({title:"Perfil atualizado",description:"Suas informações foram atualizadas com sucesso."})},onError:fe=>{r({title:"Erro",description:"Não foi possível atualizar o perfil. Tente novamente.",variant:"destructive"})}}),S=zu({mutationFn:async fe=>{const E=localStorage.getItem("token");if(!E)throw new Error("Token não encontrado");const W=new FormData;W.append("profileImage",fe);const Z=await fetch(`${ht()}/api/user/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${E}`},body:W});if(!Z.ok)throw new Error("Erro ao fazer upload da imagem");return Z.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/user"]}),u(!1),p(!1),r({title:"Foto atualizada",description:"Sua foto de perfil foi atualizada com sucesso."})},onError:fe=>{u(!1),r({title:"Erro",description:"Não foi possível fazer upload da imagem. Tente novamente.",variant:"destructive"})}}),q=()=>{l(!0)},V=()=>{A.mutate(y)},Y=()=>{l(!1),g&&N({name:g.name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",cpf:localStorage.getItem("client_cpf")||""})};P.useEffect(()=>{if(!i)try{const fe=localStorage.getItem("client_cpf")||"";fe&&fe!==y.cpf&&N(E=>({...E,cpf:fe}))}catch{}},[i]);const ue=()=>{v.current?.click()},le=fe=>{const E=fe.target.files?.[0];E&&(u(!0),S.mutate(E))},ee=(fe,E)=>{N(W=>({...W,[fe]:E}))},te=fe=>/.+@.+\..+/.test(fe.trim()),we=fe=>{const E=fe.replace(/\D/g,"");return!(E.length!==11||E[0]==="0"||E[1]==="0"||E[2]!=="9")},R=fe=>{const E=fe.replace(/\D/g,"");if(!E||E.length!==11||/^(\d)\1{10}$/.test(E))return!1;const W=re=>{let de=0;for(let J=0;J<re;J++)de+=parseInt(E[J],10)*(re+1-J);const Ne=de*10%11;return Ne===10?0:Ne},Z=W(9),X=W(10);return Z===parseInt(E[9],10)&&X===parseInt(E[10],10)},z=te(y.email),H=we(y.phone),B=R(y.cpf),pe=[z,H,B].filter(Boolean).length,he=()=>{s("/payment")},be=()=>{console.log("Opening privacy settings")},ne=()=>{console.log("Opening help center")},xe=()=>{s("/my-requests")},ae=()=>{t(),window.location.href="/",r({title:"Logout realizado",description:"Você foi desconectado com sucesso."})};return C?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando perfil..."})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:e.jsxs("div",{className:"w-full max-w-sm lg:max-w-none mx-auto lg:mx-0 relative px-3 sm:px-4 lg:px-8 py-3 sm:py-4 lg:py-6",children:[e.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"mr-2 p-2 lg:hidden",children:e.jsx(Zs,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Meu Perfil"})]}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsxs("div",{className:"relative inline-block mb-3 sm:mb-4",children:[g?.profileImage&&!h?e.jsx("img",{src:`${ht()}${g.profileImage}`,alt:`Foto de ${g?.name||"Cliente"}`,className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto rounded-full object-cover border-4 border-white shadow-lg",onError:()=>{console.log("Erro ao carregar imagem:",g.profileImage),p(!0)},onLoad:()=>{console.log("Imagem carregada com sucesso:",g.profileImage),p(!1)}}):e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto bg-yellow-500 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white",children:g?.name?.charAt(0)||"G"})}),e.jsx(Me,{size:"sm",variant:"secondary",className:"absolute -bottom-1 -right-1 sm:-bottom-2 sm:-right-2 rounded-full w-6 h-6 sm:w-8 sm:h-8 p-0 bg-white border-2 border-gray-200 hover:bg-gray-50",onClick:ue,disabled:d,children:d?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-gray-600"}):e.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:le,className:"hidden"})]}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2",children:g?.name||"Gustavo Silva"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:g?.createdAt?`Membro desde ${new Date(g.createdAt).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}`:"Membro"}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:j?.length||0}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Agendamentos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:T}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Concluídos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:"4.8"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Avaliação"})]})]}),i?e.jsxs("div",{className:"flex gap-2 mb-4 sm:mb-6",children:[e.jsxs(Me,{onClick:V,className:"flex-1 h-10 sm:h-12 text-sm sm:text-base",disabled:A.isPending,children:[A.isPending?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Salvar"]}),e.jsx(Me,{variant:"outline",onClick:Y,className:"h-10 sm:h-12 text-sm sm:text-base",children:e.jsx(fl,{className:"h-4 w-4"})})]}):e.jsxs(Me,{onClick:q,className:"w-full mb-4 sm:mb-6 h-10 sm:h-12 text-sm sm:text-base",children:[e.jsx(up,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})]}),e.jsxs(lt,{className:"mb-4 sm:mb-6",children:[e.jsx(rs,{className:"pb-3 sm:pb-4",children:e.jsx(us,{className:"text-base sm:text-lg",children:"Informações Pessoais"})}),e.jsx(ct,{className:"space-y-3 sm:space-y-4",children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_n,{htmlFor:"name",className:"text-xs sm:text-sm text-gray-600",children:"Nome"}),e.jsx(xt,{id:"name",value:y.name,onChange:fe=>ee("name",fe.target.value),className:"mt-1",placeholder:"Seu nome completo"})]}),e.jsxs("div",{children:[e.jsx(_n,{htmlFor:"email",className:"text-xs sm:text-sm text-gray-600",children:"Email"}),e.jsx(xt,{id:"email",type:"email",value:y.email,onChange:fe=>ee("email",fe.target.value),className:"mt-1",placeholder:"seu@email.com"})]}),e.jsxs("div",{children:[e.jsx(_n,{htmlFor:"phone",className:"text-xs sm:text-sm text-gray-600",children:"Telefone"}),e.jsx(xt,{id:"phone",value:y.phone,onChange:fe=>ee("phone",fe.target.value),className:`mt-1 ${y.phone&&!H?"border-red-500":""}`,placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx(_n,{htmlFor:"cpf",className:"text-xs sm:text-sm text-gray-600",children:"CPF"}),e.jsx(xt,{id:"cpf",value:y.cpf,onChange:fe=>ee("cpf",fe.target.value),className:`mt-1 ${y.cpf&&!B?"border-red-500":""}`,placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx(_n,{htmlFor:"address",className:"text-xs sm:text-sm text-gray-600",children:"Endereço"}),e.jsx(Zn,{id:"address",value:y.address,onChange:fe=>ee("address",fe.target.value),className:"mt-1",placeholder:"Seu endereço completo",rows:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Tc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:(g?.email||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Li,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Telefone"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(g?.phone||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Dl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"CPF"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(y.cpf||localStorage.getItem("client_cpf")||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Ns,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Endereço"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(g?.address||"").trim()||"Não informado"})]})]})]})})]}),e.jsx(lt,{className:`mb-4 sm:mb-6 ${pe===3?"border-green-100 bg-gradient-to-r from-green-50 to-emerald-50":"border-yellow-100 bg-gradient-to-r from-yellow-50 to-amber-50"}`,children:e.jsx(ct,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${pe===3?"bg-green-500":"bg-yellow-500"} rounded-full flex items-center justify-center shadow-lg`,children:e.jsx(po,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-1",children:pe===3?"Conta Verificada":"Verificação em andamento"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 leading-relaxed",children:pe===3?"Todos os dados foram validados":`Complete ${pe}/3 etapas para verificar sua conta`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Email"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Telefone"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"CPF"})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Bs,{className:`${pe===3?"bg-green-500":"bg-yellow-500"} text-white shadow-md hover:opacity-90 transition-colors px-3 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm font-medium border-0`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsxs("span",{className:"text-base sm:text-lg",children:[pe,"/3"]}),e.jsx("span",{children:pe===3?"Verificado":"Pendente"})]})})})]})})}),e.jsxs("div",{className:"space-y-2 mb-16 sm:mb-20",children:[e.jsx(lt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:xe,children:e.jsx(ct,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(zh,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Minhas Solicitações"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(lt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:he,children:e.jsx(ct,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Dl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Formas de Pagamento"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(lt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s("/settings"),children:e.jsx(ct,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(dp,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Configurações"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(lt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:be,children:e.jsx(ct,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(po,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Privacidade e Segurança"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(lt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:ne,children:e.jsx(ct,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(np,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Ajuda e Suporte"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700 my-3 sm:my-4"}),e.jsx(lt,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:ae,children:e.jsx(ct,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Fl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-red-500 text-sm sm:text-base",children:"Sair da Conta"})]})})})]}),e.jsx(Da,{})]})})})}function ig(s){const t=P.useRef({value:s,previous:s});return P.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var Kc="Switch",[jb,dj]=wo(Kc),[_b,Sb]=jb(Kc),og=P.forwardRef((s,t)=>{const{__scopeSwitch:r,name:a,checked:i,defaultChecked:l,required:d,disabled:u,value:h="on",onCheckedChange:p,form:v,...y}=s,[N,g]=P.useState(null),C=Lr(t,q=>g(q)),j=P.useRef(!1),T=N?v||!!N.closest("form"):!0,[A,S]=sl({prop:i,defaultProp:l??!1,onChange:p,caller:Kc});return e.jsxs(_b,{scope:r,checked:A,disabled:u,children:[e.jsx(hs.button,{type:"button",role:"switch","aria-checked":A,"aria-required":d,"data-state":hg(A),"data-disabled":u?"":void 0,disabled:u,value:h,...y,ref:C,onClick:Gt(s.onClick,q=>{S(V=>!V),T&&(j.current=q.isPropagationStopped(),j.current||q.stopPropagation())})}),T&&e.jsx(dg,{control:N,bubbles:!j.current,name:a,value:h,checked:A,required:d,disabled:u,form:v,style:{transform:"translateX(-100%)"}})]})});og.displayName=Kc;var lg="SwitchThumb",cg=P.forwardRef((s,t)=>{const{__scopeSwitch:r,...a}=s,i=Sb(lg,r);return e.jsx(hs.span,{"data-state":hg(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});cg.displayName=lg;var kb="SwitchBubbleInput",dg=P.forwardRef(({__scopeSwitch:s,control:t,checked:r,bubbles:a=!0,...i},l)=>{const d=P.useRef(null),u=Lr(d,l),h=ig(r),p=Zx(t);return P.useEffect(()=>{const v=d.current;if(!v)return;const y=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(y,"checked").set;if(h!==r&&g){const C=new Event("click",{bubbles:a});g.call(v,r),v.dispatchEvent(C)}},[h,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:u,style:{...i.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});dg.displayName=kb;function hg(s){return s?"checked":"unchecked"}var ug=og,Pb=cg;const ji=P.forwardRef(({className:s,...t},r)=>e.jsx(ug,{className:ut("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input hover:shadow-md active:scale-95",s),...t,ref:r,children:e.jsx(Pb,{className:ut("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-all duration-300 ease-in-out data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 hover:shadow-xl")})}));ji.displayName=ug.displayName;async function Cb(s){if(!s.ok){const t=await s.text()||s.statusText;throw new Error(`${s.status}: ${t}`)}}async function Bl(s,t,r){const a=r?{"Content-Type":"application/json"}:{},i=localStorage.getItem("token");i&&(a.Authorization=`Bearer ${i}`);const d=t.startsWith("http")?t:`http://localhost:8080${t}`;let u=await fetch(d,{method:s,headers:a,body:r?JSON.stringify(r):void 0,credentials:"include"});return u.status===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload(),u):(await Cb(u),u)}const Lb=({on401:s})=>async({queryKey:t})=>{try{const r="http://localhost:8080",a=t[0],i=a.startsWith("http")?a:`${r}${a}`,l=localStorage.getItem("token"),d={};l&&(d.Authorization=`Bearer ${l}`);const u=new AbortController,h=setTimeout(()=>u.abort(),1e4);let p=await fetch(i,{headers:d,credentials:"include",signal:u.signal});if(clearTimeout(h),s==="returnNull"&&(p.status===401||p.status===403))return null;if(!p.ok){if(s==="returnNull")return null;const v=await p.text()||p.statusText;throw new Error(`${p.status}: ${v}`)}return await p.json()}catch(r){return console.warn("API request failed:",r.message),null}};new _m({defaultOptions:{queries:{queryFn:Lb({on401:"returnNull"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,retry:!1,retryOnMount:!1,refetchOnReconnect:!1},mutations:{retry:!1}}});function of(){const{theme:s,setTheme:t}=Tm(),{user:r,logout:a}=lr(),{toast:i}=Rs(),[l,d]=P.useState(!1),[u,h]=P.useState(!1),[p,v]=P.useState(!1),[y,N]=P.useState({name:r?.name||"",email:r?.email||"",phone:r?.phone||"",address:"",bio:""}),[g,C]=P.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[j,T]=P.useState({current:!1,new:!1,confirm:!1}),[A,S]=P.useState({appointments:!0,messages:!0,promotions:!1,emailUpdates:!0,smsAlerts:!0}),q=async()=>{try{(await Bl("PUT","/api/user/profile",y)).ok&&(i({title:"Perfil atualizado",description:"Suas informações foram salvas com sucesso."}),d(!1))}catch{i({title:"Erro",description:"Não foi possível atualizar o perfil.",variant:"destructive"})}},V=async()=>{if(g.newPassword!==g.confirmPassword){i({title:"Erro",description:"As senhas não coincidem.",variant:"destructive"});return}try{(await Bl("PUT","/api/user/password",{currentPassword:g.currentPassword,newPassword:g.newPassword})).ok&&(i({title:"Senha alterada",description:"Sua senha foi atualizada com sucesso."}),h(!1),C({currentPassword:"",newPassword:"",confirmPassword:""}))}catch{i({title:"Erro",description:"Não foi possível alterar a senha.",variant:"destructive"})}},Y=()=>{a(),window.location.href="/"};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"lg:hidden sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-3 sm:px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>window.history.back(),children:e.jsx(Zs,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-3 sm:p-4 lg:p-8 space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[e.jsx(Zl,{size:24,className:"sm:w-8 sm:h-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Configurações"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:"Gerencie sua conta e preferências"})]})]})}),e.jsxs(lt,{children:[e.jsxs(rs,{className:"flex flex-row items-center justify-between space-y-0 pb-3 sm:pb-4",children:[e.jsxs(us,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(Gr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Perfil"]}),e.jsxs(Me,{variant:"outline",size:"sm",onClick:()=>d(!l),className:"text-xs sm:text-sm",children:[e.jsx(cp,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),l?"Cancelar":"Editar"]})]}),e.jsxs(ct,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-yellow-100 dark:bg-yellow-900/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Gr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm sm:text-base",children:r?.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 truncate",children:r?.email}),e.jsx(Bs,{variant:"secondary",className:"mt-1 text-xs",children:r?.userType==="client"?"Cliente":"Profissional"})]}),l&&e.jsx(Me,{variant:"outline",size:"sm",className:"flex-shrink-0",children:e.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 pt-3 sm:pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome"}),e.jsx(xt,{value:y.name,onChange:ue=>N({...y,name:ue.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx(xt,{value:y.email,onChange:ue=>N({...y,email:ue.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefone"}),e.jsx(xt,{value:y.phone,onChange:ue=>N({...y,phone:ue.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Endereço"}),e.jsx(xt,{value:y.address,onChange:ue=>N({...y,address:ue.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bio"}),e.jsx("textarea",{value:y.bio,onChange:ue=>N({...y,bio:ue.target.value}),className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",rows:3,placeholder:"Conte um pouco sobre você..."})]}),e.jsx("div",{className:"md:col-span-2 flex gap-2",children:e.jsxs(Me,{onClick:q,className:"bg-yellow-500 hover:bg-yellow-600 text-sm",children:[e.jsx(Mc,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Salvar"]})})]})]})]}),e.jsxs(lt,{children:[e.jsx(rs,{className:"pb-3 sm:pb-4",children:e.jsxs(us,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(El,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Notificações"]})}),e.jsx(ct,{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Agendamentos"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Receber notificações sobre consultas"})]}),e.jsx(ji,{checked:A.appointments,onCheckedChange:ue=>S({...A,appointments:ue})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Mensagens"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Notificações de novas mensagens"})]}),e.jsx(ji,{checked:A.messages,onCheckedChange:ue=>S({...A,messages:ue})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Promoções"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Ofertas e descontos especiais"})]}),e.jsx(ji,{checked:A.promotions,onCheckedChange:ue=>S({...A,promotions:ue})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Receber atualizações por email"})]}),e.jsx(ji,{checked:A.emailUpdates,onCheckedChange:ue=>S({...A,emailUpdates:ue})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"SMS"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Alertas importantes via SMS"})]}),e.jsx(ji,{checked:A.smsAlerts,onCheckedChange:ue=>S({...A,smsAlerts:ue})})]})]})})]}),e.jsxs(lt,{children:[e.jsx(rs,{className:"pb-3 sm:pb-4",children:e.jsxs(us,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s==="dark"?e.jsx(ap,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}):e.jsx(fp,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Aparência"]})}),e.jsx(ct,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Modo Escuro"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Alternar entre tema claro e escuro"})]}),e.jsx(ji,{checked:s==="dark",onCheckedChange:ue=>t(ue?"dark":"light")})]})})]}),e.jsxs(lt,{children:[e.jsx(rs,{className:"pb-3 sm:pb-4",children:e.jsxs(us,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(po,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Segurança"]})}),e.jsxs(ct,{className:"space-y-3 sm:space-y-4",children:[e.jsxs(Me,{variant:"outline",onClick:()=>h(!u),className:"w-full justify-start text-sm",children:[e.jsx(E1,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Alterar Senha"]}),u&&e.jsxs("div",{className:"space-y-3 sm:space-y-4 p-3 sm:p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha Atual"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xt,{type:j.current?"text":"password",value:g.currentPassword,onChange:ue=>C({...g,currentPassword:ue.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Me,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>T({...j,current:!j.current}),children:j.current?e.jsx(wc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(lo,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nova Senha"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xt,{type:j.new?"text":"password",value:g.newPassword,onChange:ue=>C({...g,newPassword:ue.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Me,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>T({...j,new:!j.new}),children:j.new?e.jsx(wc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(lo,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar Nova Senha"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xt,{type:j.confirm?"text":"password",value:g.confirmPassword,onChange:ue=>C({...g,confirmPassword:ue.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Me,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>T({...j,confirm:!j.confirm}),children:j.confirm?e.jsx(wc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(lo,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs(Me,{onClick:V,className:"bg-yellow-500 hover:bg-yellow-600 text-sm",children:[e.jsx(Mc,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Alterar Senha"]})]})]})]}),e.jsxs(lt,{className:"border-red-200 dark:border-red-800",children:[e.jsx(rs,{className:"pb-3 sm:pb-4",children:e.jsxs(us,{className:"flex items-center gap-2 text-base sm:text-lg text-red-600 dark:text-red-400",children:[e.jsx(nl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Zona de Perigo"]})}),e.jsx(ct,{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white mb-1",children:"Excluir Conta"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Esta ação não pode ser desfeita. Sua conta será permanentemente removida."}),e.jsxs(Me,{variant:"destructive",onClick:()=>v(!0),className:"text-sm",children:[e.jsx(nl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Excluir Conta"]})]})})]}),e.jsx("div",{className:"pt-4 sm:pt-6",children:e.jsxs(Me,{variant:"outline",onClick:Y,className:"w-full text-red-600 border-red-200 hover:bg-red-50 dark:border-red-800 dark:hover:bg-red-900/20 text-sm",children:[e.jsx(Fl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Sair da Conta"]})})]})]})}const Ab=({amount:s})=>{const{toast:t}=Rs(),[,r]=sr(),[a,i]=P.useState(!1),[l,d]=P.useState(""),[u,h]=P.useState(""),[p,v]=P.useState(""),[y,N]=P.useState(""),g=async C=>{C.preventDefault(),i(!0);try{(await Bl("POST","/api/create-payment-intent",{amount:s,card:{cardNumber:l,expiryDate:u,cvv:p,cardHolder:y}})).ok&&(t({title:"Pagamento Realizado",description:"Seu pagamento foi processado com sucesso!"}),r("/profile"))}catch(j){t({title:"Erro no Pagamento",description:j.message||"Erro ao processar pagamento",variant:"destructive"})}i(!1)};return e.jsxs("form",{onSubmit:g,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Nome no Cartão"}),e.jsx(xt,{type:"text",placeholder:"João da Silva",value:y,onChange:C=>N(C.target.value),className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Número do Cartão"}),e.jsx(xt,{type:"text",placeholder:"0000 0000 0000 0000",value:l,onChange:C=>d(C.target.value),maxLength:19,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Validade"}),e.jsx(xt,{type:"text",placeholder:"MM/AA",value:u,onChange:C=>h(C.target.value),maxLength:5,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"CVV"}),e.jsx(xt,{type:"text",placeholder:"123",value:p,onChange:C=>v(C.target.value),maxLength:4,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]})]})]}),e.jsx(Me,{type:"submit",disabled:a,className:"w-full h-10 sm:h-12 text-sm sm:text-base font-semibold",children:a?"Processando...":`Pagar R$ ${s.toFixed(2)}`})]})};function Tb(){const[,s]=sr(),t=150;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:e.jsx("div",{className:"max-w-lg mx-auto px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Me,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[e.jsx(Zs,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold",children:"Pagamento"}),e.jsx("div",{className:"w-12 sm:w-16"})]})})}),e.jsxs("div",{className:"max-w-lg mx-auto p-3 sm:p-4 space-y-4 sm:space-y-6",children:[e.jsxs(lt,{children:[e.jsx(rs,{className:"pb-3 sm:pb-4",children:e.jsxs(us,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(Dl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Resumo do Serviço"]})}),e.jsxs(ct,{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Consulta Fisioterapia"}),e.jsx("span",{children:"R$ 120,00"})]}),e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Taxa de serviço"}),e.jsx("span",{children:"R$ 30,00"})]}),e.jsx("div",{className:"border-t pt-2 sm:pt-3",children:e.jsxs("div",{className:"flex justify-between font-semibold text-base sm:text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["R$ ",t.toFixed(2)]})]})})]})]}),e.jsxs(lt,{children:[e.jsx(rs,{className:"pb-3 sm:pb-4",children:e.jsx(us,{className:"text-base sm:text-lg",children:"Informações de Pagamento"})}),e.jsx(ct,{children:e.jsx(Ab,{amount:t})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(po,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-800 dark:text-green-300",children:"Pagamento Seguro"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Suas informações são protegidas com criptografia SSL"})]}),e.jsx(Vl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"})]})]}),e.jsx(Da,{hidePlus:!0})]})}var Jc="Tabs",[Eb,hj]=wo(Jc,[tm]),fg=tm(),[Mb,Gh]=Eb(Jc),mg=P.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,onValueChange:i,defaultValue:l,orientation:d="horizontal",dir:u,activationMode:h="automatic",...p}=s,v=sm(u),[y,N]=sl({prop:a,onChange:i,defaultProp:l??"",caller:Jc});return e.jsx(Mb,{scope:r,baseId:Ul(),value:y,onValueChange:N,orientation:d,dir:v,activationMode:h,children:e.jsx(hs.div,{dir:v,"data-orientation":d,...p,ref:t})})});mg.displayName=Jc;var pg="TabsList",gg=P.forwardRef((s,t)=>{const{__scopeTabs:r,loop:a=!0,...i}=s,l=Gh(pg,r),d=fg(r);return e.jsx(Gx,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:a,children:e.jsx(hs.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:t})})});gg.displayName=pg;var xg="TabsTrigger",vg=P.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,disabled:i=!1,...l}=s,d=Gh(xg,r),u=fg(r),h=wg(d.baseId,a),p=Ng(d.baseId,a),v=a===d.value;return e.jsx(Yx,{asChild:!0,...u,focusable:!i,active:v,children:e.jsx(hs.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":p,"data-state":v?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...l,ref:t,onMouseDown:Gt(s.onMouseDown,y=>{!i&&y.button===0&&y.ctrlKey===!1?d.onValueChange(a):y.preventDefault()}),onKeyDown:Gt(s.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&d.onValueChange(a)}),onFocus:Gt(s.onFocus,()=>{const y=d.activationMode!=="manual";!v&&!i&&y&&d.onValueChange(a)})})})});vg.displayName=xg;var yg="TabsContent",bg=P.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,forceMount:i,children:l,...d}=s,u=Gh(yg,r),h=wg(u.baseId,a),p=Ng(u.baseId,a),v=a===u.value,y=P.useRef(v);return P.useEffect(()=>{const N=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(N)},[]),e.jsx(jh,{present:i||v,children:({present:N})=>e.jsx(hs.div,{"data-state":v?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!N,id:p,tabIndex:0,...d,ref:t,style:{...s.style,animationDuration:y.current?"0s":void 0},children:N&&l})})});bg.displayName=yg;function wg(s,t){return`${s}-trigger-${t}`}function Ng(s,t){return`${s}-content-${t}`}var Ib=mg,jg=gg,_g=vg,Sg=bg;const kg=Ib,Yh=P.forwardRef(({className:s,...t},r)=>e.jsx(jg,{ref:r,className:ut("inline-flex h-auto min-h-12 items-center justify-center rounded-md bg-muted p-1.5 text-muted-foreground w-full border border-border shadow-sm",s),...t}));Yh.displayName=jg.displayName;const _i=P.forwardRef(({className:s,...t},r)=>e.jsx(_g,{ref:r,className:ut("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 text-xs sm:text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm hover:bg-accent/50 hover:text-accent-foreground min-h-10 sm:min-h-11",s),...t}));_i.displayName=_g.displayName;const Si=P.forwardRef(({className:s,...t},r)=>e.jsx(Sg,{ref:r,className:ut("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Si.displayName=Sg.displayName;function Rb({params:s}){const[t,r]=P.useState(void 0),[a,i]=P.useState(new Date),[l,d]=P.useState(""),[u,h]=P.useState(!1);sr();const{data:p}=Ac({queryKey:[`/api/professionals/${s.id}`]}),{data:v=[]}=Ac({queryKey:["/api/professionals"]}),y=p||v.find(Y=>Y.id===parseInt(s.id));if(!y)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profissional não encontrado"}),e.jsx(ks,{href:"/",children:e.jsx(Me,{children:"Voltar para Home"})})]})});const N={acompanhante_hospitalar:"🏥"},g={acompanhante_hospitalar:"Acompanhante Hospitalar"},C=N[y.category]||"👨‍⚕️",j=g[y.category]||y.category,A=(()=>{const Y=[];for(let ue=8;ue<=18;ue++)for(let le of[0,30]){const ee=`${ue.toString().padStart(2,"0")}:${le.toString().padStart(2,"0")}`;Y.push(ee)}return Y})(),S=()=>{l.trim()&&(console.log("Sending message:",l),d(""),h(!1))},q=[],V=[];return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ks,{href:"/",children:e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(Zs,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Perfil do Profissional"}),e.jsx("div",{className:"ml-auto flex gap-2",children:e.jsx(Me,{variant:"outline",size:"sm",children:e.jsx(I1,{className:"h-4 w-4"})})})]})}),e.jsxs("div",{className:"p-4 pb-20 space-y-6",children:[e.jsx(lt,{children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:y.imageUrl||void 0,alt:y.name,className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover mx-auto sm:mx-0"})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:y.name}),e.jsxs("p",{className:"text-lg text-primary font-semibold flex items-center justify-center sm:justify-start gap-2 mb-2",children:[e.jsx("span",{children:C}),j]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:y.specialization})]}),e.jsx(Bs,{variant:y.available?"secondary":"outline",className:`${y.available?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:y.available?"Disponível":"Ocupado"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(cn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-semibold",children:y.rating})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avaliação"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold mb-1",children:y.totalReviews}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avaliações"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold mb-1",children:y.experience}),e.jsx("p",{className:"text-xs text-gray-500",children:"Experiência"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold mb-1 text-primary",children:["R$ ",y.hourlyRate,"/h"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Valor"})]})]}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-600 dark:text-gray-400 mb-6",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:y.location}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[y.distance," km de você"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Me,{className:"flex-1",children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Agendar Consulta"]}),e.jsxs(il,{open:u,onOpenChange:h,children:[e.jsx(Qd,{asChild:!0,children:e.jsxs(Me,{variant:"outline",className:"flex-1",children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})}),e.jsxs(go,{children:[e.jsx(xo,{children:e.jsxs(vo,{children:["Enviar mensagem para ",y.name]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Zn,{placeholder:"Digite sua mensagem sobre o serviço que você precisa...",value:l,onChange:Y=>d(Y.target.value),rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Me,{onClick:S,disabled:!l.trim(),children:"Enviar Mensagem"}),e.jsx(Me,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"})]})]})]})]}),e.jsxs(Me,{variant:"outline",children:[e.jsx(Nc,{className:"h-4 w-4 mr-2"}),"Videochamada"]})]})]})]})})}),e.jsxs(kg,{defaultValue:"about",className:"space-y-4 sm:space-y-6",children:[e.jsxs(Yh,{className:"grid w-full grid-cols-4 h-auto sm:h-10 p-1 gap-1",children:[e.jsx(_i,{value:"about",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Sobre"}),e.jsx(_i,{value:"portfolio",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Portfólio"}),e.jsx(_i,{value:"reviews",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Avaliações"}),e.jsx(_i,{value:"schedule",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Agendar"})]}),e.jsxs(Si,{value:"about",className:"space-y-6",children:[e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(j1,{className:"h-5 w-5"}),"Sobre o Profissional"]})}),e.jsx(ct,{children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:y.description})})]}),e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(tp,{className:"h-5 w-5"}),"Certificações e Qualificações"]})}),e.jsx(ct,{children:e.jsx("div",{className:"space-y-3",children:y.certifications?.split(",").map((Y,ue)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(fs,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:Y.trim()})]},ue))})})]}),e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-5 w-5"}),"Informações de Contato"]})}),e.jsx(ct,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ns,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:y.location})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(or,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Atendimento de segunda a sábado"})]})]})})]})]}),e.jsx(Si,{value:"portfolio",className:"space-y-6",children:e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(No,{className:"h-5 w-5"}),"Portfólio de Serviços"]})}),e.jsx(ct,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:q.map(Y=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-sm border",children:[e.jsx("img",{src:Y.image,alt:Y.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx(Bs,{variant:"outline",className:"mb-2",children:Y.category}),e.jsx("h3",{className:"font-semibold mb-2",children:Y.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Y.description})]})]},Y.id))})})]})}),e.jsx(Si,{value:"reviews",className:"space-y-6",children:e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),"Avaliações dos Pacientes"]})}),e.jsx(ct,{children:e.jsx("div",{className:"space-y-6",children:V.map(Y=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-semibold text-sm",children:Y.patient[0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:Y.patient}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(Y.date).toLocaleDateString("pt-BR")})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((ue,le)=>e.jsx(cn,{className:`h-4 w-4 ${le<Y.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},le))})]}),e.jsx(Bs,{variant:"outline",className:"mb-2",children:Y.service}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:Y.comment})]},Y.id))})})]})}),e.jsx(Si,{value:"schedule",className:"space-y-6",children:e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-5 w-5"}),"Agendar Consulta"]})}),e.jsx(ct,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Selecione a data"}),e.jsx("input",{type:"date",value:a.toISOString().split("T")[0],onChange:Y=>i(new Date(Y.target.value)),className:"w-full p-3 border rounded-lg",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Horários disponíveis"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:A.map(Y=>e.jsx(Me,{variant:t===Y?"default":"outline",size:"sm",onClick:()=>r(Y),className:"text-xs",children:Y},Y))})]}),t&&e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Resumo do Agendamento"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Profissional:"})," ",y.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serviço:"})," ",y.specialization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Data:"})," ",a.toLocaleDateString("pt-BR")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Horário:"})," ",t]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor:"})," R$ ",y.hourlyRate,"/hora"]})]}),e.jsx(ks,{href:"/payment",children:e.jsx(Me,{className:"w-full mt-4",children:"Confirmar Agendamento"})})]})]})})]})})]})]})]})}const Ob=Jx,Db=Qx,Fb=P.forwardRef(({className:s,inset:t,children:r,...a},i)=>e.jsxs(rm,{ref:i,className:ut("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...a,children:[r,e.jsx(rp,{className:"ml-auto"})]}));Fb.displayName=rm.displayName;const zb=P.forwardRef(({className:s,...t},r)=>e.jsx(nm,{ref:r,className:ut("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t}));zb.displayName=nm.displayName;const Pg=P.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Kx,{children:e.jsx(am,{ref:a,sideOffset:t,className:ut("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...r})}));Pg.displayName=am.displayName;const Ta=P.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(im,{ref:a,className:ut("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...r}));Ta.displayName=im.displayName;const Bb=P.forwardRef(({className:s,children:t,checked:r,...a},i)=>e.jsxs(om,{ref:i,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(lm,{children:e.jsx(Vl,{className:"h-4 w-4"})})}),t]}));Bb.displayName=om.displayName;const qb=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(cm,{ref:a,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(lm,{children:e.jsx(P1,{className:"h-2 w-2 fill-current"})})}),t]}));qb.displayName=cm.displayName;const Hb=P.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(dm,{ref:a,className:ut("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));Hb.displayName=dm.displayName;const eh=P.forwardRef(({className:s,...t},r)=>e.jsx(hm,{ref:r,className:ut("-mx-1 my-1 h-px bg-muted",s),...t}));eh.displayName=hm.displayName;const $b=ev,Ub=tv,Cg=P.forwardRef(({className:s,align:t="center",sideOffset:r=4,...a},i)=>e.jsx(Xx,{children:e.jsx(um,{ref:i,align:t,sideOffset:r,className:ut("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...a})}));Cg.displayName=um.displayName;const Wb=[{label:"Início",to:"/provider-dashboard",icon:e.jsx(ul,{className:"h-6 w-6"})},{label:"Agenda",to:"/agenda-profissional",icon:e.jsx(gr,{className:"h-6 w-6"})},{label:"Chat",to:"/messages-provider",icon:e.jsx(In,{className:"h-6 w-6"})},{label:"Pedidos",to:"/provider-orders",icon:e.jsx(C1,{className:"h-6 w-6"})},{label:"Perfil",to:"/provider-profile",icon:e.jsx(Gr,{className:"h-6 w-6"})}];function th(){const[s]=sr();return e.jsx("nav",{className:"bg-white border-t border-gray-200 fixed bottom-0 left-0 w-full z-50 shadow rounded-t-xl px-0",children:e.jsx("ul",{className:"flex justify-around items-center h-16 max-w-full px-2 sm:px-4",children:Wb.map(t=>e.jsx("li",{children:e.jsxs(ks,{href:t.to,className:`flex flex-col items-center text-xs font-medium transition-colors duration-200 ${s===t.to?"text-yellow-500":"text-gray-500 hover:text-yellow-500"}`,children:[t.icon,e.jsx("span",{className:"mt-1",children:t.label})]})},t.to))})})}function ll({children:s}){return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:s}),e.jsx(th,{})]})}function Vb({professionalId:s}){const[t,r]=P.useState([]),[a,i]=P.useState(!0),[l,d]=P.useState({totalEarnings:0,totalServices:0,averageRating:0,totalReviews:0}),{toast:u}=Rs();P.useEffect(()=>{h()},[s]);const h=async()=>{try{i(!0);const N=localStorage.getItem("token");if(!N){u({title:"Erro",description:"Token de autenticação não encontrado",variant:"destructive"});return}const g=await fetch(`${ht()}/api/professional/${s}/completed-services`,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});if(!g.ok)throw new Error("Erro ao buscar serviços concluídos");const C=await g.json();r(C.data);const j=C.data.reduce((V,Y)=>V+Number(Y.amount),0),T=C.data.length,A=C.data.filter(V=>V.hasReview),S=A.length,q=S>0?A.reduce((V,Y)=>V+(Y.reviewRating||0),0)/S:0;d({totalEarnings:j,totalServices:T,averageRating:Math.round(q*10)/10,totalReviews:S})}catch(N){console.error("Erro ao buscar serviços concluídos:",N),u({title:"Erro",description:"Não foi possível carregar os serviços concluídos",variant:"destructive"})}finally{i(!1)}},p=N=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(N),v=N=>new Date(N).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=N=>Array.from({length:5},(g,C)=>e.jsx(cn,{className:`h-4 w-4 ${C<N?"text-yellow-400 fill-current":"text-gray-300"}`},C));return a?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ln,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ganhos Totais"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p(l.totalEarnings)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(fs,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Serviços Concluídos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalServices})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(cn,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avaliação Média"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.averageRating})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(In,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avaliações"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalReviews})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Serviços Concluídos"})}),t.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"Nenhum serviço concluído ainda"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(N=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:N.serviceTitle}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Concluído"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx("span",{children:N.clientName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gr,{className:"h-4 w-4"}),e.jsxs("span",{children:["Concluído em ",v(N.completedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ln,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-green-600",children:p(N.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Transação: ",N.transactionStatus]})]})]}),N.hasReview?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avaliação do Cliente:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[y(N.reviewRating||0),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",N.reviewRating,"/5)"]})]})]}),N.reviewComment&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',N.reviewComment,'"']}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Avaliado em ",v(N.reviewCreatedAt||"")]})]}):e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"⏳ Aguardando avaliação do cliente"})})]})})},N.serviceRequestId))})]})]})}function Zb(s,t){const r=P.useRef(t);P.useEffect(function(){t!==r.current&&s.attributionControl!=null&&(r.current!=null&&s.attributionControl.removeAttribution(r.current),t!=null&&s.attributionControl.addAttribution(t)),r.current=t},[s,t])}const Gb=1;function Yb(s){return Object.freeze({__version:Gb,map:s})}function Kh(s,t){return Object.freeze({...s,...t})}const Lg=P.createContext(null),Jh=Lg.Provider;function Qc(){const s=P.useContext(Lg);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function Ag(s){function t(r,a){const{instance:i,context:l}=s(r).current;return P.useImperativeHandle(a,()=>i),r.children==null?null:Pc.createElement(Jh,{value:l},r.children)}return P.forwardRef(t)}function Kb(s){function t(r,a){const{instance:i}=s(r).current;return P.useImperativeHandle(a,()=>i),null}return P.forwardRef(t)}function Jb(s){return function(r){const a=Qc(),i=s(r,a),{instance:l}=i.current,d=P.useRef(r.position),{position:u}=r;return P.useEffect(function(){return l.addTo(a.map),function(){l.remove()}},[a.map,l]),P.useEffect(function(){u!=null&&u!==d.current&&(l.setPosition(u),d.current=u)},[l,u]),i}}function Qb(s,t){const r=P.useRef();P.useEffect(function(){return t!=null&&s.instance.on(t),r.current=t,function(){r.current!=null&&s.instance.off(r.current),r.current=null}},[s,t])}function Tg(s,t){const r=s.pane??t.pane;return r?{...s,pane:r}:s}var Ll={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Xb=Ll.exports,lf;function e5(){return lf||(lf=1,function(s,t){(function(r,a){a(t)})(Xb,function(r){var a="1.9.4";function i(n){var o,f,b,k;for(f=1,b=arguments.length;f<b;f++){k=arguments[f];for(o in k)n[o]=k[o]}return n}var l=Object.create||function(){function n(){}return function(o){return n.prototype=o,new n}}();function d(n,o){var f=Array.prototype.slice;if(n.bind)return n.bind.apply(n,f.call(arguments,1));var b=f.call(arguments,2);return function(){return n.apply(o,b.length?b.concat(f.call(arguments)):arguments)}}var u=0;function h(n){return"_leaflet_id"in n||(n._leaflet_id=++u),n._leaflet_id}function p(n,o,f){var b,k,F,ce;return ce=function(){b=!1,k&&(F.apply(f,k),k=!1)},F=function(){b?k=arguments:(n.apply(f,arguments),setTimeout(ce,o),b=!0)},F}function v(n,o,f){var b=o[1],k=o[0],F=b-k;return n===b&&f?n:((n-k)%F+F)%F+k}function y(){return!1}function N(n,o){if(o===!1)return n;var f=Math.pow(10,o===void 0?6:o);return Math.round(n*f)/f}function g(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function C(n){return g(n).split(/\s+/)}function j(n,o){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?l(n.options):{});for(var f in o)n.options[f]=o[f];return n.options}function T(n,o,f){var b=[];for(var k in n)b.push(encodeURIComponent(f?k.toUpperCase():k)+"="+encodeURIComponent(n[k]));return(!o||o.indexOf("?")===-1?"?":"&")+b.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function S(n,o){return n.replace(A,function(f,b){var k=o[b];if(k===void 0)throw new Error("No value provided for variable "+f);return typeof k=="function"&&(k=k(o)),k})}var q=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function V(n,o){for(var f=0;f<n.length;f++)if(n[f]===o)return f;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var le=0;function ee(n){var o=+new Date,f=Math.max(0,16-(o-le));return le=o+f,window.setTimeout(n,f)}var te=window.requestAnimationFrame||ue("RequestAnimationFrame")||ee,we=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function R(n,o,f){if(f&&te===ee)n.call(o);else return te.call(window,d(n,o))}function z(n){n&&we.call(window,n)}var H={__proto__:null,extend:i,create:l,bind:d,get lastId(){return u},stamp:h,throttle:p,wrapNum:v,falseFn:y,formatNum:N,trim:g,splitWords:C,setOptions:j,getParamString:T,template:S,isArray:q,indexOf:V,emptyImageUrl:Y,requestFn:te,cancelFn:we,requestAnimFrame:R,cancelAnimFrame:z};function B(){}B.extend=function(n){var o=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=o.__super__=this.prototype,b=l(f);b.constructor=o,o.prototype=b;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(o[k]=this[k]);return n.statics&&i(o,n.statics),n.includes&&(pe(n.includes),i.apply(null,[b].concat(n.includes))),i(b,n),delete b.statics,delete b.includes,b.options&&(b.options=f.options?l(f.options):{},i(b.options,n.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,ce=b._initHooks.length;F<ce;F++)b._initHooks[F].call(this)}},o},B.include=function(n){var o=this.prototype.options;return i(this.prototype,n),n.options&&(this.prototype.options=o,this.mergeOptions(n.options)),this},B.mergeOptions=function(n){return i(this.prototype.options,n),this},B.addInitHook=function(n){var o=Array.prototype.slice.call(arguments,1),f=typeof n=="function"?n:function(){this[n].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function pe(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=q(n)?n:[n];for(var o=0;o<n.length;o++)n[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var he={on:function(n,o,f){if(typeof n=="object")for(var b in n)this._on(b,n[b],o);else{n=C(n);for(var k=0,F=n.length;k<F;k++)this._on(n[k],o,f)}return this},off:function(n,o,f){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var b in n)this._off(b,n[b],o);else{n=C(n);for(var k=arguments.length===1,F=0,ce=n.length;F<ce;F++)k?this._off(n[F]):this._off(n[F],o,f)}return this},_on:function(n,o,f,b){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(n,o,f)===!1){f===this&&(f=void 0);var k={fn:o,ctx:f};b&&(k.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(k)}},_off:function(n,o,f){var b,k,F;if(this._events&&(b=this._events[n],!!b)){if(arguments.length===1){if(this._firingCount)for(k=0,F=b.length;k<F;k++)b[k].fn=y;delete this._events[n];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var ce=this._listens(n,o,f);if(ce!==!1){var Pe=b[ce];this._firingCount&&(Pe.fn=y,this._events[n]=b=b.slice()),b.splice(ce,1)}}},fire:function(n,o,f){if(!this.listens(n,f))return this;var b=i({},o,{type:n,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var k=this._events[n];if(k){this._firingCount=this._firingCount+1||1;for(var F=0,ce=k.length;F<ce;F++){var Pe=k[F],Ee=Pe.fn;Pe.once&&this.off(n,Ee,Pe.ctx),Ee.call(Pe.ctx||this,b)}this._firingCount--}}return f&&this._propagateEvent(b),this},listens:function(n,o,f,b){typeof n!="string"&&console.warn('"string" type argument expected');var k=o;typeof o!="function"&&(b=!!o,k=void 0,f=void 0);var F=this._events&&this._events[n];if(F&&F.length&&this._listens(n,k,f)!==!1)return!0;if(b){for(var ce in this._eventParents)if(this._eventParents[ce].listens(n,o,f,b))return!0}return!1},_listens:function(n,o,f){if(!this._events)return!1;var b=this._events[n]||[];if(!o)return!!b.length;f===this&&(f=void 0);for(var k=0,F=b.length;k<F;k++)if(b[k].fn===o&&b[k].ctx===f)return k;return!1},once:function(n,o,f){if(typeof n=="object")for(var b in n)this._on(b,n[b],o,!0);else{n=C(n);for(var k=0,F=n.length;k<F;k++)this._on(n[k],o,f,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[h(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[h(n)],this},_propagateEvent:function(n){for(var o in this._eventParents)this._eventParents[o].fire(n.type,i({layer:n.target,propagatedFrom:n.target},n),!0)}};he.addEventListener=he.on,he.removeEventListener=he.clearAllEventListeners=he.off,he.addOneTimeEventListener=he.once,he.fireEvent=he.fire,he.hasEventListeners=he.listens;var be=B.extend(he);function ne(n,o,f){this.x=f?Math.round(n):n,this.y=f?Math.round(o):o}var xe=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(n){return this.clone()._add(ae(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ae(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new ne(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new ne(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=xe(this.x),this.y=xe(this.y),this},distanceTo:function(n){n=ae(n);var o=n.x-this.x,f=n.y-this.y;return Math.sqrt(o*o+f*f)},equals:function(n){return n=ae(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ae(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function ae(n,o,f){return n instanceof ne?n:q(n)?new ne(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new ne(n.x,n.y):new ne(n,o,f)}function fe(n,o){if(n)for(var f=o?[n,o]:n,b=0,k=f.length;b<k;b++)this.extend(f[b])}fe.prototype={extend:function(n){var o,f;if(!n)return this;if(n instanceof ne||typeof n[0]=="number"||"x"in n)o=f=ae(n);else if(n=E(n),o=n.min,f=n.max,!o||!f)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=f.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(n){return ae((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return ae(this.min.x,this.max.y)},getTopRight:function(){return ae(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var o,f;return typeof n[0]=="number"||n instanceof ne?n=ae(n):n=E(n),n instanceof fe?(o=n.min,f=n.max):o=f=n,o.x>=this.min.x&&f.x<=this.max.x&&o.y>=this.min.y&&f.y<=this.max.y},intersects:function(n){n=E(n);var o=this.min,f=this.max,b=n.min,k=n.max,F=k.x>=o.x&&b.x<=f.x,ce=k.y>=o.y&&b.y<=f.y;return F&&ce},overlaps:function(n){n=E(n);var o=this.min,f=this.max,b=n.min,k=n.max,F=k.x>o.x&&b.x<f.x,ce=k.y>o.y&&b.y<f.y;return F&&ce},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var o=this.min,f=this.max,b=Math.abs(o.x-f.x)*n,k=Math.abs(o.y-f.y)*n;return E(ae(o.x-b,o.y-k),ae(f.x+b,f.y+k))},equals:function(n){return n?(n=E(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function E(n,o){return!n||n instanceof fe?n:new fe(n,o)}function W(n,o){if(n)for(var f=o?[n,o]:n,b=0,k=f.length;b<k;b++)this.extend(f[b])}W.prototype={extend:function(n){var o=this._southWest,f=this._northEast,b,k;if(n instanceof X)b=n,k=n;else if(n instanceof W){if(b=n._southWest,k=n._northEast,!b||!k)return this}else return n?this.extend(re(n)||Z(n)):this;return!o&&!f?(this._southWest=new X(b.lat,b.lng),this._northEast=new X(k.lat,k.lng)):(o.lat=Math.min(b.lat,o.lat),o.lng=Math.min(b.lng,o.lng),f.lat=Math.max(k.lat,f.lat),f.lng=Math.max(k.lng,f.lng)),this},pad:function(n){var o=this._southWest,f=this._northEast,b=Math.abs(o.lat-f.lat)*n,k=Math.abs(o.lng-f.lng)*n;return new W(new X(o.lat-b,o.lng-k),new X(f.lat+b,f.lng+k))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof X||"lat"in n?n=re(n):n=Z(n);var o=this._southWest,f=this._northEast,b,k;return n instanceof W?(b=n.getSouthWest(),k=n.getNorthEast()):b=k=n,b.lat>=o.lat&&k.lat<=f.lat&&b.lng>=o.lng&&k.lng<=f.lng},intersects:function(n){n=Z(n);var o=this._southWest,f=this._northEast,b=n.getSouthWest(),k=n.getNorthEast(),F=k.lat>=o.lat&&b.lat<=f.lat,ce=k.lng>=o.lng&&b.lng<=f.lng;return F&&ce},overlaps:function(n){n=Z(n);var o=this._southWest,f=this._northEast,b=n.getSouthWest(),k=n.getNorthEast(),F=k.lat>o.lat&&b.lat<f.lat,ce=k.lng>o.lng&&b.lng<f.lng;return F&&ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,o){return n?(n=Z(n),this._southWest.equals(n.getSouthWest(),o)&&this._northEast.equals(n.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(n,o){return n instanceof W?n:new W(n,o)}function X(n,o,f){if(isNaN(n)||isNaN(o))throw new Error("Invalid LatLng object: ("+n+", "+o+")");this.lat=+n,this.lng=+o,f!==void 0&&(this.alt=+f)}X.prototype={equals:function(n,o){if(!n)return!1;n=re(n);var f=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return f<=(o===void 0?1e-9:o)},toString:function(n){return"LatLng("+N(this.lat,n)+", "+N(this.lng,n)+")"},distanceTo:function(n){return Ne.distance(this,re(n))},wrap:function(){return Ne.wrapLatLng(this)},toBounds:function(n){var o=180*n/40075017,f=o/Math.cos(Math.PI/180*this.lat);return Z([this.lat-o,this.lng-f],[this.lat+o,this.lng+f])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function re(n,o,f){return n instanceof X?n:q(n)&&typeof n[0]!="object"?n.length===3?new X(n[0],n[1],n[2]):n.length===2?new X(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new X(n.lat,"lng"in n?n.lng:n.lon,n.alt):o===void 0?null:new X(n,o,f)}var de={latLngToPoint:function(n,o){var f=this.projection.project(n),b=this.scale(o);return this.transformation._transform(f,b)},pointToLatLng:function(n,o){var f=this.scale(o),b=this.transformation.untransform(n,f);return this.projection.unproject(b)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var o=this.projection.bounds,f=this.scale(n),b=this.transformation.transform(o.min,f),k=this.transformation.transform(o.max,f);return new fe(b,k)},infinite:!1,wrapLatLng:function(n){var o=this.wrapLng?v(n.lng,this.wrapLng,!0):n.lng,f=this.wrapLat?v(n.lat,this.wrapLat,!0):n.lat,b=n.alt;return new X(f,o,b)},wrapLatLngBounds:function(n){var o=n.getCenter(),f=this.wrapLatLng(o),b=o.lat-f.lat,k=o.lng-f.lng;if(b===0&&k===0)return n;var F=n.getSouthWest(),ce=n.getNorthEast(),Pe=new X(F.lat-b,F.lng-k),Ee=new X(ce.lat-b,ce.lng-k);return new W(Pe,Ee)}},Ne=i({},de,{wrapLng:[-180,180],R:6371e3,distance:function(n,o){var f=Math.PI/180,b=n.lat*f,k=o.lat*f,F=Math.sin((o.lat-n.lat)*f/2),ce=Math.sin((o.lng-n.lng)*f/2),Pe=F*F+Math.cos(b)*Math.cos(k)*ce*ce,Ee=2*Math.atan2(Math.sqrt(Pe),Math.sqrt(1-Pe));return this.R*Ee}}),J=6378137,oe={R:J,MAX_LATITUDE:85.0511287798,project:function(n){var o=Math.PI/180,f=this.MAX_LATITUDE,b=Math.max(Math.min(f,n.lat),-f),k=Math.sin(b*o);return new ne(this.R*n.lng*o,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(n){var o=180/Math.PI;return new X((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*o,n.x*o/this.R)},bounds:function(){var n=J*Math.PI;return new fe([-n,-n],[n,n])}()};function ie(n,o,f,b){if(q(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=o,this._c=f,this._d=b}ie.prototype={transform:function(n,o){return this._transform(n.clone(),o)},_transform:function(n,o){return o=o||1,n.x=o*(this._a*n.x+this._b),n.y=o*(this._c*n.y+this._d),n},untransform:function(n,o){return o=o||1,new ne((n.x/o-this._b)/this._a,(n.y/o-this._d)/this._c)}};function Te(n,o,f,b){return new ie(n,o,f,b)}var Q=i({},Ne,{code:"EPSG:3857",projection:oe,transformation:function(){var n=.5/(Math.PI*oe.R);return Te(n,.5,-n,.5)}()}),Ae=i({},Q,{code:"EPSG:900913"});function ge(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function G(n,o){var f="",b,k,F,ce,Pe,Ee;for(b=0,F=n.length;b<F;b++){for(Pe=n[b],k=0,ce=Pe.length;k<ce;k++)Ee=Pe[k],f+=(k?"L":"M")+Ee.x+" "+Ee.y;f+=o?Ye.svg?"z":"x":""}return f||"M0 0"}var We=document.documentElement.style,et="ActiveXObject"in window,Fe=et&&!document.addEventListener,Ve="msLaunchUri"in navigator&&!("documentMode"in document),Je=ls("webkit"),Ze=ls("android"),ot=ls("android 2")||ls("android 3"),wt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Pt=Ze&&ls("Google")&&wt<537&&!("AudioNode"in window),Tt=!!window.opera,zt=!Ve&&ls("chrome"),ns=ls("gecko")&&!Je&&!Tt&&!et,ft=!zt&&ls("safari"),Ct=ls("phantom"),Ge="OTransition"in We,rr=navigator.platform.indexOf("Win")===0,Zt=et&&"transition"in We,xr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ot,is="MozPerspective"in We,os=!window.L_DISABLE_3D&&(Zt||xr||is)&&!Ge&&!Ct,vr=typeof orientation<"u"||ls("mobile"),Kt=vr&&Je,Yn=vr&&xr,_s=!window.PointerEvent&&window.MSPointerEvent,Dr=!!(window.PointerEvent||_s),dn="ontouchstart"in window||!!window.TouchEvent,As=!window.L_NO_TOUCH&&(dn||Dr),Lt=vr&&Tt,ts=vr&&ns,Kn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Os=function(){var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",y,o),window.removeEventListener("testPassiveEventSupport",y,o)}catch{}return n}(),Fr=function(){return!!document.createElement("canvas").getContext}(),qs=!!(document.createElementNS&&ge("svg").createSVGRect),vt=!!qs&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Yr=!qs&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var o=n.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),hn=navigator.platform.indexOf("Mac")===0,yr=navigator.platform.indexOf("Linux")===0;function ls(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var Ye={ie:et,ielt9:Fe,edge:Ve,webkit:Je,android:Ze,android23:ot,androidStock:Pt,opera:Tt,chrome:zt,gecko:ns,safari:ft,phantom:Ct,opera12:Ge,win:rr,ie3d:Zt,webkit3d:xr,gecko3d:is,any3d:os,mobile:vr,mobileWebkit:Kt,mobileWebkit3d:Yn,msPointer:_s,pointer:Dr,touch:As,touchNative:dn,mobileOpera:Lt,mobileGecko:ts,retina:Kn,passiveEvents:Os,canvas:Fr,svg:qs,vml:Yr,inlineSvg:vt,mac:hn,linux:yr},br=Ye.msPointer?"MSPointerDown":"pointerdown",On=Ye.msPointer?"MSPointerMove":"pointermove",Kr=Ye.msPointer?"MSPointerUp":"pointerup",wr=Ye.msPointer?"MSPointerCancel":"pointercancel",Ar={touchstart:br,touchmove:On,touchend:Kr,touchcancel:wr},_e={touchstart:Ot,touchmove:$t,touchend:$t,touchcancel:$t},Oe={},Ue=!1;function nt(n,o,f){return o==="touchstart"&&At(),_e[o]?(f=_e[o].bind(this,f),n.addEventListener(Ar[o],f,!1),f):(console.warn("wrong event specified:",o),y)}function bt(n,o,f){if(!Ar[o]){console.warn("wrong event specified:",o);return}n.removeEventListener(Ar[o],f,!1)}function Ht(n){Oe[n.pointerId]=n}function mt(n){Oe[n.pointerId]&&(Oe[n.pointerId]=n)}function jt(n){delete Oe[n.pointerId]}function At(){Ue||(document.addEventListener(br,Ht,!0),document.addEventListener(On,mt,!0),document.addEventListener(Kr,jt,!0),document.addEventListener(wr,jt,!0),Ue=!0)}function $t(n,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var f in Oe)o.touches.push(Oe[f]);o.changedTouches=[o],n(o)}}function Ot(n,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Ds(o),$t(n,o)}function _t(n){var o={},f,b;for(b in n)f=n[b],o[b]=f&&f.bind?f.bind(n):f;return n=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var dt=200;function cs(n,o){n.addEventListener("dblclick",o);var f=0,b;function k(F){if(F.detail!==1){b=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var ce=ta(F);if(!(ce.some(function(Ee){return Ee instanceof HTMLLabelElement&&Ee.attributes.for})&&!ce.some(function(Ee){return Ee instanceof HTMLInputElement||Ee instanceof HTMLSelectElement}))){var Pe=Date.now();Pe-f<=dt?(b++,b===2&&o(_t(F))):b=1,f=Pe}}}return n.addEventListener("click",k),{dblclick:o,simDblclick:k}}function ms(n,o){n.removeEventListener("dblclick",o.dblclick),n.removeEventListener("click",o.simDblclick)}var Gs=pa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Nr=pa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Bt=Nr==="webkitTransition"||Nr==="OTransition"?Nr+"End":"transitionend";function Jt(n){return typeof n=="string"?document.getElementById(n):n}function Qt(n,o){var f=n.style[o]||n.currentStyle&&n.currentStyle[o];if((!f||f==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(n,null);f=b?b[o]:null}return f==="auto"?null:f}function Wt(n,o,f){var b=document.createElement(n);return b.className=o||"",f&&f.appendChild(b),b}function pt(n){var o=n.parentNode;o&&o.removeChild(n)}function Dn(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function un(n){var o=n.parentNode;o&&o.lastChild!==n&&o.appendChild(n)}function fn(n){var o=n.parentNode;o&&o.firstChild!==n&&o.insertBefore(n,o.firstChild)}function mn(n,o){if(n.classList!==void 0)return n.classList.contains(o);var f=Ys(n);return f.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(f)}function St(n,o){if(n.classList!==void 0)for(var f=C(o),b=0,k=f.length;b<k;b++)n.classList.add(f[b]);else if(!mn(n,o)){var F=Ys(n);cr(n,(F?F+" ":"")+o)}}function Dt(n,o){n.classList!==void 0?n.classList.remove(o):cr(n,g((" "+Ys(n)+" ").replace(" "+o+" "," ")))}function cr(n,o){n.className.baseVal===void 0?n.className=o:n.className.baseVal=o}function Ys(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function nr(n,o){"opacity"in n.style?n.style.opacity=o:"filter"in n.style&&Jn(n,o)}function Jn(n,o){var f=!1,b="DXImageTransform.Microsoft.Alpha";try{f=n.filters.item(b)}catch{if(o===1)return}o=Math.round(o*100),f?(f.Enabled=o!==100,f.Opacity=o):n.style.filter+=" progid:"+b+"(opacity="+o+")"}function pa(n){for(var o=document.documentElement.style,f=0;f<n.length;f++)if(n[f]in o)return n[f];return!1}function pn(n,o,f){var b=o||new ne(0,0);n.style[Gs]=(Ye.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(f?" scale("+f+")":"")}function Is(n,o){n._leaflet_pos=o,Ye.any3d?pn(n,o):(n.style.left=o.x+"px",n.style.top=o.y+"px")}function Fn(n){return n._leaflet_pos||new ne(0,0)}var Ba,Qn,zi;if("onselectstart"in document)Ba=function(){It(window,"selectstart",Ds)},Qn=function(){Yt(window,"selectstart",Ds)};else{var qa=pa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ba=function(){if(qa){var n=document.documentElement.style;zi=n[qa],n[qa]="none"}},Qn=function(){qa&&(document.documentElement.style[qa]=zi,zi=void 0)}}function Bi(){It(window,"dragstart",Ds)}function Pn(){Yt(window,"dragstart",Ds)}var Xn,ga;function ei(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(Ks(),Xn=n,ga=n.style.outlineStyle,n.style.outlineStyle="none",It(window,"keydown",Ks))}function Ks(){Xn&&(Xn.style.outlineStyle=ga,Xn=void 0,ga=void 0,Yt(window,"keydown",Ks))}function _o(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ti(n){var o=n.getBoundingClientRect();return{x:o.width/n.offsetWidth||1,y:o.height/n.offsetHeight||1,boundingClientRect:o}}var Et={__proto__:null,TRANSFORM:Gs,TRANSITION:Nr,TRANSITION_END:Bt,get:Jt,getStyle:Qt,create:Wt,remove:pt,empty:Dn,toFront:un,toBack:fn,hasClass:mn,addClass:St,removeClass:Dt,setClass:cr,getClass:Ys,setOpacity:nr,testProp:pa,setTransform:pn,setPosition:Is,getPosition:Fn,get disableTextSelection(){return Ba},get enableTextSelection(){return Qn},disableImageDrag:Bi,enableImageDrag:Pn,preventOutline:ei,restoreOutline:Ks,getSizedParentNode:_o,getScale:ti};function It(n,o,f,b){if(o&&typeof o=="object")for(var k in o)xa(n,k,o[k],f);else{o=C(o);for(var F=0,ce=o.length;F<ce;F++)xa(n,o[F],f,b)}return this}var gn="_leaflet_events";function Yt(n,o,f,b){if(arguments.length===1)qi(n),delete n[gn];else if(o&&typeof o=="object")for(var k in o)Ha(n,k,o[k],f);else if(o=C(o),arguments.length===2)qi(n,function(Pe){return V(o,Pe)!==-1});else for(var F=0,ce=o.length;F<ce;F++)Ha(n,o[F],f,b);return this}function qi(n,o){for(var f in n[gn]){var b=f.split(/\d/)[0];(!o||o(b))&&Ha(n,b,null,null,f)}}var si={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xa(n,o,f,b){var k=o+h(f)+(b?"_"+h(b):"");if(n[gn]&&n[gn][k])return this;var F=function(Pe){return f.call(b||n,Pe||window.event)},ce=F;!Ye.touchNative&&Ye.pointer&&o.indexOf("touch")===0?F=nt(n,o,F):Ye.touch&&o==="dblclick"?F=cs(n,F):"addEventListener"in n?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?n.addEventListener(si[o]||o,F,Ye.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(F=function(Pe){Pe=Pe||window.event,va(n,Pe)&&ce(Pe)},n.addEventListener(si[o],F,!1)):n.addEventListener(o,ce,!1):n.attachEvent("on"+o,F),n[gn]=n[gn]||{},n[gn][k]=F}function Ha(n,o,f,b,k){k=k||o+h(f)+(b?"_"+h(b):"");var F=n[gn]&&n[gn][k];if(!F)return this;!Ye.touchNative&&Ye.pointer&&o.indexOf("touch")===0?bt(n,o,F):Ye.touch&&o==="dblclick"?ms(n,F):"removeEventListener"in n?n.removeEventListener(si[o]||o,F,!1):n.detachEvent("on"+o,F),n[gn][k]=null}function ea(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Hi(n){return xa(n,"wheel",ea),this}function $a(n){return It(n,"mousedown touchstart dblclick contextmenu",ea),n._leaflet_disable_click=!0,this}function Ds(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Jr(n){return Ds(n),ea(n),this}function ta(n){if(n.composedPath)return n.composedPath();for(var o=[],f=n.target;f;)o.push(f),f=f.parentNode;return o}function So(n,o){if(!o)return new ne(n.clientX,n.clientY);var f=ti(o),b=f.boundingClientRect;return new ne((n.clientX-b.left)/f.x-o.clientLeft,(n.clientY-b.top)/f.y-o.clientTop)}var Ua=Ye.linux&&Ye.chrome?window.devicePixelRatio:Ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ri(n){return Ye.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Ua:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function va(n,o){var f=o.relatedTarget;if(!f)return!0;try{for(;f&&f!==n;)f=f.parentNode}catch{return!1}return f!==n}var ko={__proto__:null,on:It,off:Yt,stopPropagation:ea,disableScrollPropagation:Hi,disableClickPropagation:$a,preventDefault:Ds,stop:Jr,getPropagationPath:ta,getMousePosition:So,getWheelDelta:ri,isExternalTarget:va,addListener:It,removeListener:Yt},$i=be.extend({run:function(n,o,f,b){this.stop(),this._el=n,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=Fn(n),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(n){var o=+new Date-this._startTime,f=this._duration*1e3;o<f?this._runFrame(this._easeOut(o/f),n):(this._runFrame(1),this._complete())},_runFrame:function(n,o){var f=this._startPos.add(this._offset.multiplyBy(n));o&&f._round(),Is(this._el,f),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Vt=be.extend({options:{crs:Q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,o){o=j(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(re(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Nr&&Ye.any3d&&!Ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),It(this._proxy,Bt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,o,f){if(o=o===void 0?this._zoom:this._limitZoom(o),n=this._limitCenter(re(n),o,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=i({animate:f.animate},f.zoom),f.pan=i({animate:f.animate,duration:f.duration},f.pan));var b=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,o,f.zoom):this._tryAnimatedPan(n,f.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(n,o,f.pan&&f.pan.noMoveStart),this},setZoom:function(n,o){return this._loaded?this.setView(this.getCenter(),n,{zoom:o}):(this._zoom=n,this)},zoomIn:function(n,o){return n=n||(Ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,o)},zoomOut:function(n,o){return n=n||(Ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,o)},setZoomAround:function(n,o,f){var b=this.getZoomScale(o),k=this.getSize().divideBy(2),F=n instanceof ne?n:this.latLngToContainerPoint(n),ce=F.subtract(k).multiplyBy(1-1/b),Pe=this.containerPointToLatLng(k.add(ce));return this.setView(Pe,o,{zoom:f})},_getBoundsCenterZoom:function(n,o){o=o||{},n=n.getBounds?n.getBounds():Z(n);var f=ae(o.paddingTopLeft||o.padding||[0,0]),b=ae(o.paddingBottomRight||o.padding||[0,0]),k=this.getBoundsZoom(n,!1,f.add(b));if(k=typeof o.maxZoom=="number"?Math.min(o.maxZoom,k):k,k===1/0)return{center:n.getCenter(),zoom:k};var F=b.subtract(f).divideBy(2),ce=this.project(n.getSouthWest(),k),Pe=this.project(n.getNorthEast(),k),Ee=this.unproject(ce.add(Pe).divideBy(2).add(F),k);return{center:Ee,zoom:k}},fitBounds:function(n,o){if(n=Z(n),!n.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(n,o);return this.setView(f.center,f.zoom,o)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,o){return this.setView(n,this._zoom,{pan:o})},panBy:function(n,o){if(n=ae(n).round(),o=o||{},!n.x&&!n.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $i,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){St(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,f,o.duration||.25,o.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,o,f){if(f=f||{},f.animate===!1||!Ye.any3d)return this.setView(n,o,f);this._stop();var b=this.project(this.getCenter()),k=this.project(n),F=this.getSize(),ce=this._zoom;n=re(n),o=o===void 0?ce:o;var Pe=Math.max(F.x,F.y),Ee=Pe*this.getZoomScale(ce,o),qe=k.distanceTo(b)||1,tt=1.42,gt=tt*tt;function Ut(vs){var Ir=vs?-1:1,ld=vs?Ee:Pe,cd=Ee*Ee-Pe*Pe+Ir*gt*gt*qe*qe,Kl=2*ld*gt*qe,Fo=cd/Kl,bl=Math.sqrt(Fo*Fo+1)-Fo,Jl=bl<1e-9?-18:Math.log(bl);return Jl}function Mr(vs){return(Math.exp(vs)-Math.exp(-vs))/2}function Qs(vs){return(Math.exp(vs)+Math.exp(-vs))/2}function wn(vs){return Mr(vs)/Qs(vs)}var Hr=Ut(0);function mi(vs){return Pe*(Qs(Hr)/Qs(Hr+tt*vs))}function id(vs){return Pe*(Qs(Hr)*wn(Hr+tt*vs)-Mr(Hr))/gt}function La(vs){return 1-Math.pow(1-vs,1.5)}var Tn=Date.now(),Un=(Ut(1)-Hr)/tt,od=f.duration?1e3*f.duration:1e3*Un*.8;function yl(){var vs=(Date.now()-Tn)/od,Ir=La(vs)*Un;vs<=1?(this._flyToFrame=R(yl,this),this._move(this.unproject(b.add(k.subtract(b).multiplyBy(id(Ir)/qe)),ce),this.getScaleZoom(Pe/mi(Ir),ce),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),yl.call(this),this},flyToBounds:function(n,o){var f=this._getBoundsCenterZoom(n,o);return this.flyTo(f.center,f.zoom,o)},setMaxBounds:function(n){return n=Z(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var o=this.options.minZoom;return this.options.minZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var o=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,o){this._enforcingBounds=!0;var f=this.getCenter(),b=this._limitCenter(f,this._zoom,Z(n));return f.equals(b)||this.panTo(b,o),this._enforcingBounds=!1,this},panInside:function(n,o){o=o||{};var f=ae(o.paddingTopLeft||o.padding||[0,0]),b=ae(o.paddingBottomRight||o.padding||[0,0]),k=this.project(this.getCenter()),F=this.project(n),ce=this.getPixelBounds(),Pe=E([ce.min.add(f),ce.max.subtract(b)]),Ee=Pe.getSize();if(!Pe.contains(F)){this._enforcingBounds=!0;var qe=F.subtract(Pe.getCenter()),tt=Pe.extend(F).getSize().subtract(Ee);k.x+=qe.x<0?-tt.x:tt.x,k.y+=qe.y<0?-tt.y:tt.y,this.panTo(this.unproject(k),o),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=i({animate:!1,pan:!0},n===!0?{animate:!0}:n);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),b=o.divideBy(2).round(),k=f.divideBy(2).round(),F=b.subtract(k);return!F.x&&!F.y?this:(n.animate&&n.pan?this.panBy(F):(n.pan&&this._rawPanBy(F),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=i({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=d(this._handleGeolocationResponse,this),f=d(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,f,n):navigator.geolocation.getCurrentPosition(o,f,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var o=n.code,f=n.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var o=n.coords.latitude,f=n.coords.longitude,b=new X(o,f),k=b.toBounds(n.coords.accuracy*2),F=this._locateOptions;if(F.setView){var ce=this.getBoundsZoom(k);this.setView(b,F.maxZoom?Math.min(ce,F.maxZoom):ce)}var Pe={latlng:b,bounds:k,timestamp:n.timestamp};for(var Ee in n.coords)typeof n.coords[Ee]=="number"&&(Pe[Ee]=n.coords[Ee]);this.fire("locationfound",Pe)}},addHandler:function(n,o){if(!o)return this;var f=this[n]=new o(this);return this._handlers.push(f),this.options[n]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)pt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,o){var f="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),b=Wt("div",f,o||this._mapPane);return n&&(this._panes[n]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),o=this.unproject(n.getBottomLeft()),f=this.unproject(n.getTopRight());return new W(o,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,o,f){n=Z(n),f=ae(f||[0,0]);var b=this.getZoom()||0,k=this.getMinZoom(),F=this.getMaxZoom(),ce=n.getNorthWest(),Pe=n.getSouthEast(),Ee=this.getSize().subtract(f),qe=E(this.project(Pe,b),this.project(ce,b)).getSize(),tt=Ye.any3d?this.options.zoomSnap:1,gt=Ee.x/qe.x,Ut=Ee.y/qe.y,Mr=o?Math.max(gt,Ut):Math.min(gt,Ut);return b=this.getScaleZoom(Mr,b),tt&&(b=Math.round(b/(tt/100))*(tt/100),b=o?Math.ceil(b/tt)*tt:Math.floor(b/tt)*tt),Math.max(k,Math.min(F,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,o){var f=this._getTopLeftPoint(n,o);return new fe(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,o){var f=this.options.crs;return o=o===void 0?this._zoom:o,f.scale(n)/f.scale(o)},getScaleZoom:function(n,o){var f=this.options.crs;o=o===void 0?this._zoom:o;var b=f.zoom(n*f.scale(o));return isNaN(b)?1/0:b},project:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(re(n),o)},unproject:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(ae(n),o)},layerPointToLatLng:function(n){var o=ae(n).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(n){var o=this.project(re(n))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(re(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Z(n))},distance:function(n,o){return this.options.crs.distance(re(n),re(o))},containerPointToLayerPoint:function(n){return ae(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ae(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var o=this.containerPointToLayerPoint(ae(n));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(n)))},mouseEventToContainerPoint:function(n){return So(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var o=this._container=Jt(n);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");It(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ye.any3d,St(n,"leaflet-container"+(Ye.touch?" leaflet-touch":"")+(Ye.retina?" leaflet-retina":"")+(Ye.ielt9?" leaflet-oldie":"")+(Ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Qt(n,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Is(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(St(n.markerPane,"leaflet-zoom-hide"),St(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,o,f){Is(this._mapPane,new ne(0,0));var b=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var k=this._zoom!==o;this._moveStart(k,f)._move(n,o)._moveEnd(k),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(n,o){return n&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(n,o,f,b){o===void 0&&(o=this._zoom);var k=this._zoom!==o;return this._zoom=o,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),b?f&&f.pinch&&this.fire("zoom",f):((k||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Is(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[h(this._container)]=this;var o=n?Yt:It;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Ye.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,o){for(var f=[],b,k=o==="mouseout"||o==="mouseover",F=n.target||n.srcElement,ce=!1;F;){if(b=this._targets[h(F)],b&&(o==="click"||o==="preclick")&&this._draggableMoved(b)){ce=!0;break}if(b&&b.listens(o,!0)&&(k&&!va(F,n)||(f.push(b),k))||F===this._container)break;F=F.parentNode}return!f.length&&!ce&&!k&&this.listens(o,!0)&&(f=[this]),f},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var o=n.target||n.srcElement;if(!(!this._loaded||o._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(o))){var f=n.type;f==="mousedown"&&ei(o),this._fireDOMEvent(n,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,o,f){if(n.type==="click"){var b=i({},n);b.type="preclick",this._fireDOMEvent(b,b.type,f)}var k=this._findEventTargets(n,o);if(f){for(var F=[],ce=0;ce<f.length;ce++)f[ce].listens(o,!0)&&F.push(f[ce]);k=F.concat(k)}if(k.length){o==="contextmenu"&&Ds(n);var Pe=k[0],Ee={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var qe=Pe.getLatLng&&(!Pe._radius||Pe._radius<=10);Ee.containerPoint=qe?this.latLngToContainerPoint(Pe.getLatLng()):this.mouseEventToContainerPoint(n),Ee.layerPoint=this.containerPointToLayerPoint(Ee.containerPoint),Ee.latlng=qe?Pe.getLatLng():this.layerPointToLatLng(Ee.layerPoint)}for(ce=0;ce<k.length;ce++)if(k[ce].fire(o,Ee,!0),Ee.originalEvent._stopped||k[ce].options.bubblingMouseEvents===!1&&V(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,o=this._handlers.length;n<o;n++)this._handlers[n].disable()},whenReady:function(n,o){return this._loaded?n.call(o||this,{target:this}):this.on("load",n,o),this},_getMapPanePos:function(){return Fn(this._mapPane)||new ne(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,o){var f=n&&o!==void 0?this._getNewPixelOrigin(n,o):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,o){var f=this.getSize()._divideBy(2);return this.project(n,o)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,o,f){var b=this._getNewPixelOrigin(f,o);return this.project(n,o)._subtract(b)},_latLngBoundsToNewLayerBounds:function(n,o,f){var b=this._getNewPixelOrigin(f,o);return E([this.project(n.getSouthWest(),o)._subtract(b),this.project(n.getNorthWest(),o)._subtract(b),this.project(n.getSouthEast(),o)._subtract(b),this.project(n.getNorthEast(),o)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,o,f){if(!f)return n;var b=this.project(n,o),k=this.getSize().divideBy(2),F=new fe(b.subtract(k),b.add(k)),ce=this._getBoundsOffset(F,f,o);return Math.abs(ce.x)<=1&&Math.abs(ce.y)<=1?n:this.unproject(b.add(ce),o)},_limitOffset:function(n,o){if(!o)return n;var f=this.getPixelBounds(),b=new fe(f.min.add(n),f.max.add(n));return n.add(this._getBoundsOffset(b,o))},_getBoundsOffset:function(n,o,f){var b=E(this.project(o.getNorthEast(),f),this.project(o.getSouthWest(),f)),k=b.min.subtract(n.min),F=b.max.subtract(n.max),ce=this._rebound(k.x,-F.x),Pe=this._rebound(k.y,-F.y);return new ne(ce,Pe)},_rebound:function(n,o){return n+o>0?Math.round(n-o)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(o))},_limitZoom:function(n){var o=this.getMinZoom(),f=this.getMaxZoom(),b=Ye.any3d?this.options.zoomSnap:1;return b&&(n=Math.round(n/b)*b),Math.max(o,Math.min(f,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,o){var f=this._getCenterOffset(n)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,o),!0)},_createAnimProxy:function(){var n=this._proxy=Wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(o){var f=Gs,b=this._proxy.style[f];pn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),b===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),o=this.getZoom();pn(this._proxy,this.project(n,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,o,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(o),k=this._getCenterOffset(n)._divideBy(1-1/b);return f.animate!==!0&&!this.getSize().contains(k)?!1:(R(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(n,o,!0)},this),!0)},_animateZoom:function(n,o,f,b){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=o,St(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:o,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Po(n,o){return new Vt(n,o)}var Hs=B.extend({options:{position:"topright"},initialize:function(n){j(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var o=this._map;return o&&o.removeControl(this),this.options.position=n,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var o=this._container=this.onAdd(n),f=this.getPosition(),b=n._controlCorners[f];return St(o,"leaflet-control"),f.indexOf("bottom")!==-1?b.insertBefore(o,b.firstChild):b.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Qr=function(n){return new Hs(n)};Vt.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",f=this._controlContainer=Wt("div",o+"control-container",this._container);function b(k,F){var ce=o+k+" "+o+F;n[k+F]=Wt("div",ce,f)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)pt(this._controlCorners[n]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Co=Hs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,o,f,b){return f<b?-1:b<f?1:0}},initialize:function(n,o,f){j(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in n)this._addLayer(n[b],b);for(b in o)this._addLayer(o[b],b,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Hs.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,o){return this._addLayer(n,o),this._map?this._update():this},addOverlay:function(n,o){return this._addLayer(n,o,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(n));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){St(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(St(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",o=this._container=Wt("div",n),f=this.options.collapsed;o.setAttribute("aria-haspopup",!0),$a(o),Hi(o);var b=this._section=Wt("section",n+"-list");f&&(this._map.on("click",this.collapse,this),It(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=Wt("a",n+"-toggle",o);k.href="#",k.title="Layers",k.setAttribute("role","button"),It(k,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){Ds(F),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Wt("div",n+"-base",b),this._separator=Wt("div",n+"-separator",b),this._overlaysList=Wt("div",n+"-overlays",b),o.appendChild(b)},_getLayer:function(n){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===n)return this._layers[o]},_addLayer:function(n,o,f){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:o,overlay:f}),this.options.sortLayers&&this._layers.sort(d(function(b,k){return this.options.sortFunction(b.layer,k.layer,b.name,k.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dn(this._baseLayersList),Dn(this._overlaysList),this._layerControlInputs=[];var n,o,f,b,k=0;for(f=0;f<this._layers.length;f++)b=this._layers[f],this._addItem(b),o=o||b.overlay,n=n||!b.overlay,k+=b.overlay?0:1;return this.options.hideSingleBase&&(n=n&&k>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=o&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var o=this._getLayer(h(n.target)),f=o.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;f&&this._map.fire(f,o)},_createRadioElement:function(n,o){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(o?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=f,b.firstChild},_addItem:function(n){var o=document.createElement("label"),f=this._map.hasLayer(n.layer),b;n.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=f):b=this._createRadioElement("leaflet-base-layers_"+h(this),f),this._layerControlInputs.push(b),b.layerId=h(n.layer),It(b,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+n.name;var F=document.createElement("span");o.appendChild(F),F.appendChild(b),F.appendChild(k);var ce=n.overlay?this._overlaysList:this._baseLayersList;return ce.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,o,f,b=[],k=[];this._handlingClick=!0;for(var F=n.length-1;F>=0;F--)o=n[F],f=this._getLayer(o.layerId).layer,o.checked?b.push(f):o.checked||k.push(f);for(F=0;F<k.length;F++)this._map.hasLayer(k[F])&&this._map.removeLayer(k[F]);for(F=0;F<b.length;F++)this._map.hasLayer(b[F])||this._map.addLayer(b[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,o,f,b=this._map.getZoom(),k=n.length-1;k>=0;k--)o=n[k],f=this._getLayer(o.layerId).layer,o.disabled=f.options.minZoom!==void 0&&b<f.options.minZoom||f.options.maxZoom!==void 0&&b>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,It(n,"click",Ds),this.expand();var o=this;setTimeout(function(){Yt(n,"click",Ds),o._preventClick=!1})}}),ya=function(n,o,f){return new Co(n,o,f)},Xr=Hs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var o="leaflet-control-zoom",f=Wt("div",o+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,o+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,o+"-out",f,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,o,f,b,k){var F=Wt("a",f,b);return F.innerHTML=n,F.href="#",F.title=o,F.setAttribute("role","button"),F.setAttribute("aria-label",o),$a(F),It(F,"click",Jr),It(F,"click",k,this),It(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var n=this._map,o="leaflet-disabled";Dt(this._zoomInButton,o),Dt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(St(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(St(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Vt.mergeOptions({zoomControl:!0}),Vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xr,this.addControl(this.zoomControl))});var Ui=function(n){return new Xr(n)},ba=Hs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var o="leaflet-control-scale",f=Wt("div",o),b=this.options;return this._addScales(b,o+"-line",f),n.on(b.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),f},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,o,f){n.metric&&(this._mScale=Wt("div",o,f)),n.imperial&&(this._iScale=Wt("div",o,f))},_update:function(){var n=this._map,o=n.getSize().y/2,f=n.distance(n.containerPointToLatLng([0,o]),n.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(f)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var o=this._getRoundNum(n),f=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,f,o/n)},_updateImperial:function(n){var o=n*3.2808399,f,b,k;o>5280?(f=o/5280,b=this._getRoundNum(f),this._updateScale(this._iScale,b+" mi",b/f)):(k=this._getRoundNum(o),this._updateScale(this._iScale,k+" ft",k/o))},_updateScale:function(n,o,f){n.style.width=Math.round(this.options.maxWidth*f)+"px",n.innerHTML=o},_getRoundNum:function(n){var o=Math.pow(10,(Math.floor(n)+"").length-1),f=n/o;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,o*f}}),gl=function(n){return new ba(n)},ni='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wi=Hs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ye.inlineSvg?ni+" ":"")+"Leaflet</a>"},initialize:function(n){j(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Wt("div","leaflet-control-attribution"),$a(this._container);for(var o in n._layers)n._layers[o].getAttribution&&this.addAttribution(n._layers[o].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var o in this._attributions)this._attributions[o]&&n.push(o);var f=[];this.options.prefix&&f.push(this.options.prefix),n.length&&f.push(n.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Vt.mergeOptions({attributionControl:!0}),Vt.addInitHook(function(){this.options.attributionControl&&new Wi().addTo(this)});var Vi=function(n){return new Wi(n)};Hs.Layers=Co,Hs.Zoom=Xr,Hs.Scale=ba,Hs.Attribution=Wi,Qr.layers=ya,Qr.zoom=Ui,Qr.scale=gl,Qr.attribution=Vi;var zr=B.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});zr.addTo=function(n,o){return n.addHandler(o,this),this};var Lo={Events:he},Wa=Ye.touch?"touchstart mousedown":"mousedown",xn=be.extend({options:{clickTolerance:3},initialize:function(n,o,f,b){j(this,b),this._element=n,this._dragStartTarget=o||n,this._preventOutline=f},enable:function(){this._enabled||(It(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xn._dragging===this&&this.finishDrag(!0),Yt(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!mn(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){xn._dragging===this&&this.finishDrag();return}if(!(xn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(xn._dragging=this,this._preventOutline&&ei(this._element),Bi(),Ba(),!this._moving)){this.fire("down");var o=n.touches?n.touches[0]:n,f=_o(this._element);this._startPoint=new ne(o.clientX,o.clientY),this._startPos=Fn(this._element),this._parentScale=ti(f);var b=n.type==="mousedown";It(document,b?"mousemove":"touchmove",this._onMove,this),It(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var o=n.touches&&n.touches.length===1?n.touches[0]:n,f=new ne(o.clientX,o.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Ds(n),this._moved||(this.fire("dragstart"),this._moved=!0,St(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),St(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Is(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Dt(document.body,"leaflet-dragging"),this._lastTarget&&(Dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yt(document,"mousemove touchmove",this._onMove,this),Yt(document,"mouseup touchend touchcancel",this._onUp,this),Pn(),Qn();var o=this._moved&&this._moving;this._moving=!1,xn._dragging=!1,o&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function ai(n,o,f){var b,k=[1,4,2,8],F,ce,Pe,Ee,qe,tt,gt,Ut;for(F=0,tt=n.length;F<tt;F++)n[F]._code=Ie(n[F],o);for(Pe=0;Pe<4;Pe++){for(gt=k[Pe],b=[],F=0,tt=n.length,ce=tt-1;F<tt;ce=F++)Ee=n[F],qe=n[ce],Ee._code&gt?qe._code&gt||(Ut=ke(qe,Ee,gt,o,f),Ut._code=Ie(Ut,o),b.push(Ut)):(qe._code&gt&&(Ut=ke(qe,Ee,gt,o,f),Ut._code=Ie(Ut,o),b.push(Ut)),b.push(Ee));n=b}return n}function Zi(n,o){var f,b,k,F,ce,Pe,Ee,qe,tt;if(!n||n.length===0)throw new Error("latlngs not passed");at(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var gt=re([0,0]),Ut=Z(n),Mr=Ut.getNorthWest().distanceTo(Ut.getSouthWest())*Ut.getNorthEast().distanceTo(Ut.getNorthWest());Mr<1700&&(gt=Gi(n));var Qs=n.length,wn=[];for(f=0;f<Qs;f++){var Hr=re(n[f]);wn.push(o.project(re([Hr.lat-gt.lat,Hr.lng-gt.lng])))}for(Pe=Ee=qe=0,f=0,b=Qs-1;f<Qs;b=f++)k=wn[f],F=wn[b],ce=k.y*F.x-F.y*k.x,Ee+=(k.x+F.x)*ce,qe+=(k.y+F.y)*ce,Pe+=ce*3;Pe===0?tt=wn[0]:tt=[Ee/Pe,qe/Pe];var mi=o.unproject(ae(tt));return re([mi.lat+gt.lat,mi.lng+gt.lng])}function Gi(n){for(var o=0,f=0,b=0,k=0;k<n.length;k++){var F=re(n[k]);o+=F.lat,f+=F.lng,b++}return re([o/b,f/b])}var ii={__proto__:null,clipPolygon:ai,polygonCenter:Zi,centroid:Gi};function wa(n,o){if(!o||!n.length)return n.slice();var f=o*o;return n=I(n,f),n=Yi(n,f),n}function oi(n,o,f){return Math.sqrt(Qe(n,o,f,!0))}function Na(n,o,f){return Qe(n,o,f)}function Yi(n,o){var f=n.length,b=typeof Uint8Array<"u"?Uint8Array:Array,k=new b(f);k[0]=k[f-1]=1,x(n,k,o,0,f-1);var F,ce=[];for(F=0;F<f;F++)k[F]&&ce.push(n[F]);return ce}function x(n,o,f,b,k){var F=0,ce,Pe,Ee;for(Pe=b+1;Pe<=k-1;Pe++)Ee=Qe(n[Pe],n[b],n[k],!0),Ee>F&&(ce=Pe,F=Ee);F>f&&(o[ce]=1,x(n,o,f,b,ce),x(n,o,f,ce,k))}function I(n,o){for(var f=[n[0]],b=1,k=0,F=n.length;b<F;b++)$e(n[b],n[k])>o&&(f.push(n[b]),k=b);return k<F-1&&f.push(n[F-1]),f}var se;function me(n,o,f,b,k){var F=b?se:Ie(n,f),ce=Ie(o,f),Pe,Ee,qe;for(se=ce;;){if(!(F|ce))return[n,o];if(F&ce)return!1;Pe=F||ce,Ee=ke(n,o,Pe,f,k),qe=Ie(Ee,f),Pe===F?(n=Ee,F=qe):(o=Ee,ce=qe)}}function ke(n,o,f,b,k){var F=o.x-n.x,ce=o.y-n.y,Pe=b.min,Ee=b.max,qe,tt;return f&8?(qe=n.x+F*(Ee.y-n.y)/ce,tt=Ee.y):f&4?(qe=n.x+F*(Pe.y-n.y)/ce,tt=Pe.y):f&2?(qe=Ee.x,tt=n.y+ce*(Ee.x-n.x)/F):f&1&&(qe=Pe.x,tt=n.y+ce*(Pe.x-n.x)/F),new ne(qe,tt,k)}function Ie(n,o){var f=0;return n.x<o.min.x?f|=1:n.x>o.max.x&&(f|=2),n.y<o.min.y?f|=4:n.y>o.max.y&&(f|=8),f}function $e(n,o){var f=o.x-n.x,b=o.y-n.y;return f*f+b*b}function Qe(n,o,f,b){var k=o.x,F=o.y,ce=f.x-k,Pe=f.y-F,Ee=ce*ce+Pe*Pe,qe;return Ee>0&&(qe=((n.x-k)*ce+(n.y-F)*Pe)/Ee,qe>1?(k=f.x,F=f.y):qe>0&&(k+=ce*qe,F+=Pe*qe)),ce=n.x-k,Pe=n.y-F,b?ce*ce+Pe*Pe:new ne(k,F)}function at(n){return!q(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Rt(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),at(n)}function Mt(n,o){var f,b,k,F,ce,Pe,Ee,qe;if(!n||n.length===0)throw new Error("latlngs not passed");at(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var tt=re([0,0]),gt=Z(n),Ut=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());Ut<1700&&(tt=Gi(n));var Mr=n.length,Qs=[];for(f=0;f<Mr;f++){var wn=re(n[f]);Qs.push(o.project(re([wn.lat-tt.lat,wn.lng-tt.lng])))}for(f=0,b=0;f<Mr-1;f++)b+=Qs[f].distanceTo(Qs[f+1])/2;if(b===0)qe=Qs[0];else for(f=0,F=0;f<Mr-1;f++)if(ce=Qs[f],Pe=Qs[f+1],k=ce.distanceTo(Pe),F+=k,F>b){Ee=(F-b)/k,qe=[Pe.x-Ee*(Pe.x-ce.x),Pe.y-Ee*(Pe.y-ce.y)];break}var Hr=o.unproject(ae(qe));return re([Hr.lat+tt.lat,Hr.lng+tt.lng])}var Xt={__proto__:null,simplify:wa,pointToSegmentDistance:oi,closestPointOnSegment:Na,clipSegment:me,_getEdgeIntersection:ke,_getBitCode:Ie,_sqClosestPointOnSegment:Qe,isFlat:at,_flat:Rt,polylineCenter:Mt},Ps={project:function(n){return new ne(n.lng,n.lat)},unproject:function(n){return new X(n.y,n.x)},bounds:new fe([-180,-90],[180,90])},Ts={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var o=Math.PI/180,f=this.R,b=n.lat*o,k=this.R_MINOR/f,F=Math.sqrt(1-k*k),ce=F*Math.sin(b),Pe=Math.tan(Math.PI/4-b/2)/Math.pow((1-ce)/(1+ce),F/2);return b=-f*Math.log(Math.max(Pe,1e-10)),new ne(n.lng*o*f,b)},unproject:function(n){for(var o=180/Math.PI,f=this.R,b=this.R_MINOR/f,k=Math.sqrt(1-b*b),F=Math.exp(-n.y/f),ce=Math.PI/2-2*Math.atan(F),Pe=0,Ee=.1,qe;Pe<15&&Math.abs(Ee)>1e-7;Pe++)qe=k*Math.sin(ce),qe=Math.pow((1-qe)/(1+qe),k/2),Ee=Math.PI/2-2*Math.atan(F*qe)-ce,ce+=Ee;return new X(ce*o,n.x*o/f)}},$s={__proto__:null,LonLat:Ps,Mercator:Ts,SphericalMercator:oe},jr=i({},Ne,{code:"EPSG:3395",projection:Ts,transformation:function(){var n=.5/(Math.PI*Ts.R);return Te(n,.5,-n,.5)}()}),Js=i({},Ne,{code:"EPSG:4326",projection:Ps,transformation:Te(1/180,1,-1/180,.5)}),Cn=i({},de,{projection:Ps,transformation:Te(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,o){var f=o.lng-n.lng,b=o.lat-n.lat;return Math.sqrt(f*f+b*b)},infinite:!0});de.Earth=Ne,de.EPSG3395=jr,de.EPSG3857=Q,de.EPSG900913=Ae,de.EPSG4326=Js,de.Simple=Cn;var Es=be.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[h(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[h(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var o=n.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var f=this.getEvents();o.on(f,this),this.once("remove",function(){o.off(f,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Vt.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(n);return this._layers[o]?this:(this._layers[o]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var o=h(n);return this._layers[o]?(this._loaded&&n.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return h(n)in this._layers},eachLayer:function(n,o){for(var f in this._layers)n.call(o,this._layers[f]);return this},_addLayers:function(n){n=n?q(n)?n:[n]:[];for(var o=0,f=n.length;o<f;o++)this.addLayer(n[o])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[h(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var o=h(n);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,o=-1/0,f=this._getZoomSpan();for(var b in this._zoomBoundLayers){var k=this._zoomBoundLayers[b].options;n=k.minZoom===void 0?n:Math.min(n,k.minZoom),o=k.maxZoom===void 0?o:Math.max(o,k.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=n===1/0?void 0:n,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Tr=Es.extend({initialize:function(n,o){j(this,o),this._layers={};var f,b;if(n)for(f=0,b=n.length;f<b;f++)this.addLayer(n[f])},addLayer:function(n){var o=this.getLayerId(n);return this._layers[o]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var o=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(n){var o=typeof n=="number"?n:this.getLayerId(n);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var o=Array.prototype.slice.call(arguments,1),f,b;for(f in this._layers)b=this._layers[f],b[n]&&b[n].apply(b,o);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,o){for(var f in this._layers)n.call(o,this._layers[f]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return h(n)}}),Ao=function(n,o){return new Tr(n,o)},en=Tr.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Tr.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Tr.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new W;for(var o in this._layers){var f=this._layers[o];n.extend(f.getBounds?f.getBounds():f.getLatLng())}return n}}),Ki=function(n,o){return new en(n,o)},Ln=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){j(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,o){var f=this._getIconUrl(n);if(!f){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(f,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(b,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(n,o){var f=this.options,b=f[o+"Size"];typeof b=="number"&&(b=[b,b]);var k=ae(b),F=ae(o==="shadow"&&f.shadowAnchor||f.iconAnchor||k&&k.divideBy(2,!0));n.className="leaflet-marker-"+o+" "+(f.className||""),F&&(n.style.marginLeft=-F.x+"px",n.style.marginTop=-F.y+"px"),k&&(n.style.width=k.x+"px",n.style.height=k.y+"px")},_createImg:function(n,o){return o=o||document.createElement("img"),o.src=n,o},_getIconUrl:function(n){return Ye.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Ji(n){return new Ln(n)}var sa=Ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof sa.imagePath!="string"&&(sa.imagePath=this._detectIconPath()),(this.options.imagePath||sa.imagePath)+Ln.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var o=function(f,b,k){var F=b.exec(f);return F&&F[k]};return n=o(n,/^url\((['"])?(.+)\1\)$/,2),n&&o(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Wt("div","leaflet-default-icon-path",document.body),o=Qt(n,"background-image")||Qt(n,"backgroundImage");if(document.body.removeChild(n),o=this._stripUrl(o),o)return o;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Va=zr.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new xn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),St(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var o=this._marker,f=o._map,b=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,F=Fn(o._icon),ce=f.getPixelBounds(),Pe=f.getPixelOrigin(),Ee=E(ce.min._subtract(Pe).add(k),ce.max._subtract(Pe).subtract(k));if(!Ee.contains(F)){var qe=ae((Math.max(Ee.max.x,F.x)-Ee.max.x)/(ce.max.x-Ee.max.x)-(Math.min(Ee.min.x,F.x)-Ee.min.x)/(ce.min.x-Ee.min.x),(Math.max(Ee.max.y,F.y)-Ee.max.y)/(ce.max.y-Ee.max.y)-(Math.min(Ee.min.y,F.y)-Ee.min.y)/(ce.min.y-Ee.min.y)).multiplyBy(b);f.panBy(qe,{animate:!1}),this._draggable._newPos._add(qe),this._draggable._startPos._add(qe),Is(o._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=R(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,n)))},_onDrag:function(n){var o=this._marker,f=o._shadow,b=Fn(o._icon),k=o._map.layerPointToLatLng(b);f&&Is(f,b),o._latlng=k,n.latlng=k,n.oldLatLng=this._oldLatLng,o.fire("move",n).fire("drag",n)},_onDragEnd:function(n){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Us=Es.extend({options:{icon:new sa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,o){j(this,o),this._latlng=re(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var o=this._latlng;return this._latlng=re(n),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=n.icon.createIcon(this._icon),b=!1;f!==this._icon&&(this._icon&&this._removeIcon(),b=!0,n.title&&(f.title=n.title),f.tagName==="IMG"&&(f.alt=n.alt||"")),St(f,o),n.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(f,"focus",this._panOnFocus,this);var k=n.icon.createShadow(this._shadow),F=!1;k!==this._shadow&&(this._removeShadow(),F=!0),k&&(St(k,o),k.alt=""),this._shadow=k,n.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&F&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yt(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Is(this._icon,n),this._shadow&&Is(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(St(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Va)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Va(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&nr(this._icon,n),this._shadow&&nr(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var o=this.options.icon.options,f=o.iconSize?ae(o.iconSize):ae(0,0),b=o.iconAnchor?ae(o.iconAnchor):ae(0,0);n.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:f.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function li(n,o){return new Us(n,o)}var tn=Es.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return j(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ra=tn.extend({options:{fill:!0,radius:10},initialize:function(n,o){j(this,o),this._latlng=re(n),this._radius=this.options.radius},setLatLng:function(n){var o=this._latlng;return this._latlng=re(n),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var o=n&&n.radius||this._radius;return tn.prototype.setStyle.call(this,n),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,o=this._radiusY||n,f=this._clickTolerance(),b=[n+f,o+f];this._pxBounds=new fe(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Qi(n,o){return new ra(n,o)}var _r=ra.extend({initialize:function(n,o,f){if(typeof o=="number"&&(o=i({},f,{radius:o})),j(this,o),this._latlng=re(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new W(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:tn.prototype.setStyle,_project:function(){var n=this._latlng.lng,o=this._latlng.lat,f=this._map,b=f.options.crs;if(b.distance===Ne.distance){var k=Math.PI/180,F=this._mRadius/Ne.R/k,ce=f.project([o+F,n]),Pe=f.project([o-F,n]),Ee=ce.add(Pe).divideBy(2),qe=f.unproject(Ee).lat,tt=Math.acos((Math.cos(F*k)-Math.sin(o*k)*Math.sin(qe*k))/(Math.cos(o*k)*Math.cos(qe*k)))/k;(isNaN(tt)||tt===0)&&(tt=F/Math.cos(Math.PI/180*o)),this._point=Ee.subtract(f.getPixelOrigin()),this._radius=isNaN(tt)?0:Ee.x-f.project([qe,n-tt]).x,this._radiusY=Ee.y-ce.y}else{var gt=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(gt).x}this._updateBounds()}});function xl(n,o,f){return new _r(n,o,f)}var sn=tn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,o){j(this,o),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var o=1/0,f=null,b=Qe,k,F,ce=0,Pe=this._parts.length;ce<Pe;ce++)for(var Ee=this._parts[ce],qe=1,tt=Ee.length;qe<tt;qe++){k=Ee[qe-1],F=Ee[qe];var gt=b(n,k,F,!0);gt<o&&(o=gt,f=b(n,k,F))}return f&&(f.distance=Math.sqrt(o)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,o){return o=o||this._defaultShape(),n=re(n),o.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new W,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return at(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var o=[],f=at(n),b=0,k=n.length;b<k;b++)f?(o[b]=re(n[b]),this._bounds.extend(o[b])):o[b]=this._convertLatLngs(n[b]);return o},_project:function(){var n=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),o=new ne(n,n);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(n,o,f){var b=n[0]instanceof X,k=n.length,F,ce;if(b){for(ce=[],F=0;F<k;F++)ce[F]=this._map.latLngToLayerPoint(n[F]),f.extend(ce[F]);o.push(ce)}else for(F=0;F<k;F++)this._projectLatlngs(n[F],o,f)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,f,b,k,F,ce,Pe,Ee;for(f=0,k=0,F=this._rings.length;f<F;f++)for(Ee=this._rings[f],b=0,ce=Ee.length;b<ce-1;b++)Pe=me(Ee[b],Ee[b+1],n,b,!0),Pe&&(o[k]=o[k]||[],o[k].push(Pe[0]),(Pe[1]!==Ee[b+1]||b===ce-2)&&(o[k].push(Pe[1]),k++))}},_simplifyPoints:function(){for(var n=this._parts,o=this.options.smoothFactor,f=0,b=n.length;f<b;f++)n[f]=wa(n[f],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,o){var f,b,k,F,ce,Pe,Ee=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(f=0,F=this._parts.length;f<F;f++)for(Pe=this._parts[f],b=0,ce=Pe.length,k=ce-1;b<ce;k=b++)if(!(!o&&b===0)&&oi(n,Pe[k],Pe[b])<=Ee)return!0;return!1}});function To(n,o){return new sn(n,o)}sn._flat=Rt;var dr=sn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var o=sn.prototype._convertLatLngs.call(this,n),f=o.length;return f>=2&&o[0]instanceof X&&o[0].equals(o[f-1])&&o.pop(),o},_setLatLngs:function(n){sn.prototype._setLatLngs.call(this,n),at(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return at(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,o=this.options.weight,f=new ne(o,o);if(n=new fe(n.min.subtract(f),n.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,k=this._rings.length,F;b<k;b++)F=ai(this._rings[b],n,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var o=!1,f,b,k,F,ce,Pe,Ee,qe;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(F=0,Ee=this._parts.length;F<Ee;F++)for(f=this._parts[F],ce=0,qe=f.length,Pe=qe-1;ce<qe;Pe=ce++)b=f[ce],k=f[Pe],b.y>n.y!=k.y>n.y&&n.x<(k.x-b.x)*(n.y-b.y)/(k.y-b.y)+b.x&&(o=!o);return o||sn.prototype._containsPoint.call(this,n,!0)}});function ci(n,o){return new dr(n,o)}var vn=en.extend({initialize:function(n,o){j(this,o),this._layers={},n&&this.addData(n)},addData:function(n){var o=q(n)?n:n.features,f,b,k;if(o){for(f=0,b=o.length;f<b;f++)k=o[f],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var F=this.options;if(F.filter&&!F.filter(n))return this;var ce=Za(n,F);return ce?(ce.feature=yn(n),ce.defaultOptions=ce.options,this.resetStyle(ce),F.onEachFeature&&F.onEachFeature(n,ce),this.addLayer(ce)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=i({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(o){this._setLayerStyle(o,n)},this)},_setLayerStyle:function(n,o){n.setStyle&&(typeof o=="function"&&(o=o(n.feature)),n.setStyle(o))}});function Za(n,o){var f=n.type==="Feature"?n.geometry:n,b=f?f.coordinates:null,k=[],F=o&&o.pointToLayer,ce=o&&o.coordsToLatLng||aa,Pe,Ee,qe,tt;if(!b&&!f)return null;switch(f.type){case"Point":return Pe=ce(b),na(F,n,Pe,o);case"MultiPoint":for(qe=0,tt=b.length;qe<tt;qe++)Pe=ce(b[qe]),k.push(na(F,n,Pe,o));return new en(k);case"LineString":case"MultiLineString":return Ee=hr(b,f.type==="LineString"?0:1,ce),new sn(Ee,o);case"Polygon":case"MultiPolygon":return Ee=hr(b,f.type==="Polygon"?1:2,ce),new dr(Ee,o);case"GeometryCollection":for(qe=0,tt=f.geometries.length;qe<tt;qe++){var gt=Za({geometry:f.geometries[qe],type:"Feature",properties:n.properties},o);gt&&k.push(gt)}return new en(k);case"FeatureCollection":for(qe=0,tt=f.features.length;qe<tt;qe++){var Ut=Za(f.features[qe],o);Ut&&k.push(Ut)}return new en(k);default:throw new Error("Invalid GeoJSON object.")}}function na(n,o,f,b){return n?n(o,f):new Us(f,b&&b.markersInheritOptions&&b)}function aa(n){return new X(n[1],n[0],n[2])}function hr(n,o,f){for(var b=[],k=0,F=n.length,ce;k<F;k++)ce=o?hr(n[k],o-1,f):(f||aa)(n[k]),b.push(ce);return b}function ur(n,o){return n=re(n),n.alt!==void 0?[N(n.lng,o),N(n.lat,o),N(n.alt,o)]:[N(n.lng,o),N(n.lat,o)]}function An(n,o,f,b){for(var k=[],F=0,ce=n.length;F<ce;F++)k.push(o?An(n[F],at(n[F])?0:o-1,f,b):ur(n[F],b));return!o&&f&&k.length>0&&k.push(k[0].slice()),k}function Br(n,o){return n.feature?i({},n.feature,{geometry:o}):yn(o)}function yn(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var ja={toGeoJSON:function(n){return Br(this,{type:"Point",coordinates:ur(this.getLatLng(),n)})}};Us.include(ja),_r.include(ja),ra.include(ja),sn.include({toGeoJSON:function(n){var o=!at(this._latlngs),f=An(this._latlngs,o?1:0,!1,n);return Br(this,{type:(o?"Multi":"")+"LineString",coordinates:f})}}),dr.include({toGeoJSON:function(n){var o=!at(this._latlngs),f=o&&!at(this._latlngs[0]),b=An(this._latlngs,f?2:o?1:0,!0,n);return o||(b=[b]),Br(this,{type:(f?"Multi":"")+"Polygon",coordinates:b})}}),Tr.include({toMultiPoint:function(n){var o=[];return this.eachLayer(function(f){o.push(f.toGeoJSON(n).geometry.coordinates)}),Br(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(n){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(n);var f=o==="GeometryCollection",b=[];return this.eachLayer(function(k){if(k.toGeoJSON){var F=k.toGeoJSON(n);if(f)b.push(F.geometry);else{var ce=yn(F);ce.type==="FeatureCollection"?b.push.apply(b,ce.features):b.push(ce)}}}),f?Br(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function zn(n,o){return new vn(n,o)}var Fs=zn,_a=Es.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,o,f){this._url=n,this._bounds=Z(o),j(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(St(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&un(this._image),this},bringToBack:function(){return this._map&&fn(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Z(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",o=this._image=n?this._url:Wt("img");if(St(o,"leaflet-image-layer"),this._zoomAnimated&&St(o,"leaflet-zoom-animated"),this.options.className&&St(o,this.options.className),o.onselectstart=y,o.onmousemove=y,o.onload=d(this.fire,this,"load"),o.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(n){var o=this._map.getZoomScale(n.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;pn(this._image,f,o)},_reset:function(){var n=this._image,o=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=o.getSize();Is(n,o.min),n.style.width=f.x+"px",n.style.height=f.y+"px"},_updateOpacity:function(){nr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Er=function(n,o,f){return new _a(n,o,f)},rn=_a.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",o=this._image=n?this._url:Wt("video");if(St(o,"leaflet-image-layer"),this._zoomAnimated&&St(o,"leaflet-zoom-animated"),this.options.className&&St(o,this.options.className),o.onselectstart=y,o.onmousemove=y,o.onloadeddata=d(this.fire,this,"load"),n){for(var f=o.getElementsByTagName("source"),b=[],k=0;k<f.length;k++)b.push(f[k].src);this._url=f.length>0?b:[o.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var ce=Wt("source");ce.src=this._url[F],o.appendChild(ce)}}});function di(n,o,f){return new rn(n,o,f)}var Xi=_a.extend({_initImage:function(){var n=this._image=this._url;St(n,"leaflet-image-layer"),this._zoomAnimated&&St(n,"leaflet-zoom-animated"),this.options.className&&St(n,this.options.className),n.onselectstart=y,n.onmousemove=y}});function eo(n,o,f){return new Xi(n,o,f)}var Sr=Es.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,o){n&&(n instanceof X||q(n))?(this._latlng=re(n),j(this,o)):(j(this,n),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&nr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&nr(this._container,1),this.bringToFront(),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(nr(this._container,0),this._removeTimeout=setTimeout(d(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=re(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&un(this._container),this},bringToBack:function(){return this._map&&fn(this._container),this},_prepareOpen:function(n){var o=this._source;if(!o._map)return!1;if(o instanceof en){o=null;var f=this._source._layers;for(var b in f)if(f[b]._map){o=f[b];break}if(!o)return!1;this._source=o}if(!n)if(o.getCenter)n=o.getCenter();else if(o.getLatLng)n=o.getLatLng();else if(o.getBounds)n=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")n.innerHTML=o;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),o=ae(this.options.offset),f=this._getAnchor();this._zoomAnimated?Is(this._container,n.add(f)):o=o.add(n).add(f);var b=this._containerBottom=-o.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=b+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});Vt.include({_initOverlay:function(n,o,f,b){var k=o;return k instanceof n||(k=new n(b).setContent(o)),f&&k.setLatLng(f),k}}),Es.include({_initOverlay:function(n,o,f,b){var k=f;return k instanceof n?(j(k,b),k._source=this):(k=o&&!b?o:new n(b,this),k.setContent(f)),k}});var Bn=Sr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Sr.prototype.openOn.call(this,n)},onAdd:function(n){Sr.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof tn||this._source.on("preclick",ea))},onRemove:function(n){Sr.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof tn||this._source.off("preclick",ea))},getEvents:function(){var n=Sr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",o=this._container=Wt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Wt("div",n+"-content-wrapper",o);if(this._contentNode=Wt("div",n+"-content",f),$a(o),Hi(this._contentNode),It(o,"contextmenu",ea),this._tipContainer=Wt("div",n+"-tip-container",o),this._tip=Wt("div",n+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=Wt("a",n+"-close-button",o);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',It(b,"click",function(k){Ds(k),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,o=n.style;o.width="",o.whiteSpace="nowrap";var f=n.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),o.width=f+1+"px",o.whiteSpace="",o.height="";var b=n.offsetHeight,k=this.options.maxHeight,F="leaflet-popup-scrolled";k&&b>k?(o.height=k+"px",St(n,F)):Dt(n,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),f=this._getAnchor();Is(this._container,o.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,o=parseInt(Qt(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+o,b=this._containerWidth,k=new ne(this._containerLeft,-f-this._containerBottom);k._add(Fn(this._container));var F=n.layerPointToContainerPoint(k),ce=ae(this.options.autoPanPadding),Pe=ae(this.options.autoPanPaddingTopLeft||ce),Ee=ae(this.options.autoPanPaddingBottomRight||ce),qe=n.getSize(),tt=0,gt=0;F.x+b+Ee.x>qe.x&&(tt=F.x+b-qe.x+Ee.x),F.x-tt-Pe.x<0&&(tt=F.x-Pe.x),F.y+f+Ee.y>qe.y&&(gt=F.y+f-qe.y+Ee.y),F.y-gt-Pe.y<0&&(gt=F.y-Pe.y),(tt||gt)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([tt,gt]))}},_getAnchor:function(){return ae(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Sa=function(n,o){return new Bn(n,o)};Vt.mergeOptions({closePopupOnClick:!0}),Vt.include({openPopup:function(n,o,f){return this._initOverlay(Bn,n,o,f).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),Es.include({bindPopup:function(n,o){return this._popup=this._initOverlay(Bn,this._popup,n,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof en||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Jr(n);var o=n.layer||n.target;if(this._popup._source===o&&!(o instanceof tn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=o,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var qn=Sr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Sr.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Sr.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Sr.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",o=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Wt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var o,f,b=this._map,k=this._container,F=b.latLngToContainerPoint(b.getCenter()),ce=b.layerPointToContainerPoint(n),Pe=this.options.direction,Ee=k.offsetWidth,qe=k.offsetHeight,tt=ae(this.options.offset),gt=this._getAnchor();Pe==="top"?(o=Ee/2,f=qe):Pe==="bottom"?(o=Ee/2,f=0):Pe==="center"?(o=Ee/2,f=qe/2):Pe==="right"?(o=0,f=qe/2):Pe==="left"?(o=Ee,f=qe/2):ce.x<F.x?(Pe="right",o=0,f=qe/2):(Pe="left",o=Ee+(tt.x+gt.x)*2,f=qe/2),n=n.subtract(ae(o,f,!0)).add(tt).add(gt),Dt(k,"leaflet-tooltip-right"),Dt(k,"leaflet-tooltip-left"),Dt(k,"leaflet-tooltip-top"),Dt(k,"leaflet-tooltip-bottom"),St(k,"leaflet-tooltip-"+Pe),Is(k,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&nr(this._container,n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(o)},_getAnchor:function(){return ae(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),hi=function(n,o){return new qn(n,o)};Vt.include({openTooltip:function(n,o,f){return this._initOverlay(qn,n,o,f).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),Es.include({bindTooltip:function(n,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(qn,this._tooltip,n,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var o=n?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[o](f),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof en||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var o=typeof n.getElement=="function"&&n.getElement();o&&(It(o,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),It(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var o=typeof n.getElement=="function"&&n.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var o=n.latlng,f,b;this._tooltip.options.sticky&&n.originalEvent&&(f=this._map.mouseEventToContainerPoint(n.originalEvent),b=this._map.containerPointToLayerPoint(f),o=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(o)}});var ka=Ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var o=n&&n.tagName==="DIV"?n:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Dn(o),o.appendChild(f.html)):o.innerHTML=f.html!==!1?f.html:"",f.bgPos){var b=ae(f.bgPos);o.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Pa(n){return new ka(n)}Ln.Default=sa;var ia=Es.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){j(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),pt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof ne?n:new ne(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var o=this.getPane().children,f=-n(-1/0,1/0),b=0,k=o.length,F;b<k;b++)F=o[b].style.zIndex,o[b]!==this._container&&F&&(f=n(f,+F));isFinite(f)&&(this.options.zIndex=f+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ye.ielt9){nr(this._container,this.options.opacity);var n=+new Date,o=!1,f=!1;for(var b in this._tiles){var k=this._tiles[b];if(!(!k.current||!k.loaded)){var F=Math.min(1,(n-k.loaded)/200);nr(k.el,F),F<1?o=!0:(k.active?f=!0:this._onOpaqueTile(k),k.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),o&&(z(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,o=this.options.maxZoom;if(n!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===n?(this._levels[f].el.style.zIndex=o-Math.abs(n-f),this._onUpdateLevel(f)):(pt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var b=this._levels[n],k=this._map;return b||(b=this._levels[n]={},b.el=Wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=o,b.origin=k.project(k.unproject(k.getPixelOrigin()),n).round(),b.zoom=n,this._setZoomTransform(b,k.getCenter(),k.getZoom()),y(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var n,o,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)o=this._tiles[n],o.retain=o.current;for(n in this._tiles)if(o=this._tiles[n],o.current&&!o.active){var b=o.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var o in this._tiles)this._tiles[o].coords.z===n&&this._removeTile(o)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)pt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,o,f,b){var k=Math.floor(n/2),F=Math.floor(o/2),ce=f-1,Pe=new ne(+k,+F);Pe.z=+ce;var Ee=this._tileCoordsToKey(Pe),qe=this._tiles[Ee];return qe&&qe.active?(qe.retain=!0,!0):(qe&&qe.loaded&&(qe.retain=!0),ce>b?this._retainParent(k,F,ce,b):!1)},_retainChildren:function(n,o,f,b){for(var k=2*n;k<2*n+2;k++)for(var F=2*o;F<2*o+2;F++){var ce=new ne(k,F);ce.z=f+1;var Pe=this._tileCoordsToKey(ce),Ee=this._tiles[Pe];if(Ee&&Ee.active){Ee.retain=!0;continue}else Ee&&Ee.loaded&&(Ee.retain=!0);f+1<b&&this._retainChildren(k,F,f+1,b)}},_resetView:function(n){var o=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var o=this.options;return o.minNativeZoom!==void 0&&n<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<n?o.maxNativeZoom:n},_setView:function(n,o,f,b){var k=Math.round(o);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var F=this.options.updateWhenZooming&&k!==this._tileZoom;(!b||F)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(n),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(n,o)},_setZoomTransforms:function(n,o){for(var f in this._levels)this._setZoomTransform(this._levels[f],n,o)},_setZoomTransform:function(n,o,f){var b=this._map.getZoomScale(f,n.zoom),k=n.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(o,f)).round();Ye.any3d?pn(n.el,k,b):Is(n.el,k)},_resetGrid:function(){var n=this._map,o=n.options.crs,f=this._tileSize=this.getTileSize(),b=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,o.wrapLng[0]],b).x/f.x),Math.ceil(n.project([0,o.wrapLng[1]],b).x/f.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([o.wrapLat[0],0],b).y/f.x),Math.ceil(n.project([o.wrapLat[1],0],b).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var o=this._map,f=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),b=o.getZoomScale(f,this._tileZoom),k=o.project(n,this._tileZoom).floor(),F=o.getSize().divideBy(b*2);return new fe(k.subtract(F),k.add(F))},_update:function(n){var o=this._map;if(o){var f=this._clampZoom(o.getZoom());if(n===void 0&&(n=o.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(n),k=this._pxBoundsToTileRange(b),F=k.getCenter(),ce=[],Pe=this.options.keepBuffer,Ee=new fe(k.getBottomLeft().subtract([Pe,-Pe]),k.getTopRight().add([Pe,-Pe]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var qe in this._tiles){var tt=this._tiles[qe].coords;(tt.z!==this._tileZoom||!Ee.contains(new ne(tt.x,tt.y)))&&(this._tiles[qe].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(n,f);return}for(var gt=k.min.y;gt<=k.max.y;gt++)for(var Ut=k.min.x;Ut<=k.max.x;Ut++){var Mr=new ne(Ut,gt);if(Mr.z=this._tileZoom,!!this._isValidTile(Mr)){var Qs=this._tiles[this._tileCoordsToKey(Mr)];Qs?Qs.current=!0:ce.push(Mr)}}if(ce.sort(function(Hr,mi){return Hr.distanceTo(F)-mi.distanceTo(F)}),ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wn=document.createDocumentFragment();for(Ut=0;Ut<ce.length;Ut++)this._addTile(ce[Ut],wn);this._level.el.appendChild(wn)}}}},_isValidTile:function(n){var o=this._map.options.crs;if(!o.infinite){var f=this._globalTileRange;if(!o.wrapLng&&(n.x<f.min.x||n.x>f.max.x)||!o.wrapLat&&(n.y<f.min.y||n.y>f.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(n);return Z(this.options.bounds).overlaps(b)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var o=this._map,f=this.getTileSize(),b=n.scaleBy(f),k=b.add(f),F=o.unproject(b,n.z),ce=o.unproject(k,n.z);return[F,ce]},_tileCoordsToBounds:function(n){var o=this._tileCoordsToNwSe(n),f=new W(o[0],o[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var o=n.split(":"),f=new ne(+o[0],+o[1]);return f.z=+o[2],f},_removeTile:function(n){var o=this._tiles[n];o&&(pt(o.el),delete this._tiles[n],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){St(n,"leaflet-tile");var o=this.getTileSize();n.style.width=o.x+"px",n.style.height=o.y+"px",n.onselectstart=y,n.onmousemove=y,Ye.ielt9&&this.options.opacity<1&&nr(n,this.options.opacity)},_addTile:function(n,o){var f=this._getTilePos(n),b=this._tileCoordsToKey(n),k=this.createTile(this._wrapCoords(n),d(this._tileReady,this,n));this._initTile(k),this.createTile.length<2&&R(d(this._tileReady,this,n,null,k)),Is(k,f),this._tiles[b]={el:k,coords:n,current:!0},o.appendChild(k),this.fire("tileloadstart",{tile:k,coords:n})},_tileReady:function(n,o,f){o&&this.fire("tileerror",{error:o,tile:f,coords:n});var b=this._tileCoordsToKey(n);f=this._tiles[b],f&&(f.loaded=+new Date,this._map._fadeAnimated?(nr(f.el,0),z(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),o||(St(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ye.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var o=new ne(this._wrapX?v(n.x,this._wrapX):n.x,this._wrapY?v(n.y,this._wrapY):n.y);return o.z=n.z,o},_pxBoundsToTileRange:function(n){var o=this.getTileSize();return new fe(n.min.unscaleBy(o).floor(),n.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function bn(n){return new ia(n)}var fr=ia.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,o){this._url=n,o=j(this,o),o.detectRetina&&Ye.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,o){return this._url===n&&o===void 0&&(o=!0),this._url=n,o||this.redraw(),this},createTile:function(n,o){var f=document.createElement("img");return It(f,"load",d(this._tileOnLoad,this,o,f)),It(f,"error",d(this._tileOnError,this,o,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(n),f},getTileUrl:function(n){var o={r:Ye.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-n.y;this.options.tms&&(o.y=f),o["-y"]=f}return S(this._url,i(o,this.options))},_tileOnLoad:function(n,o){Ye.ielt9?setTimeout(d(n,this,null,o),0):n(null,o)},_tileOnError:function(n,o,f){var b=this.options.errorTileUrl;b&&o.getAttribute("src")!==b&&(o.src=b),n(f,o)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,o=this.options.maxZoom,f=this.options.zoomReverse,b=this.options.zoomOffset;return f&&(n=o-n),n+b},_getSubdomain:function(n){var o=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var n,o;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(o=this._tiles[n].el,o.onload=y,o.onerror=y,!o.complete)){o.src=Y;var f=this._tiles[n].coords;pt(o),delete this._tiles[n],this.fire("tileabort",{tile:o,coords:f})}},_removeTile:function(n){var o=this._tiles[n];if(o)return o.el.setAttribute("src",Y),ia.prototype._removeTile.call(this,n)},_tileReady:function(n,o,f){if(!(!this._map||f&&f.getAttribute("src")===Y))return ia.prototype._tileReady.call(this,n,o,f)}});function ps(n,o){return new fr(n,o)}var gs=fr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,o){this._url=n;var f=i({},this.defaultWmsParams);for(var b in o)b in this.options||(f[b]=o[b]);o=j(this,o);var k=o.detectRetina&&Ye.retina?2:1,F=this.getTileSize();f.width=F.x*k,f.height=F.y*k,this.wmsParams=f},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,fr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var o=this._tileCoordsToNwSe(n),f=this._crs,b=E(f.project(o[0]),f.project(o[1])),k=b.min,F=b.max,ce=(this._wmsVersion>=1.3&&this._crs===Js?[k.y,k.x,F.y,F.x]:[k.x,k.y,F.x,F.y]).join(","),Pe=fr.prototype.getTileUrl.call(this,n);return Pe+T(this.wmsParams,Pe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ce},setParams:function(n,o){return i(this.wmsParams,n),o||this.redraw(),this}});function zs(n,o){return new gs(n,o)}fr.WMS=gs,ps.wms=zs;var xs=Es.extend({options:{padding:.1},initialize:function(n){j(this,n),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),St(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,o){var f=this._map.getZoomScale(o,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,o),F=b.multiplyBy(-f).add(k).subtract(this._map._getNewPixelOrigin(n,o));Ye.any3d?pn(this._container,F,f):Is(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,o=this._map.getSize(),f=this._map.containerPointToLayerPoint(o.multiplyBy(-n)).round();this._bounds=new fe(f,f.add(o.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hn=xs.extend({options:{tolerance:0},getEvents:function(){var n=xs.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");It(n,"mousemove",this._onMouseMove,this),It(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),It(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,pt(this._container),Yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var o in this._layers)n=this._layers[o],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xs.prototype._update.call(this);var n=this._bounds,o=this._container,f=n.getSize(),b=Ye.retina?2:1;Is(o,n.min),o.width=b*f.x,o.height=b*f.y,o.style.width=f.x+"px",o.style.height=f.y+"px",Ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){xs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[h(n)]=n;var o=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var o=n._order,f=o.next,b=o.prev;f?f.prev=b:this._drawLast=b,b?b.next=f:this._drawFirst=f,delete n._order,delete this._layers[h(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var o=n.options.dashArray.split(/[, ]+/),f=[],b,k;for(k=0;k<o.length;k++){if(b=Number(o[k]),isNaN(b))return;f.push(b)}n.options._dashArray=f}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var o=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(n._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(n._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var o=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,o=this._redrawBounds;if(this._ctx.save(),o){var f=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)n=b.layer,(!o||n._pxBounds&&n._pxBounds.intersects(o))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,o){if(this._drawing){var f,b,k,F,ce=n._parts,Pe=ce.length,Ee=this._ctx;if(Pe){for(Ee.beginPath(),f=0;f<Pe;f++){for(b=0,k=ce[f].length;b<k;b++)F=ce[f][b],Ee[b?"lineTo":"moveTo"](F.x,F.y);o&&Ee.closePath()}this._fillStroke(Ee,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var o=n._point,f=this._ctx,b=Math.max(Math.round(n._radius),1),k=(Math.max(Math.round(n._radiusY),1)||b)/b;k!==1&&(f.save(),f.scale(1,k)),f.beginPath(),f.arc(o.x,o.y/k,b,0,Math.PI*2,!1),k!==1&&f.restore(),this._fillStroke(f,n)}},_fillStroke:function(n,o){var f=o.options;f.fill&&(n.globalAlpha=f.fillOpacity,n.fillStyle=f.fillColor||f.color,n.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(n.setLineDash&&n.setLineDash(o.options&&o.options._dashArray||[]),n.globalAlpha=f.opacity,n.lineWidth=f.weight,n.strokeStyle=f.color,n.lineCap=f.lineCap,n.lineJoin=f.lineJoin,n.stroke())},_onClick:function(n){for(var o=this._map.mouseEventToLayerPoint(n),f,b,k=this._drawFirst;k;k=k.next)f=k.layer,f.options.interactive&&f._containsPoint(o)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(f))&&(b=f);this._fireEvent(b?[b]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,o)}},_handleMouseOut:function(n){var o=this._hoveredLayer;o&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([o],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,o){if(!this._mouseHoverThrottled){for(var f,b,k=this._drawFirst;k;k=k.next)f=k.layer,f.options.interactive&&f._containsPoint(o)&&(b=f);b!==this._hoveredLayer&&(this._handleMouseOut(n),b&&(St(this._container,"leaflet-interactive"),this._fireEvent([b],n,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,o,f){this._map._fireDOMEvent(o,f||o.type,n)},_bringToFront:function(n){var o=n._order;if(o){var f=o.next,b=o.prev;if(f)f.prev=b;else return;b?b.next=f:f&&(this._drawFirst=f),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(n)}},_bringToBack:function(n){var o=n._order;if(o){var f=o.next,b=o.prev;if(b)b.next=f;else return;f?f.prev=b:b&&(this._drawLast=b),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(n)}}});function ui(n){return Ye.canvas?new Hn(n):null}var $n=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Eo={_initContainer:function(){this._container=Wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xs.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var o=n._container=$n("shape");St(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",n._path=$n("path"),o.appendChild(n._path),this._updateStyle(n),this._layers[h(n)]=n},_addPath:function(n){var o=n._container;this._container.appendChild(o),n.options.interactive&&n.addInteractiveTarget(o)},_removePath:function(n){var o=n._container;pt(o),n.removeInteractiveTarget(o),delete this._layers[h(n)]},_updateStyle:function(n){var o=n._stroke,f=n._fill,b=n.options,k=n._container;k.stroked=!!b.stroke,k.filled=!!b.fill,b.stroke?(o||(o=n._stroke=$n("stroke")),k.appendChild(o),o.weight=b.weight+"px",o.color=b.color,o.opacity=b.opacity,b.dashArray?o.dashStyle=q(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=b.lineCap.replace("butt","flat"),o.joinstyle=b.lineJoin):o&&(k.removeChild(o),n._stroke=null),b.fill?(f||(f=n._fill=$n("fill")),k.appendChild(f),f.color=b.fillColor||b.color,f.opacity=b.fillOpacity):f&&(k.removeChild(f),n._fill=null)},_updateCircle:function(n){var o=n._point.round(),f=Math.round(n._radius),b=Math.round(n._radiusY||f);this._setPath(n,n._empty()?"M0 0":"AL "+o.x+","+o.y+" "+f+","+b+" 0,"+65535*360)},_setPath:function(n,o){n._path.v=o},_bringToFront:function(n){un(n._container)},_bringToBack:function(n){fn(n._container)}},fi=Ye.vml?$n:ge,Ca=xs.extend({_initContainer:function(){this._container=fi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),Yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xs.prototype._update.call(this);var n=this._bounds,o=n.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,f.setAttribute("width",o.x),f.setAttribute("height",o.y)),Is(f,n.min),f.setAttribute("viewBox",[n.min.x,n.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(n){var o=n._path=fi("path");n.options.className&&St(o,n.options.className),n.options.interactive&&St(o,"leaflet-interactive"),this._updateStyle(n),this._layers[h(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){pt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[h(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var o=n._path,f=n.options;o&&(f.stroke?(o.setAttribute("stroke",f.color),o.setAttribute("stroke-opacity",f.opacity),o.setAttribute("stroke-width",f.weight),o.setAttribute("stroke-linecap",f.lineCap),o.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?o.setAttribute("stroke-dasharray",f.dashArray):o.removeAttribute("stroke-dasharray"),f.dashOffset?o.setAttribute("stroke-dashoffset",f.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),f.fill?(o.setAttribute("fill",f.fillColor||f.color),o.setAttribute("fill-opacity",f.fillOpacity),o.setAttribute("fill-rule",f.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(n,o){this._setPath(n,G(n._parts,o))},_updateCircle:function(n){var o=n._point,f=Math.max(Math.round(n._radius),1),b=Math.max(Math.round(n._radiusY),1)||f,k="a"+f+","+b+" 0 1,0 ",F=n._empty()?"M0 0":"M"+(o.x-f)+","+o.y+k+f*2+",0 "+k+-f*2+",0 ";this._setPath(n,F)},_setPath:function(n,o){n._path.setAttribute("d",o)},_bringToFront:function(n){un(n._path)},_bringToBack:function(n){fn(n._path)}});Ye.vml&&Ca.include(Eo);function qr(n){return Ye.svg||Ye.vml?new Ca(n):null}Vt.include({getRenderer:function(n){var o=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var o=this._paneRenderers[n];return o===void 0&&(o=this._createRenderer({pane:n}),this._paneRenderers[n]=o),o},_createRenderer:function(n){return this.options.preferCanvas&&ui(n)||qr(n)}});var nn=dr.extend({initialize:function(n,o){dr.prototype.initialize.call(this,this._boundsToLatLngs(n),o)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Z(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Mo(n,o){return new nn(n,o)}Ca.create=fi,Ca.pointsToPath=G,vn.geometryToLayer=Za,vn.coordsToLatLng=aa,vn.coordsToLatLngs=hr,vn.latLngToCoords=ur,vn.latLngsToCoords=An,vn.getFeature=Br,vn.asFeature=yn,Vt.mergeOptions({boxZoom:!0});var to=zr.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ba(),Bi(),this._startPoint=this._map.mouseEventToContainerPoint(n),It(document,{contextmenu:Jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Wt("div","leaflet-zoom-box",this._container),St(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var o=new fe(this._point,this._startPoint),f=o.getSize();Is(this._box,o.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(pt(this._box),Dt(this._container,"leaflet-crosshair")),Qn(),Pn(),Yt(document,{contextmenu:Jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var o=new W(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Vt.addInitHook("addHandler","boxZoom",to),Vt.mergeOptions({doubleClickZoom:!0});var vl=zr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var o=this._map,f=o.getZoom(),b=o.options.zoomDelta,k=n.originalEvent.shiftKey?f-b:f+b;o.options.doubleClickZoom==="center"?o.setZoom(k):o.setZoomAround(n.containerPoint,k)}});Vt.addInitHook("addHandler","doubleClickZoom",vl),Vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var so=zr.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new xn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}St(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Dt(this._map._container,"leaflet-grab"),Dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Z(this._map.options.maxBounds);this._offsetLimit=E(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var o=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(o),this._prunePositions(o)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,o){return n-(n-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;n.x<o.min.x&&(n.x=this._viscousLimit(n.x,o.min.x)),n.y<o.min.y&&(n.y=this._viscousLimit(n.y,o.min.y)),n.x>o.max.x&&(n.x=this._viscousLimit(n.x,o.max.x)),n.y>o.max.y&&(n.y=this._viscousLimit(n.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,o=Math.round(n/2),f=this._initialWorldOffset,b=this._draggable._newPos.x,k=(b-o+f)%n+o-f,F=(b+o+f)%n-o-f,ce=Math.abs(k+f)<Math.abs(F+f)?k:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ce},_onDragEnd:function(n){var o=this._map,f=o.options,b=!f.inertia||n.noInertia||this._times.length<2;if(o.fire("dragend",n),b)o.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,ce=f.easeLinearity,Pe=k.multiplyBy(ce/F),Ee=Pe.distanceTo([0,0]),qe=Math.min(f.inertiaMaxSpeed,Ee),tt=Pe.multiplyBy(qe/Ee),gt=qe/(f.inertiaDeceleration*ce),Ut=tt.multiplyBy(-gt/2).round();!Ut.x&&!Ut.y?o.fire("moveend"):(Ut=o._limitOffset(Ut,o.options.maxBounds),R(function(){o.panBy(Ut,{duration:gt,easeLinearity:ce,noMoveStart:!0,animate:!0})}))}}});Vt.addInitHook("addHandler","dragging",so),Vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ro=zr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),It(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,o=document.documentElement,f=n.scrollTop||o.scrollTop,b=n.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(b,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var o=this._panKeys={},f=this.keyCodes,b,k;for(b=0,k=f.left.length;b<k;b++)o[f.left[b]]=[-1*n,0];for(b=0,k=f.right.length;b<k;b++)o[f.right[b]]=[n,0];for(b=0,k=f.down.length;b<k;b++)o[f.down[b]]=[0,n];for(b=0,k=f.up.length;b<k;b++)o[f.up[b]]=[0,-1*n]},_setZoomDelta:function(n){var o=this._zoomKeys={},f=this.keyCodes,b,k;for(b=0,k=f.zoomIn.length;b<k;b++)o[f.zoomIn[b]]=n;for(b=0,k=f.zoomOut.length;b<k;b++)o[f.zoomOut[b]]=-n},_addHooks:function(){It(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=n.keyCode,f=this._map,b;if(o in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(b=this._panKeys[o],n.shiftKey&&(b=ae(b).multiplyBy(3)),f.options.maxBounds&&(b=f._limitOffset(ae(b),f.options.maxBounds)),f.options.worldCopyJump){var k=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(b)));f.panTo(k)}else f.panBy(b)}else if(o in this._zoomKeys)f.setZoom(f.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Jr(n)}}});Vt.addInitHook("addHandler","keyboard",ro),Vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Io=zr.extend({addHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var o=ri(n),f=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var b=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),b),Jr(n)},_performZoom:function(){var n=this._map,o=n.getZoom(),f=this._map.options.zoomSnap||0;n._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,F=f?Math.ceil(k/f)*f:k,ce=n._limitZoom(o+(this._delta>0?F:-F))-o;this._delta=0,this._startTime=null,ce&&(n.options.scrollWheelZoom==="center"?n.setZoom(o+ce):n.setZoomAround(this._lastMousePos,o+ce))}});Vt.addInitHook("addHandler","scrollWheelZoom",Io);var Yl=600;Vt.mergeOptions({tapHold:Ye.touchNative&&Ye.safari&&Ye.mobile,tapTolerance:15});var Ro=zr.extend({addHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var o=n.touches[0];this._startPos=this._newPos=new ne(o.clientX,o.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(It(document,"touchend",Ds),It(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Yl),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Yt(document,"touchend",Ds),Yt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Yt(document,"touchend touchcancel contextmenu",this._cancel,this),Yt(document,"touchmove",this._onMove,this)},_onMove:function(n){var o=n.touches[0];this._newPos=new ne(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,o){var f=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});f._simulated=!0,o.target.dispatchEvent(f)}});Vt.addInitHook("addHandler","tapHold",Ro),Vt.mergeOptions({touchZoom:Ye.touch,bounceAtZoomLimits:!0});var Oo=zr.extend({addHooks:function(){St(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var o=this._map;if(!(!n.touches||n.touches.length!==2||o._animatingZoom||this._zooming)){var f=o.mouseEventToContainerPoint(n.touches[0]),b=o.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(f.add(b)._divideBy(2))),this._startDist=f.distanceTo(b),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),Ds(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var o=this._map,f=o.mouseEventToContainerPoint(n.touches[0]),b=o.mouseEventToContainerPoint(n.touches[1]),k=f.distanceTo(b)/this._startDist;if(this._zoom=o.getScaleZoom(k,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&k<1||this._zoom>o.getMaxZoom()&&k>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var F=f._add(b)._divideBy(2)._subtract(this._centerPoint);if(k===1&&F.x===0&&F.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var ce=d(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(ce,this,!0),Ds(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Vt.addInitHook("addHandler","touchZoom",Oo),Vt.BoxZoom=to,Vt.DoubleClickZoom=vl,Vt.Drag=so,Vt.Keyboard=ro,Vt.ScrollWheelZoom=Io,Vt.TapHold=Ro,Vt.TouchZoom=Oo,r.Bounds=fe,r.Browser=Ye,r.CRS=de,r.Canvas=Hn,r.Circle=_r,r.CircleMarker=ra,r.Class=B,r.Control=Hs,r.DivIcon=ka,r.DivOverlay=Sr,r.DomEvent=ko,r.DomUtil=Et,r.Draggable=xn,r.Evented=be,r.FeatureGroup=en,r.GeoJSON=vn,r.GridLayer=ia,r.Handler=zr,r.Icon=Ln,r.ImageOverlay=_a,r.LatLng=X,r.LatLngBounds=W,r.Layer=Es,r.LayerGroup=Tr,r.LineUtil=Xt,r.Map=Vt,r.Marker=Us,r.Mixin=Lo,r.Path=tn,r.Point=ne,r.PolyUtil=ii,r.Polygon=dr,r.Polyline=sn,r.Popup=Bn,r.PosAnimation=$i,r.Projection=$s,r.Rectangle=nn,r.Renderer=xs,r.SVG=Ca,r.SVGOverlay=Xi,r.TileLayer=fr,r.Tooltip=qn,r.Transformation=ie,r.Util=H,r.VideoOverlay=rn,r.bind=d,r.bounds=E,r.canvas=ui,r.circle=xl,r.circleMarker=Qi,r.control=Qr,r.divIcon=Pa,r.extend=i,r.featureGroup=Ki,r.geoJSON=zn,r.geoJson=Fs,r.gridLayer=bn,r.icon=Ji,r.imageOverlay=Er,r.latLng=re,r.latLngBounds=Z,r.layerGroup=Ao,r.map=Po,r.marker=li,r.point=ae,r.polygon=ci,r.polyline=To,r.popup=Sa,r.rectangle=Mo,r.setOptions=j,r.stamp=h,r.svg=qr,r.svgOverlay=eo,r.tileLayer=ps,r.tooltip=hi,r.transformation=Te,r.version=a,r.videoOverlay=di;var Do=window.L;r.noConflict=function(){return window.L=Do,this},window.L=r})}(Ll,Ll.exports)),Ll.exports}var Gl=e5();const cf=dv(Gl);function Qh(s,t,r){return Object.freeze({instance:s,context:t,container:r})}function Xh(s,t){return t==null?function(a,i){const l=P.useRef();return l.current||(l.current=s(a,i)),l}:function(a,i){const l=P.useRef();l.current||(l.current=s(a,i));const d=P.useRef(a),{instance:u}=l.current;return P.useEffect(function(){d.current!==a&&(t(u,a,d.current),d.current=a)},[u,a,i]),l}}function t5(s,t){P.useEffect(function(){return(t.layerContainer??t.map).addLayer(s.instance),function(){t.layerContainer?.removeLayer(s.instance),t.map.removeLayer(s.instance)}},[t,s])}function Eg(s){return function(r){const a=Qc(),i=s(Tg(r,a),a);return Zb(a.map,r.attribution),Qb(i.current,r.eventHandlers),t5(i.current,a),i}}function s5(s,t){const r=Xh(s,t),a=Eg(r);return Ag(a)}function r5(s,t){const r=Xh(s,t),a=Eg(r);return Kb(a)}function n5(s,t,r){const{opacity:a,zIndex:i}=t;a!=null&&a!==r.opacity&&s.setOpacity(a),i!=null&&i!==r.zIndex&&s.setZIndex(i)}function a5(){return Qc().map}const i5=Xh(function({children:t,...r},a){const i=new Gl.Control.Layers(void 0,void 0,r);return Qh(i,Kh(a,{layersControl:i}))},function(t,r,a){r.collapsed!==a.collapsed&&(r.collapsed===!0?t.collapse():t.expand())}),o5=Jb(i5),Ml=Ag(o5);function Mg(s){return function(r){const a=Qc(),i=P.useRef(r),[l,d]=P.useState(null),{layersControl:u,map:h}=a,p=P.useCallback(N=>{u!=null&&(i.current.checked&&h.addLayer(N),s(u,N,i.current.name),d(N))},[u,h]),v=P.useCallback(N=>{u?.removeLayer(N),d(null)},[u]),y=P.useMemo(()=>Kh(a,{layerContainer:{addLayer:p,removeLayer:v}}),[a,p,v]);return P.useEffect(()=>{l!==null&&i.current!==r&&(r.checked===!0&&(i.current.checked==null||i.current.checked===!1)?h.addLayer(l):i.current.checked===!0&&(r.checked==null||r.checked===!1)&&h.removeLayer(l),i.current=r)}),r.children?Pc.createElement(Jh,{value:y},r.children):null}}Ml.BaseLayer=Mg(function(t,r,a){t.addBaseLayer(r,a)});Ml.Overlay=Mg(function(t,r,a){t.addOverlay(r,a)});function sh(){return sh=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},sh.apply(this,arguments)}function l5({bounds:s,boundsOptions:t,center:r,children:a,className:i,id:l,placeholder:d,style:u,whenReady:h,zoom:p,...v},y){const[N]=P.useState({className:i,id:l,style:u}),[g,C]=P.useState(null);P.useImperativeHandle(y,()=>g?.map??null,[g]);const j=P.useCallback(A=>{if(A!==null&&g===null){const S=new Gl.Map(A,v);r!=null&&p!=null?S.setView(r,p):s!=null&&S.fitBounds(s,t),h!=null&&S.whenReady(h),C(Yb(S))}},[]);P.useEffect(()=>()=>{g?.map.remove()},[g]);const T=g?Pc.createElement(Jh,{value:g},a):d??null;return Pc.createElement("div",sh({},N,{ref:j}),T)}const c5=P.forwardRef(l5),df=s5(function({position:t,...r},a){const i=new Gl.Marker(t,r);return Qh(i,Kh(a,{overlayContainer:i}))},function(t,r,a){r.position!==a.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==a.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==a.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==a.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==a.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),hf=r5(function({url:t,...r},a){const i=new Gl.TileLayer(t,Tg(r,a));return Qh(i,a)},function(t,r,a){n5(t,r,a);const{url:i}=r;i!=null&&i!==a.url&&t.setUrl(i)}),d5="modulepreload",h5=function(s){return"/"+s},uf={},rh=function(t,r,a){let i=Promise.resolve();if(r&&r.length>0){let h=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");i=h(r.map(p=>{if(p=h5(p),p in uf)return;uf[p]=!0;const v=p.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":d5,v||(N.as="script"),N.crossOrigin="",N.href=p,u&&N.setAttribute("nonce",u),document.head.appendChild(N),v)return new Promise((g,C)=>{N.addEventListener("load",g),N.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return i.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return t().catch(l)})};function js(s){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(s)}var Zr=Uint8Array,Rn=Uint16Array,eu=Int32Array,Xc=new Zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ed=new Zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nh=new Zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ig=function(s,t){for(var r=new Rn(31),a=0;a<31;++a)r[a]=t+=1<<s[a-1];for(var i=new eu(r[30]),a=1;a<30;++a)for(var l=r[a];l<r[a+1];++l)i[l]=l-r[a]<<5|a;return{b:r,r:i}},Rg=Ig(Xc,2),Og=Rg.b,ah=Rg.r;Og[28]=258,ah[258]=28;var Dg=Ig(ed,0),u5=Dg.b,ff=Dg.r,ih=new Rn(32768);for(var Ms=0;Ms<32768;++Ms){var wi=(Ms&43690)>>1|(Ms&21845)<<1;wi=(wi&52428)>>2|(wi&13107)<<2,wi=(wi&61680)>>4|(wi&3855)<<4,ih[Ms]=((wi&65280)>>8|(wi&255)<<8)>>1}var Fa=function(s,t,r){for(var a=s.length,i=0,l=new Rn(t);i<a;++i)s[i]&&++l[s[i]-1];var d=new Rn(t);for(i=1;i<t;++i)d[i]=d[i-1]+l[i-1]<<1;var u;if(r){u=new Rn(1<<t);var h=15-t;for(i=0;i<a;++i)if(s[i])for(var p=i<<4|s[i],v=t-s[i],y=d[s[i]-1]++<<v,N=y|(1<<v)-1;y<=N;++y)u[ih[y]>>h]=p}else for(u=new Rn(a),i=0;i<a;++i)s[i]&&(u[i]=ih[d[s[i]-1]++]>>15-s[i]);return u},Ri=new Zr(288);for(var Ms=0;Ms<144;++Ms)Ri[Ms]=8;for(var Ms=144;Ms<256;++Ms)Ri[Ms]=9;for(var Ms=256;Ms<280;++Ms)Ri[Ms]=7;for(var Ms=280;Ms<288;++Ms)Ri[Ms]=8;var ql=new Zr(32);for(var Ms=0;Ms<32;++Ms)ql[Ms]=5;var f5=Fa(Ri,9,0),m5=Fa(Ri,9,1),p5=Fa(ql,5,0),g5=Fa(ql,5,1),Cd=function(s){for(var t=s[0],r=1;r<s.length;++r)s[r]>t&&(t=s[r]);return t},la=function(s,t,r){var a=t/8|0;return(s[a]|s[a+1]<<8)>>(t&7)&r},Ld=function(s,t){var r=t/8|0;return(s[r]|s[r+1]<<8|s[r+2]<<16)>>(t&7)},tu=function(s){return(s+7)/8|0},Fg=function(s,t,r){return(r==null||r>s.length)&&(r=s.length),new Zr(s.subarray(t,r))},x5=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ha=function(s,t,r){var a=new Error(t||x5[s]);if(a.code=s,Error.captureStackTrace&&Error.captureStackTrace(a,ha),!r)throw a;return a},v5=function(s,t,r,a){var i=s.length,l=0;if(!i||t.f&&!t.l)return r||new Zr(0);var d=!r,u=d||t.i!=2,h=t.i;d&&(r=new Zr(i*3));var p=function(ie){var Te=r.length;if(ie>Te){var Q=new Zr(Math.max(Te*2,ie));Q.set(r),r=Q}},v=t.f||0,y=t.p||0,N=t.b||0,g=t.l,C=t.d,j=t.m,T=t.n,A=i*8;do{if(!g){v=la(s,y,1);var S=la(s,y+1,3);if(y+=3,S)if(S==1)g=m5,C=g5,j=9,T=5;else if(S==2){var ue=la(s,y,31)+257,le=la(s,y+10,15)+4,ee=ue+la(s,y+5,31)+1;y+=14;for(var te=new Zr(ee),we=new Zr(19),R=0;R<le;++R)we[nh[R]]=la(s,y+R*3,7);y+=le*3;for(var z=Cd(we),H=(1<<z)-1,B=Fa(we,z,1),R=0;R<ee;){var pe=B[la(s,y,H)];y+=pe&15;var q=pe>>4;if(q<16)te[R++]=q;else{var he=0,be=0;for(q==16?(be=3+la(s,y,3),y+=2,he=te[R-1]):q==17?(be=3+la(s,y,7),y+=3):q==18&&(be=11+la(s,y,127),y+=7);be--;)te[R++]=he}}var ne=te.subarray(0,ue),xe=te.subarray(ue);j=Cd(ne),T=Cd(xe),g=Fa(ne,j,1),C=Fa(xe,T,1)}else ha(1);else{var q=tu(y)+4,V=s[q-4]|s[q-3]<<8,Y=q+V;if(Y>i){h&&ha(0);break}u&&p(N+V),r.set(s.subarray(q,Y),N),t.b=N+=V,t.p=y=Y*8,t.f=v;continue}if(y>A){h&&ha(0);break}}u&&p(N+131072);for(var ae=(1<<j)-1,fe=(1<<T)-1,E=y;;E=y){var he=g[Ld(s,y)&ae],W=he>>4;if(y+=he&15,y>A){h&&ha(0);break}if(he||ha(2),W<256)r[N++]=W;else if(W==256){E=y,g=null;break}else{var Z=W-254;if(W>264){var R=W-257,X=Xc[R];Z=la(s,y,(1<<X)-1)+Og[R],y+=X}var re=C[Ld(s,y)&fe],de=re>>4;re||ha(3),y+=re&15;var xe=u5[de];if(de>3){var X=ed[de];xe+=Ld(s,y)&(1<<X)-1,y+=X}if(y>A){h&&ha(0);break}u&&p(N+131072);var Ne=N+Z;if(N<xe){var J=l-xe,oe=Math.min(xe,Ne);for(J+N<0&&ha(3);N<oe;++N)r[N]=a[J+N]}for(;N<Ne;++N)r[N]=r[N-xe]}}t.l=g,t.p=E,t.b=N,t.f=v,g&&(v=1,t.m=j,t.d=C,t.n=T)}while(!v);return N!=r.length&&d?Fg(r,0,N):r.subarray(0,N)},Ka=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8},kl=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8,s[a+2]|=r>>16},Ad=function(s,t){for(var r=[],a=0;a<s.length;++a)s[a]&&r.push({s:a,f:s[a]});var i=r.length,l=r.slice();if(!i)return{t:Bg,l:0};if(i==1){var d=new Zr(r[0].s+1);return d[r[0].s]=1,{t:d,l:1}}r.sort(function(Y,ue){return Y.f-ue.f}),r.push({s:-1,f:25001});var u=r[0],h=r[1],p=0,v=1,y=2;for(r[0]={s:-1,f:u.f+h.f,l:u,r:h};v!=i-1;)u=r[r[p].f<r[y].f?p++:y++],h=r[p!=v&&r[p].f<r[y].f?p++:y++],r[v++]={s:-1,f:u.f+h.f,l:u,r:h};for(var N=l[0].s,a=1;a<i;++a)l[a].s>N&&(N=l[a].s);var g=new Rn(N+1),C=oh(r[v-1],g,0);if(C>t){var a=0,j=0,T=C-t,A=1<<T;for(l.sort(function(ue,le){return g[le.s]-g[ue.s]||ue.f-le.f});a<i;++a){var S=l[a].s;if(g[S]>t)j+=A-(1<<C-g[S]),g[S]=t;else break}for(j>>=T;j>0;){var q=l[a].s;g[q]<t?j-=1<<t-g[q]++-1:++a}for(;a>=0&&j;--a){var V=l[a].s;g[V]==t&&(--g[V],++j)}C=t}return{t:new Zr(g),l:C}},oh=function(s,t,r){return s.s==-1?Math.max(oh(s.l,t,r+1),oh(s.r,t,r+1)):t[s.s]=r},mf=function(s){for(var t=s.length;t&&!s[--t];);for(var r=new Rn(++t),a=0,i=s[0],l=1,d=function(h){r[a++]=h},u=1;u<=t;++u)if(s[u]==i&&u!=t)++l;else{if(!i&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(i),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(i);l=1,i=s[u]}return{c:r.subarray(0,a),n:t}},Pl=function(s,t){for(var r=0,a=0;a<t.length;++a)r+=s[a]*t[a];return r},zg=function(s,t,r){var a=r.length,i=tu(t+2);s[i]=a&255,s[i+1]=a>>8,s[i+2]=s[i]^255,s[i+3]=s[i+1]^255;for(var l=0;l<a;++l)s[i+l+4]=r[l];return(i+4+a)*8},pf=function(s,t,r,a,i,l,d,u,h,p,v){Ka(t,v++,r),++i[256];for(var y=Ad(i,15),N=y.t,g=y.l,C=Ad(l,15),j=C.t,T=C.l,A=mf(N),S=A.c,q=A.n,V=mf(j),Y=V.c,ue=V.n,le=new Rn(19),ee=0;ee<S.length;++ee)++le[S[ee]&31];for(var ee=0;ee<Y.length;++ee)++le[Y[ee]&31];for(var te=Ad(le,7),we=te.t,R=te.l,z=19;z>4&&!we[nh[z-1]];--z);var H=p+5<<3,B=Pl(i,Ri)+Pl(l,ql)+d,pe=Pl(i,N)+Pl(l,j)+d+14+3*z+Pl(le,we)+2*le[16]+3*le[17]+7*le[18];if(h>=0&&H<=B&&H<=pe)return zg(t,v,s.subarray(h,h+p));var he,be,ne,xe;if(Ka(t,v,1+(pe<B)),v+=2,pe<B){he=Fa(N,g,0),be=N,ne=Fa(j,T,0),xe=j;var ae=Fa(we,R,0);Ka(t,v,q-257),Ka(t,v+5,ue-1),Ka(t,v+10,z-4),v+=14;for(var ee=0;ee<z;++ee)Ka(t,v+3*ee,we[nh[ee]]);v+=3*z;for(var fe=[S,Y],E=0;E<2;++E)for(var W=fe[E],ee=0;ee<W.length;++ee){var Z=W[ee]&31;Ka(t,v,ae[Z]),v+=we[Z],Z>15&&(Ka(t,v,W[ee]>>5&127),v+=W[ee]>>12)}}else he=f5,be=Ri,ne=p5,xe=ql;for(var ee=0;ee<u;++ee){var X=a[ee];if(X>255){var Z=X>>18&31;kl(t,v,he[Z+257]),v+=be[Z+257],Z>7&&(Ka(t,v,X>>23&31),v+=Xc[Z]);var re=X&31;kl(t,v,ne[re]),v+=xe[re],re>3&&(kl(t,v,X>>5&8191),v+=ed[re])}else kl(t,v,he[X]),v+=be[X]}return kl(t,v,he[256]),v+be[256]},y5=new eu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Bg=new Zr(0),b5=function(s,t,r,a,i,l){var d=l.z||s.length,u=new Zr(a+d+5*(1+Math.ceil(d/7e3))+i),h=u.subarray(a,u.length-i),p=l.l,v=(l.r||0)&7;if(t){v&&(h[0]=l.r>>3);for(var y=y5[t-1],N=y>>13,g=y&8191,C=(1<<r)-1,j=l.p||new Rn(32768),T=l.h||new Rn(C+1),A=Math.ceil(r/3),S=2*A,q=function(Ae){return(s[Ae]^s[Ae+1]<<A^s[Ae+2]<<S)&C},V=new eu(25e3),Y=new Rn(288),ue=new Rn(32),le=0,ee=0,te=l.i||0,we=0,R=l.w||0,z=0;te+2<d;++te){var H=q(te),B=te&32767,pe=T[H];if(j[B]=pe,T[H]=B,R<=te){var he=d-te;if((le>7e3||we>24576)&&(he>423||!p)){v=pf(s,h,0,V,Y,ue,ee,we,z,te-z,v),we=le=ee=0,z=te;for(var be=0;be<286;++be)Y[be]=0;for(var be=0;be<30;++be)ue[be]=0}var ne=2,xe=0,ae=g,fe=B-pe&32767;if(he>2&&H==q(te-fe))for(var E=Math.min(N,he)-1,W=Math.min(32767,te),Z=Math.min(258,he);fe<=W&&--ae&&B!=pe;){if(s[te+ne]==s[te+ne-fe]){for(var X=0;X<Z&&s[te+X]==s[te+X-fe];++X);if(X>ne){if(ne=X,xe=fe,X>E)break;for(var re=Math.min(fe,X-2),de=0,be=0;be<re;++be){var Ne=te-fe+be&32767,J=j[Ne],oe=Ne-J&32767;oe>de&&(de=oe,pe=Ne)}}}B=pe,pe=j[B],fe+=B-pe&32767}if(xe){V[we++]=268435456|ah[ne]<<18|ff[xe];var ie=ah[ne]&31,Te=ff[xe]&31;ee+=Xc[ie]+ed[Te],++Y[257+ie],++ue[Te],R=te+ne,++le}else V[we++]=s[te],++Y[s[te]]}}for(te=Math.max(te,R);te<d;++te)V[we++]=s[te],++Y[s[te]];v=pf(s,h,p,V,Y,ue,ee,we,z,te-z,v),p||(l.r=v&7|h[v/8|0]<<3,v-=7,l.h=T,l.p=j,l.i=te,l.w=R)}else{for(var te=l.w||0;te<d+p;te+=65535){var Q=te+65535;Q>=d&&(h[v/8|0]=p,Q=d),v=zg(h,v+1,s.subarray(te,Q))}l.i=d}return Fg(u,0,a+tu(v)+i)},qg=function(){var s=1,t=0;return{p:function(r){for(var a=s,i=t,l=r.length|0,d=0;d!=l;){for(var u=Math.min(d+2655,l);d<u;++d)i+=a+=r[d];a=(a&65535)+15*(a>>16),i=(i&65535)+15*(i>>16)}s=a,t=i},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},w5=function(s,t,r,a,i){if(!i&&(i={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),d=new Zr(l.length+s.length);d.set(l),d.set(s,l.length),s=d,i.w=l.length}return b5(s,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,r,a,i)},Hg=function(s,t,r){for(;r;++t)s[t]=r,r>>>=8},N5=function(s,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(s[0]=120,s[1]=a<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var i=qg();i.p(t.dictionary),Hg(s,2,i.d())}},j5=function(s,t){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&ha(6,"invalid zlib data"),(s[1]>>5&1)==1&&ha(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function lh(s,t){t||(t={});var r=qg();r.p(s);var a=w5(s,t,t.dictionary?6:2,4);return N5(a,t),Hg(a,a.length-4,r.d()),a}function _5(s,t){return v5(s.subarray(j5(s),-4),{i:2},t,t)}var S5=typeof TextDecoder<"u"&&new TextDecoder,k5=0;try{S5.decode(Bg,{stream:!0}),k5=1}catch{}var kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Td(){kt.console&&typeof kt.console.log=="function"&&kt.console.log.apply(kt.console,arguments)}var Ls={log:Td,warn:function(s){kt.console&&(typeof kt.console.warn=="function"?kt.console.warn.apply(kt.console,arguments):Td.call(null,arguments))},error:function(s){kt.console&&(typeof kt.console.error=="function"?kt.console.error.apply(kt.console,arguments):Td(s))}};function Ed(s,t,r){var a=new XMLHttpRequest;a.open("GET",s),a.responseType="blob",a.onload=function(){io(a.response,t,r)},a.onerror=function(){Ls.error("could not download file")},a.send()}function gf(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function mc(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var Il,ch,io=kt.saveAs||((typeof window>"u"?"undefined":js(window))!=="object"||window!==kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,t,r){var a=kt.URL||kt.webkitURL,i=document.createElement("a");t=t||s.name||"download",i.download=t,i.rel="noopener",typeof s=="string"?(i.href=s,i.origin!==location.origin?gf(i.href)?Ed(s,t,r):mc(i,i.target="_blank"):mc(i)):(i.href=a.createObjectURL(s),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){mc(i)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,r){if(t=t||s.name||"download",typeof s=="string")if(gf(s))Ed(s,t,r);else{var a=document.createElement("a");a.href=s,a.target="_blank",setTimeout(function(){mc(a)})}else navigator.msSaveOrOpenBlob(function(i,l){return l===void 0?l={autoBom:!1}:js(l)!=="object"&&(Ls.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(s,r),t)}:function(s,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof s=="string")return Ed(s,t,r);var i=s.type==="application/octet-stream",l=/constructor/i.test(kt.HTMLElement)||kt.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||i&&l)&&(typeof FileReader>"u"?"undefined":js(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var v=u.result;v=d?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=v:location=v,a=null},u.readAsDataURL(s)}else{var h=kt.URL||kt.webkitURL,p=h.createObjectURL(s);a?a.location=p:location.href=p,a=null,setTimeout(function(){h.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $g(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],a=0;a<r.length;a++){var i=r[a].re,l=r[a].process,d=i.exec(s);d&&(t=l(d),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),p=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),p.length==1&&(p="0"+p),"#"+u+h+p}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Md(s,t){var r=s[0],a=s[1],i=s[2],l=s[3];r=$r(r,a,i,l,t[0],7,-680876936),l=$r(l,r,a,i,t[1],12,-389564586),i=$r(i,l,r,a,t[2],17,606105819),a=$r(a,i,l,r,t[3],22,-1044525330),r=$r(r,a,i,l,t[4],7,-176418897),l=$r(l,r,a,i,t[5],12,1200080426),i=$r(i,l,r,a,t[6],17,-1473231341),a=$r(a,i,l,r,t[7],22,-45705983),r=$r(r,a,i,l,t[8],7,1770035416),l=$r(l,r,a,i,t[9],12,-1958414417),i=$r(i,l,r,a,t[10],17,-42063),a=$r(a,i,l,r,t[11],22,-1990404162),r=$r(r,a,i,l,t[12],7,1804603682),l=$r(l,r,a,i,t[13],12,-40341101),i=$r(i,l,r,a,t[14],17,-1502002290),r=Ur(r,a=$r(a,i,l,r,t[15],22,1236535329),i,l,t[1],5,-165796510),l=Ur(l,r,a,i,t[6],9,-1069501632),i=Ur(i,l,r,a,t[11],14,643717713),a=Ur(a,i,l,r,t[0],20,-373897302),r=Ur(r,a,i,l,t[5],5,-701558691),l=Ur(l,r,a,i,t[10],9,38016083),i=Ur(i,l,r,a,t[15],14,-660478335),a=Ur(a,i,l,r,t[4],20,-405537848),r=Ur(r,a,i,l,t[9],5,568446438),l=Ur(l,r,a,i,t[14],9,-1019803690),i=Ur(i,l,r,a,t[3],14,-187363961),a=Ur(a,i,l,r,t[8],20,1163531501),r=Ur(r,a,i,l,t[13],5,-1444681467),l=Ur(l,r,a,i,t[2],9,-51403784),i=Ur(i,l,r,a,t[7],14,1735328473),r=Wr(r,a=Ur(a,i,l,r,t[12],20,-1926607734),i,l,t[5],4,-378558),l=Wr(l,r,a,i,t[8],11,-2022574463),i=Wr(i,l,r,a,t[11],16,1839030562),a=Wr(a,i,l,r,t[14],23,-35309556),r=Wr(r,a,i,l,t[1],4,-1530992060),l=Wr(l,r,a,i,t[4],11,1272893353),i=Wr(i,l,r,a,t[7],16,-155497632),a=Wr(a,i,l,r,t[10],23,-1094730640),r=Wr(r,a,i,l,t[13],4,681279174),l=Wr(l,r,a,i,t[0],11,-358537222),i=Wr(i,l,r,a,t[3],16,-722521979),a=Wr(a,i,l,r,t[6],23,76029189),r=Wr(r,a,i,l,t[9],4,-640364487),l=Wr(l,r,a,i,t[12],11,-421815835),i=Wr(i,l,r,a,t[15],16,530742520),r=Vr(r,a=Wr(a,i,l,r,t[2],23,-995338651),i,l,t[0],6,-198630844),l=Vr(l,r,a,i,t[7],10,1126891415),i=Vr(i,l,r,a,t[14],15,-1416354905),a=Vr(a,i,l,r,t[5],21,-57434055),r=Vr(r,a,i,l,t[12],6,1700485571),l=Vr(l,r,a,i,t[3],10,-1894986606),i=Vr(i,l,r,a,t[10],15,-1051523),a=Vr(a,i,l,r,t[1],21,-2054922799),r=Vr(r,a,i,l,t[8],6,1873313359),l=Vr(l,r,a,i,t[15],10,-30611744),i=Vr(i,l,r,a,t[6],15,-1560198380),a=Vr(a,i,l,r,t[13],21,1309151649),r=Vr(r,a,i,l,t[4],6,-145523070),l=Vr(l,r,a,i,t[11],10,-1120210379),i=Vr(i,l,r,a,t[2],15,718787259),a=Vr(a,i,l,r,t[9],21,-343485551),s[0]=ki(r,s[0]),s[1]=ki(a,s[1]),s[2]=ki(i,s[2]),s[3]=ki(l,s[3])}function td(s,t,r,a,i,l){return t=ki(ki(t,s),ki(a,l)),ki(t<<i|t>>>32-i,r)}function $r(s,t,r,a,i,l,d){return td(t&r|~t&a,s,t,i,l,d)}function Ur(s,t,r,a,i,l,d){return td(t&a|r&~a,s,t,i,l,d)}function Wr(s,t,r,a,i,l,d){return td(t^r^a,s,t,i,l,d)}function Vr(s,t,r,a,i,l,d){return td(r^(t|~a),s,t,i,l,d)}function Ug(s){var t,r=s.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)Md(a,P5(s.substring(t-64,t)));s=s.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)i[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Md(a,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,Md(a,i),a}function P5(s){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return r}Il=kt.atob.bind(kt),ch=kt.btoa.bind(kt);var xf="0123456789abcdef".split("");function C5(s){for(var t="",r=0;r<4;r++)t+=xf[s>>8*r+4&15]+xf[s>>8*r&15];return t}function L5(s){return String.fromCharCode((255&s)>>0,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function dh(s){return Ug(s).map(L5).join("")}var A5=function(s){for(var t=0;t<s.length;t++)s[t]=C5(s[t]);return s.join("")}(Ug("hello"))!="5d41402abc4b2a76b9719d911017c592";function ki(s,t){if(A5){var r=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(r>>16)<<16|65535&r}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function hh(s,t){var r,a,i,l;if(s!==r){for(var d=(i=s,l=1+(256/s.length>>0),new Array(l+1).join(i)),u=[],h=0;h<256;h++)u[h]=h;var p=0;for(h=0;h<256;h++){var v=u[h];p=(p+v+d.charCodeAt(h))%256,u[h]=u[p],u[p]=v}r=s,a=u}else u=a;var y=t.length,N=0,g=0,C="";for(h=0;h<y;h++)g=(g+(v=u[N=(N+1)%256]))%256,u[N]=u[g],u[g]=v,d=u[(u[N]+u[g])%256],C+=String.fromCharCode(t.charCodeAt(h)^d);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vf={print:4,modify:8,copy:16,"annot-forms":32};function Vo(s,t,r,a){this.v=1,this.r=2;var i=192;s.forEach(function(u){if(vf.perm!==void 0)throw new Error("Invalid permission: "+u);i+=vf[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(t+this.padding).substr(0,32),d=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^i)),this.encryptionKey=dh(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=hh(this.encryptionKey,this.padding)}function Zo(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",r=s.length,a=0;a<r;a++){var i=s.charCodeAt(a);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=s[a]}return t}function yf(s){if(js(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,i){if(i=i||!1,typeof r!="string"||typeof a!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var l=Math.random().toString(35);return t[r][l]=[a,!!i],l},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),i=[];for(var l in t[r]){var d=t[r][l];try{d[0].apply(s,a)}catch(u){kt.console&&Ls.error("jsPDF PubSub Error",u.message,u)}d[1]&&i.push(l)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Oc(s){if(!(this instanceof Oc))return new Oc(s);var t="opacity,stroke-opacity".split(",");for(var r in s)s.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=s[r]);this.id="",this.objectNumber=-1}function Wg(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function oo(s,t,r,a,i){if(!(this instanceof oo))return new oo(s,t,r,a,i);this.type=s==="axial"?2:3,this.coords=t,this.colors=r,Wg.call(this,a,i)}function Go(s,t,r,a,i){if(!(this instanceof Go))return new Go(s,t,r,a,i);this.boundingBox=s,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Wg.call(this,a,i)}function Nt(s){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],i=arguments[2],l=arguments[3],d=[],u=1,h=16,p="S",v=null;js(s=s||{})==="object"&&(r=s.orientation,a=s.unit||a,i=s.format||i,l=s.compress||s.compressPdf||l,(v=s.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),u=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(h=s.floatPrecision),p=s.defaultPathOperation||"S"),d=s.filters||(l===!0?["FlateEncode"]:d),a=a||"mm",r=(""+(r||"P")).toLowerCase();var y=s.putOnlyUsedFonts||!1,N={},g={internal:{},__private__:{}};g.__private__.PubSub=yf;var C="1.3",j=g.__private__.getPdfVersion=function(){return C};g.__private__.setPdfVersion=function(x){C=x};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return T};var A=g.__private__.getPageFormat=function(x){return T[x]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},q=S.COMPAT;function V(){this.saveGraphicsState(),G(new vt(Ge,0,0,-Ge,0,Na()*Ge).toString()+" cm"),this.setFontSize(this.getFontSize()/Ge),p="n",q=S.ADVANCED}function Y(){this.restoreGraphicsState(),p="S",q=S.COMPAT}var ue=g.__private__.combineFontStyleAndFontWeight=function(x,I){if(x=="bold"&&I=="normal"||x=="bold"&&I==400||x=="normal"&&I=="italic"||x=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(x=I==400||I==="normal"?x==="italic"?"italic":"normal":I!=700&&I!=="bold"||x!=="normal"?(I==700?"bold":I)+""+x:"bold"),x};g.advancedAPI=function(x){var I=q===S.COMPAT;return I&&V.call(this),typeof x!="function"||(x(this),I&&Y.call(this)),this},g.compatAPI=function(x){var I=q===S.ADVANCED;return I&&Y.call(this),typeof x!="function"||(x(this),I&&V.call(this)),this},g.isAdvancedAPI=function(){return q===S.ADVANCED};var le,ee=function(x){if(q!==S.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},te=g.roundToPrecision=g.__private__.roundToPrecision=function(x,I){var se=t||I;if(isNaN(x)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(se).replace(/0+$/,"")};le=g.hpf=g.__private__.hpf=typeof h=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return te(x,h)}:h==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return te(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return te(x,16)};var we=g.f2=g.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return te(x,2)},R=g.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return te(x,3)},z=g.scale=g.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return q===S.COMPAT?x*Ge:q===S.ADVANCED?x:void 0},H=function(x){return q===S.COMPAT?Na()-x:q===S.ADVANCED?x:void 0},B=function(x){return z(H(x))};g.__private__.setPrecision=g.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var pe,he="00000000000000000000000000000000",be=g.__private__.getFileId=function(){return he},ne=g.__private__.setFileId=function(x){return he=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Ks=new Vo(v.userPermissions,v.userPassword,v.ownerPassword,he)),he};g.setFileId=function(x){return ne(x),this},g.getFileId=function(){return be()};var xe=g.__private__.convertDateToPDFDate=function(x){var I=x.getTimezoneOffset(),se=I<0?"+":"-",me=Math.floor(Math.abs(I/60)),ke=Math.abs(I%60),Ie=[se,Z(me),"'",Z(ke),"'"].join("");return["D:",x.getFullYear(),Z(x.getMonth()+1),Z(x.getDate()),Z(x.getHours()),Z(x.getMinutes()),Z(x.getSeconds()),Ie].join("")},ae=g.__private__.convertPDFDateToDate=function(x){var I=parseInt(x.substr(2,4),10),se=parseInt(x.substr(6,2),10)-1,me=parseInt(x.substr(8,2),10),ke=parseInt(x.substr(10,2),10),Ie=parseInt(x.substr(12,2),10),$e=parseInt(x.substr(14,2),10);return new Date(I,se,me,ke,Ie,$e,0)},fe=g.__private__.setCreationDate=function(x){var I;if(x===void 0&&(x=new Date),x instanceof Date)I=xe(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=x}return pe=I},E=g.__private__.getCreationDate=function(x){var I=pe;return x==="jsDate"&&(I=ae(pe)),I};g.setCreationDate=function(x){return fe(x),this},g.getCreationDate=function(x){return E(x)};var W,Z=g.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},X=g.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},re=0,de=[],Ne=[],J=0,oe=[],ie=[],Te=!1,Q=Ne,Ae=function(){re=0,J=0,Ne=[],de=[],oe=[],Kr=Ye(),wr=Ye()};g.__private__.setCustomOutputDestination=function(x){Te=!0,Q=x};var ge=function(x){Te||(Q=x)};g.__private__.resetCustomOutputDestination=function(){Te=!1,Q=Ne};var G=g.__private__.out=function(x){return x=x.toString(),J+=x.length+1,Q.push(x),Q},We=g.__private__.write=function(x){return G(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},et=g.__private__.getArrayBuffer=function(x){for(var I=x.length,se=new ArrayBuffer(I),me=new Uint8Array(se);I--;)me[I]=x.charCodeAt(I);return se},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Fe};var Ve=s.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(x){return Ve=q===S.ADVANCED?x/Ge:x,this};var Je,Ze=g.__private__.getFontSize=g.getFontSize=function(){return q===S.COMPAT?Ve:Ve*Ge},ot=s.R2L||!1;g.__private__.setR2L=g.setR2L=function(x){return ot=x,this},g.__private__.getR2L=g.getR2L=function(){return ot};var wt,Pt=g.__private__.setZoomMode=function(x){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Je=x;else if(isNaN(x)){if(I.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Je=x}else Je=parseInt(x,10)};g.__private__.getZoomMode=function(){return Je};var Tt,zt=g.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');wt=x};g.__private__.getPageMode=function(){return wt};var ns=g.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');Tt=x};g.__private__.getLayoutMode=function(){return Tt},g.__private__.setDisplayMode=g.setDisplayMode=function(x,I,se){return Pt(x),ns(I),zt(se),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(x){if(Object.keys(ft).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[x]},g.__private__.getDocumentProperties=function(){return ft},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(x){for(var I in ft)ft.hasOwnProperty(I)&&x[I]&&(ft[I]=x[I]);return this},g.__private__.setDocumentProperty=function(x,I){if(Object.keys(ft).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[x]=I};var Ct,Ge,rr,Zt,xr,is={},os={},vr=[],Kt={},Yn={},_s={},Dr={},dn=null,As=0,Lt=[],ts=new yf(g),Kn=s.hotfixes||[],Os={},Fr={},qs=[],vt=function x(I,se,me,ke,Ie,$e){if(!(this instanceof x))return new x(I,se,me,ke,Ie,$e);isNaN(I)&&(I=1),isNaN(se)&&(se=0),isNaN(me)&&(me=0),isNaN(ke)&&(ke=1),isNaN(Ie)&&(Ie=0),isNaN($e)&&($e=0),this._matrix=[I,se,me,ke,Ie,$e]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(le).join(x)},vt.prototype.multiply=function(x){var I=x.sx*this.sx+x.shy*this.shx,se=x.sx*this.shy+x.shy*this.sy,me=x.shx*this.sx+x.sy*this.shx,ke=x.shx*this.shy+x.sy*this.sy,Ie=x.tx*this.sx+x.ty*this.shx+this.tx,$e=x.tx*this.shy+x.ty*this.sy+this.ty;return new vt(I,se,me,ke,Ie,$e)},vt.prototype.decompose=function(){var x=this.sx,I=this.shy,se=this.shx,me=this.sy,ke=this.tx,Ie=this.ty,$e=Math.sqrt(x*x+I*I),Qe=(x/=$e)*se+(I/=$e)*me;se-=x*Qe,me-=I*Qe;var at=Math.sqrt(se*se+me*me);return Qe/=at,x*(me/=at)<I*(se/=at)&&(x=-x,I=-I,Qe=-Qe,$e=-$e),{scale:new vt($e,0,0,at,0,0),translate:new vt(1,0,0,1,ke,Ie),rotate:new vt(x,I,-I,x,0,0),skew:new vt(1,0,Qe,1,0,0)}},vt.prototype.toString=function(x){return this.join(" ")},vt.prototype.inversed=function(){var x=this.sx,I=this.shy,se=this.shx,me=this.sy,ke=this.tx,Ie=this.ty,$e=1/(x*me-I*se),Qe=me*$e,at=-I*$e,Rt=-se*$e,Mt=x*$e;return new vt(Qe,at,Rt,Mt,-Qe*ke-Rt*Ie,-at*ke-Mt*Ie)},vt.prototype.applyToPoint=function(x){var I=x.x*this.sx+x.y*this.shx+this.tx,se=x.x*this.shy+x.y*this.sy+this.ty;return new Wa(I,se)},vt.prototype.applyToRectangle=function(x){var I=this.applyToPoint(x),se=this.applyToPoint(new Wa(x.x+x.w,x.y+x.h));return new xn(I.x,I.y,se.x-I.x,se.y-I.y)},vt.prototype.clone=function(){var x=this.sx,I=this.shy,se=this.shx,me=this.sy,ke=this.tx,Ie=this.ty;return new vt(x,I,se,me,ke,Ie)},g.Matrix=vt;var Yr=g.matrixMult=function(x,I){return I.multiply(x)},hn=new vt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=hn;var yr=function(x,I){if(!Yn[x]){var se=(I instanceof oo?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);I.id=se,Yn[x]=se,Kt[se]=I,ts.publish("addPattern",I)}};g.ShadingPattern=oo,g.TilingPattern=Go,g.addShadingPattern=function(x,I){return ee("addShadingPattern()"),yr(x,I),this},g.beginTilingPattern=function(x){ee("beginTilingPattern()"),Zi(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},g.endTilingPattern=function(x,I){ee("endTilingPattern()"),I.stream=ie[W].join(`
`),yr(x,I),ts.publish("endTilingPattern",I),qs.pop().restore()};var ls=g.__private__.newObject=function(){var x=Ye();return br(x,!0),x},Ye=g.__private__.newObjectDeferred=function(){return re++,de[re]=function(){return J},re},br=function(x,I){return I=typeof I=="boolean"&&I,de[x]=J,I&&G(x+" 0 obj"),x},On=g.__private__.newAdditionalObject=function(){var x={objId:Ye(),content:""};return oe.push(x),x},Kr=Ye(),wr=Ye(),Ar=g.__private__.decodeColorString=function(x){var I=x.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var se=parseFloat(I[0]);I=[se,se,se,"r"]}for(var me="#",ke=0;ke<3;ke++)me+=("0"+Math.floor(255*parseFloat(I[ke])).toString(16)).slice(-2);return me},_e=g.__private__.encodeColorString=function(x){var I;typeof x=="string"&&(x={ch1:x});var se=x.ch1,me=x.ch2,ke=x.ch3,Ie=x.ch4,$e=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var Qe=new $g(se);if(Qe.ok)se=Qe.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var at=parseInt(se.substr(1),16);se=at>>16&255,me=at>>8&255,ke=255&at}if(me===void 0||Ie===void 0&&se===me&&me===ke)if(typeof se=="string")I=se+" "+$e[0];else switch(x.precision){case 2:I=we(se/255)+" "+$e[0];break;case 3:default:I=R(se/255)+" "+$e[0]}else if(Ie===void 0||js(Ie)==="object"){if(Ie&&!isNaN(Ie.a)&&Ie.a===0)return I=["1.","1.","1.",$e[1]].join(" ");if(typeof se=="string")I=[se,me,ke,$e[1]].join(" ");else switch(x.precision){case 2:I=[we(se/255),we(me/255),we(ke/255),$e[1]].join(" ");break;default:case 3:I=[R(se/255),R(me/255),R(ke/255),$e[1]].join(" ")}}else if(typeof se=="string")I=[se,me,ke,Ie,$e[2]].join(" ");else switch(x.precision){case 2:I=[we(se),we(me),we(ke),we(Ie),$e[2]].join(" ");break;case 3:default:I=[R(se),R(me),R(ke),R(Ie),$e[2]].join(" ")}return I},Oe=g.__private__.getFilters=function(){return d},Ue=g.__private__.putStream=function(x){var I=(x=x||{}).data||"",se=x.filters||Oe(),me=x.alreadyAppliedFilters||[],ke=x.addLength1||!1,Ie=I.length,$e=x.objectId,Qe=function(jr){return jr};if(v!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(Qe=Ks.encryptor($e,0));var at={};se===!0&&(se=["FlateEncode"]);var Rt=x.additionalKeyValues||[],Mt=(at=Nt.API.processDataByFilters!==void 0?Nt.API.processDataByFilters(I,se):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(at.data.length!==0&&(Rt.push({key:"Length",value:at.data.length}),ke===!0&&Rt.push({key:"Length1",value:Ie})),Mt.length!=0)if(Mt.split("/").length-1==1)Rt.push({key:"Filter",value:Mt});else{Rt.push({key:"Filter",value:"["+Mt+"]"});for(var Xt=0;Xt<Rt.length;Xt+=1)if(Rt[Xt].key==="DecodeParms"){for(var Ps=[],Ts=0;Ts<at.reverseChain.split("/").length-1;Ts+=1)Ps.push("null");Ps.push(Rt[Xt].value),Rt[Xt].value="["+Ps.join(" ")+"]"}}G("<<");for(var $s=0;$s<Rt.length;$s++)G("/"+Rt[$s].key+" "+Rt[$s].value);G(">>"),at.data.length!==0&&(G("stream"),G(Qe(at.data)),G("endstream"))},nt=g.__private__.putPage=function(x){var I=x.number,se=x.data,me=x.objId,ke=x.contentsObjId;br(me,!0),G("<</Type /Page"),G("/Parent "+x.rootDictionaryObjId+" 0 R"),G("/Resources "+x.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(le(x.mediaBox.bottomLeftX))+" "+parseFloat(le(x.mediaBox.bottomLeftY))+" "+le(x.mediaBox.topRightX)+" "+le(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&G("/CropBox ["+le(x.cropBox.bottomLeftX)+" "+le(x.cropBox.bottomLeftY)+" "+le(x.cropBox.topRightX)+" "+le(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&G("/BleedBox ["+le(x.bleedBox.bottomLeftX)+" "+le(x.bleedBox.bottomLeftY)+" "+le(x.bleedBox.topRightX)+" "+le(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&G("/TrimBox ["+le(x.trimBox.bottomLeftX)+" "+le(x.trimBox.bottomLeftY)+" "+le(x.trimBox.topRightX)+" "+le(x.trimBox.topRightY)+"]"),x.artBox!==null&&G("/ArtBox ["+le(x.artBox.bottomLeftX)+" "+le(x.artBox.bottomLeftY)+" "+le(x.artBox.topRightX)+" "+le(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&G("/UserUnit "+x.userUnit),ts.publish("putPage",{objId:me,pageContext:Lt[I],pageNumber:I,page:se}),G("/Contents "+ke+" 0 R"),G(">>"),G("endobj");var Ie=se.join(`
`);return q===S.ADVANCED&&(Ie+=`
Q`),br(ke,!0),Ue({data:Ie,filters:Oe(),objectId:ke}),G("endobj"),me},bt=g.__private__.putPages=function(){var x,I,se=[];for(x=1;x<=As;x++)Lt[x].objId=Ye(),Lt[x].contentsObjId=Ye();for(x=1;x<=As;x++)se.push(nt({number:x,data:ie[x],objId:Lt[x].objId,contentsObjId:Lt[x].contentsObjId,mediaBox:Lt[x].mediaBox,cropBox:Lt[x].cropBox,bleedBox:Lt[x].bleedBox,trimBox:Lt[x].trimBox,artBox:Lt[x].artBox,userUnit:Lt[x].userUnit,rootDictionaryObjId:Kr,resourceDictionaryObjId:wr}));br(Kr,!0),G("<</Type /Pages");var me="/Kids [";for(I=0;I<As;I++)me+=se[I]+" 0 R ";G(me+"]"),G("/Count "+As),G(">>"),G("endobj"),ts.publish("postPutPages")},Ht=function(x){ts.publish("putFont",{font:x,out:G,newObject:ls,putStream:Ue}),x.isAlreadyPutted!==!0&&(x.objectNumber=ls(),G("<<"),G("/Type /Font"),G("/BaseFont /"+Zo(x.postScriptName)),G("/Subtype /Type1"),typeof x.encoding=="string"&&G("/Encoding /"+x.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},mt=function(){for(var x in is)is.hasOwnProperty(x)&&(y===!1||y===!0&&N.hasOwnProperty(x))&&Ht(is[x])},jt=function(x){x.objectNumber=ls();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[le(x.x),le(x.y),le(x.x+x.width),le(x.y+x.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var se=x.pages[1].join(`
`);Ue({data:se,additionalKeyValues:I,objectId:x.objectNumber}),G("endobj")},At=function(){for(var x in Os)Os.hasOwnProperty(x)&&jt(Os[x])},$t=function(x,I){var se,me=[],ke=1/(I-1);for(se=0;se<1;se+=ke)me.push(se);if(me.push(1),x[0].offset!=0){var Ie={offset:0,color:x[0].color};x.unshift(Ie)}if(x[x.length-1].offset!=1){var $e={offset:1,color:x[x.length-1].color};x.push($e)}for(var Qe="",at=0,Rt=0;Rt<me.length;Rt++){for(se=me[Rt];se>x[at+1].offset;)at++;var Mt=x[at].offset,Xt=(se-Mt)/(x[at+1].offset-Mt),Ps=x[at].color,Ts=x[at+1].color;Qe+=X(Math.round((1-Xt)*Ps[0]+Xt*Ts[0]).toString(16))+X(Math.round((1-Xt)*Ps[1]+Xt*Ts[1]).toString(16))+X(Math.round((1-Xt)*Ps[2]+Xt*Ts[2]).toString(16))}return Qe.trim()},Ot=function(x,I){I||(I=21);var se=ls(),me=$t(x.colors,I),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+I+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ue({data:me,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),G("endobj"),x.objectNumber=ls(),G("<< /ShadingType "+x.type),G("/ColorSpace /DeviceRGB");var Ie="/Coords ["+le(parseFloat(x.coords[0]))+" "+le(parseFloat(x.coords[1]))+" ";x.type===2?Ie+=le(parseFloat(x.coords[2]))+" "+le(parseFloat(x.coords[3])):Ie+=le(parseFloat(x.coords[2]))+" "+le(parseFloat(x.coords[3]))+" "+le(parseFloat(x.coords[4]))+" "+le(parseFloat(x.coords[5])),G(Ie+="]"),x.matrix&&G("/Matrix ["+x.matrix.toString()+"]"),G("/Function "+se+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},_t=function(x,I){var se=Ye(),me=ls();I.push({resourcesOid:se,objectOid:me}),x.objectNumber=me;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+x.boundingBox.map(le).join(" ")+"]"}),ke.push({key:"XStep",value:le(x.xStep)}),ke.push({key:"YStep",value:le(x.yStep)}),ke.push({key:"Resources",value:se+" 0 R"}),x.matrix&&ke.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),Ue({data:x.stream,additionalKeyValues:ke,objectId:x.objectNumber}),G("endobj")},dt=function(x){var I;for(I in Kt)Kt.hasOwnProperty(I)&&(Kt[I]instanceof oo?Ot(Kt[I]):Kt[I]instanceof Go&&_t(Kt[I],x))},cs=function(x){for(var I in x.objectNumber=ls(),G("<<"),x)switch(I){case"opacity":G("/ca "+we(x[I]));break;case"stroke-opacity":G("/CA "+we(x[I]))}G(">>"),G("endobj")},ms=function(){var x;for(x in _s)_s.hasOwnProperty(x)&&cs(_s[x])},Gs=function(){for(var x in G("/XObject <<"),Os)Os.hasOwnProperty(x)&&Os[x].objectNumber>=0&&G("/"+x+" "+Os[x].objectNumber+" 0 R");ts.publish("putXobjectDict"),G(">>")},Nr=function(){Ks.oid=ls(),G("<<"),G("/Filter /Standard"),G("/V "+Ks.v),G("/R "+Ks.r),G("/U <"+Ks.toHexString(Ks.U)+">"),G("/O <"+Ks.toHexString(Ks.O)+">"),G("/P "+Ks.P),G(">>"),G("endobj")},Bt=function(){for(var x in G("/Font <<"),is)is.hasOwnProperty(x)&&(y===!1||y===!0&&N.hasOwnProperty(x))&&G("/"+x+" "+is[x].objectNumber+" 0 R");G(">>")},Jt=function(){if(Object.keys(Kt).length>0){for(var x in G("/Shading <<"),Kt)Kt.hasOwnProperty(x)&&Kt[x]instanceof oo&&Kt[x].objectNumber>=0&&G("/"+x+" "+Kt[x].objectNumber+" 0 R");ts.publish("putShadingPatternDict"),G(">>")}},Qt=function(x){if(Object.keys(Kt).length>0){for(var I in G("/Pattern <<"),Kt)Kt.hasOwnProperty(I)&&Kt[I]instanceof g.TilingPattern&&Kt[I].objectNumber>=0&&Kt[I].objectNumber<x&&G("/"+I+" "+Kt[I].objectNumber+" 0 R");ts.publish("putTilingPatternDict"),G(">>")}},Wt=function(){if(Object.keys(_s).length>0){var x;for(x in G("/ExtGState <<"),_s)_s.hasOwnProperty(x)&&_s[x].objectNumber>=0&&G("/"+x+" "+_s[x].objectNumber+" 0 R");ts.publish("putGStateDict"),G(">>")}},pt=function(x){br(x.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Bt(),Jt(),Qt(x.objectOid),Wt(),Gs(),G(">>"),G("endobj")},Dn=function(){var x=[];mt(),ms(),At(),dt(x),ts.publish("putResources"),x.forEach(pt),pt({resourcesOid:wr,objectOid:Number.MAX_SAFE_INTEGER}),ts.publish("postPutResources")},un=function(){ts.publish("putAdditionalObjects");for(var x=0;x<oe.length;x++){var I=oe[x];br(I.objId,!0),G(I.content),G("endobj")}ts.publish("postPutAdditionalObjects")},fn=function(x){os[x.fontName]=os[x.fontName]||{},os[x.fontName][x.fontStyle]=x.id},mn=function(x,I,se,me,ke){var Ie={id:"F"+(Object.keys(is).length+1).toString(10),postScriptName:x,fontName:I,fontStyle:se,encoding:me,isStandardFont:ke||!1,metadata:{}};return ts.publish("addFont",{font:Ie,instance:this}),is[Ie.id]=Ie,fn(Ie),Ie.id},St=function(x){for(var I=0,se=Fe.length;I<se;I++){var me=mn.call(this,x[I][0],x[I][1],x[I][2],Fe[I][3],!0);y===!1&&(N[me]=!0);var ke=x[I][0].split("-");fn({id:me,fontName:ke[0],fontStyle:ke[1]||""})}ts.publish("addFonts",{fonts:is,dictionary:os})},Dt=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(me){var I=me.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var se="Error in function "+I.split(`
`)[0].split("<")[0]+": "+me.message;if(!kt.console)throw new Error(se);kt.console.error(se,me),kt.alert&&alert(se)}},x.foo.bar=x,x.foo},cr=function(x,I){var se,me,ke,Ie,$e,Qe,at,Rt,Mt;if(ke=(I=I||{}).sourceEncoding||"Unicode",$e=I.outputEncoding,(I.autoencode||$e)&&is[Ct].metadata&&is[Ct].metadata[ke]&&is[Ct].metadata[ke].encoding&&(Ie=is[Ct].metadata[ke].encoding,!$e&&is[Ct].encoding&&($e=is[Ct].encoding),!$e&&Ie.codePages&&($e=Ie.codePages[0]),typeof $e=="string"&&($e=Ie[$e]),$e)){for(at=!1,Qe=[],se=0,me=x.length;se<me;se++)(Rt=$e[x.charCodeAt(se)])?Qe.push(String.fromCharCode(Rt)):Qe.push(x[se]),Qe[se].charCodeAt(0)>>8&&(at=!0);x=Qe.join("")}for(se=x.length;at===void 0&&se!==0;)x.charCodeAt(se-1)>>8&&(at=!0),se--;if(!at)return x;for(Qe=I.noBOM?[]:[254,255],se=0,me=x.length;se<me;se++){if((Mt=(Rt=x.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(Mt),Qe.push(Rt-(Mt<<8))}return String.fromCharCode.apply(void 0,Qe)},Ys=g.__private__.pdfEscape=g.pdfEscape=function(x,I){return cr(x,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nr=g.__private__.beginPage=function(x){ie[++As]=[],Lt[As]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},pn(As),ge(ie[W])},Jn=function(x,I){var se,me,ke;switch(r=I||r,typeof x=="string"&&(se=A(x.toLowerCase()),Array.isArray(se)&&(me=se[0],ke=se[1])),Array.isArray(x)&&(me=x[0]*Ge,ke=x[1]*Ge),isNaN(me)&&(me=i[0],ke=i[1]),(me>14400||ke>14400)&&(Ls.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),ke=Math.min(14400,ke)),i=[me,ke],r.substr(0,1)){case"l":ke>me&&(i=[ke,me]);break;case"p":me>ke&&(i=[ke,me])}nr(i),ko(ri),G(Xr),Vi!==0&&G(Vi+" J"),zr!==0&&G(zr+" j"),ts.publish("addPage",{pageNumber:As})},pa=function(x){x>0&&x<=As&&(ie.splice(x,1),Lt.splice(x,1),As--,W>As&&(W=As),this.setPage(W))},pn=function(x){x>0&&x<=As&&(W=x)},Is=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ie.length-1},Fn=function(x,I,se){var me,ke=void 0;return se=se||{},x=x!==void 0?x:is[Ct].fontName,I=I!==void 0?I:is[Ct].fontStyle,me=x.toLowerCase(),os[me]!==void 0&&os[me][I]!==void 0?ke=os[me][I]:os[x]!==void 0&&os[x][I]!==void 0?ke=os[x][I]:se.disableWarning===!1&&Ls.warn("Unable to look up font label for font '"+x+"', '"+I+"'. Refer to getFontList() for available fonts."),ke||se.noFallback||(ke=os.times[I])==null&&(ke=os.times.normal),ke},Ba=g.__private__.putInfo=function(){var x=ls(),I=function(me){return me};for(var se in v!==null&&(I=Ks.encryptor(x,0)),G("<<"),G("/Producer ("+Ys(I("jsPDF "+Nt.version))+")"),ft)ft.hasOwnProperty(se)&&ft[se]&&G("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+Ys(I(ft[se]))+")");G("/CreationDate ("+Ys(I(pe))+")"),G(">>"),G("endobj")},Qn=g.__private__.putCatalog=function(x){var I=(x=x||{}).rootDictionaryObjId||Kr;switch(ls(),G("<<"),G("/Type /Catalog"),G("/Pages "+I+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+Je;se.substr(se.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&G("/OpenAction [3 0 R /XYZ null null "+we(Je)+"]")}switch(Tt||(Tt="continuous"),Tt){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}wt&&G("/PageMode /"+wt),ts.publish("putCatalog"),G(">>"),G("endobj")},zi=g.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(re+1)),G("/Root "+re+" 0 R"),G("/Info "+(re-1)+" 0 R"),v!==null&&G("/Encrypt "+Ks.oid+" 0 R"),G("/ID [ <"+he+"> <"+he+"> ]"),G(">>")},qa=g.__private__.putHeader=function(){G("%PDF-"+C),G("%ºß¬à")},Bi=g.__private__.putXRef=function(){var x="0000000000";G("xref"),G("0 "+(re+1)),G("0000000000 65535 f ");for(var I=1;I<=re;I++)typeof de[I]=="function"?G((x+de[I]()).slice(-10)+" 00000 n "):de[I]!==void 0?G((x+de[I]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},Pn=g.__private__.buildDocument=function(){Ae(),ge(Ne),ts.publish("buildDocument"),qa(),bt(),un(),Dn(),v!==null&&Nr(),Ba(),Qn();var x=J;return Bi(),zi(),G("startxref"),G(""+x),G("%%EOF"),ge(ie[W]),Ne.join(`
`)},Xn=g.__private__.getBlob=function(x){return new Blob([et(x)],{type:"application/pdf"})},ga=g.output=g.__private__.output=Dt(function(x,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",x){case void 0:return Pn();case"save":g.save(I.filename);break;case"arraybuffer":return et(Pn());case"blob":return Xn(Pn());case"bloburi":case"bloburl":if(kt.URL!==void 0&&typeof kt.URL.createObjectURL=="function")return kt.URL&&kt.URL.createObjectURL(Xn(Pn()))||void 0;Ls.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",me=Pn();try{se=ch(me)}catch{se=ch(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+I.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ie=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(ke=I.pdfObjectUrl,Ie="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Ie+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",Qe=kt.open();return Qe!==null&&Qe.document.write($e),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Rt=kt.open();if(Rt!==null){Rt.document.write(at);var Mt=this;Rt.document.documentElement.querySelector("#pdfViewer").onload=function(){Rt.document.title=I.filename,Rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mt.output("bloburl"))}}return Rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Ps=kt.open();if(Ps!==null&&(Ps.document.write(Xt),Ps.document.title=I.filename),Ps||typeof safari>"u")return Ps;break;case"datauri":case"dataurl":return kt.document.location.href=this.output("datauristring",I);default:return null}}),ei=function(x){return Array.isArray(Kn)===!0&&Kn.indexOf(x)>-1};switch(a){case"pt":Ge=1;break;case"mm":Ge=72/25.4;break;case"cm":Ge=72/2.54;break;case"in":Ge=72;break;case"px":Ge=ei("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ge=12;break;case"ex":Ge=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Ge=a}var Ks=null;fe(),ne();var _o=function(x){return v!==null?Ks.encryptor(x,0):function(I){return I}},ti=g.__private__.getPageInfo=g.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[x].objId,pageNumber:x,pageContext:Lt[x]}},Et=g.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in Lt)if(Lt[I].objId===x)break;return ti(I)},It=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Lt[W].objId,pageNumber:W,pageContext:Lt[W]}};g.addPage=function(){return Jn.apply(this,arguments),this},g.setPage=function(){return pn.apply(this,arguments),ge.call(this,ie[W]),this},g.insertPage=function(x){return this.addPage(),this.movePage(W,x),this},g.movePage=function(x,I){var se,me;if(x>I){se=ie[x],me=Lt[x];for(var ke=x;ke>I;ke--)ie[ke]=ie[ke-1],Lt[ke]=Lt[ke-1];ie[I]=se,Lt[I]=me,this.setPage(I)}else if(x<I){se=ie[x],me=Lt[x];for(var Ie=x;Ie<I;Ie++)ie[Ie]=ie[Ie+1],Lt[Ie]=Lt[Ie+1];ie[I]=se,Lt[I]=me,this.setPage(I)}return this},g.deletePage=function(){return pa.apply(this,arguments),this},g.__private__.text=g.text=function(x,I,se,me,ke){var Ie,$e,Qe,at,Rt,Mt,Xt,Ps,Ts,$s=(me=me||{}).scope||this;if(typeof x=="number"&&typeof I=="number"&&(typeof se=="string"||Array.isArray(se))){var jr=se;se=I,I=x,x=jr}if(arguments[3]instanceof vt?(ee("The transform parameter of text() with a Matrix value"),Ts=ke):(Qe=arguments[4],at=arguments[5],js(Xt=arguments[3])==="object"&&Xt!==null||(typeof Qe=="string"&&(at=Qe,Qe=null),typeof Xt=="string"&&(at=Xt,Xt=null),typeof Xt=="number"&&(Qe=Xt,Xt=null),me={flags:Xt,angle:Qe,align:at})),isNaN(I)||isNaN(se)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return $s;var Js="",Cn=!1,Es=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:Ua,Tr=$s.internal.scaleFactor;function Ao(ps){return ps=ps.split("	").join(Array(me.TabLen||9).join(" ")),Ys(ps,Xt)}function en(ps){for(var gs,zs=ps.concat(),xs=[],Hn=zs.length;Hn--;)typeof(gs=zs.shift())=="string"?xs.push(gs):Array.isArray(ps)&&(gs.length===1||gs[1]===void 0&&gs[2]===void 0)?xs.push(gs[0]):xs.push([gs[0],gs[1],gs[2]]);return xs}function Ki(ps,gs){var zs;if(typeof ps=="string")zs=gs(ps)[0];else if(Array.isArray(ps)){for(var xs,Hn,ui=ps.concat(),$n=[],Eo=ui.length;Eo--;)typeof(xs=ui.shift())=="string"?$n.push(gs(xs)[0]):Array.isArray(xs)&&typeof xs[0]=="string"&&(Hn=gs(xs[0],xs[1],xs[2]),$n.push([Hn[0],Hn[1],Hn[2]]));zs=$n}return zs}var Ln=!1,Ji=!0;if(typeof x=="string")Ln=!0;else if(Array.isArray(x)){var sa=x.concat();$e=[];for(var Va,Us=sa.length;Us--;)(typeof(Va=sa.shift())!="string"||Array.isArray(Va)&&typeof Va[0]!="string")&&(Ji=!1);Ln=Ji}if(Ln===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var li=Ve/$s.internal.scaleFactor,tn=li*(Es-1);switch(me.baseline){case"bottom":se-=tn;break;case"top":se+=li-tn;break;case"hanging":se+=li-2*tn;break;case"middle":se+=li/2-tn}if((Mt=me.maxWidth||0)>0&&(typeof x=="string"?x=$s.splitTextToSize(x,Mt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(ps,gs){return ps.concat($s.splitTextToSize(gs,Mt))},[]))),Ie={text:x,x:I,y:se,options:me,mutex:{pdfEscape:Ys,activeFontKey:Ct,fonts:is,activeFontSize:Ve}},ts.publish("preProcessText",Ie),x=Ie.text,Qe=(me=Ie.options).angle,!(Ts instanceof vt)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,me.rotationDirection===0&&(Qe=-Qe),q===S.ADVANCED&&(Qe=-Qe);var ra=Math.cos(Qe),Qi=Math.sin(Qe);Ts=new vt(ra,Qi,-Qi,ra,0,0)}else Qe&&Qe instanceof vt&&(Ts=Qe);q!==S.ADVANCED||Ts||(Ts=hn),(Rt=me.charSpace||ni)!==void 0&&(Js+=le(z(Rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ps=me.horizontalScale)!==void 0&&(Js+=le(100*Ps)+` Tz
`),me.lang;var _r=-1,xl=me.renderingMode!==void 0?me.renderingMode:me.stroke,sn=$s.internal.getCurrentPageInfo().pageContext;switch(xl){case 0:case!1:case"fill":_r=0;break;case 1:case!0:case"stroke":_r=1;break;case 2:case"fillThenStroke":_r=2;break;case 3:case"invisible":_r=3;break;case 4:case"fillAndAddForClipping":_r=4;break;case 5:case"strokeAndAddPathForClipping":_r=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":_r=6;break;case 7:case"addToPathForClipping":_r=7}var To=sn.usedRenderingMode!==void 0?sn.usedRenderingMode:-1;_r!==-1?Js+=_r+` Tr
`:To!==-1&&(Js+=`0 Tr
`),_r!==-1&&(sn.usedRenderingMode=_r),at=me.align||"left";var dr,ci=Ve*Es,vn=$s.internal.pageSize.getWidth(),Za=is[Ct];Rt=me.charSpace||ni,Mt=me.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},me.flags);var na=[],aa=function(ps){return $s.getStringUnitWidth(ps,{font:Za,charSpace:Rt,fontSize:Ve,doKerning:!1})*Ve/Tr};if(Object.prototype.toString.call(x)==="[object Array]"){var hr;$e=en(x),at!=="left"&&(dr=$e.map(aa));var ur,An=0;if(at==="right"){I-=dr[0],x=[],Us=$e.length;for(var Br=0;Br<Us;Br++)Br===0?(ur=Hs(I),hr=Qr(se)):(ur=z(An-dr[Br]),hr=-ci),x.push([$e[Br],ur,hr]),An=dr[Br]}else if(at==="center"){I-=dr[0]/2,x=[],Us=$e.length;for(var yn=0;yn<Us;yn++)yn===0?(ur=Hs(I),hr=Qr(se)):(ur=z((An-dr[yn])/2),hr=-ci),x.push([$e[yn],ur,hr]),An=dr[yn]}else if(at==="left"){x=[],Us=$e.length;for(var ja=0;ja<Us;ja++)x.push($e[ja])}else if(at==="justify"&&Za.encoding==="Identity-H"){x=[],Us=$e.length,Mt=Mt!==0?Mt:vn;for(var zn=0,Fs=0;Fs<Us;Fs++)if(hr=Fs===0?Qr(se):-ci,ur=Fs===0?Hs(I):zn,Fs<Us-1){var _a=z((Mt-dr[Fs])/($e[Fs].split(" ").length-1)),Er=$e[Fs].split(" ");x.push([Er[0]+" ",ur,hr]),zn=0;for(var rn=1;rn<Er.length;rn++){var di=(aa(Er[rn-1]+" "+Er[rn])-aa(Er[rn]))*Tr+_a;rn==Er.length-1?x.push([Er[rn],di,0]):x.push([Er[rn]+" ",di,0]),zn-=di}}else x.push([$e[Fs],ur,hr]);x.push(["",zn,0])}else{if(at!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Us=$e.length,Mt=Mt!==0?Mt:vn,Fs=0;Fs<Us;Fs++)hr=Fs===0?Qr(se):-ci,ur=Fs===0?Hs(I):0,Fs<Us-1?na.push(le(z((Mt-dr[Fs])/($e[Fs].split(" ").length-1)))):na.push(0),x.push([$e[Fs],ur,hr])}}var Xi=typeof me.R2L=="boolean"?me.R2L:ot;Xi===!0&&(x=Ki(x,function(ps,gs,zs){return[ps.split("").reverse().join(""),gs,zs]})),Ie={text:x,x:I,y:se,options:me,mutex:{pdfEscape:Ys,activeFontKey:Ct,fonts:is,activeFontSize:Ve}},ts.publish("postProcessText",Ie),x=Ie.text,Cn=Ie.mutex.isHex||!1;var eo=is[Ct].encoding;eo!=="WinAnsiEncoding"&&eo!=="StandardEncoding"||(x=Ki(x,function(ps,gs,zs){return[Ao(ps),gs,zs]})),$e=en(x),x=[];for(var Sr,Bn,Sa,qn=0,hi=1,ka=Array.isArray($e[0])?hi:qn,Pa="",ia=function(ps,gs,zs){var xs="";return zs instanceof vt?(zs=typeof me.angle=="number"?Yr(zs,new vt(1,0,0,1,ps,gs)):Yr(new vt(1,0,0,1,ps,gs),zs),q===S.ADVANCED&&(zs=Yr(new vt(1,0,0,-1,0,0),zs)),xs=zs.join(" ")+` Tm
`):xs=le(ps)+" "+le(gs)+` Td
`,xs},bn=0;bn<$e.length;bn++){switch(Pa="",ka){case hi:Sa=(Cn?"<":"(")+$e[bn][0]+(Cn?">":")"),Sr=parseFloat($e[bn][1]),Bn=parseFloat($e[bn][2]);break;case qn:Sa=(Cn?"<":"(")+$e[bn]+(Cn?">":")"),Sr=Hs(I),Bn=Qr(se)}na!==void 0&&na[bn]!==void 0&&(Pa=na[bn]+` Tw
`),bn===0?x.push(Pa+ia(Sr,Bn,Ts)+Sa):ka===qn?x.push(Pa+Sa):ka===hi&&x.push(Pa+ia(Sr,Bn,Ts)+Sa)}x=ka===qn?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var fr=`BT
/`;return fr+=Ct+" "+Ve+` Tf
`,fr+=le(Ve*Es)+` TL
`,fr+=ba+`
`,fr+=Js,fr+=x,G(fr+="ET"),N[Ct]=!0,$s};var gn=g.__private__.clip=g.clip=function(x){return G(x==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return gn("evenodd")},g.__private__.discardPath=g.discardPath=function(){return G("n"),this};var Yt=g.__private__.isValidStyle=function(x){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(I=!0),I};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(x){return Yt(x)&&(p=x),this};var qi=g.__private__.getStyle=g.getStyle=function(x){var I=p;switch(x){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=x}return I},si=g.close=function(){return G("h"),this};g.stroke=function(){return G("S"),this},g.fill=function(x){return xa("f",x),this},g.fillEvenOdd=function(x){return xa("f*",x),this},g.fillStroke=function(x){return xa("B",x),this},g.fillStrokeEvenOdd=function(x){return xa("B*",x),this};var xa=function(x,I){js(I)==="object"?Hi(I,x):G(x)},Ha=function(x){x===null||q===S.ADVANCED&&x===void 0||(x=qi(x),G(x))};function ea(x,I,se,me,ke){var Ie=new Go(I||this.boundingBox,se||this.xStep,me||this.yStep,this.gState,ke||this.matrix);Ie.stream=this.stream;var $e=x+"$$"+this.cloneIndex+++"$$";return yr($e,Ie),Ie}var Hi=function(x,I){var se=Yn[x.key],me=Kt[se];if(me instanceof oo)G("q"),G($a(I)),me.gState&&g.setGState(me.gState),G(x.matrix.toString()+" cm"),G("/"+se+" sh"),G("Q");else if(me instanceof Go){var ke=new vt(1,0,0,-1,0,Na());x.matrix&&(ke=ke.multiply(x.matrix||hn),se=ea.call(me,x.key,x.boundingBox,x.xStep,x.yStep,ke).id),G("q"),G("/Pattern cs"),G("/"+se+" scn"),me.gState&&g.setGState(me.gState),G(I),G("Q")}},$a=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ds=g.moveTo=function(x,I){return G(le(z(x))+" "+le(B(I))+" m"),this},Jr=g.lineTo=function(x,I){return G(le(z(x))+" "+le(B(I))+" l"),this},ta=g.curveTo=function(x,I,se,me,ke,Ie){return G([le(z(x)),le(B(I)),le(z(se)),le(B(me)),le(z(ke)),le(B(Ie)),"c"].join(" ")),this};g.__private__.line=g.line=function(x,I,se,me,ke){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||!Yt(ke))throw new Error("Invalid arguments passed to jsPDF.line");return q===S.COMPAT?this.lines([[se-x,me-I]],x,I,[1,1],ke||"S"):this.lines([[se-x,me-I]],x,I,[1,1]).stroke()},g.__private__.lines=g.lines=function(x,I,se,me,ke,Ie){var $e,Qe,at,Rt,Mt,Xt,Ps,Ts,$s,jr,Js,Cn;if(typeof x=="number"&&(Cn=se,se=I,I=x,x=Cn),me=me||[1,1],Ie=Ie||!1,isNaN(I)||isNaN(se)||!Array.isArray(x)||!Array.isArray(me)||!Yt(ke)||typeof Ie!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ds(I,se),$e=me[0],Qe=me[1],Rt=x.length,jr=I,Js=se,at=0;at<Rt;at++)(Mt=x[at]).length===2?(jr=Mt[0]*$e+jr,Js=Mt[1]*Qe+Js,Jr(jr,Js)):(Xt=Mt[0]*$e+jr,Ps=Mt[1]*Qe+Js,Ts=Mt[2]*$e+jr,$s=Mt[3]*Qe+Js,jr=Mt[4]*$e+jr,Js=Mt[5]*Qe+Js,ta(Xt,Ps,Ts,$s,jr,Js));return Ie&&si(),Ha(ke),this},g.path=function(x){for(var I=0;I<x.length;I++){var se=x[I],me=se.c;switch(se.op){case"m":Ds(me[0],me[1]);break;case"l":Jr(me[0],me[1]);break;case"c":ta.apply(this,me);break;case"h":si()}}return this},g.__private__.rect=g.rect=function(x,I,se,me,ke){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||!Yt(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return q===S.COMPAT&&(me=-me),G([le(z(x)),le(B(I)),le(z(se)),le(z(me)),"re"].join(" ")),Ha(ke),this},g.__private__.triangle=g.triangle=function(x,I,se,me,ke,Ie,$e){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||isNaN(ke)||isNaN(Ie)||!Yt($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-x,me-I],[ke-se,Ie-me],[x-ke,I-Ie]],x,I,[1,1],$e,!0),this},g.__private__.roundedRect=g.roundedRect=function(x,I,se,me,ke,Ie,$e){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||isNaN(ke)||isNaN(Ie)||!Yt($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*se),Ie=Math.min(Ie,.5*me),this.lines([[se-2*ke,0],[ke*Qe,0,ke,Ie-Ie*Qe,ke,Ie],[0,me-2*Ie],[0,Ie*Qe,-ke*Qe,Ie,-ke,Ie],[2*ke-se,0],[-ke*Qe,0,-ke,-Ie*Qe,-ke,-Ie],[0,2*Ie-me],[0,-Ie*Qe,ke*Qe,-Ie,ke,-Ie]],x+ke,I,[1,1],$e,!0),this},g.__private__.ellipse=g.ellipse=function(x,I,se,me,ke){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||!Yt(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ie=4/3*(Math.SQRT2-1)*se,$e=4/3*(Math.SQRT2-1)*me;return Ds(x+se,I),ta(x+se,I-$e,x+Ie,I-me,x,I-me),ta(x-Ie,I-me,x-se,I-$e,x-se,I),ta(x-se,I+$e,x-Ie,I+me,x,I+me),ta(x+Ie,I+me,x+se,I+$e,x+se,I),Ha(ke),this},g.__private__.circle=g.circle=function(x,I,se,me){if(isNaN(x)||isNaN(I)||isNaN(se)||!Yt(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,I,se,se,me)},g.setFont=function(x,I,se){return se&&(I=ue(I,se)),Ct=Fn(x,I,{disableWarning:!1}),this};var So=g.__private__.getFont=g.getFont=function(){return is[Fn.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var x,I,se={};for(x in os)if(os.hasOwnProperty(x))for(I in se[x]=[],os[x])os[x].hasOwnProperty(I)&&se[x].push(I);return se},g.addFont=function(x,I,se,me,ke){var Ie=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ie.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Ie.indexOf(arguments[3])==-1&&(se=ue(se,me)),ke=ke||"Identity-H",mn.call(this,x,I,se,ke)};var Ua,ri=s.lineWidth||.200025,va=g.__private__.getLineWidth=g.getLineWidth=function(){return ri},ko=g.__private__.setLineWidth=g.setLineWidth=function(x){return ri=x,G(le(z(x))+" w"),this};g.__private__.setLineDash=Nt.API.setLineDash=Nt.API.setLineDashPattern=function(x,I){if(x=x||[],I=I||0,isNaN(I)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(se){return le(z(se))}).join(" "),I=le(z(I)),G("["+x+"] "+I+" d"),this};var $i=g.__private__.getLineHeight=g.getLineHeight=function(){return Ve*Ua};g.__private__.getLineHeight=g.getLineHeight=function(){return Ve*Ua};var Vt=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Ua=x),this},Po=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Ua};Vt(s.lineHeight);var Hs=g.__private__.getHorizontalCoordinate=function(x){return z(x)},Qr=g.__private__.getVerticalCoordinate=function(x){return q===S.ADVANCED?x:Lt[W].mediaBox.topRightY-Lt[W].mediaBox.bottomLeftY-z(x)},Co=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(x){return le(Hs(x))},ya=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(x){return le(Qr(x))},Xr=s.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Ar(Xr)},g.__private__.setStrokeColor=g.setDrawColor=function(x,I,se,me){return Xr=_e({ch1:x,ch2:I,ch3:se,ch4:me,pdfColorType:"draw",precision:2}),G(Xr),this};var Ui=s.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Ar(Ui)},g.__private__.setFillColor=g.setFillColor=function(x,I,se,me){return Ui=_e({ch1:x,ch2:I,ch3:se,ch4:me,pdfColorType:"fill",precision:2}),G(Ui),this};var ba=s.textColor||"0 g",gl=g.__private__.getTextColor=g.getTextColor=function(){return Ar(ba)};g.__private__.setTextColor=g.setTextColor=function(x,I,se,me){return ba=_e({ch1:x,ch2:I,ch3:se,ch4:me,pdfColorType:"text",precision:3}),this};var ni=s.charSpace,Wi=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(ni||0)};g.__private__.setCharSpace=g.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ni=x,this};var Vi=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vi=I,G(I+" J"),this};var zr=0;g.__private__.setLineJoin=g.setLineJoin=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zr=I,G(I+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(le(z(x))+" M"),this},g.GState=Oc,g.setGState=function(x){(x=typeof x=="string"?_s[Dr[x]]:Lo(null,x)).equals(dn)||(G("/"+x.id+" gs"),dn=x)};var Lo=function(x,I){if(!x||!Dr[x]){var se=!1;for(var me in _s)if(_s.hasOwnProperty(me)&&_s[me].equals(I)){se=!0;break}if(se)I=_s[me];else{var ke="GS"+(Object.keys(_s).length+1).toString(10);_s[ke]=I,I.id=ke}return x&&(Dr[x]=I.id),ts.publish("addGState",I),I}};g.addGState=function(x,I){return Lo(x,I),this},g.saveGraphicsState=function(){return G("q"),vr.push({key:Ct,size:Ve,color:ba}),this},g.restoreGraphicsState=function(){G("Q");var x=vr.pop();return Ct=x.key,Ve=x.size,ba=x.color,dn=null,this},g.setCurrentTransformationMatrix=function(x){return G(x.toString()+" cm"),this},g.comment=function(x){return G("#"+x),this};var Wa=function(x,I){var se=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(Ie){isNaN(Ie)||(se=parseFloat(Ie))}});var me=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Ie){isNaN(Ie)||(me=parseFloat(Ie))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Ie){ke=Ie.toString()}}),this},xn=function(x,I,se,me){Wa.call(this,x,I),this.type="rect";var ke=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function($e){isNaN($e)||(ke=parseFloat($e))}});var Ie=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ie},set:function($e){isNaN($e)||(Ie=parseFloat($e))}}),this},ai=function(){this.page=As,this.currentPage=W,this.pages=ie.slice(0),this.pagesContext=Lt.slice(0),this.x=rr,this.y=Zt,this.matrix=xr,this.width=wa(W),this.height=Na(W),this.outputDestination=Q,this.id="",this.objectNumber=-1};ai.prototype.restore=function(){As=this.page,W=this.currentPage,Lt=this.pagesContext,ie=this.pages,rr=this.x,Zt=this.y,xr=this.matrix,oi(W,this.width),Yi(W,this.height),Q=this.outputDestination};var Zi=function(x,I,se,me,ke){qs.push(new ai),As=W=0,ie=[],rr=x,Zt=I,xr=ke,nr([se,me])},Gi=function(x){if(Fr[x])qs.pop().restore();else{var I=new ai,se="Xo"+(Object.keys(Os).length+1).toString(10);I.id=se,Fr[x]=se,Os[se]=I,ts.publish("addFormObject",I),qs.pop().restore()}};for(var ii in g.beginFormObject=function(x,I,se,me,ke){return Zi(x,I,se,me,ke),this},g.endFormObject=function(x){return Gi(x),this},g.doFormObject=function(x,I){var se=Os[Fr[x]];return G("q"),G(I.toString()+" cm"),G("/"+se.id+" Do"),G("Q"),this},g.getFormObject=function(x){var I=Os[Fr[x]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},g.save=function(x,I){return x=x||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(io(Xn(Pn()),x),typeof io.unload=="function"&&kt.setTimeout&&setTimeout(io.unload,911),this):new Promise(function(se,me){try{var ke=io(Xn(Pn()),x);typeof io.unload=="function"&&kt.setTimeout&&setTimeout(io.unload,911),se(ke)}catch(Ie){me(Ie.message)}})},Nt.API)Nt.API.hasOwnProperty(ii)&&(ii==="events"&&Nt.API.events.length?function(x,I){var se,me,ke;for(ke=I.length-1;ke!==-1;ke--)se=I[ke][0],me=I[ke][1],x.subscribe.apply(x,[se].concat(typeof me=="function"?[me]:me))}(ts,Nt.API.events):g[ii]=Nt.API[ii]);var wa=g.getPageWidth=function(x){return(Lt[x=x||W].mediaBox.topRightX-Lt[x].mediaBox.bottomLeftX)/Ge},oi=g.setPageWidth=function(x,I){Lt[x].mediaBox.topRightX=I*Ge+Lt[x].mediaBox.bottomLeftX},Na=g.getPageHeight=function(x){return(Lt[x=x||W].mediaBox.topRightY-Lt[x].mediaBox.bottomLeftY)/Ge},Yi=g.setPageHeight=function(x,I){Lt[x].mediaBox.topRightY=I*Ge+Lt[x].mediaBox.bottomLeftY};return g.internal={pdfEscape:Ys,getStyle:qi,getFont:So,getFontSize:Ze,getCharSpace:Wi,getTextColor:gl,getLineHeight:$i,getLineHeightFactor:Po,getLineWidth:va,write:We,getHorizontalCoordinate:Hs,getVerticalCoordinate:Qr,getCoordinateString:Co,getVerticalCoordinateString:ya,collections:{},newObject:ls,newAdditionalObject:On,newObjectDeferred:Ye,newObjectDeferredBegin:br,getFilters:Oe,putStream:Ue,events:ts,scaleFactor:Ge,pageSize:{getWidth:function(){return wa(W)},setWidth:function(x){oi(W,x)},getHeight:function(){return Na(W)},setHeight:function(x){Yi(W,x)}},encryptionOptions:v,encryption:Ks,getEncryptor:_o,output:ga,getNumberOfPages:Is,pages:ie,out:G,f2:we,f3:R,getPageInfo:ti,getPageInfoByObjId:Et,getCurrentPageInfo:It,getPDFVersion:j,Point:Wa,Rectangle:xn,Matrix:vt,hasHotfix:ei},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return wa(W)},set:function(x){oi(W,x)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Na(W)},set:function(x){Yi(W,x)},enumerable:!0,configurable:!0}),St.call(g,Fe),Ct="F1",Jn(i,r),ts.publish("initialized"),g}Vo.prototype.lsbFirstWord=function(s){return String.fromCharCode(s>>0&255,s>>8&255,s>>16&255,s>>24&255)},Vo.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vo.prototype.hexToBytes=function(s){for(var t=[],r=0;r<s.length;r+=2)t.push(String.fromCharCode(parseInt(s.substr(r,2),16)));return t.join("")},Vo.prototype.processOwnerPassword=function(s,t){return hh(dh(t).substr(0,5),s)},Vo.prototype.encryptor=function(s,t){var r=dh(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return hh(r,a)}},Oc.prototype.equals=function(s){var t,r="id,objectNumber,equals";if(!s||js(s)!==js(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;a++}for(t in s)s.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},Nt.API={events:[]},Nt.version="3.0.1";var Vs=Nt.API,su=1,jo=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uo=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ft=function(s){return s.toFixed(2)},Ni=function(s){return s.toFixed(5)};Vs.__acroform__={};var kn=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},bf=function(s){return s*su},Ea=function(s){var t=new Zg,r=it.internal.getHeight(s)||0,a=it.internal.getWidth(s)||0;return t.BBox=[0,0,Number(Ft(a)),Number(Ft(r))],t},T5=Vs.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|=1<<t},E5=Vs.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&=~(1<<t)},M5=Vs.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(s&1<<t)==0?0:1},Xs=Vs.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return M5(s,t-1)},er=Vs.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return T5(s,t-1)},tr=Vs.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return E5(s,t-1)},I5=Vs.__acroform__.calculateCoordinates=function(s,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,i=s[0],l=s[1],d=s[2],u=s[3],h={};return h.lowerLeft_X=r(i)||0,h.lowerLeft_Y=a(l+u)||0,h.upperRight_X=r(i+d)||0,h.upperRight_Y=a(l)||0,[Number(Ft(h.lowerLeft_X)),Number(Ft(h.lowerLeft_Y)),Number(Ft(h.upperRight_X)),Number(Ft(h.upperRight_Y))]},R5=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],r=s._V||s.DV,a=uh(s,r),i=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+i+" "+Ft(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=Ea(s);return l.scope=s.scope,l.stream=t.join(`
`),l}},uh=function(s,t){var r=s.fontSize===0?s.maxFontSize:s.fontSize,a={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=s.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var l=r,d=it.internal.getHeight(s)||0;d=d<0?-d:d;var u=it.internal.getWidth(s)||0;u=u<0?-u:u;var h=function(R,z,H){if(R+1<i.length){var B=z+" "+i[R+1][0];return pc(B,s,H).width<=u-4}return!1};l++;e:for(;l>0;){t="",l--;var p,v,y=pc("3",s,l).height,N=s.multiline?d-l:(d-y)/2,g=N+=2,C=0,j=0,T=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+pc(t,s,l=12).width+", FieldWidth:"+u+`
`;break}for(var A="",S=0,q=0;q<i.length;q++)if(i.hasOwnProperty(q)){var V=!1;if(i[q].length!==1&&T!==i[q].length-1){if((y+2)*(S+2)+2>d)continue e;A+=i[q][T],V=!0,j=q,q--}else{A=(A+=i[q][T]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var Y=parseInt(q),ue=h(Y,A,l),le=q>=i.length-1;if(ue&&!le){A+=" ",T=0;continue}if(ue||le){if(le)j=Y;else if(s.multiline&&(y+2)*(S+2)+2>d)continue e}else{if(!s.multiline||(y+2)*(S+2)+2>d)continue e;j=Y}}for(var ee="",te=C;te<=j;te++){var we=i[te];if(s.multiline){if(te===j){ee+=we[T]+" ",T=(T+1)%we.length;continue}if(te===C){ee+=we[we.length-1]+" ";continue}}ee+=we[0]+" "}switch(ee=ee.substr(ee.length-1)==" "?ee.substr(0,ee.length-1):ee,v=pc(ee,s,l).width,s.textAlign){case"right":p=u-v-2;break;case"center":p=(u-v)/2;break;case"left":default:p=2}t+=Ft(p)+" "+Ft(g)+` Td
`,t+="("+jo(ee)+`) Tj
`,t+=-Ft(p)+` 0 Td
`,g=-(l+2),v=0,C=V?j:j+1,S++,A=""}break}return a.text=t,a.fontSize=l,a},pc=function(s,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(s,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},O5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},D5=function(s,t){var r={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(r)},F5=function(s,t){for(var r in s)if(s.hasOwnProperty(r)){var a=r,i=s[r];t.internal.newObjectDeferredBegin(i.objId,!0),js(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete s[a]}},z5=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(fa.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(O5)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");su=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new Gg,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];l.objId=void 0,l.hasAnnotation&&D5(l,r)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(r){(function(a,i){var l=!a;for(var d in a||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(d)){var u=a[d],h=[],p=u.Rect;if(u.Rect&&(u.Rect=I5(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=it.createDefaultAppearanceStream(u),js(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=p,u.hasAppearanceStream&&!u.appearanceStreamContent){var v=R5(u);h.push({key:"AP",value:"<</N "+v+">>"}),i.internal.acroformPlugin.xForms.push(v)}if(u.appearanceStreamContent){var y="";for(var N in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(N)){var g=u.appearanceStreamContent[N];if(y+="/"+N+" ",y+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var d in g)if(g.hasOwnProperty(d)){var C=g[d];typeof C=="function"&&(C=C.call(i,u)),y+="/"+d+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=g)=="function"&&(C=C.call(i,u)),y+="/"+d+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:u.objId}),i.internal.out("endobj")}l&&F5(i.internal.acroformPlugin.xForms,i)})(r,s)}),s.internal.acroformPlugin.isInitialized=!0}},Vg=Vs.__acroform__.arrayToPdfArray=function(s,t,r){var a=function(d){return d};if(Array.isArray(s)){for(var i="[",l=0;l<s.length;l++)switch(l!==0&&(i+=" "),js(s[l])){case"boolean":case"number":case"object":i+=s[l].toString();break;case"string":s[l].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),i+="("+jo(a(s[l].toString()))+")"):i+=s[l].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Id=function(s,t,r){var a=function(i){return i};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(s=s||"").toString(),s="("+jo(a(s))+")"},Oa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Oa.prototype.toString=function(){return this.objId+" 0 R"},Oa.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},Oa.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],i=this[a];i&&(Array.isArray(i)?s.push({key:a,value:Vg(i,this.objId,this.scope)}):i instanceof Oa?(i.scope=this.scope,s.push({key:a,value:i.objId+" 0 R"})):typeof i!="function"&&s.push({key:a,value:i}))}return s};var Zg=function(){Oa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){s=r.trim()},get:function(){return s||null}})};kn(Zg,Oa);var Gg=function(){Oa.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+jo(r(s))+")"}},set:function(r){s=r}})};kn(Gg,Oa);var fa=function s(){Oa.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xs(t,3)},set:function(A){A?this.F=er(t,3):this.F=tr(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');r=A}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(A){a=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(A){a[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(A){a[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(A){a[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(A){a[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Dc)return;l="FieldObject"+s.FieldNum++}var A=function(S){return S};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+jo(A(l))+")"},set:function(A){l=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(A){l=A}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){h=A}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/su:p},set:function(A){p=A}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(A){v=A}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Dc||this instanceof co))return Id(y,this.objId,this.scope)},set:function(A){A=A.toString(),y=A}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Cr?N:Id(N,this.objId,this.scope)},set:function(A){A=A.toString(),N=this instanceof Cr?A:A.substr(0,1)==="("?Uo(A.substr(1,A.length-2)):Uo(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr?Uo(N.substr(1,N.length-1)):N},set:function(A){A=A.toString(),N=this instanceof Cr?"/"+A:A}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Cr?g:Id(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=this instanceof Cr?A:A.substr(0,1)==="("?Uo(A.substr(1,A.length-2)):Uo(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr?Uo(g.substr(1,g.length-1)):g},set:function(A){A=A.toString(),g=this instanceof Cr?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(A){A=!!A,j=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(A){C=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,1)},set:function(A){A?this.Ff=er(this.Ff,1):this.Ff=tr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,2)},set:function(A){A?this.Ff=er(this.Ff,2):this.Ff=tr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,3)},set:function(A){A?this.Ff=er(this.Ff,3):this.Ff=tr(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');T=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(T){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};kn(fa,Oa);var Ko=function(){fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(r){s=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Vg(t,this.objId,this.scope)},set:function(r){var a,i;i=[],typeof(a=r)=="string"&&(i=function(l,d,u){u||(u=1);for(var h,p=[];h=d.exec(l);)p.push(h[u]);return p}(a,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,18)},set:function(r){r?this.Ff=er(this.Ff,18):this.Ff=tr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=er(this.Ff,19):this.Ff=tr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,20)},set:function(r){r?(this.Ff=er(this.Ff,20),t.sort()):this.Ff=tr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,22)},set:function(r){r?this.Ff=er(this.Ff,22):this.Ff=tr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(r){r?this.Ff=er(this.Ff,23):this.Ff=tr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,27)},set:function(r){r?this.Ff=er(this.Ff,27):this.Ff=tr(this.Ff,27)}}),this.hasAppearanceStream=!1};kn(Ko,fa);var Jo=function(){Ko.call(this),this.fontName="helvetica",this.combo=!1};kn(Jo,Ko);var Qo=function(){Jo.call(this),this.combo=!0};kn(Qo,Jo);var jc=function(){Qo.call(this),this.edit=!0};kn(jc,Qo);var Cr=function(){fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,15)},set:function(r){r?this.Ff=er(this.Ff,15):this.Ff=tr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,16)},set:function(r){r?this.Ff=er(this.Ff,16):this.Ff=tr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,17)},set:function(r){r?this.Ff=er(this.Ff,17):this.Ff=tr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(r){r?this.Ff=er(this.Ff,26):this.Ff=tr(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,i=[];for(a in i.push("<<"),t)i.push("/"+a+" ("+jo(r(t[a]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){js(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(r){s="/"+r}})};kn(Cr,fa);var _c=function(){Cr.call(this),this.pushButton=!0};kn(_c,Cr);var Xo=function(){Cr.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};kn(Xo,Cr);var Dc=function(){var s,t;fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(i){s=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),a)d.push("/"+l+" ("+jo(i(a[l]))+")");return d.push(">>"),d.join(`
`)},set:function(i){js(i)==="object"&&(a=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(i){typeof i=="string"&&(a.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=it.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};kn(Dc,fa),Xo.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=s.createAppearanceStream(r.optionName),r.caption=s.getCA()}},Xo.prototype.createOption=function(s){var t=new Dc;return t.Parent=this,t.optionName=s,this.Kids.push(t),B5.call(this.scope,t),t};var Sc=function(){Cr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=it.CheckBox.createAppearanceStream()};kn(Sc,Cr);var co=function(){fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,13)},set:function(t){t?this.Ff=er(this.Ff,13):this.Ff=tr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,21)},set:function(t){t?this.Ff=er(this.Ff,21):this.Ff=tr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(t){t?this.Ff=er(this.Ff,23):this.Ff=tr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,24)},set:function(t){t?this.Ff=er(this.Ff,24):this.Ff=tr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,25)},set:function(t){t?this.Ff=er(this.Ff,25):this.Ff=tr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(t){t?this.Ff=er(this.Ff,26):this.Ff=tr(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};kn(co,fa);var kc=function(){co.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,14)},set:function(s){s?this.Ff=er(this.Ff,14):this.Ff=tr(this.Ff,14)}}),this.password=!0};kn(kc,co);var it={CheckBox:{createAppearanceStream:function(){return{N:{On:it.CheckBox.YesNormal},D:{On:it.CheckBox.YesPushDown,Off:it.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=Ea(s);t.scope=s.scope;var r=[],a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,i=s.scope.__private__.encodeColorString(s.color),l=uh(s,s.caption);return r.push("0.749023 g"),r.push("0 0 "+Ft(it.internal.getWidth(s))+" "+Ft(it.internal.getHeight(s))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Ft(l.fontSize)+" Tf "+i),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(s){var t=Ea(s);t.scope=s.scope;var r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color),i=[],l=it.internal.getHeight(s),d=it.internal.getWidth(s),u=uh(s,s.caption);return i.push("1 g"),i.push("0 0 "+Ft(d)+" "+Ft(l)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ft(d-1)+" "+Ft(l-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Ft(u.fontSize)+" Tf "+a),i.push(u.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(s){var t=Ea(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ft(it.internal.getWidth(s))+" "+Ft(it.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:it.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=it.RadioButton.Circle.YesNormal,t.D[s]=it.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=Ea(s);t.scope=s.scope;var r=[],a=it.internal.getWidth(s)<=it.internal.getHeight(s)?it.internal.getWidth(s)/4:it.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=it.internal.Bezier_C,l=Number((a*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),r.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),r.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),r.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ea(s);t.scope=s.scope;var r=[],a=it.internal.getWidth(s)<=it.internal.getHeight(s)?it.internal.getWidth(s)/4:it.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),l=Number((i*it.internal.Bezier_C).toFixed(5)),d=Number((a*it.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+d+" "+d+" "+a+" 0 "+a+" c"),r.push("-"+d+" "+a+" -"+a+" "+d+" -"+a+" 0 c"),r.push("-"+a+" -"+d+" -"+d+" -"+a+" 0 -"+a+" c"),r.push(d+" -"+a+" "+a+" -"+d+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=Ea(s);t.scope=s.scope;var r=[],a=it.internal.getWidth(s)<=it.internal.getHeight(s)?it.internal.getWidth(s)/4:it.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),l=Number((i*it.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:it.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=it.RadioButton.Cross.YesNormal,t.D[s]=it.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=Ea(s);t.scope=s.scope;var r=[],a=it.internal.calculateCross(s);return r.push("q"),r.push("1 1 "+Ft(it.internal.getWidth(s)-2)+" "+Ft(it.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(Ft(a.x1.x)+" "+Ft(a.x1.y)+" m"),r.push(Ft(a.x2.x)+" "+Ft(a.x2.y)+" l"),r.push(Ft(a.x4.x)+" "+Ft(a.x4.y)+" m"),r.push(Ft(a.x3.x)+" "+Ft(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ea(s);t.scope=s.scope;var r=it.internal.calculateCross(s),a=[];return a.push("0.749023 g"),a.push("0 0 "+Ft(it.internal.getWidth(s))+" "+Ft(it.internal.getHeight(s))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Ft(it.internal.getWidth(s)-2)+" "+Ft(it.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(Ft(r.x1.x)+" "+Ft(r.x1.y)+" m"),a.push(Ft(r.x2.x)+" "+Ft(r.x2.y)+" l"),a.push(Ft(r.x4.x)+" "+Ft(r.x4.y)+" m"),a.push(Ft(r.x3.x)+" "+Ft(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=Ea(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ft(it.internal.getWidth(s))+" "+Ft(it.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+r}};it.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=it.internal.getWidth(s),r=it.internal.getHeight(s),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},it.internal.getWidth=function(s){var t=0;return js(s)==="object"&&(t=bf(s.Rect[2])),t},it.internal.getHeight=function(s){var t=0;return js(s)==="object"&&(t=bf(s.Rect[3])),t};var B5=Vs.addField=function(s){if(z5(this,s),!(s instanceof fa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=Ko,Vs.AcroFormListBox=Jo,Vs.AcroFormComboBox=Qo,Vs.AcroFormEditBox=jc,Vs.AcroFormButton=Cr,Vs.AcroFormPushButton=_c,Vs.AcroFormRadioButton=Xo,Vs.AcroFormCheckBox=Sc,Vs.AcroFormTextField=co,Vs.AcroFormPasswordField=kc,Vs.AcroFormAppearance=it,Vs.AcroForm={ChoiceField:Ko,ListBox:Jo,ComboBox:Qo,EditBox:jc,Button:Cr,PushButton:_c,RadioButton:Xo,CheckBox:Sc,TextField:co,PasswordField:kc,Appearance:it},Nt.AcroForm={ChoiceField:Ko,ListBox:Jo,ComboBox:Qo,EditBox:jc,Button:Cr,PushButton:_c,RadioButton:Xo,CheckBox:Sc,TextField:co,PasswordField:kc,Appearance:it};Nt.AcroForm;function Yg(s){return s.reduce(function(t,r,a){return t[r]=a,t},{})}(function(s){s.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=s.__addimage__.getImageFileTypeByImageData=function(R,z){var H,B,pe,he,be,ne=t;if((z=z||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(ue(R))for(be in r)for(pe=r[be],H=0;H<pe.length;H+=1){for(he=!0,B=0;B<pe[H].length;B+=1)if(pe[H][B]!==void 0&&pe[H][B]!==R[B]){he=!1;break}if(he===!0){ne=be;break}}else for(be in r)for(pe=r[be],H=0;H<pe.length;H+=1){for(he=!0,B=0;B<pe[H].length;B+=1)if(pe[H][B]!==void 0&&pe[H][B]!==R.charCodeAt(B)){he=!1;break}if(he===!0){ne=be;break}}return ne===t&&z!==t&&(ne=z),ne},i=function R(z){for(var H=this.internal.write,B=this.internal.putStream,pe=(0,this.internal.getFilters)();pe.indexOf("FlateEncode")!==-1;)pe.splice(pe.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:z.width}),he.push({key:"Height",value:z.height}),z.colorSpace===T.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===T.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var be="",ne=0,xe=z.transparency.length;ne<xe;ne++)be+=z.transparency[ne]+" "+z.transparency[ne]+" ";he.push({key:"Mask",value:"["+be+"]"})}z.sMask!==void 0&&he.push({key:"SMask",value:z.objectId+1+" 0 R"});var ae=z.filter!==void 0?["/"+z.filter]:void 0;if(B({data:z.data,additionalKeyValues:he,alreadyAppliedFilters:ae,objectId:z.objectId}),H("endobj"),"sMask"in z&&z.sMask!==void 0){var fe="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,E={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:fe,data:z.sMask};"filter"in z&&(E.filter=z.filter),R.call(this,E)}if(z.colorSpace===T.INDEXED){var W=this.internal.newObject();B({data:ee(new Uint8Array(z.palette)),objectId:W}),H("endobj")}},l=function(){var R=this.internal.collections.addImage_images;for(var z in R)i.call(this,R[z])},d=function(){var R,z=this.internal.collections.addImage_images,H=this.internal.write;for(var B in z)H("/I"+(R=z[B]).index,R.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",d))},h=function(){var R=this.internal.collections.addImage_images;return u.call(this),R},p=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(R){return typeof s["process"+R.toUpperCase()]=="function"},y=function(R){return js(R)==="object"&&R.nodeType===1},N=function(R,z){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var H=""+R.getAttribute("src");if(H.indexOf("data:image/")===0)return Il(unescape(H).split("base64,").pop());var B=s.loadFile(H,!0);if(B!==void 0)return B}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var pe;switch(z){case"PNG":pe="image/png";break;case"WEBP":pe="image/webp";break;case"JPEG":case"JPG":default:pe="image/jpeg"}return Il(R.toDataURL(pe,1).split("base64,").pop())}},g=function(R){var z=this.internal.collections.addImage_images;if(z){for(var H in z)if(R===z[H].alias)return z[H]}},C=function(R,z,H){return R||z||(R=-96,z=-96),R<0&&(R=-1*H.width*72/R/this.internal.scaleFactor),z<0&&(z=-1*H.height*72/z/this.internal.scaleFactor),R===0&&(R=z*H.width/H.height),z===0&&(z=R*H.height/H.width),[R,z]},j=function(R,z,H,B,pe,he){var be=C.call(this,H,B,pe),ne=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,ae=h.call(this);if(H=be[0],B=be[1],ae[pe.index]=pe,he){he*=Math.PI/180;var fe=Math.cos(he),E=Math.sin(he),W=function(X){return X.toFixed(4)},Z=[W(fe),W(E),W(-1*E),W(fe),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,ne(R),xe(z+B),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([ne(H),"0","0",ne(B),"0","0","cm"].join(" "))):this.internal.write([ne(H),"0","0",ne(B),ne(R),xe(z+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pe.index+" Do"),this.internal.write("Q")},T=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=s.__addimage__.sHashCode=function(R){var z,H,B=0;if(typeof R=="string")for(H=R.length,z=0;z<H;z++)B=(B<<5)-B+R.charCodeAt(z),B|=0;else if(ue(R))for(H=R.byteLength/2,z=0;z<H;z++)B=(B<<5)-B+R[z],B|=0;return B},q=s.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var z=!0;return R.length===0&&(z=!1),R.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(z=!1),z},V=s.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var z=R.indexOf(",");return z<0?null:R.substring(0,z).trim().endsWith("base64")?R.substring(z+1):null},Y=s.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};s.__addimage__.isArrayBuffer=function(R){return Y()&&R instanceof ArrayBuffer};var ue=s.__addimage__.isArrayBufferView=function(R){return Y()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},le=s.__addimage__.binaryStringToUint8Array=function(R){for(var z=R.length,H=new Uint8Array(z),B=0;B<z;B++)H[B]=R.charCodeAt(B);return H},ee=s.__addimage__.arrayBufferToBinaryString=function(R){for(var z="",H=ue(R)?R:new Uint8Array(R),B=0;B<H.length;B+=8192)z+=String.fromCharCode.apply(null,H.subarray(B,B+8192));return z};s.addImage=function(){var R,z,H,B,pe,he,be,ne,xe;if(typeof arguments[1]=="number"?(z=t,H=arguments[1],B=arguments[2],pe=arguments[3],he=arguments[4],be=arguments[5],ne=arguments[6],xe=arguments[7]):(z=arguments[1],H=arguments[2],B=arguments[3],pe=arguments[4],he=arguments[5],be=arguments[6],ne=arguments[7],xe=arguments[8]),js(R=arguments[0])==="object"&&!y(R)&&"imageData"in R){var ae=R;R=ae.imageData,z=ae.format||z||t,H=ae.x||H||0,B=ae.y||B||0,pe=ae.w||ae.width||pe,he=ae.h||ae.height||he,be=ae.alias||be,ne=ae.compression||ne,xe=ae.rotation||ae.angle||xe}var fe=this.internal.getFilters();if(ne===void 0&&fe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(H)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var E=te.call(this,R,z,be,ne);return j.call(this,H,B,pe,he,E,xe),this};var te=function(R,z,H,B){var pe,he,be;if(typeof R=="string"&&a(R)===t){R=unescape(R);var ne=we(R,!1);(ne!==""||(ne=s.loadFile(R,!0))!==void 0)&&(R=ne)}if(y(R)&&(R=N(R,z)),z=a(R,z),!v(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((be=H)==null||be.length===0)&&(H=function(xe){return typeof xe=="string"||ue(xe)?S(xe):ue(xe.data)?S(xe.data):null}(R)),(pe=g.call(this,H))||(Y()&&(R instanceof Uint8Array||z==="RGBA"||(he=R,R=le(R))),pe=this["process"+z.toUpperCase()](R,p.call(this),H,function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in s.image_compression?xe:A.NONE}(B),he)),!pe)throw new Error("An unknown error occurred whilst processing the image.");return pe},we=s.__addimage__.convertBase64ToBinaryString=function(R,z){z=typeof z!="boolean"||z;var H,B="";if(typeof R=="string"){var pe;H=(pe=V(R))!==null&&pe!==void 0?pe:R;try{B=Il(H)}catch(he){if(z)throw q(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};s.getImageProperties=function(R){var z,H,B="";if(y(R)&&(R=N(R)),typeof R=="string"&&a(R)===t&&((B=we(R,!1))===""&&(B=s.loadFile(R)||""),R=B),H=a(R),!v(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!Y()||R instanceof Uint8Array||(R=le(R)),!(z=this["process"+H.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=H,z}})(Nt.API),function(s){var t=function(r){if(r!==void 0&&r!="")return!0};Nt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(r){for(var a,i,l,d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(r.objId),p=r.pageContext.annotations,v=!1,y=0;y<p.length&&!v;y++)switch((a=p[y]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var N=0;N<p.length;N++){a=p[N];var g=this.internal.pdfEscape,C=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(j.objId),S=a.title||"Note";l="<</Type /Annot /Subtype /Text "+(i="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y)+"] ")+"/Contents ("+g(A(a.contents))+")",l+=" /Popup "+T.objId+" 0 R",l+=" /P "+h.objId+" 0 R",l+=" /T ("+g(A(S))+") >>",j.content=l;var q=j.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+d(a.bounds.x+30)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w+30)+" "+u(a.bounds.y)+"] ")+" /Parent "+q,a.open&&(l+=" /Open true"),l+=" >>",T.content=l,this.internal.write(j.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y+a.bounds.h)+"] ";var V=a.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(C(a.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(a.options.name){var Y=this.annotations._nameMap[a.options.name];a.options.pageNumber=Y.page,a.options.top=Y.y}else a.options.top||(a.options.top=0);if(i="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",l="",a.options.url)l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(C(a.options.url))+") >>";else if(a.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,l+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var ue=u(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),l+=" /XYZ "+a.options.left+" "+ue+" "+a.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),s.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},s.link=function(r,a,i,l,d){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(r),y:p(a),w:h(r+i),h:p(a+l)},options:d,type:"link"})},s.textWithLink=function(r,a,i,l){var d,u,h=this.getTextWidth(r),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){u=l.maxWidth;var v=this.splitTextToSize(r,u).length;d=Math.ceil(p*v)}else u=h,d=p;return this.text(r,a,i,l),i+=.2*p,l.align==="center"&&(a-=h/2),l.align==="right"&&(a-=h),this.link(a,i-p,u,d,l),h},s.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(Nt.API),function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];s.__arabicParser__={};var l=s.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},d=s.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},u=s.__arabicParser__.isArabicEndLetter=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length<=2},h=s.__arabicParser__.isArabicAlfLetter=function(j){return d(j)&&i.indexOf(j.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length>=1};var p=s.__arabicParser__.arabicLetterHasFinalForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length>=3};var v=s.__arabicParser__.arabicLetterHasMedialForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length==4},y=s.__arabicParser__.resolveLigatures=function(j){var T=0,A=r,S="",q=0;for(T=0;T<j.length;T+=1)A[j.charCodeAt(T)]!==void 0?(q++,typeof(A=A[j.charCodeAt(T)])=="number"&&(S+=String.fromCharCode(A),A=r,q=0),T===j.length-1&&(A=r,S+=j.charAt(T-(q-1)),T-=q-1,q=0)):(A=r,S+=j.charAt(T-q),T-=q,q=0);return S};s.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&a[j.charCodeAt(0)]!==void 0};var N=s.__arabicParser__.getCorrectForm=function(j,T,A){return d(j)?l(j)===!1?-1:!p(j)||!d(T)&&!d(A)||!d(A)&&u(T)||u(j)&&!d(T)||u(j)&&h(T)||u(j)&&u(T)?0:v(j)&&d(T)&&!u(T)&&d(A)&&p(A)?3:u(j)||!d(A)?1:2:-1},g=function(j){var T=0,A=0,S=0,q="",V="",Y="",ue=(j=j||"").split("\\s+"),le=[];for(T=0;T<ue.length;T+=1){for(le.push(""),A=0;A<ue[T].length;A+=1)q=ue[T][A],V=ue[T][A-1],Y=ue[T][A+1],d(q)?(S=N(q,V,Y),le[T]+=S!==-1?String.fromCharCode(t[q.charCodeAt(0)][S]):q):le[T]+=q;le[T]=y(le[T])}return le.join(" ")},C=s.__arabicParser__.processArabic=s.processArabic=function(){var j,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(T)){var S=0;for(A=[],S=0;S<T.length;S+=1)Array.isArray(T[S])?A.push([g(T[S][0]),T[S][1],T[S][2]]):A.push([g(T[S])]);j=A}else j=g(T);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};s.events.push(["preProcessText",C])}(Nt.API),Nt.API.autoPrint=function(s){var t;switch((s=s||{}).variant=s.variant||"non-conform",s.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(s){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(u){l=u}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(u){d=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var i;if((r=r||"2d")!=="2d")return null;for(i in a)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=a[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Nt.API),function(s){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(j){v=j}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(j){y=j}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(j){N=j}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(j){C=j}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(h){return a.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},s.getTextDimensions=function(h,p){a.call(this);var v=(p=p||{}).fontSize||this.getFontSize(),y=p.font||this.getFont(),N=p.scaleFactor||this.internal.scaleFactor,g=0,C=0,j=0,T=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var A=p.maxWidth;A>0?typeof h=="string"?h=this.splitTextToSize(h,A):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(q,V){return q.concat(T.splitTextToSize(V,A))},[])):h=Array.isArray(h)?h:[h];for(var S=0;S<h.length;S++)g<(j=this.getStringUnitWidth(h[S],{font:y})*v)&&(g=j);return g!==0&&(C=h.length),{w:g/=N,h:Math.max((C*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/N,0)}},s.cellAddPage=function(){a.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=s.cell=function(){var h;h=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var p=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,y=this.internal.__cell__.margins||t,N=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===h.lineNumber?(h.x=(p.x||0)+(p.width||0),h.y=p.y||0):p.y+p.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,g&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=p.y+p.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,r===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-v,h.y+v,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+v,{align:"center",baseline:"top",maxWidth:h.width-v-v}):this.text(h.text,h.x+v,h.y+v,{align:"left",baseline:"top",maxWidth:h.width-v-v})),this.internal.__cell__.lastCell=h,this};s.table=function(h,p,v,y,N){if(a.call(this),!v)throw new Error("No data for PDF table.");var g,C,j,T,A=[],S=[],q=[],V={},Y={},ue=[],le=[],ee=(N=N||{}).autoSize||!1,te=N.printHeaders!==!1,we=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,R=N.margins||Object.assign({width:this.getPageWidth()},t),z=typeof N.padding=="number"?N.padding:3,H=N.headerBackgroundColor||"#c8c8c8",B=N.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=te,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=we,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=B,this.setFontSize(we),y==null)S=A=Object.keys(v[0]),q=A.map(function(){return"left"});else if(Array.isArray(y)&&js(y[0])==="object")for(A=y.map(function(ae){return ae.name}),S=y.map(function(ae){return ae.prompt||ae.name||""}),q=y.map(function(ae){return ae.align||"left"}),g=0;g<y.length;g+=1)Y[y[g].name]=y[g].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(S=A=y,q=A.map(function(){return"left"}));if(ee||Array.isArray(y)&&typeof y[0]=="string")for(g=0;g<A.length;g+=1){for(V[T=A[g]]=v.map(function(ae){return ae[T]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=V[T],this.setFont(void 0,"normal"),j=0;j<C.length;j+=1)ue.push(this.getTextDimensions(C[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[T]=Math.max.apply(null,ue)+z+z,ue=[]}if(te){var pe={};for(g=0;g<A.length;g+=1)pe[A[g]]={},pe[A[g]].text=S[g],pe[A[g]].align=q[g];var he=u.call(this,pe,Y);le=A.map(function(ae){return new l(h,p,Y[ae],he,pe[ae].text,void 0,pe[ae].align)}),this.setTableHeaderRow(le),this.printHeaderRow(1,!1)}var be=y.reduce(function(ae,fe){return ae[fe.name]=fe.align,ae},{});for(g=0;g<v.length;g+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:g,data:v[g]},this);var ne=u.call(this,v[g],Y);for(j=0;j<A.length;j+=1){var xe=v[g][A[j]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:g,col:j,data:xe},this),d.call(this,new l(h,p,Y[A[j]],ne,xe,g+2,be[A[j]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=p,this};var u=function(h,p){var v=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(g){var C=h[g];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,p[g]-v-v)},this).map(function(g){return this.getLineHeightFactor()*g.length*y/N+v+v},this).reduce(function(g,C){return Math.max(g,C)},0)};s.setTableHeaderRow=function(h){a.call(this),this.internal.__cell__.tableHeaderRow=h},s.printHeaderRow=function(h,p){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){v=this.internal.__cell__.tableHeaderRow[g].clone(),p&&(v.y=this.internal.__cell__.margins.top||0,N.push(v)),v.lineNumber=h;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,v),this.setTextColor(C)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),r=!1}}(Nt.API);var Kg={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Jg=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fh=Yg(Jg),Qg=[100,200,300,400,500,600,700,800,900],q5=Yg(Qg);function mh(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),r=function(l){return Kg[l=l||"normal"]?l:"normal"}(s.style),a=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(s.weight),i=function(l){return typeof fh[l=l||"normal"]=="number"?l:"normal"}(s.stretch);return{family:t,style:r,weight:a,stretch:i,src:s.src||[],ref:s.ref||{name:t,style:[i,r,a].join(" ")}}}function wf(s,t,r,a){var i;for(i=r;i>=0&&i<t.length;i+=a)if(s[t[i]])return s[t[i]];for(i=r;i>=0&&i<t.length;i-=a)if(s[t[i]])return s[t[i]]}var H5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Nf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jf(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function $5(s,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},H5,r.genericFontFamilies||{}),l=null,d=null,u=0;u<t.length;++u)if(i[(l=mh(t[u])).family]&&(l.family=i[l.family]),s.hasOwnProperty(l.family)){d=s[l.family];break}if(!(d=d||s[a]))throw new Error("Could not find a font-family for the rule '"+jf(l)+"' and default family '"+a+"'.");if(d=function(h,p){if(p[h])return p[h];var v=fh[h],y=v<=fh.normal?-1:1,N=wf(p,Jg,v,y);if(!N)throw new Error("Could not find a matching font-stretch value for "+h);return N}(l.stretch,d),d=function(h,p){if(p[h])return p[h];for(var v=Kg[h],y=0;y<v.length;++y)if(p[v[y]])return p[v[y]];throw new Error("Could not find a matching font-style for "+h)}(l.style,d),!(d=function(h,p){if(p[h])return p[h];if(h===400&&p[500])return p[500];if(h===500&&p[400])return p[400];var v=q5[h],y=wf(p,Qg,v,h<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+h);return y}(l.weight,d)))throw new Error("Failed to resolve a font for the rule '"+jf(l)+"'.");return d}function _f(s){return s.trimLeft()}function U5(s,t){for(var r=0;r<s.length;){if(s.charAt(r)===t)return[s.substring(0,r),s.substring(r+1)];r+=1}return null}function W5(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var gc,Sf,kf,Rd=["times"];(function(s){var t,r,a,i,l,d,u,h,p,v=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new h,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new d,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new d,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new y(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,p=new v}]);var y=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=E;Object.defineProperty(this,"pdf",{get:function(){return W}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(ge){Z=!!ge}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(ge){X=!!ge}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(ge){isNaN(ge)||(re=ge)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(ge){isNaN(ge)||(de=ge)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(ge){var G;typeof ge=="number"?G=[ge,ge,ge,ge]:((G=new Array(4))[0]=ge[0],G[1]=ge.length>=2?ge[1]:G[0],G[2]=ge.length>=3?ge[2]:G[0],G[3]=ge.length>=4?ge[3]:G[1]),p.margin=G}});var Ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ne},set:function(ge){Ne=ge}});var J=0;Object.defineProperty(this,"lastBreak",{get:function(){return J},set:function(ge){J=ge}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(ge){oe=ge}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(ge){ge instanceof v&&(p=ge)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(ge){p.path=ge}});var ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return ie},set:function(ge){ie=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var G;G=N(ge),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var G=N(ge);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var Te=null;function Q(ge,G){if(Te===null){var We=function(et){var Fe=[];return Object.keys(et).forEach(function(Ve){et[Ve].forEach(function(Je){var Ze=null;switch(Je){case"bold":Ze={family:Ve,weight:"bold"};break;case"italic":Ze={family:Ve,style:"italic"};break;case"bolditalic":Ze={family:Ve,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:Ve}}Ze!==null&&(Ze.ref={name:Ve,style:Je},Fe.push(Ze))})}),Fe}(ge.getFontList());Te=function(et){for(var Fe={},Ve=0;Ve<et.length;++Ve){var Je=mh(et[Ve]),Ze=Je.family,ot=Je.stretch,wt=Je.style,Pt=Je.weight;Fe[Ze]=Fe[Ze]||{},Fe[Ze][ot]=Fe[Ze][ot]||{},Fe[Ze][ot][wt]=Fe[Ze][ot][wt]||{},Fe[Ze][ot][wt][Pt]=Je}return Fe}(We.concat(G))}return Te}var Ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ae},set:function(ge){Te=null,Ae=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var G;if(this.ctx.font=ge,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var We=G[1];G[2];var et=G[3],Fe=G[4];G[5];var Ve=G[6],Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Fe)[2];Fe=Math.floor(Je==="px"?parseFloat(Fe)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(Fe)*this.pdf.getFontSize():parseFloat(Fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Fe);var Ze=function(ft){var Ct,Ge,rr=[],Zt=ft.trim();if(Zt==="")return Rd;if(Zt in Nf)return[Nf[Zt]];for(;Zt!=="";){switch(Ge=null,Ct=(Zt=_f(Zt)).charAt(0)){case'"':case"'":Ge=U5(Zt.substring(1),Ct);break;default:Ge=W5(Zt)}if(Ge===null||(rr.push(Ge[0]),(Zt=_f(Ge[1]))!==""&&Zt.charAt(0)!==","))return Rd;Zt=Zt.replace(/^,/,"")}return rr}(Ve);if(this.fontFaces){var ot=$5(Q(this.pdf,this.fontFaces),Ze.map(function(ft){return{family:ft,stretch:"normal",weight:et,style:We}}));this.pdf.setFont(ot.ref.name,ot.ref.style)}else{var wt="";(et==="bold"||parseInt(et,10)>=700||We==="bold")&&(wt="bold"),We==="italic"&&(wt+="italic"),wt.length===0&&(wt="normal");for(var Pt="",Tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},zt=0;zt<Ze.length;zt++){if(this.pdf.internal.getFont(Ze[zt],wt,{noFallback:!0,disableWarning:!0})!==void 0){Pt=Ze[zt];break}if(wt==="bolditalic"&&this.pdf.internal.getFont(Ze[zt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Pt=Ze[zt],wt="bold";else if(this.pdf.internal.getFont(Ze[zt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Pt=Ze[zt],wt="normal";break}}if(Pt===""){for(var ns=0;ns<Ze.length;ns++)if(Tt[Ze[ns]]){Pt=Tt[Ze[ns]];break}}Pt=Pt===""?"Times":Pt,this.pdf.setFont(Pt,wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};y.prototype.setLineDash=function(E){this.lineDash=E},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){V.call(this,"fill",!1)},y.prototype.stroke=function(){V.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(E,W){if(isNaN(E)||isNaN(W))throw Ls.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new d(E,W));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new d(E,W)},y.prototype.closePath=function(){var E=new d(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&js(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){E=new d(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(E.x,E.y)},y.prototype.lineTo=function(E,W){if(isNaN(E)||isNaN(W))throw Ls.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new d(E,W));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new d(Z.x,Z.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},y.prototype.quadraticCurveTo=function(E,W,Z,X){if(isNaN(Z)||isNaN(X)||isNaN(E)||isNaN(W))throw Ls.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new d(Z,X)),de=this.ctx.transform.applyToPoint(new d(E,W));this.path.push({type:"qct",x1:de.x,y1:de.y,x:re.x,y:re.y}),this.ctx.lastPoint=new d(re.x,re.y)},y.prototype.bezierCurveTo=function(E,W,Z,X,re,de){if(isNaN(re)||isNaN(de)||isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(X))throw Ls.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ne=this.ctx.transform.applyToPoint(new d(re,de)),J=this.ctx.transform.applyToPoint(new d(E,W)),oe=this.ctx.transform.applyToPoint(new d(Z,X));this.path.push({type:"bct",x1:J.x,y1:J.y,x2:oe.x,y2:oe.y,x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new d(Ne.x,Ne.y)},y.prototype.arc=function(E,W,Z,X,re,de){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(X)||isNaN(re))throw Ls.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var Ne=this.ctx.transform.applyToPoint(new d(E,W));E=Ne.x,W=Ne.y;var J=this.ctx.transform.applyToPoint(new d(0,Z)),oe=this.ctx.transform.applyToPoint(new d(0,0));Z=Math.sqrt(Math.pow(J.x-oe.x,2)+Math.pow(J.y-oe.y,2))}Math.abs(re-X)>=2*Math.PI&&(X=0,re=2*Math.PI),this.path.push({type:"arc",x:E,y:W,radius:Z,startAngle:X,endAngle:re,counterclockwise:de})},y.prototype.arcTo=function(E,W,Z,X,re){throw new Error("arcTo not implemented.")},y.prototype.rect=function(E,W,Z,X){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(X))throw Ls.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,W),this.lineTo(E+Z,W),this.lineTo(E+Z,W+X),this.lineTo(E,W+X),this.lineTo(E,W),this.lineTo(E+Z,W),this.lineTo(E,W)},y.prototype.fillRect=function(E,W,Z,X){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(X))throw Ls.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,W,Z,X),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},y.prototype.strokeRect=function(E,W,Z,X){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(X))throw Ls.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(E,W,Z,X),this.stroke())},y.prototype.clearRect=function(E,W,Z,X){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(X))throw Ls.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,W,Z,X))},y.prototype.save=function(E){E=typeof E!="boolean"||E;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},y.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(W),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(E){var W,Z,X,re;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))W=0,Z=0,X=0,re=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(de!==null)W=parseInt(de[1]),Z=parseInt(de[2]),X=parseInt(de[3]),re=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)W=parseInt(de[1]),Z=parseInt(de[2]),X=parseInt(de[3]),re=parseFloat(de[4]);else{if(re=1,typeof E=="string"&&E.charAt(0)!=="#"){var Ne=new $g(E);E=Ne.ok?Ne.toHex():"#000000"}E.length===4?(W=E.substring(1,2),W+=W,Z=E.substring(2,3),Z+=Z,X=E.substring(3,4),X+=X):(W=E.substring(1,3),Z=E.substring(3,5),X=E.substring(5,7)),W=parseInt(W,16),Z=parseInt(Z,16),X=parseInt(X,16)}}return{r:W,g:Z,b:X,a:re,style:E}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(E,W,Z,X){if(isNaN(W)||isNaN(Z)||typeof E!="string")throw Ls.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!g.call(this)){var re=ne(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;z.call(this,{text:E,x:W,y:Z,scale:de,angle:re,align:this.textAlign,maxWidth:X})}},y.prototype.strokeText=function(E,W,Z,X){if(isNaN(W)||isNaN(Z)||typeof E!="string")throw Ls.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){X=isNaN(X)?void 0:X;var re=ne(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;z.call(this,{text:E,x:W,y:Z,scale:de,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:X})}},y.prototype.measureText=function(E){if(typeof E!="string")throw Ls.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Z=this.pdf.internal.scaleFactor,X=W.internal.getFontSize(),re=W.getStringUnitWidth(E)*X/W.internal.scaleFactor,de=function(Ne){var J=(Ne=Ne||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return J}}),this};return new de({width:re*=Math.round(96*Z/72*1e4)/1e4})},y.prototype.scale=function(E,W){if(isNaN(E)||isNaN(W))throw Ls.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new h(E,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},y.prototype.rotate=function(E){if(isNaN(E))throw Ls.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new h(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},y.prototype.translate=function(E,W){if(isNaN(E)||isNaN(W))throw Ls.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new h(1,0,0,1,E,W);this.ctx.transform=this.ctx.transform.multiply(Z)},y.prototype.transform=function(E,W,Z,X,re,de){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(X)||isNaN(re)||isNaN(de))throw Ls.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ne=new h(E,W,Z,X,re,de);this.ctx.transform=this.ctx.transform.multiply(Ne)},y.prototype.setTransform=function(E,W,Z,X,re,de){E=isNaN(E)?1:E,W=isNaN(W)?0:W,Z=isNaN(Z)?0:Z,X=isNaN(X)?1:X,re=isNaN(re)?0:re,de=isNaN(de)?0:de,this.ctx.transform=new h(E,W,Z,X,re,de)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(E,W,Z,X,re,de,Ne,J,oe){var ie=this.pdf.getImageProperties(E),Te=1,Q=1,Ae=1,ge=1;X!==void 0&&J!==void 0&&(Ae=J/X,ge=oe/re,Te=ie.width/X*J/X,Q=ie.height/re*oe/re),de===void 0&&(de=W,Ne=Z,W=0,Z=0),X!==void 0&&J===void 0&&(J=X,oe=re),X===void 0&&J===void 0&&(J=ie.width,oe=ie.height);for(var G,We=this.ctx.transform.decompose(),et=ne(We.rotate.shx),Fe=new h,Ve=(Fe=(Fe=(Fe=Fe.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new u(de-W*Ae,Ne-Z*ge,X*Te,re*Q)),Je=T.call(this,Ve),Ze=[],ot=0;ot<Je.length;ot+=1)Ze.indexOf(Je[ot])===-1&&Ze.push(Je[ot]);if(q(Ze),this.autoPaging)for(var wt=Ze[0],Pt=Ze[Ze.length-1],Tt=wt;Tt<Pt+1;Tt++){this.pdf.setPage(Tt);var zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ns=Tt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=Tt===1?0:ft+(Tt-2)*Ct;if(this.ctx.clip_path.length!==0){var rr=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(G,this.posX+this.margin[3],-Ge+ns+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=rr}var Zt=JSON.parse(JSON.stringify(Ve));Zt=S([Zt],this.posX+this.margin[3],-Ge+ns+this.ctx.prevPageLastElemOffset)[0];var xr=(Tt>wt||Tt<Pt)&&j.call(this);xr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,Ct,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,et),xr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,et)};var T=function(E,W,Z){var X=[];W=W||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":X.push(Math.floor((E.y+re)/Z)+1);break;case"arc":X.push(Math.floor((E.y+re-E.radius)/Z)+1),X.push(Math.floor((E.y+re+E.radius)/Z)+1);break;case"qct":var de=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);X.push(Math.floor((de.y+re)/Z)+1),X.push(Math.floor((de.y+de.h+re)/Z)+1);break;case"bct":var Ne=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);X.push(Math.floor((Ne.y+re)/Z)+1),X.push(Math.floor((Ne.y+Ne.h+re)/Z)+1);break;case"rect":X.push(Math.floor((E.y+re)/Z)+1),X.push(Math.floor((E.y+E.h+re)/Z)+1)}for(var J=0;J<X.length;J+=1)for(;this.pdf.internal.getNumberOfPages()<X[J];)A.call(this);return X},A=function(){var E=this.fillStyle,W=this.strokeStyle,Z=this.font,X=this.lineCap,re=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=W,this.font=Z,this.lineCap=X,this.lineWidth=re,this.lineJoin=de},S=function(E,W,Z){for(var X=0;X<E.length;X++)switch(E[X].type){case"bct":E[X].x2+=W,E[X].y2+=Z;case"qct":E[X].x1+=W,E[X].y1+=Z;case"mt":case"lt":case"arc":default:E[X].x+=W,E[X].y+=Z}return E},q=function(E){return E.sort(function(W,Z){return W-Z})},V=function(E,W){for(var Z,X,re=this.fillStyle,de=this.strokeStyle,Ne=this.lineCap,J=this.lineWidth,oe=Math.abs(J*this.ctx.transform.scaleX),ie=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Q=JSON.parse(JSON.stringify(this.path)),Ae=[],ge=0;ge<Q.length;ge++)if(Q[ge].x!==void 0)for(var G=T.call(this,Q[ge]),We=0;We<G.length;We+=1)Ae.indexOf(G[We])===-1&&Ae.push(G[We]);for(var et=0;et<Ae.length;et++)for(;this.pdf.internal.getNumberOfPages()<Ae[et];)A.call(this);if(q(Ae),this.autoPaging)for(var Fe=Ae[0],Ve=Ae[Ae.length-1],Je=Fe;Je<Ve+1;Je++){this.pdf.setPage(Je),this.fillStyle=re,this.strokeStyle=de,this.lineCap=Ne,this.lineWidth=oe,this.lineJoin=ie;var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Je===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Tt=Je===1?0:wt+(Je-2)*Pt;if(this.ctx.clip_path.length!==0){var zt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Z,this.posX+this.margin[3],-Tt+ot+this.ctx.prevPageLastElemOffset),Y.call(this,E,!0),this.path=zt}if(X=JSON.parse(JSON.stringify(Te)),this.path=S(X,this.posX+this.margin[3],-Tt+ot+this.ctx.prevPageLastElemOffset),W===!1||Je===0){var ns=(Je>Fe||Je<Ve)&&j.call(this);ns&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Pt,null).clip().discardPath()),Y.call(this,E,W),ns&&this.pdf.restoreGraphicsState()}this.lineWidth=J}else this.lineWidth=oe,Y.call(this,E,W),this.lineWidth=J;this.path=Te},Y=function(E,W){if((E!=="stroke"||W||!C.call(this))&&(E==="stroke"||W||!g.call(this))){for(var Z,X,re=[],de=this.path,Ne=0;Ne<de.length;Ne++){var J=de[Ne];switch(J.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:J,deltas:[],abs:[]});break;case"lt":var oe=re.length;if(de[Ne-1]&&!isNaN(de[Ne-1].x)&&(Z=[J.x-de[Ne-1].x,J.y-de[Ne-1].y],oe>0)){for(;oe>=0;oe--)if(re[oe-1].close!==!0&&re[oe-1].begin!==!0){re[oe-1].deltas.push(Z),re[oe-1].abs.push(J);break}}break;case"bct":Z=[J.x1-de[Ne-1].x,J.y1-de[Ne-1].y,J.x2-de[Ne-1].x,J.y2-de[Ne-1].y,J.x-de[Ne-1].x,J.y-de[Ne-1].y],re[re.length-1].deltas.push(Z);break;case"qct":var ie=de[Ne-1].x+2/3*(J.x1-de[Ne-1].x),Te=de[Ne-1].y+2/3*(J.y1-de[Ne-1].y),Q=J.x+2/3*(J.x1-J.x),Ae=J.y+2/3*(J.y1-J.y),ge=J.x,G=J.y;Z=[ie-de[Ne-1].x,Te-de[Ne-1].y,Q-de[Ne-1].x,Ae-de[Ne-1].y,ge-de[Ne-1].x,G-de[Ne-1].y],re[re.length-1].deltas.push(Z);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(J)}}X=W?null:E==="stroke"?"stroke":"fill";for(var We=!1,et=0;et<re.length;et++)if(re[et].arc)for(var Fe=re[et].abs,Ve=0;Ve<Fe.length;Ve++){var Je=Fe[Ve];Je.type==="arc"?ee.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,W,!We):H.call(this,Je.x,Je.y),We=!0}else if(re[et].close===!0)this.pdf.internal.out("h"),We=!1;else if(re[et].begin!==!0){var Ze=re[et].start.x,ot=re[et].start.y;B.call(this,re[et].deltas,Ze,ot),We=!0}X&&te.call(this,X),W&&we.call(this)}},ue=function(E){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-Z;case"top":return E+W-Z;case"hanging":return E+W-2*Z;case"middle":return E+W/2-Z;case"ideographic":return E;case"alphabetic":default:return E}},le=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(W,Z){this.colorStops.push([W,Z])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ee=function(E,W,Z,X,re,de,Ne,J,oe){for(var ie=he.call(this,Z,X,re,de),Te=0;Te<ie.length;Te++){var Q=ie[Te];Te===0&&(oe?R.call(this,Q.x1+E,Q.y1+W):H.call(this,Q.x1+E,Q.y1+W)),pe.call(this,E,W,Q.x2,Q.y2,Q.x3,Q.y3,Q.x4,Q.y4)}J?we.call(this):te.call(this,Ne)},te=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},we=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(E,W){this.pdf.internal.out(r(E)+" "+a(W)+" m")},z=function(E){var W;switch(E.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Z=this.pdf.getTextDimensions(E.text),X=ue.call(this,E.y),re=le.call(this,X)-Z.h,de=this.ctx.transform.applyToPoint(new d(E.x,X)),Ne=this.ctx.transform.decompose(),J=new h;J=(J=(J=J.multiply(Ne.translate)).multiply(Ne.skew)).multiply(Ne.scale);for(var oe,ie,Te,Q=this.ctx.transform.applyToRectangle(new u(E.x,X,Z.w,Z.h)),Ae=J.applyToRectangle(new u(E.x,re,Z.w,Z.h)),ge=T.call(this,Ae),G=[],We=0;We<ge.length;We+=1)G.indexOf(ge[We])===-1&&G.push(ge[We]);if(q(G),this.autoPaging)for(var et=G[0],Fe=G[G.length-1],Ve=et;Ve<Fe+1;Ve++){this.pdf.setPage(Ve);var Je=Ve===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[2],wt=ot-this.margin[0],Pt=this.pdf.internal.pageSize.width-this.margin[1],Tt=Pt-this.margin[3],zt=Ve===1?0:Ze+(Ve-2)*wt;if(this.ctx.clip_path.length!==0){var ns=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(oe,this.posX+this.margin[3],-1*zt+Je),Y.call(this,"fill",!0),this.path=ns}var ft=S([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-zt+Je+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*E.scale),Te=this.lineWidth,this.lineWidth=Te*E.scale);var Ct=this.autoPaging!=="text";if(Ct||ft.y+ft.h<=ot){if(Ct||ft.y>=Je&&ft.x<=Pt){var Ge=Ct?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||Pt-ft.x)[0],rr=S([JSON.parse(JSON.stringify(Q))],this.posX+this.margin[3],-zt+Je+this.ctx.prevPageLastElemOffset)[0],Zt=Ct&&(Ve>et||Ve<Fe)&&j.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,wt,null).clip().discardPath()),this.pdf.text(Ge,rr.x,rr.y,{angle:E.angle,align:W,renderingMode:E.renderingMode}),Zt&&this.pdf.restoreGraphicsState()}}else ft.y<ot&&(this.ctx.prevPageLastElemOffset+=ot-ft.y);E.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=Te)}else E.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*E.scale),Te=this.lineWidth,this.lineWidth=Te*E.scale),this.pdf.text(E.text,de.x+this.posX,de.y+this.posY,{angle:E.angle,align:W,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=Te)},H=function(E,W,Z,X){Z=Z||0,X=X||0,this.pdf.internal.out(r(E+Z)+" "+a(W+X)+" l")},B=function(E,W,Z){return this.pdf.lines(E,W,Z,null,null)},pe=function(E,W,Z,X,re,de,Ne,J){this.pdf.internal.out([t(i(Z+E)),t(l(X+W)),t(i(re+E)),t(l(de+W)),t(i(Ne+E)),t(l(J+W)),"c"].join(" "))},he=function(E,W,Z,X){for(var re=2*Math.PI,de=Math.PI/2;W>Z;)W-=re;var Ne=Math.abs(Z-W);Ne<re&&X&&(Ne=re-Ne);for(var J=[],oe=X?-1:1,ie=W;Ne>1e-5;){var Te=ie+oe*Math.min(Ne,de);J.push(be.call(this,E,ie,Te)),Ne-=Math.abs(Te-ie),ie=Te}return J},be=function(E,W,Z){var X=(Z-W)/2,re=E*Math.cos(X),de=E*Math.sin(X),Ne=re,J=-de,oe=Ne*Ne+J*J,ie=oe+Ne*re+J*de,Te=4/3*(Math.sqrt(2*oe*ie)-ie)/(Ne*de-J*re),Q=Ne-Te*J,Ae=J+Te*Ne,ge=Q,G=-Ae,We=X+W,et=Math.cos(We),Fe=Math.sin(We);return{x1:E*Math.cos(W),y1:E*Math.sin(W),x2:Q*et-Ae*Fe,y2:Q*Fe+Ae*et,x3:ge*et-G*Fe,y3:ge*Fe+G*et,x4:E*Math.cos(Z),y4:E*Math.sin(Z)}},ne=function(E){return 180*E/Math.PI},xe=function(E,W,Z,X,re,de){var Ne=E+.5*(Z-E),J=W+.5*(X-W),oe=re+.5*(Z-re),ie=de+.5*(X-de),Te=Math.min(E,re,Ne,oe),Q=Math.max(E,re,Ne,oe),Ae=Math.min(W,de,J,ie),ge=Math.max(W,de,J,ie);return new u(Te,Ae,Q-Te,ge-Ae)},ae=function(E,W,Z,X,re,de,Ne,J){var oe,ie,Te,Q,Ae,ge,G,We,et,Fe,Ve,Je,Ze,ot,wt=Z-E,Pt=X-W,Tt=re-Z,zt=de-X,ns=Ne-re,ft=J-de;for(ie=0;ie<41;ie++)et=(G=(Te=E+(oe=ie/40)*wt)+oe*((Ae=Z+oe*Tt)-Te))+oe*(Ae+oe*(re+oe*ns-Ae)-G),Fe=(We=(Q=W+oe*Pt)+oe*((ge=X+oe*zt)-Q))+oe*(ge+oe*(de+oe*ft-ge)-We),ie==0?(Ve=et,Je=Fe,Ze=et,ot=Fe):(Ve=Math.min(Ve,et),Je=Math.min(Je,Fe),Ze=Math.max(Ze,et),ot=Math.max(ot,Fe));return new u(Math.round(Ve),Math.round(Je),Math.round(Ze-Ve),Math.round(ot-Je))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,W,Z=(E=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:W}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Nt.API),function(s){var t=function(l){var d,u,h,p,v,y,N,g,C,j;for(u=[],h=0,p=(l+=d="\0\0\0\0".slice(l.length%4||4)).length;p>h;h+=4)(v=(l.charCodeAt(h)<<24)+(l.charCodeAt(h+1)<<16)+(l.charCodeAt(h+2)<<8)+l.charCodeAt(h+3))!==0?(y=(v=((v=((v=((v=(v-(j=v%85))/85)-(C=v%85))/85)-(g=v%85))/85)-(N=v%85))/85)%85,u.push(y+33,N+33,g+33,C+33,j+33)):u.push(122);return function(T,A){for(var S=A;S>0;S--)T.pop()}(u,d.length),String.fromCharCode.apply(String,u)+"~>"},r=function(l){var d,u,h,p,v,y=String,N="length",g=255,C="charCodeAt",j="slice",T="replace";for(l[j](-2),l=l[j](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),h=[],p=0,v=(l+=d="uuuuu"[j](l[N]%5||5))[N];v>p;p+=5)u=52200625*(l[C](p)-33)+614125*(l[C](p+1)-33)+7225*(l[C](p+2)-33)+85*(l[C](p+3)-33)+(l[C](p+4)-33),h.push(g&u>>24,g&u>>16,g&u>>8,g&u);return function(A,S){for(var q=S;q>0;q--)A.pop()}(h,d[N]),y.fromCharCode.apply(y,h)},a=function(l){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),d.test(l)===!1)return"";for(var u="",h=0;h<l.length;h+=2)u+=String.fromCharCode("0x"+(l[h]+l[h+1]));return u},i=function(l){for(var d=new Uint8Array(l.length),u=l.length;u--;)d[u]=l.charCodeAt(u);return l=(d=lh(d)).reduce(function(h,p){return h+String.fromCharCode(p)},"")};s.processDataByFilters=function(l,d){var u=0,h=l||"",p=[];for(typeof(d=d||[])=="string"&&(d=[d]),u=0;u<d.length;u+=1)switch(d[u]){case"ASCII85Decode":case"/ASCII85Decode":h=r(h),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=a(h),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=i(h),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[u]+'" is not implemented')}return{data:h,reverseChain:p.reverse().join(" ")}}}(Nt.API),function(s){s.loadFile=function(t,r,a){return function(i,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var u=void 0;try{u=function(h,p,v){var y=new XMLHttpRequest,N=0,g=function(C){var j=C.length,T=[],A=String.fromCharCode;for(N=0;N<j;N+=1)T.push(A(255&C.charCodeAt(N)));return T.join("")};if(y.open("GET",h,!p),y.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(y.onload=function(){y.status===200?v(g(this.responseText)):v(void 0)}),y.send(null),p&&y.status===200)return g(y.responseText)}(i,l,d)}catch{}return u}(t,r,a)},s.loadImageFile=s.loadFile}(Nt.API),function(s){function t(){return(kt.html2canvas?Promise.resolve(kt.html2canvas):rh(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function r(){return(kt.DOMPurify?Promise.resolve(kt.DOMPurify):rh(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var a=function(d){var u=js(d);return u==="undefined"?"undefined":u==="string"||d instanceof String?"string":u==="number"||d instanceof Number?"number":u==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(d,u){var h=document.createElement(d);for(var p in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[p]=u.style[p];return h},l=function d(u){var h=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),p=d.convert(Promise.resolve(),h);return p=(p=p.setProgress(1,d,1,[d])).set(u)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(d,u){return d.__proto__=u||l.prototype,d},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(d,u){return this.then(function(){switch(u=u||function(h){switch(a(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(d)){case"string":return this.then(r).then(function(h){return this.set({src:i("div",{innerHTML:d,dompurify:h})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},l.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function h(p,v){for(var y=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),N=p.firstChild;N;N=N.nextSibling)v!==!0&&N.nodeType===1&&N.nodeName==="SCRIPT"||y.appendChild(h(N,v));return p.nodeType===1&&(p.nodeName==="CANVAS"?(y.width=p.width,y.height=p.height,y.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(y.value=p.value),y.addEventListener("load",function(){y.scrollTop=p.scrollTop,y.scrollLeft=p.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(t).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(t).then(function(u){var h=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=p,p)for(var N=0;N<p.length;++N){var g=p[N],C=g.src.find(function(j){return j.format==="truetype"});C&&h.addFont(C.url,g.ref.name,g.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(d,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(d,u):this.outputPdf(d,u)},l.prototype.outputPdf=function(d,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,u)})},l.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},l.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(d){if(a(d)!=="object")return this;var u=Object.keys(d||{}).map(function(h){if(h in l.template.prop)return function(){this.prop[h]=d[h]};switch(h){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[h]=d[h]}}},this);return this.then(function(){return this.thenList(u)})},l.prototype.get=function(d,u){return this.then(function(){var h=d in l.template.prop?this.prop[d]:this.opt[d];return u?u(h):h})},l.prototype.setMargin=function(d){return this.then(function(){switch(a(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},l.prototype.setPageSize=function(d){function u(h,p){return Math.floor(h*p/72*96)}return this.then(function(){(d=d||Nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:u(d.inner.width,d.k),height:u(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},l.prototype.setProgress=function(d,u,h,p){return d!=null&&(this.progress.val=d),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(d,u,h,p){return this.setProgress(d?this.progress.val+d:null,u||null,h?this.progress.n+h:null,p?this.progress.stack.concat(p):null)},l.prototype.then=function(d,u){var h=this;return this.thenCore(d,u,function(p,v){return h.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,p),y}).then(p,v).then(function(y){return h.updateProgress(1),y})})},l.prototype.thenCore=function(d,u,h){h=h||Promise.prototype.then,d&&(d=d.bind(this)),u&&(u=u.bind(this));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),v=h.call(p,d,u);return l.convert(v,this.__proto__)},l.prototype.thenExternal=function(d,u){return Promise.prototype.then.call(this,d,u)},l.prototype.thenList=function(d){var u=this;return d.forEach(function(h){u=u.thenCore(h)}),u},l.prototype.catch=function(d){d&&(d=d.bind(this));var u=Promise.prototype.catch.call(this,d);return l.convert(u,this)},l.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},l.prototype.error=function(d){return this.then(function(){throw new Error(d)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Nt.getPageSize=function(d,u,h){if(js(d)==="object"){var p=d;d=p.orientation,u=p.unit||u,h=p.format||h}u=u||"mm",h=h||"a4",d=(""+(d||"P")).toLowerCase();var v,y=(""+h).toLowerCase(),N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+u}var g,C=0,j=0;if(N.hasOwnProperty(y))C=N[y][1]/v,j=N[y][0]/v;else try{C=h[1],j=h[0]}catch{throw new Error("Invalid format: "+h)}if(d==="p"||d==="portrait")d="p",j>C&&(g=j,j=C,C=g);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>j&&(g=j,j=C,C=g)}return{width:j,height:C,unit:u,k:v,orientation:d}},s.html=function(d,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(mh):null;var h=new l(u);return u.worker?h:h.from(d).doCallback()}}(Nt.API),Nt.API.addJS=function(s){return kf=s,this.internal.events.subscribe("postPutResources",function(){gc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Sf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+kf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gc!==void 0&&Sf!==void 0&&this.internal.out("/Names <</JavaScript "+gc+" 0 R>>")}),this},function(s){var t;s.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),l=0;l<i.length;l++){var d=i[l],u=a.exec(d);if(u!=null){var h=u[1];r.internal.newObjectDeferredBegin(h,!1)}r.internal.write(d)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,v=[];for(l=0;l<p;l++){var y=r.internal.newObject();v.push(y);var N=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<v.length;l++)r.internal.write("(page_"+(l+1)+")"+v[l]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,i,l){var d={title:i,options:l,children:[]};return a==null&&(a=this.root),a.children.push(d),d},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var i=0;i<a.children.length;i++)this.genIds_r(a.children[i])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<a.children.length;l++){var d=a.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(a)),l>0&&this.line("/Prev "+this.makeRef(a.children[l-1])),l<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var u=this.count=this.count_r({count:0},d);if(u>0&&this.line("/Count "+u),d.options&&d.options.pageNumber){var h=r.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var p=0;p<a.children.length;p++)this.renderItems(a.children[p])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,i){for(var l=0;l<i.children.length;l++)a.count++,this.count_r(a,i.children[l]);return a.count}}])}(Nt.API),function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(r,a,i,l,d,u){var h,p=this.decode.DCT_DECODE,v=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=d||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(h=function(y){for(var N,g=256*y.charCodeAt(4)+y.charCodeAt(5),C=y.length,j={width:0,height:0,numcomponents:1},T=4;T<C;T+=2){if(T+=g,t.indexOf(y.charCodeAt(T+1))!==-1){N=256*y.charCodeAt(T+5)+y.charCodeAt(T+6),j={width:256*y.charCodeAt(T+7)+y.charCodeAt(T+8),height:N,numcomponents:y.charCodeAt(T+9)};break}g=256*y.charCodeAt(T+2)+y.charCodeAt(T+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}v={data:r,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:p,index:a,alias:i}}return v}}(Nt.API);var Wo,xc,Pf,Cf,Lf,V5=function(){var s,t,r;function a(l){var d,u,h,p,v,y,N,g,C,j,T,A,S,q;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(d=this.readUInt32(),C=(function(){var V,Y;for(Y=[],V=0;V<4;++V)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(d);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),p=this.readUInt16()||100,y.delay=1e3*v/p,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,d-=4),l=y?.data||this.imgData,A=0;0<=d?A<d:A>d;0<=d?++A:--A)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(d),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((j=h-this.transparency.indexed.length)>0)for(S=0;0<=j?S<j:S>j;0<=j?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(d)[0];break;case 2:this.transparency.rgb=this.read(d)}break;case"tEXt":N=(T=this.read(d)).indexOf(0),g=String.fromCharCode.apply(String,T.slice(0,N)),this.text[g]=String.fromCharCode.apply(String,T.slice(N+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(q=this.colorType)===4||q===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=d}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(l){var d,u;for(u=[],d=0;0<=l?d<l:d>l;0<=l?++d:--d)u.push(this.data[this.pos++]);return u},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var d=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*d),h=0,p=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function v(y,N,g,C){var j,T,A,S,q,V,Y,ue,le,ee,te,we,R,z,H,B,pe,he,be,ne,xe,ae=Math.ceil((p.width-y)/g),fe=Math.ceil((p.height-N)/C),E=p.width==ae&&p.height==fe;for(z=d*ae,we=E?u:new Uint8Array(z*fe),V=l.length,R=0,T=0;R<fe&&h<V;){switch(l[h++]){case 0:for(S=pe=0;pe<z;S=pe+=1)we[T++]=l[h++];break;case 1:for(S=he=0;he<z;S=he+=1)j=l[h++],q=S<d?0:we[T-d],we[T++]=(j+q)%256;break;case 2:for(S=be=0;be<z;S=be+=1)j=l[h++],A=(S-S%d)/d,H=R&&we[(R-1)*z+A*d+S%d],we[T++]=(H+j)%256;break;case 3:for(S=ne=0;ne<z;S=ne+=1)j=l[h++],A=(S-S%d)/d,q=S<d?0:we[T-d],H=R&&we[(R-1)*z+A*d+S%d],we[T++]=(j+Math.floor((q+H)/2))%256;break;case 4:for(S=xe=0;xe<z;S=xe+=1)j=l[h++],A=(S-S%d)/d,q=S<d?0:we[T-d],R===0?H=B=0:(H=we[(R-1)*z+A*d+S%d],B=A&&we[(R-1)*z+(A-1)*d+S%d]),Y=q+H-B,ue=Math.abs(Y-q),ee=Math.abs(Y-H),te=Math.abs(Y-B),le=ue<=ee&&ue<=te?q:ee<=te?H:B,we[T++]=(j+le)%256;break;default:throw new Error("Invalid filter algorithm: "+l[h-1])}if(!E){var W=((N+R*C)*p.width+y)*d,Z=R*z;for(S=0;S<ae;S+=1){for(var X=0;X<d;X+=1)u[W++]=we[Z++];W+=(g-1)*d}}R++}}return l=_5(l),p.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),u},a.prototype.decodePalette=function(){var l,d,u,h,p,v,y,N,g;for(u=this.palette,v=this.transparency.indexed||[],p=new Uint8Array((v.length||0)+u.length),h=0,l=0,d=y=0,N=u.length;y<N;d=y+=3)p[h++]=u[d],p[h++]=u[d+1],p[h++]=u[d+2],p[h++]=(g=v[l++])!=null?g:255;return p},a.prototype.copyToImageData=function(l,d){var u,h,p,v,y,N,g,C,j,T,A;if(h=this.colors,j=null,u=this.hasAlphaChannel,this.palette.length&&(j=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),h=4,u=!0),C=(p=l.data||l).length,y=j||d,v=N=0,h===1)for(;v<C;)g=j?4*d[v/4]:N,T=y[g++],p[v++]=T,p[v++]=T,p[v++]=T,p[v++]=u?y[g++]:255,N=g;else for(;v<C;)g=j?4*d[v/4]:N,p[v++]=y[g++],p[v++]=y[g++],p[v++]=y[g++],p[v++]=u?y[g++]:255,N=g},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var i=function(){if(Object.prototype.toString.call(kt)==="[object Window]"){try{t=kt.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),s=function(l){var d;if(i()===!0)return r.width=l.width,r.height=l.height,r.clearRect(0,0,l.width,l.height),r.putImageData(l,0,0),(d=new Image).src=t.toDataURL(),d;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(l){var d,u,h,p,v,y,N,g;if(this.animation){for(g=[],u=v=0,y=(N=this.animation.frames).length;v<y;u=++v)d=N[u],h=l.createImageData(d.width,d.height),p=this.decodePixels(new Uint8Array(d.data)),this.copyToImageData(h,p),d.imageData=h,g.push(d.image=s(h));return g}},a.prototype.renderFrame=function(l,d){var u,h,p;return u=(h=this.animation.frames)[d],p=h[d-1],d===0&&l.clearRect(0,0,this.width,this.height),p?.disposeOp===1?l.clearRect(p.xOffset,p.yOffset,p.width,p.height):p?.disposeOp===2&&l.putImageData(p.imageData,p.xOffset,p.yOffset),u.blendOp===0&&l.clearRect(u.xOffset,u.yOffset,u.width,u.height),l.drawImage(u.image,u.xOffset,u.yOffset)},a.prototype.animate=function(l){var d,u,h,p,v,y,N=this;return u=0,y=this.animation,p=y.numFrames,h=y.frames,v=y.numPlays,(d=function(){var g,C;if(g=u++%p,C=h[g],N.renderFrame(l,g),p>1&&u/p<v)return N.animation._timeout=setTimeout(d,C.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var d,u;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,d=l.getContext("2d"),this.animation?(this.decodeFrames(d),this.animate(d)):(u=d.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),d.putImageData(u,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Z5(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=s[t++]|s[t++]<<8,a=s[t++]|s[t++]<<8,i=s[t++],l=i>>7,d=1<<(7&i)+1;s[t++],s[t++];var u=null,h=null;l&&(u=t,h=d,t+=3*d);var p=!0,v=[],y=0,N=null,g=0,C=null;for(this.width=r,this.height=a;p&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,C=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((R=s[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=s[t++];y=s[t++]|s[t++]<<8,N=s[t++],(1&j)==0&&(N=null),g=j>>2&7,t++;break;case 254:for(;;){if(!((R=s[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var T=s[t++]|s[t++]<<8,A=s[t++]|s[t++]<<8,S=s[t++]|s[t++]<<8,q=s[t++]|s[t++]<<8,V=s[t++],Y=V>>6&1,ue=1<<(7&V)+1,le=u,ee=h,te=!1;V>>7&&(te=!0,le=t,ee=ue,t+=3*ue);var we=t;for(t++;;){var R;if(!((R=s[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}v.push({x:T,y:A,width:S,height:q,has_local_palette:te,palette_offset:le,palette_size:ee,data_offset:we,data_length:t-we,transparent_index:N,interlaced:!!Y,delay:y,disposal:g});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return C},this.frameInfo=function(z){if(z<0||z>=v.length)throw new Error("Frame index out of range.");return v[z]},this.decodeAndBlitFrameBGRA=function(z,H){var B=this.frameInfo(z),pe=B.width*B.height,he=new Uint8Array(pe);Af(s,B.data_offset,he,pe);var be=B.palette_offset,ne=B.transparent_index;ne===null&&(ne=256);var xe=B.width,ae=r-xe,fe=xe,E=4*(B.y*r+B.x),W=4*((B.y+B.height)*r+B.x),Z=E,X=4*ae;B.interlaced===!0&&(X+=4*r*7);for(var re=8,de=0,Ne=he.length;de<Ne;++de){var J=he[de];if(fe===0&&(fe=xe,(Z+=X)>=W&&(X=4*ae+4*r*(re-1),Z=E+(xe+ae)*(re<<1),re>>=1)),J===ne)Z+=4;else{var oe=s[be+3*J],ie=s[be+3*J+1],Te=s[be+3*J+2];H[Z++]=Te,H[Z++]=ie,H[Z++]=oe,H[Z++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(z,H){var B=this.frameInfo(z),pe=B.width*B.height,he=new Uint8Array(pe);Af(s,B.data_offset,he,pe);var be=B.palette_offset,ne=B.transparent_index;ne===null&&(ne=256);var xe=B.width,ae=r-xe,fe=xe,E=4*(B.y*r+B.x),W=4*((B.y+B.height)*r+B.x),Z=E,X=4*ae;B.interlaced===!0&&(X+=4*r*7);for(var re=8,de=0,Ne=he.length;de<Ne;++de){var J=he[de];if(fe===0&&(fe=xe,(Z+=X)>=W&&(X=4*ae+4*r*(re-1),Z=E+(xe+ae)*(re<<1),re>>=1)),J===ne)Z+=4;else{var oe=s[be+3*J],ie=s[be+3*J+1],Te=s[be+3*J+2];H[Z++]=oe,H[Z++]=ie,H[Z++]=Te,H[Z++]=255}--fe}}}function Af(s,t,r,a){for(var i=s[t++],l=1<<i,d=l+1,u=d+1,h=i+1,p=(1<<h)-1,v=0,y=0,N=0,g=s[t++],C=new Int32Array(4096),j=null;;){for(;v<16&&g!==0;)y|=s[t++]<<v,v+=8,g===1?g=s[t++]:--g;if(v<h)break;var T=y&p;if(y>>=h,v-=h,T!==l){if(T===d)break;for(var A=T<u?T:j,S=0,q=A;q>l;)q=C[q]>>8,++S;var V=q;if(N+S+(A!==T?1:0)>a)return void Ls.log("Warning, gif stream longer than expected.");r[N++]=V;var Y=N+=S;for(A!==T&&(r[N++]=V),q=A;S--;)q=C[q],r[--Y]=255&q,q>>=8;j!==null&&u<4096&&(C[u++]=j<<8|V,u>=p+1&&h<12&&(++h,p=p<<1|1)),j=T}else u=d+1,p=(1<<(h=i+1))-1,j=null}return N!==a&&Ls.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Od(s){var t,r,a,i,l,d=Math.floor,u=new Array(64),h=new Array(64),p=new Array(64),v=new Array(64),y=new Array(65535),N=new Array(65535),g=new Array(64),C=new Array(64),j=[],T=0,A=7,S=new Array(64),q=new Array(64),V=new Array(64),Y=new Array(256),ue=new Array(2048),le=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ee=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(E,W){for(var Z=0,X=0,re=new Array,de=1;de<=16;de++){for(var Ne=1;Ne<=E[de];Ne++)re[W[X]]=[],re[W[X]][0]=Z,re[W[X]][1]=de,X++,Z++;Z*=2}return re}function be(E){for(var W=E[0],Z=E[1]-1;Z>=0;)W&1<<Z&&(T|=1<<A),Z--,--A<0&&(T==255?(ne(255),ne(0)):ne(T),A=7,T=0)}function ne(E){j.push(E)}function xe(E){ne(E>>8&255),ne(255&E)}function ae(E,W,Z,X,re){for(var de,Ne=re[0],J=re[240],oe=function(Fe,Ve){var Je,Ze,ot,wt,Pt,Tt,zt,ns,ft,Ct,Ge=0;for(ft=0;ft<8;++ft){Je=Fe[Ge],Ze=Fe[Ge+1],ot=Fe[Ge+2],wt=Fe[Ge+3],Pt=Fe[Ge+4],Tt=Fe[Ge+5],zt=Fe[Ge+6];var rr=Je+(ns=Fe[Ge+7]),Zt=Je-ns,xr=Ze+zt,is=Ze-zt,os=ot+Tt,vr=ot-Tt,Kt=wt+Pt,Yn=wt-Pt,_s=rr+Kt,Dr=rr-Kt,dn=xr+os,As=xr-os;Fe[Ge]=_s+dn,Fe[Ge+4]=_s-dn;var Lt=.707106781*(As+Dr);Fe[Ge+2]=Dr+Lt,Fe[Ge+6]=Dr-Lt;var ts=.382683433*((_s=Yn+vr)-(As=is+Zt)),Kn=.5411961*_s+ts,Os=1.306562965*As+ts,Fr=.707106781*(dn=vr+is),qs=Zt+Fr,vt=Zt-Fr;Fe[Ge+5]=vt+Kn,Fe[Ge+3]=vt-Kn,Fe[Ge+1]=qs+Os,Fe[Ge+7]=qs-Os,Ge+=8}for(Ge=0,ft=0;ft<8;++ft){Je=Fe[Ge],Ze=Fe[Ge+8],ot=Fe[Ge+16],wt=Fe[Ge+24],Pt=Fe[Ge+32],Tt=Fe[Ge+40],zt=Fe[Ge+48];var Yr=Je+(ns=Fe[Ge+56]),hn=Je-ns,yr=Ze+zt,ls=Ze-zt,Ye=ot+Tt,br=ot-Tt,On=wt+Pt,Kr=wt-Pt,wr=Yr+On,Ar=Yr-On,_e=yr+Ye,Oe=yr-Ye;Fe[Ge]=wr+_e,Fe[Ge+32]=wr-_e;var Ue=.707106781*(Oe+Ar);Fe[Ge+16]=Ar+Ue,Fe[Ge+48]=Ar-Ue;var nt=.382683433*((wr=Kr+br)-(Oe=ls+hn)),bt=.5411961*wr+nt,Ht=1.306562965*Oe+nt,mt=.707106781*(_e=br+ls),jt=hn+mt,At=hn-mt;Fe[Ge+40]=At+bt,Fe[Ge+24]=At-bt,Fe[Ge+8]=jt+Ht,Fe[Ge+56]=jt-Ht,Ge++}for(ft=0;ft<64;++ft)Ct=Fe[ft]*Ve[ft],g[ft]=Ct>0?Ct+.5|0:Ct-.5|0;return g}(E,W),ie=0;ie<64;++ie)C[le[ie]]=oe[ie];var Te=C[0]-Z;Z=C[0],Te==0?be(X[0]):(be(X[N[de=32767+Te]]),be(y[de]));for(var Q=63;Q>0&&C[Q]==0;)Q--;if(Q==0)return be(Ne),Z;for(var Ae,ge=1;ge<=Q;){for(var G=ge;C[ge]==0&&ge<=Q;)++ge;var We=ge-G;if(We>=16){Ae=We>>4;for(var et=1;et<=Ae;++et)be(J);We&=15}de=32767+C[ge],be(re[(We<<4)+N[de]]),be(y[de]),ge++}return Q!=63&&be(Ne),Z}function fe(E){E=Math.min(Math.max(E,1),100),l!=E&&(function(W){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var re=d((Z[X]*W+50)/100);re=Math.min(Math.max(re,1),255),u[le[X]]=re}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ne=0;Ne<64;Ne++){var J=d((de[Ne]*W+50)/100);J=Math.min(Math.max(J,1),255),h[le[Ne]]=J}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ie=0,Te=0;Te<8;Te++)for(var Q=0;Q<8;Q++)p[ie]=1/(u[le[ie]]*oe[Te]*oe[Q]*8),v[ie]=1/(h[le[ie]]*oe[Te]*oe[Q]*8),ie++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),l=E)}this.encode=function(E,W){W&&fe(W),j=new Array,T=0,A=7,xe(65496),xe(65504),xe(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),xe(1),xe(1),ne(0),ne(0),function(){xe(65499),xe(132),ne(0);for(var Ze=0;Ze<64;Ze++)ne(u[Ze]);ne(1);for(var ot=0;ot<64;ot++)ne(h[ot])}(),function(Ze,ot){xe(65472),xe(17),ne(8),xe(ot),xe(Ze),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(E.width,E.height),function(){xe(65476),xe(418),ne(0);for(var Ze=0;Ze<16;Ze++)ne(ee[Ze+1]);for(var ot=0;ot<=11;ot++)ne(te[ot]);ne(16);for(var wt=0;wt<16;wt++)ne(we[wt+1]);for(var Pt=0;Pt<=161;Pt++)ne(R[Pt]);ne(1);for(var Tt=0;Tt<16;Tt++)ne(z[Tt+1]);for(var zt=0;zt<=11;zt++)ne(H[zt]);ne(17);for(var ns=0;ns<16;ns++)ne(B[ns+1]);for(var ft=0;ft<=161;ft++)ne(pe[ft])}(),xe(65498),xe(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var Z=0,X=0,re=0;T=0,A=7,this.encode.displayName="_encode_";for(var de,Ne,J,oe,ie,Te,Q,Ae,ge,G=E.data,We=E.width,et=E.height,Fe=4*We,Ve=0;Ve<et;){for(de=0;de<Fe;){for(ie=Fe*Ve+de,Q=-1,Ae=0,ge=0;ge<64;ge++)Te=ie+(Ae=ge>>3)*Fe+(Q=4*(7&ge)),Ve+Ae>=et&&(Te-=Fe*(Ve+1+Ae-et)),de+Q>=Fe&&(Te-=de+Q-Fe+4),Ne=G[Te++],J=G[Te++],oe=G[Te++],S[ge]=(ue[Ne]+ue[J+256>>0]+ue[oe+512>>0]>>16)-128,q[ge]=(ue[Ne+768>>0]+ue[J+1024>>0]+ue[oe+1280>>0]>>16)-128,V[ge]=(ue[Ne+1280>>0]+ue[J+1536>>0]+ue[oe+1792>>0]>>16)-128;Z=ae(S,p,Z,t,a),X=ae(q,v,X,r,i),re=ae(V,v,re,r,i),de+=32}Ve+=8}if(A>=0){var Je=[];Je[1]=A+1,Je[0]=(1<<A+1)-1,be(Je)}return xe(65497),new Uint8Array(j)},s=s||50,function(){for(var E=String.fromCharCode,W=0;W<256;W++)Y[W]=E(W)}(),t=he(ee,te),r=he(z,H),a=he(we,R),i=he(B,pe),function(){for(var E=1,W=2,Z=1;Z<=15;Z++){for(var X=E;X<W;X++)N[32767+X]=Z,y[32767+X]=[],y[32767+X][1]=Z,y[32767+X][0]=X;for(var re=-(W-1);re<=-E;re++)N[32767+re]=Z,y[32767+re]=[],y[32767+re][1]=Z,y[32767+re][0]=W-1+re;E<<=1,W<<=1}}(),function(){for(var E=0;E<256;E++)ue[E]=19595*E,ue[E+256>>0]=38470*E,ue[E+512>>0]=7471*E+32768,ue[E+768>>0]=-11059*E,ue[E+1024>>0]=-21709*E,ue[E+1280>>0]=32768*E+8421375,ue[E+1536>>0]=-27439*E,ue[E+1792>>0]=-5329*E}(),fe(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ca(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Tf(s){function t(ee){if(!ee)throw Error("assert :P")}function r(ee,te,we){for(var R=0;4>R;R++)if(ee[te+R]!=we.charCodeAt(R))return!0;return!1}function a(ee,te,we,R,z){for(var H=0;H<z;H++)ee[te+H]=we[R+H]}function i(ee,te,we,R){for(var z=0;z<R;z++)ee[te+z]=we}function l(ee){return new Int32Array(ee)}function d(ee,te){for(var we=[],R=0;R<ee;R++)we.push(new te);return we}function u(ee,te){var we=[];return function R(z,H,B){for(var pe=B[H],he=0;he<pe&&(z.push(B.length>H+1?[]:new te),!(B.length<H+1));he++)R(z[he],H+1,B)}(we,0,ee),we}var h=function(){var ee=this;function te(c,m){for(var w=1<<m-1>>>0;c&w;)w>>>=1;return w?(c&w-1)+w:c}function we(c,m,w,_,M){t(!(_%w));do c[m+(_-=w)]=M;while(0<_)}function R(c,m,w,_,M){if(t(2328>=M),512>=M)var O=l(512);else if((O=l(M))==null)return 0;return function(D,$,U,K,ve,Ce){var Le,Se,Be=$,Re=1<<U,ye=l(16),je=l(16);for(t(ve!=0),t(K!=null),t(D!=null),t(0<U),Se=0;Se<ve;++Se){if(15<K[Se])return 0;++ye[K[Se]]}if(ye[0]==ve)return 0;for(je[1]=0,Le=1;15>Le;++Le){if(ye[Le]>1<<Le)return 0;je[Le+1]=je[Le]+ye[Le]}for(Se=0;Se<ve;++Se)Le=K[Se],0<K[Se]&&(Ce[je[Le]++]=Se);if(je[15]==1)return(K=new z).g=0,K.value=Ce[0],we(D,Be,1,Re,K),Re;var De,He=-1,ze=Re-1,st=0,Ke=1,yt=1,Xe=1<<U;for(Se=0,Le=1,ve=2;Le<=U;++Le,ve<<=1){if(Ke+=yt<<=1,0>(yt-=ye[Le]))return 0;for(;0<ye[Le];--ye[Le])(K=new z).g=Le,K.value=Ce[Se++],we(D,Be+st,ve,Xe,K),st=te(st,Le)}for(Le=U+1,ve=2;15>=Le;++Le,ve<<=1){if(Ke+=yt<<=1,0>(yt-=ye[Le]))return 0;for(;0<ye[Le];--ye[Le]){if(K=new z,(st&ze)!=He){for(Be+=Xe,De=1<<(He=Le)-U;15>He&&!(0>=(De-=ye[He]));)++He,De<<=1;Re+=Xe=1<<(De=He-U),D[$+(He=st&ze)].g=De+U,D[$+He].value=Be-$-He}K.g=Le-U,K.value=Ce[Se++],we(D,Be+(st>>U),ve,Xe,K),st=te(st,Le)}}return Ke!=2*je[15]-1?0:Re}(c,m,w,_,M,O)}function z(){this.value=this.g=0}function H(){this.value=this.g=0}function B(){this.G=d(5,z),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(Us,H)}function pe(c,m,w,_){t(c!=null),t(m!=null),t(2147483648>_),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=m,c.pa=w,c.Jd=m,c.Yc=w+_,c.Zc=4<=_?w+_-4+1:w,de(c)}function he(c,m){for(var w=0;0<m--;)w|=J(c,128)<<m;return w}function be(c,m){var w=he(c,m);return Ne(c)?-w:w}function ne(c,m,w,_){var M,O=0;for(t(c!=null),t(m!=null),t(4294967288>_),c.Sb=_,c.Ra=0,c.u=0,c.h=0,4<_&&(_=4),M=0;M<_;++M)O+=m[w+M]<<8*M;c.Ra=O,c.bb=_,c.oa=m,c.pa=w}function xe(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<ra-8>>>0,++c.bb,c.u-=8;Z(c)&&(c.h=1,c.u=0)}function ae(c,m){if(t(0<=m),!c.h&&m<=tn){var w=W(c)&li[m];return c.u+=m,xe(c),w}return c.h=1,c.u=0}function fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(c){return c.Ra>>>(c.u&ra-1)>>>0}function Z(c){return t(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>ra}function X(c,m){c.u=m,c.h=Z(c)}function re(c){c.u>=Qi&&(t(c.u>=Qi),xe(c))}function de(c){t(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(t(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function Ne(c){return he(c,1)}function J(c,m){var w=c.Ca;0>c.b&&de(c);var _=c.b,M=w*m>>>8,O=(c.I>>>_>M)+0;for(O?(w-=M,c.I-=M+1<<_>>>0):w=M+1,_=w,M=0;256<=_;)M+=8,_>>=8;return _=7^M+_r[_],c.b-=_,c.Ca=(w<<_)-1,O}function oe(c,m,w){c[m+0]=w>>24&255,c[m+1]=w>>16&255,c[m+2]=w>>8&255,c[m+3]=w>>0&255}function ie(c,m){return c[m+0]<<0|c[m+1]<<8}function Te(c,m){return ie(c,m)|c[m+2]<<16}function Q(c,m){return ie(c,m)|ie(c,m+2)<<16}function Ae(c,m){var w=1<<m;return t(c!=null),t(0<m),c.X=l(w),c.X==null?0:(c.Mb=32-m,c.Xa=m,1)}function ge(c,m){t(c!=null),t(m!=null),t(c.Xa==m.Xa),a(m.X,0,c.X,0,1<<m.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function We(c,m,w,_){t(w!=null),t(_!=null);var M=w[0],O=_[0];return M==0&&(M=(c*O+m/2)/m),O==0&&(O=(m*M+c/2)/c),0>=M||0>=O?0:(w[0]=M,_[0]=O,1)}function et(c,m){return c+(1<<m)-1>>>m}function Fe(c,m){return((4278255360&c)+(4278255360&m)>>>0&4278255360)+((16711935&c)+(16711935&m)>>>0&16711935)>>>0}function Ve(c,m){ee[m]=function(w,_,M,O,D,$,U){var K;for(K=0;K<D;++K){var ve=ee[c]($[U+K-1],M,O+K);$[U+K]=Fe(w[_+K],ve)}}}function Je(){this.ud=this.hd=this.jd=0}function Ze(c,m){return((4278124286&(c^m))>>>1)+(c&m)>>>0}function ot(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function wt(c,m){return ot(c+(c-m+.5>>1))}function Pt(c,m,w){return Math.abs(m-w)-Math.abs(c-w)}function Tt(c,m,w,_,M,O,D){for(_=O[D-1],w=0;w<M;++w)O[D+w]=_=Fe(c[m+w],_)}function zt(c,m,w,_,M){var O;for(O=0;O<w;++O){var D=c[m+O],$=D>>8&255,U=16711935&(U=(U=16711935&D)+(($<<16)+$));_[M+O]=(4278255360&D)+U>>>0}}function ns(c,m){m.jd=c>>0&255,m.hd=c>>8&255,m.ud=c>>16&255}function ft(c,m,w,_,M,O){var D;for(D=0;D<_;++D){var $=m[w+D],U=$>>>8,K=$,ve=255&(ve=(ve=$>>>16)+((c.jd<<24>>24)*(U<<24>>24)>>>5));K=255&(K=(K=K+((c.hd<<24>>24)*(U<<24>>24)>>>5))+((c.ud<<24>>24)*(ve<<24>>24)>>>5)),M[O+D]=(4278255360&$)+(ve<<16)+K}}function Ct(c,m,w,_,M){ee[m]=function(O,D,$,U,K,ve,Ce,Le,Se){for(U=Ce;U<Le;++U)for(Ce=0;Ce<Se;++Ce)K[ve++]=M($[_(O[D++])])},ee[c]=function(O,D,$,U,K,ve,Ce){var Le=8>>O.b,Se=O.Ea,Be=O.K[0],Re=O.w;if(8>Le)for(O=(1<<O.b)-1,Re=(1<<Le)-1;D<$;++D){var ye,je=0;for(ye=0;ye<Se;++ye)ye&O||(je=_(U[K++])),ve[Ce++]=M(Be[je&Re]),je>>=Le}else ee["VP8LMapColor"+w](U,K,Be,Re,ve,Ce,D,$,Se)}}function Ge(c,m,w,_,M){for(w=m+w;m<w;){var O=c[m++];_[M++]=O>>16&255,_[M++]=O>>8&255,_[M++]=O>>0&255}}function rr(c,m,w,_,M){for(w=m+w;m<w;){var O=c[m++];_[M++]=O>>16&255,_[M++]=O>>8&255,_[M++]=O>>0&255,_[M++]=O>>24&255}}function Zt(c,m,w,_,M){for(w=m+w;m<w;){var O=(D=c[m++])>>16&240|D>>12&15,D=D>>0&240|D>>28&15;_[M++]=O,_[M++]=D}}function xr(c,m,w,_,M){for(w=m+w;m<w;){var O=(D=c[m++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;_[M++]=O,_[M++]=D}}function is(c,m,w,_,M){for(w=m+w;m<w;){var O=c[m++];_[M++]=O>>0&255,_[M++]=O>>8&255,_[M++]=O>>16&255}}function os(c,m,w,_,M,O){if(O==0)for(w=m+w;m<w;)oe(_,((O=c[m++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),M+=32;else a(_,M,c,m,w)}function vr(c,m){ee[m][0]=ee[c+"0"],ee[m][1]=ee[c+"1"],ee[m][2]=ee[c+"2"],ee[m][3]=ee[c+"3"],ee[m][4]=ee[c+"4"],ee[m][5]=ee[c+"5"],ee[m][6]=ee[c+"6"],ee[m][7]=ee[c+"7"],ee[m][8]=ee[c+"8"],ee[m][9]=ee[c+"9"],ee[m][10]=ee[c+"10"],ee[m][11]=ee[c+"11"],ee[m][12]=ee[c+"12"],ee[m][13]=ee[c+"13"],ee[m][14]=ee[c+"0"],ee[m][15]=ee[c+"0"]}function Kt(c){return c==Ro||c==Oo||c==Do||c==n}function Yn(){this.eb=[],this.size=this.A=this.fb=0}function _s(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Dr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Yn,this.f.kb=new _s,this.sd=null}function dn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function As(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Lt(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function ts(c,m){var w=c.T,_=m.ba.f.RGBA,M=_.eb,O=_.fb+c.ka*_.A,D=Ir[m.ba.S],$=c.y,U=c.O,K=c.f,ve=c.N,Ce=c.ea,Le=c.W,Se=m.cc,Be=m.dc,Re=m.Mc,ye=m.Nc,je=c.ka,De=c.ka+c.T,He=c.U,ze=He+1>>1;for(je==0?D($,U,null,null,K,ve,Ce,Le,K,ve,Ce,Le,M,O,null,null,He):(D(m.ec,m.fc,$,U,Se,Be,Re,ye,K,ve,Ce,Le,M,O-_.A,M,O,He),++w);je+2<De;je+=2)Se=K,Be=ve,Re=Ce,ye=Le,ve+=c.Rc,Le+=c.Rc,O+=2*_.A,D($,(U+=2*c.fa)-c.fa,$,U,Se,Be,Re,ye,K,ve,Ce,Le,M,O-_.A,M,O,He);return U+=c.fa,c.j+De<c.o?(a(m.ec,m.fc,$,U,He),a(m.cc,m.dc,K,ve,ze),a(m.Mc,m.Nc,Ce,Le,ze),w--):1&De||D($,U,null,null,K,ve,Ce,Le,K,ve,Ce,Le,M,O+_.A,null,null,He),w}function Kn(c,m,w){var _=c.F,M=[c.J];if(_!=null){var O=c.U,D=m.ba.S,$=D==ro||D==Do;m=m.ba.f.RGBA;var U=[0],K=c.ka;U[0]=c.T,c.Kb&&(K==0?--U[0]:(--K,M[0]-=c.width),c.j+c.ka+c.T==c.o&&(U[0]=c.o-c.j-K));var ve=m.eb;K=m.fb+K*m.A,c=gs(_,M[0],c.width,O,U,ve,K+($?0:3),m.A),t(w==U),c&&Kt(D)&&fr(ve,K,$,O,U,m.A)}return 0}function Os(c){var m=c.ma,w=m.ba.S,_=11>w,M=w==to||w==so||w==ro||w==Io||w==12||Kt(w);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Ji(m.Oa,c,M?11:12))return 0;if(M&&Kt(w)&&$e(),c.da)alert("todo:use_scaling");else{if(_){if(m.Ib=Lt,c.Kb){if(w=c.U+1>>1,m.memory=l(c.U+2*w),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+c.U,m.Mc=m.cc,m.Nc=m.dc+w,m.Ib=ts,$e()}}else alert("todo:EmitYUV");M&&(m.Jb=Kn,_&&ke())}if(_&&!hu){for(c=0;256>c;++c)jx[c]=89858*(c-128)+Xl>>Ql,kx[c]=-22014*(c-128)+Xl,Sx[c]=-45773*(c-128),_x[c]=113618*(c-128)+Xl>>Ql;for(c=wl;c<dd;++c)m=76283*(c-16)+Xl>>Ql,Px[c-wl]=Es(m,255),Cx[c-wl]=Es(m+8>>4,15);hu=1}return 1}function Fr(c){var m=c.ma,w=c.U,_=c.T;return t(!(1&c.ka)),0>=w||0>=_?0:(w=m.Ib(c,m),m.Jb!=null&&m.Jb(c,m,w),m.Dc+=w,1)}function qs(c){c.ma.memory=null}function vt(c,m,w,_){return ae(c,8)!=47?0:(m[0]=ae(c,14)+1,w[0]=ae(c,14)+1,_[0]=ae(c,1),ae(c,3)!=0?0:!c.h)}function Yr(c,m){if(4>c)return c+1;var w=c-2>>1;return(2+(1&c)<<w)+ae(m,w)+1}function hn(c,m){return 120<m?m-120:1<=(w=((w=ce[m-1])>>4)*c+(8-(15&w)))?w:1;var w}function yr(c,m,w){var _=W(w),M=c[m+=255&_].g-8;return 0<M&&(X(w,w.u+8),_=W(w),m+=c[m].value,m+=_&(1<<M)-1),X(w,w.u+c[m].g),c[m].value}function ls(c,m,w){return w.g+=c.g,w.value+=c.value<<m>>>0,t(8>=w.g),c.g}function Ye(c,m,w){var _=c.xc;return t((m=_==0?0:c.vc[c.md*(w>>_)+(m>>_)])<c.Wb),c.Ya[m]}function br(c,m,w,_){var M=c.ab,O=c.c*m,D=c.C;m=D+m;var $=w,U=_;for(_=c.Ta,w=c.Ua;0<M--;){var K=c.gc[M],ve=D,Ce=m,Le=$,Se=U,Be=(U=_,$=w,K.Ea);switch(t(ve<Ce),t(Ce<=K.nc),K.hc){case 2:To(Le,Se,(Ce-ve)*Be,U,$);break;case 0:var Re=ve,ye=Ce,je=U,De=$,He=(Xe=K).Ea;Re==0&&(xl(Le,Se,null,null,1,je,De),Tt(Le,Se+1,0,0,He-1,je,De+1),Se+=He,De+=He,++Re);for(var ze=1<<Xe.b,st=ze-1,Ke=et(He,Xe.b),yt=Xe.K,Xe=Xe.w+(Re>>Xe.b)*Ke;Re<ye;){var ds=yt,ys=Xe,as=1;for(sn(Le,Se,je,De-He,1,je,De);as<He;){var es=(as&~st)+ze;es>He&&(es=He),(0,na[ds[ys++]>>8&15])(Le,Se+ +as,je,De+as-He,es-as,je,De+as),as=es}Se+=He,De+=He,++Re&st||(Xe+=Ke)}Ce!=K.nc&&a(U,$-Be,U,$+(Ce-ve-1)*Be,Be);break;case 1:for(Be=Le,ye=Se,He=(Le=K.Ea)-(De=Le&~(je=(Se=1<<K.b)-1)),Re=et(Le,K.b),ze=K.K,K=K.w+(ve>>K.b)*Re;ve<Ce;){for(st=ze,Ke=K,yt=new Je,Xe=ye+De,ds=ye+Le;ye<Xe;)ns(st[Ke++],yt),aa(yt,Be,ye,Se,U,$),ye+=Se,$+=Se;ye<ds&&(ns(st[Ke++],yt),aa(yt,Be,ye,He,U,$),ye+=He,$+=He),++ve&je||(K+=Re)}break;case 3:if(Le==U&&Se==$&&0<K.b){for(ye=U,Le=Be=$+(Ce-ve)*Be-(De=(Ce-ve)*et(K.Ea,K.b)),Se=U,je=$,Re=[],De=(He=De)-1;0<=De;--De)Re[De]=Se[je+De];for(De=He-1;0<=De;--De)ye[Le+De]=Re[De];dr(K,ve,Ce,U,Be,U,$)}else dr(K,ve,Ce,Le,Se,U,$)}$=_,U=w}U!=w&&a(_,w,$,U,O)}function On(c,m){var w=c.V,_=c.Ba+c.c*c.C,M=m-c.C;if(t(m<=c.l.o),t(16>=M),0<M){var O=c.l,D=c.Ta,$=c.Ua,U=O.width;if(br(c,M,w,_),M=$=[$],t((w=c.C)<(_=m)),t(O.v<O.va),_>O.o&&(_=O.o),w<O.j){var K=O.j-w;w=O.j,M[0]+=K*U}if(w>=_?w=0:(M[0]+=4*O.v,O.ka=w-O.j,O.U=O.va-O.v,O.T=_-w,w=1),w){if($=$[0],11>(w=c.ca).S){var ve=w.f.RGBA,Ce=(_=w.S,M=O.U,O=O.T,K=ve.eb,ve.A),Le=O;for(ve=ve.fb+c.Ma*ve.A;0<Le--;){var Se=D,Be=$,Re=M,ye=K,je=ve;switch(_){case Mo:hr(Se,Be,Re,ye,je);break;case to:ur(Se,Be,Re,ye,je);break;case Ro:ur(Se,Be,Re,ye,je),fr(ye,je,0,Re,1,0);break;case vl:yn(Se,Be,Re,ye,je);break;case so:os(Se,Be,Re,ye,je,1);break;case Oo:os(Se,Be,Re,ye,je,1),fr(ye,je,0,Re,1,0);break;case ro:os(Se,Be,Re,ye,je,0);break;case Do:os(Se,Be,Re,ye,je,0),fr(ye,je,1,Re,1,0);break;case Io:An(Se,Be,Re,ye,je);break;case n:An(Se,Be,Re,ye,je),ps(ye,je,Re,1,0);break;case Yl:Br(Se,Be,Re,ye,je);break;default:t(0)}$+=U,ve+=Ce}c.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");t(c.Ma<=w.height)}}c.C=m,t(c.C<=c.i)}function Kr(c){var m;if(0<c.ua)return 0;for(m=0;m<c.Wb;++m){var w=c.Ya[m].G,_=c.Ya[m].H;if(0<w[1][_[1]+0].g||0<w[2][_[2]+0].g||0<w[3][_[3]+0].g)return 0}return 1}function wr(c,m,w,_,M,O){if(c.Z!=0){var D=c.qd,$=c.rd;for(t(vs[c.Z]!=null);m<w;++m)vs[c.Z](D,$,_,M,_,M,O),D=_,$=M,M+=O;c.qd=D,c.rd=$}}function Ar(c,m){var w=c.l.ma,_=w.Z==0||w.Z==1?c.l.j:c.C;if(_=c.C<_?_:c.C,t(m<=c.l.o),m>_){var M=c.l.width,O=w.ca,D=w.tb+M*_,$=c.V,U=c.Ba+c.c*_,K=c.gc;t(c.ab==1),t(K[0].hc==3),vn(K[0],_,m,$,U,O,D),wr(w,_,m,O,D,M)}c.C=c.Ma=m}function _e(c,m,w,_,M,O,D){var $=c.$/_,U=c.$%_,K=c.m,ve=c.s,Ce=w+c.$,Le=Ce;M=w+_*M;var Se=w+_*O,Be=280+ve.ua,Re=c.Pb?$:16777216,ye=0<ve.ua?ve.Wa:null,je=ve.wc,De=Ce<Se?Ye(ve,U,$):null;t(c.C<O),t(Se<=M);var He=!1;e:for(;;){for(;He||Ce<Se;){var ze=0;if($>=Re){var st=Ce-w;t((Re=c).Pb),Re.wd=Re.m,Re.xd=st,0<Re.s.ua&&ge(Re.s.Wa,Re.s.vb),Re=$+Ee}if(U&je||(De=Ye(ve,U,$)),t(De!=null),De.Qb&&(m[Ce]=De.qb,He=!0),!He)if(re(K),De.jc){ze=K,st=m;var Ke=Ce,yt=De.pd[W(ze)&Us-1];t(De.jc),256>yt.g?(X(ze,ze.u+yt.g),st[Ke]=yt.value,ze=0):(X(ze,ze.u+yt.g-256),t(256<=yt.value),ze=yt.value),ze==0&&(He=!0)}else ze=yr(De.G[0],De.H[0],K);if(K.h)break;if(He||256>ze){if(!He)if(De.nd)m[Ce]=(De.qb|ze<<8)>>>0;else{if(re(K),He=yr(De.G[1],De.H[1],K),re(K),st=yr(De.G[2],De.H[2],K),Ke=yr(De.G[3],De.H[3],K),K.h)break;m[Ce]=(Ke<<24|He<<16|ze<<8|st)>>>0}if(He=!1,++Ce,++U>=_&&(U=0,++$,D!=null&&$<=O&&!($%16)&&D(c,$),ye!=null))for(;Le<Ce;)ze=m[Le++],ye.X[(506832829*ze&4294967295)>>>ye.Mb]=ze}else if(280>ze){if(ze=Yr(ze-256,K),st=yr(De.G[4],De.H[4],K),re(K),st=hn(_,st=Yr(st,K)),K.h)break;if(Ce-w<st||M-Ce<ze)break e;for(Ke=0;Ke<ze;++Ke)m[Ce+Ke]=m[Ce+Ke-st];for(Ce+=ze,U+=ze;U>=_;)U-=_,++$,D!=null&&$<=O&&!($%16)&&D(c,$);if(t(Ce<=M),U&je&&(De=Ye(ve,U,$)),ye!=null)for(;Le<Ce;)ze=m[Le++],ye.X[(506832829*ze&4294967295)>>>ye.Mb]=ze}else{if(!(ze<Be))break e;for(He=ze-280,t(ye!=null);Le<Ce;)ze=m[Le++],ye.X[(506832829*ze&4294967295)>>>ye.Mb]=ze;ze=Ce,t(!(He>>>(st=ye).Xa)),m[ze]=st.X[He],He=!0}He||t(K.h==Z(K))}if(c.Pb&&K.h&&Ce<M)t(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&ge(c.s.vb,c.s.Wa);else{if(K.h)break e;D?.(c,$>O?O:$),c.a=0,c.$=Ce-w}return 1}return c.a=3,0}function Oe(c){t(c!=null),c.vc=null,c.yc=null,c.Ya=null;var m=c.Wa;m!=null&&(m.X=null),c.vb=null,t(c!=null)}function Ue(){var c=new Gi;return c==null?null:(c.a=0,c.xb=yl,vr("Predictor","VP8LPredictors"),vr("Predictor","VP8LPredictors_C"),vr("PredictorAdd","VP8LPredictorsAdd"),vr("PredictorAdd","VP8LPredictorsAdd_C"),To=zt,aa=ft,hr=Ge,ur=rr,An=Zt,Br=xr,yn=is,ee.VP8LMapColor32b=ci,ee.VP8LMapColor8b=Za,c)}function nt(c,m,w,_,M){var O=1,D=[c],$=[m],U=_.m,K=_.s,ve=null,Ce=0;e:for(;;){if(w)for(;O&&ae(U,1);){var Le=D,Se=$,Be=_,Re=1,ye=Be.m,je=Be.gc[Be.ab],De=ae(ye,2);if(Be.Oc&1<<De)O=0;else{switch(Be.Oc|=1<<De,je.hc=De,je.Ea=Le[0],je.nc=Se[0],je.K=[null],++Be.ab,t(4>=Be.ab),De){case 0:case 1:je.b=ae(ye,3)+2,Re=nt(et(je.Ea,je.b),et(je.nc,je.b),0,Be,je.K),je.K=je.K[0];break;case 3:var He,ze=ae(ye,8)+1,st=16<ze?0:4<ze?1:2<ze?2:3;if(Le[0]=et(je.Ea,st),je.b=st,He=Re=nt(ze,1,0,Be,je.K)){var Ke,yt=ze,Xe=je,ds=1<<(8>>Xe.b),ys=l(ds);if(ys==null)He=0;else{var as=Xe.K[0],es=Xe.w;for(ys[0]=Xe.K[0][0],Ke=1;Ke<1*yt;++Ke)ys[Ke]=Fe(as[es+Ke],ys[Ke-1]);for(;Ke<4*ds;++Ke)ys[Ke]=0;Xe.K[0]=null,Xe.K[0]=ys,He=1}}Re=He;break;case 2:break;default:t(0)}O=Re}}if(D=D[0],$=$[0],O&&ae(U,1)&&!(O=1<=(Ce=ae(U,4))&&11>=Ce)){_.a=3;break e}var Cs;if(Cs=O)t:{var Ss,qt,ar,Nn=_,ir=D,jn=$,bs=Ce,En=w,Mn=Nn.m,kr=Nn.s,Rr=[null],an=1,Wn=0,Aa=Pe[bs];s:for(;;){if(En&&ae(Mn,1)){var Pr=ae(Mn,3)+2,Ga=et(ir,Pr),no=et(jn,Pr),zo=Ga*no;if(!nt(Ga,no,0,Nn,Rr))break s;for(Rr=Rr[0],kr.xc=Pr,Ss=0;Ss<zo;++Ss){var pi=Rr[Ss]>>8&65535;Rr[Ss]=pi,pi>=an&&(an=pi+1)}}if(Mn.h)break s;for(qt=0;5>qt;++qt){var Ws=b[qt];!qt&&0<bs&&(Ws+=1<<bs),Wn<Ws&&(Wn=Ws)}var hd=d(an*Aa,z),mu=an,pu=d(mu,B);if(pu==null)var tc=null;else t(65536>=mu),tc=pu;var Nl=l(Wn);if(tc==null||Nl==null||hd==null){Nn.a=1;break s}var sc=hd;for(Ss=ar=0;Ss<an;++Ss){var oa=tc[Ss],Bo=oa.G,qo=oa.H,gu=0,rc=1,xu=0;for(qt=0;5>qt;++qt){Ws=b[qt],Bo[qt]=sc,qo[qt]=ar,!qt&&0<bs&&(Ws+=1<<bs);n:{var nc,ud=Ws,ac=Nn,jl=Nl,Tx=sc,Ex=ar,fd=0,gi=ac.m,Mx=ae(gi,1);if(i(jl,0,0,ud),Mx){var Ix=ae(gi,1)+1,Rx=ae(gi,1),vu=ae(gi,Rx==0?1:8);jl[vu]=1,Ix==2&&(jl[vu=ae(gi,8)]=1);var ic=1}else{var yu=l(19),bu=ae(gi,4)+4;if(19<bu){ac.a=3;var oc=0;break n}for(nc=0;nc<bu;++nc)yu[F[nc]]=ae(gi,3);var md=void 0,_l=void 0,wu=ac,Ox=yu,lc=ud,Nu=jl,pd=0,xi=wu.m,ju=8,_u=d(128,z);r:for(;R(_u,0,7,Ox,19);){if(ae(xi,1)){var Dx=2+2*ae(xi,3);if((md=2+ae(xi,Dx))>lc)break r}else md=lc;for(_l=0;_l<lc&&md--;){re(xi);var Su=_u[0+(127&W(xi))];X(xi,xi.u+Su.g);var Ho=Su.value;if(16>Ho)Nu[_l++]=Ho,Ho!=0&&(ju=Ho);else{var Fx=Ho==16,ku=Ho-16,zx=f[ku],Pu=ae(xi,o[ku])+zx;if(_l+Pu>lc)break r;for(var Bx=Fx?ju:0;0<Pu--;)Nu[_l++]=Bx}}pd=1;break r}pd||(wu.a=3),ic=pd}(ic=ic&&!gi.h)&&(fd=R(Tx,Ex,8,jl,ud)),ic&&fd!=0?oc=fd:(ac.a=3,oc=0)}if(oc==0)break s;if(rc&&k[qt]==1&&(rc=sc[ar].g==0),gu+=sc[ar].g,ar+=oc,3>=qt){var Sl,gd=Nl[0];for(Sl=1;Sl<Ws;++Sl)Nl[Sl]>gd&&(gd=Nl[Sl]);xu+=gd}}if(oa.nd=rc,oa.Qb=0,rc&&(oa.qb=(Bo[3][qo[3]+0].value<<24|Bo[1][qo[1]+0].value<<16|Bo[2][qo[2]+0].value)>>>0,gu==0&&256>Bo[0][qo[0]+0].value&&(oa.Qb=1,oa.qb+=Bo[0][qo[0]+0].value<<8)),oa.jc=!oa.Qb&&6>xu,oa.jc){var cc,Ya=oa;for(cc=0;cc<Us;++cc){var vi=cc,yi=Ya.pd[vi],dc=Ya.G[0][Ya.H[0]+vi];256<=dc.value?(yi.g=dc.g+256,yi.value=dc.value):(yi.g=0,yi.value=0,vi>>=ls(dc,8,yi),vi>>=ls(Ya.G[1][Ya.H[1]+vi],16,yi),vi>>=ls(Ya.G[2][Ya.H[2]+vi],0,yi),ls(Ya.G[3][Ya.H[3]+vi],24,yi))}}}kr.vc=Rr,kr.Wb=an,kr.Ya=tc,kr.yc=hd,Cs=1;break t}Cs=0}if(!(O=Cs)){_.a=3;break e}if(0<Ce){if(K.ua=1<<Ce,!Ae(K.Wa,Ce)){_.a=1,O=0;break e}}else K.ua=0;var xd=_,Cu=D,qx=$,vd=xd.s,yd=vd.xc;if(xd.c=Cu,xd.i=qx,vd.md=et(Cu,yd),vd.wc=yd==0?-1:(1<<yd)-1,w){_.xb=od;break e}if((ve=l(D*$))==null){_.a=1,O=0;break e}O=(O=_e(_,ve,0,D,$,$,null))&&!U.h;break e}return O?(M!=null?M[0]=ve:(t(ve==null),t(w)),_.$=0,w||Oe(K)):Oe(K),O}function bt(c,m){var w=c.c*c.i,_=w+m+16*m;return t(c.c<=m),c.V=l(_),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+w+m,1)}function Ht(c,m){var w=c.C,_=m-w,M=c.V,O=c.Ba+c.c*w;for(t(m<=c.l.o);0<_;){var D=16<_?16:_,$=c.l.ma,U=c.l.width,K=U*D,ve=$.ca,Ce=$.tb+U*w,Le=c.Ta,Se=c.Ua;br(c,D,M,O),zs(Le,Se,ve,Ce,K),wr($,w,w+D,ve,Ce,U),_-=D,M+=D*c.c,w+=D}t(w==m),c.C=c.Ma=m}function mt(){this.ub=this.yd=this.td=this.Rb=0}function jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function At(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function $t(){this.Yb=function(){var c=[];return function m(w,_,M){for(var O=M[_],D=0;D<O&&(w.push(M.length>_+1?[]:0),!(M.length<_+1));D++)m(w[D],_+1,M)}(c,0,[3,11]),c}()}function Ot(){this.jb=l(3),this.Wc=u([4,8],$t),this.Xc=u([4,17],$t)}function _t(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function dt(){this.ld=this.La=this.dd=this.tc=0}function cs(){this.Na=this.la=0}function ms(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gs(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Nr(){this.uc=this.M=this.Nb=0,this.wa=Array(new dt),this.Y=0,this.ya=Array(new Gs),this.aa=0,this.l=new Qt}function Bt(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Jt(){this.cb=this.a=0,this.sc="",this.m=new fe,this.Od=new mt,this.Kc=new jt,this.ed=new _t,this.Qa=new At,this.Ic=this.$c=this.Aa=0,this.D=new Nr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,fe),this.ia=0,this.pb=d(4,ms),this.Pa=new Ot,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bt),this.Hd=0,this.rb=Array(new cs),this.sb=0,this.wa=Array(new dt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gs),this.L=this.aa=0,this.gd=u([4,2],dt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wt(){var c=new Jt;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,gt||(gt=fn)),c}function pt(c,m,w){return c.a==0&&(c.a=m,c.sc=w,c.cb=0),0}function Dn(c,m,w){return 3<=w&&c[m+0]==157&&c[m+1]==1&&c[m+2]==42}function un(c,m){if(c==null)return 0;if(c.a=0,c.sc="OK",m==null)return pt(c,2,"null VP8Io passed to VP8GetHeaders()");var w=m.data,_=m.w,M=m.ha;if(4>M)return pt(c,7,"Truncated header.");var O=w[_+0]|w[_+1]<<8|w[_+2]<<16,D=c.Od;if(D.Rb=!(1&O),D.td=O>>1&7,D.yd=O>>4&1,D.ub=O>>5,3<D.td)return pt(c,3,"Incorrect keyframe parameters.");if(!D.yd)return pt(c,4,"Frame not displayable.");_+=3,M-=3;var $=c.Kc;if(D.Rb){if(7>M)return pt(c,7,"cannot parse picture header");if(!Dn(w,_,M))return pt(c,3,"Bad code word");$.c=16383&(w[_+4]<<8|w[_+3]),$.Td=w[_+4]>>6,$.i=16383&(w[_+6]<<8|w[_+5]),$.Ud=w[_+6]>>6,_+=7,M-=7,c.za=$.c+15>>4,c.Ub=$.i+15>>4,m.width=$.c,m.height=$.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((O=c.Pa).jb,0,255,O.jb.length),t((O=c.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(D.ub>M)return pt(c,7,"bad partition length");pe(O=c.m,w,_,D.ub),_+=D.ub,M-=D.ub,D.Rb&&($.Ld=Ne(O),$.Kd=Ne(O)),$=c.Qa;var U,K=c.Pa;if(t(O!=null),t($!=null),$.Cb=Ne(O),$.Cb){if($.Bb=Ne(O),Ne(O)){for($.Fb=Ne(O),U=0;4>U;++U)$.Zb[U]=Ne(O)?be(O,7):0;for(U=0;4>U;++U)$.Lb[U]=Ne(O)?be(O,6):0}if($.Bb)for(U=0;3>U;++U)K.jb[U]=Ne(O)?he(O,8):255}else $.Bb=0;if(O.Ka)return pt(c,3,"cannot parse segment header");if(($=c.ed).zd=Ne(O),$.Tb=he(O,6),$.wb=he(O,3),$.Pc=Ne(O),$.Pc&&Ne(O)){for(K=0;4>K;++K)Ne(O)&&($.vd[K]=be(O,6));for(K=0;4>K;++K)Ne(O)&&($.od[K]=be(O,6))}if(c.L=$.Tb==0?0:$.zd?1:2,O.Ka)return pt(c,3,"cannot parse filter header");var ve=M;if(M=U=_,_=U+ve,$=ve,c.Xb=(1<<he(c.m,2))-1,ve<3*(K=c.Xb))w=7;else{for(U+=3*K,$-=3*K,ve=0;ve<K;++ve){var Ce=w[M+0]|w[M+1]<<8|w[M+2]<<16;Ce>$&&(Ce=$),pe(c.Jc[+ve],w,U,Ce),U+=Ce,$-=Ce,M+=3}pe(c.Jc[+K],w,U,$),w=U<_?0:5}if(w!=0)return pt(c,w,"cannot parse partitions");for(w=he(U=c.m,7),M=Ne(U)?be(U,4):0,_=Ne(U)?be(U,4):0,$=Ne(U)?be(U,4):0,K=Ne(U)?be(U,4):0,U=Ne(U)?be(U,4):0,ve=c.Qa,Ce=0;4>Ce;++Ce){if(ve.Cb){var Le=ve.Zb[Ce];ve.Fb||(Le+=w)}else{if(0<Ce){c.pb[Ce]=c.pb[0];continue}Le=w}var Se=c.pb[Ce];Se.Sc[0]=qe[Es(Le+M,127)],Se.Sc[1]=tt[Es(Le+0,127)],Se.Eb[0]=2*qe[Es(Le+_,127)],Se.Eb[1]=101581*tt[Es(Le+$,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=qe[Es(Le+K,117)],Se.Qc[1]=tt[Es(Le+U,127)],Se.lc=Le+U}if(!D.Rb)return pt(c,4,"Not a key frame.");for(Ne(O),D=c.Pa,w=0;4>w;++w){for(M=0;8>M;++M)for(_=0;3>_;++_)for($=0;11>$;++$)K=J(O,mi[w][M][_][$])?he(O,8):wn[w][M][_][$],D.Wc[w][M].Yb[_][$]=K;for(M=0;17>M;++M)D.Xc[w][M]=D.Wc[w][id[M]]}return c.kc=Ne(O),c.kc&&(c.Bd=he(O,8)),c.cb=1}function fn(c,m,w,_,M,O,D){var $=m[M].Yb[w];for(w=0;16>M;++M){if(!J(c,$[w+0]))return M;for(;!J(c,$[w+1]);)if($=m[++M].Yb[0],w=0,M==16)return 16;var U=m[M+1].Yb;if(J(c,$[w+2])){var K=c,ve=0;if(J(K,(Le=$)[(Ce=w)+3]))if(J(K,Le[Ce+6])){for($=0,Ce=2*(ve=J(K,Le[Ce+8]))+(Le=J(K,Le[Ce+9+ve])),ve=0,Le=Ut[Ce];Le[$];++$)ve+=ve+J(K,Le[$]);ve+=3+(8<<Ce)}else J(K,Le[Ce+7])?(ve=7+2*J(K,165),ve+=J(K,145)):ve=5+J(K,159);else ve=J(K,Le[Ce+4])?3+J(K,Le[Ce+5]):2;$=U[2]}else ve=1,$=U[1];U=D+Mr[M],0>(K=c).b&&de(K);var Ce,Le=K.b,Se=(Ce=K.Ca>>1)-(K.I>>Le)>>31;--K.b,K.Ca+=Se,K.Ca|=1,K.I-=(Ce+1&Se)<<Le,O[U]=((ve^Se)-Se)*_[(0<M)+0]}return 16}function mn(c){var m=c.rb[c.sb-1];m.la=0,m.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function St(c,m){if(c==null)return 0;if(m==null)return pt(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!un(c,m))return 0;if(t(c.cb),m.ac==null||m.ac(m)){m.ob&&(c.L=0);var w=ec[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=m.v-w>>4,c.zb=m.j-w>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=m.o+15+w>>4,c.Hb=m.va+15+w>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var _=c.ed;for(w=0;4>w;++w){var M;if(c.Qa.Cb){var O=c.Qa.Lb[w];c.Qa.Fb||(O+=_.Tb)}else O=_.Tb;for(M=0;1>=M;++M){var D=c.gd[w][M],$=O;if(_.Pc&&($+=_.vd[0],M&&($+=_.od[0])),0<($=0>$?0:63<$?63:$)){var U=$;0<_.wb&&(U=4<_.wb?U>>2:U>>1)>9-_.wb&&(U=9-_.wb),1>U&&(U=1),D.dd=U,D.tc=2*$+U,D.ld=40<=$?2:15<=$?1:0}else D.tc=0;D.La=M}}}w=0}else pt(c,6,"Frame setup failed"),w=c.a;if(w=w==0){if(w){c.$c=0,0<c.Aa||(c.Ic=Ax);e:{w=c.Ic,_=4*(U=c.za);var K=32*U,ve=U+1,Ce=0<c.L?U*(0<c.Aa?2:1):0,Le=(c.Aa==2?2:1)*U;if((D=_+832+(M=3*(16*w+ec[c.L])/2*K)+(O=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=D)w=0;else{if(D>c.Vb){if(c.Vb=0,c.Ec=l(D),c.Fc=0,c.Ec==null){w=pt(c,1,"no memory during frame initialization.");break e}c.Vb=D}D=c.Ec,$=c.Fc,c.Ac=D,c.Bc=$,$+=_,c.Gd=d(K,Bt),c.Hd=0,c.rb=d(ve+1,cs),c.sb=1,c.wa=Ce?d(Ce,dt):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=U),t(!0),c.oc=D,c.pc=$,$+=832,c.ya=d(Le,Gs),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=U),c.R=16*U,c.B=8*U,U=(K=ec[c.L])*c.R,K=K/2*c.B,c.sa=D,c.ta=$+U,c.qa=c.sa,c.ra=c.ta+16*w*c.R+K,c.Ha=c.qa,c.Ia=c.ra+8*w*c.B+K,c.$c=0,$+=M,c.mb=O?D:null,c.nb=O?$:null,t($+O<=c.Fc+c.Vb),mn(c),i(c.Ac,c.Bc,0,_),w=1}}if(w){if(m.ka=0,m.y=c.sa,m.O=c.ta,m.f=c.qa,m.N=c.ra,m.ea=c.Ha,m.Vd=c.Ia,m.fa=c.R,m.Rc=c.B,m.F=null,m.J=0,!Eo){for(w=-255;255>=w;++w)xs[255+w]=0>w?-w:w;for(w=-1020;1020>=w;++w)Hn[1020+w]=-128>w?-128:127<w?127:w;for(w=-112;112>=w;++w)ui[112+w]=-16>w?-16:15<w?15:w;for(w=-255;510>=w;++w)$n[255+w]=0>w?0:255<w?255:w;Eo=1}ja=Ba,zn=pa,_a=pn,Er=Is,rn=Fn,Fs=Jn,di=Ui,Xi=ba,eo=Wi,Sr=Vi,Bn=gl,Sa=ni,qn=zr,hi=Lo,ka=Po,Pa=Hs,ia=Qr,bn=Co,Tn[0]=Yt,Tn[1]=zi,Tn[2]=It,Tn[3]=gn,Tn[4]=qi,Tn[5]=xa,Tn[6]=si,Tn[7]=Ha,Tn[8]=Hi,Tn[9]=ea,La[0]=ei,La[1]=Bi,La[2]=Pn,La[3]=Xn,La[4]=Ks,La[5]=_o,La[6]=ti,Un[0]=ta,Un[1]=qa,Un[2]=$a,Un[3]=Ds,Un[4]=Ua,Un[5]=So,Un[6]=ri,w=1}else w=0}w&&(w=function(Se,Be){for(Se.M=0;Se.M<Se.Va;++Se.M){var Re,ye=Se.Jc[Se.M&Se.Xb],je=Se.m,De=Se;for(Re=0;Re<De.za;++Re){var He=je,ze=De,st=ze.Ac,Ke=ze.Bc+4*Re,yt=ze.zc,Xe=ze.ya[ze.aa+Re];if(ze.Qa.Bb?Xe.$b=J(He,ze.Pa.jb[0])?2+J(He,ze.Pa.jb[2]):J(He,ze.Pa.jb[1]):Xe.$b=0,ze.kc&&(Xe.Ad=J(He,ze.Bd)),Xe.Za=!J(He,145)+0,Xe.Za){var ds=Xe.Ob,ys=0;for(ze=0;4>ze;++ze){var as,es=yt[0+ze];for(as=0;4>as;++as){es=Hr[st[Ke+as]][es];for(var Cs=Qs[J(He,es[0])];0<Cs;)Cs=Qs[2*Cs+J(He,es[Cs])];es=-Cs,st[Ke+as]=es}a(ds,ys,st,Ke,4),ys+=4,yt[0+ze]=es}}else es=J(He,156)?J(He,128)?1:3:J(He,163)?2:0,Xe.Ob[0]=es,i(st,Ke,es,4),i(yt,0,es,4);Xe.Dd=J(He,142)?J(He,114)?J(He,183)?1:3:2:0}if(De.m.Ka)return pt(Se,7,"Premature end-of-partition0 encountered.");for(;Se.ja<Se.za;++Se.ja){if(De=ye,He=(je=Se).rb[je.sb-1],st=je.rb[je.sb+je.ja],Re=je.ya[je.aa+je.ja],Ke=je.kc?Re.Ad:0)He.la=st.la=0,Re.Za||(He.Na=st.Na=0),Re.Hc=0,Re.Gc=0,Re.ia=0;else{var Ss,qt;if(He=st,st=De,Ke=je.Pa.Xc,yt=je.ya[je.aa+je.ja],Xe=je.pb[yt.$b],ze=yt.ad,ds=0,ys=je.rb[je.sb-1],es=as=0,i(ze,ds,0,384),yt.Za)var ar=0,Nn=Ke[3];else{Cs=l(16);var ir=He.Na+ys.Na;if(ir=gt(st,Ke[1],ir,Xe.Eb,0,Cs,0),He.Na=ys.Na=(0<ir)+0,1<ir)ja(Cs,0,ze,ds);else{var jn=Cs[0]+3>>3;for(Cs=0;256>Cs;Cs+=16)ze[ds+Cs]=jn}ar=1,Nn=Ke[0]}var bs=15&He.la,En=15&ys.la;for(Cs=0;4>Cs;++Cs){var Mn=1&En;for(jn=qt=0;4>jn;++jn)bs=bs>>1|(Mn=(ir=gt(st,Nn,ir=Mn+(1&bs),Xe.Sc,ar,ze,ds))>ar)<<7,qt=qt<<2|(3<ir?3:1<ir?2:ze[ds+0]!=0),ds+=16;bs>>=4,En=En>>1|Mn<<7,as=(as<<8|qt)>>>0}for(Nn=bs,ar=En>>4,Ss=0;4>Ss;Ss+=2){for(qt=0,bs=He.la>>4+Ss,En=ys.la>>4+Ss,Cs=0;2>Cs;++Cs){for(Mn=1&En,jn=0;2>jn;++jn)ir=Mn+(1&bs),bs=bs>>1|(Mn=0<(ir=gt(st,Ke[2],ir,Xe.Qc,0,ze,ds)))<<3,qt=qt<<2|(3<ir?3:1<ir?2:ze[ds+0]!=0),ds+=16;bs>>=2,En=En>>1|Mn<<5}es|=qt<<4*Ss,Nn|=bs<<4<<Ss,ar|=(240&En)<<Ss}He.la=Nn,ys.la=ar,yt.Hc=as,yt.Gc=es,yt.ia=43690&es?0:Xe.ia,Ke=!(as|es)}if(0<je.L&&(je.wa[je.Y+je.ja]=je.gd[Re.$b][Re.Za],je.wa[je.Y+je.ja].La|=!Ke),De.Ka)return pt(Se,7,"Premature end-of-file encountered.")}if(mn(Se),je=Be,De=1,Re=(ye=Se).D,He=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(Re.M=ye.M,Re.uc=He,Ki(ye,Re),De=1,Re=(qt=ye.D).Nb,He=(es=ec[ye.L])*ye.R,st=es/2*ye.B,Cs=16*Re*ye.R,jn=8*Re*ye.B,Ke=ye.sa,yt=ye.ta-He+Cs,Xe=ye.qa,ze=ye.ra-st+jn,ds=ye.Ha,ys=ye.Ia-st+jn,En=(bs=qt.M)==0,as=bs>=ye.Va-1,ye.Aa==2&&Ki(ye,qt),qt.uc)for(Mn=(ir=ye).D.M,t(ir.D.uc),qt=ir.yb;qt<ir.Hb;++qt){ar=qt,Nn=Mn;var kr=(Rr=(Ws=ir).D).Nb;Ss=Ws.R;var Rr=Rr.wa[Rr.Y+ar],an=Ws.sa,Wn=Ws.ta+16*kr*Ss+16*ar,Aa=Rr.dd,Pr=Rr.tc;if(Pr!=0)if(t(3<=Pr),Ws.L==1)0<ar&&Pa(an,Wn,Ss,Pr+4),Rr.La&&bn(an,Wn,Ss,Pr),0<Nn&&ka(an,Wn,Ss,Pr+4),Rr.La&&ia(an,Wn,Ss,Pr);else{var Ga=Ws.B,no=Ws.qa,zo=Ws.ra+8*kr*Ga+8*ar,pi=Ws.Ha,Ws=Ws.Ia+8*kr*Ga+8*ar;kr=Rr.ld,0<ar&&(Xi(an,Wn,Ss,Pr+4,Aa,kr),Sr(no,zo,pi,Ws,Ga,Pr+4,Aa,kr)),Rr.La&&(Sa(an,Wn,Ss,Pr,Aa,kr),hi(no,zo,pi,Ws,Ga,Pr,Aa,kr)),0<Nn&&(di(an,Wn,Ss,Pr+4,Aa,kr),eo(no,zo,pi,Ws,Ga,Pr+4,Aa,kr)),Rr.La&&(Bn(an,Wn,Ss,Pr,Aa,kr),qn(no,zo,pi,Ws,Ga,Pr,Aa,kr))}}if(ye.ia&&alert("todo:DitherRow"),je.put!=null){if(qt=16*bs,bs=16*(bs+1),En?(je.y=ye.sa,je.O=ye.ta+Cs,je.f=ye.qa,je.N=ye.ra+jn,je.ea=ye.Ha,je.W=ye.Ia+jn):(qt-=es,je.y=Ke,je.O=yt,je.f=Xe,je.N=ze,je.ea=ds,je.W=ys),as||(bs-=es),bs>je.o&&(bs=je.o),je.F=null,je.J=null,ye.Fa!=null&&0<ye.Fa.length&&qt<bs&&(je.J=Yi(ye,je,qt,bs-qt),je.F=ye.mb,je.F==null&&je.F.length==0)){De=pt(ye,3,"Could not decode alpha data.");break e}qt<je.j&&(es=je.j-qt,qt=je.j,t(!(1&es)),je.O+=ye.R*es,je.N+=ye.B*(es>>1),je.W+=ye.B*(es>>1),je.F!=null&&(je.J+=je.width*es)),qt<bs&&(je.O+=je.v,je.N+=je.v>>1,je.W+=je.v>>1,je.F!=null&&(je.J+=je.v),je.ka=qt-je.j,je.U=je.va-je.v,je.T=bs-qt,De=je.put(je))}Re+1!=ye.Ic||as||(a(ye.sa,ye.ta-He,Ke,yt+16*ye.R,He),a(ye.qa,ye.ra-st,Xe,ze+8*ye.B,st),a(ye.Ha,ye.Ia-st,ds,ys+8*ye.B,st))}if(!De)return pt(Se,6,"Output aborted.")}return 1}(c,m)),m.bc!=null&&m.bc(m),w&=1}return w?(c.cb=0,w):0}function Dt(c,m,w,_,M){M=c[m+w+32*_]+(M>>3),c[m+w+32*_]=-256&M?0>M?0:255:M}function cr(c,m,w,_,M,O){Dt(c,m,0,w,_+M),Dt(c,m,1,w,_+O),Dt(c,m,2,w,_-O),Dt(c,m,3,w,_-M)}function Ys(c){return(20091*c>>16)+c}function nr(c,m,w,_){var M,O=0,D=l(16);for(M=0;4>M;++M){var $=c[m+0]+c[m+8],U=c[m+0]-c[m+8],K=(35468*c[m+4]>>16)-Ys(c[m+12]),ve=Ys(c[m+4])+(35468*c[m+12]>>16);D[O+0]=$+ve,D[O+1]=U+K,D[O+2]=U-K,D[O+3]=$-ve,O+=4,m++}for(M=O=0;4>M;++M)$=(c=D[O+0]+4)+D[O+8],U=c-D[O+8],K=(35468*D[O+4]>>16)-Ys(D[O+12]),Dt(w,_,0,0,$+(ve=Ys(D[O+4])+(35468*D[O+12]>>16))),Dt(w,_,1,0,U+K),Dt(w,_,2,0,U-K),Dt(w,_,3,0,$-ve),O++,_+=32}function Jn(c,m,w,_){var M=c[m+0]+4,O=35468*c[m+4]>>16,D=Ys(c[m+4]),$=35468*c[m+1]>>16;cr(w,_,0,M+D,c=Ys(c[m+1]),$),cr(w,_,1,M+O,c,$),cr(w,_,2,M-O,c,$),cr(w,_,3,M-D,c,$)}function pa(c,m,w,_,M){nr(c,m,w,_),M&&nr(c,m+16,w,_+4)}function pn(c,m,w,_){zn(c,m+0,w,_,1),zn(c,m+32,w,_+128,1)}function Is(c,m,w,_){var M;for(c=c[m+0]+4,M=0;4>M;++M)for(m=0;4>m;++m)Dt(w,_,m,M,c)}function Fn(c,m,w,_){c[m+0]&&Er(c,m+0,w,_),c[m+16]&&Er(c,m+16,w,_+4),c[m+32]&&Er(c,m+32,w,_+128),c[m+48]&&Er(c,m+48,w,_+128+4)}function Ba(c,m,w,_){var M,O=l(16);for(M=0;4>M;++M){var D=c[m+0+M]+c[m+12+M],$=c[m+4+M]+c[m+8+M],U=c[m+4+M]-c[m+8+M],K=c[m+0+M]-c[m+12+M];O[0+M]=D+$,O[8+M]=D-$,O[4+M]=K+U,O[12+M]=K-U}for(M=0;4>M;++M)D=(c=O[0+4*M]+3)+O[3+4*M],$=O[1+4*M]+O[2+4*M],U=O[1+4*M]-O[2+4*M],K=c-O[3+4*M],w[_+0]=D+$>>3,w[_+16]=K+U>>3,w[_+32]=D-$>>3,w[_+48]=K-U>>3,_+=64}function Qn(c,m,w){var _,M=m-32,O=qr,D=255-c[M-1];for(_=0;_<w;++_){var $,U=O,K=D+c[m-1];for($=0;$<w;++$)c[m+$]=U[K+c[M+$]];m+=32}}function zi(c,m){Qn(c,m,4)}function qa(c,m){Qn(c,m,8)}function Bi(c,m){Qn(c,m,16)}function Pn(c,m){var w;for(w=0;16>w;++w)a(c,m+32*w,c,m-32,16)}function Xn(c,m){var w;for(w=16;0<w;--w)i(c,m,c[m-1],16),m+=32}function ga(c,m,w){var _;for(_=0;16>_;++_)i(m,w+32*_,c,16)}function ei(c,m){var w,_=16;for(w=0;16>w;++w)_+=c[m-1+32*w]+c[m+w-32];ga(_>>5,c,m)}function Ks(c,m){var w,_=8;for(w=0;16>w;++w)_+=c[m-1+32*w];ga(_>>4,c,m)}function _o(c,m){var w,_=8;for(w=0;16>w;++w)_+=c[m+w-32];ga(_>>4,c,m)}function ti(c,m){ga(128,c,m)}function Et(c,m,w){return c+2*m+w+2>>2}function It(c,m){var w,_=m-32;for(_=new Uint8Array([Et(c[_-1],c[_+0],c[_+1]),Et(c[_+0],c[_+1],c[_+2]),Et(c[_+1],c[_+2],c[_+3]),Et(c[_+2],c[_+3],c[_+4])]),w=0;4>w;++w)a(c,m+32*w,_,0,_.length)}function gn(c,m){var w=c[m-1],_=c[m-1+32],M=c[m-1+64],O=c[m-1+96];oe(c,m+0,16843009*Et(c[m-1-32],w,_)),oe(c,m+32,16843009*Et(w,_,M)),oe(c,m+64,16843009*Et(_,M,O)),oe(c,m+96,16843009*Et(M,O,O))}function Yt(c,m){var w,_=4;for(w=0;4>w;++w)_+=c[m+w-32]+c[m-1+32*w];for(_>>=3,w=0;4>w;++w)i(c,m+32*w,_,4)}function qi(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1-32],D=c[m+0-32],$=c[m+1-32],U=c[m+2-32],K=c[m+3-32];c[m+0+96]=Et(_,M,c[m-1+96]),c[m+1+96]=c[m+0+64]=Et(w,_,M),c[m+2+96]=c[m+1+64]=c[m+0+32]=Et(O,w,_),c[m+3+96]=c[m+2+64]=c[m+1+32]=c[m+0+0]=Et(D,O,w),c[m+3+64]=c[m+2+32]=c[m+1+0]=Et($,D,O),c[m+3+32]=c[m+2+0]=Et(U,$,D),c[m+3+0]=Et(K,U,$)}function si(c,m){var w=c[m+1-32],_=c[m+2-32],M=c[m+3-32],O=c[m+4-32],D=c[m+5-32],$=c[m+6-32],U=c[m+7-32];c[m+0+0]=Et(c[m+0-32],w,_),c[m+1+0]=c[m+0+32]=Et(w,_,M),c[m+2+0]=c[m+1+32]=c[m+0+64]=Et(_,M,O),c[m+3+0]=c[m+2+32]=c[m+1+64]=c[m+0+96]=Et(M,O,D),c[m+3+32]=c[m+2+64]=c[m+1+96]=Et(O,D,$),c[m+3+64]=c[m+2+96]=Et(D,$,U),c[m+3+96]=Et($,U,U)}function xa(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1-32],D=c[m+0-32],$=c[m+1-32],U=c[m+2-32],K=c[m+3-32];c[m+0+0]=c[m+1+64]=O+D+1>>1,c[m+1+0]=c[m+2+64]=D+$+1>>1,c[m+2+0]=c[m+3+64]=$+U+1>>1,c[m+3+0]=U+K+1>>1,c[m+0+96]=Et(M,_,w),c[m+0+64]=Et(_,w,O),c[m+0+32]=c[m+1+96]=Et(w,O,D),c[m+1+32]=c[m+2+96]=Et(O,D,$),c[m+2+32]=c[m+3+96]=Et(D,$,U),c[m+3+32]=Et($,U,K)}function Ha(c,m){var w=c[m+0-32],_=c[m+1-32],M=c[m+2-32],O=c[m+3-32],D=c[m+4-32],$=c[m+5-32],U=c[m+6-32],K=c[m+7-32];c[m+0+0]=w+_+1>>1,c[m+1+0]=c[m+0+64]=_+M+1>>1,c[m+2+0]=c[m+1+64]=M+O+1>>1,c[m+3+0]=c[m+2+64]=O+D+1>>1,c[m+0+32]=Et(w,_,M),c[m+1+32]=c[m+0+96]=Et(_,M,O),c[m+2+32]=c[m+1+96]=Et(M,O,D),c[m+3+32]=c[m+2+96]=Et(O,D,$),c[m+3+64]=Et(D,$,U),c[m+3+96]=Et($,U,K)}function ea(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1+96];c[m+0+0]=w+_+1>>1,c[m+2+0]=c[m+0+32]=_+M+1>>1,c[m+2+32]=c[m+0+64]=M+O+1>>1,c[m+1+0]=Et(w,_,M),c[m+3+0]=c[m+1+32]=Et(_,M,O),c[m+3+32]=c[m+1+64]=Et(M,O,O),c[m+3+64]=c[m+2+64]=c[m+0+96]=c[m+1+96]=c[m+2+96]=c[m+3+96]=O}function Hi(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1+96],D=c[m-1-32],$=c[m+0-32],U=c[m+1-32],K=c[m+2-32];c[m+0+0]=c[m+2+32]=w+D+1>>1,c[m+0+32]=c[m+2+64]=_+w+1>>1,c[m+0+64]=c[m+2+96]=M+_+1>>1,c[m+0+96]=O+M+1>>1,c[m+3+0]=Et($,U,K),c[m+2+0]=Et(D,$,U),c[m+1+0]=c[m+3+32]=Et(w,D,$),c[m+1+32]=c[m+3+64]=Et(_,w,D),c[m+1+64]=c[m+3+96]=Et(M,_,w),c[m+1+96]=Et(O,M,_)}function $a(c,m){var w;for(w=0;8>w;++w)a(c,m+32*w,c,m-32,8)}function Ds(c,m){var w;for(w=0;8>w;++w)i(c,m,c[m-1],8),m+=32}function Jr(c,m,w){var _;for(_=0;8>_;++_)i(m,w+32*_,c,8)}function ta(c,m){var w,_=8;for(w=0;8>w;++w)_+=c[m+w-32]+c[m-1+32*w];Jr(_>>4,c,m)}function So(c,m){var w,_=4;for(w=0;8>w;++w)_+=c[m+w-32];Jr(_>>3,c,m)}function Ua(c,m){var w,_=4;for(w=0;8>w;++w)_+=c[m-1+32*w];Jr(_>>3,c,m)}function ri(c,m){Jr(128,c,m)}function va(c,m,w){var _=c[m-w],M=c[m+0],O=3*(M-_)+fi[1020+c[m-2*w]-c[m+w]],D=Ca[112+(O+4>>3)];c[m-w]=qr[255+_+Ca[112+(O+3>>3)]],c[m+0]=qr[255+M-D]}function ko(c,m,w,_){var M=c[m+0],O=c[m+w];return nn[255+c[m-2*w]-c[m-w]]>_||nn[255+O-M]>_}function $i(c,m,w,_){return 4*nn[255+c[m-w]-c[m+0]]+nn[255+c[m-2*w]-c[m+w]]<=_}function Vt(c,m,w,_,M){var O=c[m-3*w],D=c[m-2*w],$=c[m-w],U=c[m+0],K=c[m+w],ve=c[m+2*w],Ce=c[m+3*w];return 4*nn[255+$-U]+nn[255+D-K]>_?0:nn[255+c[m-4*w]-O]<=M&&nn[255+O-D]<=M&&nn[255+D-$]<=M&&nn[255+Ce-ve]<=M&&nn[255+ve-K]<=M&&nn[255+K-U]<=M}function Po(c,m,w,_){var M=2*_+1;for(_=0;16>_;++_)$i(c,m+_,w,M)&&va(c,m+_,w)}function Hs(c,m,w,_){var M=2*_+1;for(_=0;16>_;++_)$i(c,m+_*w,1,M)&&va(c,m+_*w,1)}function Qr(c,m,w,_){var M;for(M=3;0<M;--M)Po(c,m+=4*w,w,_)}function Co(c,m,w,_){var M;for(M=3;0<M;--M)Hs(c,m+=4,w,_)}function ya(c,m,w,_,M,O,D,$){for(O=2*O+1;0<M--;){if(Vt(c,m,w,O,D))if(ko(c,m,w,$))va(c,m,w);else{var U=c,K=m,ve=w,Ce=U[K-2*ve],Le=U[K-ve],Se=U[K+0],Be=U[K+ve],Re=U[K+2*ve],ye=27*(De=fi[1020+3*(Se-Le)+fi[1020+Ce-Be]])+63>>7,je=18*De+63>>7,De=9*De+63>>7;U[K-3*ve]=qr[255+U[K-3*ve]+De],U[K-2*ve]=qr[255+Ce+je],U[K-ve]=qr[255+Le+ye],U[K+0]=qr[255+Se-ye],U[K+ve]=qr[255+Be-je],U[K+2*ve]=qr[255+Re-De]}m+=_}}function Xr(c,m,w,_,M,O,D,$){for(O=2*O+1;0<M--;){if(Vt(c,m,w,O,D))if(ko(c,m,w,$))va(c,m,w);else{var U=c,K=m,ve=w,Ce=U[K-ve],Le=U[K+0],Se=U[K+ve],Be=Ca[112+((Re=3*(Le-Ce))+4>>3)],Re=Ca[112+(Re+3>>3)],ye=Be+1>>1;U[K-2*ve]=qr[255+U[K-2*ve]+ye],U[K-ve]=qr[255+Ce+Re],U[K+0]=qr[255+Le-Be],U[K+ve]=qr[255+Se-ye]}m+=_}}function Ui(c,m,w,_,M,O){ya(c,m,w,1,16,_,M,O)}function ba(c,m,w,_,M,O){ya(c,m,1,w,16,_,M,O)}function gl(c,m,w,_,M,O){var D;for(D=3;0<D;--D)Xr(c,m+=4*w,w,1,16,_,M,O)}function ni(c,m,w,_,M,O){var D;for(D=3;0<D;--D)Xr(c,m+=4,1,w,16,_,M,O)}function Wi(c,m,w,_,M,O,D,$){ya(c,m,M,1,8,O,D,$),ya(w,_,M,1,8,O,D,$)}function Vi(c,m,w,_,M,O,D,$){ya(c,m,1,M,8,O,D,$),ya(w,_,1,M,8,O,D,$)}function zr(c,m,w,_,M,O,D,$){Xr(c,m+4*M,M,1,8,O,D,$),Xr(w,_+4*M,M,1,8,O,D,$)}function Lo(c,m,w,_,M,O,D,$){Xr(c,m+4,1,M,8,O,D,$),Xr(w,_+4,1,M,8,O,D,$)}function Wa(){this.ba=new Dr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new As,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ai(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Zi(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new z}function Gi(){this.xb=this.a=0,this.l=new Qt,this.ca=new Dr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Zi,this.ab=0,this.gc=d(4,ai),this.Oc=0}function ii(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wa(c,m,w,_,M,O,D){for(c=c==null?0:c[m+0],m=0;m<D;++m)M[O+m]=c+w[_+m]&255,c=M[O+m]}function oi(c,m,w,_,M,O,D){var $;if(c==null)wa(null,null,w,_,M,O,D);else for($=0;$<D;++$)M[O+$]=c[m+$]+w[_+$]&255}function Na(c,m,w,_,M,O,D){if(c==null)wa(null,null,w,_,M,O,D);else{var $,U=c[m+0],K=U,ve=U;for($=0;$<D;++$)K=ve+(U=c[m+$])-K,ve=w[_+$]+(-256&K?0>K?0:255:K)&255,K=U,M[O+$]=ve}}function Yi(c,m,w,_){var M=m.width,O=m.o;if(t(c!=null&&m!=null),0>w||0>=_||w+_>O)return null;if(!c.Cc){if(c.ga==null){var D;if(c.ga=new ii,(D=c.ga==null)||(D=m.width*m.o,t(c.Gb.length==0),c.Gb=l(D),c.Uc=0,c.Gb==null?D=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,D=1),D=!D),!D){D=c.ga;var $=c.Fa,U=c.P,K=c.qc,ve=c.mb,Ce=c.nb,Le=U+1,Se=K-1,Be=D.l;if(t($!=null&&ve!=null&&m!=null),vs[0]=null,vs[1]=wa,vs[2]=oi,vs[3]=Na,D.ca=ve,D.tb=Ce,D.c=m.width,D.i=m.height,t(0<D.c&&0<D.i),1>=K)m=0;else if(D.$a=$[U+0]>>0&3,D.Z=$[U+0]>>2&3,D.Lc=$[U+0]>>4&3,U=$[U+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||U)m=0;else if(Be.put=Fr,Be.ac=Os,Be.bc=qs,Be.ma=D,Be.width=m.width,Be.height=m.height,Be.Da=m.Da,Be.v=m.v,Be.va=m.va,Be.j=m.j,Be.o=m.o,D.$a)e:{t(D.$a==1),m=Ue();t:for(;;){if(m==null){m=0;break e}if(t(D!=null),D.mc=m,m.c=D.c,m.i=D.i,m.l=D.l,m.l.ma=D,m.l.width=D.c,m.l.height=D.i,m.a=0,ne(m.m,$,Le,Se),!nt(D.c,D.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Kr(m.s)?(D.ic=1,$=m.c*m.i,m.Ta=null,m.Ua=0,m.V=l($),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(D.ic=0,m=bt(m,D.c)),!m))break t;m=1;break e}D.mc=null,m=0}else m=Se>=D.c*D.i;D=!m}if(D)return null;c.ga.Lc!=1?c.Ga=0:_=O-w}t(c.ga!=null),t(w+_<=O);e:{if(m=($=c.ga).c,O=$.l.o,$.$a==0){if(Le=c.rc,Se=c.Vc,Be=c.Fa,U=c.P+1+w*m,K=c.mb,ve=c.nb+w*m,t(U<=c.P+c.qc),$.Z!=0)for(t(vs[$.Z]!=null),D=0;D<_;++D)vs[$.Z](Le,Se,Be,U,K,ve,m),Le=K,Se=ve,ve+=m,U+=m;else for(D=0;D<_;++D)a(K,ve,Be,U,m),Le=K,Se=ve,ve+=m,U+=m;c.rc=Le,c.Vc=Se}else{if(t($.mc!=null),m=w+_,t((D=$.mc)!=null),t(m<=D.i),D.C>=m)m=1;else if($.ic||ke(),$.ic){$=D.V,Le=D.Ba,Se=D.c;var Re=D.i,ye=(Be=1,U=D.$/Se,K=D.$%Se,ve=D.m,Ce=D.s,D.$),je=Se*Re,De=Se*m,He=Ce.wc,ze=ye<De?Ye(Ce,K,U):null;t(ye<=je),t(m<=Re),t(Kr(Ce));t:for(;;){for(;!ve.h&&ye<De;){if(K&He||(ze=Ye(Ce,K,U)),t(ze!=null),re(ve),256>(Re=yr(ze.G[0],ze.H[0],ve)))$[Le+ye]=Re,++ye,++K>=Se&&(K=0,++U<=m&&!(U%16)&&Ar(D,U));else{if(!(280>Re)){Be=0;break t}Re=Yr(Re-256,ve);var st,Ke=yr(ze.G[4],ze.H[4],ve);if(re(ve),!(ye>=(Ke=hn(Se,Ke=Yr(Ke,ve)))&&je-ye>=Re)){Be=0;break t}for(st=0;st<Re;++st)$[Le+ye+st]=$[Le+ye+st-Ke];for(ye+=Re,K+=Re;K>=Se;)K-=Se,++U<=m&&!(U%16)&&Ar(D,U);ye<De&&K&He&&(ze=Ye(Ce,K,U))}t(ve.h==Z(ve))}Ar(D,U>m?m:U);break t}!Be||ve.h&&ye<je?(Be=0,D.a=ve.h?5:3):D.$=ye,m=Be}else m=_e(D,D.V,D.Ba,D.c,D.i,m,Ht);if(!m){_=0;break e}}w+_>=O&&(c.Cc=1),_=1}if(!_)return null;if(c.Cc&&((_=c.ga)!=null&&(_.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+w*M}function x(c,m,w,_,M,O){for(;0<M--;){var D,$=c,U=m+(w?1:0),K=c,ve=m+(w?0:3);for(D=0;D<_;++D){var Ce=K[ve+4*D];Ce!=255&&(Ce*=32897,$[U+4*D+0]=$[U+4*D+0]*Ce>>23,$[U+4*D+1]=$[U+4*D+1]*Ce>>23,$[U+4*D+2]=$[U+4*D+2]*Ce>>23)}m+=O}}function I(c,m,w,_,M){for(;0<_--;){var O;for(O=0;O<w;++O){var D=c[m+2*O+0],$=15&(K=c[m+2*O+1]),U=4369*$,K=(240&K|K>>4)*U>>16;c[m+2*O+0]=(240&D|D>>4)*U>>16&240|(15&D|D<<4)*U>>16>>4&15,c[m+2*O+1]=240&K|$}m+=M}}function se(c,m,w,_,M,O,D,$){var U,K,ve=255;for(K=0;K<M;++K){for(U=0;U<_;++U){var Ce=c[m+U];O[D+4*U]=Ce,ve&=Ce}m+=w,D+=$}return ve!=255}function me(c,m,w,_,M){var O;for(O=0;O<M;++O)w[_+O]=c[m+O]>>8}function ke(){fr=x,ps=I,gs=se,zs=me}function Ie(c,m,w){ee[c]=function(_,M,O,D,$,U,K,ve,Ce,Le,Se,Be,Re,ye,je,De,He){var ze,st=He-1>>1,Ke=$[U+0]|K[ve+0]<<16,yt=Ce[Le+0]|Se[Be+0]<<16;t(_!=null);var Xe=3*Ke+yt+131074>>2;for(m(_[M+0],255&Xe,Xe>>16,Re,ye),O!=null&&(Xe=3*yt+Ke+131074>>2,m(O[D+0],255&Xe,Xe>>16,je,De)),ze=1;ze<=st;++ze){var ds=$[U+ze]|K[ve+ze]<<16,ys=Ce[Le+ze]|Se[Be+ze]<<16,as=Ke+ds+yt+ys+524296,es=as+2*(ds+yt)>>3;Xe=es+Ke>>1,Ke=(as=as+2*(Ke+ys)>>3)+ds>>1,m(_[M+2*ze-1],255&Xe,Xe>>16,Re,ye+(2*ze-1)*w),m(_[M+2*ze-0],255&Ke,Ke>>16,Re,ye+(2*ze-0)*w),O!=null&&(Xe=as+yt>>1,Ke=es+ys>>1,m(O[D+2*ze-1],255&Xe,Xe>>16,je,De+(2*ze-1)*w),m(O[D+2*ze+0],255&Ke,Ke>>16,je,De+(2*ze+0)*w)),Ke=ds,yt=ys}1&He||(Xe=3*Ke+yt+131074>>2,m(_[M+He-1],255&Xe,Xe>>16,Re,ye+(He-1)*w),O!=null&&(Xe=3*yt+Ke+131074>>2,m(O[D+He-1],255&Xe,Xe>>16,je,De+(He-1)*w)))}}function $e(){Ir[Mo]=ld,Ir[to]=Kl,Ir[vl]=cd,Ir[so]=Fo,Ir[ro]=bl,Ir[Io]=Jl,Ir[Yl]=wx,Ir[Ro]=Kl,Ir[Oo]=Fo,Ir[Do]=bl,Ir[n]=Jl}function Qe(c){return c&-16384?0>c?0:255:c>>Nx}function at(c,m){return Qe((19077*c>>8)+(26149*m>>8)-14234)}function Rt(c,m,w){return Qe((19077*c>>8)-(6419*m>>8)-(13320*w>>8)+8708)}function Mt(c,m){return Qe((19077*c>>8)+(33050*m>>8)-17685)}function Xt(c,m,w,_,M){_[M+0]=at(c,w),_[M+1]=Rt(c,m,w),_[M+2]=Mt(c,m)}function Ps(c,m,w,_,M){_[M+0]=Mt(c,m),_[M+1]=Rt(c,m,w),_[M+2]=at(c,w)}function Ts(c,m,w,_,M){var O=Rt(c,m,w);m=O<<3&224|Mt(c,m)>>3,_[M+0]=248&at(c,w)|O>>5,_[M+1]=m}function $s(c,m,w,_,M){var O=240&Mt(c,m)|15;_[M+0]=240&at(c,w)|Rt(c,m,w)>>4,_[M+1]=O}function jr(c,m,w,_,M){_[M+0]=255,Xt(c,m,w,_,M+1)}function Js(c,m,w,_,M){Ps(c,m,w,_,M),_[M+3]=255}function Cn(c,m,w,_,M){Xt(c,m,w,_,M),_[M+3]=255}function Es(c,m){return 0>c?0:c>m?m:c}function Tr(c,m,w){ee[c]=function(_,M,O,D,$,U,K,ve,Ce){for(var Le=ve+(-2&Ce)*w;ve!=Le;)m(_[M+0],O[D+0],$[U+0],K,ve),m(_[M+1],O[D+0],$[U+0],K,ve+w),M+=2,++D,++U,ve+=2*w;1&Ce&&m(_[M+0],O[D+0],$[U+0],K,ve)}}function Ao(c,m,w){return w==0?c==0?m==0?6:5:m==0?4:0:w}function en(c,m,w,_,M){switch(c>>>30){case 3:zn(m,w,_,M,0);break;case 2:Fs(m,w,_,M);break;case 1:Er(m,w,_,M)}}function Ki(c,m){var w,_,M=m.M,O=m.Nb,D=c.oc,$=c.pc+40,U=c.oc,K=c.pc+584,ve=c.oc,Ce=c.pc+600;for(w=0;16>w;++w)D[$+32*w-1]=129;for(w=0;8>w;++w)U[K+32*w-1]=129,ve[Ce+32*w-1]=129;for(0<M?D[$-1-32]=U[K-1-32]=ve[Ce-1-32]=129:(i(D,$-32-1,127,21),i(U,K-32-1,127,9),i(ve,Ce-32-1,127,9)),_=0;_<c.za;++_){var Le=m.ya[m.aa+_];if(0<_){for(w=-1;16>w;++w)a(D,$+32*w-4,D,$+32*w+12,4);for(w=-1;8>w;++w)a(U,K+32*w-4,U,K+32*w+4,4),a(ve,Ce+32*w-4,ve,Ce+32*w+4,4)}var Se=c.Gd,Be=c.Hd+_,Re=Le.ad,ye=Le.Hc;if(0<M&&(a(D,$-32,Se[Be].y,0,16),a(U,K-32,Se[Be].f,0,8),a(ve,Ce-32,Se[Be].ea,0,8)),Le.Za){var je=D,De=$-32+16;for(0<M&&(_>=c.za-1?i(je,De,Se[Be].y[15],4):a(je,De,Se[Be+1].y,0,4)),w=0;4>w;w++)je[De+128+w]=je[De+256+w]=je[De+384+w]=je[De+0+w];for(w=0;16>w;++w,ye<<=2)je=D,De=$+uu[w],Tn[Le.Ob[w]](je,De),en(ye,Re,16*+w,je,De)}else if(je=Ao(_,M,Le.Ob[0]),La[je](D,$),ye!=0)for(w=0;16>w;++w,ye<<=2)en(ye,Re,16*+w,D,$+uu[w]);for(w=Le.Gc,je=Ao(_,M,Le.Dd),Un[je](U,K),Un[je](ve,Ce),ye=Re,je=U,De=K,255&(Le=w>>0)&&(170&Le?_a(ye,256,je,De):rn(ye,256,je,De)),Le=ve,ye=Ce,255&(w>>=8)&&(170&w?_a(Re,320,Le,ye):rn(Re,320,Le,ye)),M<c.Ub-1&&(a(Se[Be].y,0,D,$+480,16),a(Se[Be].f,0,U,K+224,8),a(Se[Be].ea,0,ve,Ce+224,8)),w=8*O*c.B,Se=c.sa,Be=c.ta+16*_+16*O*c.R,Re=c.qa,Le=c.ra+8*_+w,ye=c.Ha,je=c.Ia+8*_+w,w=0;16>w;++w)a(Se,Be+w*c.R,D,$+32*w,16);for(w=0;8>w;++w)a(Re,Le+w*c.B,U,K+32*w,8),a(ye,je+w*c.B,ve,Ce+32*w,8)}}function Ln(c,m,w,_,M,O,D,$,U){var K=[0],ve=[0],Ce=0,Le=U!=null?U.kd:0,Se=U??new xn;if(c==null||12>w)return 7;Se.data=c,Se.w=m,Se.ha=w,m=[m],w=[w],Se.gb=[Se.gb];e:{var Be=m,Re=w,ye=Se.gb;if(t(c!=null),t(Re!=null),t(ye!=null),ye[0]=0,12<=Re[0]&&!r(c,Be[0],"RIFF")){if(r(c,Be[0]+8,"WEBP")){ye=3;break e}var je=Q(c,Be[0]+4);if(12>je||4294967286<je){ye=3;break e}if(Le&&je>Re[0]-8){ye=7;break e}ye[0]=je,Be[0]+=12,Re[0]-=12}ye=0}if(ye!=0)return ye;for(je=0<Se.gb[0],w=w[0];;){e:{var De=c;Re=m,ye=w;var He=K,ze=ve,st=Be=[0];if((Xe=Ce=[Ce])[0]=0,8>ye[0])ye=7;else{if(!r(De,Re[0],"VP8X")){if(Q(De,Re[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var Ke=Q(De,Re[0]+8),yt=1+Te(De,Re[0]+12);if(2147483648<=yt*(De=1+Te(De,Re[0]+15))){ye=3;break e}st!=null&&(st[0]=Ke),He!=null&&(He[0]=yt),ze!=null&&(ze[0]=De),Re[0]+=18,ye[0]-=18,Xe[0]=1}ye=0}}if(Ce=Ce[0],Be=Be[0],ye!=0)return ye;if(Re=!!(2&Be),!je&&Ce)return 3;if(O!=null&&(O[0]=!!(16&Be)),D!=null&&(D[0]=Re),$!=null&&($[0]=0),D=K[0],Be=ve[0],Ce&&Re&&U==null){ye=0;break}if(4>w){ye=7;break}if(je&&Ce||!je&&!Ce&&!r(c,m[0],"ALPH")){w=[w],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{Ke=c,ye=m,je=w;var Xe=Se.gb;He=Se.na,ze=Se.P,st=Se.Sa,yt=22,t(Ke!=null),t(je!=null),De=ye[0];var ds=je[0];for(t(He!=null),t(st!=null),He[0]=null,ze[0]=null,st[0]=0;;){if(ye[0]=De,je[0]=ds,8>ds){ye=7;break e}var ys=Q(Ke,De+4);if(4294967286<ys){ye=3;break e}var as=8+ys+1&-2;if(yt+=as,0<Xe&&yt>Xe){ye=3;break e}if(!r(Ke,De,"VP8 ")||!r(Ke,De,"VP8L")){ye=0;break e}if(ds[0]<as){ye=7;break e}r(Ke,De,"ALPH")||(He[0]=Ke,ze[0]=De+8,st[0]=ys),De+=as,ds-=as}}if(w=w[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],ye!=0)break}w=[w],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(Xe=c,ye=m,je=w,He=Se.gb[0],ze=Se.Ja,st=Se.xa,Ke=ye[0],De=!r(Xe,Ke,"VP8 "),yt=!r(Xe,Ke,"VP8L"),t(Xe!=null),t(je!=null),t(ze!=null),t(st!=null),8>je[0])ye=7;else{if(De||yt){if(Xe=Q(Xe,Ke+4),12<=He&&Xe>He-12){ye=3;break e}if(Le&&Xe>je[0]-8){ye=7;break e}ze[0]=Xe,ye[0]+=8,je[0]-=8,st[0]=yt}else st[0]=5<=je[0]&&Xe[Ke+0]==47&&!(Xe[Ke+4]>>5),ze[0]=je[0];ye=0}if(w=w[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],m=m[0],ye!=0)break;if(4294967286<Se.Ja)return 3;if($==null||Re||($[0]=Se.xa?2:1),D=[D],Be=[Be],Se.xa){if(5>w){ye=7;break}$=D,Le=Be,Re=O,c==null||5>w?c=0:5<=w&&c[m+0]==47&&!(c[m+4]>>5)?(je=[0],Xe=[0],He=[0],ne(ze=new E,c,m,w),vt(ze,je,Xe,He)?($!=null&&($[0]=je[0]),Le!=null&&(Le[0]=Xe[0]),Re!=null&&(Re[0]=He[0]),c=1):c=0):c=0}else{if(10>w){ye=7;break}$=Be,c==null||10>w||!Dn(c,m+3,w-3)?c=0:(Le=c[m+0]|c[m+1]<<8|c[m+2]<<16,Re=16383&(c[m+7]<<8|c[m+6]),c=16383&(c[m+9]<<8|c[m+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=Se.Ja||!Re||!c?c=0:(D&&(D[0]=Re),$&&($[0]=c),c=1))}if(!c||(D=D[0],Be=Be[0],Ce&&(K[0]!=D||ve[0]!=Be)))return 3;U!=null&&(U[0]=Se,U.offset=m-U.w,t(4294967286>m-U.w),t(U.offset==U.ha-w));break}return ye==0||ye==7&&Ce&&U==null?(O!=null&&(O[0]|=Se.na!=null&&0<Se.na.length),_!=null&&(_[0]=D),M!=null&&(M[0]=Be),0):ye}function Ji(c,m,w){var _=m.width,M=m.height,O=0,D=0,$=_,U=M;if(m.Da=c!=null&&0<c.Da,m.Da&&($=c.cd,U=c.bd,O=c.v,D=c.j,11>w||(O&=-2,D&=-2),0>O||0>D||0>=$||0>=U||O+$>_||D+U>M))return 0;if(m.v=O,m.j=D,m.va=O+$,m.o=D+U,m.U=$,m.T=U,m.da=c!=null&&0<c.da,m.da){if(!We($,U,w=[c.ib],O=[c.hb]))return 0;m.ib=w[0],m.hb=O[0]}return m.ob=c!=null&&c.ob,m.Kb=c==null||!c.Sd,m.da&&(m.ob=m.ib<3*_/4&&m.hb<3*M/4,m.Kb=0),1}function sa(c){if(c==null)return 2;if(11>c.S){var m=c.f.RGBA;m.fb+=(c.height-1)*m.A,m.A=-m.A}else m=c.f.kb,c=c.height,m.O+=(c-1)*m.fa,m.fa=-m.fa,m.N+=(c-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(c-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(c-1)*m.lb,m.lb=-m.lb);return 0}function Va(c,m,w,_){if(_==null||0>=c||0>=m)return 2;if(w!=null){if(w.Da){var M=w.cd,O=w.bd,D=-2&w.v,$=-2&w.j;if(0>D||0>$||0>=M||0>=O||D+M>c||$+O>m)return 2;c=M,m=O}if(w.da){if(!We(c,m,M=[w.ib],O=[w.hb]))return 2;c=M[0],m=O[0]}}_.width=c,_.height=m;e:{var U=_.width,K=_.height;if(c=_.S,0>=U||0>=K||!(c>=Mo&&13>c))c=2;else{if(0>=_.Rd&&_.sd==null){D=O=M=m=0;var ve=($=U*fu[c])*K;if(11>c||(O=(K+1)/2*(m=(U+1)/2),c==12&&(D=(M=U)*K)),(K=l(ve+2*O+D))==null){c=1;break e}_.sd=K,11>c?((U=_.f.RGBA).eb=K,U.fb=0,U.A=$,U.size=ve):((U=_.f.kb).y=K,U.O=0,U.fa=$,U.Fd=ve,U.f=K,U.N=0+ve,U.Ab=m,U.Cd=O,U.ea=K,U.W=0+ve+O,U.Db=m,U.Ed=O,c==12&&(U.F=K,U.J=0+ve+2*O),U.Tc=D,U.lb=M)}if(m=1,M=_.S,O=_.width,D=_.height,M>=Mo&&13>M)if(11>M)c=_.f.RGBA,m&=($=Math.abs(c.A))*(D-1)+O<=c.size,m&=$>=O*fu[M],m&=c.eb!=null;else{c=_.f.kb,$=(O+1)/2,ve=(D+1)/2,U=Math.abs(c.fa),K=Math.abs(c.Ab);var Ce=Math.abs(c.Db),Le=Math.abs(c.lb),Se=Le*(D-1)+O;m&=U*(D-1)+O<=c.Fd,m&=K*(ve-1)+$<=c.Cd,m=(m&=Ce*(ve-1)+$<=c.Ed)&U>=O&K>=$&Ce>=$,m&=c.y!=null,m&=c.f!=null,m&=c.ea!=null,M==12&&(m&=Le>=O,m&=Se<=c.Tc,m&=c.F!=null)}else m=0;c=m?0:2}}return c!=0||w!=null&&w.fd&&(c=sa(_)),c}var Us=64,li=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tn=24,ra=32,Qi=8,_r=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),ee.Predictor0=function(){return 4278190080},ee.Predictor1=function(c){return c},ee.Predictor2=function(c,m,w){return m[w+0]},ee.Predictor3=function(c,m,w){return m[w+1]},ee.Predictor4=function(c,m,w){return m[w-1]},ee.Predictor5=function(c,m,w){return Ze(Ze(c,m[w+1]),m[w+0])},ee.Predictor6=function(c,m,w){return Ze(c,m[w-1])},ee.Predictor7=function(c,m,w){return Ze(c,m[w+0])},ee.Predictor8=function(c,m,w){return Ze(m[w-1],m[w+0])},ee.Predictor9=function(c,m,w){return Ze(m[w+0],m[w+1])},ee.Predictor10=function(c,m,w){return Ze(Ze(c,m[w-1]),Ze(m[w+0],m[w+1]))},ee.Predictor11=function(c,m,w){var _=m[w+0];return 0>=Pt(_>>24&255,c>>24&255,(m=m[w-1])>>24&255)+Pt(_>>16&255,c>>16&255,m>>16&255)+Pt(_>>8&255,c>>8&255,m>>8&255)+Pt(255&_,255&c,255&m)?_:c},ee.Predictor12=function(c,m,w){var _=m[w+0];return(ot((c>>24&255)+(_>>24&255)-((m=m[w-1])>>24&255))<<24|ot((c>>16&255)+(_>>16&255)-(m>>16&255))<<16|ot((c>>8&255)+(_>>8&255)-(m>>8&255))<<8|ot((255&c)+(255&_)-(255&m)))>>>0},ee.Predictor13=function(c,m,w){var _=m[w-1];return(wt((c=Ze(c,m[w+0]))>>24&255,_>>24&255)<<24|wt(c>>16&255,_>>16&255)<<16|wt(c>>8&255,_>>8&255)<<8|wt(c>>0&255,_>>0&255))>>>0};var xl=ee.PredictorAdd0;ee.PredictorAdd1=Tt,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var sn=ee.PredictorAdd2;Ct("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),Ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var To,dr=ee.ColorIndexInverseTransform,ci=ee.MapARGB,vn=ee.VP8LColorIndexInverseTransformAlpha,Za=ee.MapAlpha,na=ee.VP8LPredictorsAdd=[];na.length=16,(ee.VP8LPredictors=[]).length=16,(ee.VP8LPredictorsAdd_C=[]).length=16,(ee.VP8LPredictors_C=[]).length=16;var aa,hr,ur,An,Br,yn,ja,zn,Fs,_a,Er,rn,di,Xi,eo,Sr,Bn,Sa,qn,hi,ka,Pa,ia,bn,fr,ps,gs,zs,xs=l(511),Hn=l(2041),ui=l(225),$n=l(767),Eo=0,fi=Hn,Ca=ui,qr=$n,nn=xs,Mo=0,to=1,vl=2,so=3,ro=4,Io=5,Yl=6,Ro=7,Oo=8,Do=9,n=10,o=[2,3,7],f=[3,3,11],b=[280,256,256,256,40],k=[0,1,1,1,0],F=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ce=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ee=8,qe=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gt=null,Ut=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Qs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wn=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],mi=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],id=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],La=[],Tn=[],Un=[],od=1,yl=2,vs=[],Ir=[];Ie("UpsampleRgbLinePair",Xt,3),Ie("UpsampleBgrLinePair",Ps,3),Ie("UpsampleRgbaLinePair",Cn,4),Ie("UpsampleBgraLinePair",Js,4),Ie("UpsampleArgbLinePair",jr,4),Ie("UpsampleRgba4444LinePair",$s,2),Ie("UpsampleRgb565LinePair",Ts,2);var ld=ee.UpsampleRgbLinePair,cd=ee.UpsampleBgrLinePair,Kl=ee.UpsampleRgbaLinePair,Fo=ee.UpsampleBgraLinePair,bl=ee.UpsampleArgbLinePair,Jl=ee.UpsampleRgba4444LinePair,wx=ee.UpsampleRgb565LinePair,Ql=16,Xl=1<<Ql-1,wl=-227,dd=482,Nx=6,hu=0,jx=l(256),_x=l(256),Sx=l(256),kx=l(256),Px=l(dd-wl),Cx=l(dd-wl);Tr("YuvToRgbRow",Xt,3),Tr("YuvToBgrRow",Ps,3),Tr("YuvToRgbaRow",Cn,4),Tr("YuvToBgraRow",Js,4),Tr("YuvToArgbRow",jr,4),Tr("YuvToRgba4444Row",$s,2),Tr("YuvToRgb565Row",Ts,2);var uu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ec=[0,2,8],Lx=[8,7,6,4,4,2,2,2,1,1,1,1],Ax=1;this.WebPDecodeRGBA=function(c,m,w,_,M){var O=to,D=new Wa,$=new Dr;D.ba=$,$.S=O,$.width=[$.width],$.height=[$.height];var U=$.width,K=$.height,ve=new dn;if(ve==null||c==null)var Ce=2;else t(ve!=null),Ce=Ln(c,m,w,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Ce!=0?U=0:(U!=null&&(U[0]=ve.width[0]),K!=null&&(K[0]=ve.height[0]),U=1),U){$.width=$.width[0],$.height=$.height[0],_!=null&&(_[0]=$.width),M!=null&&(M[0]=$.height);e:{if(_=new Qt,(M=new xn).data=c,M.w=m,M.ha=w,M.kd=1,m=[0],t(M!=null),((c=Ln(M.data,M.w,M.ha,null,null,null,m,null,M))==0||c==7)&&m[0]&&(c=4),(m=c)==0){if(t(D!=null),_.data=M.data,_.w=M.w+M.offset,_.ha=M.ha-M.offset,_.put=Fr,_.ac=Os,_.bc=qs,_.ma=D,M.xa){if((c=Ue())==null){D=1;break e}if(function(Le,Se){var Be=[0],Re=[0],ye=[0];t:for(;;){if(Le==null)return 0;if(Se==null)return Le.a=2,0;if(Le.l=Se,Le.a=0,ne(Le.m,Se.data,Se.w,Se.ha),!vt(Le.m,Be,Re,ye)){Le.a=3;break t}if(Le.xb=yl,Se.width=Be[0],Se.height=Re[0],!nt(Be[0],Re[0],1,Le,null))break t;return 1}return t(Le.a!=0),0}(c,_)){if(_=(m=Va(_.width,_.height,D.Oa,D.ba))==0){t:{_=c;s:for(;;){if(_==null){_=0;break t}if(t(_.s.yc!=null),t(_.s.Ya!=null),t(0<_.s.Wb),t((w=_.l)!=null),t((M=w.ma)!=null),_.xb!=0){if(_.ca=M.ba,_.tb=M.tb,t(_.ca!=null),!Ji(M.Oa,w,so)){_.a=2;break s}if(!bt(_,w.width)||w.da)break s;if((w.da||Kt(_.ca.S))&&ke(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ke()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!Ae(_.s.vb,_.s.Wa.Xa)){_.a=1;break s}_.xb=0}if(!_e(_,_.V,_.Ba,_.c,_.i,w.o,On))break s;M.Dc=_.Ma,_=1;break t}t(_.a!=0),_=0}_=!_}_&&(m=c.a)}else m=c.a}else{if((c=new Wt)==null){D=1;break e}if(c.Fa=M.na,c.P=M.P,c.qc=M.Sa,un(c,_)){if((m=Va(_.width,_.height,D.Oa,D.ba))==0){if(c.Aa=0,w=D.Oa,t((M=c)!=null),w!=null){if(0<(U=0>(U=w.Md)?0:100<U?255:255*U/100)){for(K=ve=0;4>K;++K)12>(Ce=M.pb[K]).lc&&(Ce.ia=U*Lx[0>Ce.lc?0:Ce.lc]>>3),ve|=Ce.ia;ve&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=w.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}St(c,_)||(m=c.a)}}else m=c.a}m==0&&D.Oa!=null&&D.Oa.fd&&(m=sa(D.ba))}D=m}O=D!=0?null:11>O?$.f.RGBA.eb:$.f.kb.y}else O=null;return O};var fu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(ee,te){for(var we="",R=0;R<4;R++)we+=String.fromCharCode(ee[te++]);return we}function v(ee,te){return(ee[te+0]<<0|ee[te+1]<<8|ee[te+2]<<16)>>>0}function y(ee,te){return(ee[te+0]<<0|ee[te+1]<<8|ee[te+2]<<16|ee[te+3]<<24)>>>0}new h;var N=[0],g=[0],C=[],j=new h,T=s,A=function(ee,te){var we={},R=0,z=!1,H=0,B=0;if(we.frames=[],!function(W,Z,X,re){for(var de=0;de<re;de++)if(W[Z+de]!=X.charCodeAt(de))return!0;return!1}(ee,te,"RIFF",4)){for(y(ee,te+=4),te+=8;te<ee.length;){var pe=p(ee,te),he=y(ee,te+=4);te+=4;var be=he+(1&he);switch(pe){case"VP8 ":case"VP8L":we.frames[R]===void 0&&(we.frames[R]={}),(ae=we.frames[R]).src_off=z?B:te-8,ae.src_size=H+he+8,R++,z&&(z=!1,H=0,B=0);break;case"VP8X":(ae=we.header={}).feature_flags=ee[te];var ne=te+4;ae.canvas_width=1+v(ee,ne),ne+=3,ae.canvas_height=1+v(ee,ne),ne+=3;break;case"ALPH":z=!0,H=be+8,B=te-8;break;case"ANIM":(ae=we.header).bgcolor=y(ee,te),ne=te+4,ae.loop_count=(fe=ee)[(E=ne)+0]<<0|fe[E+1]<<8,ne+=2;break;case"ANMF":var xe,ae;(ae=we.frames[R]={}).offset_x=2*v(ee,te),te+=3,ae.offset_y=2*v(ee,te),te+=3,ae.width=1+v(ee,te),te+=3,ae.height=1+v(ee,te),te+=3,ae.duration=v(ee,te),te+=3,xe=ee[te++],ae.dispose=1&xe,ae.blend=xe>>1&1}pe!="ANMF"&&(te+=be)}var fe,E;return we}}(T,0);A.response=T,A.rgbaoutput=!0,A.dataurl=!1;var S=A.header?A.header:null,q=A.frames?A.frames:null;if(S){S.loop_counter=S.loop_count,N=[S.canvas_height],g=[S.canvas_width];for(var V=0;V<q.length&&q[V].blend!=0;V++);}var Y=q[0],ue=j.WebPDecodeRGBA(T,Y.src_off,Y.src_size,g,N);Y.rgba=ue,Y.imgwidth=g[0],Y.imgheight=N[0];for(var le=0;le<g[0]*N[0]*4;le++)C[le]=ue[le];return this.width=g,this.height=N,this.data=C,this}(function(s){var t=function(){return typeof lh=="function"},r=function(N,g,C,j){var T=4,A=d;switch(j){case s.image_compression.FAST:T=1,A=l;break;case s.image_compression.MEDIUM:T=6,A=u;break;case s.image_compression.SLOW:T=9,A=h}N=a(N,g,C,A);var S=lh(N,{level:T});return s.__addimage__.arrayBufferToBinaryString(S)},a=function(N,g,C,j){for(var T,A,S,q=N.length/g,V=new Uint8Array(N.length+q),Y=v(),ue=0;ue<q;ue+=1){if(S=ue*g,T=N.subarray(S,S+g),j)V.set(j(T,C,A),S+ue);else{for(var le,ee=Y.length,te=[];le<ee;le+=1)te[le]=Y[le](T,C,A);var we=y(te.concat());V.set(te[we],S+ue)}A=T}return V},i=function(N){var g=Array.apply([],N);return g.unshift(0),g},l=function(N,g){var C,j=[],T=N.length;j[0]=1;for(var A=0;A<T;A+=1)C=N[A-g]||0,j[A+1]=N[A]-C+256&255;return j},d=function(N,g,C){var j,T=[],A=N.length;T[0]=2;for(var S=0;S<A;S+=1)j=C&&C[S]||0,T[S+1]=N[S]-j+256&255;return T},u=function(N,g,C){var j,T,A=[],S=N.length;A[0]=3;for(var q=0;q<S;q+=1)j=N[q-g]||0,T=C&&C[q]||0,A[q+1]=N[q]+256-(j+T>>>1)&255;return A},h=function(N,g,C){var j,T,A,S,q=[],V=N.length;q[0]=4;for(var Y=0;Y<V;Y+=1)j=N[Y-g]||0,T=C&&C[Y]||0,A=C&&C[Y-g]||0,S=p(j,T,A),q[Y+1]=N[Y]-S+256&255;return q},p=function(N,g,C){if(N===g&&g===C)return N;var j=Math.abs(g-C),T=Math.abs(N-C),A=Math.abs(N+g-C-C);return j<=T&&j<=A?N:T<=A?g:C},v=function(){return[i,l,d,u,h]},y=function(N){var g=N.map(function(C){return C.reduce(function(j,T){return j+Math.abs(T)},0)});return g.indexOf(Math.min.apply(null,g))};s.processPNG=function(N,g,C,j){var T,A,S,q,V,Y,ue,le,ee,te,we,R,z,H,B,pe=this.decode.FLATE_DECODE,he="";if(this.__addimage__.isArrayBuffer(N)&&(N=new Uint8Array(N)),this.__addimage__.isArrayBufferView(N)){if(N=(S=new V5(N)).imgData,A=S.bits,T=S.colorSpace,V=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){ee=(le=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,we=new Uint8Array(ee*S.colors),te=new Uint8Array(ee);var be,ne=S.pixelBitlength-S.bits;for(H=0,B=0;H<ee;H++){for(z=le[H],be=0;be<ne;)we[B++]=z>>>be&255,be+=S.bits;te[H]=z>>>be&255}}if(S.bits===16){ee=(le=new Uint32Array(S.decodePixels().buffer)).length,we=new Uint8Array(ee*(32/S.pixelBitlength)*S.colors),te=new Uint8Array(ee*(32/S.pixelBitlength)),R=S.colors>1,H=0,B=0;for(var xe=0;H<ee;)z=le[H++],we[B++]=z>>>0&255,R&&(we[B++]=z>>>16&255,z=le[H++],we[B++]=z>>>0&255),te[xe++]=z>>>16&255;A=8}j!==s.image_compression.NONE&&t()?(N=r(we,S.width*S.colors,S.colors,j),ue=r(te,S.width,1,j)):(N=we,ue=te,pe=void 0)}if(S.colorType===3&&(T=this.color_spaces.INDEXED,Y=S.palette,S.transparency.indexed)){var ae=S.transparency.indexed,fe=0;for(H=0,ee=ae.length;H<ee;++H)fe+=ae[H];if((fe/=255)===ee-1&&ae.indexOf(0)!==-1)q=[ae.indexOf(0)];else if(fe!==ee){for(le=S.decodePixels(),te=new Uint8Array(le.length),H=0,ee=le.length;H<ee;H++)te[H]=ae[le[H]];ue=r(te,S.width,1)}}var E=function(W){var Z;switch(W){case s.image_compression.FAST:Z=11;break;case s.image_compression.MEDIUM:Z=13;break;case s.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(j);return pe===this.decode.FLATE_DECODE&&(he="/Predictor "+E+" "),he+="/Colors "+V+" /BitsPerComponent "+A+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),(ue&&this.__addimage__.isArrayBuffer(ue)||this.__addimage__.isArrayBufferView(ue))&&(ue=this.__addimage__.arrayBufferToBinaryString(ue)),{alias:C,data:N,index:g,filter:pe,decodeParameters:he,transparency:q,palette:Y,sMask:ue,predictor:E,width:S.width,height:S.height,bitsPerComponent:A,colorSpace:T}}}})(Nt.API),function(s){s.processGIF89A=function(t,r,a,i){var l=new Z5(t),d=l.width,u=l.height,h=[];l.decodeAndBlitFrameRGBA(0,h);var p={data:h,width:d,height:u},v=new Od(100).encode(p,100);return s.processJPEG.call(this,v,r,a,i)},s.processGIF87A=s.processGIF89A}(Nt.API),ca.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:a,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ca.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(r){Ls.log("bit decode error:"+r)}},ca.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),r=t%4;for(s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<t;i++)for(var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var h=this.palette[l>>7-u&1];this.data[d+4*u]=h.blue,this.data[d+4*u+1]=h.green,this.data[d+4*u+2]=h.red,this.data[d+4*u+3]=255}r!==0&&(this.pos+=4-r)}},ca.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<s;i++){var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+2*i*4,u=l>>4,h=15&l,p=this.palette[u];if(this.data[d]=p.blue,this.data[d+1]=p.green,this.data[d+2]=p.red,this.data[d+3]=255,2*i+1>=this.width)break;p=this.palette[h],this.data[d+4]=p.blue,this.data[d+4+1]=p.green,this.data[d+4+2]=p.red,this.data[d+4+3]=255}t!==0&&(this.pos+=4-t)}},ca.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*a;if(i<this.palette.length){var d=this.palette[i];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}s!==0&&(this.pos+=4-s)}},ca.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&t)/t*255|0,u=(l>>5&t)/t*255|0,h=(l>>10&t)/t*255|0,p=l>>15?255:0,v=a*this.width*4+4*i;this.data[v]=h,this.data[v+1]=u,this.data[v+2]=d,this.data[v+3]=p}this.pos+=s}},ca.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var i=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(d&t)/t*255|0,h=(d>>5&r)/r*255|0,p=(d>>11)/t*255|0,v=i*this.width*4+4*l;this.data[v]=p,this.data[v+1]=h,this.data[v+2]=u,this.data[v+3]=255}this.pos+=s}},ca.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=t*this.width*4+4*r;this.data[d]=l,this.data[d+1]=i,this.data[d+2]=a,this.data[d+3]=255}this.pos+=this.width%4}},ca.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=l,this.data[u+1]=i,this.data[u+2]=a,this.data[u+3]=d}},ca.prototype.getData=function(){return this.data},function(s){s.processBMP=function(t,r,a,i){var l=new ca(t,!1),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},p=new Od(100).encode(h,100);return s.processJPEG.call(this,p,r,a,i)}}(Nt.API),Tf.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(t,r,a,i){var l=new Tf(t),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},p=new Od(100).encode(h,100);return s.processJPEG.call(this,p,r,a,i)}}(Nt.API),Nt.API.processRGBA=function(s,t,r){for(var a=s.data,i=a.length,l=new Uint8Array(i/4*3),d=new Uint8Array(i/4),u=0,h=0,p=0;p<i;p+=4){var v=a[p],y=a[p+1],N=a[p+2],g=a[p+3];l[u++]=v,l[u++]=y,l[u++]=N,d[h++]=g}var C=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:C,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},Nt.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wo=Nt.API,xc=Wo.getCharWidthsArray=function(s,t){var r,a,i=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),d=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:i.metadata.Unicode.widths,h=u.fof?u.fof:1,p=t.kerning?t.kerning:i.metadata.Unicode.kerning,v=p.fof?p.fof:1,y=t.doKerning!==!1,N=0,g=s.length,C=0,j=u[0]||h,T=[];for(r=0;r<g;r++)a=s.charCodeAt(r),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(a))+d*(1e3/l)||0)/1e3):(N=y&&js(p[a])==="object"&&!isNaN(parseInt(p[a][C],10))?p[a][C]/v:0,T.push((u[a]||j)/h+N)),C=a;return T},Pf=Wo.getStringUnitWidth=function(s,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Wo.processArabic&&(s=Wo.processArabic(s)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(s,r,i)/r:xc.apply(this,arguments).reduce(function(l,d){return l+d},0)},Cf=function(s,t,r,a){for(var i=[],l=0,d=s.length,u=0;l!==d&&u+t[l]<r;)u+=t[l],l++;i.push(s.slice(0,l));var h=l;for(u=0;l!==d;)u+t[l]>a&&(i.push(s.slice(h,l)),u=0,h=l),u+=t[l],l++;return h!==l&&i.push(s.slice(h,l)),i},Lf=function(s,t,r){r||(r={});var a,i,l,d,u,h,p,v=[],y=[v],N=r.textIndent||0,g=0,C=0,j=s.split(" "),T=xc.apply(this,[" ",r])[0];if(h=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var A=Array(h).join(" "),S=[];j.map(function(V){(V=V.split(/\s*\n/)).length>1?S=S.concat(V.map(function(Y,ue){return(ue&&Y.length?`
`:"")+Y})):S.push(V[0])}),j=S,h=Pf.apply(this,[A,r])}for(l=0,d=j.length;l<d;l++){var q=0;if(a=j[l],h&&a[0]==`
`&&(a=a.substr(1),q=1),N+g+(C=(i=xc.apply(this,[a,r])).reduce(function(V,Y){return V+Y},0))>t||q){if(C>t){for(u=Cf.apply(this,[a,i,t-(N+g),t]),v.push(u.shift()),v=[u.pop()];u.length;)y.push([u.shift()]);C=i.slice(a.length-(v[0]?v[0].length:0)).reduce(function(V,Y){return V+Y},0)}else v=[a];y.push(v),N=C+h,g=T}else v.push(a),N+=g+C,g=T}return p=h?function(V,Y){return(Y?A:"")+V.join(" ")}:function(V){return V.join(" ")},y.map(p)},Wo.splitTextToSize=function(s,t,r){var a,i=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var y=this.internal.getFont(v.fontName,v.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(s)?s:String(s).split(/\r?\n/);var d=1*this.internal.scaleFactor*t/i;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,l.lineIndent=r.lineIndent;var u,h,p=[];for(u=0,h=a.length;u<h;u++)p=p.concat(Lf.apply(this,[a[u],d,l]));return p},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},i=0;i<t.length;i++)r[t[i]]="0123456789abcdef"[i],a["0123456789abcdef"[i]]=t[i];var l=function(y){return"0x"+parseInt(y,10).toString(16)},d=s.__fontmetrics__.compress=function(y){var N,g,C,j,T=["{"];for(var A in y){if(N=y[A],isNaN(parseInt(A,10))?g="'"+A+"'":(A=parseInt(A,10),g=(g=l(A).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof N=="number")N<0?(C=l(N).slice(3),j="-"):(C=l(N).slice(2),j=""),C=j+C.slice(0,-1)+a[C.slice(-1)];else{if(js(N)!=="object")throw new Error("Don't know what to do with value type "+js(N)+".");C=d(N)}T.push(g+C)}return T.push("}"),T.join("")},u=s.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var N,g,C,j,T={},A=1,S=T,q=[],V="",Y="",ue=y.length-1,le=1;le<ue;le+=1)(j=y[le])=="'"?N?(C=N.join(""),N=void 0):N=[]:N?N.push(j):j=="{"?(q.push([S,C]),S={},C=void 0):j=="}"?((g=q.pop())[0][g[1]]=S,C=void 0,S=g[0]):j=="-"?A=-1:C===void 0?r.hasOwnProperty(j)?(V+=r[j],C=parseInt(V,16)*A,A=1,V=""):V+=j:r.hasOwnProperty(j)?(Y+=r[j],S[C]=parseInt(Y,16)*A,A=1,C=void 0,Y=""):Y+=j;return T},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},v={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(y){var N=y.font,g=v.Unicode[N.postScriptName];g&&(N.metadata.Unicode={},N.metadata.Unicode.widths=g.widths,N.metadata.Unicode.kerning=g.kerning);var C=p.Unicode[N.postScriptName];C&&(N.metadata.Unicode.encoding=C,N.encoding=C.codePages[0])}])}(Nt.API),function(s){var t=function(r){for(var a=r.length,i=new Uint8Array(a),l=0;l<a;l++)i[l]=r.charCodeAt(l);return i};s.API.events.push(["addFont",function(r){var a=void 0,i=r.font,l=r.instance;if(!i.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(a=l.existsFileInVFS(i.postScriptName)===!1?l.loadFile(i.postScriptName):l.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(d,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(Il(u)),d.metadata=s.API.TTFFont.open(u),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(i,a)}}])}(Nt),function(s){function t(){return(kt.canvg?Promise.resolve(kt.canvg):rh(()=>import("./index.es-R2fo7FM4.js"),__vite__mapDeps([0,1,2,3]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Nt.API.addSvgAsImage=function(r,a,i,l,d,u,h,p){if(isNaN(a)||isNaN(i))throw Ls.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(d))throw Ls.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=l,v.height=d;var y=v.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,v.width,v.height);var N={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(C){return C.fromString(y,r,N)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(N)}).then(function(){g.addImage(v.toDataURL("image/jpeg",1),a,i,l,d,h,p)})}}(),Nt.API.putTotalPages=function(s){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var i=0;i<this.internal.pages[a].length;i++)this.internal.pages[a][i]=this.internal.pages[a][i].replace(t,r);return this},Nt.API.viewerPreferences=function(s,t){var r;s=s||{},t=t||!1;var a,i,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(d),h=[],p=0,v=0,y=0;function N(C,j){var T,A=!1;for(T=0;T<C.length;T+=1)C[T]===j&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var g=u.length;for(y=0;y<g;y+=1)r[u[y]].value=r[u[y]].defaultValue,r[u[y]].explicitSet=!1}if(js(s)==="object"){for(i in s)if(l=s[i],N(u,i)&&l!==void 0){if(r[i].type==="boolean"&&typeof l=="boolean")r[i].value=l;else if(r[i].type==="name"&&N(r[i].valueSet,l))r[i].value=l;else if(r[i].type==="integer"&&Number.isInteger(l))r[i].value=l;else if(r[i].type==="array"){for(p=0;p<l.length;p+=1)if(a=!0,l[p].length===1&&typeof l[p][0]=="number")h.push(String(l[p]-1));else if(l[p].length>1){for(v=0;v<l[p].length;v+=1)typeof l[p][v]!="number"&&(a=!1);a===!0&&h.push([l[p][0]-1,l[p][1]-1].join(" "))}r[i].value="["+h.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,j=[];for(C in r)r[C].explicitSet===!0&&(r[C].type==="name"?j.push("/"+C+" /"+r[C].value):j.push("/"+C+" "+r[C].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(s){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(a)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),p=l.length+d.length+u.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(i+l+d+u+h),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(a,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Nt.API),function(s){var t=s.API,r=t.pdfEscape16=function(l,d){for(var u,h=d.metadata.Unicode.widths,p=["","0","00","000","0000"],v=[""],y=0,N=l.length;y<N;++y){if(u=d.metadata.characterToGlyph(l.charCodeAt(y)),d.metadata.glyIdsUsed.push(u),d.metadata.toUnicode[u]=l.charCodeAt(y),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(d.metadata.widthOfGlyph(u),10)])),u=="0")return v.join("");u=u.toString(16),v.push(p[4-u.length],u)}return v.join("")},a=function(l){var d,u,h,p,v,y,N;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,N=(u=Object.keys(l).sort(function(g,C){return g-C})).length;y<N;y++)d=u[y],h.length>=100&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(p=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),h.push("<"+d+"><"+p+">"));return h.length&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,p=d.newObject,v=d.putStream;if(u.metadata instanceof s.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,N=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),g="",C=0;C<N.length;C++)g+=String.fromCharCode(N[C]);var j=p();v({data:g,addLength1:!0,objectId:j}),h("endobj");var T=p();v({data:a(u.metadata.toUnicode),addLength1:!0,objectId:T}),h("endobj");var A=p();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Zo(u.fontName)),h("/FontFile2 "+j+" 0 R"),h("/FontBBox "+s.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var S=p();h("<<"),h("/Type /Font"),h("/BaseFont /"+Zo(u.fontName)),h("/FontDescriptor "+A+" 0 R"),h("/W "+s.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=p(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+T+" 0 R"),h("/BaseFont /"+Zo(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+S+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,p=d.newObject,v=d.putStream;if(u.metadata instanceof s.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,N="",g=0;g<y.length;g++)N+=String.fromCharCode(y[g]);var C=p();v({data:N,addLength1:!0,objectId:C}),h("endobj");var j=p();v({data:a(u.metadata.toUnicode),addLength1:!0,objectId:j}),h("endobj");var T=p();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+C+" 0 R"),h("/Flags 96"),h("/FontBBox "+s.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+Zo(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=p();for(var A=0;A<u.metadata.hmtx.widths.length;A++)u.metadata.hmtx.widths[A]=parseInt(u.metadata.hmtx.widths[A]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+Zo(u.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]);var i=function(l){var d,u=l.text||"",h=l.x,p=l.y,v=l.options||{},y=l.mutex||{},N=y.pdfEscape,g=y.activeFontKey,C=y.fonts,j=g,T="",A=0,S="",q=C[j].encoding;if(C[j].encoding!=="Identity-H")return{text:u,x:h,y:p,options:v,mutex:y};for(S=u,j=g,Array.isArray(u)&&(S=u[0]),A=0;A<S.length;A+=1)C[j].metadata.hasOwnProperty("cmap")&&(d=C[j].metadata.cmap.unicode.codeMap[S[A].charCodeAt(0)]),d||S[A].charCodeAt(0)<256&&C[j].metadata.hasOwnProperty("Unicode")?T+=S[A]:T+="";var V="";return parseInt(j.slice(1))<14||q==="WinAnsiEncoding"?V=N(T,j).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):q==="Identity-H"&&(V=r(T,C[j])),y.isHex=!0,{text:V,x:h,y:p,options:v,mutex:y}};t.events.push(["postProcessText",function(l){var d=l.text||"",u=[],h={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var p=0;for(p=0;p<d.length;p+=1)Array.isArray(d[p])&&d[p].length===3?u.push([i(Object.assign({},h,{text:d[p][0]})).text,d[p][1],d[p][2]]):u.push(i(Object.assign({},h,{text:d[p]})).text);l.text=u}else l.text=i(Object.assign({},h,{text:d})).text}])}(Nt),function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},s.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},s.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Nt.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(a){var i,l,d,u,h,p,v,y=t,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,q=0;this.__bidiEngine__={};var V=function(R){var z=R.charCodeAt(),H=z>>8,B=j[H];return B!==void 0?y[256*B+(255&z)]:H===252||H===253?"AL":A.test(H)?"L":H===8?"R":"N"},Y=function(R){for(var z,H=0;H<R.length;H++){if((z=V(R.charAt(H)))==="L")return!1;if(z==="R")return!0}return!1},ue=function(R,z,H,B){var pe,he,be,ne,xe=z[B];switch(xe){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(xe="AN");break;case"AL":S=!0,xe="R";break;case"WS":xe="N";break;case"CS":B<1||B+1>=z.length||(pe=H[B-1])!=="EN"&&pe!=="AN"||(he=z[B+1])!=="EN"&&he!=="AN"?xe="N":S&&(he="AN"),xe=he===pe?he:"N";break;case"ES":xe=(pe=B>0?H[B-1]:"B")==="EN"&&B+1<z.length&&z[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&H[B-1]==="EN"){xe="EN";break}if(S){xe="N";break}for(be=B+1,ne=z.length;be<ne&&z[be]==="ET";)be++;xe=be<ne&&z[be]==="EN"?"EN":"N";break;case"NSM":if(d&&!u){for(ne=z.length,be=B+1;be<ne&&z[be]==="NSM";)be++;if(be<ne){var ae=R[B],fe=ae>=1425&&ae<=2303||ae===64286;if(pe=z[be],fe&&(pe==="R"||pe==="AL")){xe="R";break}}}xe=B<1||(pe=z[B-1])==="B"?"N":H[B-1];break;case"B":S=!1,i=!0,xe=q;break;case"S":l=!0,xe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":xe="N"}return xe},le=function(R,z,H){var B=R.split("");return H&&ee(B,H,{hiLevel:q}),B.reverse(),z&&z.reverse(),B.join("")},ee=function(R,z,H){var B,pe,he,be,ne,xe=-1,ae=R.length,fe=0,E=[],W=q?g:N,Z=[];for(S=!1,i=!1,l=!1,pe=0;pe<ae;pe++)Z[pe]=V(R[pe]);for(he=0;he<ae;he++){if(ne=fe,E[he]=ue(R,Z,E,he),B=240&(fe=W[ne][C[E[he]]]),fe&=15,z[he]=be=W[fe][5],B>0)if(B===16){for(pe=xe;pe<he;pe++)z[pe]=1;xe=-1}else xe=-1;if(W[fe][6])xe===-1&&(xe=he);else if(xe>-1){for(pe=xe;pe<he;pe++)z[pe]=be;xe=-1}Z[he]==="B"&&(z[he]=0),H.hiLevel|=be}l&&function(X,re,de){for(var Ne=0;Ne<de;Ne++)if(X[Ne]==="S"){re[Ne]=q;for(var J=Ne-1;J>=0&&X[J]==="WS";J--)re[J]=q}}(Z,z,ae)},te=function(R,z,H,B,pe){if(!(pe.hiLevel<R)){if(R===1&&q===1&&!i)return z.reverse(),void(H&&H.reverse());for(var he,be,ne,xe,ae=z.length,fe=0;fe<ae;){if(B[fe]>=R){for(ne=fe+1;ne<ae&&B[ne]>=R;)ne++;for(xe=fe,be=ne-1;xe<be;xe++,be--)he=z[xe],z[xe]=z[be],z[be]=he,H&&(he=H[xe],H[xe]=H[be],H[be]=he);fe=ne}fe++}}},we=function(R,z,H){var B=R.split(""),pe={hiLevel:q};return H||(H=[]),ee(B,H,pe),function(he,be,ne){if(ne.hiLevel!==0&&v)for(var xe,ae=0;ae<he.length;ae++)be[ae]===1&&(xe=T.indexOf(he[ae]))>=0&&(he[ae]=T[xe+1])}(B,H,pe),te(2,B,z,H,pe),te(1,B,z,H,pe),B.join("")};return this.__bidiEngine__.doBidiReorder=function(R,z,H){if(function(pe,he){if(he)for(var be=0;be<pe.length;be++)he[be]=be;u===void 0&&(u=Y(pe)),p===void 0&&(p=Y(pe))}(R,z),d||!h||p)if(d&&h&&u^p)q=u?1:0,R=le(R,z,H);else if(!d&&h&&p)q=u?1:0,R=we(R,z,H),R=le(R,z);else if(!d||u||h||p){if(d&&!h&&u^p)R=le(R,z),u?(q=0,R=we(R,z,H)):(q=1,R=we(R,z,H),R=le(R,z));else if(d&&u&&!h&&p)q=1,R=we(R,z,H),R=le(R,z);else if(!d&&!h&&u^p){var B=v;u?(q=1,R=we(R,z,H),q=0,v=!1,R=we(R,z,H),v=B):(q=0,R=we(R,z,H),R=le(R,z),q=1,v=!1,R=we(R,z,H),v=B,R=le(R,z))}}else q=0,R=we(R,z,H);else q=u?1:0,R=we(R,z,H);return R},this.__bidiEngine__.setOptions=function(R){R&&(d=R.isInputVisual,h=R.isOutputVisual,u=R.isInputRtl,p=R.isOutputRtl,v=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(a){var i=a.text;a.x,a.y;var l=a.options||{};a.mutex,l.lang;var d=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(d=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?d.push([r.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):d.push([r.doBidiReorder(i[u])]);a.text=d}else a.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(Nt),Nt.API.TTFFont=function(){function s(t){var r;if(this.rawData=t,r=this.contents=new Oi(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new lw(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new G5(this.contents),this.head=new K5(this),this.name=new tw(this),this.cmap=new Xg(this),this.toUnicode={},this.hhea=new J5(this),this.maxp=new sw(this),this.hmtx=new rw(this),this.post=new X5(this),this.os2=new Q5(this),this.loca=new ow(this),this.glyf=new nw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,r,a,i,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,u,h,p;for(p=[],d=0,u=(h=this.bbox).length;d<u;d++)t=h[d],p.push(Math.round(t*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(a=255&(i=this.post.italic_angle),(32768&(r=i>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},s.prototype.widthOfString=function(t,r,a){var i,l,d,u;for(d=0,l=0,u=(t=""+t).length;0<=u?l<u:l>u;l=0<=u?++l:--l)i=t.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(i))+a*(1e3/r)||0;return d*(r/1e3)},s.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},s}();var ma,Oi=function(){function s(t){this.data=t??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},s.prototype.writeString=function(t){var r,a,i;for(i=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,r,a,i,l,d,u,h;return t=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),d=this.readByte(),u=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^i)+16777216*(255^l)+65536*(255^d)+256*(255^u)+(255^h)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*i+16777216*l+65536*d+256*u+h},s.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},s.prototype.write=function(t){var r,a,i,l;for(l=[],a=0,i=t.length;a<i;a++)r=t[a],l.push(this.writeByte(r));return l},s}(),G5=function(){var s;function t(r){var a,i,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,l=this.tableCount;0<=l?i<l:i>l;i=0<=l?++i:--i)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,i,l,d,u,h,p,v,y,N,g,C,j;for(j in g=Object.keys(r).length,h=Math.log(2),y=16*Math.floor(Math.log(g)/h),d=Math.floor(y/h),v=16*g-y,(i=new Oi).writeInt(this.scalarType),i.writeShort(g),i.writeShort(y),i.writeShort(d),i.writeShort(v),l=16*g,p=i.pos+l,u=null,C=[],r)for(N=r[j],i.writeString(j),i.writeInt(s(N)),i.writeInt(p),i.writeInt(N.length),C=C.concat(N),j==="head"&&(u=p),p+=N.length;p%4;)C.push(0),p++;return i.write(C),a=2981146554-s(i.data),i.pos=u+8,i.writeUInt32(a),i.data},s=function(r){var a,i,l,d;for(r=e0.call(r);r.length%4;)r.push(0);for(l=new Oi(r),i=0,a=0,d=r.length;a<d;a=a+=4)i+=l.readUInt32();return 4294967295&i},t}(),Y5={}.hasOwnProperty,za=function(s,t){for(var r in t)Y5.call(t,r)&&(s[r]=t[r]);function a(){this.constructor=s}return a.prototype=t.prototype,s.prototype=new a,s.__super__=t.prototype,s};ma=function(){function s(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var K5=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new Oi).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),Ef=function(){function s(t,r){var a,i,l,d,u,h,p,v,y,N,g,C,j,T,A,S,q;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),y=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(g=t.readUInt16(),N=g/2,t.pos+=6,l=function(){var V,Y;for(Y=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)Y.push(t.readUInt16());return Y}(),t.pos+=2,j=function(){var V,Y;for(Y=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)Y.push(t.readUInt16());return Y}(),p=function(){var V,Y;for(Y=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)Y.push(t.readUInt16());return Y}(),v=function(){var V,Y;for(Y=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)Y.push(t.readUInt16());return Y}(),i=(this.length-t.pos+this.offset)/2,u=function(){var V,Y;for(Y=[],h=V=0;0<=i?V<i:V>i;h=0<=i?++V:--V)Y.push(t.readUInt16());return Y}(),h=A=0,q=l.length;A<q;h=++A)for(T=l[h],a=S=C=j[h];C<=T?S<=T:S>=T;a=C<=T?++S:--S)v[h]===0?d=a+p[h]:(d=u[v[h]/2+(a-C)-(N-h)]||0)!==0&&(d+=p[h]),this.codeMap[a]=65535&d}t.pos=y}return s.encode=function(t,r){var a,i,l,d,u,h,p,v,y,N,g,C,j,T,A,S,q,V,Y,ue,le,ee,te,we,R,z,H,B,pe,he,be,ne,xe,ae,fe,E,W,Z,X,re,de,Ne,J,oe,ie,Te;switch(B=new Oi,d=Object.keys(t).sort(function(Q,Ae){return Q-Ae}),r){case"macroman":for(j=0,T=function(){var Q=[];for(C=0;C<256;++C)Q.push(0);return Q}(),S={0:0},l={},pe=0,xe=d.length;pe<xe;pe++)S[J=t[i=d[pe]]]==null&&(S[J]=++j),l[i]={old:t[i],new:S[t[i]]},T[i]=S[t[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(T),{charMap:l,subtable:B.data,maxGlyphID:j+1};case"unicode":for(z=[],y=[],q=0,S={},a={},A=p=null,he=0,ae=d.length;he<ae;he++)S[Y=t[i=d[he]]]==null&&(S[Y]=++q),a[i]={old:Y,new:S[Y]},u=S[Y]-i,A!=null&&u===p||(A&&y.push(A),z.push(i),p=u),A=i;for(A&&y.push(A),y.push(65535),z.push(65535),we=2*(te=z.length),ee=2*Math.pow(Math.log(te)/Math.LN2,2),N=Math.log(ee/2)/Math.LN2,le=2*te-ee,h=[],ue=[],g=[],C=be=0,fe=z.length;be<fe;C=++be){if(R=z[C],v=y[C],R===65535){h.push(0),ue.push(0);break}if(R-(H=a[R].new)>=32768)for(h.push(0),ue.push(2*(g.length+te-C)),i=ne=R;R<=v?ne<=v:ne>=v;i=R<=v?++ne:--ne)g.push(a[i].new);else h.push(H-R),ue.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*te+2*g.length),B.writeUInt16(0),B.writeUInt16(we),B.writeUInt16(ee),B.writeUInt16(N),B.writeUInt16(le),de=0,E=y.length;de<E;de++)i=y[de],B.writeUInt16(i);for(B.writeUInt16(0),Ne=0,W=z.length;Ne<W;Ne++)i=z[Ne],B.writeUInt16(i);for(oe=0,Z=h.length;oe<Z;oe++)u=h[oe],B.writeUInt16(u);for(ie=0,X=ue.length;ie<X;ie++)V=ue[ie],B.writeUInt16(V);for(Te=0,re=g.length;Te<re;Te++)j=g[Te],B.writeUInt16(j);return{charMap:a,subtable:B.data,maxGlyphID:q+1}}},s}(),Xg=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,i,l;for(r.pos=this.offset,this.version=r.readUInt16(),l=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=l?i<l:i>l;i=0<=l?++i:--i)a=new Ef(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var i,l;return a==null&&(a="macroman"),i=Ef.encode(r,a),(l=new Oi).writeUInt16(0),l.writeUInt16(1),i.table=l.data.concat(i.subtable),i},t}(),J5=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),Q5=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,i;for(i=[],a=0;a<10;++a)i.push(r.readByte());return i}(),this.charRange=function(){var a,i;for(i=[],a=0;a<4;++a)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,i;for(i=[],a=0;a<2;a=++a)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),X5=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="post",t.prototype.parse=function(r){var a,i,l;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var d;for(i=r.readUInt16(),this.glyphNameIndex=[],d=0;0<=i?d<i:d>i;d=0<=i?++d:--d)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],l=[];r.pos<this.offset+this.length;)a=r.readByte(),l.push(this.names.push(r.readString(a)));return l;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var u,h,p;for(p=[],d=u=0,h=this.file.maxp.numGlyphs;0<=h?u<h:u>h;d=0<=h?++u:--u)p.push(r.readUInt32());return p}).call(this)}},t}(),ew=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},tw=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="name",t.prototype.parse=function(r){var a,i,l,d,u,h,p,v,y,N,g;for(r.pos=this.offset,r.readShort(),a=r.readShort(),h=r.readShort(),i=[],d=0;0<=a?d<a:d>a;d=0<=a?++d:--d)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+h+r.readShort()});for(p={},d=y=0,N=i.length;y<N;d=++y)l=i[d],r.pos=l.offset,v=r.readString(l.length),u=new ew(v,l),p[g=l.nameID]==null&&(p[g]=[]),p[l.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},t}(),sw=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),rw=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,i,l,d,u,h,p;for(r.pos=this.offset,this.metrics=[],a=0,h=this.file.hhea.numberOfMetrics;0<=h?a<h:a>h;a=0<=h?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,y;for(y=[],a=v=0;0<=l?v<l:v>l;a=0<=l?++v:--v)y.push(r.readInt16());return y}(),this.widths=(function(){var v,y,N,g;for(g=[],v=0,y=(N=this.metrics).length;v<y;v++)d=N[v],g.push(d.advance);return g}).call(this),i=this.widths[this.widths.length-1],p=[],a=u=0;0<=l?u<l:u>l;a=0<=l?++u:--u)p.push(this.widths.push(i));return p},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),e0=[].slice,nw=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,i,l,d,u,h,p,v,y,N;return r in this.cache?this.cache[r]:(d=this.file.loca,a=this.file.contents,i=d.indexOf(r),(l=d.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+i,u=(h=new Oi(a.read(l))).readShort(),v=h.readShort(),N=h.readShort(),p=h.readShort(),y=h.readShort(),this.cache[r]=u===-1?new iw(h,v,N,p,y):new aw(h,u,v,N,p,y),this.cache[r]))},t.prototype.encode=function(r,a,i){var l,d,u,h,p;for(u=[],d=[],h=0,p=a.length;h<p;h++)l=r[a[h]],d.push(u.length),l&&(u=u.concat(l.encode(i)));return d.push(u.length),{table:u,offsets:d}},t}(),aw=function(){function s(t,r,a,i,l,d){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=i,this.xMax=l,this.yMax=d,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),iw=function(){function s(t,r,a,i,l){var d,u;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;u=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&u;)d.pos+=1&u?4:2,128&u?d.pos+=8:64&u?d.pos+=4:8&u&&(d.pos+=2)}return s.prototype.encode=function(){var t,r,a;for(r=new Oi(e0.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},s}(),ow=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,ma),t.prototype.tag="loca",t.prototype.parse=function(r){var a,i;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var l,d;for(d=[],i=0,l=this.length;i<l;i+=2)d.push(2*r.readUInt16());return d}).call(this):(function(){var l,d;for(d=[],i=0,l=this.length;i<l;i+=4)d.push(r.readUInt32());return d}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var i=new Uint32Array(this.offsets.length),l=0,d=0,u=0;u<i.length;++u)if(i[u]=l,d<a.length&&a[d]==u){++d,i[u]=l;var h=this.offsets[u],p=this.offsets[u+1]-h;p>0&&(l+=p)}for(var v=new Array(4*i.length),y=0;y<i.length;++y)v[4*y+3]=255&i[y],v[4*y+2]=(65280&i[y])>>8,v[4*y+1]=(16711680&i[y])>>16,v[4*y]=(4278190080&i[y])>>24;return v},t}(),lw=function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,r,a,i,l;for(r in i=this.font.cmap.tables[0].codeMap,t={},l=this.subset)a=l[r],t[r]=i[a];return t},s.prototype.glyphsFor=function(t){var r,a,i,l,d,u,h;for(i={},d=0,u=t.length;d<u;d++)i[l=t[d]]=this.font.glyf.glyphFor(l);for(l in r=[],i)(a=i[l])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(l in h=this.glyphsFor(r))a=h[l],i[l]=a;return i},s.prototype.encode=function(t,r){var a,i,l,d,u,h,p,v,y,N,g,C,j,T,A;for(i in a=Xg.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(t),g={0:0},A=a.charMap)g[(h=A[i]).old]=h.new;for(C in N=a.maxGlyphID,d)C in g||(g[C]=N++);return v=function(S){var q,V;for(q in V={},S)V[S[q]]=q;return V}(g),y=Object.keys(v).sort(function(S,q){return S-q}),j=function(){var S,q,V;for(V=[],S=0,q=y.length;S<q;S++)u=y[S],V.push(v[u]);return V}(),l=this.font.glyf.encode(d,j,g),p=this.font.loca.encode(l.offsets,j),T={cmap:this.font.cmap.raw(),glyf:l.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},s}();Nt.API.PDFObject=function(){var s;function t(){}return s=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,i,l,d;if(Array.isArray(r))return"["+function(){var u,h,p;for(p=[],u=0,h=r.length;u<h;u++)a=r[u],p.push(t.convert(a));return p}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+s(r.getUTCFullYear(),4)+s(r.getUTCMonth(),2)+s(r.getUTCDate(),2)+s(r.getUTCHours(),2)+s(r.getUTCMinutes(),2)+s(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in l=["<<"],r)d=r[i],l.push("/"+i+" "+t.convert(d));return l.push(">>"),l.join(`
`)}return""+r},t}();function t0(s,t,r,a,i){a=a||{};var l=1.15,d=i.internal.scaleFactor,u=i.internal.getFontSize()/d,h=i.getLineHeightFactor?i.getLineHeightFactor():l,p=u*h,v=/\r\n|\r|\n/g,y="",N=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(y=typeof s=="string"?s.split(v):s,N=y.length||1),r+=u*(2-l),a.valign==="middle"?r-=N/2*p:a.valign==="bottom"&&(r-=N*p),a.halign==="center"||a.halign==="right"){var g=u;if(a.halign==="center"&&(g*=.5),y&&N>=1){for(var C=0;C<y.length;C++)i.text(y[C],t-i.getStringUnitWidth(y[C])*g,r),r+=p;return i}t-=i.getStringUnitWidth(s)*g}return a.halign==="justify"?i.text(s,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):i.text(s,t,r),i}var Mf={},el=function(){function s(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:Mf=t},s.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},s.prototype.applyStyles=function(t,r){var a,i,l;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var d=this.jsPDFDocument.internal.getFont(),u=d.fontStyle,h=d.fontName;if(t.font&&(h=t.font),t.fontStyle){u=t.fontStyle;var p=this.getFontList()[h];p&&p.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(p[0]),u=p[0])}if(this.jsPDFDocument.setFont(h,u),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var v=s.unifyColor(t.fillColor);v&&(a=this.jsPDFDocument).setFillColor.apply(a,v),v=s.unifyColor(t.textColor),v&&(i=this.jsPDFDocument).setTextColor.apply(i,v),v=s.unifyColor(t.lineColor),v&&(l=this.jsPDFDocument).setDrawColor.apply(l,v),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},s.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},s.prototype.rect=function(t,r,a,i,l){return this.jsPDFDocument.rect(t,r,a,i,l)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return Mf||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s}(),ph=function(s,t){return ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},ph(s,t)};function s0(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ph(s,t);function r(){this.constructor=s}s.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var r0=function(s){s0(t,s);function t(r){var a=s.call(this)||this;return a._element=r,a}return t}(Array);function cw(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function dw(s){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[s]}function Fc(s,t,r){r.applyStyles(t,!0);var a=Array.isArray(s)?s:[s],i=a.map(function(l){return r.getTextWidth(l)}).reduce(function(l,d){return Math.max(l,d)},0);return i}function n0(s,t,r,a){var i=t.settings.tableLineWidth,l=t.settings.tableLineColor;s.applyStyles({lineWidth:i,lineColor:l});var d=a0(i,!1);d&&s.rect(r.x,r.y,t.getWidth(s.pageSize().width),a.y-r.y,d)}function a0(s,t){var r=s>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function sd(s,t){var r,a,i,l;if(s=s||t,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=t}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(r=s.left)!==null&&r!==void 0?r:t,top:(a=s.top)!==null&&a!==void 0?a:t,right:(i=s.right)!==null&&i!==void 0?i:t,bottom:(l=s.bottom)!==null&&l!==void 0?l:t}):(typeof s!="number"&&(s=t),{top:s,right:s,bottom:s,left:s})}function i0(s,t){var r=sd(t.settings.margin,0);return s.pageSize().width-(r.left+r.right)}function hw(s,t,r,a,i){var l={},d=1.3333333333333333,u=Dd(t,function(q){return i.getComputedStyle(q).backgroundColor});u!=null&&(l.fillColor=u);var h=Dd(t,function(q){return i.getComputedStyle(q).color});h!=null&&(l.textColor=h);var p=fw(a,r);p&&(l.cellPadding=p);var v="borderTopColor",y=d*r,N=a.borderTopWidth;if(a.borderBottomWidth===N&&a.borderRightWidth===N&&a.borderLeftWidth===N){var g=(parseFloat(N)||0)/y;g&&(l.lineWidth=g)}else l.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/y,right:(parseFloat(a.borderRightWidth)||0)/y,bottom:(parseFloat(a.borderBottomWidth)||0)/y,left:(parseFloat(a.borderLeftWidth)||0)/y},l.lineWidth.top||(l.lineWidth.right?v="borderRightColor":l.lineWidth.bottom?v="borderBottomColor":l.lineWidth.left&&(v="borderLeftColor"));var C=Dd(t,function(q){return i.getComputedStyle(q)[v]});C!=null&&(l.lineColor=C);var j=["left","right","center","justify"];j.indexOf(a.textAlign)!==-1&&(l.halign=a.textAlign),j=["middle","bottom","top"],j.indexOf(a.verticalAlign)!==-1&&(l.valign=a.verticalAlign);var T=parseInt(a.fontSize||"");isNaN(T)||(l.fontSize=T/d);var A=uw(a);A&&(l.fontStyle=A);var S=(a.fontFamily||"").toLowerCase();return s.indexOf(S)!==-1&&(l.font=S),l}function uw(s){var t="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(t="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(t+="italic"),t}function Dd(s,t){var r=o0(s,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var i=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],l=parseInt(a[4]);return l===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function o0(s,t){var r=t(s);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?s.parentElement==null?null:o0(s.parentElement,t):r}function fw(s,t){var r=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],a=96/(72/t),i=(parseInt(s.lineHeight)-parseInt(s.fontSize))/t/2,l=r.map(function(u){return parseInt(u||"0")/a}),d=sd(l,0);return i>d.top&&(d.top=i),i>d.bottom&&(d.bottom=i),d}function l0(s,t,r,a,i){var l,d;a===void 0&&(a=!1),i===void 0&&(i=!1);var u;typeof t=="string"?u=r.document.querySelector(t):u=t;var h=Object.keys(s.getFontList()),p=s.scaleFactor(),v=[],y=[],N=[];if(!u)return console.error("Html table could not be found with input: ",t),{head:v,body:y,foot:N};for(var g=0;g<u.rows.length;g++){var C=u.rows[g],j=(d=(l=C?.parentElement)===null||l===void 0?void 0:l.tagName)===null||d===void 0?void 0:d.toLowerCase(),T=mw(h,p,r,C,a,i);T&&(j==="thead"?v.push(T):j==="tfoot"?N.push(T):y.push(T))}return{head:v,body:y,foot:N}}function mw(s,t,r,a,i,l){for(var d=new r0(a),u=0;u<a.cells.length;u++){var h=a.cells[u],p=r.getComputedStyle(h);if(i||p.display!=="none"){var v=void 0;l&&(v=hw(s,h,t,p,r)),d.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:v,_element:h,content:pw(h)})}}var y=r.getComputedStyle(a);if(d.length>0&&(i||y.display!=="none"))return d}function pw(s){var t=s.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function gw(s,t,r){for(var a=0,i=[s,t,r];a<i.length;a++){var l=i[a];l&&typeof l!="object"&&console.error("The options parameter should be of type object, is: "+typeof l),l.startY&&typeof l.startY!="number"&&(console.error("Invalid value for startY option",l.startY),delete l.startY)}}function Ja(s,t,r,a,i){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(s),d=1;d<arguments.length;d++){var u=arguments[d];if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(l[h]=u[h])}return l}function c0(s,t){var r=new el(s),a=r.getDocumentOptions(),i=r.getGlobalOptions();gw(i,a,t);var l=Ja({},i,a,t),d;typeof window<"u"&&(d=window);var u=xw(i,a,t),h=vw(i,a,t),p=yw(r,l),v=ww(r,l,d);return{id:t.tableId,content:v,hooks:h,styles:u,settings:p}}function xw(s,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(h){if(h==="columnStyles"){var p=s[h],v=t[h],y=r[h];a.columnStyles=Ja({},p,v,y)}else{var N=[s,t,r],g=N.map(function(C){return C[h]||{}});a[h]=Ja({},g[0],g[1],g[2])}},l=0,d=Object.keys(a);l<d.length;l++){var u=d[l];i(u)}return a}function vw(s,t,r){for(var a=[s,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},l=0,d=a;l<d.length;l++){var u=d[l];u.didParseCell&&i.didParseCell.push(u.didParseCell),u.willDrawCell&&i.willDrawCell.push(u.willDrawCell),u.didDrawCell&&i.didDrawCell.push(u.didDrawCell),u.willDrawPage&&i.willDrawPage.push(u.willDrawPage),u.didDrawPage&&i.didDrawPage.push(u.didDrawPage)}return i}function yw(s,t){var r,a,i,l,d,u,h,p,v,y,N,g,C=sd(t.margin,40/s.scaleFactor()),j=(r=bw(s,t.startY))!==null&&r!==void 0?r:C.top,T;t.showFoot===!0?T="everyPage":t.showFoot===!1?T="never":T=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var A;t.showHead===!0?A="everyPage":t.showHead===!1?A="never":A=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var S=(l=t.useCss)!==null&&l!==void 0?l:!1,q=t.theme||(S?"plain":"striped"),V=!!t.horizontalPageBreak,Y=(d=t.horizontalPageBreakRepeat)!==null&&d!==void 0?d:null;return{includeHiddenHtml:(u=t.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:S,theme:q,startY:j,margin:C,pageBreak:(h=t.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(p=t.rowPageBreak)!==null&&p!==void 0?p:"auto",tableWidth:(v=t.tableWidth)!==null&&v!==void 0?v:"auto",showHead:A,showFoot:T,tableLineWidth:(y=t.tableLineWidth)!==null&&y!==void 0?y:0,tableLineColor:(N=t.tableLineColor)!==null&&N!==void 0?N:200,horizontalPageBreak:V,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function bw(s,t){var r=s.getLastAutoTable(),a=s.scaleFactor(),i=s.pageNumber(),l=!1;if(r&&r.startPageNumber){var d=r.startPageNumber+r.pageNumber-1;l=d===i}return typeof t=="number"?t:(t==null||t===!1)&&l&&r?.finalY!=null?r.finalY+20/a:null}function ww(s,t,r){var a=t.head||[],i=t.body||[],l=t.foot||[];if(t.html){var d=t.includeHiddenHtml;if(r){var u=l0(s,t.html,r,d,t.useCss)||{};a=u.head||a,i=u.body||a,l=u.foot||a}else console.error("Cannot parse html in non browser environment")}var h=t.columns||Nw(a,i,l);return{columns:h,head:a,body:i,foot:l}}function Nw(s,t,r){var a=s[0]||t[0]||r[0]||[],i=[];return Object.keys(a).filter(function(l){return l!=="_element"}).forEach(function(l){var d=1,u;Array.isArray(a)?u=a[parseInt(l)]:u=a[l],typeof u=="object"&&!Array.isArray(u)&&(d=u?.colSpan||1);for(var h=0;h<d;h++){var p=void 0;Array.isArray(a)?p=i.length:p=l+(h>0?"_".concat(h):"");var v={dataKey:p};i.push(v)}}),i}var gh=function(){function s(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return s}(),jw=function(s){s0(t,s);function t(r,a,i,l,d,u){var h=s.call(this,r,a,u)||this;return h.cell=i,h.row=l,h.column=d,h.section=l.section,h}return t}(gh),_w=function(){function s(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return s.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(t,r,a,i,l,d){for(var u=0,h=r;u<h.length;u++){var p=h[u],v=new jw(t,this,a,i,l,d),y=p(v)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],y)return!1}return!0},s.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,i=this.hooks.didDrawPage;a<i.length;a++){var l=i[a];l(new gh(t,this,r))}},s.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,i=this.hooks.willDrawPage;a<i.length;a++){var l=i[a];l(new gh(t,this,r))}},s.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,l){return i+l.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},s}(),d0=function(){function s(t,r,a,i,l){l===void 0&&(l=!1),this.height=0,this.raw=t,t instanceof r0&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=i,this.spansMultiplePages=l}return s.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,i){var l;return Math.max(a,((l=r.cells[i.index])===null||l===void 0?void 0:l.height)||0)},0)},s.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var i=r.cells[a.index];return i?i.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},s.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(i,l){var d=a.cells[l.index];if(!d)return 0;var u=r.getLineHeight(d.styles.fontSize),h=d.padding("vertical"),p=h+u;return p>i?p:i},0)},s}(),h0=function(){function s(t,r,a){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var l=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,l=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var d=l!=null?""+l:"",u=/\r\n|\r|\n/g;this.text=d.split(u)}return s.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");a=this.x+i/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},s.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,l=a*i+this.padding("vertical");return Math.max(l,this.styles.minCellHeight)},s.prototype.padding=function(t){var r=sd(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},s}(),Sw=function(){function s(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return s.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,i=t.allRows();a<i.length;a++){var l=i[a],d=l.cells[this.index];d&&typeof d.styles.cellWidth=="number"&&(r=Math.max(r,d.styles.cellWidth))}return r},s}();function kw(s,t){Pw(s,t);var r=[],a=0;t.columns.forEach(function(l){var d=l.getMaxCustomCellWidth(t);d?l.width=d:(l.width=l.wrappedWidth,r.push(l)),a+=l.width});var i=t.getWidth(s.pageSize().width)-a;i&&(i=xh(r,i,function(l){return Math.max(l.minReadableWidth,l.minWidth)})),i&&(i=xh(r,i,function(l){return l.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/s.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Lw(t),Aw(t,s),Cw(t)}function Pw(s,t){var r=s.scaleFactor(),a=t.settings.horizontalPageBreak,i=i0(s,t);t.allRows().forEach(function(l){for(var d=0,u=t.columns;d<u.length;d++){var h=u[d],p=l.cells[h.index];if(p){var v=t.hooks.didParseCell;t.callCellHooks(s,v,p,l,h,null);var y=p.padding("horizontal");p.contentWidth=Fc(p.text,p.styles,s)+y;var N=Fc(p.text.join(" ").split(/[^\S\u00A0]+/),p.styles,s);if(p.minReadableWidth=N+p.padding("horizontal"),typeof p.styles.cellWidth=="number")p.minWidth=p.styles.cellWidth,p.wrappedWidth=p.styles.cellWidth;else if(p.styles.cellWidth==="wrap"||a===!0)p.contentWidth>i?(p.minWidth=i,p.wrappedWidth=i):(p.minWidth=p.contentWidth,p.wrappedWidth=p.contentWidth);else{var g=10/r;p.minWidth=p.styles.minCellWidth||g,p.wrappedWidth=p.contentWidth,p.minWidth>p.wrappedWidth&&(p.wrappedWidth=p.minWidth)}}}}),t.allRows().forEach(function(l){for(var d=0,u=t.columns;d<u.length;d++){var h=u[d],p=l.cells[h.index];if(p&&p.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,p.wrappedWidth),h.minWidth=Math.max(h.minWidth,p.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,p.minReadableWidth);else{var v=t.styles.columnStyles[h.dataKey]||t.styles.columnStyles[h.index]||{},y=v.cellWidth||v.minCellWidth;y&&typeof y=="number"&&(h.minWidth=y,h.wrappedWidth=y)}p&&(p.colSpan>1&&!h.minWidth&&(h.minWidth=p.minWidth),p.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=p.minWidth))}})}function xh(s,t,r){for(var a=t,i=s.reduce(function(g,C){return g+C.wrappedWidth},0),l=0;l<s.length;l++){var d=s[l],u=d.wrappedWidth/i,h=a*u,p=d.width+h,v=r(d),y=p<v?v:p;t-=y-d.width,d.width=y}if(t=Math.round(t*1e10)/1e10,t){var N=s.filter(function(g){return t<0?g.width>r(g):!0});N.length&&(t=xh(N,t,r))}return t}function Cw(s){for(var t={},r=1,a=s.allRows(),i=0;i<a.length;i++)for(var l=a[i],d=0,u=s.columns;d<u.length;d++){var h=u[d],p=t[h.index];if(r>1)r--,delete l.cells[h.index];else if(p)p.cell.height+=l.height,r=p.cell.colSpan,delete l.cells[h.index],p.left--,p.left<=1&&delete t[h.index];else{var v=l.cells[h.index];if(!v)continue;if(v.height=l.height,v.rowSpan>1){var y=a.length-i,N=v.rowSpan>y?y:v.rowSpan;t[h.index]={cell:v,left:N,row:l}}}}}function Lw(s){for(var t=s.allRows(),r=0;r<t.length;r++)for(var a=t[r],i=null,l=0,d=0,u=0;u<s.columns.length;u++){var h=s.columns[u];if(d-=1,d>1&&s.columns[u+1])l+=h.width,delete a.cells[h.index];else if(i){var p=i;delete a.cells[h.index],i=null,p.width=h.width+l}else{var p=a.cells[h.index];if(!p)continue;if(d=p.colSpan,l=0,p.colSpan>1){i=p,l+=h.width;continue}p.width=h.width+l}}}function Aw(s,t){for(var r={count:0,height:0},a=0,i=s.allRows();a<i.length;a++){for(var l=i[a],d=0,u=s.columns;d<u.length;d++){var h=u[d],p=l.cells[h.index];if(p){t.applyStyles(p.styles,!0);var v=p.width-p.padding("horizontal");if(p.styles.overflow==="linebreak")p.text=t.splitTextToSize(p.text,v+1/t.scaleFactor(),{fontSize:p.styles.fontSize});else if(p.styles.overflow==="ellipsize")p.text=If(p.text,v,p.styles,t,"...");else if(p.styles.overflow==="hidden")p.text=If(p.text,v,p.styles,t,"");else if(typeof p.styles.overflow=="function"){var y=p.styles.overflow(p.text,v);typeof y=="string"?p.text=[y]:p.text=y}p.contentHeight=p.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var N=p.contentHeight/p.rowSpan;p.rowSpan>1&&r.count*r.height<N*p.rowSpan?r={height:N,count:p.rowSpan}:r&&r.count>0&&r.height>N&&(N=r.height),N>l.height&&(l.height=N)}}r.count--}}function If(s,t,r,a,i){return s.map(function(l){return Tw(l,t,r,a,i)})}function Tw(s,t,r,a,i){var l=1e4*a.scaleFactor();if(t=Math.ceil(t*l)/l,t>=Fc(s,r,a))return s;for(;t<Fc(s+i,r,a)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+i}function u0(s,t){var r=new el(s),a=Ew(t,r.scaleFactor()),i=new _w(t,a);return kw(r,i),r.applyStyles(r.userStyles),i}function Ew(s,t){var r=s.content,a=Iw(r.columns);if(r.head.length===0){var i=Rf(a,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=Rf(a,"foot");i&&r.foot.push(i)}var l=s.settings.theme,d=s.styles;return{columns:a,head:Fd("head",r.head,a,d,l,t),body:Fd("body",r.body,a,d,l,t),foot:Fd("foot",r.foot,a,d,l,t)}}function Fd(s,t,r,a,i,l){var d={},u=t.map(function(h,p){for(var v=0,y={},N=0,g=0,C=0,j=r;C<j.length;C++){var T=j[C];if(d[T.index]==null||d[T.index].left===0)if(g===0){var A=void 0;Array.isArray(h)?A=h[T.index-N-v]:A=h[T.dataKey];var S={};typeof A=="object"&&!Array.isArray(A)&&(S=A?.styles||{});var q=Rw(s,T,p,i,a,l,S),V=new h0(A,q,s);y[T.dataKey]=V,y[T.index]=V,g=V.colSpan-1,d[T.index]={left:V.rowSpan-1,times:g}}else g--,N++;else d[T.index].left--,g=d[T.index].times,v++}return new d0(h,p,s,y)});return u}function Rf(s,t){var r={};return s.forEach(function(a){if(a.raw!=null){var i=Mw(t,a.raw);i!=null&&(r[a.dataKey]=i)}}),Object.keys(r).length>0?r:null}function Mw(s,t){if(s==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(s==="foot"&&typeof t=="object")return t.footer;return null}function Iw(s){return s.map(function(t,r){var a,i;return typeof t=="object"?i=(a=t.dataKey)!==null&&a!==void 0?a:r:i=r,new Sw(i,t,r)})}function Rw(s,t,r,a,i,l,d){var u=dw(a),h;s==="head"?h=i.headStyles:s==="body"?h=i.bodyStyles:s==="foot"&&(h=i.footStyles);var p=Ja({},u.table,u[s],i.styles,h),v=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},y=s==="body"?v:{},N=s==="body"&&r%2===0?Ja({},u.alternateRow,i.alternateRowStyles):{},g=cw(l),C=Ja({},g,p,N,y);return Ja(C,d)}function Ow(s,t,r){var a;r===void 0&&(r={});var i=i0(s,t),l=new Map,d=[],u=[],h=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?h=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(h=[t.settings.horizontalPageBreakRepeat]),h.forEach(function(N){var g=t.columns.find(function(C){return C.dataKey===N||C.index===N});g&&!l.has(g.index)&&(l.set(g.index,!0),d.push(g.index),u.push(t.columns[g.index]),i-=g.wrappedWidth)});for(var p=!0,v=(a=r?.start)!==null&&a!==void 0?a:0;v<t.columns.length;){if(l.has(v)){v++;continue}var y=t.columns[v].wrappedWidth;if(p||i>=y)p=!1,d.push(v),u.push(t.columns[v]),i-=y;else break;v++}return{colIndexes:d,columns:u,lastIndex:v-1}}function Dw(s,t){for(var r=[],a=0;a<t.columns.length;a++){var i=Ow(s,t,{start:a});i.columns.length&&(r.push(i),a=i.lastIndex)}return r}function f0(s,t){var r=t.settings,a=r.startY,i=r.margin,l={x:i.left,y:a},d=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),u=a+i.bottom+d;if(r.pageBreak==="avoid"){var h=t.body,p=h.reduce(function(N,g){return N+g.height},0);u+=p}var v=new el(s);(r.pageBreak==="always"||r.startY!=null&&u>v.pageSize().height)&&(p0(v),l.y=i.top),t.callWillDrawPageHooks(v,l);var y=Ja({},l);t.startPageNumber=v.pageNumber(),r.horizontalPageBreak?Fw(v,t,y,l):(v.applyStyles(v.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(N){return Qa(v,t,N,l,t.columns)}),v.applyStyles(v.userStyles),t.body.forEach(function(N,g){var C=g===t.body.length-1;zc(v,t,N,C,y,l,t.columns)}),v.applyStyles(v.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(N){return Qa(v,t,N,l,t.columns)})),n0(v,t,y,l),t.callEndPageHooks(v,l),t.finalY=l.y,s.lastAutoTable=t,v.applyStyles(v.userStyles)}function Fw(s,t,r,a){var i=Dw(s,t),l=t.settings;if(l.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(p,v){s.applyStyles(s.userStyles),v>0?Rl(s,t,r,a,p.columns,!0):Of(s,t,a,p.columns),zw(s,t,r,a,p.columns),zd(s,t,a,p.columns)});else for(var d=-1,u=i[0],h=function(){var p=d;if(u){s.applyStyles(s.userStyles);var v=u.columns;d>=0?Rl(s,t,r,a,v,!0):Of(s,t,a,v),p=Df(s,t,d+1,a,v),zd(s,t,a,v)}var y=p-d;i.slice(1).forEach(function(N){s.applyStyles(s.userStyles),Rl(s,t,r,a,N.columns,!0),Df(s,t,d+1,a,N.columns,y),zd(s,t,a,N.columns)}),d=p};d<t.body.length-1;)h()}function Of(s,t,r,a){var i=t.settings;s.applyStyles(s.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(l){return Qa(s,t,l,r,a)})}function zw(s,t,r,a,i){s.applyStyles(s.userStyles),t.body.forEach(function(l,d){var u=d===t.body.length-1;zc(s,t,l,u,r,a,i)})}function Df(s,t,r,a,i,l){s.applyStyles(s.userStyles),l=l??t.body.length;var d=Math.min(r+l,t.body.length),u=-1;return t.body.slice(r,d).forEach(function(h,p){var v=r+p===t.body.length-1,y=m0(s,t,v,a);h.canEntireRowFit(y,i)&&(Qa(s,t,h,a,i),u=r+p)}),u}function zd(s,t,r,a){var i=t.settings;s.applyStyles(s.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(l){return Qa(s,t,l,r,a)})}function Bw(s,t,r){var a=r.getLineHeight(s.styles.fontSize),i=s.padding("vertical"),l=Math.floor((t-i)/a);return Math.max(0,l)}function qw(s,t,r,a){var i={};s.spansMultiplePages=!0,s.height=0;for(var l=0,d=0,u=r.columns;d<u.length;d++){var h=u[d],p=s.cells[h.index];if(p){Array.isArray(p.text)||(p.text=[p.text]);var v=new h0(p.raw,p.styles,p.section);v=Ja(v,p),v.text=[];var y=Bw(p,t,a);p.text.length>y&&(v.text=p.text.splice(y,p.text.length));var N=a.scaleFactor(),g=a.getLineHeightFactor();p.contentHeight=p.getContentHeight(N,g),p.contentHeight>=t&&(p.contentHeight=t,v.styles.minCellHeight-=t),p.contentHeight>s.height&&(s.height=p.contentHeight),v.contentHeight=v.getContentHeight(N,g),v.contentHeight>l&&(l=v.contentHeight),i[h.index]=v}}var C=new d0(s.raw,-1,s.section,i,!0);C.height=l;for(var j=0,T=r.columns;j<T.length;j++){var h=T[j],v=C.cells[h.index];v&&(v.height=C.height);var p=s.cells[h.index];p&&(p.height=s.height)}return C}function Hw(s,t,r,a){var i=s.pageSize().height,l=a.settings.margin,d=l.top+l.bottom,u=i-d;t.section==="body"&&(u-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var h=t.getMinimumRowHeight(a.columns,s),p=h<r;if(h>u)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!p)return!1;var v=t.hasRowSpan(a.columns),y=t.getMaxCellHeight(a.columns)>u;return y?(v&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(v||a.settings.rowPageBreak==="avoid")}function zc(s,t,r,a,i,l,d){var u=m0(s,t,a,l);if(r.canEntireRowFit(u,d))Qa(s,t,r,l,d);else if(Hw(s,r,u,t)){var h=qw(r,u,t,s);Qa(s,t,r,l,d),Rl(s,t,i,l,d),zc(s,t,h,a,i,l,d)}else Rl(s,t,i,l,d),zc(s,t,r,a,i,l,d)}function Qa(s,t,r,a,i){a.x=t.settings.margin.left;for(var l=0,d=i;l<d.length;l++){var u=d[l],h=r.cells[u.index];if(!h){a.x+=u.width;continue}s.applyStyles(h.styles),h.x=a.x,h.y=a.y;var p=t.callCellHooks(s,t.hooks.willDrawCell,h,r,u,a);if(p===!1){a.x+=u.width;continue}$w(s,h,a);var v=h.getTextPos();t0(h.text,v.x,v.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},s.getDocument()),t.callCellHooks(s,t.hooks.didDrawCell,h,r,u,a),a.x+=u.width}a.y+=r.height}function $w(s,t,r){var a=t.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof a.lineWidth=="number"){var i=a0(a.lineWidth,a.fillColor);i&&s.rect(t.x,r.y,t.width,t.height,i)}else typeof a.lineWidth=="object"&&(a.fillColor&&s.rect(t.x,r.y,t.width,t.height,"F"),Uw(s,t,r,a.lineWidth))}function Uw(s,t,r,a){var i,l,d,u;a.top&&(i=r.x,l=r.y,d=r.x+t.width,u=r.y,a.right&&(d+=.5*a.right),a.left&&(i-=.5*a.left),h(a.top,i,l,d,u)),a.bottom&&(i=r.x,l=r.y+t.height,d=r.x+t.width,u=r.y+t.height,a.right&&(d+=.5*a.right),a.left&&(i-=.5*a.left),h(a.bottom,i,l,d,u)),a.left&&(i=r.x,l=r.y,d=r.x,u=r.y+t.height,a.top&&(l-=.5*a.top),a.bottom&&(u+=.5*a.bottom),h(a.left,i,l,d,u)),a.right&&(i=r.x+t.width,l=r.y,d=r.x+t.width,u=r.y+t.height,a.top&&(l-=.5*a.top),a.bottom&&(u+=.5*a.bottom),h(a.right,i,l,d,u));function h(p,v,y,N,g){s.getDocument().setLineWidth(p),s.getDocument().line(v,y,N,g,"S")}}function m0(s,t,r,a){var i=t.settings.margin.bottom,l=t.settings.showFoot;return(l==="everyPage"||l==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),s.pageSize().height-a.y-i}function Rl(s,t,r,a,i,l){i===void 0&&(i=[]),l===void 0&&(l=!1),s.applyStyles(s.userStyles),t.settings.showFoot==="everyPage"&&!l&&t.foot.forEach(function(u){return Qa(s,t,u,a,i)}),t.callEndPageHooks(s,a);var d=t.settings.margin;n0(s,t,r,a),p0(s),t.pageNumber++,a.x=d.left,a.y=d.top,r.y=d.top,t.callWillDrawPageHooks(s,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(u){return Qa(s,t,u,a,i)}),s.applyStyles(s.userStyles))}function p0(s){var t=s.pageNumber();s.setPage(t+1);var r=s.pageNumber();return r===t?(s.addPage(),!0):!1}function Ww(s){s.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],i=c0(this,a),l=u0(this,i);return f0(this,l),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(t,r,a,i){t0(t,r,a,i,this)},s.API.autoTableSetDefaults=function(t){return el.setDefaults(t,this),this},s.autoTableSetDefaults=function(t,r){el.setDefaults(t,r)},s.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new el(this),l=l0(i,t,window,r,!1),d=l.head,u=l.body,h=((a=d[0])===null||a===void 0?void 0:a.map(function(p){return p.content}))||[];return{columns:h,rows:u,data:u}}}var Bd;function Vw(s,t){var r=c0(s,t),a=u0(s,r);f0(s,a)}try{if(typeof window<"u"&&window){var Ff=window,zf=Ff.jsPDF||((Bd=Ff.jspdf)===null||Bd===void 0?void 0:Bd.jsPDF);zf&&Ww(zf)}}catch(s){console.error("Could not apply autoTable plugin",s)}function Zw({userLocation:s}){const t=a5();return P.useEffect(()=>{t&&s&&(console.log("🗺️ Centralizando mapa em:",s),t.setView(s,15))},[t,s]),null}function Bf(){const[s,t]=P.useState(null),[r,a]=P.useState(!0),[i,l]=P.useState(5),[d,u]=P.useState(!1),[h,p]=P.useState(null),[v,y]=P.useState(!1),[N,g]=P.useState(!1),[C,j]=P.useState(!1),[T,A]=P.useState(!1),[S,q]=P.useState(null),[V,Y]=P.useState(!1),{theme:ue,setTheme:le}=Tm(),{logout:ee,user:te}=lr(),{toast:we}=Rs(),[R,z]=P.useState(0),[H,B]=P.useState(!1),[pe,he]=P.useState(null),[be,ne]=P.useState([]),[xe,ae]=P.useState(0),[fe,E]=P.useState(0),[W,Z]=P.useState(0),[X,re]=P.useState(0),[de,Ne]=P.useState([]),[J,oe]=P.useState(()=>{const _e=localStorage.getItem("lb_monthly_goal_mode");return _e==="revenue"||_e==="services"?_e:"services"}),[ie,Te]=P.useState(()=>{const _e=localStorage.getItem("lb_monthly_goal_services"),Oe=_e?parseInt(_e):20;return Number.isFinite(Oe)&&Oe>0?Oe:20}),[Q,Ae]=P.useState(()=>{const _e=localStorage.getItem("lb_monthly_goal_revenue"),Oe=_e?parseFloat(_e):5e3;return Number.isFinite(Oe)&&Oe>0?Oe:5e3}),[ge,G]=P.useState(()=>localStorage.getItem("lb_report_taxpayer_id")||""),[We,et]=P.useState(()=>{const _e=localStorage.getItem("lb_report_start");if(_e)return _e;const Oe=new Date;return new Date(Oe.getFullYear(),Oe.getMonth(),1).toISOString().slice(0,10)}),[Fe,Ve]=P.useState(()=>{const _e=localStorage.getItem("lb_report_end");if(_e)return _e;const Oe=new Date;return new Date(Oe.getFullYear(),Oe.getMonth()+1,0).toISOString().slice(0,10)}),Je=()=>{try{const _e=new Nt({unit:"pt",format:"a4"}),Oe=48;let Ue=56;_e.setTextColor(33,33,33),_e.setFont(void 0,"bold"),_e.setFontSize(16),_e.text("Relatório de Ganhos",Oe,Ue),Ue+=14,_e.setFont(void 0,"normal"),_e.setFontSize(10),_e.setTextColor(90,90,90),_e.text(`Período: ${new Date(We).toLocaleDateString("pt-BR")} a ${new Date(Fe).toLocaleDateString("pt-BR")}`,Oe,Ue),Ue+=14,_e.setDrawColor(180,180,180),_e.line(Oe,Ue,595-Oe,Ue),Ue+=16,_e.setFontSize(11),_e.setTextColor(33,33,33),_e.text(`Profissional: ${te?.name||"Profissional"}`,Oe,Ue),Ue+=14,ge&&(_e.text(`CPF/CNPJ: ${ge}`,Oe,Ue),Ue+=14),_e.text(`Meta de receita: R$ ${Q.toLocaleString("pt-BR")}`,Oe,Ue),Ue+=14;const nt=new Date(We),bt=new Date(Fe),Ht=de.filter(_t=>{const dt=_t.completedAt?new Date(_t.completedAt):null;return dt&&dt>=nt&&dt<=bt}).sort((_t,dt)=>{const cs=_t.completedAt?new Date(_t.completedAt):new Date(0),ms=dt.completedAt?new Date(dt.completedAt):new Date(0);return cs.getTime()-ms.getTime()}),mt=Ht.length,jt=Ht.reduce((_t,dt)=>_t+(Number(dt.amount)||0),0);_e.text(`Serviços concluídos no período: ${mt}`,Oe,Ue),Ue+=14,_e.text(`Receita no período: R$ ${jt.toLocaleString("pt-BR")}`,Oe,Ue),Ue+=10;const At=Ht.map(_t=>{const dt=_t.completedAt?new Date(_t.completedAt).toLocaleDateString("pt-BR"):"Data não informada",cs=_t.serviceTitle||"Serviço",ms=Number(_t.amount)||0;return[dt,cs,`R$ ${ms.toLocaleString("pt-BR")}`]});Vw(_e,{head:[["Data","Serviço (apenas nome)","Valor (R$)"]],body:At,startY:Ue+10,styles:{fontSize:10,textColor:[33,33,33],lineColor:[200,200,200],lineWidth:.5},headStyles:{fillColor:[240,240,240],textColor:[33,33,33],lineColor:[200,200,200]},columnStyles:{2:{halign:"right"}},margin:{left:Oe,right:Oe}});const $t=_e.lastAutoTable?_e.lastAutoTable.finalY+24:Ue+60;_e.setFontSize(9),_e.setTextColor(120,120,120),_e.text("Documento gerado automaticamente pelo LifeBee.",Oe,$t);const Ot=`${new Date(We).toLocaleDateString("pt-BR")}__${new Date(Fe).toLocaleDateString("pt-BR")}`.replace(/[\\/]/g,"-");_e.save(`Relatorio-Ganhos-${Ot}.pdf`)}catch{alert("Não foi possível gerar o relatório agora. Tente novamente.")}};P.useEffect(()=>{z(_e=>_e+1)},[ue]),P.useEffect(()=>{try{localStorage.setItem("lb_monthly_goal_mode",J),localStorage.setItem("lb_monthly_goal_services",String(ie)),localStorage.setItem("lb_monthly_goal_revenue",String(Q))}catch{}},[J,ie,Q]),P.useEffect(()=>{try{localStorage.setItem("lb_report_taxpayer_id",ge),We&&localStorage.setItem("lb_report_start",We),Fe&&localStorage.setItem("lb_report_end",Fe)}catch{}},[ge,We,Fe]),P.useEffect(()=>{(async()=>{try{const Oe=localStorage.getItem("token"),Ue=await fetch(`${ht()}/api/appointments/provider`,{headers:{Authorization:`Bearer ${Oe}`,Accept:"application/json"}});if(!Ue.ok)return;const nt=await Ue.json();ne(Array.isArray(nt)?nt:[]);const bt=new Date,Ht=new Date(bt.getFullYear(),bt.getMonth(),1),mt=new Date(bt.getFullYear(),bt.getMonth()+1,0,23,59,59,999),jt=(Array.isArray(nt)?nt:[]).filter(Ot=>{const _t=Ot.scheduledFor?new Date(Ot.scheduledFor):Ot.createdAt?new Date(Ot.createdAt):null,dt=(Ot.status||"").toString();return _t&&_t>=Ht&&_t<=mt&&dt==="completed"}),At=jt.length,$t=jt.reduce((Ot,_t)=>{const dt=typeof _t.totalCost=="string"?parseFloat(_t.totalCost):Number(_t.totalCost||0);return Ot+(Number.isFinite(dt)?dt:0)},0);ae(At),E($t)}catch{}})()},[]),P.useEffect(()=>{A(!1)},[te?.profileImage]),P.useEffect(()=>{const _e="geolocation"in navigator,Oe=window.location.protocol==="https:"||window.location.hostname==="localhost";j(_e),console.log("📍 Geolocalização suportada:",_e),console.log("📍 Contexto seguro (HTTPS/localhost):",Oe),console.log("📍 Protocolo atual:",window.location.protocol),console.log("📍 Hostname atual:",window.location.hostname)},[]),P.useEffect(()=>{console.log("📍 Localização do usuário atualizada:",h)},[h]),P.useEffect(()=>{C&&!h&&!v&&(console.log("📍 Ativando geolocalização automática..."),wr())},[C,h,v]);const[Ze,ot]=P.useState([]),[wt,Pt]=P.useState(!1),[Tt,zt]=P.useState(0),[ns,ft]=P.useState(""),[Ct,Ge]=P.useState({}),[rr,Zt]=P.useState(null),[xr,is]=P.useState([]),[os,vr]=P.useState(null),Kt=[],Yn=0,_s=_e=>{t(_e),window.location.href=`/service-offer/${_e}`},Dr=_e=>{q(_e),Y(!0)},dn=()=>{Y(!1),q(null)},As=()=>{q(null)},Lt=()=>{ee(),window.location.href="/"},ts=async _e=>{try{const Oe=localStorage.getItem("token");if(!Oe){we({title:"Erro",description:"Token de autenticação não encontrado.",variant:"destructive"});return}(await fetch(`${ht()}/api/provider/availability`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify({available:_e})})).ok?(a(_e),we({title:_e?"Disponível":"Indisponível",description:_e?"Você está agora disponível para receber solicitações de serviço.":"Você está agora indisponível. Os clientes não verão seu perfil."})):we({title:"Erro",description:"Não foi possível atualizar sua disponibilidade.",variant:"destructive"})}catch(Oe){console.error("Error updating availability:",Oe),we({title:"Erro",description:"Erro ao conectar com o servidor.",variant:"destructive"})}},Kn=_e=>{console.log(`Marking notification ${_e} as read`)},Os=(_e,Oe,Ue,nt)=>{const Ht=(Ue-_e)*Math.PI/180,mt=(nt-Oe)*Math.PI/180,jt=Math.sin(Ht/2)*Math.sin(Ht/2)+Math.cos(_e*Math.PI/180)*Math.cos(Ue*Math.PI/180)*Math.sin(mt/2)*Math.sin(mt/2);return 6371*(2*Math.atan2(Math.sqrt(jt),Math.sqrt(1-jt)))},Fr={"rua das flores, 150, vila madalena, são paulo, sp":[-23.55,-46.68],"av. albert einstein, 627, morumbi, são paulo, sp":[-23.62,-46.72],"rua harmonia, 456, vila madalena, são paulo, sp":[-23.55,-46.68],"rua dos pinheiros, 789, pinheiros, são paulo, sp":[-23.5671,-46.7034],"rua dona adma jafet, 91, bela vista, são paulo, sp":[-23.56,-46.65],"av. paulista, 1000, bela vista, são paulo, sp":[-23.56,-46.66],"av. paulista, são paulo, sp":[-23.56,-46.66],"rua augusta, jardins, são paulo, sp":[-23.56,-46.66],"rua harmonia, vila madalena, são paulo, sp":[-23.55,-46.68],"rua das flores, vila madalena, são paulo, sp":[-23.55,-46.68],"rua dos pinheiros, pinheiros, são paulo, sp":[-23.5671,-46.7034],"rua dona adma jafet, bela vista, são paulo, sp":[-23.56,-46.65],"av. brigadeiro faria lima, são paulo, sp":[-23.59,-46.68],"shopping morumbi, são paulo, sp":[-23.62,-46.72],"hospital albert einstein, são paulo, sp":[-23.62,-46.72],"hospital sírio-libanês, são paulo, sp":[-23.56,-46.65],"vila madalena, são paulo, sp":[-23.55,-46.68],"jardins, são paulo, sp":[-23.56,-46.66],"morumbi, são paulo, sp":[-23.62,-46.72],"itaim bibi, são paulo, sp":[-23.6,-46.68],"moema, são paulo, sp":[-23.6,-46.66],"pinheiros, são paulo, sp":[-23.5671,-46.7034],"vila mariana, são paulo, sp":[-23.59,-46.63],"centro, são paulo, sp":[-23.5505,-46.6333],"sé, são paulo, sp":[-23.5505,-46.6333],"republica, são paulo, sp":[-23.54,-46.64],"bela vista, são paulo, sp":[-23.56,-46.65],"consolação, são paulo, sp":[-23.56,-46.66],"liberdade, são paulo, sp":[-23.56,-46.64],"bom retiro, são paulo, sp":[-23.53,-46.64],"brás, são paulo, sp":[-23.54,-46.62],"cambuci, são paulo, sp":[-23.57,-46.62],"tatuapé, são paulo, sp":[-23.54,-46.57],"vila prudente, são paulo, sp":[-23.58,-46.58],"mooca, são paulo, sp":[-23.55,-46.6],"belenzinho, são paulo, sp":[-23.54,-46.62],"penha, são paulo, sp":[-23.52,-46.54],"santana, são paulo, sp":[-23.5,-46.64],"tucuruvi, são paulo, sp":[-23.48,-46.62],"casa verde, são paulo, sp":[-23.51,-46.66],"vila guilherme, são paulo, sp":[-23.52,-46.61],"lapa, são paulo, sp":[-23.52,-46.7],"perdizes, são paulo, sp":[-23.53,-46.68],"vila pompeia, são paulo, sp":[-23.54,-46.68],"butantã, são paulo, sp":[-23.57,-46.72],"jabaquara, são paulo, sp":[-23.65,-46.64],"santo amaro, são paulo, sp":[-23.65,-46.72],"campo belo, são paulo, sp":[-23.61,-46.68],"vila olímpia, são paulo, sp":[-23.6,-46.69],"brooklin, são paulo, sp":[-23.61,-46.7],"vila andrade, são paulo, sp":[-23.63,-46.72],"jardim paulista, são paulo, sp":[-23.57,-46.67],"jardim europa, são paulo, sp":[-23.57,-46.68],"jardim paulistano, são paulo, sp":[-23.58,-46.68],"alto de pinheiros, são paulo, sp":[-23.57,-46.71],"vila leopoldina, são paulo, sp":[-23.53,-46.73],"barra funda, são paulo, sp":[-23.52,-46.66],"campos elíseos, são paulo, sp":[-23.54,-46.65],"santa cecília, são paulo, sp":[-23.54,-46.66],"vila buarque, são paulo, sp":[-23.54,-46.65],"higienópolis, são paulo, sp":[-23.55,-46.66],"pacifica, são paulo, sp":[-23.55,-46.67],"vila romana, são paulo, sp":[-23.54,-46.69],"sumaré, são paulo, sp":[-23.55,-46.67],"agua branca, são paulo, sp":[-23.52,-46.68],"vila nova cachoeirinha, são paulo, sp":[-23.49,-46.67],"limão, são paulo, sp":[-23.5,-46.65],"brasilândia, são paulo, sp":[-23.47,-46.64],"freguesia do ó, são paulo, sp":[-23.52,-46.7],"rua leão xiii, 431, serrinha, fortaleza, ce":[-3.7319,-38.5267],"rua leão xiii, serrinha, fortaleza, ce":[-3.7319,-38.5267],"leão xiii, serrinha, fortaleza, ce":[-3.7319,-38.5267],"serrinha, fortaleza, ce":[-3.7319,-38.5267],"avenida beira mar, fortaleza, ce":[-3.7319,-38.5267],"praça do ferreira, fortaleza, ce":[-3.7319,-38.5267],"centro, fortaleza, ce":[-3.7319,-38.5267],"aldeota, fortaleza, ce":[-3.7319,-38.5267],"meireles, fortaleza, ce":[-3.7319,-38.5267],"dionísio torres, fortaleza, ce":[-3.7319,-38.5267],"papicu, fortaleza, ce":[-3.7319,-38.5267],"cocó, fortaleza, ce":[-3.7319,-38.5267],"varjota, fortaleza, ce":[-3.7319,-38.5267],"montese, fortaleza, ce":[-3.7319,-38.5267],"fátima, fortaleza, ce":[-3.7319,-38.5267],"joaquim távora, fortaleza, ce":[-3.7319,-38.5267],"benfica, fortaleza, ce":[-3.7319,-38.5267],"damas, fortaleza, ce":[-3.7319,-38.5267],"são gerardo, fortaleza, ce":[-3.7319,-38.5267],"parangaba, fortaleza, ce":[-3.7319,-38.5267],"messejana, fortaleza, ce":[-3.7319,-38.5267],"conjunto ceará, fortaleza, ce":[-3.7319,-38.5267],"sabiguaba, fortaleza, ce":[-3.7319,-38.5267],"copacabana, rio de janeiro, rj":[-22.9707,-43.1824],"ipanema, rio de janeiro, rj":[-22.9844,-43.2034],"centro, belo horizonte, mg":[-19.9167,-43.9345],"centro, salvador, ba":[-12.9714,-38.5011],"centro, recife, pe":[-8.0476,-34.877],"centro, brasília, df":[-15.7942,-47.8822],"centro, curitiba, pr":[-25.4289,-49.2671],"centro, porto alegre, rs":[-30.0346,-51.2177],"centro, belém, pa":[-1.4554,-48.4898],"centro, manaus, am":[-3.119,-60.0217]},qs=new Map,vt=_e=>{let Oe=String(_e||"").trim();return Oe=Oe.replace(/\s-\s/g,", "),Oe=Oe.replace(/\s*,\s*/g,", ").replace(/\s+/g," ").replace(/,+/g,","),Oe=Oe.replace(/\bcep:?\s*\d{5}-?\d{3}\b/gi,"").replace(/\bbrasil\b/gi,""),Oe=Oe.replace(/,\s*$/g,""),Oe},Yr=_e=>{const Oe={},Ue=_e.match(/\b([A-Za-zÀ-ÿ\s]+),\s*([A-Za-z]{2})\b/);if(Ue)return Oe.city=Ue[1].trim(),Oe.state=Ue[2].trim().toUpperCase(),Oe;const nt=_e.match(/\b([A-Za-zÀ-ÿ\s]+)\s*-\s*([A-Za-z]{2})\b/);return nt&&(Oe.city=nt[1].trim(),Oe.state=nt[2].trim().toUpperCase()),Oe},hn=_e=>{const Oe="https://nominatim.openstreetmap.org/search?format=json&limit=5&countrycodes=br&addressdetails=1&accept-language=pt-BR";if(h){const[Ue,nt]=h,bt=.3,Ht=(nt-bt).toFixed(6),mt=(nt+bt).toFixed(6),jt=(Ue+bt).toFixed(6),At=(Ue-bt).toFixed(6);return`${Oe}&q=${encodeURIComponent(_e)}&viewbox=${Ht},${jt},${mt},${At}&bounded=1`}return`${Oe}&q=${encodeURIComponent(_e)}`},yr=async(_e,Oe)=>{try{if(qs.has(_e)){const Bt=qs.get(_e);return console.log(`✅ Coordenadas encontradas no cache: "${_e}" → [${Bt[0]}, ${Bt[1]}]`),Bt}const Ue=vt(_e),nt=Ue.toLowerCase(),bt=Bt=>Bt.normalize("NFD").replace(/[\u0300-\u036f]/g,""),Ht=Bt=>Bt.replace(/\b\d+[\w\s\/\-]*?(?=,|$)/g,"").replace(/,\s*,/g,",").replace(/,\s*$/,"").trim(),mt=Bt=>Array.from(new Set(Bt.filter(Boolean))),jt=mt([nt,bt(nt),Ht(nt),bt(Ht(nt))]);for(const[Bt,Jt]of Object.entries(Fr))if(nt===Bt)return qs.set(_e,Jt),console.log(`✅ Busca exata no mapeamento local: "${_e}" → [${Jt[0]}, ${Jt[1]}]`),Jt;const At=["rua leão xiii","serrinha","fortaleza"];for(const Bt of At)if(nt.includes(Bt)){for(const[Jt,Qt]of Object.entries(Fr))if(Jt.includes(Bt))return qs.set(_e,Qt),console.log(`✅ Busca por palavra-chave "${Bt}": "${_e}" → [${Qt[0]}, ${Qt[1]}]`),Qt}let $t=null;for(const[Bt,Jt]of Object.entries(Fr)){const Qt=ls(nt,Bt);Qt>.6&&(!$t||Qt>$t.score)&&($t={key:Bt,coords:Jt,score:Qt})}if($t)return qs.set(_e,$t.coords),console.log(`✅ Busca parcial no mapeamento local: "${_e}" → "${$t.key}" (score: ${$t.score.toFixed(2)}) → [${$t.coords[0]}, ${$t.coords[1]}]`),$t.coords;const Ot=Yr(Ue),_t=nt.match(/([^,]+),\s*([a-z]{2})/);let dt="",cs="";Ot.city&&Ot.state?(dt=Ot.city,cs=Ot.state):_t&&(dt=_t[1].trim(),cs=_t[2].trim().toUpperCase());const ms=[];if(dt&&cs)jt.forEach(Bt=>{ms.push(Bt+", "+dt+", "+cs+", brasil",Bt+", "+dt+", "+cs,Bt+", "+cs+", brasil",Bt+", brasil")});else{const Bt=os?.city?String(os.city).toLowerCase():"",Jt=os?.stateCode||(os?.state?String(os.state).toUpperCase():"");Bt&&Jt?jt.forEach(Qt=>{ms.push(Qt+", "+Bt+", "+Jt+", brasil",Qt+", "+Bt+", "+Jt,Qt+", "+Jt+", brasil",Qt+", brasil")}):jt.forEach(Qt=>{ms.push(Qt+", brasil",Qt)})}const Gs=mt(ms);for(const Bt of Gs)try{console.log(`🌐 Tentando geocoding externo para: "${Bt}"`);const Jt=new AbortController,Qt=setTimeout(()=>Jt.abort(),7e3),Wt=hn(Bt),pt=await fetch(Wt,{signal:Jt.signal,headers:{Accept:"application/json"}});if(clearTimeout(Qt),pt.ok){const Dn=await pt.json();if(Dn.length>0){const un=Dt=>{const cr=Dt.address||{},Ys=(cr.city||cr.town||cr.village||cr.suburb||"").toString().toLowerCase(),nr=(cr.state||"").toString().toUpperCase();let Jn=parseFloat(Dt.importance||0);if(dt&&Ys.includes(dt.toLowerCase())&&(Jn+=.5),cs&&nr===cs.toUpperCase()&&(Jn+=.5),h){const pa=Os(parseFloat(Dt.lat),parseFloat(Dt.lon),h[0],h[1]),pn=Math.max(0,50-pa)/100;Jn+=pn}return Jn},fn=Dn.reduce((Dt,cr)=>un(cr)>un(Dt)?cr:Dt),mn=parseFloat(fn.lat),St=parseFloat(fn.lon);if(Ye(mn,St)){const Dt=[mn,St];return qs.set(_e,Dt),console.log(`✅ Geocoding externo bem-sucedido para "${_e}": [${mn}, ${St}] (ajustado por contexto)`),Dt}else console.log(`⚠️ Coordenadas inválidas para "${_e}": [${mn}, ${St}]`)}}}catch(Jt){Jt.name==="AbortError"?console.warn(`⏰ Timeout na tentativa "${Bt}"`):console.warn(`❌ Erro na tentativa "${Bt}":`,Jt)}if(Oe?.allowFallback===!1)return console.log(`🔄 Fallback desabilitado para "${_e}". Retornando null.`),null;const Nr=br(nt,dt,cs);return qs.set(_e,Nr),console.log(`🔄 Usando fallback inteligente para "${_e}": [${Nr[0].toFixed(6)}, ${Nr[1].toFixed(6)}]`),Nr}catch(Ue){return console.error("Erro geral no geocoding:",Ue),console.log(`🔄 Fallback final desabilitado para "${_e}". Retornando null.`),null}},ls=(_e,Oe)=>{const Ue=_e.split(" ").filter(At=>At.length>2),nt=Oe.split(" ").filter(At=>At.length>2);if(Ue.length===0||nt.length===0)return 0;const Ht=["rua","avenida","fortaleza","serrinha","leão","xiii"].some(At=>_e.includes(At)&&Oe.includes(At));let jt=Ue.filter(At=>nt.some($t=>$t.includes(At)||At.includes($t))).length/Math.max(Ue.length,nt.length);return Ht&&(jt+=.3),Math.min(jt,1)},Ye=(_e,Oe)=>_e>=-34&&_e<=6&&Oe>=-74&&Oe<=-34,br=(_e,Oe,Ue)=>{const nt={"são paulo":[-23.5505,-46.6333],sp:[-23.5505,-46.6333],fortaleza:[-3.7319,-38.5267],ce:[-3.7319,-38.5267],serrinha:[-3.7319,-38.5267],"rio de janeiro":[-22.9068,-43.1729],rj:[-22.9068,-43.1729],"belo horizonte":[-19.9167,-43.9345],mg:[-19.9167,-43.9345],salvador:[-12.9714,-38.5011],ba:[-12.9714,-38.5011],recife:[-8.0476,-34.877],pe:[-8.0476,-34.877],brasília:[-15.7942,-47.8822],df:[-15.7942,-47.8822],curitiba:[-25.4289,-49.2671],pr:[-25.4289,-49.2671],"porto alegre":[-30.0346,-51.2177],rs:[-30.0346,-51.2177],belém:[-1.4554,-48.4898],pa:[-1.4554,-48.4898],manaus:[-3.119,-60.0217],am:[-3.119,-60.0217]};if(_e.includes("fortaleza")||_e.includes("ce")||_e.includes("serrinha")||Oe.includes("fortaleza")||Oe.includes("ce")||Oe.includes("serrinha")||Ue.includes("CE"))return console.log(`🎯 Detecção específica de Fortaleza para: "${_e}"`),[-3.7319,-38.5267];for(const[jt,At]of Object.entries(nt))if(_e.includes(jt)||Oe.includes(jt)||Ue.includes(jt))return At;const bt=_e.split("").reduce((jt,At)=>(jt=(jt<<5)-jt+At.charCodeAt(0),jt&jt),0),Ht=Math.abs(bt)%2e3/1e4-.1,mt=Math.abs(bt>>10)%2e3/1e4-.1;return[-15.7942+Ht,-47.8822+mt]},On=async()=>{if(te)try{const _e=localStorage.getItem("token");if(!_e)return;const Oe=await fetch(`${ht()}/api/professional/${te.id}/completed-services`,{headers:{Authorization:`Bearer ${_e}`,"Content-Type":"application/json"}});if(Oe.ok){const nt=(await Oe.json()).data||[],bt=new Date,Ht=bt.getMonth(),mt=bt.getFullYear(),jt=nt.filter(Ot=>{const _t=Ot.completedAt?new Date(Ot.completedAt):null;return _t?(console.log("🔍 Filtro mensal:",{serviceId:Ot.serviceRequestId,completedAt:Ot.completedAt,serviceDate:_t.toISOString(),currentMonth:Ht,currentYear:mt,isCurrentMonth:_t.getMonth()===Ht&&_t.getFullYear()===mt}),_t.getMonth()===Ht&&_t.getFullYear()===mt):!1}),At=jt.reduce((Ot,_t)=>Ot+(Number(_t.amount)||0),0),$t=nt.reduce((Ot,_t)=>Ot+(Number(_t.amount)||0),0);ae(jt.length),E(At),Z(nt.length),re($t),Ne(nt),console.log("📊 Estatísticas carregadas:",{totalServices:nt.length,monthlyServices:jt.length,monthlyEarnings:At,totalEarnings:$t,completedServices:nt.slice(0,3)})}}catch(_e){console.error("❌ Erro ao carregar estatísticas:",_e)}},Kr=async()=>{if(console.log("🚀 Iniciando busca de solicitações..."),console.log("👤 Usuário:",te),!te){console.log("❌ Usuário não autenticado");return}Pt(!0),zt(0),ft("Iniciando busca de solicitações..."),ot([]),Ge({});try{const _e=localStorage.getItem("token");if(console.log("🔑 Token encontrado:",!!_e),!_e){we({title:"Erro de Autenticação",description:"Token de autenticação não encontrado. Faça login novamente.",variant:"destructive"}),Pt(!1);return}const Oe=["acompanhante_hospitalar"],Ue=[];let nt=0;console.log("🌐 URL da API:",ht()),console.log("🔑 Token presente:",!!_e);const bt=Oe.map(async dt=>{const cs=`${ht()}/api/service-requests/category/${dt}`;console.log(`📡 Buscando solicitações para categoria: ${dt}`),console.log(`🔗 URL completa: ${cs}`);try{const ms=await fetch(cs,{headers:{Authorization:`Bearer ${_e}`,"Content-Type":"application/json"}});if(console.log(`📊 Resposta para ${dt}:`,ms.status,ms.statusText),ms.ok){const Gs=await ms.json();return console.log(`✅ Solicitações encontradas para ${dt}:`,Gs),console.log(`📈 Quantidade de solicitações para ${dt}:`,Gs.length),nt+=Gs.length,Gs}else{const Gs=await ms.text();return console.error(`❌ Erro na API para ${dt}:`,Gs),console.error(`Status: ${ms.status}, StatusText: ${ms.statusText}`),[]}}catch(ms){return console.error(`💥 Erro na requisição para ${dt}:`,ms),[]}});if(zt(30),ft("Buscando solicitações das categorias..."),(await Promise.all(bt)).forEach(dt=>Ue.push(...dt)),console.log("📋 Total de solicitações encontradas:",Ue.length),Ue.length===0){Pt(!1),we({title:"Nenhuma solicitação encontrada",description:"Não há solicitações disponíveis no momento. Tente novamente mais tarde."});return}const mt=Ue.filter(dt=>dt.status==="open").sort((dt,cs)=>new Date(cs.createdAt).getTime()-new Date(dt.createdAt).getTime());console.log("🔓 Solicitações abertas encontradas:",mt.length),zt(50),ft(`Processando ${mt.length} solicitações...`),ot(mt);const jt={},At=[],$t=3;for(let dt=0;dt<mt.length;dt+=$t){const ms=mt.slice(dt,dt+$t).map(async Nr=>{const Bt=Nr.address||Nr.location||"",Jt=String(Bt||"").trim(),Qt=Jt.toLowerCase();if(Jt&&!(Qt==="não informado"||Qt==="nao informado"||Qt==="não definido"||Qt==="nao definido")&&Jt.length>=5)try{const pt=await yr(Jt,{allowFallback:!1});pt?(jt[Nr.id]=pt,console.log(`✅ Endereço geocodificado: ${Jt} → [${pt[0]}, ${pt[1]}]`)):(At.push(Jt),console.warn(`❌ Falha no geocoding: ${Jt}`))}catch(pt){At.push(Jt),console.error(`❌ Erro no geocoding para ${Jt}:`,pt)}});await Promise.all(ms);const Gs=50+Math.min((dt+$t)/mt.length*40,40);zt(Gs),ft(`Processando localizações... ${Math.round((dt+$t)/mt.length*100)}%`),console.log(`🔄 Progresso do geocoding: ${Gs.toFixed(1)}%`)}zt(100),ft("Finalizando..."),Ge(jt),is(At);const Ot=Object.keys(jt).length,_t=mt.length-Ot;console.log(`✅ Processamento concluído: ${mt.length} solicitações`),console.log(`📍 Com coordenadas: ${Ot}`),console.log(`❓ Sem coordenadas: ${_t}`),At.length>0?we({title:"Solicitações Carregadas!",description:`${mt.length} solicitações encontradas. ${Ot} com localização precisa. ${At.length} com problemas de localização.`,variant:"default"}):we({title:"Solicitações Carregadas!",description:`${mt.length} solicitações encontradas. Todos os endereços foram localizados com sucesso!`,variant:"default"})}catch(_e){console.error("💥 Erro geral ao buscar solicitações:",_e),we({title:"Erro de Conexão",description:"Erro ao carregar solicitações. Verifique sua conexão e tente novamente.",variant:"destructive"})}finally{Pt(!1)}},wr=()=>{if(console.log("📍 Iniciando geolocalização..."),console.log("📍 Geolocalização suportada:",C),y(!0),g(!0),C){console.log("📍 Geolocalização suportada pelo navegador");const _e={enableHighAccuracy:!0,timeout:3e4,maximumAge:0};navigator.geolocation.getCurrentPosition(async Oe=>{const{latitude:Ue,longitude:nt,accuracy:bt}=Oe.coords;if(console.log("📍 Localização obtida com sucesso:",{latitude:Ue,longitude:nt,accuracy:`${bt}m de precisão`}),Ue&&nt&&!isNaN(Ue)&&!isNaN(nt)&&Ue>=-90&&Ue<=90&&nt>=-180&&nt<=180){console.log("📍 Coordenadas válidas:",[Ue,nt]),p([Ue,nt]),he(bt||0),z(mt=>mt+1),y(!1),B(!0);const Ht=bt<=10?"Excelente":bt<=30?"Muito Boa":bt<=50?"Boa":bt<=100?"Regular":"Baixa";we({title:`Localização ${Ht}`,description:`Precisão: ${Math.round(bt||0)}m | ${Ue.toFixed(6)}, ${nt.toFixed(6)}`}),setTimeout(()=>{z(mt=>mt+1)},200),setTimeout(()=>{B(!1)},3e3);try{const mt=new AbortController,jt=setTimeout(()=>mt.abort(),5e3),At=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Ue}&lon=${nt}&zoom=10&addressdetails=1&accept-language=pt-BR`,{signal:mt.signal});if(clearTimeout(jt),At.ok){const Ot=(await At.json())?.address||{},_t=Ot.city||Ot.town||Ot.village||Ot.suburb||"",dt=Ot.state||"",cs=Ot["ISO3166-2-lvl4"]?.split("-")?.pop?.()||Ot.state_code||"";vr({city:_t,state:dt,stateCode:cs}),console.log("🧭 Contexto geográfico detectado:",{city:_t,state:dt,stateCode:cs})}}catch(mt){console.warn("⚠️ Falha no reverse geocoding do contexto local:",mt)}}else console.warn("📍 Coordenadas inválidas:",{latitude:Ue,longitude:nt}),y(!1),we({title:"Erro na Localização",description:"Coordenadas inválidas obtidas. Tente novamente.",variant:"destructive"})},Oe=>{console.error("📍 Erro na geolocalização:",Oe);let Ue="Erro desconhecido na geolocalização";switch(Oe.code){case Oe.PERMISSION_DENIED:Ue="Permissão negada. Ative a localização nas configurações do navegador.";break;case Oe.POSITION_UNAVAILABLE:Ue="Localização indisponível. Verifique sua conexão de internet.";break;case Oe.TIMEOUT:Ue="Tempo limite excedido. Tente novamente em alguns segundos.";break}console.log(`📍 ${Ue}`),y(!1)},_e)}else console.log("📍 Geolocalização não suportada pelo navegador"),y(!1)};P.useEffect(()=>{console.log("useEffect triggered - user:",te),te?(console.log("User authenticated, calling fetchServiceRequests"),Kr(),On()):console.log("User not authenticated yet")},[te]);const Ar=()=>{h&&(console.log("🗺️ Centralizando mapa na localização do usuário:",h),z(_e=>_e+1))};return e.jsxs(ll,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-32",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b-2 border-gray-200 dark:border-gray-700 rounded-b-lg px-3 sm:px-4 py-2 sm:py-3",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:te?.profileImage&&!T?e.jsx("img",{src:`${ht()}${te.profileImage}`,alt:`Foto de ${te?.name||"Profissional"}`,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",onError:_e=>{A(!0);const Oe=_e.target;Oe.src.includes("http")||(Oe.src=`https://lifebee.onrender.com${te.profileImage}`)},onLoad:()=>{console.log("Imagem carregada com sucesso:",te.profileImage),A(!1)}}):e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-yellow-500 flex items-center justify-center border-2 border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold",children:te?.name?te.name.charAt(0).toUpperCase():"P"})})}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white truncate",children:"Painel do Profissional"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Bem-vindo, ",te?.name||"Profissional","!"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 flex-shrink-0 min-w-0 ml-auto self-end",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-emerald-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:`text-xs sm:text-sm font-medium ${r?"text-emerald-700 dark:text-emerald-300":"text-gray-600 dark:text-gray-400"}`,children:r?"Disponível":"Indisponível"})]}),e.jsx(zp,{children:e.jsxs(k2,{children:[e.jsx(P2,{asChild:!0,children:e.jsx(ji,{checked:r,onCheckedChange:ts,className:"h-6 w-11 sm:h-7 sm:w-12 [&>span]:h-5 [&>span]:w-5 sm:[&>span]:h-6 sm:[&>span]:w-6 flex-shrink-0 data-[state=checked]:bg-blue-500 data-[state=checked]:hover:bg-blue-600 data-[state=unchecked]:bg-gray-400 data-[state=unchecked]:hover:bg-gray-500 transition-all duration-300 ease-in-out shadow-md hover:shadow-lg"})}),e.jsx(Bp,{children:e.jsx("p",{children:r?"Clique para ficar indisponível":"Clique para ficar disponível"})})]})})]}),e.jsxs($b,{open:d,onOpenChange:u,children:[e.jsx(Ub,{asChild:!0,children:e.jsxs(Me,{variant:"outline",size:"sm",className:"relative h-8 sm:h-9 w-8 sm:w-auto px-2.5 sm:px-3 min-w-0 flex-shrink-0 justify-center aspect-square sm:aspect-auto",children:[e.jsx(El,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),Yn>0]})}),e.jsxs(Cg,{className:"w-80 p-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl backdrop-blur-sm",align:"end",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Notificações"}),e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:e.jsx(fl,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:Kt.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma notificação"}):Kt.map(_e=>{const Oe=_e.icon;return e.jsx("div",{className:`p-4 border-b hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer ${_e.read?"":"bg-blue-50 dark:bg-blue-900/20"}`,onClick:()=>Kn(_e.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full bg-gray-100 dark:bg-gray-700 ${_e.color}`,children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-medium ${_e.read?"text-gray-900 dark:text-white":"text-blue-900 dark:text-blue-100"}`,children:_e.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:_e.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_e.time})]}),!_e.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})]})},_e.id)})}),Kt.length>0&&e.jsx("div",{className:"p-3 border-t",children:e.jsx(Me,{variant:"ghost",size:"sm",className:"w-full",children:"Ver todas as notificações"})})]})]}),e.jsxs(Ob,{children:[e.jsx(Db,{asChild:!0,children:e.jsx(Me,{variant:"outline",size:"sm",className:"h-8 sm:h-9 w-8 sm:w-auto px-2 sm:px-3 min-w-0 flex-shrink-0 gap-1 sm:gap-1.5 justify-center aspect-square sm:aspect-auto",children:e.jsx(Fh,{className:"h-2 w-2 sm:h-3 sm:w-3 flex-shrink-0"})})}),e.jsxs(Pg,{align:"end",className:"w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg z-[100]",children:[e.jsx(Ta,{asChild:!0,children:e.jsxs(ks,{href:"/provider-profile",className:"flex items-center cursor-pointer",children:[e.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Meu Perfil"]})}),e.jsx(Ta,{asChild:!0,children:e.jsxs(ks,{href:"/provider-proposals",className:"flex items-center cursor-pointer",children:[e.jsx(Ra,{className:"mr-2 h-4 w-4"}),"Propostas"]})}),e.jsx(Ta,{asChild:!0,children:e.jsxs(ks,{href:"/settings",className:"flex items-center cursor-pointer",children:[e.jsx(dp,{className:"mr-2 h-4 w-4"}),"Configurações"]})}),e.jsx(Ta,{onClick:()=>le(ue==="dark"?"light":"dark"),children:ue==="dark"?e.jsxs(e.Fragment,{children:[e.jsx(fp,{className:"mr-2 h-4 w-4"}),"Modo Claro"]}):e.jsxs(e.Fragment,{children:[e.jsx(ap,{className:"mr-2 h-4 w-4"}),"Modo Escuro"]})}),e.jsx(eh,{}),e.jsxs(Ta,{children:[e.jsx(po,{className:"mr-2 h-4 w-4"}),"Privacidade e Segurança"]}),e.jsxs(Ta,{children:[e.jsx(El,{className:"mr-2 h-4 w-4"}),"Preferências de Notificação"]}),e.jsxs(Ta,{children:[e.jsx(ln,{className:"mr-2 h-4 w-4"}),"Métodos de Pagamento"]}),e.jsxs(Ta,{children:[e.jsx(np,{className:"mr-2 h-4 w-4"}),"Central de Ajuda"]}),e.jsx(eh,{}),e.jsxs(Ta,{onClick:Lt,className:"text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400",children:[e.jsx(Fl,{className:"mr-2 h-4 w-4"}),"Sair da Conta"]})]})]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 pb-8 sm:pb-12 lg:pb-16 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(lt,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total de Serviços"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:xe}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Este mês"})]}),e.jsx("div",{className:"p-3 bg-blue-500 rounded-full",children:e.jsx(fs,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(lt,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Receita Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:["R$ ",fe.toLocaleString("pt-BR")]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Este mês"})]}),e.jsx("div",{className:"p-3 bg-green-500 rounded-full",children:e.jsx(ln,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(lt,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Média por Serviço"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["R$ ",xe>0?(fe/xe).toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"]}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Valor médio"})]}),e.jsx("div",{className:"p-3 bg-purple-500 rounded-full",children:e.jsx(N1,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(lt,{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border-orange-200 dark:border-orange-700",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Taxa de Conclusão"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:[be.length>0?Math.round(xe/be.length*100):0,"%"]}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Serviços finalizados"})]}),e.jsx("div",{className:"p-3 bg-orange-500 rounded-full",children:e.jsx($u,{className:"h-6 w-6 text-white"})})]})})})]}),e.jsxs(kg,{defaultValue:"opportunities",className:"space-y-6 sm:space-y-8",children:[e.jsxs(Yh,{className:"grid w-full grid-cols-3 sm:grid-cols-3 h-auto min-h-12 p-1.5 gap-1.5 sm:gap-2 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsxs(_i,{value:"opportunities",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Oportunidades"}),e.jsx("span",{className:"xs:hidden",children:"Oport."})]}),e.jsxs(_i,{value:"performance",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Performance"}),e.jsx("span",{className:"xs:hidden",children:"Perf."})]}),e.jsxs(_i,{value:"history",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Histórico"}),e.jsx("span",{className:"xs:hidden",children:"Hist."})]})]}),e.jsx(Si,{value:"opportunities",className:"space-y-8",children:e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs(us,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(Ns,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"text-base sm:text-lg lg:text-xl",children:"Serviços Próximos a Você"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Raio:"}),e.jsx(xt,{type:"number",value:i,onChange:_e=>l(Number(_e.target.value)),className:"w-12 sm:w-16 h-7 sm:h-8 text-xs sm:text-sm",min:"1",max:"50"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"km"})]})})]})}),e.jsxs(ct,{children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg h-48 sm:h-56 md:h-64 mb-4 sm:mb-6 overflow-hidden relative sticky top-2 sm:top-4 z-10",children:[e.jsx("div",{className:"absolute top-2 right-2 z-20",children:e.jsx(Me,{size:"sm",variant:"outline",onClick:()=>{console.log("🔘 Botão de localização clicado!"),N&&h?Ar():wr()},className:"bg-white dark:bg-gray-800 shadow-md hover:shadow-lg",disabled:v,children:v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}):N?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs hidden sm:inline",children:"Centralizar"})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs hidden sm:inline",children:"Minha Localização"})]})})}),v?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Obtendo sua localização..."})]})}):h?e.jsxs(c5,{center:h||[-23.55052,-46.633308],zoom:15,style:{height:"100%",width:"100%"},children:[h&&e.jsx(Zw,{userLocation:h}),e.jsxs(Ml,{position:"topright",children:[e.jsx(Ml.BaseLayer,{checked:ue!=="dark",name:"OSM Claro",children:e.jsx(hf,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),e.jsx(Ml.BaseLayer,{checked:ue==="dark",name:"Carto Escuro",children:e.jsx(hf,{attribution:'© <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"})})]}),h&&e.jsx(df,{position:h,icon:cf.divIcon({className:"custom-div-icon",html:`<div style="position: relative; width: 28px; height: 34px;">
                                <div style="position:absolute; left:50%; top:50%; transform: translate(-50%, -55%); background-color: ${H?"#10b981":"#3b82f6"}; width: 24px; height: 24px; border-radius: 50%; border: 4px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.4); animation: pulse 2s infinite; ${H?"border-color: #10b981;":""}"></div>
                                <div style="position:absolute; left:50%; bottom:0; transform: translate(-50%, 50%); width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #fff; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.25));"></div>
                              </div>`,iconSize:[28,34],iconAnchor:[14,30]})}),Ze.map(_e=>{const Oe=Ct[_e.id];if(!Oe)return null;const Ue=rr===_e.id,nt=S?.id===_e.id;return e.jsx(df,{position:Oe,draggable:Ue,icon:cf.divIcon({className:"custom-div-icon",html:`<div style="position: relative; width: 34px; height: 34px;">
                                    <div style="position:absolute; left:50%; top:50%; transform: translate(-50%, -50%); width: 32px; height: 32px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); background-image: url('/service-icon.png'); background-size: cover; background-position: center; background-repeat: no-repeat; ${nt?"animation: pulse 2s infinite;":""}"></div>
                                    <div style="position:absolute; left:50%; bottom:0; transform: translate(-50%, 50%); width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #fff; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.25));"></div>
                                  </div>`,iconSize:[34,40],iconAnchor:[17,34]}),eventHandlers:{click:()=>{Ue?Zt(null):Dr(_e)},dragend:bt=>{if(Ue){const Ht=bt.target.getLatLng();Ge(mt=>({...mt,[_e.id]:[Ht.lat,Ht.lng]})),Zt(null),we({title:"Posição Atualizada",description:"A posição da solicitação foi ajustada manualmente."})}}}},_e.id)})]},`map-${R}-${h?`${h[0]}-${h[1]}`:"fallback"}`):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ns,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Clique para obter sua localização"}),e.jsx(Me,{size:"sm",onClick:wr,disabled:v,className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Obter Localização"]})})]})}),e.jsx("div",{className:"absolute left-0 right-0 bottom-0 p-2 text-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-lg px-3 py-2 shadow-lg",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium mb-1",children:["Mostrando serviços em um raio de ",i,"km"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Sua localização"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsxs("span",{children:["Solicitações (",Ze.length,")"]})]}),S&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Selecionado"})]})]})]})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Solicitações Disponíveis"}),xr.length>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["⚠️ ",xr.length," endereço(s) não localizados"]})]}),e.jsx(Me,{variant:"outline",size:"sm",onClick:Kr,disabled:wt,className:"h-8 sm:h-9 px-3 sm:px-4 text-xs sm:text-sm",children:wt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-primary mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Carregando..."}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ec,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atualizar"})]})})]}),wt?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsxs("div",{className:"relative mx-auto mb-3 sm:mb-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 border-4 border-gray-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 sm:w-16 sm:h-16 border-4 border-primary rounded-full",style:{clipPath:`polygon(50% 50%, 50% 0%, ${50+Tt*.36}% 0%, ${50+Tt*.36}% 50%)`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-primary",children:[Tt,"%"]})})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2",children:ns}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 sm:h-2 max-w-xs mx-auto",children:e.jsx("div",{className:"bg-primary h-1.5 sm:h-2 rounded-full transition-all duration-300",style:{width:`${Tt}%`}})})]}):Ze.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center mx-auto mb-3 sm:mb-4",children:e.jsx(El,{className:"h-6 w-6 sm:h-8 sm:w-8 text-gray-400"})}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-2",children:"Nenhuma solicitação disponível"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-4",children:"Novas solicitações aparecerão aqui automaticamente"}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"Dica:"})," Clique nos pins amarelos no mapa para ver detalhes dos serviços!"]})})]}):Ze.map(_e=>e.jsx(lt,{id:`service-${_e.id}`,className:"border-l-4 border-l-primary transition-all duration-300",children:e.jsx(ct,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-semibold text-sm sm:text-base lg:text-lg",children:["Solicitação #",_e.id]}),e.jsx(Bs,{variant:"outline",className:"text-xs w-fit",children:_e.category==="fisioterapeuta"?"Fisioterapeuta":_e.category==="acompanhante_hospitalar"?"Acompanhante":_e.category==="tecnico_enfermagem"?"Técnico Enfermagem":_e.category})]}),e.jsx("p",{className:"font-medium text-primary mb-1 text-sm sm:text-base",children:_e.serviceType}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:_e.description}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-1 sm:gap-2 text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(Ns,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:_e.address||_e.location||"Não informado"})]}),e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(gr,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[new Date(_e.scheduledDate).toLocaleDateString("pt-BR")," às ",_e.scheduledTime]})]}),e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(In,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{children:[_e.responses||0," respostas"]})]}),Ct[_e.id]&&h&&e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx("span",{className:"h-3 w-3 flex-shrink-0",children:"📏"}),e.jsxs("span",{children:[Os(h[0],h[1],Ct[_e.id][0],Ct[_e.id][1]).toFixed(1)," km"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[_e.budget&&e.jsxs("p",{className:"text-sm sm:text-base lg:text-lg font-bold text-green-600",children:["R$ ",parseFloat(_e.budget).toFixed(2)]}),e.jsx(Me,{size:"sm",className:"w-full sm:w-auto h-9 sm:h-10 text-xs sm:text-sm",onClick:()=>_s(_e.id),children:"Ofertar Serviço"})]})]})})},_e.id))]})]})]})}),e.jsxs(Si,{value:"performance",className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Performance e Estatísticas"}),e.jsxs(Me,{onClick:On,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Ec,{className:"h-4 w-4"}),"Atualizar Dados"]})]}),e.jsx(lt,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T1,{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Dados de Performance"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Os dados de performance e estatísticas estão sendo exibidos na área principal do dashboard acima."})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(O1,{className:"h-5 w-5"}),"Metas do Mês"]})}),e.jsx(ct,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>oe("services"),className:`px-3 py-1.5 rounded-md text-sm font-medium ${J==="services"?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:"Meta por Serviços"}),e.jsx("button",{onClick:()=>oe("revenue"),className:`px-3 py-1.5 rounded-md text-sm font-medium ${J==="revenue"?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:"Meta por Receita"}),e.jsxs("button",{onClick:Je,className:"ml-2 inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium bg-white dark:bg-gray-900 border hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx(zh,{className:"h-4 w-4"}),"Gerar Relatório (PDF)"]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto w-full sm:w-auto sm:flex-nowrap flex-wrap",children:[e.jsx("input",{type:"date",value:We,onChange:_e=>et(_e.target.value),className:"px-3 py-1.5 rounded-md border bg-white dark:bg-gray-900 text-sm w-[140px]"}),e.jsx("span",{className:"text-sm text-gray-500",children:"a"}),e.jsx("input",{type:"date",value:Fe,onChange:_e=>Ve(_e.target.value),className:"px-3 py-1.5 rounded-md border bg-white dark:bg-gray-900 text-sm w-[140px]"})]})]}),J==="services"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Defina sua meta de serviços no mês"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:1,value:ie,onChange:_e=>Te(Math.max(1,parseInt(_e.target.value||"0"))),className:"w-28 px-3 py-2 rounded-md border bg-white dark:bg-gray-900"}),e.jsx("span",{className:"self-center text-sm text-gray-500",children:"serviços"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Defina sua meta de receita no mês"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"self-center text-sm text-gray-500",children:"R$"}),e.jsx("input",{type:"number",min:100,step:50,value:Q,onChange:_e=>Ae(Math.max(100,parseFloat(_e.target.value||"0"))),className:"w-32 px-3 py-2 rounded-md border bg-white dark:bg-gray-900"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Serviços concluídos"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[xe,"/",ie," (",Math.min(100,Math.round(xe/(ie||1)*100)),"%)"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-2.5 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full transition-all",style:{width:`${Math.min(100,xe/(ie||1)*100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Receita do mês"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",fe.toLocaleString("pt-BR")," / R$ ",Q.toLocaleString("pt-BR")," (",Math.min(100,Math.round(fe/(Q||1)*100)),"%)"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-2.5 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all",style:{width:`${Math.min(100,fe/(Q||1)*100)}%`}})})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Dica: aumente sua disponibilidade e responda rápido para bater a meta!"})]})})]}),e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx($u,{className:"h-5 w-5"}),"Performance Semanal"]})}),e.jsx(ct,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:(()=>{const _e=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],Oe=new Date,Ue=new Date(Oe);Ue.setDate(Oe.getDate()-Oe.getDay()),Ue.setHours(0,0,0,0),console.log("🔍 Debug Gráfico Semanal:",{totalCompletedServices:de.length,completedServices:de.slice(0,3),weekStart:Ue.toISOString()});const nt=_e.map((bt,Ht)=>{const mt=new Date(Ue);mt.setDate(Ue.getDate()+Ht);const jt=new Date(mt);jt.setDate(mt.getDate()+1);const At=de.filter(Ot=>{const _t=Ot.completedAt?new Date(Ot.completedAt):null;if(!_t)return!1;const dt=mt.getTime(),cs=jt.getTime(),ms=_t.getTime();return ms>=dt&&ms<cs}).length;let $t=0;return At>0&&($t=Math.max(20,Math.min(100,At*20))),console.log(`📊 ${bt}: ${At} serviços, altura: ${$t}%`),{day:bt,count:At,height:$t}});return e.jsx("div",{className:"flex items-end justify-between h-32",children:nt.map((bt,Ht)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:bt.count}),e.jsx("div",{className:"w-8 bg-gradient-to-t from-yellow-500 to-orange-500 rounded-t-sm transition-all duration-300",style:{height:`${bt.height}%`}}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:bt.day})]},Ht))})})()}),e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Serviços concluídos por dia da semana"})]})})]})]})]}),e.jsx(Si,{value:"history",className:"space-y-8",children:e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Histórico de Serviços Concluídos"]})}),e.jsx(ct,{children:e.jsx(Vb,{professionalId:te?.id||0})})]})})]})]})]}),e.jsx(il,{open:V,onOpenChange:Y,children:e.jsxs(go,{className:"max-w-2xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-xl",children:[e.jsxs(xo,{children:[e.jsxs(vo,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Ns,{className:"h-6 w-6 text-yellow-500"}),"Detalhes da Solicitação"]}),e.jsx(Zh,{children:"Informações completas sobre o cliente e o serviço solicitado"})]}),S&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:[e.jsx("div",{className:"flex flex-col space-y-1.5 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[S.clientProfileImage?e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${ht()}${S.clientProfileImage}`,alt:S.clientName||"Cliente",className:"w-full h-full object-cover",onError:_e=>{const Oe=_e.target;Oe.style.display="none";const Ue=Oe.parentElement;Ue&&(Ue.innerHTML=`
                                  <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                    <span class="text-white text-xl font-bold">
                                      ${S.clientName?S.clientName.charAt(0).toUpperCase():"C"}
                                    </span>
                                  </div>
                                `)}})}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:S.clientName?S.clientName.charAt(0).toUpperCase():"C"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:S.clientName||"Cliente"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(cn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:S.clientRating||"5.0"}),e.jsx("span",{className:"text-gray-500",children:"•"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[S.clientServices||"0"," serviços"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente desde ",S.clientSince?new Date(S.clientSince).getFullYear():"2024"]})]})]}),e.jsx("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent hover:bg-primary/80 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:S.status==="open"?"Aberta":S.status==="in_progress"?"Em Andamento":S.status==="completed"?"Concluída":"Normal"})]})}),e.jsxs("div",{className:"p-6 pt-0 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-primary mb-2",children:S.serviceType||"Serviço Solicitado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:S.description||"Descrição do serviço não disponível"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ln,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Orçamento"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["R$ ",S.budget?parseFloat(S.budget).toFixed(2):"0,00"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Ns,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Distância"}),e.jsx("p",{className:"font-semibold text-blue-600",children:Ct[S.id]&&h?`${Os(h[0],h[1],Ct[S.id][0],Ct[S.id][1]).toFixed(1)} km`:"0 km"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(or,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Horário"}),e.jsx("p",{className:"font-semibold text-purple-600",children:S.scheduledTime||"Não definido"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(In,{className:"h-5 w-5 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Respostas"}),e.jsx("p",{className:"font-semibold text-orange-600",children:S.responses||0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-gray-500"}),"Endereço"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:S.address||"Endereço não informado"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4 text-gray-500"}),"Data"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:S.scheduledDate?new Date(S.scheduledDate).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Data não definida"})]}),S.additionalInfo&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4 text-gray-500"}),"Detalhes Adicionais"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:S.additionalInfo})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(Me,{onClick:()=>_s(S.id),className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold",children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Fazer Proposta"]}),e.jsx(Me,{variant:"outline",onClick:dn,className:"flex-1",children:"Fechar"})]}),e.jsxs(Me,{variant:"ghost",size:"sm",onClick:As,className:"w-full text-xs",children:[e.jsx(Ns,{className:"h-3 w-3 mr-1"}),"Limpar Seleção no Mapa"]})]})]})})]})}function qf(s,[t,r]){return Math.min(r,Math.max(t,s))}var Gw=[" ","Enter","ArrowUp","ArrowDown"],Yw=[" ","Enter"],yo="Select",[rd,nd,Kw]=Uf(yo),[pl,uj]=wo(yo,[Kw,qc]),ad=qc(),[Jw,Di]=pl(yo),[Qw,Xw]=pl(yo),g0=s=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:i,onOpenChange:l,value:d,defaultValue:u,onValueChange:h,dir:p,name:v,autoComplete:y,disabled:N,required:g,form:C}=s,j=ad(t),[T,A]=P.useState(null),[S,q]=P.useState(null),[V,Y]=P.useState(!1),ue=sm(p),[le,ee]=sl({prop:a,defaultProp:i??!1,onChange:l,caller:yo}),[te,we]=sl({prop:d,defaultProp:u,onChange:h,caller:yo}),R=P.useRef(null),z=T?C||!!T.closest("form"):!0,[H,B]=P.useState(new Set),pe=Array.from(H).map(he=>he.props.value).join(";");return e.jsx(Yf,{...j,children:e.jsxs(Jw,{required:g,scope:t,trigger:T,onTriggerChange:A,valueNode:S,onValueNodeChange:q,valueNodeHasChildren:V,onValueNodeHasChildrenChange:Y,contentId:Ul(),value:te,onValueChange:we,open:le,onOpenChange:ee,dir:ue,triggerPointerDownPosRef:R,disabled:N,children:[e.jsx(rd.Provider,{scope:t,children:e.jsx(Qw,{scope:s.__scopeSelect,onNativeOptionAdd:P.useCallback(he=>{B(be=>new Set(be).add(he))},[]),onNativeOptionRemove:P.useCallback(he=>{B(be=>{const ne=new Set(be);return ne.delete(he),ne})},[]),children:r})}),z?e.jsxs(B0,{"aria-hidden":!0,required:g,tabIndex:-1,name:v,autoComplete:y,value:te,onChange:he=>we(he.target.value),disabled:N,form:C,children:[te===void 0?e.jsx("option",{value:""}):null,Array.from(H)]},pe):null]})})};g0.displayName=yo;var x0="SelectTrigger",v0=P.forwardRef((s,t)=>{const{__scopeSelect:r,disabled:a=!1,...i}=s,l=ad(r),d=Di(x0,r),u=d.disabled||a,h=Lr(t,d.onTriggerChange),p=nd(r),v=P.useRef("touch"),[y,N,g]=H0(j=>{const T=p().filter(q=>!q.disabled),A=T.find(q=>q.value===d.value),S=$0(T,j,A);S!==void 0&&d.onValueChange(S.value)}),C=j=>{u||(d.onOpenChange(!0),g()),j&&(d.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return e.jsx(Kf,{asChild:!0,...l,children:e.jsx(hs.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":q0(d.value)?"":void 0,...i,ref:h,onClick:Gt(i.onClick,j=>{j.currentTarget.focus(),v.current!=="mouse"&&C(j)}),onPointerDown:Gt(i.onPointerDown,j=>{v.current=j.pointerType;const T=j.target;T.hasPointerCapture(j.pointerId)&&T.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(C(j),j.preventDefault())}),onKeyDown:Gt(i.onKeyDown,j=>{const T=y.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&N(j.key),!(T&&j.key===" ")&&Gw.includes(j.key)&&(C(),j.preventDefault())})})})});v0.displayName=x0;var y0="SelectValue",b0=P.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:i,children:l,placeholder:d="",...u}=s,h=Di(y0,r),{onValueNodeHasChildrenChange:p}=h,v=l!==void 0,y=Lr(t,h.onValueNodeChange);return Gn(()=>{p(v)},[p,v]),e.jsx(hs.span,{...u,ref:y,style:{pointerEvents:"none"},children:q0(h.value)?e.jsx(e.Fragment,{children:d}):l})});b0.displayName=y0;var eN="SelectIcon",w0=P.forwardRef((s,t)=>{const{__scopeSelect:r,children:a,...i}=s;return e.jsx(hs.span,{"aria-hidden":!0,...i,ref:t,children:a||"▼"})});w0.displayName=eN;var tN="SelectPortal",N0=s=>e.jsx(Wf,{asChild:!0,...s});N0.displayName=tN;var bo="SelectContent",j0=P.forwardRef((s,t)=>{const r=Di(bo,s.__scopeSelect),[a,i]=P.useState();if(Gn(()=>{i(new DocumentFragment)},[]),!r.open){const l=a;return l?_h.createPortal(e.jsx(_0,{scope:s.__scopeSelect,children:e.jsx(rd.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),l):null}return e.jsx(S0,{...s,ref:t})});j0.displayName=bo;var da=10,[_0,Fi]=pl(bo),sN="SelectContentImpl",rN=av("SelectContent.RemoveScroll"),S0=P.forwardRef((s,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:l,onPointerDownOutside:d,side:u,sideOffset:h,align:p,alignOffset:v,arrowPadding:y,collisionBoundary:N,collisionPadding:g,sticky:C,hideWhenDetached:j,avoidCollisions:T,...A}=s,S=Di(bo,r),[q,V]=P.useState(null),[Y,ue]=P.useState(null),le=Lr(t,de=>V(de)),[ee,te]=P.useState(null),[we,R]=P.useState(null),z=nd(r),[H,B]=P.useState(!1),pe=P.useRef(!1);P.useEffect(()=>{if(q)return sv(q)},[q]),rv();const he=P.useCallback(de=>{const[Ne,...J]=z().map(Te=>Te.ref.current),[oe]=J.slice(-1),ie=document.activeElement;for(const Te of de)if(Te===ie||(Te?.scrollIntoView({block:"nearest"}),Te===Ne&&Y&&(Y.scrollTop=0),Te===oe&&Y&&(Y.scrollTop=Y.scrollHeight),Te?.focus(),document.activeElement!==ie))return},[z,Y]),be=P.useCallback(()=>he([ee,q]),[he,ee,q]);P.useEffect(()=>{H&&be()},[H,be]);const{onOpenChange:ne,triggerPointerDownPosRef:xe}=S;P.useEffect(()=>{if(q){let de={x:0,y:0};const Ne=oe=>{de={x:Math.abs(Math.round(oe.pageX)-(xe.current?.x??0)),y:Math.abs(Math.round(oe.pageY)-(xe.current?.y??0))}},J=oe=>{de.x<=10&&de.y<=10?oe.preventDefault():q.contains(oe.target)||ne(!1),document.removeEventListener("pointermove",Ne),xe.current=null};return xe.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",J,{capture:!0})}}},[q,ne,xe]),P.useEffect(()=>{const de=()=>ne(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[ne]);const[ae,fe]=H0(de=>{const Ne=z().filter(ie=>!ie.disabled),J=Ne.find(ie=>ie.ref.current===document.activeElement),oe=$0(Ne,de,J);oe&&setTimeout(()=>oe.ref.current.focus())}),E=P.useCallback((de,Ne,J)=>{const oe=!pe.current&&!J;(S.value!==void 0&&S.value===Ne||oe)&&(te(de),oe&&(pe.current=!0))},[S.value]),W=P.useCallback(()=>q?.focus(),[q]),Z=P.useCallback((de,Ne,J)=>{const oe=!pe.current&&!J;(S.value!==void 0&&S.value===Ne||oe)&&R(de)},[S.value]),X=a==="popper"?vh:k0,re=X===vh?{side:u,sideOffset:h,align:p,alignOffset:v,arrowPadding:y,collisionBoundary:N,collisionPadding:g,sticky:C,hideWhenDetached:j,avoidCollisions:T}:{};return e.jsx(_0,{scope:r,content:q,viewport:Y,onViewportChange:ue,itemRefCallback:E,selectedItem:ee,onItemLeave:W,itemTextRefCallback:Z,focusSelectedItem:be,selectedItemText:we,position:a,isPositioned:H,searchRef:ae,children:e.jsx(nv,{as:rN,allowPinchZoom:!0,children:e.jsx(iv,{asChild:!0,trapped:S.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Gt(i,de=>{S.trigger?.focus({preventScroll:!0}),de.preventDefault()}),children:e.jsx(Vf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:e.jsx(X,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:de=>de.preventDefault(),...A,...re,onPlaced:()=>B(!0),ref:le,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:Gt(A.onKeyDown,de=>{const Ne=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!Ne&&de.key.length===1&&fe(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let oe=z().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(de.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const ie=de.target,Te=oe.indexOf(ie);oe=oe.slice(Te+1)}setTimeout(()=>he(oe)),de.preventDefault()}})})})})})})});S0.displayName=sN;var nN="SelectItemAlignedPosition",k0=P.forwardRef((s,t)=>{const{__scopeSelect:r,onPlaced:a,...i}=s,l=Di(bo,r),d=Fi(bo,r),[u,h]=P.useState(null),[p,v]=P.useState(null),y=Lr(t,le=>v(le)),N=nd(r),g=P.useRef(!1),C=P.useRef(!0),{viewport:j,selectedItem:T,selectedItemText:A,focusSelectedItem:S}=d,q=P.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&p&&j&&T&&A){const le=l.trigger.getBoundingClientRect(),ee=p.getBoundingClientRect(),te=l.valueNode.getBoundingClientRect(),we=A.getBoundingClientRect();if(l.dir!=="rtl"){const ie=we.left-ee.left,Te=te.left-ie,Q=le.left-Te,Ae=le.width+Q,ge=Math.max(Ae,ee.width),G=window.innerWidth-da,We=qf(Te,[da,Math.max(da,G-ge)]);u.style.minWidth=Ae+"px",u.style.left=We+"px"}else{const ie=ee.right-we.right,Te=window.innerWidth-te.right-ie,Q=window.innerWidth-le.right-Te,Ae=le.width+Q,ge=Math.max(Ae,ee.width),G=window.innerWidth-da,We=qf(Te,[da,Math.max(da,G-ge)]);u.style.minWidth=Ae+"px",u.style.right=We+"px"}const R=N(),z=window.innerHeight-da*2,H=j.scrollHeight,B=window.getComputedStyle(p),pe=parseInt(B.borderTopWidth,10),he=parseInt(B.paddingTop,10),be=parseInt(B.borderBottomWidth,10),ne=parseInt(B.paddingBottom,10),xe=pe+he+H+ne+be,ae=Math.min(T.offsetHeight*5,xe),fe=window.getComputedStyle(j),E=parseInt(fe.paddingTop,10),W=parseInt(fe.paddingBottom,10),Z=le.top+le.height/2-da,X=z-Z,re=T.offsetHeight/2,de=T.offsetTop+re,Ne=pe+he+de,J=xe-Ne;if(Ne<=Z){const ie=R.length>0&&T===R[R.length-1].ref.current;u.style.bottom="0px";const Te=p.clientHeight-j.offsetTop-j.offsetHeight,Q=Math.max(X,re+(ie?W:0)+Te+be),Ae=Ne+Q;u.style.height=Ae+"px"}else{const ie=R.length>0&&T===R[0].ref.current;u.style.top="0px";const Q=Math.max(Z,pe+j.offsetTop+(ie?E:0)+re)+J;u.style.height=Q+"px",j.scrollTop=Ne-Z+j.offsetTop}u.style.margin=`${da}px 0`,u.style.minHeight=ae+"px",u.style.maxHeight=z+"px",a?.(),requestAnimationFrame(()=>g.current=!0)}},[N,l.trigger,l.valueNode,u,p,j,T,A,l.dir,a]);Gn(()=>q(),[q]);const[V,Y]=P.useState();Gn(()=>{p&&Y(window.getComputedStyle(p).zIndex)},[p]);const ue=P.useCallback(le=>{le&&C.current===!0&&(q(),S?.(),C.current=!1)},[q,S]);return e.jsx(iN,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:ue,children:e.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:V},children:e.jsx(hs.div,{...i,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});k0.displayName=nN;var aN="SelectPopperPosition",vh=P.forwardRef((s,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:i=da,...l}=s,d=ad(r);return e.jsx(Zf,{...d,...l,ref:t,align:a,collisionPadding:i,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vh.displayName=aN;var[iN,ru]=pl(bo,{}),yh="SelectViewport",P0=P.forwardRef((s,t)=>{const{__scopeSelect:r,nonce:a,...i}=s,l=Fi(yh,r),d=ru(yh,r),u=Lr(t,l.onViewportChange),h=P.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(rd.Slot,{scope:r,children:e.jsx(hs.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Gt(i.onScroll,p=>{const v=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:N}=d;if(N?.current&&y){const g=Math.abs(h.current-v.scrollTop);if(g>0){const C=window.innerHeight-da*2,j=parseFloat(y.style.minHeight),T=parseFloat(y.style.height),A=Math.max(j,T);if(A<C){const S=A+g,q=Math.min(C,S),V=S-q;y.style.height=q+"px",y.style.bottom==="0px"&&(v.scrollTop=V>0?V:0,y.style.justifyContent="flex-end")}}}h.current=v.scrollTop})})})]})});P0.displayName=yh;var C0="SelectGroup",[oN,lN]=pl(C0),cN=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=Ul();return e.jsx(oN,{scope:r,id:i,children:e.jsx(hs.div,{role:"group","aria-labelledby":i,...a,ref:t})})});cN.displayName=C0;var L0="SelectLabel",A0=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=lN(L0,r);return e.jsx(hs.div,{id:i.id,...a,ref:t})});A0.displayName=L0;var Bc="SelectItem",[dN,T0]=pl(Bc),E0=P.forwardRef((s,t)=>{const{__scopeSelect:r,value:a,disabled:i=!1,textValue:l,...d}=s,u=Di(Bc,r),h=Fi(Bc,r),p=u.value===a,[v,y]=P.useState(l??""),[N,g]=P.useState(!1),C=Lr(t,S=>h.itemRefCallback?.(S,a,i)),j=Ul(),T=P.useRef("touch"),A=()=>{i||(u.onValueChange(a),u.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(dN,{scope:r,value:a,disabled:i,textId:j,isSelected:p,onItemTextChange:P.useCallback(S=>{y(q=>q||(S?.textContent??"").trim())},[]),children:e.jsx(rd.ItemSlot,{scope:r,value:a,disabled:i,textValue:v,children:e.jsx(hs.div,{role:"option","aria-labelledby":j,"data-highlighted":N?"":void 0,"aria-selected":p&&N,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...d,ref:C,onFocus:Gt(d.onFocus,()=>g(!0)),onBlur:Gt(d.onBlur,()=>g(!1)),onClick:Gt(d.onClick,()=>{T.current!=="mouse"&&A()}),onPointerUp:Gt(d.onPointerUp,()=>{T.current==="mouse"&&A()}),onPointerDown:Gt(d.onPointerDown,S=>{T.current=S.pointerType}),onPointerMove:Gt(d.onPointerMove,S=>{T.current=S.pointerType,i?h.onItemLeave?.():T.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Gt(d.onPointerLeave,S=>{S.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:Gt(d.onKeyDown,S=>{h.searchRef?.current!==""&&S.key===" "||(Yw.includes(S.key)&&A(),S.key===" "&&S.preventDefault())})})})})});E0.displayName=Bc;var Al="SelectItemText",M0=P.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:i,...l}=s,d=Di(Al,r),u=Fi(Al,r),h=T0(Al,r),p=Xw(Al,r),[v,y]=P.useState(null),N=Lr(t,A=>y(A),h.onItemTextChange,A=>u.itemTextRefCallback?.(A,h.value,h.disabled)),g=v?.textContent,C=P.useMemo(()=>e.jsx("option",{value:h.value,disabled:h.disabled,children:g},h.value),[h.disabled,h.value,g]),{onNativeOptionAdd:j,onNativeOptionRemove:T}=p;return Gn(()=>(j(C),()=>T(C)),[j,T,C]),e.jsxs(e.Fragment,{children:[e.jsx(hs.span,{id:h.textId,...l,ref:N}),h.isSelected&&d.valueNode&&!d.valueNodeHasChildren?_h.createPortal(l.children,d.valueNode):null]})});M0.displayName=Al;var I0="SelectItemIndicator",R0=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return T0(I0,r).isSelected?e.jsx(hs.span,{"aria-hidden":!0,...a,ref:t}):null});R0.displayName=I0;var bh="SelectScrollUpButton",O0=P.forwardRef((s,t)=>{const r=Fi(bh,s.__scopeSelect),a=ru(bh,s.__scopeSelect),[i,l]=P.useState(!1),d=Lr(t,a.onScrollButtonChange);return Gn(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=h.scrollTop>0;l(p)};const h=r.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),i?e.jsx(F0,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=r;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});O0.displayName=bh;var wh="SelectScrollDownButton",D0=P.forwardRef((s,t)=>{const r=Fi(wh,s.__scopeSelect),a=ru(wh,s.__scopeSelect),[i,l]=P.useState(!1),d=Lr(t,a.onScrollButtonChange);return Gn(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=h.scrollHeight-h.clientHeight,v=Math.ceil(h.scrollTop)<p;l(v)};const h=r.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),i?e.jsx(F0,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=r;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});D0.displayName=wh;var F0=P.forwardRef((s,t)=>{const{__scopeSelect:r,onAutoScroll:a,...i}=s,l=Fi("SelectScrollButton",r),d=P.useRef(null),u=nd(r),h=P.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return P.useEffect(()=>()=>h(),[h]),Gn(()=>{u().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(hs.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Gt(i.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(a,50))}),onPointerMove:Gt(i.onPointerMove,()=>{l.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(a,50))}),onPointerLeave:Gt(i.onPointerLeave,()=>{h()})})}),hN="SelectSeparator",z0=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return e.jsx(hs.div,{"aria-hidden":!0,...a,ref:t})});z0.displayName=hN;var Nh="SelectArrow",uN=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=ad(r),l=Di(Nh,r),d=Fi(Nh,r);return l.open&&d.position==="popper"?e.jsx(Jf,{...i,...a,ref:t}):null});uN.displayName=Nh;var fN="SelectBubbleInput",B0=P.forwardRef(({__scopeSelect:s,value:t,...r},a)=>{const i=P.useRef(null),l=Lr(a,i),d=ig(t);return P.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==t&&v){const y=new Event("change",{bubbles:!0});v.call(u,t),u.dispatchEvent(y)}},[d,t]),e.jsx(hs.select,{...r,style:{...Em,...r.style},ref:l,defaultValue:t})});B0.displayName=fN;function q0(s){return s===""||s===void 0}function H0(s){const t=rl(s),r=P.useRef(""),a=P.useRef(0),i=P.useCallback(d=>{const u=r.current+d;t(u),function h(p){r.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>h(""),1e3))}(u)},[t]),l=P.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,i,l]}function $0(s,t,r){const i=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,l=r?s.indexOf(r):-1;let d=mN(s,Math.max(l,0));i.length===1&&(d=d.filter(p=>p!==r));const h=d.find(p=>p.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==r?h:void 0}function mN(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var pN=g0,U0=v0,gN=b0,xN=w0,vN=N0,W0=j0,yN=P0,V0=A0,Z0=E0,bN=M0,wN=R0,G0=O0,Y0=D0,K0=z0;const Hl=pN,$l=gN,cl=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(U0,{ref:a,className:ut("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white dark:bg-gray-800 px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(xN,{asChild:!0,children:e.jsx(Fh,{className:"h-4 w-4 opacity-50"})})]}));cl.displayName=U0.displayName;const J0=P.forwardRef(({className:s,...t},r)=>e.jsx(G0,{ref:r,className:ut("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(k1,{className:"h-4 w-4"})}));J0.displayName=G0.displayName;const Q0=P.forwardRef(({className:s,...t},r)=>e.jsx(Y0,{ref:r,className:ut("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Fh,{className:"h-4 w-4"})}));Q0.displayName=Y0.displayName;const dl=P.forwardRef(({className:s,children:t,position:r="popper",...a},i)=>e.jsx(vN,{children:e.jsxs(W0,{ref:i,className:ut("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(J0,{}),e.jsx(yN,{className:ut("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Q0,{})]})}));dl.displayName=W0.displayName;const NN=P.forwardRef(({className:s,...t},r)=>e.jsx(V0,{ref:r,className:ut("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));NN.displayName=V0.displayName;const ho=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Z0,{ref:a,className:ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(wN,{children:e.jsx(Vl,{className:"h-4 w-4"})})}),e.jsx(bN,{children:t})]}));ho.displayName=Z0.displayName;const jN=P.forwardRef(({className:s,...t},r)=>e.jsx(K0,{ref:r,className:ut("-mx-1 my-1 h-px bg-muted",s),...t}));jN.displayName=K0.displayName;const qd={acompanhante_hospitalar:{name:"Acompanhante Hospitalar",icon:"🏥",subServices:[{id:"acompanhamento_hospitalar",name:"Acompanhamento Hospitalar"},{id:"companhia_apoio_emocional",name:"Companhia e Apoio Emocional"}]}};function _N({onComplete:s}){const[t,r]=P.useState(1),[a,i]=P.useState({name:"",email:"",phone:"",address:"",category:"",subService:"",specialization:"",description:"",experience:"",certifications:"",hourlyRate:"",profileImage:null,documents:[]}),l=4,d=()=>{t<l?r(t+1):s()},u=()=>{t>1&&r(t-1)},h=(v,y)=>{i(N=>({...N,[v]:y}))},p=()=>{switch(t){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Informações Pessoais"}),e.jsx("p",{className:"text-gray-600",children:"Vamos começar com seus dados básicos"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"text",placeholder:"Nome completo",value:a.name,onChange:v=>h("name",v.target.value),className:"pl-10 py-3",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Tc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"email",placeholder:"E-mail profissional",value:a.email,onChange:v=>h("email",v.target.value),className:"pl-10 py-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Li,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"tel",placeholder:"(11) 99999-9999",value:a.phone,onChange:v=>h("phone",v.target.value),className:"pl-10 py-3",required:!0})]}),a.phone&&a.phone.length>=10&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(fs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:"Telefone válido"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"text",placeholder:"Cidade, Estado",value:a.address,onChange:v=>h("address",v.target.value),className:"pl-10 py-3",required:!0})]})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Área de Atuação"}),e.jsx("p",{className:"text-gray-600",children:"Selecione sua especialidade profissional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Categoria Principal"}),e.jsxs(Hl,{value:a.category,onValueChange:v=>h("category",v),children:[e.jsx(cl,{className:"bg-white dark:bg-gray-800",children:e.jsx($l,{placeholder:"Selecione sua área de atuação"})}),e.jsx(dl,{children:Object.entries(qd).map(([v,y])=>e.jsxs(ho,{value:v,children:[y.icon," ",y.name]},v))})]})]}),a.category&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Serviço Específico"}),e.jsxs(Hl,{value:a.subService,onValueChange:v=>h("subService",v),children:[e.jsx(cl,{className:"bg-white dark:bg-gray-800",children:e.jsx($l,{placeholder:"Selecione o serviço específico"})}),e.jsx(dl,{children:qd[a.category]?.subServices.map(v=>e.jsx(ho,{value:v.id,children:v.name},v.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Especialização"}),e.jsx(xt,{placeholder:"Ex: Fisioterapia respiratória, Reabilitação neurológica...",value:a.specialization,onChange:v=>h("specialization",v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Descrição dos Serviços"}),e.jsx(Zn,{placeholder:"Descreva em detalhes como você realiza seus serviços, metodologia e diferenciais...",rows:4,value:a.description,onChange:v=>h("description",v.target.value)})]})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Experiência e Qualificações"}),e.jsx("p",{className:"text-gray-600",children:"Conte-nos sobre sua experiência profissional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{placeholder:"Ex: 5 anos",value:a.experience,onChange:v=>h("experience",v.target.value),className:"pl-10"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tempo de Experiência"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"number",placeholder:"80.00",value:a.hourlyRate,onChange:v=>h("hourlyRate",v.target.value),className:"pl-10"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Valor por Hora (R$)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(tp,{className:"h-4 w-4"}),"Certificações e Qualificações"]}),e.jsx(Zn,{placeholder:"Liste suas certificações, cursos e qualificações relevantes...",rows:4,value:a.certifications,onChange:v=>h("certifications",v.target.value)})]})]})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Documentação"}),e.jsx("p",{className:"text-gray-600",children:"Adicione sua foto e documentos profissionais"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(No,{className:"h-4 w-4"}),"Foto de Perfil"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Uu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clique para adicionar uma foto profissional"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG até 2MB"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(zh,{className:"h-4 w-4"}),"Documentos Profissionais"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Uu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Adicione diplomas, certificados e registros profissionais"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG até 5MB cada"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5 text-blue-600"}),"Revisão dos Dados"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Categoria:"})," ",a.category&&qd[a.category]?.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Especialização:"})," ",a.specialization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Experiência:"})," ",a.experience]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor/Hora:"})," R$ ",a.hourlyRate]})]})]})]})]});default:return null}};return e.jsx(ll,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cadastro de Profissional"})]})}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Zl,{size:40})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Cadastro do Profissional"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Junte-se à nossa rede de profissionais de saúde"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-white/80 text-sm",children:["Etapa ",t," de ",l]}),e.jsxs("span",{className:"text-white/80 text-sm",children:[Math.round(t/l*100),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${t/l*100}%`}})})]}),e.jsx(lt,{className:"bg-white/95 backdrop-blur-sm",children:e.jsxs(ct,{className:"p-6",children:[p(),e.jsxs("div",{className:"flex gap-3 mt-8",children:[t>1&&e.jsx(Me,{variant:"outline",onClick:u,className:"flex-1",children:"Voltar"}),e.jsxs(Me,{onClick:d,className:"flex-1",children:[t===l?"Finalizar Cadastro":"Continuar",e.jsx(ep,{className:"ml-2 h-4 w-4"})]})]})]})})]})]})})}function SN(){const{toast:s}=Rs(),[t,r]=P.useState(""),[a,i]=P.useState("all"),[l,d]=P.useState([]),[u,h]=P.useState(!0),[p,v]=P.useState(null);P.useEffect(()=>{y()},[]);const y=async()=>{try{h(!0);const V=await fetch(`${ht()}/api/provider/orders`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(V.ok){const Y=await V.json();d(Y)}else console.error("Erro ao buscar pedidos:",V.statusText),s({title:"Erro",description:"Não foi possível carregar os pedidos",variant:"destructive"})}catch(V){console.error("Erro ao buscar pedidos:",V),s({title:"Erro",description:"Erro de conexão ao carregar pedidos",variant:"destructive"})}finally{h(!1)}},N=V=>{switch(V){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},g=V=>{switch(V){case"pending":return"Pendente";case"accepted":return"Aceito";case"rejected":return"Rejeitado";case"completed":return"Concluído";default:return"Desconhecido"}},C=V=>{switch(V){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},j=V=>{switch(V){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return"Desconhecida"}},T=l.filter(V=>{const Y=V.clientName.toLowerCase().includes(t.toLowerCase())||V.serviceType.toLowerCase().includes(t.toLowerCase()),ue=a==="all"||V.status===a;return Y&&ue}),A=async V=>{try{v(V);const Y=await fetch(`${ht()}/api/provider/orders/${V}/accept`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(Y.ok)s({title:"Sucesso",description:"Pedido aceito com sucesso!"}),y();else{const ue=await Y.json();s({title:"Erro",description:ue.message||"Erro ao aceitar pedido",variant:"destructive"})}}catch(Y){console.error("Erro ao aceitar pedido:",Y),s({title:"Erro",description:"Erro de conexão ao aceitar pedido",variant:"destructive"})}finally{v(null)}},S=async V=>{try{v(V);const Y=await fetch(`${ht()}/api/provider/orders/${V}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(Y.ok)s({title:"Sucesso",description:"Pedido rejeitado com sucesso!"}),y();else{const ue=await Y.json();s({title:"Erro",description:ue.message||"Erro ao rejeitar pedido",variant:"destructive"})}}catch(Y){console.error("Erro ao rejeitar pedido:",Y),s({title:"Erro",description:"Erro de conexão ao rejeitar pedido",variant:"destructive"})}finally{v(null)}},q=V=>{console.log(`Entrando em contato com cliente do pedido ${V}`)};return e.jsx(ll,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Meus Pedidos"})]})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(xt,{placeholder:"Buscar pedidos...",value:t,onChange:V=>r(V.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx(Me,{variant:a==="all"?"default":"outline",size:"sm",onClick:()=>i("all"),children:"Todos"}),e.jsx(Me,{variant:a==="pending"?"default":"outline",size:"sm",onClick:()=>i("pending"),children:"Pendentes"}),e.jsx(Me,{variant:a==="accepted"?"default":"outline",size:"sm",onClick:()=>i("accepted"),children:"Aceitos"}),e.jsx(Me,{variant:a==="completed"?"default":"outline",size:"sm",onClick:()=>i("completed"),children:"Concluídos"})]})]}),e.jsx("div",{className:"space-y-4",children:u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pr,{className:"h-8 w-8 text-gray-400 animate-spin"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Carregando pedidos..."})]}):T.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(mo,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhum pedido encontrado"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"Tente ajustar sua busca":"Você ainda não tem pedidos"})]}):T.map(V=>e.jsxs(lt,{className:"overflow-hidden",children:[e.jsx(rs,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:V.clientName}),e.jsx(Bs,{className:N(V.status),children:g(V.status)})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:V.serviceType})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["R$ ",V.budget]}),e.jsx("p",{className:"text-xs text-gray-500",children:V.timePosted})]})]})}),e.jsxs(ct,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:V.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:V.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(op,{className:"h-4 w-4"}),e.jsxs("span",{children:[V.distance,"km"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(or,{className:"h-4 w-4"}),e.jsxs("span",{children:[V.responses," respostas"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Bs,{className:C(V.urgency),children:j(V.urgency)}),V.clientRating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm",children:V.clientRating})]})]}),e.jsxs("div",{className:"flex gap-2",children:[V.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(Me,{size:"sm",className:"flex-1",onClick:()=>A(V.id),disabled:p===V.id,children:[p===V.id?e.jsx(pr,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Aceitar"]}),e.jsxs(Me,{variant:"outline",size:"sm",onClick:()=>S(V.id),disabled:p===V.id,children:[p===V.id?e.jsx(pr,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Rejeitar"]})]}),V.status==="accepted"&&e.jsxs(Me,{size:"sm",className:"flex-1",onClick:()=>q(V.id),children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Entrar em Contato"]}),V.clientPhone&&e.jsxs(Me,{variant:"outline",size:"sm",children:[e.jsx(Li,{className:"h-4 w-4 mr-2"}),"Ligar"]})]}),V.scheduledDate&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_1,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:["Agendado para: ",V.scheduledDate]})]})})]})]},V.id))})]})]})})}function kN(){const[,s]=sr(),{user:t,logout:r}=lr(),{toast:a}=Rs(),[i,l]=P.useState(!0),[d,u]=P.useState(!1),[h,p]=P.useState(!1),[v,y]=P.useState(!1),N=P.useRef(null),[g,C]=P.useState(null),[j,T]=P.useState(null),[A,S]=P.useState({name:"",email:"",phone:"",taxpayerId:"",specialization:"",category:"",subCategory:"",description:"",experience:"",certifications:"",hourlyRate:"",location:"",available:!0});P.useEffect(()=>{t?.userType==="provider"&&q()},[t]);const q=async()=>{try{l(!0);const ae=localStorage.getItem("token"),fe={"Content-Type":"application/json"};ae&&(fe.Authorization=`Bearer ${ae}`);const E=await fetch(`${ht()}/api/provider/profile`,{credentials:"include",headers:fe});if(E.ok){const Z=await E.json();C(Z)}const W=await fetch(`${ht()}/api/user`,{credentials:"include",headers:fe});if(W.ok){const Z=await W.json();T(Z),S(X=>({name:X.name||g?.name||Z.name||"",email:Z.email||X.email||"",phone:Z.phone||X.phone||"",taxpayerId:X.taxpayerId||Z.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"",specialization:g?.specialization||X.specialization||"",category:g?.category||X.category||"",subCategory:g?.subCategory||X.subCategory||"",description:g?.description||X.description||"",experience:g?.experience||X.experience||"",certifications:g?.certifications||X.certifications||"",hourlyRate:g?.hourlyRate||X.hourlyRate||"",location:g?.location||Z.address||X.location||"",available:g?.available??X.available??!0}))}}catch(ae){console.error("Erro ao carregar dados do perfil:",ae),a({title:"Erro",description:"Não foi possível carregar os dados do perfil",variant:"destructive"})}finally{l(!1)}},V=async()=>{try{u(!0);const ae=localStorage.getItem("token"),fe={"Content-Type":"application/json"};ae&&(fe.Authorization=`Bearer ${ae}`);const E={name:A.name,email:A.email,phone:A.phone,address:A.location},W=await fetch(`${ht()}/api/user/profile`,{method:"PUT",credentials:"include",headers:fe,body:JSON.stringify(E)}),Z={name:A.name,specialization:A.specialization,category:A.category,subCategory:A.subCategory,description:A.description,experience:A.experience,certifications:A.certifications,hourlyRate:A.hourlyRate,location:A.location,available:A.available},X=await fetch(`${ht()}/api/provider/profile`,{method:"PUT",credentials:"include",headers:fe,body:JSON.stringify(Z)});if(W.ok&&X.ok){try{localStorage.setItem("lb_report_taxpayer_id",(A.taxpayerId||"").trim())}catch{}a({title:"Sucesso",description:"Perfil atualizado com sucesso!"}),p(!1),await q()}else{let re="Erro ao atualizar perfil";try{const de=W.ok?null:await W.json(),Ne=X.ok?null:await X.json();re=de?.message||Ne?.message||re}catch{}a({title:"Erro",description:re,variant:"destructive"})}}catch(ae){console.error("Erro ao salvar perfil:",ae),a({title:"Erro",description:"Erro de conexão ao salvar perfil",variant:"destructive"})}finally{u(!1)}},Y=()=>{p(!1),g&&j&&S({name:g.name||"",email:j.email||"",phone:j.phone||"",taxpayerId:A.taxpayerId||"",specialization:g.specialization||"",category:g.category||"",subCategory:g.subCategory||"",description:g.description||"",experience:g.experience||"",certifications:g.certifications||"",hourlyRate:g.hourlyRate||"",location:g.location||"",available:g.available||!0})},ue=async ae=>{const fe=ae.target.files?.[0];if(!fe)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(fe.type)){a({title:"Erro",description:"Apenas imagens são permitidas (JPEG, PNG, GIF, WebP)",variant:"destructive"});return}if(fe.size>5*1024*1024){a({title:"Erro",description:"A imagem deve ter no máximo 5MB",variant:"destructive"});return}try{y(!0);const W=localStorage.getItem("token"),Z=new FormData;Z.append("profileImage",fe);const X=await fetch(`${ht()}/api/provider/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${W}`},body:Z});if(X.ok){const re=await X.json();g&&C({...g,imageUrl:re.imageUrl}),a({title:"Sucesso",description:"Imagem de perfil atualizada com sucesso!"})}else{const re=await X.json();a({title:"Erro",description:re.message||"Erro ao fazer upload da imagem",variant:"destructive"})}}catch(W){console.error("Erro ao fazer upload da imagem:",W),a({title:"Erro",description:"Erro de conexão ao fazer upload da imagem",variant:"destructive"})}finally{y(!1)}},le=()=>{N.current?.click()},ee=()=>{r(),window.location.href="/"},te=ae=>/.+@.+\..+/.test((ae||"").trim()),we=ae=>{const fe=(ae||"").replace(/\D/g,"");return!(fe.length!==11||fe[0]==="0"||fe[1]==="0"||fe[2]!=="9")},R=ae=>{const fe=(ae||"").replace(/\D/g,"");if(!fe||fe.length!==11||/^(\d)\1{10}$/.test(fe))return!1;const E=W=>{let Z=0;for(let re=0;re<W;re++)Z+=parseInt(fe[re],10)*(W+1-re);const X=Z*10%11;return X===10?0:X};return E(9)===parseInt(fe[9],10)&&E(10)===parseInt(fe[10],10)},z=ae=>{const fe=(ae||"").replace(/\D/g,"");if(!fe||fe.length!==14||/^(\d)\1{13}$/.test(fe))return!1;const E=(X,re)=>{const Ne=X.split("").reduce((J,oe,ie)=>J+parseInt(oe,10)*re[ie],0)%11;return Ne<2?0:11-Ne},W=E(fe.slice(0,12),[5,4,3,2,9,8,7,6,5,4,3,2]),Z=E(fe.slice(0,12)+W.toString(),[6,5,4,3,2,9,8,7,6,5,4,3,2]);return W===parseInt(fe[12],10)&&Z===parseInt(fe[13],10)},H=te(j?.email||A.email),B=we(j?.phone||A.phone),pe=A.taxpayerId||j?.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"",he=R(pe)||z(pe),be=[H,B,he].filter(Boolean).length,ne=ae=>({acompanhante_hospitalar:"Acompanhante Hospitalar"})[ae]||ae,xe=ae=>({companhia_apoio_emocional:"Companhia e Apoio Emocional",acompanhamento_hospitalar:"Acompanhamento Hospitalar"})[ae]||ae;return i?e.jsx(ll,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando perfil..."})]})})}):e.jsx(ll,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:e.jsxs("div",{className:"w-full max-w-sm lg:max-w-none mx-auto lg:mx-0 relative px-3 sm:px-4 lg:px-8 py-3 sm:py-4 lg:py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>s("/provider-dashboard"),className:"p-2",children:e.jsx(Zs,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Meu Perfil"})]}),h?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Me,{onClick:Y,variant:"outline",size:"sm",children:[e.jsx(fl,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),e.jsx(Me,{onClick:V,size:"sm",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Salvar"]})})]}):e.jsxs(Me,{onClick:()=>p(!0),size:"sm",children:[e.jsx(up,{className:"h-4 w-4 mr-2"}),"Editar"]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(lt,{className:"mb-6",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsxs(Ti,{className:"w-24 h-24 mx-auto border-4 border-yellow-500",children:[e.jsx(Ei,{src:g.imageUrl?`${ht()}${g.imageUrl}`:void 0,alt:g.name}),e.jsx(Mi,{className:"bg-yellow-500 text-white text-2xl font-bold",children:g.name?.charAt(0)||"P"})]}),e.jsx(Me,{size:"sm",variant:"secondary",className:"absolute -bottom-1 -right-1 rounded-full w-8 h-8 p-0 bg-white border-2 border-gray-200 hover:bg-gray-50",onClick:le,disabled:v,children:v?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full"}):e.jsx(No,{className:"h-4 w-4"})})]}),e.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:ue,className:"hidden"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:h?e.jsx(xt,{value:A.name,onChange:ae=>S(fe=>({...fe,name:ae.target.value})),className:"text-center text-2xl font-bold"}):g.name}),e.jsx("p",{className:"text-lg text-primary font-semibold mb-2",children:h?e.jsx(xt,{value:A.specialization,onChange:ae=>S(fe=>({...fe,specialization:ae.target.value})),className:"text-center text-lg"}):g.specialization}),e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g.totalReviews}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avaliações"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g.rating}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nota"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["R$ ",parseFloat(g.hourlyRate||"0").toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Hora"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Bs,{variant:g.available?"secondary":"outline",className:`${g.available?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:g.available?e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"h-3 w-3 mr-1"}),"Disponível"]}):e.jsxs(e.Fragment,{children:[e.jsx(mo,{className:"h-3 w-3 mr-1"}),"Indisponível"]})})})]})})}),e.jsxs(lt,{className:"mb-6",children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(Gr,{className:"h-5 w-5"}),"Informações Profissionais"]})}),e.jsxs(ct,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_n,{children:"CPF/CNPJ"}),h?e.jsx(xt,{type:"text",inputMode:"numeric",autoComplete:"off",spellCheck:!1,placeholder:"CPF/CNPJ",value:A.taxpayerId,onChange:ae=>S(fe=>({...fe,taxpayerId:ae.target.value})),className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.taxpayerId||j?.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"").trim()||"Não informado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_n,{children:"Categoria"}),h?e.jsxs(Hl,{value:A.category,onValueChange:ae=>S(fe=>({...fe,category:ae})),children:[e.jsx(cl,{className:"bg-white dark:bg-gray-800",children:e.jsx($l,{placeholder:"Selecione a categoria"})}),e.jsx(dl,{children:e.jsx(ho,{value:"acompanhante_hospitalar",children:"Acompanhante Hospitalar"})})]}):e.jsx("p",{className:"font-medium",children:ne(g.category)})]}),e.jsxs("div",{children:[e.jsx(_n,{children:"Subcategoria"}),h?e.jsxs(Hl,{value:A.subCategory,onValueChange:ae=>S(fe=>({...fe,subCategory:ae})),children:[e.jsx(cl,{className:"bg-white dark:bg-gray-800",children:e.jsx($l,{placeholder:"Selecione a subcategoria"})}),e.jsxs(dl,{children:[e.jsx(ho,{value:"companhia_apoio_emocional",children:"Companhia e Apoio Emocional"}),e.jsx(ho,{value:"acompanhamento_hospitalar",children:"Acompanhamento Hospitalar"})]})]}):e.jsx("p",{className:"font-medium",children:xe(g.subCategory)})]})]}),e.jsxs("div",{children:[e.jsx(_n,{children:"Descrição"}),h?e.jsx(Zn,{value:A.description,onChange:ae=>S(fe=>({...fe,description:ae.target.value})),placeholder:"Descreva seus serviços...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.description})]}),e.jsxs("div",{children:[e.jsx(_n,{children:"Experiência"}),h?e.jsx(Zn,{value:A.experience,onChange:ae=>S(fe=>({...fe,experience:ae.target.value})),placeholder:"Descreva sua experiência...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.experience||"Não informado"})]}),e.jsxs("div",{children:[e.jsx(_n,{children:"Certificações"}),h?e.jsx(Zn,{value:A.certifications,onChange:ae=>S(fe=>({...fe,certifications:ae.target.value})),placeholder:"Liste suas certificações...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.certifications||"Não informado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_n,{children:"Valor por Hora (R$)"}),h?e.jsx(xt,{type:"number",value:A.hourlyRate,onChange:ae=>S(fe=>({...fe,hourlyRate:ae.target.value})),placeholder:"0.00"}):e.jsxs("p",{className:"font-medium",children:["R$ ",parseFloat(g.hourlyRate||"0").toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(_n,{children:"Localização"}),h?e.jsx(xt,{value:A.location,onChange:ae=>S(fe=>({...fe,location:ae.target.value})),placeholder:"Sua localização"}):e.jsx("p",{className:"font-medium",children:g.location||"Não informado"})]})]})]})]}),e.jsxs(lt,{className:"mb-6",children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(Tc,{className:"h-5 w-5"}),"Informações de Contato"]})}),e.jsxs(ct,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Tc,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),h?e.jsx(xt,{type:"email",value:A.email,onChange:ae=>S(fe=>({...fe,email:ae.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.email||j?.email||"").trim()||"Não informado"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Li,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Telefone"}),h?e.jsx(xt,{value:A.phone,onChange:ae=>S(fe=>({...fe,phone:ae.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.phone||j?.phone||"").trim()||"Não informado"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ns,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Endereço"}),h?e.jsx(xt,{value:A.location,onChange:ae=>S(fe=>({...fe,location:ae.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.location||g.location||"").trim()||"Não informado"})]})]})]})]}),e.jsx(lt,{className:`mb-6 ${be===3?"border-green-100 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20":"border-yellow-100 bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20"}`,children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${be===3?"bg-green-500":"bg-yellow-500"} rounded-full flex items-center justify-center shadow-lg`,children:e.jsx(po,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:be===3?"Conta Verificada":"Verificação em andamento"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:be===3?"Todos os dados foram validados":`Complete ${be}/3 etapas para verificar sua conta`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Email"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Telefone"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"CPF/CNPJ"})]})]})]}),e.jsx(Bs,{className:`${be===3?"bg-green-500":"bg-yellow-500"} text-white shadow-md hover:opacity-90 transition-opacity`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg",children:[be,"/3"]}),e.jsx("span",{children:be===3?"Verificado":"Pendente"})]})})]})})}),e.jsx(lt,{className:"mb-6 border-red-100 bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Fl,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Sair da Conta"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Encerre sua sessão e saia do aplicativo"})]})]}),e.jsxs(Me,{onClick:ee,variant:"destructive",className:"bg-red-500 hover:bg-red-600 text-white shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(Fl,{className:"h-4 w-4 mr-2"}),"Sair"]})]})})})]})]})})})}function PN(){const{user:s}=lr(),{toast:t}=Rs();sr();const[r,a]=P.useState([]),[i,l]=P.useState(!0),[d,u]=P.useState(""),[h,p]=P.useState("all");P.useEffect(()=>{(async()=>{if(s)try{l(!0);const q=await fetch(`${ht()}/api/professionals/${s.id}/proposals`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(q.ok){const V=await q.json();a(V)}else console.error("Erro ao buscar propostas:",q.status),t({title:"Erro",description:"Não foi possível carregar suas propostas",variant:"destructive"})}catch(q){console.error("Erro ao buscar propostas:",q),t({title:"Erro",description:"Erro ao carregar propostas",variant:"destructive"})}finally{l(!1)}})()},[s,t]);const v=r.filter(S=>{const q=S.serviceRequest.serviceType.toLowerCase().includes(d.toLowerCase())||S.serviceRequest.clientName.toLowerCase().includes(d.toLowerCase())||S.serviceRequest.description.toLowerCase().includes(d.toLowerCase()),V=h==="all"||S.status===h;return q&&V}),y=S=>{switch(S){case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},N=S=>{switch(S){case"accepted":return"Aceita";case"rejected":return"Rejeitada";case"completed":return"Concluída";case"pending":return"Pendente";default:return"Desconhecido"}},g=S=>{switch(S){case"accepted":return e.jsx(fs,{className:"h-4 w-4"});case"rejected":return e.jsx(Ai,{className:"h-4 w-4"});case"completed":return e.jsx(fs,{className:"h-4 w-4"});case"pending":return e.jsx(or,{className:"h-4 w-4"});default:return e.jsx(or,{className:"h-4 w-4"})}},C=S=>new Date(S).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),j=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(S)),T=S=>{t({title:"Chat",description:"Funcionalidade de chat será implementada em breve"})},A=async S=>{if(s)try{const q=await fetch(`${ht()}/api/service/${S.serviceRequestId}/complete`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({notes:"Serviço concluído com sucesso"})});if(q.ok)t({title:"Sucesso!",description:"Serviço marcado como concluído. Aguardando confirmação do cliente."}),window.location.reload();else{const V=await q.json();t({title:"Erro",description:V.error||"Erro ao confirmar conclusão do serviço",variant:"destructive"})}}catch(q){console.error("Erro ao confirmar conclusão:",q),t({title:"Erro",description:"Erro ao confirmar conclusão do serviço",variant:"destructive"})}};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-yellow-500"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando suas propostas..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ks,{href:"/provider-dashboard",children:e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(Zs,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Minhas Propostas"})]})}),e.jsxs("div",{className:"p-4 space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(xt,{placeholder:"Buscar por serviço, cliente ou descrição...",value:d,onChange:S=>u(S.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Me,{variant:h==="all"?"default":"outline",size:"sm",onClick:()=>p("all"),children:"Todas"}),e.jsx(Me,{variant:h==="pending"?"default":"outline",size:"sm",onClick:()=>p("pending"),children:"Pendentes"}),e.jsx(Me,{variant:h==="accepted"?"default":"outline",size:"sm",onClick:()=>p("accepted"),children:"Aceitas"}),e.jsx(Me,{variant:h==="rejected"?"default":"outline",size:"sm",onClick:()=>p("rejected"),children:"Rejeitadas"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx(lt,{children:e.jsx(ct,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Propostas"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),e.jsx(Ra,{className:"h-6 w-6 text-blue-600"})]})})}),e.jsx(lt,{children:e.jsx(ct,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(S=>S.status==="pending").length})]}),e.jsx(or,{className:"h-6 w-6 text-yellow-600"})]})})}),e.jsx(lt,{children:e.jsx(ct,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aceitas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(S=>S.status==="accepted").length})]}),e.jsx(fs,{className:"h-6 w-6 text-green-600"})]})})}),e.jsx(lt,{children:e.jsx(ct,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Concluídas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.filter(S=>S.status==="completed").length})]}),e.jsx(fs,{className:"h-6 w-6 text-blue-600"})]})})})]}),e.jsx("div",{className:"space-y-4",children:v.length===0?e.jsx(lt,{children:e.jsxs(ct,{className:"p-8 text-center",children:[e.jsx(Ra,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:d||h!=="all"?"Nenhuma proposta encontrada":"Nenhuma proposta ainda"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d||h!=="all"?"Tente ajustar os filtros de busca":"Você ainda não fez nenhuma proposta. Explore os serviços disponíveis!"}),!d&&h==="all"&&e.jsx(ks,{href:"/provider-dashboard",children:e.jsx(Me,{className:"mt-4",children:"Explorar Serviços"})})]})}):v.map(S=>e.jsx(lt,{className:"hover:shadow-md transition-shadow",children:e.jsx(ct,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S.serviceRequest.serviceType}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:S.serviceRequest.description})]}),e.jsx(Bs,{className:y(S.status),children:e.jsxs("div",{className:"flex items-center gap-1",children:[g(S.status),N(S.status)]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[S.serviceRequest.clientProfileImage?e.jsx("img",{src:`${ht()}${S.serviceRequest.clientProfileImage}`,alt:S.serviceRequest.clientName,className:"w-10 h-10 rounded-full object-cover",onError:q=>{const V=q.target;V.style.display="none";const Y=V.parentElement;Y&&(Y.innerHTML=`
                                  <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-bold">
                                      ${S.serviceRequest.clientName.charAt(0).toUpperCase()}
                                    </span>
                                  </div>
                                `)}}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:S.serviceRequest.clientName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.serviceRequest.clientName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Cliente desde ",new Date(S.serviceRequest.clientCreatedAt).getFullYear()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ln,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sua Proposta"}),e.jsx("p",{className:"font-semibold text-green-600",children:j(S.proposedPrice)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ln,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Orçamento Cliente"}),e.jsx("p",{className:"font-semibold text-blue-600",children:j(S.serviceRequest.budget)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(or,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tempo Estimado"}),e.jsx("p",{className:"font-semibold text-purple-600",children:S.estimatedTime})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(gr,{className:"h-5 w-5 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Agendada"}),e.jsx("p",{className:"font-semibold text-orange-600",children:S.serviceRequest.scheduledDate?new Date(S.serviceRequest.scheduledDate).toLocaleDateString("pt-BR"):"Não definida"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:S.serviceRequest.address})]}),S.message&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sua mensagem:"})," ",S.message]})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Proposta enviada em ",C(S.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col gap-2 lg:flex-shrink-0",children:[e.jsxs(Me,{variant:"outline",size:"sm",onClick:()=>T(),children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Chat com Cliente"]}),S.status==="accepted"&&S.serviceRequest?.status!=="awaiting_confirmation"&&e.jsxs(Me,{variant:"default",size:"sm",onClick:()=>A(S),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Confirmar Conclusão"]}),S.status==="accepted"&&S.serviceRequest?.status==="awaiting_confirmation"&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(or,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Serviço Concluído - Aguardando Confirmação do Cliente"})]})})]})]})})},S.id))})]})]})}function CN(){const t=Cp()?.id;lr();const{toast:r}=Rs(),[a,i]=P.useState(""),[l,d]=P.useState(""),[u,h]=P.useState(""),[p,v]=P.useState(!1),[y,N]=P.useState(!0),[g,C]=P.useState(null),[j,T]=P.useState(null),[A,S]=P.useState(!1),[q,V]=P.useState([]),[Y,ue]=P.useState(!1),[le,ee]=P.useState(!1),[te,we]=P.useState(""),[R,z]=P.useState(!1),[H,B]=P.useState(!1),[pe,he]=P.useState(""),[be,ne]=P.useState(!1),[xe,ae]=P.useState({id:parseInt(t||"0"),clientName:"",clientAvatar:"",clientProfileImage:"",serviceType:"",location:"",distance:0,urgency:"low",budget:0,description:"",timePosted:"",responses:0,preferredTime:"",scheduledTime:"",clientRating:0,previousServices:0,additionalDetails:"",additionalInfo:"",address:"",scheduledDate:"",status:"open",clientCreatedAt:""}),fe=(J,oe,ie,Te)=>{const Ae=(ie-J)*Math.PI/180,ge=(Te-oe)*Math.PI/180,G=Math.sin(Ae/2)*Math.sin(Ae/2)+Math.cos(J*Math.PI/180)*Math.cos(ie*Math.PI/180)*Math.sin(ge/2)*Math.sin(ge/2);return 6371*(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)))},E=()=>new Promise(J=>{if(!navigator.geolocation){J(null);return}navigator.geolocation.getCurrentPosition(oe=>{const{latitude:ie,longitude:Te}=oe.coords;J([ie,Te])},oe=>{J(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),W=async J=>{try{const oe=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(J)}&limit=1&countrycodes=br`,{method:"GET",headers:{Accept:"application/json","User-Agent":"LifeBee-App/1.0"}});if(!oe.ok)return null;const ie=await oe.json();if(ie&&ie.length>0){const{lat:Te,lon:Q}=ie[0];return[parseFloat(Te),parseFloat(Q)]}return null}catch{return null}};P.useEffect(()=>{(async()=>{if(!t){C("ID do serviço não fornecido"),N(!1);return}try{N(!0),C(null);const oe=await fetch(`${ht()}/api/service-requests/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!oe.ok)throw new Error(`Erro ao carregar serviço: ${oe.status}`);const ie=await oe.json(),Te={id:ie.id,clientName:ie.clientName||"Cliente",clientAvatar:ie.clientProfileImage||"",clientProfileImage:ie.clientProfileImage||"",serviceType:ie.serviceType||"Serviço",location:ie.address||"",distance:0,urgency:ie.urgency||"low",budget:ie.budget||0,description:ie.description||"Descrição não disponível",timePosted:ie.createdAt||"",responses:ie.responses||0,preferredTime:ie.scheduledTime||"Não definido",scheduledTime:ie.scheduledTime||"Não definido",clientRating:5,previousServices:0,additionalDetails:ie.description||"",additionalInfo:ie.description||"",address:ie.address||"Endereço não informado",scheduledDate:ie.scheduledDate||"",status:ie.status||"open",clientCreatedAt:ie.clientCreatedAt||""};if(ae(Te),Te.address&&Te.address!=="Endereço não informado"){S(!0);try{const Q=await E();T(Q);const Ae=await W(Te.address);if(Ae&&Q){const ge=fe(Q[0],Q[1],Ae[0],Ae[1]);ae(G=>({...G,distance:Math.round(ge*10)/10}))}else ae(ge=>({...ge,distance:-1}))}catch{ae(Ae=>({...Ae,distance:-1}))}finally{S(!1)}}}catch(oe){console.error("Erro ao carregar serviço:",oe),C(oe instanceof Error?oe.message:"Erro desconhecido"),r({title:"Erro",description:"Não foi possível carregar os detalhes do serviço",variant:"destructive"})}finally{N(!1)}})()},[t,r]),P.useEffect(()=>{(async()=>{if(t)try{ue(!0);const oe=await fetch(`${ht()}/api/service-requests/${t}/offers`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(oe.ok){const ie=await oe.json();V(ie)}else console.error("Erro ao buscar propostas:",oe.status)}catch(oe){console.error("Erro ao buscar propostas:",oe)}finally{ue(!1)}})()},[t]);const Z=async()=>{if(a.trim()&&l&&u)try{const J=await fetch(`${ht()}/api/service-requests/${t}/offers`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({proposedPrice:parseFloat(l),estimatedTime:u,message:a})});if(J.ok){const oe=await J.json();r({title:"Sucesso!",description:"Sua proposta foi enviada com sucesso"});const ie=await fetch(`${ht()}/api/service-requests/${t}/offers`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ie.ok){const Te=await ie.json();V(Te)}v(!0)}else{const oe=await J.json();r({title:"Erro",description:oe.message||"Não foi possível enviar a proposta",variant:"destructive"})}}catch{r({title:"Erro",description:"Não foi possível enviar a proposta",variant:"destructive"})}},X=async()=>{if(!te.trim()){r({title:"Erro",description:"Digite uma mensagem antes de enviar",variant:"destructive"});return}z(!0);try{await new Promise(J=>setTimeout(J,1e3)),r({title:"Sucesso",description:"Mensagem enviada com sucesso!"}),we(""),ee(!1)}catch(J){console.error("Erro ao enviar mensagem:",J),r({title:"Erro",description:"Erro ao enviar mensagem. Tente novamente.",variant:"destructive"})}finally{z(!1)}},re=async()=>{if(!pe.trim()){r({title:"Erro",description:"Digite uma mensagem antes de enviar",variant:"destructive"});return}ne(!0);try{await new Promise(J=>setTimeout(J,1e3)),r({title:"Sucesso",description:"Mensagem enviada com sucesso!"}),he(""),B(!1)}catch(J){console.error("Erro ao enviar mensagem:",J),r({title:"Erro",description:"Erro ao enviar mensagem. Tente novamente.",variant:"destructive"})}finally{ne(!1)}},de=J=>{switch(J){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},Ne=J=>{const oe=new Date(J),Te=Math.floor((new Date().getTime()-oe.getTime())/(1e3*60));return Te<1?"agora mesmo":Te<60?`há ${Te} min`:Te<1440?`há ${Math.floor(Te/60)}h`:`há ${Math.floor(Te/1440)} dias`};return y?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-yellow-500"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando detalhes do serviço..."})]})}):g?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx(mo,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Erro ao carregar serviço"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g}),e.jsx(ks,{href:"/provider-dashboard",children:e.jsxs(Me,{children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Voltar ao Dashboard"]})})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ks,{href:"/provider-dashboard",children:e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(Zs,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Detalhes do Serviço"})]})}),e.jsx("div",{className:"p-3 sm:p-4 space-y-4 sm:space-y-6 max-w-4xl mx-auto",children:p?e.jsx(lt,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:e.jsxs(ct,{className:"p-4 sm:p-6 text-center",children:[e.jsx(fs,{className:"h-12 w-12 sm:h-16 sm:w-16 text-green-600 mx-auto mb-3 sm:mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-green-800 dark:text-green-200 mb-2",children:"Oferta Enviada com Sucesso!"}),e.jsxs("p",{className:"text-sm sm:text-base text-green-700 dark:text-green-300 mb-4",children:["Sua proposta foi enviada para ",xe.clientName,". Você receberá uma notificação quando ela responder."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(ks,{href:"/provider-dashboard",children:e.jsx(Me,{variant:"outline",className:"h-10 sm:h-11 text-sm sm:text-base",children:"Voltar ao Dashboard"})}),e.jsxs(il,{open:le,onOpenChange:ee,children:[e.jsx(Qd,{asChild:!0,children:e.jsxs(Me,{className:"h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})}),e.jsxs(go,{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700",children:[e.jsx(xo,{children:e.jsxs(vo,{className:"text-lg sm:text-xl",children:["Mensagem para ",xe.clientName]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Zn,{placeholder:"Digite uma mensagem adicional...",rows:4,className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]",value:te,onChange:J=>we(J.target.value)}),e.jsx(Me,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",onClick:X,disabled:R,children:R?e.jsxs(e.Fragment,{children:[e.jsx(pr,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})})]})]})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[xe.clientProfileImage?e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${ht()}${xe.clientProfileImage}`,alt:xe.clientName||"Cliente",className:"w-full h-full object-cover",onError:J=>{const oe=J.target;oe.style.display="none";const ie=oe.parentElement;ie&&(ie.innerHTML=`
                                <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                  <span class="text-white text-xl font-bold">
                                    ${xe.clientName?xe.clientName.charAt(0).toUpperCase():"C"}
                                  </span>
                                </div>
                              `)}})}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:xe.clientName?xe.clientName.charAt(0).toUpperCase():"C"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:xe.clientName||"Cliente"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(cn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:xe.clientRating||"5.0"}),e.jsx("span",{className:"text-gray-500",children:"•"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[xe.previousServices||"0"," serviços"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente desde ",xe.clientCreatedAt?new Date(xe.clientCreatedAt).getFullYear():"2024"]})]})]}),e.jsx(Bs,{className:de(xe.urgency),children:xe.status==="open"?"Aberta":xe.status==="in_progress"?"Em Andamento":xe.status==="completed"?"Concluída":"Normal"})]})}),e.jsxs(ct,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-primary mb-2",children:xe.serviceType||"Serviço Solicitado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:xe.description||"Descrição do serviço não disponível"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ln,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Orçamento"}),e.jsxs("div",{className:"font-semibold text-green-600",children:["R$ ",xe.budget?typeof xe.budget=="string"?parseFloat(xe.budget).toFixed(2):xe.budget.toFixed(2):"0,00"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Ns,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Distância"}),e.jsx("div",{className:"font-semibold text-blue-600",children:A?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(pr,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Calculando..."})]}):xe.distance===-1?"Não disponível":`${xe.distance||"0"} km`})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(or,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Horário"}),e.jsx("div",{className:"font-semibold text-purple-600",children:xe.preferredTime||"Não definido"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(In,{className:"h-5 w-5 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Respostas"}),e.jsx("div",{className:"font-semibold text-orange-600",children:xe.responses||0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-gray-500"}),"Endereço"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:xe.address||"Endereço não informado"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4 text-gray-500"}),"Data"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:xe.scheduledDate?new Date(xe.scheduledDate).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Data não definida"})]}),xe.additionalInfo&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4 text-gray-500"}),"Detalhes Adicionais"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:xe.additionalInfo})]})]})]})]}),e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(Ra,{className:"h-5 w-5"}),"Fazer Proposta"]})}),e.jsxs(ct,{className:"space-y-4 p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Valor Proposto (R$)"}),e.jsx(xt,{type:"number",placeholder:"120.00",value:l,onChange:J=>d(J.target.value),className:"h-10 sm:h-11 text-sm sm:text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Tempo Estimado"}),e.jsx(xt,{placeholder:"1 hora",value:u,onChange:J=>h(J.target.value),className:"h-10 sm:h-11 text-sm sm:text-base"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Mensagem da Proposta"}),e.jsx(Zn,{placeholder:"Olá! Sou fisioterapeuta especializada em reabilitação respiratória pós-COVID. Tenho experiência com pacientes na sua faixa etária e posso levar equipamentos específicos para o atendimento domiciliar...",rows:4,value:a,onChange:J=>i(J.target.value),className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]"})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(mo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Dicas para uma boa proposta:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Demonstre sua experiência específica no tipo de serviço"}),e.jsx("li",{children:"• Mencione equipamentos ou materiais que você possui"}),e.jsx("li",{children:"• Seja claro sobre disponibilidade e tempo de resposta"}),e.jsx("li",{children:"• Ofereça um valor competitivo mas justo"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[e.jsxs(Me,{onClick:Z,disabled:!a.trim()||!l||!u,className:"flex-1 h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Enviar Proposta"]}),e.jsxs(il,{open:H,onOpenChange:B,children:[e.jsx(Qd,{asChild:!0,children:e.jsxs(Me,{variant:"outline",className:"h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Observações"]})}),e.jsxs(go,{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700",children:[e.jsx(xo,{children:e.jsxs(vo,{className:"text-lg sm:text-xl",children:["Observações para ",xe.clientName]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Zn,{placeholder:"Faça uma pergunta sobre o serviço...",rows:4,className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]",value:pe,onChange:J=>he(J.target.value)}),e.jsx(Me,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",onClick:re,disabled:be,children:be?e.jsxs(e.Fragment,{children:[e.jsx(pr,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})})]})]})]})]})]})]}),e.jsxs(lt,{children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Outras Propostas"}),Y&&e.jsx(pr,{className:"h-4 w-4 animate-spin text-gray-500"})]})}),e.jsx(ct,{children:q.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(In,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:Y?"Carregando propostas...":"Nenhuma proposta ainda"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Seja o primeiro a fazer uma proposta!"})]}):e.jsx("div",{className:"space-y-3",children:q.map(J=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[J.professionalProfileImage?e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:e.jsx("img",{src:`${ht()}${J.professionalProfileImage}`,alt:J.professionalName||"Profissional",className:"w-full h-full object-cover",onError:oe=>{const ie=oe.target;ie.style.display="none";const Te=ie.parentElement;Te&&(Te.innerHTML=`
                                       <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                                         <span class="text-white text-xs font-bold">
                                           ${J.professionalName?J.professionalName.charAt(0).toUpperCase():"P"}
                                         </span>
                                       </div>
                                     `)}})}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:J.professionalName?J.professionalName.charAt(0).toUpperCase():"P"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:J.professionalName||"Profissional"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["⭐ ",J.professionalRating||"5.0"," • ",J.professionalTotalReviews||"0"," serviços"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-sm",children:["R$ ",J.proposedPrice?parseFloat(J.proposedPrice).toFixed(2):"0,00"]}),e.jsx("p",{className:"text-xs text-gray-500",children:Ne(J.createdAt)})]})]},J.id))})})]})]})})]})}function LN(){console.log("Servico component rendering");const[,s]=sr(),{toast:t}=Rs(),{isAuthenticated:r,isLoading:a,user:i}=lr(),[l,d]=P.useState(""),[u,h]=P.useState(""),[p,v]=P.useState(""),[y,N]=P.useState(""),[g,C]=P.useState(""),[j,T]=P.useState(""),[A,S]=P.useState(""),[q,V]=P.useState(""),[Y,ue]=P.useState(""),[le,ee]=P.useState(""),[te,we]=P.useState(""),[R,z]=P.useState(""),[H,B]=P.useState(!1),[pe,he]=P.useState(!1),[be,ne]=P.useState(!1),xe=J=>!!(J&&/.+@.+\..+/.test(J.trim())),ae=J=>{const oe=(J||"").replace(/\D/g,"");return oe.length===11&&oe[0]!=="0"&&oe[1]!=="0"&&oe[2]==="9"},fe=J=>{const ie=(J||"").replace(/\D/g,"");if(ie.length!==11||/^(\d)\1{10}$/.test(ie))return!1;const Te=Q=>{let Ae=0;for(let G=0;G<Q;G++)Ae+=parseInt(ie[G],10)*(Q+1-G);const ge=Ae*10%11;return ge===10?0:ge};return Te(9)===parseInt(ie[9],10)&&Te(10)===parseInt(ie[10],10)},E=()=>{const J=xe(i?.email),oe=ae(i?.phone),ie=i?.taxpayerId,Te=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",Q=fe(ie||Te),Ae=[J,oe,Q].filter(Boolean).length;return{verified:Ae===3,steps:Ae}};if(P.useEffect(()=>{if(console.log("Auth state:",{isAuthenticated:r,isLoading:a}),!a&&!r&&(t({title:"Acesso Negado",description:"Você precisa estar logado para acessar esta página",variant:"destructive"}),s("/")),!a&&r){const{verified:J,steps:oe}=E();J||(t({title:"Verificação em andamento",description:`Conclua seu cadastro (${oe}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile"))}},[r,a,s,t]),a)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pr,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Redirecionando para login..."})})});const W=[{value:"acompanhante_hospitalar",label:"Acompanhante Hospitalar",icon:"🏥"}],Z=async J=>{J.preventDefault(),B(!0),he(!1);const oe=localStorage.getItem("token");if(!oe){t({title:"Erro",description:"Você precisa estar logado para solicitar um serviço",variant:"destructive"}),B(!1);return}try{const ie=await fetch(`${ht()}/api/service-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe}`},body:JSON.stringify({category:l,serviceType:u,description:p,address:Ne(),scheduledDate:le,scheduledTime:te,budget:R?parseFloat(R):null}),credentials:"include"});if(ie.ok){const Te=await ie.json();he(!0),t({title:"Sucesso!",description:"Sua solicitação foi enviada com sucesso. Profissionais serão notificados."}),d(""),h(""),v(""),N(""),C(""),T(""),S(""),V(""),ue(""),ee(""),we(""),z("")}else{const Te=await ie.json();t({title:"Erro",description:Te.message||"Erro ao enviar solicitação",variant:"destructive"})}}catch{t({title:"Erro",description:"Erro de conexão. Tente novamente.",variant:"destructive"})}finally{B(!1)}},X=J=>W.find(oe=>oe.value===J)?.icon||"📋",re=async J=>{if(J.length===8){ne(!0);try{const ie=await(await fetch(`https://viacep.com.br/ws/${J}/json/`)).json();ie.erro?t({title:"CEP não encontrado",description:"Verifique se o CEP está correto",variant:"destructive"}):(C(ie.logradouro||""),S(ie.bairro||""),V(ie.localidade||""),ue(ie.uf||""),t({title:"Endereço encontrado!",description:"Endereço preenchido automaticamente pelo CEP",variant:"default"}))}catch(oe){console.error("Erro ao buscar CEP:",oe),t({title:"Erro",description:"Erro ao buscar endereço pelo CEP",variant:"destructive"})}finally{ne(!1)}}},de=J=>J.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"),Ne=()=>[g,j,A,q,Y].filter(Boolean).join(", ");return console.log("Rendering Servico component, auth state:",{isAuthenticated:r,isLoading:a}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col pb-24",children:[e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Solicitar Serviço"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preencha os dados abaixo para solicitar um profissional"})]}),e.jsxs(lt,{className:"w-full",children:[e.jsx(rs,{children:e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-5 w-5"}),"Nova Solicitação"]})}),e.jsxs(ct,{children:[e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Categoria do Serviço"}),e.jsxs(Hl,{value:l,onValueChange:d,required:!0,children:[e.jsx(cl,{className:"bg-white",children:e.jsx($l,{placeholder:"Selecione uma categoria"})}),e.jsx(dl,{className:"bg-white",children:W.map(J=>e.jsx(ho,{value:J.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:J.icon}),e.jsx("span",{children:J.label})]})},J.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Tipo de Serviço"}),e.jsx(xt,{placeholder:"Ex: Fisioterapia domiciliar, Acompanhamento hospitalar...",value:u,onChange:J=>h(J.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Descrição Detalhada"}),e.jsx(Zn,{placeholder:"Descreva o serviço que precisa, sintomas, necessidades específicas...",value:p,onChange:J=>v(J.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(Ns,{className:"h-4 w-4 inline mr-1"}),"Endereço"]}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{placeholder:"CEP (00000-000)",value:y,onChange:J=>{const oe=de(J.target.value);N(oe),oe.length===9&&re(oe.replace(/\D/g,""))},maxLength:9,required:!0}),be&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(pr,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(xt,{placeholder:"Rua/Avenida",value:g,onChange:J=>C(J.target.value),required:!0})}),e.jsx("div",{children:e.jsx(xt,{placeholder:"Número",value:j,onChange:J=>T(J.target.value),required:!0})})]}),e.jsx(xt,{placeholder:"Bairro",value:A,onChange:J=>S(J.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(xt,{placeholder:"Cidade",value:q,onChange:J=>V(J.target.value),required:!0}),e.jsx(xt,{placeholder:"Estado",value:Y,onChange:J=>ue(J.target.value),maxLength:2,required:!0})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Endereço Completo"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:Ne()||"Preencha os campos acima ou digite o CEP para preenchimento automático"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Data"}),e.jsx(xt,{type:"date",value:le,onChange:J=>ee(J.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Hora"}),e.jsx(xt,{type:"time",value:te,onChange:J=>we(J.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Orçamento Previsto (Opcional)"}),e.jsx(xt,{type:"number",placeholder:"R$ 0,00",value:R,onChange:J=>z(J.target.value),min:"0",step:"0.01"})]}),e.jsx(Me,{type:"submit",className:"w-full",disabled:H,size:"lg",children:H?e.jsxs(e.Fragment,{children:[e.jsx(pr,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"mr-2 h-4 w-4"}),"Solicitar Serviço"]})})]}),pe&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800 dark:text-green-200",children:[e.jsx(fs,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Solicitação Enviada!"})]}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 text-sm mt-1",children:["Profissionais da categoria ",X(l)," serão notificados sobre sua solicitação."]})]})]})]})]})}),e.jsx(Da,{hidePlus:!0})]})}var X0="AlertDialog",[AN,fj]=wo(X0,[fm]),Xa=fm(),ex=s=>{const{__scopeAlertDialog:t,...r}=s,a=Xa(t);return e.jsx(Xf,{...a,...r,modal:!0})};ex.displayName=X0;var TN="AlertDialogTrigger",tx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Xa(r);return e.jsx(em,{...i,...a,ref:t})});tx.displayName=TN;var EN="AlertDialogPortal",sx=s=>{const{__scopeAlertDialog:t,...r}=s,a=Xa(t);return e.jsx(Qf,{...a,...r})};sx.displayName=EN;var MN="AlertDialogOverlay",rx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Xa(r);return e.jsx(Sh,{...i,...a,ref:t})});rx.displayName=MN;var tl="AlertDialogContent",[IN,RN]=AN(tl),ON=Gf("AlertDialogContent"),nx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:a,...i}=s,l=Xa(r),d=P.useRef(null),u=Lr(t,d),h=P.useRef(null);return e.jsx(ov,{contentName:tl,titleName:ax,docsSlug:"alert-dialog",children:e.jsx(IN,{scope:r,cancelRef:h,children:e.jsxs(kh,{role:"alertdialog",...l,...i,ref:u,onOpenAutoFocus:Gt(i.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(ON,{children:a}),e.jsx(FN,{contentRef:d})]})})})});nx.displayName=tl;var ax="AlertDialogTitle",ix=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Xa(r);return e.jsx(Ch,{...i,...a,ref:t})});ix.displayName=ax;var ox="AlertDialogDescription",lx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Xa(r);return e.jsx(Lh,{...i,...a,ref:t})});lx.displayName=ox;var DN="AlertDialogAction",cx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Xa(r);return e.jsx(Ph,{...i,...a,ref:t})});cx.displayName=DN;var dx="AlertDialogCancel",hx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,{cancelRef:i}=RN(dx,r),l=Xa(r),d=Lr(t,i);return e.jsx(Ph,{...l,...a,ref:d})});hx.displayName=dx;var FN=({contentRef:s})=>{const t=`\`${tl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${tl}\` by passing a \`${ox}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${tl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return P.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},zN=ex,BN=tx,qN=sx,ux=rx,fx=nx,mx=cx,px=hx,gx=ix,xx=lx;const vx=zN,yx=BN,HN=qN,bx=P.forwardRef(({className:s,...t},r)=>e.jsx(ux,{className:ut("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));bx.displayName=ux.displayName;const nu=P.forwardRef(({className:s,...t},r)=>e.jsxs(HN,{children:[e.jsx(bx,{}),e.jsx(fx,{ref:r,className:ut("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));nu.displayName=fx.displayName;const au=({className:s,...t})=>e.jsx("div",{className:ut("flex flex-col space-y-2 text-center sm:text-left",s),...t});au.displayName="AlertDialogHeader";const iu=({className:s,...t})=>e.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});iu.displayName="AlertDialogFooter";const ou=P.forwardRef(({className:s,...t},r)=>e.jsx(gx,{ref:r,className:ut("text-lg font-semibold",s),...t}));ou.displayName=gx.displayName;const lu=P.forwardRef(({className:s,...t},r)=>e.jsx(xx,{ref:r,className:ut("text-sm text-muted-foreground",s),...t}));lu.displayName=xx.displayName;const cu=P.forwardRef(({className:s,...t},r)=>e.jsx(mx,{ref:r,className:ut(Wh(),s),...t}));cu.displayName=mx.displayName;const du=P.forwardRef(({className:s,...t},r)=>e.jsx(px,{ref:r,className:ut(Wh({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));du.displayName=px.displayName;function $N(){const[,s]=sr(),{user:t}=lr(),{toast:r}=Rs(),[a,i]=P.useState([]),[l,d]=P.useState(!0),[u,h]=P.useState(null),p=async()=>{if(t){d(!0);try{const j=localStorage.getItem("token");if(console.log("👤 Usuário:",t),!j){r({title:"Erro de Autenticação",description:"Token não encontrado. Faça login novamente.",variant:"destructive"});return}const A=`${ht()}/api/service-requests/my-requests`;console.log("🌐 Fazendo requisição para:",A),console.log("🔑 Token:",j.substring(0,20)+"...");const S=await fetch(A,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(console.log("📡 Resposta do servidor:",S.status,S.statusText),S.ok){const q=await S.json();console.log("✅ Dados recebidos:",q),i(q)}else{console.error("❌ Erro ao buscar solicitações:",S.status);const q=await S.text();console.error("📄 Resposta de erro:",q),r({title:"Erro",description:"Erro ao carregar suas solicitações.",variant:"destructive"})}}catch(j){console.error("💥 Erro ao buscar solicitações:",j),r({title:"Erro de Conexão",description:"Erro ao conectar com o servidor.",variant:"destructive"})}finally{d(!1)}}},v=async j=>{h(j);try{const T=localStorage.getItem("token");if(!T){r({title:"Erro de Autenticação",description:"Token não encontrado. Faça login novamente.",variant:"destructive"});return}const A=await fetch(`${ht()}/api/service-requests/${j}`,{method:"DELETE",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(A.ok)i(S=>S.filter(q=>q.id!==j)),r({title:"Solicitação Excluída",description:"Sua solicitação foi excluída com sucesso."});else{const S=await A.json();r({title:"Erro",description:S.message||"Erro ao excluir solicitação.",variant:"destructive"})}}catch(T){console.error("Erro ao excluir solicitação:",T),r({title:"Erro de Conexão",description:"Erro ao conectar com o servidor.",variant:"destructive"})}finally{h(null)}};P.useEffect(()=>{p()},[t]);const y=j=>{switch(j){case"open":return"bg-blue-100 text-blue-800 border-blue-200";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=j=>{switch(j){case"open":return"Aberta";case"in_progress":return"Em Andamento";case"completed":return"Concluída";case"cancelled":return"Cancelada";default:return"Desconhecido"}},g=j=>{switch(j){case"open":return e.jsx(lo,{className:"h-4 w-4"});case"in_progress":return e.jsx(or,{className:"h-4 w-4"});case"completed":return e.jsx(fs,{className:"h-4 w-4"});case"cancelled":return e.jsx(Ai,{className:"h-4 w-4"});default:return e.jsx(Xm,{className:"h-4 w-4"})}},C=j=>{switch(j){case"acompanhante_hospitalar":return"Acompanhante Hospitalar";default:return j}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col pb-24",children:[e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"mr-2",children:e.jsx(Zs,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Minhas Solicitações"})]}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando suas solicitações..."})]}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(Or,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Nenhuma solicitação encontrada"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Você ainda não fez nenhuma solicitação de serviço"}),e.jsx(Me,{onClick:()=>{const j=!!(t?.email&&/.+@.+\..+/.test(t.email.trim())),T=(t?.phone||"").replace(/\D/g,""),A=T.length===11&&T[0]!=="0"&&T[1]!=="0"&&T[2]==="9",S=ue=>{const le=ue.replace(/\D/g,"");if(le.length!==11||/^(\d)\1{10}$/.test(le))return!1;const ee=te=>{let we=0;for(let z=0;z<te;z++)we+=parseInt(le[z],10)*(te+1-z);const R=we*10%11;return R===10?0:R};return ee(9)===parseInt(le[9],10)&&ee(10)===parseInt(le[10],10)},q=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",V=S(q),Y=[j,A,V].filter(Boolean).length;if(Y!==3){r({title:"Verificação em andamento",description:`Conclua seu cadastro (${Y}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile");return}s("/servico")},children:"Fazer Primeira Solicitação"})]}):e.jsx("div",{className:"space-y-4",children:a.map(j=>e.jsxs(lt,{className:"border-l-4 border-l-primary",children:[e.jsx(rs,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Solicitação #",j.id]}),e.jsx(Bs,{variant:"outline",className:`text-xs ${y(j.status)}`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[g(j.status),N(j.status)]})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:C(j.category)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{variant:"outline",size:"sm",onClick:()=>s(`/service-offer/${j.id}`),disabled:j.status!=="open",children:e.jsx(lo,{className:"h-4 w-4"})}),e.jsxs(vx,{children:[e.jsx(yx,{asChild:!0,children:e.jsx(Me,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:j.status!=="open"||u===j.id,children:u===j.id?e.jsx(pr,{className:"h-4 w-4 animate-spin"}):e.jsx(nl,{className:"h-4 w-4"})})}),e.jsxs(nu,{children:[e.jsxs(au,{children:[e.jsx(ou,{children:"Excluir Solicitação"}),e.jsx(lu,{children:"Tem certeza que deseja excluir esta solicitação? Esta ação não pode ser desfeita e todos os profissionais que responderam não poderão mais ver sua solicitação."})]}),e.jsxs(iu,{children:[e.jsx(du,{children:"Cancelar"}),e.jsx(cu,{onClick:()=>v(j.id),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})]})}),e.jsx(ct,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary mb-1",children:j.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 truncate",children:j.address})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:new Date(j.scheduledDate).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(or,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:j.scheduledTime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["R$ ",j.budget&&!isNaN(Number(j.budget))?Number(j.budget).toFixed(2):"Não informado"]})]})]}),j.responses!==void 0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Or,{className:"h-4 w-4"}),e.jsxs("span",{children:[j.responses," profissional(is) responderam"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Criada em ",new Date(j.createdAt).toLocaleDateString("pt-BR")," às"," ",new Date(j.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})})]},j.id))}),e.jsx("div",{className:"mt-6",children:e.jsx(Me,{onClick:()=>{const j=!!(t?.email&&/.+@.+\..+/.test(t.email.trim())),T=(t?.phone||"").replace(/\D/g,""),A=T.length===11&&T[0]!=="0"&&T[1]!=="0"&&T[2]==="9",S=ue=>{const le=ue.replace(/\D/g,"");if(le.length!==11||/^(\d)\1{10}$/.test(le))return!1;const ee=te=>{let we=0;for(let z=0;z<te;z++)we+=parseInt(le[z],10)*(te+1-z);const R=we*10%11;return R===10?0:R};return ee(9)===parseInt(le[9],10)&&ee(10)===parseInt(le[10],10)},q=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",V=S(q),Y=[j,A,V].filter(Boolean).length;if(Y!==3){r({title:"Verificação em andamento",description:`Conclua seu cadastro (${Y}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile");return}s("/servico")},className:"w-full",children:"Nova Solicitação"})})]})}),e.jsx(Da,{})]})}function UN({isOpen:s,onClose:t,serviceRequestId:r,onRatingSubmitted:a}){const[i,l]=P.useState(0),[d,u]=P.useState(0),[h,p]=P.useState(""),[v,y]=P.useState(!1),{toast:N}=Rs(),g=S=>{l(S)},C=S=>{u(S)},j=()=>{u(0)},T=async()=>{if(i===0){N({title:"Avaliação obrigatória",description:"Por favor, selecione uma avaliação de 1 a 5 estrelas.",variant:"destructive"});return}y(!0);try{const S=localStorage.getItem("token"),q=await fetch(`${ht()}/api/service/${r}/review`,{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({rating:i,comment:h.trim()||null})});if(q.ok)N({title:"Avaliação enviada!",description:"Obrigado por avaliar o serviço. Sua opinião é muito importante para nós."}),a(),t();else{const V=await q.json();N({title:"Erro ao enviar avaliação",description:V.error||"Não foi possível enviar sua avaliação. Tente novamente.",variant:"destructive"})}}catch(S){console.error("Erro ao enviar avaliação:",S),N({title:"Erro de conexão",description:"Erro de conexão ao enviar avaliação. Verifique sua internet e tente novamente.",variant:"destructive"})}finally{y(!1)}},A=()=>{v||(l(0),p(""),t())};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Avaliar Serviço"}),e.jsx("button",{onClick:A,disabled:v,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:e.jsx(fl,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Como você avalia o serviço prestado pelo profissional?"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(S=>e.jsx("button",{onClick:()=>g(S),onMouseEnter:()=>C(S),onMouseLeave:j,disabled:v,className:"transition-all duration-200 transform hover:scale-110 disabled:opacity-50",children:e.jsx(cn,{size:40,className:`${S<=(d||i)?"fill-yellow-400 text-yellow-400":"text-gray-300"} transition-colors duration-200`})},S))})}),i>0&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("p",{className:"text-lg font-medium text-gray-800",children:[i===1&&"Péssimo",i===2&&"Ruim",i===3&&"Regular",i===4&&"Bom",i===5&&"Excelente"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i," ",i===1?"estrela":"estrelas"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentário (opcional)"}),e.jsx("textarea",{id:"comment",value:h,onChange:S=>p(S.target.value),placeholder:"Conte-nos sobre sua experiência com o serviço...",disabled:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none h-24 disabled:opacity-50"})]}),e.jsx("button",{onClick:T,disabled:i===0||v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Enviando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ra,{size:20}),e.jsx("span",{children:"Enviar Avaliação"})]})})]})]})}):null}function WN({serviceOfferId:s,serviceRequestId:t,amount:r,serviceName:a,professionalName:i,onPaymentSuccess:l}){const[d,u]=P.useState(!1),[h,p]=P.useState(!1),[v,y]=P.useState(null),{user:N}=lr(),{toast:g}=Rs(),C=async()=>{if(!N){g({title:"Erro",description:"Você precisa estar logado para fazer o pagamento",variant:"destructive"});return}u(!0);try{const S=localStorage.getItem("token"),q=await fetch(`${ht()}/api/payment/create-preference`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({serviceOfferId:s,serviceRequestId:t})}),V=await q.json();if(q.ok&&V.success){const Y=V.sandboxInitPoint||V.initPoint;y(Y),p(!0),g({title:"Pagamento Criado",description:"Redirecionando para o Mercado Pago..."})}else throw new Error(V.error||"Erro ao criar pagamento")}catch(S){console.error("Erro ao criar pagamento:",S),g({title:"Erro no Pagamento",description:S instanceof Error?S.message:"Erro interno do servidor",variant:"destructive"})}finally{u(!1)}},j=()=>{v&&(window.open(v,"_blank"),p(!1),setTimeout(()=>{l&&l()},3e3))},T=r*.05,A=r-T;return e.jsxs(e.Fragment,{children:[e.jsxs(Me,{onClick:C,disabled:d,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:[d?e.jsx(pr,{className:"h-4 w-4 animate-spin"}):e.jsx(Dl,{className:"h-4 w-4"}),d?"Criando pagamento...":`Pagar R$ ${r.toFixed(2)}`]}),e.jsx(il,{open:h,onOpenChange:p,children:e.jsxs(go,{className:"max-w-md max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"relative -m-6 mb-4 p-4 bg-gradient-to-r from-blue-500 to-blue-600 rounded-t-lg",children:e.jsxs(xo,{children:[e.jsxs(vo,{className:"flex items-center gap-2 text-white text-lg font-bold",children:[e.jsx(po,{className:"h-5 w-5"}),"Pagamento Seguro"]}),e.jsx(Zh,{className:"text-blue-100 text-sm",children:"Mercado Pago • Rápido e Seguro"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ln,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-900 text-sm",children:"Resumo"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Serviço:"}),e.jsx("span",{className:"font-medium text-gray-900 max-w-[150px] truncate",children:a})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Profissional:"}),e.jsx("span",{className:"font-medium text-gray-900 max-w-[150px] truncate",children:i})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["R$ ",r.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["Taxa LifeBee (5%): R$ ",T.toFixed(2)]}),e.jsxs("span",{children:["Profissional: R$ ",A.toFixed(2)]})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dl,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800 text-sm",children:"Meios de Pagamentos"}),e.jsx("p",{className:"text-xs text-blue-600",children:"PIX, Cartões, Boleto e Débito Online"})]})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 text-sm",children:"Pagamento Protegido"}),e.jsx("p",{className:"text-xs text-green-600",children:"SSL • Criptografia • PCI Compliance"})]})]})}),e.jsxs(Me,{onClick:j,className:"w-full h-12 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200",children:[e.jsx(L1,{className:"h-4 w-4 mr-2"}),"Continuar no Mercado Pago"]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"🔒 Você será redirecionado e retornará automaticamente após o pagamento"})]})]})})]})}function VN(){const[s,t]=sr(),{user:r}=lr(),{toast:a}=Rs(),[i,l]=P.useState([]),[d,u]=P.useState([]),[h,p]=P.useState(!0),[v,y]=P.useState("requests"),[N,g]=P.useState(null),[C,j]=P.useState(null),[T,A]=P.useState(null),[S,q]=P.useState(""),[V,Y]=P.useState("all"),[ue,le]=P.useState({}),[ee,te]=P.useState(!1),[we,R]=P.useState(null),z=(Q,Ae=0)=>{if(typeof Q=="number"&&!Number.isNaN(Q))return Q;const ge=parseFloat(String(Q??""));return Number.isNaN(ge)?Ae:ge},H=P.useCallback(Q=>{const Ae=Q.replace(/\D/g,"");if(Ae.length!==11||/^(\d)\1{10}$/.test(Ae))return!1;const ge=G=>{let We=0;for(let Fe=0;Fe<G;Fe++)We+=parseInt(Ae[Fe],10)*(G+1-Fe);const et=We*10%11;return et===10?0:et};return ge(9)===parseInt(Ae[9],10)&&ge(10)===parseInt(Ae[10],10)},[]),B=P.useCallback(Q=>{const Ae=Q.replace(/\D/g,"");return Ae.length===11&&Ae[0]!=="0"&&Ae[1]!=="0"&&Ae[2]==="9"},[]),pe=P.useCallback(Q=>!!(Q&&/.+@.+\..+/.test(Q.trim())),[]),he=P.useCallback(()=>{const Q=pe(r?.email||""),Ae=B(r?.phone||""),ge=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",G=H(ge),We=[Q,Ae,G].filter(Boolean).length;return{complete:We===3,steps:We,total:3}},[r?.email,r?.phone,pe,B,H]);console.log("🔍 Services Component - Estado atual:",{activeTab:v,serviceRequestsLength:i.length,serviceOffersLength:d.length,loading:h});const be=P.useCallback(async()=>{try{const Q=localStorage.getItem("token");if(!Q)return console.error("❌ Token não encontrado"),[];console.log("🔍 Buscando pedidos...");const Ae=await fetch(`${ht()}/api/service-requests/client`,{headers:{Authorization:`Bearer ${Q}`}});if(Ae.ok){const ge=await Ae.json();return console.log("✅ Pedidos carregados:",ge),l(ge),ge}else{const ge=await Ae.text();console.error("❌ Erro ao buscar pedidos:",Ae.status,ge),a({title:"Erro",description:"Não foi possível carregar seus pedidos de serviço",variant:"destructive"})}}catch(Q){console.error("❌ Erro ao buscar pedidos:",Q),a({title:"Erro de conexão",description:"Verifique sua conexão com a internet",variant:"destructive"})}return[]},[a]),ne=P.useCallback(async()=>{try{const Q=localStorage.getItem("token");if(!Q)return console.error("❌ Token não encontrado"),[];console.log("🔍 Buscando propostas...");const Ae=await fetch(`${ht()}/api/service-offers/client`,{headers:{Authorization:`Bearer ${Q}`}});if(Ae.ok){const ge=await Ae.json();console.log("✅ Propostas carregadas:",ge);let G=Array.isArray(ge)?ge:[];return G=G.map(We=>({...We,professionalRating:z(We?.professionalRating,5),professionalTotalReviews:z(We?.professionalTotalReviews,0),price:z(We?.price??We?.proposedPrice,0),estimatedTime:z(We?.estimatedTime,0),serviceStatus:We?.serviceStatus||"open"})),u(G),G}else{const ge=await Ae.text();console.error("❌ Erro ao buscar propostas:",Ae.status,ge),a({title:"Erro",description:"Não foi possível carregar as propostas",variant:"destructive"})}}catch(Q){console.error("❌ Erro ao buscar propostas:",Q),a({title:"Erro de conexão",description:"Verifique sua conexão com a internet",variant:"destructive"})}finally{p(!1)}return[]},[a]);P.useEffect(()=>{r?.id&&(async()=>(p(!0),await Promise.all([be(),ne()])))()},[r?.id,be,ne]),P.useEffect(()=>{r?.id&&(v==="offers"?ne():v==="requests"&&be())},[v,r?.id,be,ne]),P.useEffect(()=>{const Q=()=>{!document.hidden&&r?.id&&(v==="offers"?ne():be())};return document.addEventListener("visibilitychange",Q),()=>document.removeEventListener("visibilitychange",Q)},[v,r?.id,be,ne]);const xe=async Q=>{try{const Ae=localStorage.getItem("token"),ge=await fetch(`${ht()}/api/service-offers/${Q}/accept`,{method:"PUT",headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(ge.ok)a({title:"Sucesso!",description:"Proposta aceita com sucesso!"}),await Promise.all([ne(),be()]);else{const G=await ge.json();a({title:"Erro",description:G.message||"Não foi possível aceitar a proposta",variant:"destructive"})}}catch(Ae){console.error("Erro ao aceitar proposta:",Ae),a({title:"Erro",description:"Erro de conexão ao aceitar a proposta",variant:"destructive"})}},ae=async Q=>{try{const Ae=localStorage.getItem("token"),ge=await fetch(`${ht()}/api/service-offers/${Q}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(ge.ok)a({title:"Proposta rejeitada",description:"A proposta foi rejeitada com sucesso."}),u(G=>G.filter(We=>We.id!==Q)),g(null),await Promise.all([be(),ne()]);else{const G=await ge.json();a({title:"Erro",description:G.message||"Não foi possível rejeitar a proposta",variant:"destructive"})}}catch(Ae){console.error("Erro ao rejeitar proposta:",Ae),a({title:"Erro",description:"Erro de conexão ao rejeitar a proposta",variant:"destructive"})}},fe=async(Q,Ae)=>{j(Ae);try{const ge=localStorage.getItem("token"),We=`Olá! Gostaria de conversar sobre sua proposta para "${d.find(Fe=>Fe.id===Ae)?.serviceTitle}".`,et=await fetch(`${ht()}/api/messages/start-conversation`,{method:"POST",headers:{Authorization:`Bearer ${ge}`,"Content-Type":"application/json"},body:JSON.stringify({professionalId:Q,message:We})});if(et.ok)a({title:"Conversa iniciada!",description:"Redirecionando para as mensagens..."}),t("/messages");else{const Fe=await et.json();a({title:"Erro",description:Fe.message||"Não foi possível iniciar a conversa",variant:"destructive"})}}catch(ge){console.error("Erro ao iniciar conversa:",ge),a({title:"Erro",description:"Erro de conexão ao iniciar conversa",variant:"destructive"})}finally{j(null)}},E=async Q=>{try{A(Q);const Ae=localStorage.getItem("token"),ge=await fetch(`${ht()}/api/service/${Q}/confirm`,{method:"POST",headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(ge.ok){const G=await ge.json();a({title:"Sucesso!",description:"Serviço confirmado como concluído. O pagamento será liberado para o profissional."}),await Promise.all([ne(),be()]),G.requiresReview&&(R(Q),te(!0))}else{const G=await ge.json();a({title:"Erro",description:G.message||"Não foi possível confirmar a conclusão do serviço",variant:"destructive"})}}catch(Ae){console.error("Erro ao confirmar conclusão do serviço:",Ae),a({title:"Erro",description:"Erro de conexão ao confirmar conclusão do serviço",variant:"destructive"})}finally{A(null)}},W=Q=>{switch(Q){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Z=Q=>{switch(Q){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return Q}},X=Q=>({acompanhante_hospitalar:"Acompanhante Hospitalar"})[Q]||Q.replace(/_/g," ").replace(/\b\w/g,ge=>ge.toUpperCase()),re=async Q=>{try{const Ae=localStorage.getItem("token"),ge=await fetch(`${ht()}/api/service-requests/${Q}`,{method:"DELETE",headers:{Authorization:`Bearer ${Ae}`}});if(ge.ok)a({title:"Pedido excluído",description:"O pedido foi excluído com sucesso."}),l(G=>G.filter(We=>We.id!==Q));else{const G=await ge.json();a({title:"Erro",description:G.message||"Não foi possível excluir o pedido",variant:"destructive"})}}catch(Ae){console.error("Erro ao excluir pedido:",Ae),a({title:"Erro",description:"Erro de conexão ao excluir o pedido",variant:"destructive"})}},de=()=>{const Q=he();if(!Q.complete){a({title:"Verificação em andamento",description:`Conclua seu cadastro (${Q.steps}/${Q.total}): Email, Telefone e CPF para criar um serviço.`}),t("/profile");return}t("/servico")},Ne=()=>{ne(),be()},J=()=>{te(!1),R(null)},oe=new Set(i.map(Q=>Q.id)),ie=d.filter(Q=>{if(!(i.length===0||oe.has(Q.serviceRequestId)))return!1;const ge=S===""||Q.professionalName.toLowerCase().includes(S.toLowerCase())||Q.serviceTitle.toLowerCase().includes(S.toLowerCase())||Q.message.toLowerCase().includes(S.toLowerCase()),G=V==="all"?Q.status!=="rejected":Q.status===V;return ge&&G}),Te=d.reduce((Q,Ae)=>(Q[Ae.serviceRequestId]||(Q[Ae.serviceRequestId]=[]),Q[Ae.serviceRequestId].push(Ae),Q),{});return h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pr,{className:"h-8 w-8 animate-spin text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando serviços..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(Zs,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Vn,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Meus Serviços"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{href:"/agenda",children:e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-yellow-600 transition-colors",children:[e.jsx(gr,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Agenda"})]})}),e.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg text-sm font-medium hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Bh,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Novo Pedido"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>{console.log("🔍 Clicou na aba Pedidos"),y("requests")},className:`py-4 px-1 border-b-2 font-medium text-sm ${v==="requests"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pedidos (",i.length,")"]}),e.jsxs("button",{onClick:()=>{console.log("🔍 Clicou na aba Propostas"),y("offers")},className:`py-4 px-1 border-b-2 font-medium text-sm ${v==="offers"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Propostas (",d.length,")"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[v==="offers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ci,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por profissional, serviço ou mensagem...",value:S,onChange:Q=>q(Q.target.value),className:"w-full pl-10 pr-4 py-2.5 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>Y("all"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="all"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todas"}),e.jsx("button",{onClick:()=>Y("pending"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="pending"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pendentes"}),e.jsx("button",{onClick:()=>Y("accepted"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="accepted"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Aceitas"}),e.jsx("button",{onClick:()=>Y("rejected"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="rejected"?"bg-red-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Rejeitadas"}),e.jsx("button",{onClick:()=>Y("completed"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="completed"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Concluídas"})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Or,{className:"h-5 w-5 text-orange-500"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"Propostas Recebidas"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white",children:ie.length})]})}),ie.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(Or,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Não há propostas no momento"}),e.jsx("p",{className:"text-gray-600",children:"Assim que profissionais enviarem propostas, elas aparecerão aqui."})]}):e.jsx("div",{className:"space-y-4",children:ie.map(Q=>e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-md border border-gray-100 hover:shadow-lg hover:ring-1 hover:ring-orange-200 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 rounded-full flex items-center justify-center overflow-hidden shadow-md ring-2 ring-white",children:Q.professionalProfileImage&&!ue[Q.id]?e.jsx("img",{src:Q.professionalProfileImage.startsWith("http")?Q.professionalProfileImage:`${ht()}${Q.professionalProfileImage}`,alt:Q.professionalName,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",sizes:"(max-width: 640px) 3rem, (max-width: 1024px) 3.5rem, 4rem",onError:()=>le(Ae=>({...Ae,[Q.id]:!0}))}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:e.jsx(Gr,{className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8 text-white"})})}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 truncate",children:Q.professionalName}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:Q.professionalRating})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["(",Q.professionalTotalReviews," ",Q.professionalTotalReviews===1?"avaliação":"avaliações",")"]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-2 sm:mt-0",children:e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${Q.status==="accepted"?"bg-green-100 text-green-800":Q.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:Q.status==="accepted"?"Aceita":Q.status==="rejected"?"Rejeitada":"Pendente"})})]})})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vn,{className:"h-4 w-4 text-blue-600"}),e.jsx("p",{className:"text-sm text-blue-800 font-semibold",children:"Serviço Solicitado"})]}),e.jsx("p",{className:"text-base text-blue-900 font-bold",children:X(Q.serviceTitle)}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-xs text-blue-700",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gr,{className:"h-3 w-3"}),new Date(Q.createdAt).toLocaleDateString("pt-BR")]})})]}),(()=>{const Ae=i.find(Fe=>Fe.id===Q.serviceRequestId);if(!Ae)return null;const ge=typeof Ae.budget=="number"?Ae.budget:parseFloat(Ae.budget??"0")||0,G=typeof Q.price=="number"?Q.price:parseFloat(Q.price??"0")||0,We=G<=ge,et=Math.abs(ge-G);return e.jsxs("div",{className:"mb-4 p-4 rounded-lg border bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Comparação com orçamento"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${We?"bg-green-100 text-green-700":"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-sm"}`,children:We?"Dentro do orçamento":"Acima do orçamento"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Orçamento do pedido"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["R$ ",ge.toFixed(2)]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Proposta do profissional"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["R$ ",G.toFixed(2)]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Diferença"}),e.jsxs("p",{className:`text-sm font-semibold ${We?"text-green-700":"text-red-700"}`,children:[We?"-":"+"," R$ ",et.toFixed(2)]})]})]})]})})(),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Or,{className:"h-4 w-4 text-gray-600"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Proposta do Profissional"})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-4 border border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed italic",children:['"',Q.message,'"']})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ln,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Preço"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold text-green-800 truncate",children:["R$ ",z(Q.price,0).toFixed(2)]})]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(or,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Tempo estimado"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold text-blue-800 truncate",children:[Q.estimatedTime," horas"]})]})]})})]}),Q.status==="pending"&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>xe(Q.id),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:[e.jsx(fs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Aceitar"}),e.jsx("span",{className:"sm:hidden",children:"Aceitar"})]}),e.jsxs(vx,{open:N===Q.id,onOpenChange:Ae=>!Ae&&g(null),children:[e.jsx(yx,{asChild:!0,children:e.jsxs("button",{onClick:()=>g(Q.id),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:[e.jsx(Ai,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Rejeitar"}),e.jsx("span",{className:"sm:hidden",children:"Rejeitar"})]})}),e.jsxs(nu,{className:"bg-white border border-gray-200",children:[e.jsxs(au,{children:[e.jsxs(ou,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Xm,{className:"h-5 w-5 text-red-500"})}),"Rejeitar Proposta"]}),e.jsx(lu,{asChild:!0,children:e.jsxs("div",{className:"text-left space-y-4",children:[e.jsxs("p",{children:["Tem certeza que deseja rejeitar a proposta de ",e.jsx("strong",{children:Q.professionalName}),"?"]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center overflow-hidden",children:Q.professionalProfileImage&&!ue[Q.id]?e.jsx("img",{src:Q.professionalProfileImage.startsWith("http")?Q.professionalProfileImage:`${ht()}${Q.professionalProfileImage}`,alt:Q.professionalName,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",sizes:"2.5rem",onError:()=>le(Ae=>({...Ae,[Q.id]:!0}))}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:e.jsx(Gr,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Q.professionalName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ln,{className:"h-4 w-4"}),"R$ ",z(Q.price,0).toFixed(2)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(or,{className:"h-4 w-4"}),Q.estimatedTime," horas"]})]})]})]})}),e.jsx("p",{className:"text-red-600 font-medium",children:"Esta ação não pode ser desfeita e o profissional será notificado."})]})})]}),e.jsxs(iu,{children:[e.jsx(du,{children:"Cancelar"}),e.jsx(cu,{onClick:()=>ae(Q.id),className:"bg-red-500 hover:bg-red-600 text-white",children:"Sim, Rejeitar"})]})]})]}),e.jsxs("button",{onClick:()=>fe(Q.professionalId,Q.id),disabled:C===Q.id,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2.5 sm:py-3 px-4 sm:px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[C===Q.id?e.jsx(pr,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin"}):e.jsx(Or,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Conversar"}),e.jsx("span",{className:"sm:hidden",children:"Chat"})]})]}),Q.status==="accepted"&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:Q.serviceStatus==="awaiting_confirmation"?e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-4 border border-orange-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(or,{className:"h-5 w-5 text-orange-600"}),e.jsx("p",{className:"text-sm font-semibold text-orange-800",children:"Serviço Concluído - Aguardando Confirmação"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"O profissional marcou o serviço como concluído. Confirme se tudo está correto para liberar o pagamento."})]}),e.jsxs("button",{onClick:()=>E(Q.serviceRequestId),disabled:T===Q.serviceRequestId,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[T===Q.serviceRequestId?e.jsx(pr,{className:"h-4 w-4 animate-spin"}):e.jsx(Hu,{className:"h-4 w-4"}),e.jsx("span",{children:"Confirmar Conclusão do Serviço"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Confirme para liberar o pagamento ao profissional"})]}):e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Hu,{className:"h-5 w-5 text-green-600"}),e.jsx("p",{className:"text-sm font-semibold text-green-800",children:"Proposta Aceita"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Proposta aceita! Efetue o pagamento para que o profissional possa iniciar o serviço."}),e.jsx(WN,{serviceOfferId:Q.id,serviceRequestId:Q.serviceRequestId,amount:Q.price,serviceName:`${i.find(Ae=>Ae.id===Q.serviceRequestId)?.title||"Serviço"}`,professionalName:Q.professionalName,onPaymentSuccess:()=>{ne(),a({title:"Pagamento Realizado",description:"Pagamento processado com sucesso! O profissional foi notificado."})}})]})})]},Q.id))})]}),v==="requests"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vn,{className:"h-5 w-5 text-orange-500"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"Meus Pedidos"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white",children:i.length})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Vn,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Or,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Propostas Recebidas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(fs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(Q=>Q.status==="open"||Q.status==="assigned").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(or,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Em Andamento"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(Q=>Q.status==="in_progress"||Q.status==="awaiting_confirmation").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-green-500 to-emerald-500",children:e.jsx(fs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Concluídos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(Q=>Q.status==="completed").length})]})]})})]}),i.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(Vn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido criado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Crie seu primeiro pedido de serviço e receba propostas de profissionais qualificados."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(ks,{href:"/servico",children:e.jsx("button",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-lg font-medium hover:from-yellow-600 hover:to-orange-600 transition-all duration-200",children:"Criar Pedido"})}),e.jsx(ks,{href:"/my-service-requests",children:e.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:"Ver Todos os Pedidos"})})]})]}):e.jsx("div",{className:"space-y-4",children:i.map(Q=>{const Ae=Te[Q.id]||[];return Ae.filter(ge=>ge.status==="pending"),Ae.filter(ge=>ge.status==="accepted"),e.jsxs("div",{className:`bg-white rounded-xl p-4 sm:p-5 shadow-md border transition-all duration-200 ${Q.status==="completed"?"border-green-200 bg-green-50/30 hover:shadow-lg hover:ring-1 hover:ring-green-200":"border-gray-100 hover:shadow-lg hover:ring-1 hover:ring-orange-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md ${Q.status==="completed"?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-blue-500 to-purple-600"}`,children:Q.status==="completed"?e.jsx(fs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}):e.jsx(Vn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-900 mb-1 line-clamp-2",children:Q.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:X(Q.category)})]})]}),e.jsxs("div",{className:"flex flex-row gap-2 items-center sm:items-end",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Q.status==="completed"?"bg-green-100 text-green-800":Q.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:Q.status==="completed"?"Concluído":Q.status==="in_progress"?"Em Andamento":"Aberto"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W(Q.urgency)}`,children:Z(Q.urgency)})]})]}),Q.status==="completed"&&e.jsx("div",{className:"mb-4 bg-green-100 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-green-600"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Serviço Concluído - Este serviço foi finalizado e não pode mais ser editado"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Descrição do serviço"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed line-clamp-3",children:Q.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ns,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Localização"}),e.jsx("p",{className:"text-sm font-medium text-blue-800 truncate",children:(()=>{const ge=Q.location??Q.address??"",G=typeof ge=="string"?ge:String(ge??"");return G.trim()!==""?G:"Não informado"})()})]})]})}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ln,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Orçamento"}),e.jsxs("p",{className:"text-sm font-medium text-green-800 truncate",children:["R$ ",(()=>{const ge=typeof Q.budget=="number"?Q.budget:parseFloat(Q.budget??"0");return isNaN(ge)?"0,00":ge.toFixed(2)})()]})]})]})}),e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(gr,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-purple-700 mb-1",children:"Criado em"}),e.jsx("p",{className:"text-sm font-medium text-purple-800 truncate",children:new Date(Q.createdAt).toLocaleDateString("pt-BR")})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[Q.responseCount>0&&e.jsxs("button",{onClick:()=>y("offers"),className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:["Ver Propostas (",Q.responseCount,")"]}),e.jsx(ks,{href:"/my-service-requests",children:e.jsx("button",{className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Ver Detalhes"})}),Q.status==="completed"?e.jsx("button",{disabled:!0,className:"flex-1 sm:flex-none px-4 py-2 bg-gray-300 text-gray-500 rounded-lg text-sm font-medium cursor-not-allowed transition-all duration-200",title:"Serviços concluídos não podem ser editados",children:"Editar"}):e.jsx(ks,{href:"/servico",children:e.jsx("button",{className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg text-sm font-medium hover:from-green-600 hover:to-green-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Editar"})}),e.jsx("button",{onClick:()=>re(Q.id),className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg text-sm font-medium hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Excluir"})]})]})]},Q.id)})})]}),v!=="offers"&&v!=="requests"&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Selecione uma aba para continuar"})})]}),e.jsx(UN,{isOpen:ee,onClose:J,serviceRequestId:we||0,onRatingSubmitted:Ne})]})}function ZN(){const[s,t]=sr(),{user:r}=lr(),{toast:a}=Rs(),[i,l]=P.useState([]),[d,u]=P.useState(!0);P.useEffect(()=>{r?.id&&h()},[r]);const h=async()=>{try{u(!0);const C=localStorage.getItem("token"),j=await fetch(`${ht()}/api/service-requests/client`,{headers:{Authorization:`Bearer ${C}`}});if(j.ok){const T=await j.json();l(T),console.log("✅ Pedidos carregados:",T.length)}else console.error("❌ Erro ao buscar pedidos - Status:",j.status)}catch(C){console.error("❌ Erro ao buscar pedidos:",C)}finally{u(!1)}},p=C=>{switch(C){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=C=>{switch(C){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return C}},y=C=>{switch(C){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}},N=C=>{switch(C){case"completed":return"Concluído";case"in_progress":return"Em Andamento";case"cancelled":return"Cancelado";case"open":return"Aberto";default:return C}},g=C=>({acompanhante_hospitalar:"Acompanhante Hospitalar",cuidador_idosos:"Cuidador de Idosos",enfermagem_domiciliar:"Enfermagem Domiciliar",fisioterapia:"Fisioterapia",nutricao:"Nutrição",psicologia:"Psicologia",terapia_ocupacional:"Terapia Ocupacional",servicos_gerais:"Serviços Gerais"})[C]||C.replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase());return d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pr,{className:"h-8 w-8 animate-spin text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando seus pedidos..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/services"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(Zs,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Vn,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Meus Pedidos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{href:"/services",children:e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(Or,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Propostas"})]})}),e.jsxs("button",{onClick:()=>{const C=!!(r?.email&&/.+@.+\..+/.test(r.email.trim())),j=(r?.phone||"").replace(/\D/g,""),T=j.length===11&&j[0]!=="0"&&j[1]!=="0"&&j[2]==="9",A=Y=>{const ue=Y.replace(/\D/g,"");if(ue.length!==11||/^(\d)\1{10}$/.test(ue))return!1;const le=ee=>{let te=0;for(let R=0;R<ee;R++)te+=parseInt(ue[R],10)*(ee+1-R);const we=te*10%11;return we===10?0:we};return le(9)===parseInt(ue[9],10)&&le(10)===parseInt(ue[10],10)},S=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",q=A(S),V=[C,T,q].filter(Boolean).length;if(V!==3){a({title:"Verificação em andamento",description:`Conclua seu cadastro (${V}/3): Email, Telefone e CPF para criar um serviço.`}),t("/profile");return}t("/servico")},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(Bh,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Novo Pedido"})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Vn,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Or,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Propostas Recebidas"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.reduce((C,j)=>C+(Number(j.responseCount)||0),0)})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(or,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos Ativos"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.filter(C=>C.status==="open"||C.status==="in_progress").length})]})]})})]}),e.jsx("div",{className:"space-y-6",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Vn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido criado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Crie seu primeiro pedido de serviço e receba propostas de profissionais qualificados."}),e.jsx(ks,{href:"/servico",children:e.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:"Criar Primeiro Pedido"})})]}):i.map(C=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(Vn,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2",children:C.title}),e.jsx("p",{className:"text-sm text-blue-600 font-semibold mb-3 bg-blue-50 px-3 py-1 rounded-full inline-block",children:g(C.category)})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${y(C.status)}`,children:N(C.status)}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${p(C.urgency)}`,children:["Urgência ",v(C.urgency)]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Descrição do Serviço"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:C.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Ns,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"Localização"}),e.jsx("p",{className:"text-sm font-semibold text-blue-800 truncate",children:C.location})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(ln,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 font-medium mb-1",children:"Orçamento Máximo"}),e.jsxs("p",{className:"text-sm font-semibold text-green-800",children:["R$ ",(()=>{const j=typeof C.budget=="number"?C.budget:parseFloat(C.budget??"0");return isNaN(j)?"0,00":j.toFixed(2)})()]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx(gr,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-purple-700 font-medium mb-1",children:"Criado em"}),e.jsx("p",{className:"text-sm font-semibold text-purple-800",children:new Date(C.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Or,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Propostas Recebidas"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-orange-600",children:C.responseCount}),e.jsx("span",{className:"text-sm text-gray-600",children:C.responseCount===1?"proposta recebida":"propostas recebidas"})]}),C.responseCount>0&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-semibold",children:"Aguardando análise"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[C.responseCount>0&&e.jsx(ks,{href:"/services",className:"flex-1",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(lo,{className:"h-4 w-4"}),"Ver Propostas (",C.responseCount,")"]})}),e.jsx(ks,{href:"/servico",className:"flex-1",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(cp,{className:"h-4 w-4"}),"Editar Pedido"]})}),C.status==="open"&&e.jsxs("button",{className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(nl,{className:"h-4 w-4"}),"Cancelar"]})]})]},C.id))})]})]})}function GN({onLogin:s}){const[t,r]=P.useState(!0),[a,i]=P.useState(!1),[l,d]=P.useState("client"),[u,h]=P.useState(""),[p,v]=P.useState(""),[y,N]=P.useState(""),[g,C]=P.useState(""),[j,T]=P.useState(""),[A,S]=P.useState(!1),{toast:q}=Rs(),[V,Y]=P.useState(""),[ue,le]=P.useState(""),[ee,te]=P.useState(""),[we,R]=P.useState(""),[z,H]=P.useState(""),B=oe=>{const ie=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return oe?ie.test(oe)?oe.length>100?"Email muito longo":"":"Digite um email válido":"Email é obrigatório"},pe=oe=>{const ie=/^\(\d{2}\) \d{4,5}-\d{4}$/;return oe?ie.test(oe)?"":"Digite um telefone válido: (11) 99999-9999":"Telefone é obrigatório"},he=oe=>oe?oe.length<8?"Senha deve ter pelo menos 8 caracteres":/(?=.*[a-z])/.test(oe)?/(?=.*[A-Z])/.test(oe)?/(?=.*\d)/.test(oe)?/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(oe)?oe.length>50?"Senha muito longa":"":"Senha deve conter pelo menos um caractere especial":"Senha deve conter pelo menos um número":"Senha deve conter pelo menos uma letra maiúscula":"Senha deve conter pelo menos uma letra minúscula":"Senha é obrigatória",be=oe=>oe?oe.length<2?"Nome deve ter pelo menos 2 caracteres":oe.length>100?"Nome muito longo":/^[a-zA-ZÀ-ÿ\s]+$/.test(oe)?"":"Nome deve conter apenas letras":"Nome é obrigatório",ne=oe=>oe?oe!==p?"As senhas não coincidem":"":"Confirme sua senha",xe=oe=>{if(!oe)return{strength:0,color:"bg-gray-200",text:""};let ie=0;return oe.length>=8&&ie++,/(?=.*[a-z])/.test(oe)&&ie++,/(?=.*[A-Z])/.test(oe)&&ie++,/(?=.*\d)/.test(oe)&&ie++,/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(oe)&&ie++,ie<=1?{strength:ie,color:"bg-red-500",text:"Muito fraca"}:ie<=2?{strength:ie,color:"bg-orange-500",text:"Fraca"}:ie<=3?{strength:ie,color:"bg-yellow-500",text:"Média"}:ie<=4?{strength:ie,color:"bg-blue-500",text:"Forte"}:{strength:ie,color:"bg-green-500",text:"Muito forte"}},ae=oe=>{const Te=oe.replace(/\D/g,"").substring(0,11);return Te.length<=2?Te:Te.length<=7?`(${Te.substring(0,2)}) ${Te.substring(2)}`:`(${Te.substring(0,2)}) ${Te.substring(2,7)}-${Te.substring(7)}`},fe=oe=>{const ie=ae(oe.target.value);T(ie),t||le(pe(ie))},E=oe=>{const ie=oe.target.value;h(ie),Y(B(ie))},W=oe=>{const ie=oe.target.value;v(ie),te(t?ie?"":"Senha é obrigatória":he(ie)),y&&R(ne(y))},Z=oe=>{const ie=oe.target.value;N(ie),R(ne(ie))},X=oe=>{const ie=oe.target.value;C(ie),t||H(be(ie))},re=async oe=>{console.log("🔐 Iniciando login social:",oe),S(!0);try{const Te=`http://localhost:8080/api/auth/${oe}`;console.log("🔐 URL de autenticação:",Te),console.log("🔐 Redirecionando diretamente..."),window.location.href=Te}catch(ie){console.error("❌ Erro no login social:",ie),S(!1),q({title:"Erro no login social",description:ie.message,variant:"destructive"})}},de=()=>{Y(""),le(""),te(""),R(""),H("")},Ne=()=>{r(!t),de(),t||te("")},J=async oe=>{oe.preventDefault();const ie=B(u),Te=p?"":"Senha é obrigatória";if(Y(ie),te(Te),t){if(ie||Te){q({title:"Erro de validação",description:"Por favor, preencha todos os campos",variant:"destructive"});return}}else{const Q=be(g),Ae=pe(j),ge=ne(y),G=he(p);if(H(Q),le(Ae),R(ge),te(G),ie||G||Q||Ae||ge){q({title:"Erro de validação",description:"Por favor, corrija os campos destacados",variant:"destructive"});return}}S(!0);try{if(t){const Q=await Bl("POST","/api/auth/login",{email:u,password:p,userType:l}),Ae=await Q.json();if(Q.ok)localStorage.setItem("token",Ae.token),localStorage.setItem("user",JSON.stringify(Ae.user)),q({title:"Login realizado com sucesso!",description:`Bem-vindo(a), ${Ae.user.name}`}),s(Ae.user.userType);else throw new Error(Ae.message||"Erro no login")}else{const Q=await Bl("POST","/api/auth/register",{username:u,email:u,password:p,name:g,userType:l,phone:j}),Ae=await Q.json();if(Q.ok)localStorage.setItem("token",Ae.token),localStorage.setItem("user",JSON.stringify(Ae.user)),q({title:"Conta criada com sucesso!",description:`Bem-vindo(a), ${Ae.user.name}`}),s(Ae.user.userType);else throw new Error(Ae.message||"Erro no cadastro")}}catch(Q){q({title:t?"Erro no login":"Erro no cadastro",description:Q.message,variant:"destructive"})}finally{S(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-8 xl:p-12",children:e.jsxs("div",{className:"max-w-md w-full text-center lg:text-left space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 sm:gap-3",children:[e.jsx(Zl,{size:40,className:"sm:w-12 sm:h-12"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"LifeBee"}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400 text-xs sm:text-sm font-medium",children:"Cuidados Profissionais"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white leading-tight",children:"Conectamos você com profissionais de saúde qualificados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base lg:text-lg",children:"Acompanhantes hospitalares prontos para cuidar de você"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center lg:justify-start",children:[e.jsx(Bs,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 text-xs sm:text-sm",children:"🏃‍♂️ Fisioterapia"}),e.jsx(Bs,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 text-xs sm:text-sm",children:"💉 Enfermagem"}),e.jsx(Bs,{variant:"secondary",className:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200 text-xs sm:text-sm",children:"🏥 Acompanhamento"})]})]})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-8 xl:p-12",children:e.jsxs(lt,{className:"w-full max-w-md shadow-xl border-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:[e.jsxs(rs,{className:"space-y-3 sm:space-y-4 pb-4 sm:pb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t?"Entrar na conta":"Criar conta"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs sm:text-sm",children:t?"Acesse sua conta para continuar":"Junte-se à nossa comunidade de cuidados"})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-1 flex w-full",children:[e.jsx(Me,{variant:"ghost",className:`flex-1 rounded-lg transition-all duration-200 text-xs sm:text-sm lg:text-base py-2 sm:py-3 lg:py-4 px-2 sm:px-4 lg:px-6 ${t?"bg-white shadow-sm text-gray-900 dark:bg-gray-600 dark:text-white":"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"}`,onClick:()=>{r(!0),de()},children:"Entrar"}),e.jsx(Me,{variant:"ghost",className:`flex-1 rounded-lg transition-all duration-200 text-xs sm:text-sm lg:text-base py-2 sm:py-3 lg:py-4 px-2 sm:px-4 lg:px-6 ${t?"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white":"bg-white shadow-sm text-gray-900 dark:bg-gray-600 dark:text-white"}`,onClick:()=>{r(!1),de()},children:"Cadastrar"})]})]}),e.jsxs(ct,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("form",{onSubmit:J,className:"space-y-3 sm:space-y-4",children:[!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Você é:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 lg:gap-4",children:[e.jsxs(Me,{type:"button",variant:l==="client"?"default":"outline",className:`h-10 sm:h-12 lg:h-14 text-xs sm:text-sm lg:text-base px-2 sm:px-4 lg:px-6 ${l==="client"?"bg-yellow-500 hover:bg-yellow-600":"border-gray-300"}`,onClick:()=>d("client"),children:[e.jsx(Gr,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 mr-1 sm:mr-2"}),"Cliente"]}),e.jsxs(Me,{type:"button",variant:l==="provider"?"default":"outline",className:`h-10 sm:h-12 lg:h-14 text-xs sm:text-sm lg:text-base px-2 sm:px-4 lg:px-6 ${l==="provider"?"bg-yellow-500 hover:bg-yellow-600":"border-gray-300"}`,onClick:()=>d("provider"),children:[e.jsx(R1,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 mr-1 sm:mr-2"}),"Profissional"]})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome completo"}),e.jsx(xt,{type:"text",placeholder:"Seu nome completo",value:g,onChange:X,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${z?"border-red-500 focus:border-red-500":""}`,autoComplete:"name",required:!t}),z&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:z})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefone"}),e.jsx(xt,{type:"tel",placeholder:"(11) 99999-9999",value:j,onChange:fe,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${ue?"border-red-500 focus:border-red-500":""}`,autoComplete:"tel",required:!t}),ue&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:ue})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx(xt,{type:"email",placeholder:"seu@email.com",value:u,onChange:E,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${V?"border-red-500 focus:border-red-500":""}`,autoComplete:"email",required:!0}),V&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:V})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{type:a?"text":"password",placeholder:"Sua senha",value:p,onChange:W,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 pr-10 ${ee?"border-red-500 focus:border-red-500":""}`,autoComplete:t?"current-password":"new-password",required:!0}),e.jsx(Me,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-10 sm:h-12 w-10 sm:w-12 p-0 hover:bg-transparent",onClick:()=>i(!a),children:a?e.jsx(wc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}):e.jsx(lo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]}),ee&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:ee}),!t&&p&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(oe=>{const ie=xe(p);return e.jsx("div",{className:`h-1 flex-1 rounded-full transition-all duration-300 ${oe<=ie.strength?ie.color:"bg-gray-200"}`},oe)})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Força da senha: ",xe(p).text]})]})]}),!t&&e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar senha"}),e.jsx(xt,{type:"password",placeholder:"Confirme sua senha",value:y,onChange:Z,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${we?"border-red-500 focus:border-red-500":""}`,autoComplete:"new-password",required:!t}),we&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:we})]}),e.jsx(Me,{type:"submit",disabled:A,className:"w-full h-10 sm:h-12 lg:h-14 bg-yellow-500 hover:bg-yellow-600 text-white font-medium text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8",children:A?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),t?"Entrando...":"Cadastrando..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t?"Entrar":"Criar conta"}),e.jsx(ep,{className:"h-4 w-4"})]})})]}),e.jsxs("div",{className:"text-center space-y-2 sm:space-y-3",children:[e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[t?"Não tem uma conta?":"Já tem uma conta?",e.jsx("button",{type:"button",className:"ml-1 text-yellow-600 hover:text-yellow-700 font-medium",onClick:Ne,children:t?"Cadastre-se":"Faça login"})]}),t&&e.jsx("button",{type:"button",className:"text-xs sm:text-sm text-yellow-600 hover:text-yellow-700",children:"Esqueceu sua senha?"})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:e.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-500 dark:text-gray-400",children:"Ou continue com"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs(Me,{type:"button",variant:"outline",className:"h-10 sm:h-12 flex items-center justify-center gap-2 text-xs sm:text-sm border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),console.log("🔘 Botão Google clicado!"),console.log("🔘 Estado isLoading:",A),console.log("🔘 Evento:",oe),console.log("🔘 Target:",oe.target),console.log("🔘 Current Target:",oe.currentTarget),A?console.log("❌ Botão desabilitado devido ao estado de loading"):re("google")},disabled:A,children:[e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),e.jsxs(Me,{type:"button",variant:"outline",className:"h-10 sm:h-12 flex items-center justify-center gap-2 text-xs sm:text-sm border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",onClick:()=>re("apple"),disabled:A,children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Apple"]})]})]})]})]})})]})}function Hf(){const[,s]=sr();return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(lt,{className:"w-full max-w-md mx-4",children:e.jsxs(ct,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(mo,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Página não encontrada"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600 mb-6",children:"A página que você está procurando não existe ou foi movida."}),e.jsxs(Me,{onClick:()=>s("/"),className:"w-full",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Voltar para Home"]})]})})})}function YN(){const{user:s}=lr(),{toast:t}=Rs(),[r,a]=P.useState([]),[i,l]=P.useState(!0),[d,u]=P.useState("all");P.useEffect(()=>{s?.userType==="provider"&&h()},[s]);const h=async()=>{l(!0);try{const g=await fetch(`${ht()}/api/appointments/provider`,{credentials:"include"});if(g.ok){const C=await g.json();a(C)}else a([])}catch{a([])}finally{l(!1)}},p=g=>{switch(g){case"agendado":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"confirmado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"em_andamento":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"concluido":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},v=g=>{switch(g){case"confirmado":return e.jsx(fs,{className:"h-3 w-3"});case"cancelado":return e.jsx(Ai,{className:"h-3 w-3"});case"em_andamento":return e.jsx(Qm,{className:"h-3 w-3"});case"concluido":return e.jsx(fs,{className:"h-3 w-3"});default:return e.jsx(mo,{className:"h-3 w-3"})}},y=g=>{switch(g){case"agendado":return"Agendado";case"confirmado":return"Confirmado";case"em_andamento":return"Em Andamento";case"concluido":return"Concluído";case"cancelado":return"Cancelado";default:return g}},N=d==="all"?r:r.filter(g=>g.status===d);return e.jsx(ll,{children:e.jsxs("div",{className:"max-w-3xl mx-auto py-4 sm:py-6 px-2 sm:px-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Agenda do Profissional"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx(Me,{variant:d==="all"?"default":"outline",size:"sm",onClick:()=>u("all"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="all"?"bg-yellow-500 hover:bg-yellow-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Todos"}),e.jsx(Me,{variant:d==="agendado"?"default":"outline",size:"sm",onClick:()=>u("agendado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="agendado"?"bg-blue-500 hover:bg-blue-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Agendados"}),e.jsx(Me,{variant:d==="confirmado"?"default":"outline",size:"sm",onClick:()=>u("confirmado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="confirmado"?"bg-green-500 hover:bg-green-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Confirmados"}),e.jsx(Me,{variant:d==="em_andamento"?"default":"outline",size:"sm",onClick:()=>u("em_andamento"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="em_andamento"?"bg-orange-500 hover:bg-orange-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Em andamento"}),e.jsx(Me,{variant:d==="concluido"?"default":"outline",size:"sm",onClick:()=>u("concluido"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="concluido"?"bg-gray-500 hover:bg-gray-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Concluídos"}),e.jsx(Me,{variant:d==="cancelado"?"default":"outline",size:"sm",onClick:()=>u("cancelado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="cancelado"?"bg-red-500 hover:bg-red-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Cancelados"})]}),i?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Carregando agendamentos..."}):N.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Nenhum agendamento encontrado."}):e.jsx("div",{className:"space-y-4",children:N.map(g=>e.jsxs(lt,{children:[e.jsxs(rs,{className:"flex flex-col sm:flex-row sm:items-center gap-3 p-4",children:[e.jsx(Gr,{className:"h-6 w-6 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(us,{className:"text-base sm:text-lg font-semibold truncate",children:g.clientName}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[Cl(new Date(g.date),"dd 'de' MMMM 'de' yyyy",{locale:Xd})," às ",g.time]})]}),e.jsxs(Bs,{className:`${p(g.status)} flex-shrink-0`,children:[v(g.status),e.jsx("span",{className:"ml-1 hidden sm:inline",children:y(g.status)}),e.jsx("span",{className:"ml-1 sm:hidden",children:y(g.status).charAt(0)})]})]}),e.jsx(ct,{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Tipo: ",e.jsx("span",{className:"font-medium",children:g.type==="presencial"?"Presencial":"Online"})]}),g.location&&e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Local: ",e.jsx("span",{className:"font-medium truncate block",children:g.location})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Duração: ",e.jsxs("span",{className:"font-medium",children:[g.duration," min"]})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Valor: ",e.jsxs("span",{className:"font-medium",children:["R$ ",g.price]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.canConfirm&&e.jsx(Me,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Agendamento confirmado!"}),children:"Confirmar"}),g.canStart&&e.jsx(Me,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Atendimento iniciado!"}),children:"Iniciar"}),g.canFinish&&e.jsx(Me,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Atendimento concluído!"}),children:"Concluir"}),g.canCancel&&e.jsx(Me,{size:"sm",variant:"destructive",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Agendamento cancelado!"}),children:"Cancelar"})]})]})})]},g.id))})]})})}function $f({params:s}){const{user:t}=lr(),{toast:r}=Rs(),[a,i]=P.useState(""),[l,d]=P.useState(""),u=P.useRef(null),[h,p]=P.useState([]),[v,y]=P.useState([]),[N,g]=P.useState(!0),[,C]=sr(),[j,T]=Lp("/messages/:conversationId"),A=s?.conversationId||null,S=async()=>{try{g(!0);const H=localStorage.getItem("token");if(!H){r({title:"Erro de autenticação",description:"Faça login para acessar as mensagens",variant:"destructive"});return}const B=await fetch(`${ht()}/api/messages`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`}});if(B.ok){const pe=await B.json();y(pe)}else B.status===401?r({title:"Sessão expirada",description:"Faça login novamente",variant:"destructive"}):r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}catch{r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}finally{g(!1)}},q=async H=>{try{const B=localStorage.getItem("token");if(!B)return;const pe=await fetch(`${ht()}/api/messages/${H}`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}});if(pe.ok){const he=await pe.json();p(he)}else pe.status===404&&(r({title:"Conversa não encontrada",description:"Esta conversa não existe ou você não tem acesso.",variant:"destructive"}),C("/messages"))}catch{}};P.useEffect(()=>{S()},[]),P.useEffect(()=>{A&&q(A)},[A]);const V=v.filter(H=>H.professionalName.toLowerCase().includes(l.toLowerCase())||H.specialization.toLowerCase().includes(l.toLowerCase())),Y=v.find(H=>String(H.id)===String(A)),ue=()=>{u.current?.scrollIntoView({behavior:"smooth"})};P.useEffect(()=>{ue()},[h]);const le=H=>{const B=new Date,pe=new Date(H),he=B.getTime()-pe.getTime(),be=Math.floor(he/(1e3*60)),ne=Math.floor(he/(1e3*60*60)),xe=Math.floor(he/(1e3*60*60*24));return be<1?"agora":be<60?`${be}m`:ne<24?`${ne}h`:xe<7?`${xe}d`:pe.toLocaleDateString("pt-BR")},ee=H=>new Date(H).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),te=async()=>{if(!a.trim()||!Y)return;const H=localStorage.getItem("token");if(!H){r({title:"Erro de autenticação",description:"Faça login para enviar mensagens",variant:"destructive"});return}try{const B={id:Date.now(),senderId:t?.id||0,content:a,timestamp:new Date,isRead:!1,type:"text"};p(he=>[...he,B]),i(""),(await fetch(`${ht()}/api/messages`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`},body:JSON.stringify({recipientId:Y.professionalId,conversationId:Number(A),content:a,type:"text"})})).ok?A&&q(A):(p(he=>he.filter(be=>be.id!==B.id)),r({title:"Erro",description:"Não foi possível enviar a mensagem",variant:"destructive"}))}catch{r({title:"Erro de conexão",description:"Não foi possível enviar a mensagem",variant:"destructive"})}},we=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),te())},R=H=>{C(`/messages/${H}`)},z=async H=>{try{const B=localStorage.getItem("token");if(!B)return;(await fetch(`${ht()}/api/messages/conversation/${H}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}})).ok?(r({title:"Conversa excluída",description:"A conversa foi removida com sucesso."}),S()):r({title:"Erro",description:"Não foi possível excluir a conversa",variant:"destructive"})}catch{r({title:"Erro",description:"Erro ao excluir conversa",variant:"destructive"})}};return A?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>C("/messages"),className:"lg:hidden",children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",className:"lg:hidden p-2",onClick:()=>C("/messages"),children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs(Ti,{className:"w-10 h-10",children:[e.jsx(Ei,{src:Y?.professionalAvatar,alt:Y?.professionalName}),e.jsx(Mi,{className:"bg-yellow-500 text-white",children:Y?.professionalName.split(" ").map(H=>H[0]).join("")})]}),Y?.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:Y?.professionalName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:Y?.specialization}),Y?.isOnline&&e.jsx("span",{className:"text-xs text-green-600",children:"online"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(gr,{className:"h-4 w-4"})}),e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(ip,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{maxHeight:"60vh"},children:[h.map(H=>{const B=H.senderId===t?.id;return e.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md ${B?"order-2":""}`,children:[!B&&e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:Y?.professionalName})}),e.jsx("div",{className:`rounded-2xl px-4 py-2 ${B?"bg-yellow-500 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:H.content})}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${B?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:ee(H.timestamp)}),B&&e.jsx("div",{className:"text-gray-500",children:H.isRead?e.jsx(sp,{className:"h-3 w-3 text-blue-500"}):e.jsx(Vl,{className:"h-3 w-3"})})]})]})},H.id)}),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(lp,{className:"h-4 w-4"})}),e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(No,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(xt,{placeholder:"Digite sua mensagem...",value:a,onChange:H=>i(H.target.value),onKeyPress:we,className:"pr-10"}),e.jsx(Me,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2",children:e.jsx(hp,{className:"h-4 w-4"})})]}),e.jsx(Me,{onClick:te,disabled:!a.trim(),className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e.jsx(Ra,{className:"h-4 w-4"})})]})})]}),e.jsx(Da,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})})}),e.jsxs("div",{className:"w-full lg:w-96 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(xt,{placeholder:"Buscar conversas...",value:l,onChange:H=>d(H.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Carregando conversas..."})]})}):V.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Or,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma conversa encontrada"}),e.jsx("p",{className:"text-gray-500",children:"Você ainda não tem conversas ativas"})]})}):V.map(H=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",onClick:()=>R(H.id),children:[e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Ti,{className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx(Ei,{src:H.professionalAvatar,alt:H.professionalName}),e.jsx(Mi,{className:"bg-yellow-500 text-white text-xs sm:text-sm",children:H.professionalName.split(" ").map(B=>B[0]).join("")})]}),H.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm sm:text-base",children:H.professionalName}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:le(H.lastMessageTime)})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mb-1 flex-wrap",children:[e.jsx(Bs,{variant:"secondary",className:"text-xs px-2 py-0 bg-yellow-100 text-yellow-800",children:H.specialization}),H.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600",children:H.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex-1 min-w-0",children:H.lastMessage}),H.unreadCount>0&&e.jsx(Bs,{className:"bg-yellow-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center flex-shrink-0",children:H.unreadCount})]}),H.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ns,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:H.location})]})]})]}),e.jsx("button",{className:"ml-1 sm:ml-2 p-1.5 sm:p-2 rounded-full hover:bg-red-100 text-red-600 flex-shrink-0",title:"Excluir conversa",onClick:B=>{B.stopPropagation(),z(H.id)},children:e.jsx(nl,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]},H.id))})]}),e.jsx(Da,{})]})}function vc({params:s}){const{user:t}=lr(),{toast:r}=Rs(),[a,i]=P.useState(""),[l,d]=P.useState(""),u=P.useRef(null),[h,p]=P.useState([]),[v,y]=P.useState([]),[N,g]=P.useState(!0),[,C]=sr(),[j,T]=Lp("/messages-provider/:conversationId"),A=s?.conversationId||null,S=async()=>{try{console.log("🔄 fetchConversations - Iniciando busca de conversas..."),g(!0);const H=localStorage.getItem("token");if(!H){console.log("❌ Token não encontrado"),r({title:"Erro de autenticação",description:"Faça login para acessar as mensagens",variant:"destructive"});return}const B=await fetch(`${ht()}/api/messages`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`}});if(B.ok){const pe=await B.json();console.log("📋 Dados recebidos do backend:",pe),y(pe),console.log("✅ Conversas atualizadas no estado:",pe.length,"conversas")}else B.status===401?(console.log("❌ Erro 401 - Sessão expirada"),r({title:"Sessão expirada",description:"Faça login novamente",variant:"destructive"})):(console.log("❌ Erro na resposta:",B.status),r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"}))}catch(H){console.log("❌ Erro na busca de conversas:",H),r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}finally{g(!1),console.log("🔄 fetchConversations - Finalizado")}},q=async H=>{try{const B=localStorage.getItem("token");if(!B)return;const pe=await fetch(`${ht()}/api/messages/${H}`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}});if(pe.ok){const he=await pe.json();p(he)}}catch{}};P.useEffect(()=>{S()},[]),P.useEffect(()=>{A&&q(A)},[A]),P.useEffect(()=>{console.log("Mensagens carregadas do backend:",h)},[h]);const V=v.filter(H=>H.clientName?.toLowerCase().includes(l.toLowerCase())),Y=v.find(H=>String(H.id)===String(A)),ue=()=>{u.current?.scrollIntoView({behavior:"smooth"})};P.useEffect(()=>{ue()},[h]);const le=H=>{const B=new Date,pe=new Date(H),he=B.getTime()-pe.getTime(),be=Math.floor(he/(1e3*60)),ne=Math.floor(he/(1e3*60*60)),xe=Math.floor(he/(1e3*60*60*24));return be<1?"agora":be<60?`${be}m`:ne<24?`${ne}h`:xe<7?`${xe}d`:pe.toLocaleDateString("pt-BR")},ee=H=>new Date(H).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),te=async()=>{if(!a.trim()||!Y)return;const H=localStorage.getItem("token");if(!H){r({title:"Erro de autenticação",description:"Faça login para enviar mensagens",variant:"destructive"});return}try{const B={id:Date.now(),senderId:t?.id||0,content:a,timestamp:new Date,isRead:!1,type:"text"};p(he=>[...he,B]),i(""),(await fetch(`${ht()}/api/messages`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`},body:JSON.stringify({recipientId:Y.clientId,conversationId:Number(A),content:a,type:"text"})})).ok?A&&q(A):(p(he=>he.filter(be=>be.id!==B.id)),r({title:"Erro",description:"Não foi possível enviar a mensagem",variant:"destructive"}))}catch{r({title:"Erro de conexão",description:"Não foi possível enviar a mensagem",variant:"destructive"})}},we=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),te())},R=H=>{C(`/messages-provider/${H}`)},z=async H=>{try{console.log("🗑️ Tentando excluir conversa:",H);const B=localStorage.getItem("token");if(!B)return;const pe=await fetch(`${ht()}/api/messages/conversation/${H}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}});pe.ok?(console.log("✅ Conversa excluída com sucesso, recarregando lista..."),r({title:"Conversa excluída",description:"A conversa foi removida com sucesso."}),await S(),console.log("✅ Lista de conversas recarregada")):(console.log("❌ Erro ao excluir conversa:",pe.status),r({title:"Erro",description:"Não foi possível excluir a conversa",variant:"destructive"}))}catch(B){console.log("❌ Erro ao excluir conversa:",B),r({title:"Erro",description:"Erro ao excluir conversa",variant:"destructive"})}};return A?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>C("/messages"),className:"lg:hidden",children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{variant:"ghost",size:"sm",className:"lg:hidden p-2",onClick:()=>C("/messages"),children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs(Ti,{className:"w-10 h-10",children:[e.jsx(Ei,{src:Y?.clientAvatar,alt:Y?.clientName}),e.jsx(Mi,{className:"bg-yellow-500 text-white",children:Y?.clientName?.split(" ").map(H=>H[0]).join("")})]}),Y?.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:Y?.clientName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:Y?.specialization}),Y?.isOnline&&e.jsx("span",{className:"text-xs text-green-600",children:"online"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(gr,{className:"h-4 w-4"})}),e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(ip,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{maxHeight:"60vh"},children:[h.map(H=>{const B=H.senderId===t?.id;return e.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md ${B?"order-2":""}`,children:[!B&&e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:Y?.clientName})}),e.jsx("div",{className:`rounded-2xl px-4 py-2 ${B?"bg-yellow-500 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:H.content})}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${B?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:ee(H.timestamp)}),B&&e.jsx("div",{className:"text-gray-500",children:H.isRead?e.jsx(sp,{className:"h-3 w-3 text-blue-500"}):e.jsx(Vl,{className:"h-3 w-3"})})]})]})},H.id)}),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(lp,{className:"h-4 w-4"})}),e.jsx(Me,{variant:"ghost",size:"sm",children:e.jsx(No,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(xt,{placeholder:"Digite sua mensagem...",value:a,onChange:H=>i(H.target.value),onKeyPress:we,className:"pr-10"}),e.jsx(Me,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2",children:e.jsx(hp,{className:"h-4 w-4"})})]}),e.jsx(Me,{onClick:te,disabled:!a.trim(),className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e.jsx(Ra,{className:"h-4 w-4"})})]})})]}),e.jsx(th,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})})}),e.jsxs("div",{className:"w-full lg:w-96 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(xt,{placeholder:"Buscar conversas...",value:l,onChange:H=>d(H.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Carregando conversas..."})]})}):V.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Or,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma conversa encontrada"}),e.jsx("p",{className:"text-gray-500",children:"Você ainda não tem conversas ativas"})]})}):V.map(H=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",onClick:()=>R(H.id),children:[e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Ti,{className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx(Ei,{src:H.clientAvatar,alt:H.clientName}),e.jsx(Mi,{className:"bg-yellow-500 text-white text-xs sm:text-sm",children:H.clientName?.split(" ").map(B=>B[0]).join("")})]}),H.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm sm:text-base",children:H.clientName}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:le(H.lastMessageTime)})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mb-1 flex-wrap",children:[e.jsx(Bs,{variant:"secondary",className:"text-xs px-1.5 sm:px-2 py-0 bg-yellow-100 text-yellow-800",children:H.specialization}),H.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600",children:H.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex-1 min-w-0",children:H.lastMessage}),H.unreadCount>0&&e.jsx(Bs,{className:"bg-yellow-500 text-white text-xs min-w-[18px] sm:min-w-[20px] h-4 sm:h-5 flex items-center justify-center flex-shrink-0",children:H.unreadCount})]}),H.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ns,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:H.location})]})]})]}),e.jsx("button",{className:"ml-1 sm:ml-2 p-1.5 sm:p-2 rounded-full hover:bg-red-100 text-red-600 flex-shrink-0",title:"Excluir conversa",onClick:B=>{B.stopPropagation(),z(H.id)},children:e.jsx(nl,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]},H.id))})]}),e.jsx(th,{})]})}function KN(){const{toast:s}=Rs();return P.useEffect(()=>{console.log("🔄 AuthCallback iniciado"),console.log("🔄 URL atual:",window.location.href),console.log("🔄 Search params:",window.location.search);const t=new URLSearchParams(window.location.search),r=t.get("token"),a=t.get("userType"),i=t.get("error");if(console.log("🔄 Token:",r?"Presente":"Ausente"),console.log("🔄 UserType:",a),console.log("🔄 Error:",i),i){console.log("❌ Erro detectado:",i),s({title:"Erro na autenticação",description:i==="google_auth_failed"?"Falha no login com Google":"Falha no login com Apple",variant:"destructive"}),window.location.href="/login";return}if(r&&a){console.log("✅ Token e userType presentes, processando..."),localStorage.setItem("token",r),console.log("✅ Token salvo no localStorage");try{console.log("🔍 Decodificando token...");const l=JSON.parse(atob(r.split(".")[1]));console.log("🔍 Payload decodificado:",l);const d={id:l.id,email:l.email,userType:l.userType,name:l.name||"Usuário"};console.log("👤 Usuário processado:",d),localStorage.setItem("user",JSON.stringify(d)),console.log("✅ Usuário salvo no localStorage"),s({title:"Login realizado com sucesso!",description:`Bem-vindo(a), ${d.name}`});const u=a==="provider"?"/provider-dashboard":"/home";console.log("🔄 Redirecionando para:",u),window.location.href=u}catch(l){console.error("❌ Erro ao decodificar token:",l),s({title:"Erro na autenticação",description:"Token inválido",variant:"destructive"}),console.log("🔄 Redirecionando para /login devido a erro no token"),window.location.href="/login"}}else console.log("❌ Token ou userType ausentes"),s({title:"Erro na autenticação",description:"Dados de autenticação inválidos",variant:"destructive"}),console.log("🔄 Redirecionando para /login devido a dados inválidos"),window.location.href="/login"},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Zl,{size:48,className:"text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"LifeBee"}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:"Cuidados Profissionais"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processando autenticação..."})]})]})})}function JN(){sr();const{user:s}=lr(),[t,r]=P.useState(null);return P.useEffect(()=>{const a=new URLSearchParams(window.location.search),i=a.get("payment_id"),l=a.get("status"),d=a.get("external_reference");i&&l&&d&&r({paymentId:i,status:l,externalReference:d})},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 flex items-center justify-center p-4",children:e.jsxs(lt,{className:"max-w-md w-full",children:[e.jsxs(rs,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(fs,{className:"h-8 w-8 text-green-500"})}),e.jsx(us,{className:"text-2xl text-green-700",children:"Pagamento Aprovado!"})]}),e.jsxs(ct,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Seu pagamento foi processado com sucesso. O profissional foi notificado e em breve entrará em contato."}),t&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:"ID do Pagamento:"}),e.jsx("span",{className:"font-mono",children:t.paymentId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-medium text-green-600",children:t.status==="approved"?"Aprovado":t.status})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Próximos passos:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"O profissional foi notificado sobre o pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Ele entrará em contato para agendar o serviço"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Após a conclusão, você poderá avaliar o serviço"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Me,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsxs(ks,{href:"/services",children:[e.jsx(M1,{className:"h-4 w-4 mr-2"}),"Meus Serviços"]})}),e.jsx(Me,{asChild:!0,className:"flex-1",children:e.jsxs(ks,{href:s?.userType==="client"?"/home":"/provider-dashboard",children:[e.jsx(ul,{className:"h-4 w-4 mr-2"}),"Início"]})})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Você receberá um e-mail de confirmação em breve"})})]})]})})}function QN(){sr();const{user:s}=lr(),[t,r]=P.useState(null);P.useEffect(()=>{const l=new URLSearchParams(window.location.search),d=l.get("payment_id"),u=l.get("status"),h=l.get("external_reference");d&&u&&h&&r({paymentId:d,status:u,externalReference:h})},[]);const a=l=>{switch(l){case"rejected":return"Pagamento rejeitado";case"cancelled":return"Pagamento cancelado";case"failed":return"Falha no pagamento";default:return"Pagamento não processado"}},i=l=>{switch(l){case"rejected":return"O pagamento foi rejeitado. Isso pode acontecer por falta de limite, dados incorretos ou outros motivos relacionados ao método de pagamento.";case"cancelled":return"O pagamento foi cancelado. Você pode tentar novamente quando desejar.";case"failed":return"Ocorreu uma falha técnica durante o processamento do pagamento.";default:return"Não foi possível processar seu pagamento no momento."}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center p-4",children:e.jsxs(lt,{className:"max-w-md w-full",children:[e.jsxs(rs,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ai,{className:"h-8 w-8 text-red-500"})}),e.jsx(us,{className:"text-2xl text-red-700",children:t?a(t.status):"Pagamento não processado"})]}),e.jsxs(ct,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:t?i(t.status):"Ocorreu um problema durante o processamento do seu pagamento."}),t&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:"ID do Pagamento:"}),e.jsx("span",{className:"font-mono",children:t.paymentId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-medium text-red-600",children:a(t.status)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"O que você pode fazer:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Verificar os dados do cartão ou método de pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Tentar novamente com outro método de pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Entrar em contato com nosso suporte se o problema persistir"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Me,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsxs(ks,{href:"/services",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Voltar"]})}),e.jsx(Me,{asChild:!0,className:"flex-1",children:e.jsxs(ks,{href:s?.userType==="client"?"/home":"/provider-dashboard",children:[e.jsx(ul,{className:"h-4 w-4 mr-2"}),"Início"]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs(Me,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[e.jsx(Ec,{className:"h-4 w-4 mr-2"}),"Tentar pagamento novamente"]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Se precisar de ajuda, entre em contato conosco"})})]})]})})}function XN(){sr();const{user:s}=lr(),[t,r]=P.useState(null);return P.useEffect(()=>{const a=new URLSearchParams(window.location.search),i=a.get("payment_id"),l=a.get("status"),d=a.get("external_reference");i&&l&&d&&r({paymentId:i,status:l,externalReference:d})},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs(lt,{className:"max-w-md w-full",children:[e.jsxs(rs,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(or,{className:"h-8 w-8 text-yellow-500"})}),e.jsx(us,{className:"text-2xl text-yellow-700",children:"Pagamento Pendente"})]}),e.jsxs(ct,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Seu pagamento está sendo processado. Isso pode levar alguns minutos para ser confirmado."}),t&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:"ID do Pagamento:"}),e.jsx("span",{className:"font-mono",children:t.paymentId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:"Processando"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"O que acontece agora:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Aguardando confirmação do pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Você receberá uma notificação quando for aprovado"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"O profissional será notificado automaticamente"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Para pagamentos via PIX ou Boleto:"}),e.jsx("p",{className:"text-sm text-blue-700",children:"O pagamento pode levar até 1 hora para ser processado. Você receberá um e-mail de confirmação assim que for aprovado."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Me,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsxs(ks,{href:"/services",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Meus Serviços"]})}),e.jsx(Me,{asChild:!0,className:"flex-1",children:e.jsxs(ks,{href:s?.userType==="client"?"/home":"/provider-dashboard",children:[e.jsx(ul,{className:"h-4 w-4 mr-2"}),"Início"]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs(Me,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",onClick:()=>window.location.reload(),children:[e.jsx(Ec,{className:"h-4 w-4 mr-2"}),"Verificar status"]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Esta página será atualizada automaticamente quando o pagamento for processado"})})]})]})})}function ej(){const{user:s,isLoading:t,isAuthenticated:r}=lr();return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full"})}):r?s?.userType==="provider"?e.jsxs(kd,{children:[e.jsx(ss,{path:"/",component:Bf}),e.jsx(ss,{path:"/provider-dashboard",component:Bf}),e.jsx(ss,{path:"/provider-registration",children:e.jsx(_N,{onComplete:()=>window.location.reload()})}),e.jsx(ss,{path:"/provider-orders",component:SN}),e.jsx(ss,{path:"/provider-proposals",component:PN}),e.jsx(ss,{path:"/service-offer/:id",component:CN}),e.jsx(ss,{path:"/messages/:conversationId",component:vc}),e.jsx(ss,{path:"/messages",component:vc}),e.jsx(ss,{path:"/messages-provider/:conversationId",component:vc}),e.jsx(ss,{path:"/messages-provider",component:vc}),e.jsx(ss,{path:"/agenda",component:nf}),e.jsx(ss,{path:"/agenda-profissional",component:YN}),e.jsx(ss,{path:"/profile",component:af}),e.jsx(ss,{path:"/provider-profile",component:kN}),e.jsx(ss,{path:"/settings",component:of}),e.jsx(ss,{component:Hf})]}):e.jsxs(kd,{children:[e.jsx(ss,{path:"/",component:A2}),e.jsx(ss,{path:"/services",component:VN}),e.jsx(ss,{path:"/my-service-requests",component:ZN}),e.jsx(ss,{path:"/agenda",component:nf}),e.jsx(ss,{path:"/messages/:conversationId",component:$f}),e.jsx(ss,{path:"/messages",component:$f}),e.jsx(ss,{path:"/profile",component:af}),e.jsx(ss,{path:"/settings",component:of}),e.jsx(ss,{path:"/payment",component:Tb}),e.jsx(ss,{path:"/payment/success",component:JN}),e.jsx(ss,{path:"/payment/failure",component:QN}),e.jsx(ss,{path:"/payment/pending",component:XN}),e.jsx(ss,{path:"/professional/:id",component:Rb}),e.jsx(ss,{path:"/servico",component:LN}),e.jsx(ss,{path:"/my-requests",component:$N}),e.jsx(ss,{component:Hf})]}):e.jsxs(kd,{children:[e.jsx(ss,{path:"/auth-callback",component:KN}),e.jsx(ss,{path:"*",children:e.jsx(GN,{onLogin:()=>{window.location.reload()}})})]})}function tj(){const[s,t]=P.useState(!0);return e.jsx(km,{client:Cm,children:e.jsx(Am,{defaultTheme:"light",storageKey:"lifebee-theme",children:e.jsxs(zp,{children:[s?e.jsx(L2,{onComplete:()=>t(!1)}):e.jsx(ej,{}),e.jsx(yp,{})]})})})}window.addEventListener("unhandledrejection",s=>{console.warn("Unhandled promise rejection:",s.reason),s.preventDefault()});window.addEventListener("error",s=>{console.warn("Uncaught error:",s.error)});(()=>{const s=()=>{try{const r=document.getElementById("torrent-scanner-popup");r&&r.parentNode&&r.parentNode.removeChild(r),document.querySelectorAll('[id*="torrent-scanner-popup"], [class*="torrent-scanner-popup"]').forEach(i=>i.parentNode&&i.parentNode.removeChild(i))}catch{}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s,{once:!0}):s();const t=new MutationObserver(r=>{for(const a of r)a.addedNodes.forEach(i=>{if(!(i instanceof HTMLElement))return;const l=i.id||"",d=i.className?.toString?.()||"";if(l.includes("torrent-scanner-popup")||d.includes("torrent-scanner-popup"))try{i.parentNode&&i.parentNode.removeChild(i)}catch{}i.querySelectorAll?.('[id*="torrent-scanner-popup"], [class*="torrent-scanner-popup"]')?.forEach(h=>{try{h.parentNode&&h.parentNode.removeChild(h)}catch{}})})});try{t.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})();mv.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(B1,{children:e.jsx(km,{client:Cm,children:e.jsxs(Am,{defaultTheme:"light",storageKey:"lifebee-ui-theme",children:[e.jsx(tj,{}),e.jsx(yp,{})]})})})}));export{js as _};
