const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BPoMe8la.js","assets/vendor-C6Ba5J37.js","assets/ui-BgcdD96O.js","assets/utils--BulIq_u.js"])))=>i.map(i=>d[i]);
import{r as P,j as e,P as cs,c as xo,a as Wf,u as Sr,B as $x,b as Qo,d as jh,e as Gt,f as Xo,g as _h,R as Ux,h as Vf,i as Kn,k as Wx,l as Vx,m as Bc,D as Zf,C as Gf,n as Yf,o as Hl,p as Kf,A as Jf,q as Qf,S as Zx,O as Sh,s as Xf,t as kh,v as Ch,T as Ph,w as Lh,x as em,y as tm,z as Gx,E as sm,F as Yx,I as Kx,G as rm,H as nm,J as am,K as Jx,L as im,M as om,N as lm,Q as cm,U as dm,V as hm,W as um,X as Qx,Y as Xx,Z as ev,_ as fm,$ as tv,a0 as sv,a1 as kc,a2 as rv,a3 as nv,a4 as av,a5 as iv,a6 as ov,a7 as mm,a8 as lv}from"./ui-BgcdD96O.js";import{a as cv,r as dv,g as hv}from"./vendor-C6Ba5J37.js";import{t as uv,c as fv,a as qc}from"./utils--BulIq_u.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var cc={},Lu;function mv(){if(Lu)return cc;Lu=1;var s=cv();return cc.createRoot=s.createRoot,cc.hydrateRoot=s.hydrateRoot,cc}var pv=mv(),dl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ho=typeof window>"u"||"Deno"in globalThis;function ln(){}function gv(s,t){return typeof s=="function"?s(t):s}function qd(s){return typeof s=="number"&&s>=0&&s!==1/0}function pm(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Ci(s,t){return typeof s=="function"?s(t):s}function ha(s,t){return typeof s=="function"?s(t):s}function Au(s,t){const{type:r="all",exact:a,fetchStatus:i,predicate:l,queryKey:d,stale:u}=s;if(d){if(a){if(t.queryHash!==Ah(d,t.options))return!1}else if(!Il(t.queryKey,d))return!1}if(r!=="all"){const h=t.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||i&&i!==t.state.fetchStatus||l&&!l(t))}function Tu(s,t){const{exact:r,status:a,predicate:i,mutationKey:l}=s;if(l){if(!t.options.mutationKey)return!1;if(r){if(uo(t.options.mutationKey)!==uo(l))return!1}else if(!Il(t.options.mutationKey,l))return!1}return!(a&&t.state.status!==a||i&&!i(t))}function Ah(s,t){return(t?.queryKeyHashFn||uo)(s)}function uo(s){return JSON.stringify(s,(t,r)=>Hd(r)?Object.keys(r).sort().reduce((a,i)=>(a[i]=r[i],a),{}):r)}function Il(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(r=>Il(s[r],t[r])):!1}function gm(s,t){if(s===t)return s;const r=Eu(s)&&Eu(t);if(r||Hd(s)&&Hd(t)){const a=r?s:Object.keys(s),i=a.length,l=r?t:Object.keys(t),d=l.length,u=r?[]:{},h=new Set(a);let p=0;for(let v=0;v<d;v++){const y=r?v:l[v];(!r&&h.has(y)||r)&&s[y]===void 0&&t[y]===void 0?(u[y]=void 0,p++):(u[y]=gm(s[y],t[y]),u[y]===s[y]&&s[y]!==void 0&&p++)}return i===d&&p===i?s:u}return t}function Cc(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(s[r]!==t[r])return!1;return!0}function Eu(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Hd(s){if(!Mu(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Mu(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Mu(s){return Object.prototype.toString.call(s)==="[object Object]"}function xv(s){return new Promise(t=>{setTimeout(t,s)})}function $d(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?gm(s,t):t}function vv(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function yv(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var Th=Symbol();function xm(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===Th?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function vm(s,t){return typeof s=="function"?s(...t):!!s}var bv=class extends dl{#t;#e;#s;constructor(){super(),this.#s=s=>{if(!ho&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#s=s,this.#e?.(),this.#e=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#t!==s&&(this.#t=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Eh=new bv,wv=class extends dl{#t=!0;#e;#s;constructor(){super(),this.#s=s=>{if(!ho&&window.addEventListener){const t=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#s=s,this.#e?.(),this.#e=s(this.setOnline.bind(this))}setOnline(s){this.#t!==s&&(this.#t=s,this.listeners.forEach(r=>{r(s)}))}isOnline(){return this.#t}},Pc=new wv;function Ud(){let s,t;const r=new Promise((i,l)=>{s=i,t=l});r.status="pending",r.catch(()=>{});function a(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{a({status:"fulfilled",value:i}),s(i)},r.reject=i=>{a({status:"rejected",reason:i}),t(i)},r}function Nv(s){return Math.min(1e3*2**s,3e4)}function ym(s){return(s??"online")==="online"?Pc.isOnline():!0}var bm=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function yd(s){return s instanceof bm}function wm(s){let t=!1,r=0,a=!1,i;const l=Ud(),d=j=>{a||(N(new bm(j)),s.abort?.())},u=()=>{t=!0},h=()=>{t=!1},p=()=>Eh.isFocused()&&(s.networkMode==="always"||Pc.isOnline())&&s.canRun(),v=()=>ym(s.networkMode)&&s.canRun(),y=j=>{a||(a=!0,s.onSuccess?.(j),i?.(),l.resolve(j))},N=j=>{a||(a=!0,s.onError?.(j),i?.(),l.reject(j))},g=()=>new Promise(j=>{i=T=>{(a||p())&&j(T)},s.onPause?.()}).then(()=>{i=void 0,a||s.onContinue?.()}),C=()=>{if(a)return;let j;const T=r===0?s.initialPromise:void 0;try{j=T??s.fn()}catch(A){j=Promise.reject(A)}Promise.resolve(j).then(y).catch(A=>{if(a)return;const S=s.retry??(ho?0:3),$=s.retryDelay??Nv,V=typeof $=="function"?$(r,A):$,K=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,A);if(t||!K){N(A);return}r++,s.onFail?.(r,A),xv(V).then(()=>p()?void 0:g()).then(()=>{t?N(A):C()})})};return{promise:l,cancel:d,continue:()=>(i?.(),l),cancelRetry:u,continueRetry:h,canStart:v,start:()=>(v()?C():g().then(C),l)}}var jv=s=>setTimeout(s,0);function _v(){let s=[],t=0,r=u=>{u()},a=u=>{u()},i=jv;const l=u=>{t?s.push(u):i(()=>{r(u)})},d=()=>{const u=s;s=[],u.length&&i(()=>{a(()=>{u.forEach(h=>{r(h)})})})};return{batch:u=>{let h;t++;try{h=u()}finally{t--,t||d()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{a=u},setScheduler:u=>{i=u}}}var fr=_v(),Nm=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qd(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(ho?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},Sv=class extends Nm{#t;#e;#s;#r;#n;#i;#o;constructor(s){super(),this.#o=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#r=s.client,this.#s=this.#r.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#t=kv(this.options),this.state=s.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(s){this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(s,t){const r=$d(this.state.data,s,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(s,t){this.#a({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#n?.promise;return this.#n?.cancel(s),t?t.then(ln).catch(ln):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(s=>ha(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Th||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Ci(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!pm(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(s,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(s&&this.setOptions(s),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},i=()=>{const h=xm(this.options,t),v=(()=>{const y={client:this.#r,queryKey:this.queryKey,meta:this.meta};return a(y),y})();return this.#o=!1,this.options.persister?this.options.persister(h,v,this):h(v)},d=(()=>{const h={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};return a(h),h})();this.options.behavior?.onFetch(d,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta});const u=h=>{yd(h)&&h.silent||this.#a({type:"error",error:h}),yd(h)||(this.#s.config.onError?.(h,this),this.#s.config.onSettled?.(this.state.data,h,this)),this.scheduleGc()};return this.#n=wm({initialPromise:t?.initialPromise,fn:d.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{if(h===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(p){u(p);return}this.#s.config.onSuccess?.(h,this),this.#s.config.onSettled?.(h,this.state.error,this),this.scheduleGc()},onError:u,onFail:(h,p)=>{this.#a({type:"failed",failureCount:h,error:p})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(s){const t=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...jm(r.data,this.options),fetchMeta:s.meta??null};case"success":return this.#e=void 0,{...r,data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=s.error;return yd(a)&&a.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=t(this.state),fr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:s})})}};function jm(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ym(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function kv(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Cv=class extends dl{constructor(s={}){super(),this.config=s,this.#t=new Map}#t;build(s,t,r){const a=t.queryKey,i=t.queryHash??Ah(a,t);let l=this.get(i);return l||(l=new Sv({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(t),state:r,defaultOptions:s.getQueryDefaults(a)}),this.add(l)),l}add(s){this.#t.has(s.queryHash)||(this.#t.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#t.get(s.queryHash);t&&(s.destroy(),t===s&&this.#t.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){fr.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#t.get(s)}getAll(){return[...this.#t.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(r=>Au(t,r))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(r=>Au(s,r)):t}notify(s){fr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){fr.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){fr.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Pv=class extends Nm{#t;#e;#s;constructor(s){super(),this.mutationId=s.mutationId,this.#e=s.mutationCache,this.#t=[],this.state=s.state||_m(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(t=>t!==s),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(s){const t=()=>{this.#r({type:"continue"})};this.#s=wm({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(i,l)=>{this.#r({type:"failed",failureCount:i,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",a=!this.#s.canStart();try{if(r)t();else{this.#r({type:"pending",variables:s,isPaused:a}),await this.#e.config.onMutate?.(s,this);const l=await this.options.onMutate?.(s);l!==this.state.context&&this.#r({type:"pending",context:l,variables:s,isPaused:a})}const i=await this.#s.start();return await this.#e.config.onSuccess?.(i,s,this.state.context,this),await this.options.onSuccess?.(i,s,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,s,this.state.context),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,s,this.state.context,this),await this.options.onError?.(i,s,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,s,this.state.context),i}finally{this.#r({type:"error",error:i})}}finally{this.#e.runNext(this)}}#r(s){const t=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),fr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(s)}),this.#e.notify({mutation:this,type:"updated",action:s})})}};function _m(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lv=class extends dl{constructor(s={}){super(),this.config=s,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(s,t,r){const a=new Pv({mutationCache:this,mutationId:++this.#s,options:s.defaultMutationOptions(t),state:r});return this.add(a),a}add(s){this.#t.add(s);const t=dc(s);if(typeof t=="string"){const r=this.#e.get(t);r?r.push(s):this.#e.set(t,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#t.delete(s)){const t=dc(s);if(typeof t=="string"){const r=this.#e.get(t);if(r)if(r.length>1){const a=r.indexOf(s);a!==-1&&r.splice(a,1)}else r[0]===s&&this.#e.delete(t)}}this.notify({type:"removed",mutation:s})}canRun(s){const t=dc(s);if(typeof t=="string"){const a=this.#e.get(t)?.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){const t=dc(s);return typeof t=="string"?this.#e.get(t)?.find(a=>a!==s&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){fr.batch(()=>{this.#t.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(s){const t={exact:!0,...s};return this.getAll().find(r=>Tu(t,r))}findAll(s={}){return this.getAll().filter(t=>Tu(s,t))}notify(s){fr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return fr.batch(()=>Promise.all(s.map(t=>t.continue().catch(ln))))}};function dc(s){return s.options.scope?.id}function Iu(s){return{onFetch:(t,r)=>{const a=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const p=async()=>{let v=!1;const y=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},N=xm(t.options,t.fetchOptions),g=async(C,j,T)=>{if(v)return Promise.reject();if(j==null&&C.pages.length)return Promise.resolve(C);const S=(()=>{const me={client:t.client,queryKey:t.queryKey,pageParam:j,direction:T?"backward":"forward",meta:t.options.meta};return y(me),me})(),$=await N(S),{maxPages:V}=t.options,K=T?yv:vv;return{pages:K(C.pages,$,V),pageParams:K(C.pageParams,j,V)}};if(i&&l.length){const C=i==="backward",j=C?Av:Ru,T={pages:l,pageParams:d},A=j(a,T);u=await g(T,A,C)}else{const C=s??l.length;do{const j=h===0?d[0]??a.initialPageParam:Ru(a,u);if(h>0&&j==null)break;u=await g(u,j),h++}while(h<C)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=p}}}function Ru(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function Av(s,{pages:t,pageParams:r}){return t.length>0?s.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Sm=class{#t;#e;#s;#r;#n;#i;#o;#a;constructor(s={}){this.#t=s.queryCache||new Cv,this.#e=s.mutationCache||new Lv,this.#s=s.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=Eh.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=Pc.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(s){return this.#t.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#e.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),r=this.#t.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(Ci(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(s){return this.#t.findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),l=this.#t.get(a.queryHash)?.state.data,d=gv(t,l);if(d!==void 0)return this.#t.build(this,a).setData(d,{...r,manual:!0})}setQueriesData(s,t,r){return fr.batch(()=>this.#t.findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state}removeQueries(s){const t=this.#t;fr.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=this.#t;return fr.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const r={revert:!0,...t},a=fr.batch(()=>this.#t.findAll(s).map(i=>i.cancel(r)));return Promise.all(a).then(ln).catch(ln)}invalidateQueries(s,t={}){return fr.batch(()=>(this.#t.findAll(s).forEach(r=>{r.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},t)))}refetchQueries(s,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=fr.batch(()=>this.#t.findAll(s).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let l=i.fetch(void 0,r);return r.throwOnError||(l=l.catch(ln)),i.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(ln)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=this.#t.build(this,t);return r.isStaleByTime(Ci(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(ln).catch(ln)}fetchInfiniteQuery(s){return s.behavior=Iu(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(ln).catch(ln)}ensureInfiniteQueryData(s){return s.behavior=Iu(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Pc.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(s){this.#s=s}setQueryDefaults(s,t){this.#r.set(uo(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#r.values()],r={};return t.forEach(a=>{Il(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,t){this.#n.set(uo(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#n.values()],r={};return t.forEach(a=>{Il(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#s.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=Ah(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Th&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#s.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Tv=class extends dl{constructor(s,t){super(),this.options=t,this.#t=s,this.#a=null,this.#o=Ud(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#s=void 0;#r=void 0;#n;#i;#o;#a;#p;#u;#f;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Ou(this.#e,this.options)?this.#h():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wd(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wd(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#e.removeObserver(this)}setOptions(s){const t=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ha(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),t._defaulted&&!Cc(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const a=this.hasListeners();a&&Du(this.#e,r,this.options,t)&&this.#h(),this.updateResult(),a&&(this.#e!==r||ha(this.options.enabled,this.#e)!==ha(t.enabled,this.#e)||Ci(this.options.staleTime,this.#e)!==Ci(t.staleTime,this.#e))&&this.#g();const i=this.#x();a&&(this.#e!==r||ha(this.options.enabled,this.#e)!==ha(t.enabled,this.#e)||i!==this.#l)&&this.#v(i)}getOptimisticResult(s){const t=this.#t.getQueryCache().build(this.#t,s),r=this.createResult(t,s);return Mv(this,r)&&(this.#r=r,this.#i=this.options,this.#n=this.#e.state),r}getCurrentResult(){return this.#r}trackResult(s,t){return new Proxy(s,{get:(r,a)=>(this.trackProp(a),t?.(a),Reflect.get(r,a))})}trackProp(s){this.#m.add(s)}getCurrentQuery(){return this.#e}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const t=this.#t.defaultQueryOptions(s),r=this.#t.getQueryCache().build(this.#t,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(s){return this.#h({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(s){this.#N();let t=this.#e.fetch(this.options,s);return s?.throwOnError||(t=t.catch(ln)),t}#g(){this.#b();const s=Ci(this.options.staleTime,this.#e);if(ho||this.#r.isStale||!qd(s))return;const r=pm(this.#r.dataUpdatedAt,s)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(s){this.#w(),this.#l=s,!(ho||ha(this.options.enabled,this.#e)===!1||!qd(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||Eh.isFocused())&&this.#h()},this.#l))}#y(){this.#g(),this.#v(this.#x())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(s,t){const r=this.#e,a=this.options,i=this.#r,l=this.#n,d=this.#i,h=s!==r?s.state:this.#s,{state:p}=s;let v={...p},y=!1,N;if(t._optimisticResults){const X=this.hasListeners(),ee=!X&&Ou(s,t),je=X&&Du(s,r,t,a);(ee||je)&&(v={...v,...jm(p.data,s.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:g,errorUpdatedAt:C,status:j}=v;N=v.data;let T=!1;if(t.placeholderData!==void 0&&N===void 0&&j==="pending"){let X;i?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(X=i.data,T=!0):X=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,X!==void 0&&(j="success",N=$d(i?.data,X,t),y=!0)}if(t.select&&N!==void 0&&!T)if(i&&N===l?.data&&t.select===this.#p)N=this.#u;else try{this.#p=t.select,N=t.select(N),N=$d(i?.data,N,t),this.#u=N,this.#a=null}catch(X){this.#a=X}this.#a&&(g=this.#a,N=this.#u,C=Date.now(),j="error");const A=v.fetchStatus==="fetching",S=j==="pending",$=j==="error",V=S&&A,K=N!==void 0,le={status:j,fetchStatus:v.fetchStatus,isPending:S,isSuccess:j==="success",isError:$,isInitialLoading:V,isLoading:V,data:N,dataUpdatedAt:v.dataUpdatedAt,error:g,errorUpdatedAt:C,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>h.dataUpdateCount||v.errorUpdateCount>h.errorUpdateCount,isFetching:A,isRefetching:A&&!S,isLoadingError:$&&!K,isPaused:v.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:$&&K,isStale:Mh(s,t),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const X=R=>{le.status==="error"?R.reject(le.error):le.data!==void 0&&R.resolve(le.data)},ee=()=>{const R=this.#o=le.promise=Ud();X(R)},je=this.#o;switch(je.status){case"pending":s.queryHash===r.queryHash&&X(je);break;case"fulfilled":(le.status==="error"||le.data!==je.value)&&ee();break;case"rejected":(le.status!=="error"||le.error!==je.reason)&&ee();break}}return le}updateResult(){const s=this.#r,t=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#i=this.options,this.#n.data!==void 0&&(this.#f=this.#e),Cc(t,s))return;this.#r=t;const r=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!this.#m.size)return!0;const l=new Set(i??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(d=>{const u=d;return this.#r[u]!==s[u]&&l.has(u)})};this.#j({listeners:r()})}#N(){const s=this.#t.getQueryCache().build(this.#t,this.options);if(s===this.#e)return;const t=this.#e;this.#e=s,this.#s=s.state,this.hasListeners()&&(t?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#j(s){fr.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Ev(s,t){return ha(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function Ou(s,t){return Ev(s,t)||s.state.data!==void 0&&Wd(s,t,t.refetchOnMount)}function Wd(s,t,r){if(ha(t.enabled,s)!==!1&&Ci(t.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&Mh(s,t)}return!1}function Du(s,t,r,a){return(s!==t||ha(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&Mh(s,r)}function Mh(s,t){return ha(t.enabled,s)!==!1&&s.isStaleByTime(Ci(t.staleTime,s))}function Mv(s,t){return!Cc(s.getCurrentResult(),t)}var Iv=class extends dl{#t;#e=void 0;#s;#r;constructor(t,r){super(),this.#t=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#t.defaultMutationOptions(t),Cc(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&uo(r.mutationKey)!==uo(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(t,r){return this.#r=r,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){const t=this.#s?.state??_m();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){fr.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#e.variables,a=this.#e.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,r,a),this.#r.onSettled?.(t.data,null,r,a)):t?.type==="error"&&(this.#r.onError?.(t.error,r,a),this.#r.onSettled?.(void 0,t.error,r,a))}this.listeners.forEach(r=>{r(this.#e)})})}},km=P.createContext(void 0),Ih=s=>{const t=P.useContext(km);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Cm=({client:s,children:t})=>(P.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(km.Provider,{value:s,children:t})),Pm=P.createContext(!1),Rv=()=>P.useContext(Pm);Pm.Provider;function Ov(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Dv=P.createContext(Ov()),Fv=()=>P.useContext(Dv),zv=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},Bv=s=>{P.useEffect(()=>{s.clearReset()},[s])},qv=({result:s,errorResetBoundary:t,throwOnError:r,query:a,suspense:i})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&(i&&s.data===void 0||vm(r,[s.error,a])),Hv=s=>{if(s.suspense){const t=a=>a==="static"?a:Math.max(a??1e3,1e3),r=s.staleTime;s.staleTime=typeof r=="function"?(...a)=>t(r(...a)):t(r),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},$v=(s,t)=>s.isLoading&&s.isFetching&&!t,Uv=(s,t)=>s?.suspense&&t.isPending,Fu=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function Wv(s,t,r){const a=Rv(),i=Fv(),l=Ih(),d=l.defaultQueryOptions(s);l.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=a?"isRestoring":"optimistic",Hv(d),zv(d,i),Bv(i);const u=!l.getQueryCache().get(d.queryHash),[h]=P.useState(()=>new t(l,d)),p=h.getOptimisticResult(d),v=!a&&s.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(y=>{const N=v?h.subscribe(fr.batchCalls(y)):ln;return h.updateResult(),N},[h,v]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),P.useEffect(()=>{h.setOptions(d)},[d,h]),Uv(d,p))throw Fu(d,h,i);if(qv({result:p,errorResetBoundary:i,throwOnError:d.throwOnError,query:l.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw p.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(d,p),d.experimental_prefetchInRender&&!ho&&$v(p,a)&&(u?Fu(d,h,i):l.getQueryCache().get(d.queryHash)?.promise)?.catch(ln).finally(()=>{h.updateResult()}),d.notifyOnChangeProps?p:h.trackResult(p)}function Lc(s,t){return Wv(s,Tv)}function zu(s,t){const r=Ih(),[a]=P.useState(()=>new Iv(r,s));P.useEffect(()=>{a.setOptions(s)},[a,s]);const i=P.useSyncExternalStore(P.useCallback(d=>a.subscribe(fr.batchCalls(d)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=P.useCallback((d,u)=>{a.mutate(d,u).catch(ln)},[a]);if(i.error&&vm(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:l,mutateAsync:i.mutate}}const Vv={development:{baseUrl:"http://localhost:8080"},production:{baseUrl:"http://localhost:8080"}},ft=()=>Vv["production"]?.baseUrl;async function Zv(s){const t=ft(),r=s.startsWith("http")?s:`${t}${s}`,a=localStorage.getItem("token"),i={"Content-Type":"application/json",Accept:"application/json"};a&&(i.Authorization=`Bearer ${a}`);try{const l=await fetch(r,{method:"GET",headers:i,mode:"cors",credentials:"include"});return l.ok?await l.json():null}catch{return null}}const Gv=async({queryKey:s})=>await Zv(s[0]),Lm=new Sm({defaultOptions:{queries:{queryFn:Gv,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:5*60*1e3},mutations:{retry:!1}}}),Yv={theme:"system",setTheme:()=>null},Am=P.createContext(Yv);function Tm({children:s,defaultTheme:t="system",storageKey:r="lifebee-ui-theme",...a}){const[i,l]=P.useState(()=>{try{return localStorage.getItem(r)||t}catch{return t}});P.useEffect(()=>{const u=window.document.documentElement;if(u.classList.remove("light","dark"),i==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u.classList.add(h);return}u.classList.add(i)},[i]);const d={theme:i,setTheme:u=>{try{localStorage.setItem(r,u)}catch{}l(u)}};return e.jsx(Am.Provider,{...a,value:d,children:s})}const Em=()=>{const s=P.useContext(Am);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},Kv=1,Jv=1e6;let bd=0;function Qv(){return bd=(bd+1)%Number.MAX_SAFE_INTEGER,bd.toString()}const wd=new Map,Bu=s=>{if(wd.has(s))return;const t=setTimeout(()=>{wd.delete(s),Ll({type:"REMOVE_TOAST",toastId:s})},Jv);wd.set(s,t)},Xv=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,Kv)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Bu(r):s.toasts.forEach(a=>{Bu(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},vc=[];let yc={toasts:[]};function Ll(s){yc=Xv(yc,s),vc.forEach(t=>{t(yc)})}function e1({...s}){const t=Qv(),r=i=>Ll({type:"UPDATE_TOAST",toast:{...i,id:t}}),a=()=>Ll({type:"DISMISS_TOAST",toastId:t});return Ll({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:i=>{i||a()}}}),{id:t,dismiss:a,update:r}}function qs(){const[s,t]=P.useState(yc);return P.useEffect(()=>(vc.push(t),()=>{const r=vc.indexOf(t);r>-1&&vc.splice(r,1)}),[s]),{...s,toast:e1,dismiss:r=>Ll({type:"DISMISS_TOAST",toastId:r})}}var Mm=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),t1="VisuallyHidden",Hc=P.forwardRef((s,t)=>e.jsx(cs.span,{...s,ref:t,style:{...Mm,...s.style}}));Hc.displayName=t1;var s1=Hc,Rh="ToastProvider",[Oh,r1,n1]=Wf("Toast"),[Im,ej]=xo("Toast",[n1]),[a1,$c]=Im(Rh),Rm=s=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:i="right",swipeThreshold:l=50,children:d}=s,[u,h]=P.useState(null),[p,v]=P.useState(0),y=P.useRef(!1),N=P.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Rh}\`. Expected non-empty \`string\`.`),e.jsx(Oh.Provider,{scope:t,children:e.jsx(a1,{scope:t,label:r,duration:a,swipeDirection:i,swipeThreshold:l,toastCount:p,viewport:u,onViewportChange:h,onToastAdd:P.useCallback(()=>v(g=>g+1),[]),onToastRemove:P.useCallback(()=>v(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:N,children:d})})};Rm.displayName=Rh;var Om="ToastViewport",i1=["F8"],Vd="toast.viewportPause",Zd="toast.viewportResume",Dm=P.forwardRef((s,t)=>{const{__scopeToast:r,hotkey:a=i1,label:i="Notifications ({hotkey})",...l}=s,d=$c(Om,r),u=r1(r),h=P.useRef(null),p=P.useRef(null),v=P.useRef(null),y=P.useRef(null),N=Sr(t,y,d.onViewportChange),g=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=d.toastCount>0;P.useEffect(()=>{const T=A=>{a.length!==0&&a.every($=>A[$]||A.code===$)&&y.current?.focus()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[a]),P.useEffect(()=>{const T=h.current,A=y.current;if(C&&T&&A){const S=()=>{if(!d.isClosePausedRef.current){const me=new CustomEvent(Vd);A.dispatchEvent(me),d.isClosePausedRef.current=!0}},$=()=>{if(d.isClosePausedRef.current){const me=new CustomEvent(Zd);A.dispatchEvent(me),d.isClosePausedRef.current=!1}},V=me=>{!T.contains(me.relatedTarget)&&$()},K=()=>{T.contains(document.activeElement)||$()};return T.addEventListener("focusin",S),T.addEventListener("focusout",V),T.addEventListener("pointermove",S),T.addEventListener("pointerleave",K),window.addEventListener("blur",S),window.addEventListener("focus",$),()=>{T.removeEventListener("focusin",S),T.removeEventListener("focusout",V),T.removeEventListener("pointermove",S),T.removeEventListener("pointerleave",K),window.removeEventListener("blur",S),window.removeEventListener("focus",$)}}},[C,d.isClosePausedRef]);const j=P.useCallback(({tabbingDirection:T})=>{const S=u().map($=>{const V=$.ref.current,K=[V,...y1(V)];return T==="forwards"?K:K.reverse()});return(T==="forwards"?S.reverse():S).flat()},[u]);return P.useEffect(()=>{const T=y.current;if(T){const A=S=>{const $=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!$){const K=document.activeElement,me=S.shiftKey;if(S.target===T&&me){p.current?.focus();return}const ee=j({tabbingDirection:me?"backwards":"forwards"}),je=ee.findIndex(R=>R===K);Nd(ee.slice(je+1))?S.preventDefault():me?p.current?.focus():v.current?.focus()}};return T.addEventListener("keydown",A),()=>T.removeEventListener("keydown",A)}},[u,j]),e.jsxs($x,{ref:h,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:C?void 0:"none"},children:[C&&e.jsx(Gd,{ref:p,onFocusFromOutsideViewport:()=>{const T=j({tabbingDirection:"forwards"});Nd(T)}}),e.jsx(Oh.Slot,{scope:r,children:e.jsx(cs.ol,{tabIndex:-1,...l,ref:N})}),C&&e.jsx(Gd,{ref:v,onFocusFromOutsideViewport:()=>{const T=j({tabbingDirection:"backwards"});Nd(T)}})]})});Dm.displayName=Om;var Fm="ToastFocusProxy",Gd=P.forwardRef((s,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...i}=s,l=$c(Fm,r);return e.jsx(Hc,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:d=>{const u=d.relatedTarget;!l.viewport?.contains(u)&&a()}})});Gd.displayName=Fm;var $l="Toast",o1="toast.swipeStart",l1="toast.swipeMove",c1="toast.swipeCancel",d1="toast.swipeEnd",zm=P.forwardRef((s,t)=>{const{forceMount:r,open:a,defaultOpen:i,onOpenChange:l,...d}=s,[u,h]=Qo({prop:a,defaultProp:i??!0,onChange:l,caller:$l});return e.jsx(jh,{present:r||u,children:e.jsx(f1,{open:u,...d,ref:t,onClose:()=>h(!1),onPause:Xo(s.onPause),onResume:Xo(s.onResume),onSwipeStart:Gt(s.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Gt(s.onSwipeMove,p=>{const{x:v,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${v}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Gt(s.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Gt(s.onSwipeEnd,p=>{const{x:v,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${v}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});zm.displayName=$l;var[h1,u1]=Im($l,{onClose(){}}),f1=P.forwardRef((s,t)=>{const{__scopeToast:r,type:a="foreground",duration:i,open:l,onClose:d,onEscapeKeyDown:u,onPause:h,onResume:p,onSwipeStart:v,onSwipeMove:y,onSwipeCancel:N,onSwipeEnd:g,...C}=s,j=$c($l,r),[T,A]=P.useState(null),S=Sr(t,B=>A(B)),$=P.useRef(null),V=P.useRef(null),K=i||j.duration,me=P.useRef(0),le=P.useRef(K),X=P.useRef(0),{onToastAdd:ee,onToastRemove:je}=j,R=Xo(()=>{T?.contains(document.activeElement)&&j.viewport?.focus(),d()}),z=P.useCallback(B=>{!B||B===1/0||(window.clearTimeout(X.current),me.current=new Date().getTime(),X.current=window.setTimeout(R,B))},[R]);P.useEffect(()=>{const B=j.viewport;if(B){const ge=()=>{z(le.current),p?.()},ue=()=>{const be=new Date().getTime()-me.current;le.current=le.current-be,window.clearTimeout(X.current),h?.()};return B.addEventListener(Vd,ue),B.addEventListener(Zd,ge),()=>{B.removeEventListener(Vd,ue),B.removeEventListener(Zd,ge)}}},[j.viewport,K,h,p,z]),P.useEffect(()=>{l&&!j.isClosePausedRef.current&&z(K)},[l,K,j.isClosePausedRef,z]),P.useEffect(()=>(ee(),()=>je()),[ee,je]);const q=P.useMemo(()=>T?Vm(T):null,[T]);return j.viewport?e.jsxs(e.Fragment,{children:[q&&e.jsx(m1,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),e.jsx(h1,{scope:r,onClose:R,children:_h.createPortal(e.jsx(Oh.ItemSlot,{scope:r,children:e.jsx(Ux,{asChild:!0,onEscapeKeyDown:Gt(u,()=>{j.isFocusedToastEscapeKeyDownRef.current||R(),j.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(cs.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":j.swipeDirection,...C,ref:S,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:Gt(s.onKeyDown,B=>{B.key==="Escape"&&(u?.(B.nativeEvent),B.nativeEvent.defaultPrevented||(j.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Gt(s.onPointerDown,B=>{B.button===0&&($.current={x:B.clientX,y:B.clientY})}),onPointerMove:Gt(s.onPointerMove,B=>{if(!$.current)return;const ge=B.clientX-$.current.x,ue=B.clientY-$.current.y,be=!!V.current,ne=["left","right"].includes(j.swipeDirection),ve=["left","up"].includes(j.swipeDirection)?Math.min:Math.max,ae=ne?ve(0,ge):0,fe=ne?0:ve(0,ue),E=B.pointerType==="touch"?10:2,W={x:ae,y:fe},Z={originalEvent:B,delta:W};be?(V.current=W,hc(l1,y,Z,{discrete:!1})):qu(W,j.swipeDirection,E)?(V.current=W,hc(o1,v,Z,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(ge)>E||Math.abs(ue)>E)&&($.current=null)}),onPointerUp:Gt(s.onPointerUp,B=>{const ge=V.current,ue=B.target;if(ue.hasPointerCapture(B.pointerId)&&ue.releasePointerCapture(B.pointerId),V.current=null,$.current=null,ge){const be=B.currentTarget,ne={originalEvent:B,delta:ge};qu(ge,j.swipeDirection,j.swipeThreshold)?hc(d1,g,ne,{discrete:!0}):hc(c1,N,ne,{discrete:!0}),be.addEventListener("click",ve=>ve.preventDefault(),{once:!0})}})})})}),j.viewport)})]}):null}),m1=s=>{const{__scopeToast:t,children:r,...a}=s,i=$c($l,t),[l,d]=P.useState(!1),[u,h]=P.useState(!1);return x1(()=>d(!0)),P.useEffect(()=>{const p=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:e.jsx(Vf,{asChild:!0,children:e.jsx(Hc,{...a,children:l&&e.jsxs(e.Fragment,{children:[i.label," ",r]})})})},p1="ToastTitle",Bm=P.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(cs.div,{...a,ref:t})});Bm.displayName=p1;var g1="ToastDescription",qm=P.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(cs.div,{...a,ref:t})});qm.displayName=g1;var Hm="ToastAction",$m=P.forwardRef((s,t)=>{const{altText:r,...a}=s;return r.trim()?e.jsx(Wm,{altText:r,asChild:!0,children:e.jsx(Dh,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Hm}\`. Expected non-empty \`string\`.`),null)});$m.displayName=Hm;var Um="ToastClose",Dh=P.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s,i=u1(Um,r);return e.jsx(Wm,{asChild:!0,children:e.jsx(cs.button,{type:"button",...a,ref:t,onClick:Gt(s.onClick,i.onClose)})})});Dh.displayName=Um;var Wm=P.forwardRef((s,t)=>{const{__scopeToast:r,altText:a,...i}=s;return e.jsx(cs.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...i,ref:t})});function Vm(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),v1(a)){const i=a.ariaHidden||a.hidden||a.style.display==="none",l=a.dataset.radixToastAnnounceExclude==="";if(!i)if(l){const d=a.dataset.radixToastAnnounceAlt;d&&t.push(d)}else t.push(...Vm(a))}}),t}function hc(s,t,r,{discrete:a}){const i=r.originalEvent.currentTarget,l=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(s,t,{once:!0}),a?Wx(i,l):i.dispatchEvent(l)}var qu=(s,t,r=0)=>{const a=Math.abs(s.x),i=Math.abs(s.y),l=a>i;return t==="left"||t==="right"?l&&a>r:!l&&i>r};function x1(s=()=>{}){const t=Xo(s);Kn(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function v1(s){return s.nodeType===s.ELEMENT_NODE}function y1(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const i=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||i?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Nd(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var b1=Rm,Zm=Dm,Gm=zm,Ym=Bm,Km=qm,Jm=$m,Qm=Dh;/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),at=(s,t)=>{const r=P.forwardRef(({color:a="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:h,...p},v)=>P.createElement("svg",{ref:v,...w1,width:i,height:i,stroke:a,strokeWidth:d?Number(l)*24/Number(i):l,className:["lucide",`lucide-${N1(s)}`,u].join(" "),...p},[...t.map(([y,N])=>P.createElement(y,N)),...Array.isArray(h)?h:[h]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=at("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=at("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=at("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=at("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=at("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=at("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=at("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=at("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=at("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=at("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=at("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=at("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=at("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=at("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=at("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=at("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=at("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=at("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=at("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=at("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=at("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=at("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=at("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=at("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=at("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=at("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=at("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=at("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=at("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=at("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=at("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=at("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=at("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=at("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=at("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=at("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=at("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=at("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=at("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=at("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=at("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=at("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=at("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=at("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=at("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=at("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=at("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=at("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=at("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=at("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=at("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=at("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=at("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=at("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=at("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=at("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=at("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=at("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=at("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=at("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=at("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=at("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=at("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=at("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=at("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=at("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function mt(...s){return uv(fv(s))}const R1=b1,mp=P.forwardRef(({className:s,...t},r)=>e.jsx(Zm,{ref:r,className:mt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] pointer-events-none",s),...t}));mp.displayName=Zm.displayName;const O1=qc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-xl",destructive:"destructive group border-red-200 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 shadow-xl"}},defaultVariants:{variant:"default"}}),pp=P.forwardRef(({className:s,variant:t,...r},a)=>e.jsx(Gm,{ref:a,className:mt(O1({variant:t}),s),...r}));pp.displayName=Gm.displayName;const D1=P.forwardRef(({className:s,...t},r)=>e.jsx(Jm,{ref:r,className:mt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));D1.displayName=Jm.displayName;const gp=P.forwardRef(({className:s,...t},r)=>e.jsx(Qm,{ref:r,className:mt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(hl,{className:"h-4 w-4"})}));gp.displayName=Qm.displayName;const xp=P.forwardRef(({className:s,...t},r)=>e.jsx(Ym,{ref:r,className:mt("text-sm font-semibold",s),...t}));xp.displayName=Ym.displayName;const vp=P.forwardRef(({className:s,...t},r)=>e.jsx(Km,{ref:r,className:mt("text-sm opacity-90",s),...t}));vp.displayName=Km.displayName;function yp(){const{toasts:s}=qs();return e.jsxs(R1,{children:[s.map(function({id:t,title:r,description:a,action:i,...l}){return e.jsxs(pp,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(xp,{children:r}),a&&e.jsx(vp,{children:a})]}),i,e.jsx(gp,{})]},t)}),e.jsx(mp,{})]})}class F1 extends P.Component{state={hasError:!1};static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.warn("Error caught by boundary:",t,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Algo deu errado"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Ocorreu um erro inesperado. Tente recarregar a página."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-500 text-black px-4 py-2 rounded-lg font-medium",children:"Recarregar página"})]})}):this.props.children}}function z1(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var r,a,i,l,d=[],u="",h=s.split("/");for(h[0]||h.shift();i=h.shift();)r=i[0],r==="*"?(d.push(r),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(a=i.indexOf("?",1),l=i.indexOf(".",1),d.push(i.substring(1,~a?a:~l?l:i.length)),u+=~a&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(u+=(~a?"?":"")+"\\"+i.substring(l))):u+="/"+i;return{keys:d,pattern:new RegExp("^"+u+(t?"(?=$|/)":"/?$"),"i")}}var jd={exports:{}},_d={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu;function B1(){if(Vu)return _d;Vu=1;var s=dv();function t(y,N){return y===N&&(y!==0||1/y===1/N)||y!==y&&N!==N}var r=typeof Object.is=="function"?Object.is:t,a=s.useState,i=s.useEffect,l=s.useLayoutEffect,d=s.useDebugValue;function u(y,N){var g=N(),C=a({inst:{value:g,getSnapshot:N}}),j=C[0].inst,T=C[1];return l(function(){j.value=g,j.getSnapshot=N,h(j)&&T({inst:j})},[y,g,N]),i(function(){return h(j)&&T({inst:j}),y(function(){h(j)&&T({inst:j})})},[y]),d(g),g}function h(y){var N=y.getSnapshot;y=y.value;try{var g=N();return!r(y,g)}catch{return!0}}function p(y,N){return N()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return _d.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:v,_d}var Zu;function q1(){return Zu||(Zu=1,jd.exports=B1()),jd.exports}var bp=q1();const H1=Vx.useInsertionEffect,$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U1=$1?P.useLayoutEffect:P.useEffect,W1=H1||U1,wp=s=>{const t=P.useRef([s,(...r)=>t[0](...r)]).current;return W1(()=>{t[0]=s}),t[1]},V1="popstate",Hh="pushState",$h="replaceState",Z1="hashchange",Gu=[V1,Hh,$h,Z1],G1=s=>{for(const t of Gu)addEventListener(t,s);return()=>{for(const t of Gu)removeEventListener(t,s)}},Np=(s,t)=>bp.useSyncExternalStore(G1,s,t),Y1=()=>location.search,K1=({ssrSearch:s=""}={})=>Np(Y1,()=>s),Yu=()=>location.pathname,J1=({ssrPath:s}={})=>Np(Yu,s?()=>s:Yu),Q1=(s,{replace:t=!1,state:r=null}={})=>history[t?$h:Hh](r,"",s),X1=(s={})=>[J1(s),Q1],Ku=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Ku]>"u"){for(const s of[Hh,$h]){const t=history[s];history[s]=function(){const r=t.apply(this,arguments),a=new Event(s);return a.arguments=arguments,dispatchEvent(a),r}}Object.defineProperty(window,Ku,{value:!0})}const e2=(s,t)=>t.toLowerCase().indexOf(s.toLowerCase())?"~"+t:t.slice(s.length)||"/",jp=(s="")=>s==="/"?"":s,t2=(s,t)=>s[0]==="~"?s.slice(1):jp(t)+s,s2=(s="",t)=>e2(Ju(jp(s)),Ju(t)),Ju=s=>{try{return decodeURI(s)}catch{return s}},_p={hook:X1,searchHook:K1,parser:z1,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:s=>s},Sp=P.createContext(_p),ul=()=>P.useContext(Sp),kp={},Cp=P.createContext(kp),Pp=()=>P.useContext(Cp),Uc=s=>{const[t,r]=s.hook(s);return[s2(s.base,t),wp((a,i)=>r(t2(a,s.base),i))]},_r=()=>Uc(ul()),Uh=(s,t,r,a)=>{const{pattern:i,keys:l}=t instanceof RegExp?{keys:!1,pattern:t}:s(t||"*",a),d=i.exec(r)||[],[u,...h]=d;return u!==void 0?[!0,(()=>{const p=l!==!1?Object.fromEntries(l.map((y,N)=>[y,h[N]])):d.groups;let v={...h};return p&&Object.assign(v,p),v})(),...a?[u]:[]]:[!1,null]},Lp=s=>Uh(ul().parser,s,_r()[0]),r2=({children:s,...t})=>{const r=ul(),a=t.hook?_p:r;let i=a;const[l,d]=t.ssrPath?.split("?")??[];d&&(t.ssrSearch=d,t.ssrPath=l),t.hrefs=t.hrefs??t.hook?.hrefs;let u=P.useRef({}),h=u.current,p=h;for(let v in a){const y=v==="base"?a[v]+(t[v]||""):t[v]||a[v];h===p&&y!==p[v]&&(u.current=p={...p}),p[v]=y,(y!==a[v]||y!==i[v])&&(i=p)}return P.createElement(Sp.Provider,{value:i,children:s})},Qu=({children:s,component:t},r)=>t?P.createElement(t,{params:r}):typeof s=="function"?s(r):s,n2=s=>{let t=P.useRef(kp);const r=t.current;return t.current=Object.keys(s).length!==Object.keys(r).length||Object.entries(s).some(([a,i])=>i!==r[a])?s:r},ls=({path:s,nest:t,match:r,...a})=>{const i=ul(),[l]=Uc(i),[d,u,h]=r??Uh(i.parser,s,l,t),p=n2({...Pp(),...u});if(!d)return null;const v=h?P.createElement(r2,{base:h},Qu(a,p)):Qu(a,p);return P.createElement(Cp.Provider,{value:p,children:v})},Gs=P.forwardRef((s,t)=>{const r=ul(),[a,i]=Uc(r),{to:l="",href:d=l,onClick:u,asChild:h,children:p,className:v,replace:y,state:N,...g}=s,C=wp(T=>{T.ctrlKey||T.metaKey||T.altKey||T.shiftKey||T.button!==0||(u?.(T),T.defaultPrevented||(T.preventDefault(),i(d,s)))}),j=r.hrefs(d[0]==="~"?d.slice(1):r.base+d,r);return h&&P.isValidElement(p)?P.cloneElement(p,{onClick:C,href:j}):P.createElement("a",{...g,onClick:C,href:j,className:v?.call?v(a===d):v,children:p,ref:t})}),Ap=s=>Array.isArray(s)?s.flatMap(t=>Ap(t&&t.type===P.Fragment?t.props.children:t)):[s],Sd=({children:s,location:t})=>{const r=ul(),[a]=Uc(r);for(const i of Ap(s)){let l=0;if(P.isValidElement(i)&&(l=Uh(r.parser,i.props.path,t||a,i.props.nest))[0])return P.cloneElement(i,{match:l})}return null};var[Wc,tj]=xo("Tooltip",[Bc]),Vc=Bc(),Tp="TooltipProvider",a2=700,Kd="tooltip.open",[i2,Wh]=Wc(Tp),Ep=s=>{const{__scopeTooltip:t,delayDuration:r=a2,skipDelayDuration:a=300,disableHoverableContent:i=!1,children:l}=s,d=P.useRef(!0),u=P.useRef(!1),h=P.useRef(0);return P.useEffect(()=>{const p=h.current;return()=>window.clearTimeout(p)},[]),e.jsx(i2,{scope:t,isOpenDelayedRef:d,delayDuration:r,onOpen:P.useCallback(()=>{window.clearTimeout(h.current),d.current=!1},[]),onClose:P.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>d.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:P.useCallback(p=>{u.current=p},[]),disableHoverableContent:i,children:l})};Ep.displayName=Tp;var Ol="Tooltip",[o2,Zc]=Wc(Ol),Mp=s=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:i,onOpenChange:l,disableHoverableContent:d,delayDuration:u}=s,h=Wh(Ol,s.__scopeTooltip),p=Vc(t),[v,y]=P.useState(null),N=Hl(),g=P.useRef(0),C=d??h.disableHoverableContent,j=u??h.delayDuration,T=P.useRef(!1),[A,S]=Qo({prop:a,defaultProp:i??!1,onChange:le=>{le?(h.onOpen(),document.dispatchEvent(new CustomEvent(Kd))):h.onClose(),l?.(le)},caller:Ol}),$=P.useMemo(()=>A?T.current?"delayed-open":"instant-open":"closed",[A]),V=P.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T.current=!1,S(!0)},[S]),K=P.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),me=P.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{T.current=!0,S(!0),g.current=0},j)},[j,S]);return P.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),e.jsx(Kf,{...p,children:e.jsx(o2,{scope:t,contentId:N,open:A,stateAttribute:$,trigger:v,onTriggerChange:y,onTriggerEnter:P.useCallback(()=>{h.isOpenDelayedRef.current?me():V()},[h.isOpenDelayedRef,me,V]),onTriggerLeave:P.useCallback(()=>{C?K():(window.clearTimeout(g.current),g.current=0)},[K,C]),onOpen:V,onClose:K,disableHoverableContent:C,children:r})})};Mp.displayName=Ol;var Jd="TooltipTrigger",Ip=P.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,i=Zc(Jd,r),l=Wh(Jd,r),d=Vc(r),u=P.useRef(null),h=Sr(t,u,i.onTriggerChange),p=P.useRef(!1),v=P.useRef(!1),y=P.useCallback(()=>p.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),e.jsx(Jf,{asChild:!0,...d,children:e.jsx(cs.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...a,ref:h,onPointerMove:Gt(s.onPointerMove,N=>{N.pointerType!=="touch"&&!v.current&&!l.isPointerInTransitRef.current&&(i.onTriggerEnter(),v.current=!0)}),onPointerLeave:Gt(s.onPointerLeave,()=>{i.onTriggerLeave(),v.current=!1}),onPointerDown:Gt(s.onPointerDown,()=>{i.open&&i.onClose(),p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Gt(s.onFocus,()=>{p.current||i.onOpen()}),onBlur:Gt(s.onBlur,i.onClose),onClick:Gt(s.onClick,i.onClose)})})});Ip.displayName=Jd;var l2="TooltipPortal",[sj,c2]=Wc(l2,{forceMount:void 0}),sl="TooltipContent",Rp=P.forwardRef((s,t)=>{const r=c2(sl,s.__scopeTooltip),{forceMount:a=r.forceMount,side:i="top",...l}=s,d=Zc(sl,s.__scopeTooltip);return e.jsx(jh,{present:a||d.open,children:d.disableHoverableContent?e.jsx(Op,{side:i,...l,ref:t}):e.jsx(d2,{side:i,...l,ref:t})})}),d2=P.forwardRef((s,t)=>{const r=Zc(sl,s.__scopeTooltip),a=Wh(sl,s.__scopeTooltip),i=P.useRef(null),l=Sr(t,i),[d,u]=P.useState(null),{trigger:h,onClose:p}=r,v=i.current,{onPointerInTransitChange:y}=a,N=P.useCallback(()=>{u(null),y(!1)},[y]),g=P.useCallback((C,j)=>{const T=C.currentTarget,A={x:C.clientX,y:C.clientY},S=p2(A,T.getBoundingClientRect()),$=g2(A,S),V=x2(j.getBoundingClientRect()),K=y2([...$,...V]);u(K),y(!0)},[y]);return P.useEffect(()=>()=>N(),[N]),P.useEffect(()=>{if(h&&v){const C=T=>g(T,v),j=T=>g(T,h);return h.addEventListener("pointerleave",C),v.addEventListener("pointerleave",j),()=>{h.removeEventListener("pointerleave",C),v.removeEventListener("pointerleave",j)}}},[h,v,g,N]),P.useEffect(()=>{if(d){const C=j=>{const T=j.target,A={x:j.clientX,y:j.clientY},S=h?.contains(T)||v?.contains(T),$=!v2(A,d);S?N():$&&(N(),p())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[h,v,d,p,N]),e.jsx(Op,{...s,ref:l})}),[h2,u2]=Wc(Ol,{isInside:!1}),f2=Yf("TooltipContent"),Op=P.forwardRef((s,t)=>{const{__scopeTooltip:r,children:a,"aria-label":i,onEscapeKeyDown:l,onPointerDownOutside:d,...u}=s,h=Zc(sl,r),p=Vc(r),{onClose:v}=h;return P.useEffect(()=>(document.addEventListener(Kd,v),()=>document.removeEventListener(Kd,v)),[v]),P.useEffect(()=>{if(h.trigger){const y=N=>{N.target?.contains(h.trigger)&&v()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,v]),e.jsx(Zf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:y=>y.preventDefault(),onDismiss:v,children:e.jsxs(Gf,{"data-state":h.stateAttribute,...p,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(f2,{children:a}),e.jsx(h2,{scope:r,isInside:!0,children:e.jsx(s1,{id:h.contentId,role:"tooltip",children:i||a})})]})})});Rp.displayName=sl;var Dp="TooltipArrow",m2=P.forwardRef((s,t)=>{const{__scopeTooltip:r,...a}=s,i=Vc(r);return u2(Dp,r).isInside?null:e.jsx(Qf,{...i,...a,ref:t})});m2.displayName=Dp;function p2(s,t){const r=Math.abs(t.top-s.y),a=Math.abs(t.bottom-s.y),i=Math.abs(t.right-s.x),l=Math.abs(t.left-s.x);switch(Math.min(r,a,i,l)){case l:return"left";case i:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function g2(s,t,r=5){const a=[];switch(t){case"top":a.push({x:s.x-r,y:s.y+r},{x:s.x+r,y:s.y+r});break;case"bottom":a.push({x:s.x-r,y:s.y-r},{x:s.x+r,y:s.y-r});break;case"left":a.push({x:s.x+r,y:s.y-r},{x:s.x+r,y:s.y+r});break;case"right":a.push({x:s.x-r,y:s.y-r},{x:s.x-r,y:s.y+r});break}return a}function x2(s){const{top:t,right:r,bottom:a,left:i}=s;return[{x:i,y:t},{x:r,y:t},{x:r,y:a},{x:i,y:a}]}function v2(s,t){const{x:r,y:a}=s;let i=!1;for(let l=0,d=t.length-1;l<t.length;d=l++){const u=t[l],h=t[d],p=u.x,v=u.y,y=h.x,N=h.y;v>a!=N>a&&r<(y-p)*(a-v)/(N-v)+p&&(i=!i)}return i}function y2(s){const t=s.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),b2(t)}function b2(s){if(s.length<=1)return s.slice();const t=[];for(let a=0;a<s.length;a++){const i=s[a];for(;t.length>=2;){const l=t[t.length-1],d=t[t.length-2];if((l.x-d.x)*(i.y-d.y)>=(l.y-d.y)*(i.x-d.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let a=s.length-1;a>=0;a--){const i=s[a];for(;r.length>=2;){const l=r[r.length-1],d=r[r.length-2];if((l.x-d.x)*(i.y-d.y)>=(l.y-d.y)*(i.x-d.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var w2=Ep,N2=Mp,j2=Ip,Fp=Rp;const zp=w2,_2=N2,S2=j2,Bp=P.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Fp,{ref:a,sideOffset:t,className:mt("z-50 overflow-hidden rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-1.5 text-sm text-gray-900 dark:text-white shadow-lg animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...r}));Bp.displayName=Fp.displayName;const k2="/assets/new-logo-ISLgSUsv.png";function Wl({size:s=40,className:t=""}){return e.jsx("img",{src:k2,alt:"Logo LifeBee",width:s,height:s,className:t,style:{objectFit:"contain",display:"block"}})}function C2({onComplete:s}){const[t,r]=P.useState(0);return P.useEffect(()=>{const a=setInterval(()=>{r(i=>i>=100?(clearInterval(a),setTimeout(s,500),100):i+2)},30);return()=>clearInterval(a)},[s]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1a1a] via-[#f4c430] to-[#fdf6e3] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-[#fdf6e3]/20 backdrop-blur-sm rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center shadow-2xl animate-pulse",children:e.jsx("div",{className:"bg-[#fdf6e3] rounded-full w-24 h-24 flex items-center justify-center",children:e.jsx(Wl,{size:60,className:"animate-bounce"})})}),e.jsx("h1",{className:"text-4xl font-bold text-[#fdf6e3] mb-2",children:"LifeBee"}),e.jsx("p",{className:"text-[#fdf6e3]/80 text-lg mb-8",children:"Conectando você aos melhores profissionais de saúde"}),e.jsx("div",{className:"w-64 mx-auto bg-[#fdf6e3]/20 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#fdf6e3] transition-all duration-300 ease-out rounded-full",style:{width:`${t}%`}})}),e.jsxs("p",{className:"text-[#fdf6e3]/70 text-sm mt-4",children:["Carregando... ",t,"%"]})]})})}function Yr(){const[s,t]=P.useState({user:null,isLoading:!0,isAuthenticated:!1});return P.useEffect(()=>{(async()=>{const l=localStorage.getItem("token"),d=localStorage.getItem("user");if(l&&d)try{const u=await fetch(`${ft()}/api/user`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(u.ok){const h=await u.json();t({user:h,isLoading:!1,isAuthenticated:!0})}else localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,isLoading:!1,isAuthenticated:!1})}catch(u){console.error("Error verifying token:",u);try{const h=JSON.parse(d);t({user:h,isLoading:!1,isAuthenticated:!0})}catch{localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,isLoading:!1,isAuthenticated:!1})}}else t({user:null,isLoading:!1,isAuthenticated:!1})})()},[]),{...s,login:(i,l)=>{localStorage.setItem("token",i),localStorage.setItem("user",JSON.stringify(l)),t({user:l,isLoading:!1,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,isLoading:!1,isAuthenticated:!1})}}}function Oa({hidePlus:s}){const[t]=_r(),[,r]=_r(),{user:a}=Yr(),{toast:i}=qs(),l=[{label:"Início",to:"/",icon:e.jsx(Bh,{className:"h-6 w-6"}),show:!0},{label:"Serviços",to:"/services",icon:e.jsx(Gn,{className:"h-6 w-6"}),show:!0},{label:"Adicionar",to:"/servico",isCenter:!0,show:!s},{label:"Chat",to:"/messages",icon:e.jsx(Mn,{className:"h-6 w-6"}),show:!0},{label:"Perfil",to:"/profile",icon:e.jsx(Gr,{className:"h-6 w-6"}),show:!0}];return e.jsx("nav",{className:"bg-white border-t border-gray-200 fixed bottom-0 left-0 w-full z-50 shadow rounded-t-xl px-0",children:e.jsx("ul",{className:"flex justify-around items-center h-16 max-w-full px-2 sm:px-4",children:l.filter(d=>d.show).map(d=>e.jsx("li",{className:d.isCenter?"relative -mt-10 z-10":"",children:d.isCenter?e.jsx("button",{"aria-label":"Criar Serviço",onClick:()=>{const u=!!(a?.email&&/.+@.+\..+/.test(a.email.trim())),h=(a?.phone||"").replace(/\D/g,""),p=h.length===11&&h[0]!=="0"&&h[1]!=="0"&&h[2]==="9",v=C=>{const j=C.replace(/\D/g,"");if(j.length!==11||/^(\d)\1{10}$/.test(j))return!1;const T=A=>{let S=0;for(let V=0;V<A;V++)S+=parseInt(j[V],10)*(A+1-V);const $=S*10%11;return $===10?0:$};return T(9)===parseInt(j[9],10)&&T(10)===parseInt(j[10],10)},y=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",N=v(y),g=[u,p,N].filter(Boolean).length;if(g!==3){i({title:"Verificação em andamento",description:`Conclua seu cadastro (${g}/3): Email, Telefone e CPF para criar um serviço.`}),r("/profile");return}r("/servico")},className:"gap-2 whitespace-nowrap text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary hover:bg-primary/90 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-xl hover:shadow-2xl hover:from-yellow-600 hover:to-yellow-700 w-16 h-16 flex items-center justify-center transition-all duration-300 border-4 border-white dark:border-gray-900 focus:ring-4 focus:ring-yellow-200 dark:focus:ring-yellow-800 ring-4 ring-yellow-200 dark:ring-yellow-800",tabIndex:0,type:"button",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-plus h-8 w-8",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]})}):e.jsxs(Gs,{href:d.to,className:`flex flex-col items-center text-xs font-medium transition-colors duration-200 ${t===d.to?"text-yellow-500":"text-gray-500 hover:text-yellow-500"}`,children:[d.icon,e.jsx("span",{className:"mt-1",children:d.label})]})},d.to))})})}function P2(){const{toast:s}=qs(),{user:t}=Yr(),[r,a]=P.useState(""),[i,l]=P.useState([]),[d,u]=P.useState(!0),[,h]=_r();P.useEffect(()=>{p()},[]);const p=async()=>{try{u(!0);const C=await fetch(`${ft()}/api/professionals`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(C.ok){const j=await C.json();l(j)}else console.error("Erro ao buscar profissionais:",C.statusText),l([]),s({title:"Erro",description:"Não foi possível carregar os profissionais",variant:"destructive"})}catch(C){console.error("Erro ao buscar profissionais:",C),s({title:"Erro",description:"Não foi possível carregar os profissionais",variant:"destructive"})}finally{u(!1)}},v=async(C,j)=>{try{const T=localStorage.getItem("token"),A=await fetch(`${ft()}/api/messages/start-conversation`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({professionalId:C,message:"Olá! Gostaria de conversar sobre seus serviços."})});if(A.ok){const S=await A.json();console.log("Resposta do backend:",S),s({title:"Conversa iniciada!",description:`Você pode conversar com ${j} agora`});const $=S.conversationId||S.id||S.conversationID;h($?`/messages/${$}`:"/messages")}else s({title:"Erro",description:"Não foi possível iniciar a conversa",variant:"destructive"})}catch(T){console.error("Erro ao iniciar conversa:",T),s({title:"Erro",description:"Erro de conexão ao iniciar conversa",variant:"destructive"})}},y=C=>{window.location.href=`tel:${C}`},N=C=>{switch(C){case"Home":h("/");break;case"Chat":h("/messages");break;case"Serviços":h("/services");break;case"Perfil":h("/profile");break;default:h("/")}};if(d)return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen flex items-center justify-center px-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"Carregando profissionais..."})]}),e.jsx(Oa,{})]});if(i.length===0)return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Olá,"}),e.jsx("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:t?.name||"Usuário"})]}),e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-500 rounded-full flex items-center justify-center cursor-pointer hover:bg-yellow-600 transition-colors",onClick:()=>h("/profile"),children:e.jsx(Gr,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] px-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-200 rounded-full mx-auto mb-4 sm:mb-6 flex items-center justify-center",children:e.jsx(Pi,{className:"h-8 w-8 sm:h-10 sm:w-10 text-gray-400"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2 sm:mb-3",children:"Nenhum profissional disponível"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6",children:"No momento não há profissionais cadastrados na sua região. Tente novamente mais tarde."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-500 text-white px-6 sm:px-8 py-2 sm:py-3 rounded-full font-medium hover:bg-yellow-600 transition-colors text-sm sm:text-base",children:"Tentar novamente"})]})}),e.jsx("nav",{className:"fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 sm:py-3",children:[{icon:Bh,label:"Home"},{icon:Er,label:"Chat"},{icon:Gn,label:"Serviços"},{icon:Gr,label:"Perfil"}].map((C,j)=>e.jsxs("button",{className:"flex flex-col items-center text-xs text-gray-600 hover:text-yellow-500 transition-colors",onClick:()=>N(C.label),children:[e.jsx(C.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 mb-1"}),C.label]},j))}),e.jsx(Oa,{})]});const g=i.filter(C=>C.name.toLowerCase().includes(r.toLowerCase())||C.specialization.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Olá,"}),e.jsx("p",{className:"font-semibold text-base sm:text-lg text-gray-900",children:t?.name||"Usuário"})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Al,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-600"}),e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center font-bold",children:"3"})]}),e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-500 rounded-full flex items-center justify-center cursor-pointer hover:bg-yellow-600 transition-colors",onClick:()=>h("/profile"),children:e.jsx(Gr,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]})]}),e.jsx("div",{className:"px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Pi,{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar profissional...",className:"w-full bg-white rounded-full px-10 sm:px-12 py-3 sm:py-4 text-sm sm:text-base text-gray-900 placeholder-gray-500 border-0 shadow-lg focus:ring-2 focus:ring-yellow-400 focus:outline-none",value:r,onChange:C=>a(C.target.value)})]})}),e.jsx("div",{className:"px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-3 sm:p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg",children:"Emergência 24h"}),e.jsx("p",{className:"text-xs sm:text-sm opacity-90",children:"Profissionais disponíveis agora"})]}),e.jsx("div",{className:"text-2xl sm:text-3xl",children:"🚨"})]})})}),e.jsxs("div",{className:"px-3 sm:px-4 pb-20 sm:pb-24",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-3 sm:mb-4",children:r?`Resultados para "${r}"`:"Profissionais Disponíveis"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:g.map(C=>e.jsx("div",{className:"bg-white rounded-2xl p-3 sm:p-4 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0",children:C.imageUrl?e.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-12 h-12 sm:w-16 sm:h-16 object-cover"}):e.jsx(Gr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-900 mb-1",children:C.name}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-2",children:C.specialization}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current mr-1"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:C.rating})]}),e.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500",children:[e.jsx(ys,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"truncate",children:C.location})]}),e.jsxs("div",{className:"text-xs sm:text-sm font-medium text-green-600",children:["R$ ",C.hourlyRate,"/h"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{className:"flex-1 bg-yellow-500 text-white py-2 px-3 sm:px-4 rounded-full font-medium hover:bg-yellow-600 transition-colors flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm",onClick:()=>v(C.userId,C.name),children:[e.jsx(Er,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Conversar"]}),C.phone&&e.jsxs("button",{className:"bg-green-500 text-white py-2 px-3 sm:px-4 rounded-full font-medium hover:bg-green-600 transition-colors flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm",onClick:()=>y(C.phone),children:[e.jsx(Li,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Ligar"]})]})]})]})},C.id))}),g.length===0&&r&&e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(Pi,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Nenhum profissional encontrado"})]})]}),e.jsx(Oa,{})]})}const Vh=qc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Oe=P.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...i},l)=>{const d=a?Zx:"button";return e.jsx(d,{className:mt(Vh({variant:t,size:r,className:s})),ref:l,...i})});Oe.displayName="Button";const ot=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:mt("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));ot.displayName="Card";const ns=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:mt("flex flex-col space-y-1.5 p-6",s),...t}));ns.displayName="CardHeader";const hs=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:mt("text-2xl font-semibold leading-none tracking-tight",s),...t}));hs.displayName="CardTitle";const L2=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:mt("text-sm text-muted-foreground",s),...t}));L2.displayName="CardDescription";const lt=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:mt("p-6 pt-0",s),...t}));lt.displayName="CardContent";const A2=P.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:mt("flex items-center p-6 pt-0",s),...t}));A2.displayName="CardFooter";const T2=qc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Bs({className:s,variant:t,...r}){return e.jsx("div",{className:mt(T2({variant:t}),s),...r})}function E2(){return bp.useSyncExternalStore(M2,()=>!0,()=>!1)}function M2(){return()=>{}}var Zh="Avatar",[I2,rj]=xo(Zh),[R2,qp]=I2(Zh),Hp=P.forwardRef((s,t)=>{const{__scopeAvatar:r,...a}=s,[i,l]=P.useState("idle");return e.jsx(R2,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:e.jsx(cs.span,{...a,ref:t})})});Hp.displayName=Zh;var $p="AvatarImage",Up=P.forwardRef((s,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:i=()=>{},...l}=s,d=qp($p,r),u=O2(a,l),h=Xo(p=>{i(p),d.onImageLoadingStatusChange(p)});return Kn(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?e.jsx(cs.img,{...l,ref:t,src:a}):null});Up.displayName=$p;var Wp="AvatarFallback",Vp=P.forwardRef((s,t)=>{const{__scopeAvatar:r,delayMs:a,...i}=s,l=qp(Wp,r),[d,u]=P.useState(a===void 0);return P.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>u(!0),a);return()=>window.clearTimeout(h)}},[a]),d&&l.imageLoadingStatus!=="loaded"?e.jsx(cs.span,{...i,ref:t}):null});Vp.displayName=Wp;function Xu(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function O2(s,{referrerPolicy:t,crossOrigin:r}){const a=E2(),i=P.useRef(null),l=a?(i.current||(i.current=new window.Image),i.current):null,[d,u]=P.useState(()=>Xu(l,s));return Kn(()=>{u(Xu(l,s))},[l,s]),Kn(()=>{const h=y=>()=>{u(y)};if(!l)return;const p=h("loaded"),v=h("error");return l.addEventListener("load",p),l.addEventListener("error",v),t&&(l.referrerPolicy=t),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",p),l.removeEventListener("error",v)}},[l,r,t]),d}var Zp=Hp,Gp=Up,Yp=Vp;const Ai=P.forwardRef(({className:s,...t},r)=>e.jsx(Zp,{ref:r,className:mt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Ai.displayName=Zp.displayName;const Ti=P.forwardRef(({className:s,src:t,...r},a)=>e.jsx(Gp,{ref:a,className:mt("aspect-square h-full w-full",s),src:t,onError:i=>{},...r}));Ti.displayName=Gp.displayName;const Ei=P.forwardRef(({className:s,...t},r)=>e.jsx(Yp,{ref:r,className:mt("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Ei.displayName=Yp.displayName;const Dl=em,Qd=tm,D2=Xf,Kp=P.forwardRef(({className:s,...t},r)=>e.jsx(Sh,{ref:r,className:mt("fixed inset-0 z-50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),style:{backgroundColor:"rgba(0, 0, 0, 0.95)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:50,width:"100vw",height:"100vh"},...t}));Kp.displayName=Sh.displayName;const rl=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(D2,{children:[e.jsx(Kp,{}),e.jsxs(kh,{ref:a,className:mt("fixed left-[50%] top-[50%] z-50 grid translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg overflow-y-auto",s),style:{backgroundColor:"var(--background)",border:"1px solid var(--border)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"min(95vw, 32rem)",maxWidth:"min(95vw, 32rem)",maxHeight:"min(85vh, 90vh)",height:"auto",minHeight:"auto"},...r,children:[t,e.jsxs(Ch,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(hl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rl.displayName=kh.displayName;const nl=({className:s,...t})=>e.jsx("div",{className:mt("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});nl.displayName="DialogHeader";const al=P.forwardRef(({className:s,...t},r)=>e.jsx(Ph,{ref:r,className:mt("text-lg font-semibold leading-none tracking-tight",s),...t}));al.displayName=Ph.displayName;const Jp=P.forwardRef(({className:s,...t},r)=>e.jsx(Lh,{ref:r,className:mt("text-sm text-muted-foreground",s),...t}));Jp.displayName=Lh.displayName;function jn(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function Mi(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}function Qp(s,t){const r=jn(s);return isNaN(t)?Mi(s,NaN):(t&&r.setDate(r.getDate()+t),r)}const Xp=6048e5,F2=864e5;let z2={};function Gc(){return z2}function il(s,t){const r=Gc(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=jn(s),l=i.getDay(),d=(l<a?7:0)+l-a;return i.setDate(i.getDate()-d),i.setHours(0,0,0,0),i}function Mc(s){return il(s,{weekStartsOn:1})}function eg(s){const t=jn(s),r=t.getFullYear(),a=Mi(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Mc(a),l=Mi(s,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const d=Mc(l);return t.getTime()>=i.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function Ic(s){const t=jn(s);return t.setHours(0,0,0,0),t}function ef(s){const t=jn(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function B2(s,t){const r=Ic(s),a=Ic(t),i=+r-ef(r),l=+a-ef(a);return Math.round((i-l)/F2)}function q2(s){const t=eg(s),r=Mi(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Mc(r)}function tg(s,t){const r=t*7;return Qp(s,r)}function kd(s,t){const r=Ic(s),a=Ic(t);return+r==+a}function H2(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function $2(s){if(!H2(s)&&typeof s!="number")return!1;const t=jn(s);return!isNaN(Number(t))}function U2(s){const t=jn(s),r=Mi(s,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const W2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},V2=(s,t,r)=>{let a;const i=W2[s];return typeof i=="string"?a=i:t===1?a=i.one:a=i.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Wo(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const Z2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},G2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},K2={date:Wo({formats:Z2,defaultWidth:"full"}),time:Wo({formats:G2,defaultWidth:"full"}),dateTime:Wo({formats:Y2,defaultWidth:"full"})},J2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Q2=(s,t,r,a)=>J2[s];function Ea(s){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let i;if(a==="formatting"&&s.formattingValues){const d=s.defaultFormattingWidth||s.defaultWidth,u=r?.width?String(r.width):d;i=s.formattingValues[u]||s.formattingValues[d]}else{const d=s.defaultWidth,u=r?.width?String(r.width):s.defaultWidth;i=s.values[u]||s.values[d]}const l=s.argumentCallback?s.argumentCallback(t):t;return i[l]}}const X2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ey={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ty={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ry={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ny={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ay=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},iy={ordinalNumber:ay,era:Ea({values:X2,defaultWidth:"wide"}),quarter:Ea({values:ey,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ea({values:ty,defaultWidth:"wide"}),day:Ea({values:sy,defaultWidth:"wide"}),dayPeriod:Ea({values:ry,defaultWidth:"wide",formattingValues:ny,defaultFormattingWidth:"wide"})};function Ma(s){return(t,r={})=>{const a=r.width,i=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],l=t.match(i);if(!l)return null;const d=l[0],u=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],h=Array.isArray(u)?ly(u,y=>y.test(d)):oy(u,y=>y.test(d));let p;p=s.valueCallback?s.valueCallback(h):h,p=r.valueCallback?r.valueCallback(p):p;const v=t.slice(d.length);return{value:p,rest:v}}}function oy(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function ly(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function sg(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const i=a[0],l=t.match(s.parsePattern);if(!l)return null;let d=s.valueCallback?s.valueCallback(l[0]):l[0];d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}const cy=/^(\d+)(th|st|nd|rd)?/i,dy=/\d+/i,hy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uy={any:[/^b/i,/^(a|c)/i]},fy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},my={any:[/1/i,/2/i,/3/i,/4/i]},py={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gy={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xy={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vy={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},by={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wy={ordinalNumber:sg({matchPattern:cy,parsePattern:dy,valueCallback:s=>parseInt(s,10)}),era:Ma({matchPatterns:hy,defaultMatchWidth:"wide",parsePatterns:uy,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:fy,defaultMatchWidth:"wide",parsePatterns:my,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ma({matchPatterns:py,defaultMatchWidth:"wide",parsePatterns:gy,defaultParseWidth:"any"}),day:Ma({matchPatterns:xy,defaultMatchWidth:"wide",parsePatterns:vy,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:yy,defaultMatchWidth:"any",parsePatterns:by,defaultParseWidth:"any"})},Ny={code:"en-US",formatDistance:V2,formatLong:K2,formatRelative:Q2,localize:iy,match:wy,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jy(s){const t=jn(s);return B2(t,U2(t))+1}function _y(s){const t=jn(s),r=+Mc(t)-+q2(t);return Math.round(r/Xp)+1}function rg(s,t){const r=jn(s),a=r.getFullYear(),i=Gc(),l=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,d=Mi(s,0);d.setFullYear(a+1,0,l),d.setHours(0,0,0,0);const u=il(d,t),h=Mi(s,0);h.setFullYear(a,0,l),h.setHours(0,0,0,0);const p=il(h,t);return r.getTime()>=u.getTime()?a+1:r.getTime()>=p.getTime()?a:a-1}function Sy(s,t){const r=Gc(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=rg(s,t),l=Mi(s,0);return l.setFullYear(i,0,a),l.setHours(0,0,0,0),il(l,t)}function ky(s,t){const r=jn(s),a=+il(r,t)-+Sy(r,t);return Math.round(a/Xp)+1}function vs(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const bi={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return vs(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):vs(r+1,2)},d(s,t){return vs(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return vs(s.getHours()%12||12,t.length)},H(s,t){return vs(s.getHours(),t.length)},m(s,t){return vs(s.getMinutes(),t.length)},s(s,t){return vs(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),i=Math.trunc(a*Math.pow(10,r-3));return vs(i,t.length)}},zo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tf={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),i=a>0?a:1-a;return r.ordinalNumber(i,{unit:"year"})}return bi.y(s,t)},Y:function(s,t,r,a){const i=rg(s,a),l=i>0?i:1-i;if(t==="YY"){const d=l%100;return vs(d,2)}return t==="Yo"?r.ordinalNumber(l,{unit:"year"}):vs(l,t.length)},R:function(s,t){const r=eg(s);return vs(r,t.length)},u:function(s,t){const r=s.getFullYear();return vs(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return vs(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return vs(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return bi.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return vs(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const i=ky(s,a);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):vs(i,t.length)},I:function(s,t,r){const a=_y(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):vs(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):bi.d(s,t)},D:function(s,t,r){const a=jy(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):vs(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const i=s.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return vs(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const i=s.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return vs(l,t.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),i=a===0?7:a;switch(t){case"i":return String(i);case"ii":return vs(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const i=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let i;switch(a===12?i=zo.noon:a===0?i=zo.midnight:i=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let i;switch(a>=17?i=zo.evening:a>=12?i=zo.afternoon:a>=4?i=zo.morning:i=zo.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return bi.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):bi.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):vs(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):vs(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):bi.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):bi.s(s,t)},S:function(s,t){return bi.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return rf(a);case"XXXX":case"XX":return no(a);case"XXXXX":case"XXX":default:return no(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return rf(a);case"xxxx":case"xx":return no(a);case"xxxxx":case"xxx":default:return no(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sf(a,":");case"OOOO":default:return"GMT"+no(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sf(a,":");case"zzzz":default:return"GMT"+no(a,":")}},t:function(s,t,r){const a=Math.trunc(s.getTime()/1e3);return vs(a,t.length)},T:function(s,t,r){const a=s.getTime();return vs(a,t.length)}};function sf(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),i=Math.trunc(a/60),l=a%60;return l===0?r+String(i):r+String(i)+t+vs(l,2)}function rf(s,t){return s%60===0?(s>0?"-":"+")+vs(Math.abs(s)/60,2):no(s,t)}function no(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),i=vs(Math.trunc(a/60),2),l=vs(a%60,2);return r+i+t+l}const nf=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ng=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Cy=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return nf(s,t);let l;switch(a){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"});break}return l.replace("{{date}}",nf(a,t)).replace("{{time}}",ng(i,t))},Py={p:ng,P:Cy},Ly=/^D+$/,Ay=/^Y+$/,Ty=["D","DD","YY","YYYY"];function Ey(s){return Ly.test(s)}function My(s){return Ay.test(s)}function Iy(s,t,r){const a=Ry(s,t,r);if(console.warn(a),Ty.includes(s))throw new RangeError(a)}function Ry(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Oy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fy=/^'([^]*?)'?$/,zy=/''/g,By=/[a-zA-Z]/;function kl(s,t,r){const a=Gc(),i=r?.locale??a.locale??Ny,l=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,d=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,u=jn(s);if(!$2(u))throw new RangeError("Invalid time value");let h=t.match(Dy).map(v=>{const y=v[0];if(y==="p"||y==="P"){const N=Py[y];return N(v,i.formatLong)}return v}).join("").match(Oy).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const y=v[0];if(y==="'")return{isToken:!1,value:qy(v)};if(tf[y])return{isToken:!0,value:v};if(y.match(By))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(h=i.localize.preprocessor(u,h));const p={firstWeekContainsDate:l,weekStartsOn:d,locale:i};return h.map(v=>{if(!v.isToken)return v.value;const y=v.value;(!r?.useAdditionalWeekYearTokens&&My(y)||!r?.useAdditionalDayOfYearTokens&&Ey(y))&&Iy(y,t,String(s));const N=tf[y[0]];return N(u,y,i.localize,p)}).join("")}function qy(s){const t=s.match(Fy);return t?t[1].replace(zy,"'"):s}function Hy(s,t){const r=jn(s),a=jn(t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function $y(s,t){return tg(s,-4)}const Uy={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Wy=(s,t,r)=>{let a;const i=Uy[s];return typeof i=="string"?a=i:t===1?a=i.one:a=i.other.replace("{{count}}",String(t)),r?.addSuffix?r.comparison&&r.comparison>0?"em "+a:"há "+a:a},Vy={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Zy={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Gy={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yy={date:Wo({formats:Vy,defaultWidth:"full"}),time:Wo({formats:Zy,defaultWidth:"full"}),dateTime:Wo({formats:Gy,defaultWidth:"full"})},Ky={lastWeek:s=>{const t=s.getDay();return"'"+(t===0||t===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},Jy=(s,t,r,a)=>{const i=Ky[s];return typeof i=="function"?i(t):i},Qy={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},Xy={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},e5={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},t5={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},s5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},r5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},n5=(s,t)=>{const r=Number(s);return t?.unit==="week"?r+"ª":r+"º"},a5={ordinalNumber:n5,era:Ea({values:Qy,defaultWidth:"wide"}),quarter:Ea({values:Xy,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ea({values:e5,defaultWidth:"wide"}),day:Ea({values:t5,defaultWidth:"wide"}),dayPeriod:Ea({values:s5,defaultWidth:"wide",formattingValues:r5,defaultFormattingWidth:"wide"})},i5=/^(\d+)[ºªo]?/i,o5=/\d+/i,l5={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},c5={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},d5={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},h5={any:[/1/i,/2/i,/3/i,/4/i]},u5={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},f5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},m5={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},p5={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},g5={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},x5={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},v5={ordinalNumber:sg({matchPattern:i5,parsePattern:o5,valueCallback:s=>parseInt(s,10)}),era:Ma({matchPatterns:l5,defaultMatchWidth:"wide",parsePatterns:c5,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:d5,defaultMatchWidth:"wide",parsePatterns:h5,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ma({matchPatterns:u5,defaultMatchWidth:"wide",parsePatterns:f5,defaultParseWidth:"any"}),day:Ma({matchPatterns:m5,defaultMatchWidth:"wide",parsePatterns:p5,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:g5,defaultMatchWidth:"any",parsePatterns:x5,defaultParseWidth:"any"})},Xd={code:"pt-BR",formatDistance:Wy,formatLong:Yy,formatRelative:Jy,localize:a5,match:v5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function af(){const{toast:s}=qs(),[t,r]=P.useState(new Date),[a,i]=P.useState(new Date),[l,d]=P.useState(null),[u,h]=P.useState(!1),[p,v]=P.useState("all"),y=ee=>{switch(ee){case"agendado":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"confirmado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"em_andamento":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"concluido":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},N=ee=>{switch(ee){case"confirmado":return e.jsx(Ts,{className:"h-3 w-3"});case"cancelado":return e.jsx(mo,{className:"h-3 w-3"});case"em_andamento":return e.jsx(Xm,{className:"h-3 w-3"});case"concluido":return e.jsx(Ts,{className:"h-3 w-3"});default:return e.jsx(fo,{className:"h-3 w-3"})}},g=ee=>{switch(ee){case"agendado":return"Agendado";case"confirmado":return"Confirmado";case"em_andamento":return"Em Andamento";case"concluido":return"Concluído";case"cancelado":return"Cancelado";default:return ee}},C=[],j=ee=>C.filter(je=>kd(je.date,ee)),T=()=>{const ee=il(new Date(t.getFullYear(),t.getMonth(),1)),je=[];for(let R=0;R<42;R++)je.push(Qp(ee,R));return je},A=()=>{r($y(t))},S=()=>{r(tg(t,4))},$=ee=>{d(ee),h(!0)},V=()=>{s({title:"Agendamento cancelado",description:"Seu agendamento foi cancelado com sucesso."}),h(!1)},K=()=>{s({title:"Reagendamento",description:"Redirecionando para reagendar consulta..."}),h(!1)},me=()=>{l?.meetingLink&&(window.open(l.meetingLink,"_blank"),s({title:"Videochamada iniciada",description:"Abrindo link da reunião..."}))},le=()=>{l?.professionalPhone&&window.open(`tel:${l.professionalPhone}`)},X=()=>{if(l?.location){const ee=encodeURIComponent(l.location);window.open(`https://maps.google.com/?q=${ee}`,"_blank")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx(or,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Minha Agenda"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto p-4 lg:p-8",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agenda"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Gerencie seus agendamentos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Oe,{variant:"outline",children:[e.jsx(L1,{className:"h-4 w-4 mr-2"}),"Filtros"]}),e.jsxs(Oe,{className:"bg-yellow-500 hover:bg-yellow-600",children:[e.jsx(qh,{className:"h-4 w-4 mr-2"}),"Nova Consulta"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 overflow-x-auto",children:[e.jsx(Oe,{variant:p==="all"?"default":"outline",size:"sm",onClick:()=>v("all"),className:p==="all"?"bg-yellow-500 hover:bg-yellow-600":"",children:"Todos"}),e.jsx(Oe,{variant:p==="agendado"?"default":"outline",size:"sm",onClick:()=>v("agendado"),className:p==="agendado"?"bg-blue-500 hover:bg-blue-600":"",children:"Agendados"}),e.jsx(Oe,{variant:p==="confirmado"?"default":"outline",size:"sm",onClick:()=>v("confirmado"),className:p==="confirmado"?"bg-green-500 hover:bg-green-600":"",children:"Confirmados"}),e.jsx(Oe,{variant:p==="concluido"?"default":"outline",size:"sm",onClick:()=>v("concluido"),className:p==="concluido"?"bg-gray-500 hover:bg-gray-600":"",children:"Concluídos"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ot,{children:[e.jsxs(ns,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(hs,{className:"text-lg",children:kl(t,"MMMM yyyy",{locale:Xd})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",size:"sm",onClick:A,children:e.jsx(S1,{className:"h-4 w-4"})}),e.jsx(Oe,{variant:"outline",size:"sm",onClick:S,children:e.jsx(rp,{className:"h-4 w-4"})})]})]}),e.jsxs(lt,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(ee=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600 dark:text-gray-400",children:ee},ee))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:T().map((ee,je)=>{const R=j(ee),z=Hy(ee,t),q=kd(ee,new Date),B=kd(ee,a);return e.jsxs("div",{className:`
                            min-h-[80px] p-1 border border-gray-200 dark:border-gray-700 cursor-pointer transition-colors
                            ${z?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"}
                            ${q?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-700":""}
                            ${B?"ring-2 ring-yellow-500":""}
                            hover:bg-gray-50 dark:hover:bg-gray-700
                          `,onClick:()=>i(ee),children:[e.jsx("div",{className:`
                            text-sm font-medium mb-1
                            ${z?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"}
                            ${q?"text-yellow-600 dark:text-yellow-400":""}
                          `,children:kl(ee,"d")}),e.jsxs("div",{className:"space-y-1",children:[R.slice(0,2).map(ge=>e.jsxs("div",{className:`
                                  text-xs p-1 rounded cursor-pointer truncate
                                  ${y(ge.status)}
                                `,onClick:ue=>{ue.stopPropagation(),$(ge)},children:[ge.time," - ",ge.professionalName]},ge.id)),R.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 p-1",children:["+",R.length-2," mais"]})]})]},je)})})]})]})}),e.jsx("div",{children:e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"text-lg",children:["Agendamentos - ",kl(a,"dd/MM/yyyy")]})}),e.jsx(lt,{className:"space-y-4",children:j(a).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Nenhum agendamento para este dia"})]}):j(a).map(ee=>e.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",onClick:()=>$(ee),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs(Ai,{className:"w-10 h-10",children:[e.jsx(Ti,{src:ee.professionalAvatar,alt:ee.professionalName}),e.jsx(Ei,{children:ee.professionalName.split(" ").map(je=>je[0]).join("")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:ee.professionalName}),e.jsxs(Bs,{className:`text-xs ${y(ee.status)}`,children:[N(ee.status),e.jsx("span",{className:"ml-1",children:g(ee.status)})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:ee.specialization}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mr,{className:"h-3 w-3"}),ee.time," (",ee.duration,"min)"]}),ee.type==="presencial"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"h-3 w-3"}),"Presencial"]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wc,{className:"h-3 w-3"}),"Online"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["R$ ",ee.price]}),ee.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:ee.rating})]})]})]})]})},ee.id))})]})})]}),e.jsx(Dl,{open:u,onOpenChange:h,children:e.jsxs(rl,{className:"max-w-2xl",children:[e.jsx(nl,{children:e.jsxs(al,{className:"flex items-center gap-3",children:[e.jsxs(Ai,{className:"w-12 h-12",children:[e.jsx(Ti,{src:l?.professionalAvatar,alt:l?.professionalName}),e.jsx(Ei,{children:l?.professionalName.split(" ").map(ee=>ee[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:l?.professionalName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:l?.specialization})]})]})}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Bs,{className:`${y(l.status)}`,children:[N(l.status),e.jsx("span",{className:"ml-1",children:g(l.status)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.type==="online"&&l.meetingLink&&e.jsxs(Oe,{size:"sm",onClick:me,className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Entrar na Reunião"]}),l.professionalPhone&&e.jsxs(Oe,{variant:"outline",size:"sm",onClick:le,children:[e.jsx(Li,{className:"h-4 w-4 mr-2"}),"Ligar"]}),e.jsxs(Oe,{variant:"outline",size:"sm",children:[e.jsx(Er,{className:"h-4 w-4 mr-2"}),"Mensagem"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Data e Horário"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(pr,{className:"h-4 w-4"}),kl(l.date,"dd 'de' MMMM 'de' yyyy",{locale:Xd})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 mt-1",children:[e.jsx(mr,{className:"h-4 w-4"}),l.time," - ",l.duration," minutos"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Tipo de Consulta"}),e.jsx("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:l.type==="presencial"?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4"}),"Presencial"]}):e.jsxs(e.Fragment,{children:[e.jsx(wc,{className:"h-4 w-4"}),"Online"]})})]}),l.location&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Local"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(ys,{className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{children:l.location}),e.jsxs(Oe,{variant:"link",size:"sm",className:"p-0 h-auto text-yellow-600 hover:text-yellow-700",onClick:X,children:[e.jsx(op,{className:"h-3 w-3 mr-1"}),"Ver no mapa"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Valor"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R$ ",l.price]})]}),l.rating&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Avaliação"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"font-semibold",children:l.rating})]}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Excelente profissional"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Contato"}),l.professionalPhone&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(Li,{className:"h-4 w-4"}),l.professionalPhone]})]})]})]}),l.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Observações"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:l.notes})]}),l.status!=="concluido"&&l.status!=="cancelado"&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.canReschedule&&e.jsxs(Oe,{variant:"outline",onClick:()=>K(),children:[e.jsx(pr,{className:"h-4 w-4 mr-2"}),"Reagendar"]}),l.canCancel&&e.jsxs(Oe,{variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-900/20",onClick:()=>V(),children:[e.jsx(mo,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]})]})]})})]}),e.jsx(Oa,{})]})}const xt=P.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:mt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));xt.displayName="Input";var y5="Label",ag=P.forwardRef((s,t)=>e.jsx(cs.label,{...s,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(s.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ag.displayName=y5;var ig=ag;const b5=qc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Nn=P.forwardRef(({className:s,...t},r)=>e.jsx(ig,{ref:r,className:mt(b5(),s),...t}));Nn.displayName=ig.displayName;const Yn=P.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:mt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));Yn.displayName="Textarea";function of(){const[,s]=_r(),{logout:t}=Yr(),{toast:r}=qs(),a=Ih(),[i,l]=P.useState(!1),[d,u]=P.useState(!1),[h,p]=P.useState(!1),v=P.useRef(null),[y,N]=P.useState({name:"",email:"",phone:"",address:"",cpf:""}),{data:g,isLoading:C}=Lc({queryKey:["/api/user"]}),{data:j=[]}=Lc({queryKey:["/api/appointments"]});P.useEffect(()=>{g&&N({name:g.name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",cpf:localStorage.getItem("client_cpf")||""})},[g]);const T=(j||[]).filter(fe=>new Date(fe.scheduledFor)<=new Date).length,A=zu({mutationFn:async fe=>{const E=localStorage.getItem("token");if(!E)throw new Error("Token não encontrado");const W=await fetch(`${ft()}/api/user/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({name:fe.name,email:fe.email,phone:fe.phone,address:fe.address})});if(!W.ok)throw new Error("Erro ao atualizar perfil");return W.json()},onSuccess:()=>{try{localStorage.setItem("client_cpf",y.cpf.trim())}catch{}N(fe=>({...fe,cpf:fe.cpf.trim()})),a.invalidateQueries({queryKey:["/api/user"]}),l(!1),r({title:"Perfil atualizado",description:"Suas informações foram atualizadas com sucesso."})},onError:fe=>{r({title:"Erro",description:"Não foi possível atualizar o perfil. Tente novamente.",variant:"destructive"})}}),S=zu({mutationFn:async fe=>{const E=localStorage.getItem("token");if(!E)throw new Error("Token não encontrado");const W=new FormData;W.append("profileImage",fe);const Z=await fetch(`${ft()}/api/user/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${E}`},body:W});if(!Z.ok)throw new Error("Erro ao fazer upload da imagem");return Z.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/user"]}),u(!1),p(!1),r({title:"Foto atualizada",description:"Sua foto de perfil foi atualizada com sucesso."})},onError:fe=>{u(!1),r({title:"Erro",description:"Não foi possível fazer upload da imagem. Tente novamente.",variant:"destructive"})}}),$=()=>{l(!0)},V=()=>{A.mutate(y)},K=()=>{l(!1),g&&N({name:g.name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",cpf:localStorage.getItem("client_cpf")||""})};P.useEffect(()=>{if(!i)try{const fe=localStorage.getItem("client_cpf")||"";fe&&fe!==y.cpf&&N(E=>({...E,cpf:fe}))}catch{}},[i]);const me=()=>{v.current?.click()},le=fe=>{const E=fe.target.files?.[0];E&&(u(!0),S.mutate(E))},X=(fe,E)=>{N(W=>({...W,[fe]:E}))},ee=fe=>/.+@.+\..+/.test(fe.trim()),je=fe=>{const E=fe.replace(/\D/g,"");return!(E.length!==11||E[0]==="0"||E[1]==="0"||E[2]!=="9")},R=fe=>{const E=fe.replace(/\D/g,"");if(!E||E.length!==11||/^(\d)\1{10}$/.test(E))return!1;const W=re=>{let de=0;for(let J=0;J<re;J++)de+=parseInt(E[J],10)*(re+1-J);const Ne=de*10%11;return Ne===10?0:Ne},Z=W(9),Q=W(10);return Z===parseInt(E[9],10)&&Q===parseInt(E[10],10)},z=ee(y.email),q=je(y.phone),B=R(y.cpf),ge=[z,q,B].filter(Boolean).length,ue=()=>{s("/payment")},be=()=>{console.log("Opening privacy settings")},ne=()=>{console.log("Opening help center")},ve=()=>{s("/my-requests")},ae=()=>{t(),window.location.href="/",r({title:"Logout realizado",description:"Você foi desconectado com sucesso."})};return C?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando perfil..."})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:e.jsxs("div",{className:"w-full max-w-sm lg:max-w-none mx-auto lg:mx-0 relative px-3 sm:px-4 lg:px-8 py-3 sm:py-4 lg:py-6",children:[e.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"mr-2 p-2 lg:hidden",children:e.jsx(or,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Meu Perfil"})]}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsxs("div",{className:"relative inline-block mb-3 sm:mb-4",children:[g?.profileImage&&!h?e.jsx("img",{src:`${ft()}${g.profileImage}`,alt:`Foto de ${g?.name||"Cliente"}`,className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto rounded-full object-cover border-4 border-white shadow-lg",onError:()=>{console.log("Erro ao carregar imagem:",g.profileImage),p(!0)},onLoad:()=>{console.log("Imagem carregada com sucesso:",g.profileImage),p(!1)}}):e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 mx-auto bg-yellow-500 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:e.jsx("span",{className:"text-xl sm:text-2xl font-bold text-white",children:g?.name?.charAt(0)||"G"})}),e.jsx(Oe,{size:"sm",variant:"secondary",className:"absolute -bottom-1 -right-1 sm:-bottom-2 sm:-right-2 rounded-full w-6 h-6 sm:w-8 sm:h-8 p-0 bg-white border-2 border-gray-200 hover:bg-gray-50",onClick:me,disabled:d,children:d?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-gray-600"}):e.jsx(vo,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:le,className:"hidden"})]}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2",children:g?.name||"Gustavo Silva"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:g?.createdAt?`Membro desde ${new Date(g.createdAt).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}`:"Membro"}),e.jsxs("div",{className:"flex justify-center space-x-4 sm:space-x-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:j?.length||0}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Agendamentos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:T}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Concluídos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:"4.8"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Avaliação"})]})]}),i?e.jsxs("div",{className:"flex gap-2 mb-4 sm:mb-6",children:[e.jsxs(Oe,{onClick:V,className:"flex-1 h-10 sm:h-12 text-sm sm:text-base",disabled:A.isPending,children:[A.isPending?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(Ec,{className:"h-4 w-4 mr-2"}),"Salvar"]}),e.jsx(Oe,{variant:"outline",onClick:K,className:"h-10 sm:h-12 text-sm sm:text-base",children:e.jsx(hl,{className:"h-4 w-4"})})]}):e.jsxs(Oe,{onClick:$,className:"w-full mb-4 sm:mb-6 h-10 sm:h-12 text-sm sm:text-base",children:[e.jsx(up,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})]}),e.jsxs(ot,{className:"mb-4 sm:mb-6",children:[e.jsx(ns,{className:"pb-3 sm:pb-4",children:e.jsx(hs,{className:"text-base sm:text-lg",children:"Informações Pessoais"})}),e.jsx(lt,{className:"space-y-3 sm:space-y-4",children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Nn,{htmlFor:"name",className:"text-xs sm:text-sm text-gray-600",children:"Nome"}),e.jsx(xt,{id:"name",value:y.name,onChange:fe=>X("name",fe.target.value),className:"mt-1",placeholder:"Seu nome completo"})]}),e.jsxs("div",{children:[e.jsx(Nn,{htmlFor:"email",className:"text-xs sm:text-sm text-gray-600",children:"Email"}),e.jsx(xt,{id:"email",type:"email",value:y.email,onChange:fe=>X("email",fe.target.value),className:"mt-1",placeholder:"seu@email.com"})]}),e.jsxs("div",{children:[e.jsx(Nn,{htmlFor:"phone",className:"text-xs sm:text-sm text-gray-600",children:"Telefone"}),e.jsx(xt,{id:"phone",value:y.phone,onChange:fe=>X("phone",fe.target.value),className:`mt-1 ${y.phone&&!q?"border-red-500":""}`,placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx(Nn,{htmlFor:"cpf",className:"text-xs sm:text-sm text-gray-600",children:"CPF"}),e.jsx(xt,{id:"cpf",value:y.cpf,onChange:fe=>X("cpf",fe.target.value),className:`mt-1 ${y.cpf&&!B?"border-red-500":""}`,placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx(Nn,{htmlFor:"address",className:"text-xs sm:text-sm text-gray-600",children:"Endereço"}),e.jsx(Yn,{id:"address",value:y.address,onChange:fe=>X("address",fe.target.value),className:"mt-1",placeholder:"Seu endereço completo",rows:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Tc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:(g?.email||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Li,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Telefone"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(g?.phone||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Yd,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"CPF"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(y.cpf||localStorage.getItem("client_cpf")||"").trim()||"Não informado"})]})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(ys,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Endereço"}),e.jsx("p",{className:"font-medium text-sm sm:text-base",children:(g?.address||"").trim()||"Não informado"})]})]})]})})]}),e.jsx(ot,{className:`mb-4 sm:mb-6 ${ge===3?"border-green-100 bg-gradient-to-r from-green-50 to-emerald-50":"border-yellow-100 bg-gradient-to-r from-yellow-50 to-amber-50"}`,children:e.jsx(lt,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 ${ge===3?"bg-green-500":"bg-yellow-500"} rounded-full flex items-center justify-center shadow-lg`,children:e.jsx(el,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-1",children:ge===3?"Conta Verificada":"Verificação em andamento"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 leading-relaxed",children:ge===3?"Todos os dados foram validados":`Complete ${ge}/3 etapas para verificar sua conta`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Email"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Telefone"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"CPF"})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Bs,{className:`${ge===3?"bg-green-500":"bg-yellow-500"} text-white shadow-md hover:opacity-90 transition-colors px-3 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm font-medium border-0`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsxs("span",{className:"text-base sm:text-lg",children:[ge,"/3"]}),e.jsx("span",{children:ge===3?"Verificado":"Pendente"})]})})})]})})}),e.jsxs("div",{className:"space-y-2 mb-16 sm:mb-20",children:[e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:ve,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(zh,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Minhas Solicitações"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:ue,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Yd,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Formas de Pagamento"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s("/settings"),children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(dp,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Configurações"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:be,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(el,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Privacidade e Segurança"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:ne,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(np,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Ajuda e Suporte"})]}),e.jsx("span",{className:"text-gray-400",children:"→"})]})})}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700 my-3 sm:my-4"}),e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:ae,children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Rl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-red-500 text-sm sm:text-base",children:"Sair da Conta"})]})})})]}),e.jsx(Oa,{})]})})})}function og(s){const t=P.useRef({value:s,previous:s});return P.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var Yc="Switch",[w5,nj]=xo(Yc),[N5,j5]=w5(Yc),lg=P.forwardRef((s,t)=>{const{__scopeSwitch:r,name:a,checked:i,defaultChecked:l,required:d,disabled:u,value:h="on",onCheckedChange:p,form:v,...y}=s,[N,g]=P.useState(null),C=Sr(t,$=>g($)),j=P.useRef(!1),T=N?v||!!N.closest("form"):!0,[A,S]=Qo({prop:i,defaultProp:l??!1,onChange:p,caller:Yc});return e.jsxs(N5,{scope:r,checked:A,disabled:u,children:[e.jsx(cs.button,{type:"button",role:"switch","aria-checked":A,"aria-required":d,"data-state":ug(A),"data-disabled":u?"":void 0,disabled:u,value:h,...y,ref:C,onClick:Gt(s.onClick,$=>{S(V=>!V),T&&(j.current=$.isPropagationStopped(),j.current||$.stopPropagation())})}),T&&e.jsx(hg,{control:N,bubbles:!j.current,name:a,value:h,checked:A,required:d,disabled:u,form:v,style:{transform:"translateX(-100%)"}})]})});lg.displayName=Yc;var cg="SwitchThumb",dg=P.forwardRef((s,t)=>{const{__scopeSwitch:r,...a}=s,i=j5(cg,r);return e.jsx(cs.span,{"data-state":ug(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});dg.displayName=cg;var _5="SwitchBubbleInput",hg=P.forwardRef(({__scopeSwitch:s,control:t,checked:r,bubbles:a=!0,...i},l)=>{const d=P.useRef(null),u=Sr(d,l),h=og(r),p=Gx(t);return P.useEffect(()=>{const v=d.current;if(!v)return;const y=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(y,"checked").set;if(h!==r&&g){const C=new Event("click",{bubbles:a});g.call(v,r),v.dispatchEvent(C)}},[h,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:u,style:{...i.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});hg.displayName=_5;function ug(s){return s?"checked":"unchecked"}var fg=lg,S5=dg;const ji=P.forwardRef(({className:s,...t},r)=>e.jsx(fg,{className:mt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input hover:shadow-md active:scale-95",s),...t,ref:r,children:e.jsx(S5,{className:mt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-all duration-300 ease-in-out data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 hover:shadow-xl")})}));ji.displayName=fg.displayName;async function k5(s){if(!s.ok){const t=await s.text()||s.statusText;throw new Error(`${s.status}: ${t}`)}}async function Fl(s,t,r){const a=r?{"Content-Type":"application/json"}:{},i=localStorage.getItem("token");i&&(a.Authorization=`Bearer ${i}`);const d=t.startsWith("http")?t:`http://localhost:8080${t}`;let u=await fetch(d,{method:s,headers:a,body:r?JSON.stringify(r):void 0,credentials:"include"});return u.status===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload(),u):(await k5(u),u)}const C5=({on401:s})=>async({queryKey:t})=>{try{const r="http://localhost:8080",a=t[0],i=a.startsWith("http")?a:`${r}${a}`,l=localStorage.getItem("token"),d={};l&&(d.Authorization=`Bearer ${l}`);const u=new AbortController,h=setTimeout(()=>u.abort(),1e4);let p=await fetch(i,{headers:d,credentials:"include",signal:u.signal});if(clearTimeout(h),s==="returnNull"&&(p.status===401||p.status===403))return null;if(!p.ok){if(s==="returnNull")return null;const v=await p.text()||p.statusText;throw new Error(`${p.status}: ${v}`)}return await p.json()}catch(r){return console.warn("API request failed:",r.message),null}};new Sm({defaultOptions:{queries:{queryFn:C5({on401:"returnNull"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,retry:!1,retryOnMount:!1,refetchOnReconnect:!1},mutations:{retry:!1}}});function lf(){const{theme:s,setTheme:t}=Em(),{user:r,logout:a}=Yr(),{toast:i}=qs(),[l,d]=P.useState(!1),[u,h]=P.useState(!1),[p,v]=P.useState(!1),[y,N]=P.useState({name:r?.name||"",email:r?.email||"",phone:r?.phone||"",address:"",bio:""}),[g,C]=P.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[j,T]=P.useState({current:!1,new:!1,confirm:!1}),[A,S]=P.useState({appointments:!0,messages:!0,promotions:!1,emailUpdates:!0,smsAlerts:!0}),$=async()=>{try{(await Fl("PUT","/api/user/profile",y)).ok&&(i({title:"Perfil atualizado",description:"Suas informações foram salvas com sucesso."}),d(!1))}catch{i({title:"Erro",description:"Não foi possível atualizar o perfil.",variant:"destructive"})}},V=async()=>{if(g.newPassword!==g.confirmPassword){i({title:"Erro",description:"As senhas não coincidem.",variant:"destructive"});return}try{(await Fl("PUT","/api/user/password",{currentPassword:g.currentPassword,newPassword:g.newPassword})).ok&&(i({title:"Senha alterada",description:"Sua senha foi atualizada com sucesso."}),h(!1),C({currentPassword:"",newPassword:"",confirmPassword:""}))}catch{i({title:"Erro",description:"Não foi possível alterar a senha.",variant:"destructive"})}},K=()=>{a(),window.location.href="/"};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"lg:hidden sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-3 sm:px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>window.history.back(),children:e.jsx(or,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações"})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-3 sm:p-4 lg:p-8 space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[e.jsx(Wl,{size:24,className:"sm:w-8 sm:h-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Configurações"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:"Gerencie sua conta e preferências"})]})]})}),e.jsxs(ot,{children:[e.jsxs(ns,{className:"flex flex-row items-center justify-between space-y-0 pb-3 sm:pb-4",children:[e.jsxs(hs,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(Gr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Perfil"]}),e.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>d(!l),className:"text-xs sm:text-sm",children:[e.jsx(cp,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),l?"Cancelar":"Editar"]})]}),e.jsxs(lt,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-yellow-100 dark:bg-yellow-900/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Gr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm sm:text-base",children:r?.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 truncate",children:r?.email}),e.jsx(Bs,{variant:"secondary",className:"mt-1 text-xs",children:r?.userType==="client"?"Cliente":"Profissional"})]}),l&&e.jsx(Oe,{variant:"outline",size:"sm",className:"flex-shrink-0",children:e.jsx(vo,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 pt-3 sm:pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome"}),e.jsx(xt,{value:y.name,onChange:me=>N({...y,name:me.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx(xt,{value:y.email,onChange:me=>N({...y,email:me.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefone"}),e.jsx(xt,{value:y.phone,onChange:me=>N({...y,phone:me.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Endereço"}),e.jsx(xt,{value:y.address,onChange:me=>N({...y,address:me.target.value}),className:"mt-1 h-9 sm:h-10 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bio"}),e.jsx("textarea",{value:y.bio,onChange:me=>N({...y,bio:me.target.value}),className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",rows:3,placeholder:"Conte um pouco sobre você..."})]}),e.jsx("div",{className:"md:col-span-2 flex gap-2",children:e.jsxs(Oe,{onClick:$,className:"bg-yellow-500 hover:bg-yellow-600 text-sm",children:[e.jsx(Ec,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Salvar"]})})]})]})]}),e.jsxs(ot,{children:[e.jsx(ns,{className:"pb-3 sm:pb-4",children:e.jsxs(hs,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(Al,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Notificações"]})}),e.jsx(lt,{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Agendamentos"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Receber notificações sobre consultas"})]}),e.jsx(ji,{checked:A.appointments,onCheckedChange:me=>S({...A,appointments:me})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Mensagens"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Notificações de novas mensagens"})]}),e.jsx(ji,{checked:A.messages,onCheckedChange:me=>S({...A,messages:me})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Promoções"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Ofertas e descontos especiais"})]}),e.jsx(ji,{checked:A.promotions,onCheckedChange:me=>S({...A,promotions:me})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Receber atualizações por email"})]}),e.jsx(ji,{checked:A.emailUpdates,onCheckedChange:me=>S({...A,emailUpdates:me})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"SMS"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Alertas importantes via SMS"})]}),e.jsx(ji,{checked:A.smsAlerts,onCheckedChange:me=>S({...A,smsAlerts:me})})]})]})})]}),e.jsxs(ot,{children:[e.jsx(ns,{className:"pb-3 sm:pb-4",children:e.jsxs(hs,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s==="dark"?e.jsx(ap,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}):e.jsx(fp,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Aparência"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Modo Escuro"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Alternar entre tema claro e escuro"})]}),e.jsx(ji,{checked:s==="dark",onCheckedChange:me=>t(me?"dark":"light")})]})})]}),e.jsxs(ot,{children:[e.jsx(ns,{className:"pb-3 sm:pb-4",children:e.jsxs(hs,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(el,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600"}),"Segurança"]})}),e.jsxs(lt,{className:"space-y-3 sm:space-y-4",children:[e.jsxs(Oe,{variant:"outline",onClick:()=>h(!u),className:"w-full justify-start text-sm",children:[e.jsx(A1,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Alterar Senha"]}),u&&e.jsxs("div",{className:"space-y-3 sm:space-y-4 p-3 sm:p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha Atual"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xt,{type:j.current?"text":"password",value:g.currentPassword,onChange:me=>C({...g,currentPassword:me.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>T({...j,current:!j.current}),children:j.current?e.jsx(bc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(oo,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nova Senha"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xt,{type:j.new?"text":"password",value:g.newPassword,onChange:me=>C({...g,newPassword:me.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>T({...j,new:!j.new}),children:j.new?e.jsx(bc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(oo,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar Nova Senha"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(xt,{type:j.confirm?"text":"password",value:g.confirmPassword,onChange:me=>C({...g,confirmPassword:me.target.value}),className:"h-9 sm:h-10 text-sm pr-10"}),e.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-9 sm:h-10 w-9 sm:w-10 p-0 hover:bg-transparent",onClick:()=>T({...j,confirm:!j.confirm}),children:j.confirm?e.jsx(bc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}):e.jsx(oo,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400"})})]})]}),e.jsxs(Oe,{onClick:V,className:"bg-yellow-500 hover:bg-yellow-600 text-sm",children:[e.jsx(Ec,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Alterar Senha"]})]})]})]}),e.jsxs(ot,{className:"border-red-200 dark:border-red-800",children:[e.jsx(ns,{className:"pb-3 sm:pb-4",children:e.jsxs(hs,{className:"flex items-center gap-2 text-base sm:text-lg text-red-600 dark:text-red-400",children:[e.jsx(tl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Zona de Perigo"]})}),e.jsx(lt,{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white mb-1",children:"Excluir Conta"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Esta ação não pode ser desfeita. Sua conta será permanentemente removida."}),e.jsxs(Oe,{variant:"destructive",onClick:()=>v(!0),className:"text-sm",children:[e.jsx(tl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Excluir Conta"]})]})})]}),e.jsx("div",{className:"pt-4 sm:pt-6",children:e.jsxs(Oe,{variant:"outline",onClick:K,className:"w-full text-red-600 border-red-200 hover:bg-red-50 dark:border-red-800 dark:hover:bg-red-900/20 text-sm",children:[e.jsx(Rl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Sair da Conta"]})})]})]})}const P5=({amount:s})=>{const{toast:t}=qs(),[,r]=_r(),[a,i]=P.useState(!1),[l,d]=P.useState(""),[u,h]=P.useState(""),[p,v]=P.useState(""),[y,N]=P.useState(""),g=async C=>{C.preventDefault(),i(!0);try{(await Fl("POST","/api/create-payment-intent",{amount:s,card:{cardNumber:l,expiryDate:u,cvv:p,cardHolder:y}})).ok&&(t({title:"Pagamento Realizado",description:"Seu pagamento foi processado com sucesso!"}),r("/profile"))}catch(j){t({title:"Erro no Pagamento",description:j.message||"Erro ao processar pagamento",variant:"destructive"})}i(!1)};return e.jsxs("form",{onSubmit:g,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Nome no Cartão"}),e.jsx(xt,{type:"text",placeholder:"João da Silva",value:y,onChange:C=>N(C.target.value),className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Número do Cartão"}),e.jsx(xt,{type:"text",placeholder:"0000 0000 0000 0000",value:l,onChange:C=>d(C.target.value),maxLength:19,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Validade"}),e.jsx(xt,{type:"text",placeholder:"MM/AA",value:u,onChange:C=>h(C.target.value),maxLength:5,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"CVV"}),e.jsx(xt,{type:"text",placeholder:"123",value:p,onChange:C=>v(C.target.value),maxLength:4,className:"h-10 sm:h-12 text-sm sm:text-base",required:!0})]})]})]}),e.jsx(Oe,{type:"submit",disabled:a,className:"w-full h-10 sm:h-12 text-sm sm:text-base font-semibold",children:a?"Processando...":`Pagar R$ ${s.toFixed(2)}`})]})};function L5(){const[,s]=_r(),t=150;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:e.jsx("div",{className:"max-w-lg mx-auto px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[e.jsx(or,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold",children:"Pagamento"}),e.jsx("div",{className:"w-12 sm:w-16"})]})})}),e.jsxs("div",{className:"max-w-lg mx-auto p-3 sm:p-4 space-y-4 sm:space-y-6",children:[e.jsxs(ot,{children:[e.jsx(ns,{className:"pb-3 sm:pb-4",children:e.jsxs(hs,{className:"flex items-center gap-2 text-base sm:text-lg",children:[e.jsx(Yd,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Resumo do Serviço"]})}),e.jsxs(lt,{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Consulta Fisioterapia"}),e.jsx("span",{children:"R$ 120,00"})]}),e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Taxa de serviço"}),e.jsx("span",{children:"R$ 30,00"})]}),e.jsx("div",{className:"border-t pt-2 sm:pt-3",children:e.jsxs("div",{className:"flex justify-between font-semibold text-base sm:text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["R$ ",t.toFixed(2)]})]})})]})]}),e.jsxs(ot,{children:[e.jsx(ns,{className:"pb-3 sm:pb-4",children:e.jsx(hs,{className:"text-base sm:text-lg",children:"Informações de Pagamento"})}),e.jsx(lt,{children:e.jsx(P5,{amount:t})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(el,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-800 dark:text-green-300",children:"Pagamento Seguro"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Suas informações são protegidas com criptografia SSL"})]}),e.jsx(Ul,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"})]})]}),e.jsx(Oa,{hidePlus:!0})]})}var Kc="Tabs",[A5,aj]=xo(Kc,[sm]),mg=sm(),[T5,Gh]=A5(Kc),pg=P.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,onValueChange:i,defaultValue:l,orientation:d="horizontal",dir:u,activationMode:h="automatic",...p}=s,v=rm(u),[y,N]=Qo({prop:a,onChange:i,defaultProp:l??"",caller:Kc});return e.jsx(T5,{scope:r,baseId:Hl(),value:y,onValueChange:N,orientation:d,dir:v,activationMode:h,children:e.jsx(cs.div,{dir:v,"data-orientation":d,...p,ref:t})})});pg.displayName=Kc;var gg="TabsList",xg=P.forwardRef((s,t)=>{const{__scopeTabs:r,loop:a=!0,...i}=s,l=Gh(gg,r),d=mg(r);return e.jsx(Yx,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:a,children:e.jsx(cs.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:t})})});xg.displayName=gg;var vg="TabsTrigger",yg=P.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,disabled:i=!1,...l}=s,d=Gh(vg,r),u=mg(r),h=Ng(d.baseId,a),p=jg(d.baseId,a),v=a===d.value;return e.jsx(Kx,{asChild:!0,...u,focusable:!i,active:v,children:e.jsx(cs.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":p,"data-state":v?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...l,ref:t,onMouseDown:Gt(s.onMouseDown,y=>{!i&&y.button===0&&y.ctrlKey===!1?d.onValueChange(a):y.preventDefault()}),onKeyDown:Gt(s.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&d.onValueChange(a)}),onFocus:Gt(s.onFocus,()=>{const y=d.activationMode!=="manual";!v&&!i&&y&&d.onValueChange(a)})})})});yg.displayName=vg;var bg="TabsContent",wg=P.forwardRef((s,t)=>{const{__scopeTabs:r,value:a,forceMount:i,children:l,...d}=s,u=Gh(bg,r),h=Ng(u.baseId,a),p=jg(u.baseId,a),v=a===u.value,y=P.useRef(v);return P.useEffect(()=>{const N=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(N)},[]),e.jsx(jh,{present:i||v,children:({present:N})=>e.jsx(cs.div,{"data-state":v?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!N,id:p,tabIndex:0,...d,ref:t,style:{...s.style,animationDuration:y.current?"0s":void 0},children:N&&l})})});wg.displayName=bg;function Ng(s,t){return`${s}-trigger-${t}`}function jg(s,t){return`${s}-content-${t}`}var E5=pg,_g=xg,Sg=yg,kg=wg;const Cg=E5,Yh=P.forwardRef(({className:s,...t},r)=>e.jsx(_g,{ref:r,className:mt("inline-flex h-auto min-h-12 items-center justify-center rounded-md bg-muted p-1.5 text-muted-foreground w-full border border-border shadow-sm",s),...t}));Yh.displayName=_g.displayName;const _i=P.forwardRef(({className:s,...t},r)=>e.jsx(Sg,{ref:r,className:mt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 text-xs sm:text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm hover:bg-accent/50 hover:text-accent-foreground min-h-10 sm:min-h-11",s),...t}));_i.displayName=Sg.displayName;const Si=P.forwardRef(({className:s,...t},r)=>e.jsx(kg,{ref:r,className:mt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Si.displayName=kg.displayName;function M5({params:s}){const[t,r]=P.useState(void 0),[a,i]=P.useState(new Date),[l,d]=P.useState(""),[u,h]=P.useState(!1);_r();const{data:p}=Lc({queryKey:[`/api/professionals/${s.id}`]}),{data:v=[]}=Lc({queryKey:["/api/professionals"]}),y=p||v.find(K=>K.id===parseInt(s.id));if(!y)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profissional não encontrado"}),e.jsx(Gs,{href:"/",children:e.jsx(Oe,{children:"Voltar para Home"})})]})});const N={acompanhante_hospitalar:"🏥"},g={acompanhante_hospitalar:"Acompanhante Hospitalar"},C=N[y.category]||"👨‍⚕️",j=g[y.category]||y.category,A=(()=>{const K=[];for(let me=8;me<=18;me++)for(let le of[0,30]){const X=`${me.toString().padStart(2,"0")}:${le.toString().padStart(2,"0")}`;K.push(X)}return K})(),S=()=>{l.trim()&&(console.log("Sending message:",l),d(""),h(!1))},$=[],V=[];return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gs,{href:"/",children:e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(or,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Perfil do Profissional"}),e.jsx("div",{className:"ml-auto flex gap-2",children:e.jsx(Oe,{variant:"outline",size:"sm",children:e.jsx(T1,{className:"h-4 w-4"})})})]})}),e.jsxs("div",{className:"p-4 pb-20 space-y-6",children:[e.jsx(ot,{children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:y.imageUrl||void 0,alt:y.name,className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover mx-auto sm:mx-0"})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:y.name}),e.jsxs("p",{className:"text-lg text-primary font-semibold flex items-center justify-center sm:justify-start gap-2 mb-2",children:[e.jsx("span",{children:C}),j]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:y.specialization})]}),e.jsx(Bs,{variant:y.available?"secondary":"outline",className:`${y.available?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:y.available?"Disponível":"Ocupado"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(cn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-semibold",children:y.rating})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avaliação"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold mb-1",children:y.totalReviews}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avaliações"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold mb-1",children:y.experience}),e.jsx("p",{className:"text-xs text-gray-500",children:"Experiência"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold mb-1 text-primary",children:["R$ ",y.hourlyRate,"/h"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Valor"})]})]}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-600 dark:text-gray-400 mb-6",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{children:y.location}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[y.distance," km de você"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Oe,{className:"flex-1",children:[e.jsx(pr,{className:"h-4 w-4 mr-2"}),"Agendar Consulta"]}),e.jsxs(Dl,{open:u,onOpenChange:h,children:[e.jsx(Qd,{asChild:!0,children:e.jsxs(Oe,{variant:"outline",className:"flex-1",children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})}),e.jsxs(rl,{children:[e.jsx(nl,{children:e.jsxs(al,{children:["Enviar mensagem para ",y.name]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Yn,{placeholder:"Digite sua mensagem sobre o serviço que você precisa...",value:l,onChange:K=>d(K.target.value),rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Oe,{onClick:S,disabled:!l.trim(),children:"Enviar Mensagem"}),e.jsx(Oe,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"})]})]})]})]}),e.jsxs(Oe,{variant:"outline",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Videochamada"]})]})]})]})})}),e.jsxs(Cg,{defaultValue:"about",className:"space-y-4 sm:space-y-6",children:[e.jsxs(Yh,{className:"grid w-full grid-cols-4 h-auto sm:h-10 p-1 gap-1",children:[e.jsx(_i,{value:"about",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Sobre"}),e.jsx(_i,{value:"portfolio",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Portfólio"}),e.jsx(_i,{value:"reviews",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Avaliações"}),e.jsx(_i,{value:"schedule",className:"text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-1.5 whitespace-nowrap",children:"Agendar"})]}),e.jsxs(Si,{value:"about",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(j1,{className:"h-5 w-5"}),"Sobre o Profissional"]})}),e.jsx(lt,{children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:y.description})})]}),e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Ac,{className:"h-5 w-5"}),"Certificações e Qualificações"]})}),e.jsx(lt,{children:e.jsx("div",{className:"space-y-3",children:y.certifications?.split(",").map((K,me)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Ts,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:K.trim()})]},me))})})]}),e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-5 w-5"}),"Informações de Contato"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ys,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:y.location})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Atendimento de segunda a sábado"})]})]})})]})]}),e.jsx(Si,{value:"portfolio",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(vo,{className:"h-5 w-5"}),"Portfólio de Serviços"]})}),e.jsx(lt,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$.map(K=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-sm border",children:[e.jsx("img",{src:K.image,alt:K.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx(Bs,{variant:"outline",className:"mb-2",children:K.category}),e.jsx("h3",{className:"font-semibold mb-2",children:K.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:K.description})]})]},K.id))})})]})}),e.jsx(Si,{value:"reviews",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),"Avaliações dos Pacientes"]})}),e.jsx(lt,{children:e.jsx("div",{className:"space-y-6",children:V.map(K=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-semibold text-sm",children:K.patient[0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:K.patient}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(K.date).toLocaleDateString("pt-BR")})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((me,le)=>e.jsx(cn,{className:`h-4 w-4 ${le<K.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},le))})]}),e.jsx(Bs,{variant:"outline",className:"mb-2",children:K.service}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:K.comment})]},K.id))})})]})}),e.jsx(Si,{value:"schedule",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(pr,{className:"h-5 w-5"}),"Agendar Consulta"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Selecione a data"}),e.jsx("input",{type:"date",value:a.toISOString().split("T")[0],onChange:K=>i(new Date(K.target.value)),className:"w-full p-3 border rounded-lg",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Horários disponíveis"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:A.map(K=>e.jsx(Oe,{variant:t===K?"default":"outline",size:"sm",onClick:()=>r(K),className:"text-xs",children:K},K))})]}),t&&e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Resumo do Agendamento"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Profissional:"})," ",y.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serviço:"})," ",y.specialization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Data:"})," ",a.toLocaleDateString("pt-BR")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Horário:"})," ",t]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor:"})," R$ ",y.hourlyRate,"/hora"]})]}),e.jsx(Gs,{href:"/payment",children:e.jsx(Oe,{className:"w-full mt-4",children:"Confirmar Agendamento"})})]})]})})]})})]})]})]})}const I5=Qx,R5=Xx,O5=P.forwardRef(({className:s,inset:t,children:r,...a},i)=>e.jsxs(nm,{ref:i,className:mt("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...a,children:[r,e.jsx(rp,{className:"ml-auto"})]}));O5.displayName=nm.displayName;const D5=P.forwardRef(({className:s,...t},r)=>e.jsx(am,{ref:r,className:mt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t}));D5.displayName=am.displayName;const Pg=P.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Jx,{children:e.jsx(im,{ref:a,sideOffset:t,className:mt("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...r})}));Pg.displayName=im.displayName;const Aa=P.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(om,{ref:a,className:mt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...r}));Aa.displayName=om.displayName;const F5=P.forwardRef(({className:s,children:t,checked:r,...a},i)=>e.jsxs(lm,{ref:i,className:mt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(cm,{children:e.jsx(Ul,{className:"h-4 w-4"})})}),t]}));F5.displayName=lm.displayName;const z5=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(dm,{ref:a,className:mt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(cm,{children:e.jsx(C1,{className:"h-2 w-2 fill-current"})})}),t]}));z5.displayName=dm.displayName;const B5=P.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(hm,{ref:a,className:mt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));B5.displayName=hm.displayName;const eh=P.forwardRef(({className:s,...t},r)=>e.jsx(um,{ref:r,className:mt("-mx-1 my-1 h-px bg-muted",s),...t}));eh.displayName=um.displayName;const q5=tv,H5=sv,Lg=P.forwardRef(({className:s,align:t="center",sideOffset:r=4,...a},i)=>e.jsx(ev,{children:e.jsx(fm,{ref:i,align:t,sideOffset:r,className:mt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...a})}));Lg.displayName=fm.displayName;const $5=[{label:"Início",to:"/provider-dashboard",icon:e.jsx(Bh,{className:"h-6 w-6"})},{label:"Agenda",to:"/agenda-profissional",icon:e.jsx(pr,{className:"h-6 w-6"})},{label:"Chat",to:"/messages-provider",icon:e.jsx(Mn,{className:"h-6 w-6"})},{label:"Pedidos",to:"/provider-orders",icon:e.jsx(P1,{className:"h-6 w-6"})},{label:"Perfil",to:"/provider-profile",icon:e.jsx(Gr,{className:"h-6 w-6"})}];function th(){const[s]=_r();return e.jsx("nav",{className:"bg-white border-t border-gray-200 fixed bottom-0 left-0 w-full z-50 shadow rounded-t-xl px-0",children:e.jsx("ul",{className:"flex justify-around items-center h-16 max-w-full px-2 sm:px-4",children:$5.map(t=>e.jsx("li",{children:e.jsxs(Gs,{href:t.to,className:`flex flex-col items-center text-xs font-medium transition-colors duration-200 ${s===t.to?"text-yellow-500":"text-gray-500 hover:text-yellow-500"}`,children:[t.icon,e.jsx("span",{className:"mt-1",children:t.label})]})},t.to))})})}function ol({children:s}){return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:s}),e.jsx(th,{})]})}function U5({professionalId:s}){const[t,r]=P.useState([]),[a,i]=P.useState(!0),[l,d]=P.useState({totalEarnings:0,totalServices:0,averageRating:0,totalReviews:0}),{toast:u}=qs();P.useEffect(()=>{h()},[s]);const h=async()=>{try{i(!0);const N=localStorage.getItem("token");if(!N){u({title:"Erro",description:"Token de autenticação não encontrado",variant:"destructive"});return}const g=await fetch(`${ft()}/api/professional/${s}/completed-services`,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});if(!g.ok)throw new Error("Erro ao buscar serviços concluídos");const C=await g.json();r(C.data);const j=C.data.reduce((V,K)=>V+Number(K.amount),0),T=C.data.length,A=C.data.filter(V=>V.hasReview),S=A.length,$=S>0?A.reduce((V,K)=>V+(K.reviewRating||0),0)/S:0;d({totalEarnings:j,totalServices:T,averageRating:Math.round($*10)/10,totalReviews:S})}catch(N){console.error("Erro ao buscar serviços concluídos:",N),u({title:"Erro",description:"Não foi possível carregar os serviços concluídos",variant:"destructive"})}finally{i(!1)}},p=N=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(N),v=N=>new Date(N).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=N=>Array.from({length:5},(g,C)=>e.jsx(cn,{className:`h-4 w-4 ${C<N?"text-yellow-400 fill-current":"text-gray-300"}`},C));return a?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Vr,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ganhos Totais"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p(l.totalEarnings)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ts,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Serviços Concluídos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalServices})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(cn,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avaliação Média"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.averageRating})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Mn,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avaliações"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalReviews})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Serviços Concluídos"})}),t.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(Ts,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"Nenhum serviço concluído ainda"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(N=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:N.serviceTitle}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Concluído"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Gr,{className:"h-4 w-4"}),e.jsx("span",{children:N.clientName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(pr,{className:"h-4 w-4"}),e.jsxs("span",{children:["Concluído em ",v(N.completedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Vr,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-green-600",children:p(N.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ts,{className:"h-4 w-4"}),e.jsxs("span",{children:["Transação: ",N.transactionStatus]})]})]}),N.hasReview?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avaliação do Cliente:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[y(N.reviewRating||0),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",N.reviewRating,"/5)"]})]})]}),N.reviewComment&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',N.reviewComment,'"']}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Avaliado em ",v(N.reviewCreatedAt||"")]})]}):e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"⏳ Aguardando avaliação do cliente"})})]})})},N.serviceRequestId))})]})]})}function W5(s,t){const r=P.useRef(t);P.useEffect(function(){t!==r.current&&s.attributionControl!=null&&(r.current!=null&&s.attributionControl.removeAttribution(r.current),t!=null&&s.attributionControl.addAttribution(t)),r.current=t},[s,t])}const V5=1;function Z5(s){return Object.freeze({__version:V5,map:s})}function Kh(s,t){return Object.freeze({...s,...t})}const Ag=P.createContext(null),Jh=Ag.Provider;function Jc(){const s=P.useContext(Ag);if(s==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return s}function Tg(s){function t(r,a){const{instance:i,context:l}=s(r).current;return P.useImperativeHandle(a,()=>i),r.children==null?null:kc.createElement(Jh,{value:l},r.children)}return P.forwardRef(t)}function G5(s){function t(r,a){const{instance:i}=s(r).current;return P.useImperativeHandle(a,()=>i),null}return P.forwardRef(t)}function Y5(s){return function(r){const a=Jc(),i=s(r,a),{instance:l}=i.current,d=P.useRef(r.position),{position:u}=r;return P.useEffect(function(){return l.addTo(a.map),function(){l.remove()}},[a.map,l]),P.useEffect(function(){u!=null&&u!==d.current&&(l.setPosition(u),d.current=u)},[l,u]),i}}function K5(s,t){const r=P.useRef();P.useEffect(function(){return t!=null&&s.instance.on(t),r.current=t,function(){r.current!=null&&s.instance.off(r.current),r.current=null}},[s,t])}function Eg(s,t){const r=s.pane??t.pane;return r?{...s,pane:r}:s}var Cl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var J5=Cl.exports,cf;function Q5(){return cf||(cf=1,function(s,t){(function(r,a){a(t)})(J5,function(r){var a="1.9.4";function i(n){var o,f,b,k;for(f=1,b=arguments.length;f<b;f++){k=arguments[f];for(o in k)n[o]=k[o]}return n}var l=Object.create||function(){function n(){}return function(o){return n.prototype=o,new n}}();function d(n,o){var f=Array.prototype.slice;if(n.bind)return n.bind.apply(n,f.call(arguments,1));var b=f.call(arguments,2);return function(){return n.apply(o,b.length?b.concat(f.call(arguments)):arguments)}}var u=0;function h(n){return"_leaflet_id"in n||(n._leaflet_id=++u),n._leaflet_id}function p(n,o,f){var b,k,F,ce;return ce=function(){b=!1,k&&(F.apply(f,k),k=!1)},F=function(){b?k=arguments:(n.apply(f,arguments),setTimeout(ce,o),b=!0)},F}function v(n,o,f){var b=o[1],k=o[0],F=b-k;return n===b&&f?n:((n-k)%F+F)%F+k}function y(){return!1}function N(n,o){if(o===!1)return n;var f=Math.pow(10,o===void 0?6:o);return Math.round(n*f)/f}function g(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function C(n){return g(n).split(/\s+/)}function j(n,o){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?l(n.options):{});for(var f in o)n.options[f]=o[f];return n.options}function T(n,o,f){var b=[];for(var k in n)b.push(encodeURIComponent(f?k.toUpperCase():k)+"="+encodeURIComponent(n[k]));return(!o||o.indexOf("?")===-1?"?":"&")+b.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function S(n,o){return n.replace(A,function(f,b){var k=o[b];if(k===void 0)throw new Error("No value provided for variable "+f);return typeof k=="function"&&(k=k(o)),k})}var $=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function V(n,o){for(var f=0;f<n.length;f++)if(n[f]===o)return f;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function me(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var le=0;function X(n){var o=+new Date,f=Math.max(0,16-(o-le));return le=o+f,window.setTimeout(n,f)}var ee=window.requestAnimationFrame||me("RequestAnimationFrame")||X,je=window.cancelAnimationFrame||me("CancelAnimationFrame")||me("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function R(n,o,f){if(f&&ee===X)n.call(o);else return ee.call(window,d(n,o))}function z(n){n&&je.call(window,n)}var q={__proto__:null,extend:i,create:l,bind:d,get lastId(){return u},stamp:h,throttle:p,wrapNum:v,falseFn:y,formatNum:N,trim:g,splitWords:C,setOptions:j,getParamString:T,template:S,isArray:$,indexOf:V,emptyImageUrl:K,requestFn:ee,cancelFn:je,requestAnimFrame:R,cancelAnimFrame:z};function B(){}B.extend=function(n){var o=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=o.__super__=this.prototype,b=l(f);b.constructor=o,o.prototype=b;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(o[k]=this[k]);return n.statics&&i(o,n.statics),n.includes&&(ge(n.includes),i.apply(null,[b].concat(n.includes))),i(b,n),delete b.statics,delete b.includes,b.options&&(b.options=f.options?l(f.options):{},i(b.options,n.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,ce=b._initHooks.length;F<ce;F++)b._initHooks[F].call(this)}},o},B.include=function(n){var o=this.prototype.options;return i(this.prototype,n),n.options&&(this.prototype.options=o,this.mergeOptions(n.options)),this},B.mergeOptions=function(n){return i(this.prototype.options,n),this},B.addInitHook=function(n){var o=Array.prototype.slice.call(arguments,1),f=typeof n=="function"?n:function(){this[n].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function ge(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=$(n)?n:[n];for(var o=0;o<n.length;o++)n[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ue={on:function(n,o,f){if(typeof n=="object")for(var b in n)this._on(b,n[b],o);else{n=C(n);for(var k=0,F=n.length;k<F;k++)this._on(n[k],o,f)}return this},off:function(n,o,f){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var b in n)this._off(b,n[b],o);else{n=C(n);for(var k=arguments.length===1,F=0,ce=n.length;F<ce;F++)k?this._off(n[F]):this._off(n[F],o,f)}return this},_on:function(n,o,f,b){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(n,o,f)===!1){f===this&&(f=void 0);var k={fn:o,ctx:f};b&&(k.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(k)}},_off:function(n,o,f){var b,k,F;if(this._events&&(b=this._events[n],!!b)){if(arguments.length===1){if(this._firingCount)for(k=0,F=b.length;k<F;k++)b[k].fn=y;delete this._events[n];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var ce=this._listens(n,o,f);if(ce!==!1){var Ce=b[ce];this._firingCount&&(Ce.fn=y,this._events[n]=b=b.slice()),b.splice(ce,1)}}},fire:function(n,o,f){if(!this.listens(n,f))return this;var b=i({},o,{type:n,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var k=this._events[n];if(k){this._firingCount=this._firingCount+1||1;for(var F=0,ce=k.length;F<ce;F++){var Ce=k[F],Ee=Ce.fn;Ce.once&&this.off(n,Ee,Ce.ctx),Ee.call(Ce.ctx||this,b)}this._firingCount--}}return f&&this._propagateEvent(b),this},listens:function(n,o,f,b){typeof n!="string"&&console.warn('"string" type argument expected');var k=o;typeof o!="function"&&(b=!!o,k=void 0,f=void 0);var F=this._events&&this._events[n];if(F&&F.length&&this._listens(n,k,f)!==!1)return!0;if(b){for(var ce in this._eventParents)if(this._eventParents[ce].listens(n,o,f,b))return!0}return!1},_listens:function(n,o,f){if(!this._events)return!1;var b=this._events[n]||[];if(!o)return!!b.length;f===this&&(f=void 0);for(var k=0,F=b.length;k<F;k++)if(b[k].fn===o&&b[k].ctx===f)return k;return!1},once:function(n,o,f){if(typeof n=="object")for(var b in n)this._on(b,n[b],o,!0);else{n=C(n);for(var k=0,F=n.length;k<F;k++)this._on(n[k],o,f,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[h(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[h(n)],this},_propagateEvent:function(n){for(var o in this._eventParents)this._eventParents[o].fire(n.type,i({layer:n.target,propagatedFrom:n.target},n),!0)}};ue.addEventListener=ue.on,ue.removeEventListener=ue.clearAllEventListeners=ue.off,ue.addOneTimeEventListener=ue.once,ue.fireEvent=ue.fire,ue.hasEventListeners=ue.listens;var be=B.extend(ue);function ne(n,o,f){this.x=f?Math.round(n):n,this.y=f?Math.round(o):o}var ve=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(n){return this.clone()._add(ae(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ae(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new ne(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new ne(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ve(this.x),this.y=ve(this.y),this},distanceTo:function(n){n=ae(n);var o=n.x-this.x,f=n.y-this.y;return Math.sqrt(o*o+f*f)},equals:function(n){return n=ae(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ae(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function ae(n,o,f){return n instanceof ne?n:$(n)?new ne(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new ne(n.x,n.y):new ne(n,o,f)}function fe(n,o){if(n)for(var f=o?[n,o]:n,b=0,k=f.length;b<k;b++)this.extend(f[b])}fe.prototype={extend:function(n){var o,f;if(!n)return this;if(n instanceof ne||typeof n[0]=="number"||"x"in n)o=f=ae(n);else if(n=E(n),o=n.min,f=n.max,!o||!f)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=f.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(n){return ae((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return ae(this.min.x,this.max.y)},getTopRight:function(){return ae(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var o,f;return typeof n[0]=="number"||n instanceof ne?n=ae(n):n=E(n),n instanceof fe?(o=n.min,f=n.max):o=f=n,o.x>=this.min.x&&f.x<=this.max.x&&o.y>=this.min.y&&f.y<=this.max.y},intersects:function(n){n=E(n);var o=this.min,f=this.max,b=n.min,k=n.max,F=k.x>=o.x&&b.x<=f.x,ce=k.y>=o.y&&b.y<=f.y;return F&&ce},overlaps:function(n){n=E(n);var o=this.min,f=this.max,b=n.min,k=n.max,F=k.x>o.x&&b.x<f.x,ce=k.y>o.y&&b.y<f.y;return F&&ce},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var o=this.min,f=this.max,b=Math.abs(o.x-f.x)*n,k=Math.abs(o.y-f.y)*n;return E(ae(o.x-b,o.y-k),ae(f.x+b,f.y+k))},equals:function(n){return n?(n=E(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function E(n,o){return!n||n instanceof fe?n:new fe(n,o)}function W(n,o){if(n)for(var f=o?[n,o]:n,b=0,k=f.length;b<k;b++)this.extend(f[b])}W.prototype={extend:function(n){var o=this._southWest,f=this._northEast,b,k;if(n instanceof Q)b=n,k=n;else if(n instanceof W){if(b=n._southWest,k=n._northEast,!b||!k)return this}else return n?this.extend(re(n)||Z(n)):this;return!o&&!f?(this._southWest=new Q(b.lat,b.lng),this._northEast=new Q(k.lat,k.lng)):(o.lat=Math.min(b.lat,o.lat),o.lng=Math.min(b.lng,o.lng),f.lat=Math.max(k.lat,f.lat),f.lng=Math.max(k.lng,f.lng)),this},pad:function(n){var o=this._southWest,f=this._northEast,b=Math.abs(o.lat-f.lat)*n,k=Math.abs(o.lng-f.lng)*n;return new W(new Q(o.lat-b,o.lng-k),new Q(f.lat+b,f.lng+k))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof Q||"lat"in n?n=re(n):n=Z(n);var o=this._southWest,f=this._northEast,b,k;return n instanceof W?(b=n.getSouthWest(),k=n.getNorthEast()):b=k=n,b.lat>=o.lat&&k.lat<=f.lat&&b.lng>=o.lng&&k.lng<=f.lng},intersects:function(n){n=Z(n);var o=this._southWest,f=this._northEast,b=n.getSouthWest(),k=n.getNorthEast(),F=k.lat>=o.lat&&b.lat<=f.lat,ce=k.lng>=o.lng&&b.lng<=f.lng;return F&&ce},overlaps:function(n){n=Z(n);var o=this._southWest,f=this._northEast,b=n.getSouthWest(),k=n.getNorthEast(),F=k.lat>o.lat&&b.lat<f.lat,ce=k.lng>o.lng&&b.lng<f.lng;return F&&ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,o){return n?(n=Z(n),this._southWest.equals(n.getSouthWest(),o)&&this._northEast.equals(n.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(n,o){return n instanceof W?n:new W(n,o)}function Q(n,o,f){if(isNaN(n)||isNaN(o))throw new Error("Invalid LatLng object: ("+n+", "+o+")");this.lat=+n,this.lng=+o,f!==void 0&&(this.alt=+f)}Q.prototype={equals:function(n,o){if(!n)return!1;n=re(n);var f=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return f<=(o===void 0?1e-9:o)},toString:function(n){return"LatLng("+N(this.lat,n)+", "+N(this.lng,n)+")"},distanceTo:function(n){return Ne.distance(this,re(n))},wrap:function(){return Ne.wrapLatLng(this)},toBounds:function(n){var o=180*n/40075017,f=o/Math.cos(Math.PI/180*this.lat);return Z([this.lat-o,this.lng-f],[this.lat+o,this.lng+f])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function re(n,o,f){return n instanceof Q?n:$(n)&&typeof n[0]!="object"?n.length===3?new Q(n[0],n[1],n[2]):n.length===2?new Q(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new Q(n.lat,"lng"in n?n.lng:n.lon,n.alt):o===void 0?null:new Q(n,o,f)}var de={latLngToPoint:function(n,o){var f=this.projection.project(n),b=this.scale(o);return this.transformation._transform(f,b)},pointToLatLng:function(n,o){var f=this.scale(o),b=this.transformation.untransform(n,f);return this.projection.unproject(b)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var o=this.projection.bounds,f=this.scale(n),b=this.transformation.transform(o.min,f),k=this.transformation.transform(o.max,f);return new fe(b,k)},infinite:!1,wrapLatLng:function(n){var o=this.wrapLng?v(n.lng,this.wrapLng,!0):n.lng,f=this.wrapLat?v(n.lat,this.wrapLat,!0):n.lat,b=n.alt;return new Q(f,o,b)},wrapLatLngBounds:function(n){var o=n.getCenter(),f=this.wrapLatLng(o),b=o.lat-f.lat,k=o.lng-f.lng;if(b===0&&k===0)return n;var F=n.getSouthWest(),ce=n.getNorthEast(),Ce=new Q(F.lat-b,F.lng-k),Ee=new Q(ce.lat-b,ce.lng-k);return new W(Ce,Ee)}},Ne=i({},de,{wrapLng:[-180,180],R:6371e3,distance:function(n,o){var f=Math.PI/180,b=n.lat*f,k=o.lat*f,F=Math.sin((o.lat-n.lat)*f/2),ce=Math.sin((o.lng-n.lng)*f/2),Ce=F*F+Math.cos(b)*Math.cos(k)*ce*ce,Ee=2*Math.atan2(Math.sqrt(Ce),Math.sqrt(1-Ce));return this.R*Ee}}),J=6378137,oe={R:J,MAX_LATITUDE:85.0511287798,project:function(n){var o=Math.PI/180,f=this.MAX_LATITUDE,b=Math.max(Math.min(f,n.lat),-f),k=Math.sin(b*o);return new ne(this.R*n.lng*o,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(n){var o=180/Math.PI;return new Q((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*o,n.x*o/this.R)},bounds:function(){var n=J*Math.PI;return new fe([-n,-n],[n,n])}()};function ie(n,o,f,b){if($(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=o,this._c=f,this._d=b}ie.prototype={transform:function(n,o){return this._transform(n.clone(),o)},_transform:function(n,o){return o=o||1,n.x=o*(this._a*n.x+this._b),n.y=o*(this._c*n.y+this._d),n},untransform:function(n,o){return o=o||1,new ne((n.x/o-this._b)/this._a,(n.y/o-this._d)/this._c)}};function Te(n,o,f,b){return new ie(n,o,f,b)}var se=i({},Ne,{code:"EPSG:3857",projection:oe,transformation:function(){var n=.5/(Math.PI*oe.R);return Te(n,.5,-n,.5)}()}),Ae=i({},se,{code:"EPSG:900913"});function xe(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function G(n,o){var f="",b,k,F,ce,Ce,Ee;for(b=0,F=n.length;b<F;b++){for(Ce=n[b],k=0,ce=Ce.length;k<ce;k++)Ee=Ce[k],f+=(k?"L":"M")+Ee.x+" "+Ee.y;f+=o?Ye.svg?"z":"x":""}return f||"M0 0"}var Ve=document.documentElement.style,et="ActiveXObject"in window,Be=et&&!document.addEventListener,We="msLaunchUri"in navigator&&!("documentMode"in document),Ze=is("webkit"),Ge=is("android"),ct=is("android 2")||is("android 3"),wt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),St=Ge&&is("Google")&&wt<537&&!("AudioNode"in window),kt=!!window.opera,Wt=!We&&is("chrome"),Yt=is("gecko")&&!Ze&&!kt&&!et,ut=!Wt&&is("safari"),Dt=is("phantom"),Je="OTransition"in Ve,Ys=navigator.platform.indexOf("Win")===0,Vt=et&&"transition"in Ve,kr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ct,Qt="MozPerspective"in Ve,ws=!window.L_DISABLE_3D&&(Vt||kr||Qt)&&!Je&&!Dt,rr=typeof orientation<"u"||is("mobile"),ss=rr&&Ze,Rn=rr&&kr,js=!window.PointerEvent&&window.MSPointerEvent,Mr=!!(window.PointerEvent||js),dn="ontouchstart"in window||!!window.TouchEvent,Ps=!window.L_NO_TOUCH&&(dn||Mr),Ct=rr&&kt,rs=rr&&Yt,Sn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Is=function(){var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",y,o),window.removeEventListener("testPassiveEventSupport",y,o)}catch{}return n}(),nr=function(){return!!document.createElement("canvas").getContext}(),Ir=!!(document.createElementNS&&xe("svg").createSVGRect),vt=!!Ir&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Kr=!Ir&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var o=n.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),hn=navigator.platform.indexOf("Mac")===0,gr=navigator.platform.indexOf("Linux")===0;function is(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var Ye={ie:et,ielt9:Be,edge:We,webkit:Ze,android:Ge,android23:ct,androidStock:St,opera:kt,chrome:Wt,gecko:Yt,safari:ut,phantom:Dt,opera12:Je,win:Ys,ie3d:Vt,webkit3d:kr,gecko3d:Qt,any3d:ws,mobile:rr,mobileWebkit:ss,mobileWebkit3d:Rn,msPointer:js,pointer:Mr,touch:Ps,touchNative:dn,mobileOpera:Ct,mobileGecko:rs,retina:Sn,passiveEvents:Is,canvas:nr,svg:Ir,vml:Kr,inlineSvg:vt,mac:hn,linux:gr},lr=Ye.msPointer?"MSPointerDown":"pointerdown",On=Ye.msPointer?"MSPointerMove":"pointermove",Rr=Ye.msPointer?"MSPointerUp":"pointerup",Or=Ye.msPointer?"MSPointerCancel":"pointercancel",he={touchstart:lr,touchmove:On,touchend:Rr,touchcancel:Or},Re={touchstart:yt,touchmove:Ot,touchend:Ot,touchcancel:Ot},$e={},st=!1;function ht(n,o,f){return o==="touchstart"&&Zt(),Re[o]?(f=Re[o].bind(this,f),n.addEventListener(he[o],f,!1),f):(console.warn("wrong event specified:",o),y)}function $t(n,o,f){if(!he[o]){console.warn("wrong event specified:",o);return}n.removeEventListener(he[o],f,!1)}function Nt(n){$e[n.pointerId]=n}function Lt(n){$e[n.pointerId]&&($e[n.pointerId]=n)}function At(n){delete $e[n.pointerId]}function Zt(){st||(document.addEventListener(lr,Nt,!0),document.addEventListener(On,Lt,!0),document.addEventListener(Rr,At,!0),document.addEventListener(Or,At,!0),st=!0)}function Ot(n,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var f in $e)o.touches.push($e[f]);o.changedTouches=[o],n(o)}}function yt(n,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Ds(o),Ot(n,o)}function dt(n){var o={},f,b;for(b in n)f=n[b],o[b]=f&&f.bind?f.bind(n):f;return n=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var ts=200;function _s(n,o){n.addEventListener("dblclick",o);var f=0,b;function k(F){if(F.detail!==1){b=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var ce=ea(F);if(!(ce.some(function(Ee){return Ee instanceof HTMLLabelElement&&Ee.attributes.for})&&!ce.some(function(Ee){return Ee instanceof HTMLInputElement||Ee instanceof HTMLSelectElement}))){var Ce=Date.now();Ce-f<=ts?(b++,b===2&&o(dt(F))):b=1,f=Ce}}}return n.addEventListener("click",k),{dblclick:o,simDblclick:k}}function Rs(n,o){n.removeEventListener("dblclick",o.dblclick),n.removeEventListener("click",o.simDblclick)}var Hs=ma(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ft=ma(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Kt=Ft==="webkitTransition"||Ft==="OTransition"?Ft+"End":"transitionend";function ds(n){return typeof n=="string"?document.getElementById(n):n}function Jr(n,o){var f=n.style[o]||n.currentStyle&&n.currentStyle[o];if((!f||f==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(n,null);f=b?b[o]:null}return f==="auto"?null:f}function Mt(n,o,f){var b=document.createElement(n);return b.className=o||"",f&&f.appendChild(b),b}function Pt(n){var o=n.parentNode;o&&o.removeChild(n)}function Dn(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function un(n){var o=n.parentNode;o&&o.lastChild!==n&&o.appendChild(n)}function Dr(n){var o=n.parentNode;o&&o.firstChild!==n&&o.insertBefore(n,o.firstChild)}function fn(n,o){if(n.classList!==void 0)return n.classList.contains(o);var f=Ks(n);return f.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(f)}function pt(n,o){if(n.classList!==void 0)for(var f=C(o),b=0,k=f.length;b<k;b++)n.classList.add(f[b]);else if(!fn(n,o)){var F=Ks(n);Fn(n,(F?F+" ":"")+o)}}function Bt(n,o){n.classList!==void 0?n.classList.remove(o):Fn(n,g((" "+Ks(n)+" ").replace(" "+o+" "," ")))}function Fn(n,o){n.className.baseVal===void 0?n.className=o:n.className.baseVal=o}function Ks(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function Os(n,o){"opacity"in n.style?n.style.opacity=o:"filter"in n.style&&Xa(n,o)}function Xa(n,o){var f=!1,b="DXImageTransform.Microsoft.Alpha";try{f=n.filters.item(b)}catch{if(o===1)return}o=Math.round(o*100),f?(f.Enabled=o!==100,f.Opacity=o):n.style.filter+=" progid:"+b+"(opacity="+o+")"}function ma(n){for(var o=document.documentElement.style,f=0;f<n.length;f++)if(n[f]in o)return n[f];return!1}function zn(n,o,f){var b=o||new ne(0,0);n.style[Hs]=(Ye.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(f?" scale("+f+")":"")}function Ms(n,o){n._leaflet_pos=o,Ye.any3d?zn(n,o):(n.style.left=o.x+"px",n.style.top=o.y+"px")}function Bn(n){return n._leaflet_pos||new ne(0,0)}var za,Jn,Fi;if("onselectstart"in document)za=function(){It(window,"selectstart",Ds)},Jn=function(){Jt(window,"selectstart",Ds)};else{var Ba=ma(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);za=function(){if(Ba){var n=document.documentElement.style;Fi=n[Ba],n[Ba]="none"}},Jn=function(){Ba&&(document.documentElement.style[Ba]=Fi,Fi=void 0)}}function zi(){It(window,"dragstart",Ds)}function kn(){Jt(window,"dragstart",Ds)}var Qn,pa;function ei(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(Js(),Qn=n,pa=n.style.outlineStyle,n.style.outlineStyle="none",It(window,"keydown",Js))}function Js(){Qn&&(Qn.style.outlineStyle=pa,Qn=void 0,pa=void 0,Jt(window,"keydown",Js))}function bo(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ti(n){var o=n.getBoundingClientRect();return{x:o.width/n.offsetWidth||1,y:o.height/n.offsetHeight||1,boundingClientRect:o}}var Tt={__proto__:null,TRANSFORM:Hs,TRANSITION:Ft,TRANSITION_END:Kt,get:ds,getStyle:Jr,create:Mt,remove:Pt,empty:Dn,toFront:un,toBack:Dr,hasClass:fn,addClass:pt,removeClass:Bt,setClass:Fn,getClass:Ks,setOpacity:Os,testProp:ma,setTransform:zn,setPosition:Ms,getPosition:Bn,get disableTextSelection(){return za},get enableTextSelection(){return Jn},disableImageDrag:zi,enableImageDrag:kn,preventOutline:ei,restoreOutline:Js,getSizedParentNode:bo,getScale:ti};function It(n,o,f,b){if(o&&typeof o=="object")for(var k in o)ga(n,k,o[k],f);else{o=C(o);for(var F=0,ce=o.length;F<ce;F++)ga(n,o[F],f,b)}return this}var mn="_leaflet_events";function Jt(n,o,f,b){if(arguments.length===1)Bi(n),delete n[mn];else if(o&&typeof o=="object")for(var k in o)qa(n,k,o[k],f);else if(o=C(o),arguments.length===2)Bi(n,function(Ce){return V(o,Ce)!==-1});else for(var F=0,ce=o.length;F<ce;F++)qa(n,o[F],f,b);return this}function Bi(n,o){for(var f in n[mn]){var b=f.split(/\d/)[0];(!o||o(b))&&qa(n,b,null,null,f)}}var si={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ga(n,o,f,b){var k=o+h(f)+(b?"_"+h(b):"");if(n[mn]&&n[mn][k])return this;var F=function(Ce){return f.call(b||n,Ce||window.event)},ce=F;!Ye.touchNative&&Ye.pointer&&o.indexOf("touch")===0?F=ht(n,o,F):Ye.touch&&o==="dblclick"?F=_s(n,F):"addEventListener"in n?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?n.addEventListener(si[o]||o,F,Ye.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(F=function(Ce){Ce=Ce||window.event,xa(n,Ce)&&ce(Ce)},n.addEventListener(si[o],F,!1)):n.addEventListener(o,ce,!1):n.attachEvent("on"+o,F),n[mn]=n[mn]||{},n[mn][k]=F}function qa(n,o,f,b,k){k=k||o+h(f)+(b?"_"+h(b):"");var F=n[mn]&&n[mn][k];if(!F)return this;!Ye.touchNative&&Ye.pointer&&o.indexOf("touch")===0?$t(n,o,F):Ye.touch&&o==="dblclick"?Rs(n,F):"removeEventListener"in n?n.removeEventListener(si[o]||o,F,!1):n.detachEvent("on"+o,F),n[mn][k]=null}function Xn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function qi(n){return ga(n,"wheel",Xn),this}function Ha(n){return It(n,"mousedown touchstart dblclick contextmenu",Xn),n._leaflet_disable_click=!0,this}function Ds(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Qr(n){return Ds(n),Xn(n),this}function ea(n){if(n.composedPath)return n.composedPath();for(var o=[],f=n.target;f;)o.push(f),f=f.parentNode;return o}function wo(n,o){if(!o)return new ne(n.clientX,n.clientY);var f=ti(o),b=f.boundingClientRect;return new ne((n.clientX-b.left)/f.x-o.clientLeft,(n.clientY-b.top)/f.y-o.clientTop)}var $a=Ye.linux&&Ye.chrome?window.devicePixelRatio:Ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ri(n){return Ye.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/$a:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function xa(n,o){var f=o.relatedTarget;if(!f)return!0;try{for(;f&&f!==n;)f=f.parentNode}catch{return!1}return f!==n}var No={__proto__:null,on:It,off:Jt,stopPropagation:Xn,disableScrollPropagation:qi,disableClickPropagation:Ha,preventDefault:Ds,stop:Qr,getPropagationPath:ea,getMousePosition:wo,getWheelDelta:ri,isExternalTarget:xa,addListener:It,removeListener:Jt},Hi=be.extend({run:function(n,o,f,b){this.stop(),this._el=n,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=Bn(n),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(n){var o=+new Date-this._startTime,f=this._duration*1e3;o<f?this._runFrame(this._easeOut(o/f),n):(this._runFrame(1),this._complete())},_runFrame:function(n,o){var f=this._startPos.add(this._offset.multiplyBy(n));o&&f._round(),Ms(this._el,f),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Ut=be.extend({options:{crs:se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,o){o=j(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(re(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ft&&Ye.any3d&&!Ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),It(this._proxy,Kt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,o,f){if(o=o===void 0?this._zoom:this._limitZoom(o),n=this._limitCenter(re(n),o,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=i({animate:f.animate},f.zoom),f.pan=i({animate:f.animate,duration:f.duration},f.pan));var b=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,o,f.zoom):this._tryAnimatedPan(n,f.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(n,o,f.pan&&f.pan.noMoveStart),this},setZoom:function(n,o){return this._loaded?this.setView(this.getCenter(),n,{zoom:o}):(this._zoom=n,this)},zoomIn:function(n,o){return n=n||(Ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,o)},zoomOut:function(n,o){return n=n||(Ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,o)},setZoomAround:function(n,o,f){var b=this.getZoomScale(o),k=this.getSize().divideBy(2),F=n instanceof ne?n:this.latLngToContainerPoint(n),ce=F.subtract(k).multiplyBy(1-1/b),Ce=this.containerPointToLatLng(k.add(ce));return this.setView(Ce,o,{zoom:f})},_getBoundsCenterZoom:function(n,o){o=o||{},n=n.getBounds?n.getBounds():Z(n);var f=ae(o.paddingTopLeft||o.padding||[0,0]),b=ae(o.paddingBottomRight||o.padding||[0,0]),k=this.getBoundsZoom(n,!1,f.add(b));if(k=typeof o.maxZoom=="number"?Math.min(o.maxZoom,k):k,k===1/0)return{center:n.getCenter(),zoom:k};var F=b.subtract(f).divideBy(2),ce=this.project(n.getSouthWest(),k),Ce=this.project(n.getNorthEast(),k),Ee=this.unproject(ce.add(Ce).divideBy(2).add(F),k);return{center:Ee,zoom:k}},fitBounds:function(n,o){if(n=Z(n),!n.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(n,o);return this.setView(f.center,f.zoom,o)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,o){return this.setView(n,this._zoom,{pan:o})},panBy:function(n,o){if(n=ae(n).round(),o=o||{},!n.x&&!n.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Hi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){pt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,f,o.duration||.25,o.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,o,f){if(f=f||{},f.animate===!1||!Ye.any3d)return this.setView(n,o,f);this._stop();var b=this.project(this.getCenter()),k=this.project(n),F=this.getSize(),ce=this._zoom;n=re(n),o=o===void 0?ce:o;var Ce=Math.max(F.x,F.y),Ee=Ce*this.getZoomScale(ce,o),qe=k.distanceTo(b)||1,tt=1.42,gt=tt*tt;function Ht(ps){var Ar=ps?-1:1,od=ps?Ee:Ce,ld=Ee*Ee-Ce*Ce+Ar*gt*gt*qe*qe,Gl=2*od*gt*qe,Io=ld/Gl,vl=Math.sqrt(Io*Io+1)-Io,Yl=vl<1e-9?-18:Math.log(vl);return Yl}function Lr(ps){return(Math.exp(ps)-Math.exp(-ps))/2}function Xs(ps){return(Math.exp(ps)+Math.exp(-ps))/2}function yn(ps){return Lr(ps)/Xs(ps)}var qr=Ht(0);function mi(ps){return Ce*(Xs(qr)/Xs(qr+tt*ps))}function ad(ps){return Ce*(Xs(qr)*yn(qr+tt*ps)-Lr(qr))/gt}function Pa(ps){return 1-Math.pow(1-ps,1.5)}var An=Date.now(),Vn=(Ht(1)-qr)/tt,id=f.duration?1e3*f.duration:1e3*Vn*.8;function xl(){var ps=(Date.now()-An)/id,Ar=Pa(ps)*Vn;ps<=1?(this._flyToFrame=R(xl,this),this._move(this.unproject(b.add(k.subtract(b).multiplyBy(ad(Ar)/qe)),ce),this.getScaleZoom(Ce/mi(Ar),ce),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),xl.call(this),this},flyToBounds:function(n,o){var f=this._getBoundsCenterZoom(n,o);return this.flyTo(f.center,f.zoom,o)},setMaxBounds:function(n){return n=Z(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var o=this.options.minZoom;return this.options.minZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var o=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&o!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,o){this._enforcingBounds=!0;var f=this.getCenter(),b=this._limitCenter(f,this._zoom,Z(n));return f.equals(b)||this.panTo(b,o),this._enforcingBounds=!1,this},panInside:function(n,o){o=o||{};var f=ae(o.paddingTopLeft||o.padding||[0,0]),b=ae(o.paddingBottomRight||o.padding||[0,0]),k=this.project(this.getCenter()),F=this.project(n),ce=this.getPixelBounds(),Ce=E([ce.min.add(f),ce.max.subtract(b)]),Ee=Ce.getSize();if(!Ce.contains(F)){this._enforcingBounds=!0;var qe=F.subtract(Ce.getCenter()),tt=Ce.extend(F).getSize().subtract(Ee);k.x+=qe.x<0?-tt.x:tt.x,k.y+=qe.y<0?-tt.y:tt.y,this.panTo(this.unproject(k),o),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=i({animate:!1,pan:!0},n===!0?{animate:!0}:n);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),b=o.divideBy(2).round(),k=f.divideBy(2).round(),F=b.subtract(k);return!F.x&&!F.y?this:(n.animate&&n.pan?this.panBy(F):(n.pan&&this._rawPanBy(F),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=i({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=d(this._handleGeolocationResponse,this),f=d(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,f,n):navigator.geolocation.getCurrentPosition(o,f,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var o=n.code,f=n.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var o=n.coords.latitude,f=n.coords.longitude,b=new Q(o,f),k=b.toBounds(n.coords.accuracy*2),F=this._locateOptions;if(F.setView){var ce=this.getBoundsZoom(k);this.setView(b,F.maxZoom?Math.min(ce,F.maxZoom):ce)}var Ce={latlng:b,bounds:k,timestamp:n.timestamp};for(var Ee in n.coords)typeof n.coords[Ee]=="number"&&(Ce[Ee]=n.coords[Ee]);this.fire("locationfound",Ce)}},addHandler:function(n,o){if(!o)return this;var f=this[n]=new o(this);return this._handlers.push(f),this.options[n]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Pt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,o){var f="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),b=Mt("div",f,o||this._mapPane);return n&&(this._panes[n]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),o=this.unproject(n.getBottomLeft()),f=this.unproject(n.getTopRight());return new W(o,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,o,f){n=Z(n),f=ae(f||[0,0]);var b=this.getZoom()||0,k=this.getMinZoom(),F=this.getMaxZoom(),ce=n.getNorthWest(),Ce=n.getSouthEast(),Ee=this.getSize().subtract(f),qe=E(this.project(Ce,b),this.project(ce,b)).getSize(),tt=Ye.any3d?this.options.zoomSnap:1,gt=Ee.x/qe.x,Ht=Ee.y/qe.y,Lr=o?Math.max(gt,Ht):Math.min(gt,Ht);return b=this.getScaleZoom(Lr,b),tt&&(b=Math.round(b/(tt/100))*(tt/100),b=o?Math.ceil(b/tt)*tt:Math.floor(b/tt)*tt),Math.max(k,Math.min(F,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,o){var f=this._getTopLeftPoint(n,o);return new fe(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,o){var f=this.options.crs;return o=o===void 0?this._zoom:o,f.scale(n)/f.scale(o)},getScaleZoom:function(n,o){var f=this.options.crs;o=o===void 0?this._zoom:o;var b=f.zoom(n*f.scale(o));return isNaN(b)?1/0:b},project:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(re(n),o)},unproject:function(n,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(ae(n),o)},layerPointToLatLng:function(n){var o=ae(n).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(n){var o=this.project(re(n))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(re(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Z(n))},distance:function(n,o){return this.options.crs.distance(re(n),re(o))},containerPointToLayerPoint:function(n){return ae(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ae(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var o=this.containerPointToLayerPoint(ae(n));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(n)))},mouseEventToContainerPoint:function(n){return wo(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var o=this._container=ds(n);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");It(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ye.any3d,pt(n,"leaflet-container"+(Ye.touch?" leaflet-touch":"")+(Ye.retina?" leaflet-retina":"")+(Ye.ielt9?" leaflet-oldie":"")+(Ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Jr(n,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ms(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(n.markerPane,"leaflet-zoom-hide"),pt(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,o,f){Ms(this._mapPane,new ne(0,0));var b=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var k=this._zoom!==o;this._moveStart(k,f)._move(n,o)._moveEnd(k),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(n,o){return n&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(n,o,f,b){o===void 0&&(o=this._zoom);var k=this._zoom!==o;return this._zoom=o,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),b?f&&f.pinch&&this.fire("zoom",f):((k||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Ms(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[h(this._container)]=this;var o=n?Jt:It;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Ye.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,o){for(var f=[],b,k=o==="mouseout"||o==="mouseover",F=n.target||n.srcElement,ce=!1;F;){if(b=this._targets[h(F)],b&&(o==="click"||o==="preclick")&&this._draggableMoved(b)){ce=!0;break}if(b&&b.listens(o,!0)&&(k&&!xa(F,n)||(f.push(b),k))||F===this._container)break;F=F.parentNode}return!f.length&&!ce&&!k&&this.listens(o,!0)&&(f=[this]),f},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var o=n.target||n.srcElement;if(!(!this._loaded||o._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(o))){var f=n.type;f==="mousedown"&&ei(o),this._fireDOMEvent(n,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,o,f){if(n.type==="click"){var b=i({},n);b.type="preclick",this._fireDOMEvent(b,b.type,f)}var k=this._findEventTargets(n,o);if(f){for(var F=[],ce=0;ce<f.length;ce++)f[ce].listens(o,!0)&&F.push(f[ce]);k=F.concat(k)}if(k.length){o==="contextmenu"&&Ds(n);var Ce=k[0],Ee={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var qe=Ce.getLatLng&&(!Ce._radius||Ce._radius<=10);Ee.containerPoint=qe?this.latLngToContainerPoint(Ce.getLatLng()):this.mouseEventToContainerPoint(n),Ee.layerPoint=this.containerPointToLayerPoint(Ee.containerPoint),Ee.latlng=qe?Ce.getLatLng():this.layerPointToLatLng(Ee.layerPoint)}for(ce=0;ce<k.length;ce++)if(k[ce].fire(o,Ee,!0),Ee.originalEvent._stopped||k[ce].options.bubblingMouseEvents===!1&&V(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,o=this._handlers.length;n<o;n++)this._handlers[n].disable()},whenReady:function(n,o){return this._loaded?n.call(o||this,{target:this}):this.on("load",n,o),this},_getMapPanePos:function(){return Bn(this._mapPane)||new ne(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,o){var f=n&&o!==void 0?this._getNewPixelOrigin(n,o):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,o){var f=this.getSize()._divideBy(2);return this.project(n,o)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,o,f){var b=this._getNewPixelOrigin(f,o);return this.project(n,o)._subtract(b)},_latLngBoundsToNewLayerBounds:function(n,o,f){var b=this._getNewPixelOrigin(f,o);return E([this.project(n.getSouthWest(),o)._subtract(b),this.project(n.getNorthWest(),o)._subtract(b),this.project(n.getSouthEast(),o)._subtract(b),this.project(n.getNorthEast(),o)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,o,f){if(!f)return n;var b=this.project(n,o),k=this.getSize().divideBy(2),F=new fe(b.subtract(k),b.add(k)),ce=this._getBoundsOffset(F,f,o);return Math.abs(ce.x)<=1&&Math.abs(ce.y)<=1?n:this.unproject(b.add(ce),o)},_limitOffset:function(n,o){if(!o)return n;var f=this.getPixelBounds(),b=new fe(f.min.add(n),f.max.add(n));return n.add(this._getBoundsOffset(b,o))},_getBoundsOffset:function(n,o,f){var b=E(this.project(o.getNorthEast(),f),this.project(o.getSouthWest(),f)),k=b.min.subtract(n.min),F=b.max.subtract(n.max),ce=this._rebound(k.x,-F.x),Ce=this._rebound(k.y,-F.y);return new ne(ce,Ce)},_rebound:function(n,o){return n+o>0?Math.round(n-o)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(o))},_limitZoom:function(n){var o=this.getMinZoom(),f=this.getMaxZoom(),b=Ye.any3d?this.options.zoomSnap:1;return b&&(n=Math.round(n/b)*b),Math.max(o,Math.min(f,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,o){var f=this._getCenterOffset(n)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,o),!0)},_createAnimProxy:function(){var n=this._proxy=Mt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(o){var f=Hs,b=this._proxy.style[f];zn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),b===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),o=this.getZoom();zn(this._proxy,this.project(n,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,o,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(o),k=this._getCenterOffset(n)._divideBy(1-1/b);return f.animate!==!0&&!this.getSize().contains(k)?!1:(R(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(n,o,!0)},this),!0)},_animateZoom:function(n,o,f,b){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=o,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:o,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jo(n,o){return new Ut(n,o)}var $s=B.extend({options:{position:"topright"},initialize:function(n){j(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var o=this._map;return o&&o.removeControl(this),this.options.position=n,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var o=this._container=this.onAdd(n),f=this.getPosition(),b=n._controlCorners[f];return pt(o,"leaflet-control"),f.indexOf("bottom")!==-1?b.insertBefore(o,b.firstChild):b.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Xr=function(n){return new $s(n)};Ut.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",f=this._controlContainer=Mt("div",o+"control-container",this._container);function b(k,F){var ce=o+k+" "+o+F;n[k+F]=Mt("div",ce,f)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Pt(this._controlCorners[n]);Pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _o=$s.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,o,f,b){return f<b?-1:b<f?1:0}},initialize:function(n,o,f){j(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in n)this._addLayer(n[b],b);for(b in o)this._addLayer(o[b],b,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return $s.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,o){return this._addLayer(n,o),this._map?this._update():this},addOverlay:function(n,o){return this._addLayer(n,o,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(n));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",o=this._container=Mt("div",n),f=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Ha(o),qi(o);var b=this._section=Mt("section",n+"-list");f&&(this._map.on("click",this.collapse,this),It(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=Mt("a",n+"-toggle",o);k.href="#",k.title="Layers",k.setAttribute("role","button"),It(k,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){Ds(F),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Mt("div",n+"-base",b),this._separator=Mt("div",n+"-separator",b),this._overlaysList=Mt("div",n+"-overlays",b),o.appendChild(b)},_getLayer:function(n){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===n)return this._layers[o]},_addLayer:function(n,o,f){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:o,overlay:f}),this.options.sortLayers&&this._layers.sort(d(function(b,k){return this.options.sortFunction(b.layer,k.layer,b.name,k.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dn(this._baseLayersList),Dn(this._overlaysList),this._layerControlInputs=[];var n,o,f,b,k=0;for(f=0;f<this._layers.length;f++)b=this._layers[f],this._addItem(b),o=o||b.overlay,n=n||!b.overlay,k+=b.overlay?0:1;return this.options.hideSingleBase&&(n=n&&k>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=o&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var o=this._getLayer(h(n.target)),f=o.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;f&&this._map.fire(f,o)},_createRadioElement:function(n,o){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(o?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=f,b.firstChild},_addItem:function(n){var o=document.createElement("label"),f=this._map.hasLayer(n.layer),b;n.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=f):b=this._createRadioElement("leaflet-base-layers_"+h(this),f),this._layerControlInputs.push(b),b.layerId=h(n.layer),It(b,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+n.name;var F=document.createElement("span");o.appendChild(F),F.appendChild(b),F.appendChild(k);var ce=n.overlay?this._overlaysList:this._baseLayersList;return ce.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,o,f,b=[],k=[];this._handlingClick=!0;for(var F=n.length-1;F>=0;F--)o=n[F],f=this._getLayer(o.layerId).layer,o.checked?b.push(f):o.checked||k.push(f);for(F=0;F<k.length;F++)this._map.hasLayer(k[F])&&this._map.removeLayer(k[F]);for(F=0;F<b.length;F++)this._map.hasLayer(b[F])||this._map.addLayer(b[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,o,f,b=this._map.getZoom(),k=n.length-1;k>=0;k--)o=n[k],f=this._getLayer(o.layerId).layer,o.disabled=f.options.minZoom!==void 0&&b<f.options.minZoom||f.options.maxZoom!==void 0&&b>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,It(n,"click",Ds),this.expand();var o=this;setTimeout(function(){Jt(n,"click",Ds),o._preventClick=!1})}}),va=function(n,o,f){return new _o(n,o,f)},en=$s.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var o="leaflet-control-zoom",f=Mt("div",o+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,o+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,o+"-out",f,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,o,f,b,k){var F=Mt("a",f,b);return F.innerHTML=n,F.href="#",F.title=o,F.setAttribute("role","button"),F.setAttribute("aria-label",o),Ha(F),It(F,"click",Qr),It(F,"click",k,this),It(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var n=this._map,o="leaflet-disabled";Bt(this._zoomInButton,o),Bt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(pt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(pt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ut.mergeOptions({zoomControl:!0}),Ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new en,this.addControl(this.zoomControl))});var $i=function(n){return new en(n)},ya=$s.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var o="leaflet-control-scale",f=Mt("div",o),b=this.options;return this._addScales(b,o+"-line",f),n.on(b.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),f},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,o,f){n.metric&&(this._mScale=Mt("div",o,f)),n.imperial&&(this._iScale=Mt("div",o,f))},_update:function(){var n=this._map,o=n.getSize().y/2,f=n.distance(n.containerPointToLatLng([0,o]),n.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(f)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var o=this._getRoundNum(n),f=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,f,o/n)},_updateImperial:function(n){var o=n*3.2808399,f,b,k;o>5280?(f=o/5280,b=this._getRoundNum(f),this._updateScale(this._iScale,b+" mi",b/f)):(k=this._getRoundNum(o),this._updateScale(this._iScale,k+" ft",k/o))},_updateScale:function(n,o,f){n.style.width=Math.round(this.options.maxWidth*f)+"px",n.innerHTML=o},_getRoundNum:function(n){var o=Math.pow(10,(Math.floor(n)+"").length-1),f=n/o;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,o*f}}),ml=function(n){return new ya(n)},ni='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ui=$s.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ye.inlineSvg?ni+" ":"")+"Leaflet</a>"},initialize:function(n){j(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Mt("div","leaflet-control-attribution"),Ha(this._container);for(var o in n._layers)n._layers[o].getAttribution&&this.addAttribution(n._layers[o].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var o in this._attributions)this._attributions[o]&&n.push(o);var f=[];this.options.prefix&&f.push(this.options.prefix),n.length&&f.push(n.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Ut.mergeOptions({attributionControl:!0}),Ut.addInitHook(function(){this.options.attributionControl&&new Ui().addTo(this)});var Wi=function(n){return new Ui(n)};$s.Layers=_o,$s.Zoom=en,$s.Scale=ya,$s.Attribution=Ui,Xr.layers=va,Xr.zoom=$i,Xr.scale=ml,Xr.attribution=Wi;var Fr=B.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fr.addTo=function(n,o){return n.addHandler(o,this),this};var So={Events:ue},Ua=Ye.touch?"touchstart mousedown":"mousedown",pn=be.extend({options:{clickTolerance:3},initialize:function(n,o,f,b){j(this,b),this._element=n,this._dragStartTarget=o||n,this._preventOutline=f},enable:function(){this._enabled||(It(this._dragStartTarget,Ua,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(pn._dragging===this&&this.finishDrag(!0),Jt(this._dragStartTarget,Ua,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!fn(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){pn._dragging===this&&this.finishDrag();return}if(!(pn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(pn._dragging=this,this._preventOutline&&ei(this._element),zi(),za(),!this._moving)){this.fire("down");var o=n.touches?n.touches[0]:n,f=bo(this._element);this._startPoint=new ne(o.clientX,o.clientY),this._startPos=Bn(this._element),this._parentScale=ti(f);var b=n.type==="mousedown";It(document,b?"mousemove":"touchmove",this._onMove,this),It(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var o=n.touches&&n.touches.length===1?n.touches[0]:n,f=new ne(o.clientX,o.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Ds(n),this._moved||(this.fire("dragstart"),this._moved=!0,pt(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Ms(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Bt(document.body,"leaflet-dragging"),this._lastTarget&&(Bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Jt(document,"mousemove touchmove",this._onMove,this),Jt(document,"mouseup touchend touchcancel",this._onUp,this),kn(),Jn();var o=this._moved&&this._moving;this._moving=!1,pn._dragging=!1,o&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function ai(n,o,f){var b,k=[1,4,2,8],F,ce,Ce,Ee,qe,tt,gt,Ht;for(F=0,tt=n.length;F<tt;F++)n[F]._code=Me(n[F],o);for(Ce=0;Ce<4;Ce++){for(gt=k[Ce],b=[],F=0,tt=n.length,ce=tt-1;F<tt;ce=F++)Ee=n[F],qe=n[ce],Ee._code&gt?qe._code&gt||(Ht=ke(qe,Ee,gt,o,f),Ht._code=Me(Ht,o),b.push(Ht)):(qe._code&gt&&(Ht=ke(qe,Ee,gt,o,f),Ht._code=Me(Ht,o),b.push(Ht)),b.push(Ee));n=b}return n}function Vi(n,o){var f,b,k,F,ce,Ce,Ee,qe,tt;if(!n||n.length===0)throw new Error("latlngs not passed");nt(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var gt=re([0,0]),Ht=Z(n),Lr=Ht.getNorthWest().distanceTo(Ht.getSouthWest())*Ht.getNorthEast().distanceTo(Ht.getNorthWest());Lr<1700&&(gt=Zi(n));var Xs=n.length,yn=[];for(f=0;f<Xs;f++){var qr=re(n[f]);yn.push(o.project(re([qr.lat-gt.lat,qr.lng-gt.lng])))}for(Ce=Ee=qe=0,f=0,b=Xs-1;f<Xs;b=f++)k=yn[f],F=yn[b],ce=k.y*F.x-F.y*k.x,Ee+=(k.x+F.x)*ce,qe+=(k.y+F.y)*ce,Ce+=ce*3;Ce===0?tt=yn[0]:tt=[Ee/Ce,qe/Ce];var mi=o.unproject(ae(tt));return re([mi.lat+gt.lat,mi.lng+gt.lng])}function Zi(n){for(var o=0,f=0,b=0,k=0;k<n.length;k++){var F=re(n[k]);o+=F.lat,f+=F.lng,b++}return re([o/b,f/b])}var ii={__proto__:null,clipPolygon:ai,polygonCenter:Vi,centroid:Zi};function ba(n,o){if(!o||!n.length)return n.slice();var f=o*o;return n=I(n,f),n=Gi(n,f),n}function oi(n,o,f){return Math.sqrt(Qe(n,o,f,!0))}function wa(n,o,f){return Qe(n,o,f)}function Gi(n,o){var f=n.length,b=typeof Uint8Array<"u"?Uint8Array:Array,k=new b(f);k[0]=k[f-1]=1,x(n,k,o,0,f-1);var F,ce=[];for(F=0;F<f;F++)k[F]&&ce.push(n[F]);return ce}function x(n,o,f,b,k){var F=0,ce,Ce,Ee;for(Ce=b+1;Ce<=k-1;Ce++)Ee=Qe(n[Ce],n[b],n[k],!0),Ee>F&&(ce=Ce,F=Ee);F>f&&(o[ce]=1,x(n,o,f,b,ce),x(n,o,f,ce,k))}function I(n,o){for(var f=[n[0]],b=1,k=0,F=n.length;b<F;b++)Ue(n[b],n[k])>o&&(f.push(n[b]),k=b);return k<F-1&&f.push(n[F-1]),f}var te;function pe(n,o,f,b,k){var F=b?te:Me(n,f),ce=Me(o,f),Ce,Ee,qe;for(te=ce;;){if(!(F|ce))return[n,o];if(F&ce)return!1;Ce=F||ce,Ee=ke(n,o,Ce,f,k),qe=Me(Ee,f),Ce===F?(n=Ee,F=qe):(o=Ee,ce=qe)}}function ke(n,o,f,b,k){var F=o.x-n.x,ce=o.y-n.y,Ce=b.min,Ee=b.max,qe,tt;return f&8?(qe=n.x+F*(Ee.y-n.y)/ce,tt=Ee.y):f&4?(qe=n.x+F*(Ce.y-n.y)/ce,tt=Ce.y):f&2?(qe=Ee.x,tt=n.y+ce*(Ee.x-n.x)/F):f&1&&(qe=Ce.x,tt=n.y+ce*(Ce.x-n.x)/F),new ne(qe,tt,k)}function Me(n,o){var f=0;return n.x<o.min.x?f|=1:n.x>o.max.x&&(f|=2),n.y<o.min.y?f|=4:n.y>o.max.y&&(f|=8),f}function Ue(n,o){var f=o.x-n.x,b=o.y-n.y;return f*f+b*b}function Qe(n,o,f,b){var k=o.x,F=o.y,ce=f.x-k,Ce=f.y-F,Ee=ce*ce+Ce*Ce,qe;return Ee>0&&(qe=((n.x-k)*ce+(n.y-F)*Ce)/Ee,qe>1?(k=f.x,F=f.y):qe>0&&(k+=ce*qe,F+=Ce*qe)),ce=n.x-k,Ce=n.y-F,b?ce*ce+Ce*Ce:new ne(k,F)}function nt(n){return!$(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Rt(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),nt(n)}function Et(n,o){var f,b,k,F,ce,Ce,Ee,qe;if(!n||n.length===0)throw new Error("latlngs not passed");nt(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var tt=re([0,0]),gt=Z(n),Ht=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());Ht<1700&&(tt=Zi(n));var Lr=n.length,Xs=[];for(f=0;f<Lr;f++){var yn=re(n[f]);Xs.push(o.project(re([yn.lat-tt.lat,yn.lng-tt.lng])))}for(f=0,b=0;f<Lr-1;f++)b+=Xs[f].distanceTo(Xs[f+1])/2;if(b===0)qe=Xs[0];else for(f=0,F=0;f<Lr-1;f++)if(ce=Xs[f],Ce=Xs[f+1],k=ce.distanceTo(Ce),F+=k,F>b){Ee=(F-b)/k,qe=[Ce.x-Ee*(Ce.x-ce.x),Ce.y-Ee*(Ce.y-ce.y)];break}var qr=o.unproject(ae(qe));return re([qr.lat+tt.lat,qr.lng+tt.lng])}var Xt={__proto__:null,simplify:ba,pointToSegmentDistance:oi,closestPointOnSegment:wa,clipSegment:pe,_getEdgeIntersection:ke,_getBitCode:Me,_sqClosestPointOnSegment:Qe,isFlat:nt,_flat:Rt,polylineCenter:Et},Ss={project:function(n){return new ne(n.lng,n.lat)},unproject:function(n){return new Q(n.y,n.x)},bounds:new fe([-180,-90],[180,90])},Ls={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var o=Math.PI/180,f=this.R,b=n.lat*o,k=this.R_MINOR/f,F=Math.sqrt(1-k*k),ce=F*Math.sin(b),Ce=Math.tan(Math.PI/4-b/2)/Math.pow((1-ce)/(1+ce),F/2);return b=-f*Math.log(Math.max(Ce,1e-10)),new ne(n.lng*o*f,b)},unproject:function(n){for(var o=180/Math.PI,f=this.R,b=this.R_MINOR/f,k=Math.sqrt(1-b*b),F=Math.exp(-n.y/f),ce=Math.PI/2-2*Math.atan(F),Ce=0,Ee=.1,qe;Ce<15&&Math.abs(Ee)>1e-7;Ce++)qe=k*Math.sin(ce),qe=Math.pow((1-qe)/(1+qe),k/2),Ee=Math.PI/2-2*Math.atan(F*qe)-ce,ce+=Ee;return new Q(ce*o,n.x*o/f)}},Us={__proto__:null,LonLat:Ss,Mercator:Ls,SphericalMercator:oe},xr=i({},Ne,{code:"EPSG:3395",projection:Ls,transformation:function(){var n=.5/(Math.PI*Ls.R);return Te(n,.5,-n,.5)}()}),Qs=i({},Ne,{code:"EPSG:4326",projection:Ss,transformation:Te(1/180,1,-1/180,.5)}),Cn=i({},de,{projection:Ss,transformation:Te(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,o){var f=o.lng-n.lng,b=o.lat-n.lat;return Math.sqrt(f*f+b*b)},infinite:!0});de.Earth=Ne,de.EPSG3395=xr,de.EPSG3857=se,de.EPSG900913=Ae,de.EPSG4326=Qs,de.Simple=Cn;var As=be.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[h(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[h(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var o=n.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var f=this.getEvents();o.on(f,this),this.once("remove",function(){o.off(f,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Ut.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(n);return this._layers[o]?this:(this._layers[o]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var o=h(n);return this._layers[o]?(this._loaded&&n.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return h(n)in this._layers},eachLayer:function(n,o){for(var f in this._layers)n.call(o,this._layers[f]);return this},_addLayers:function(n){n=n?$(n)?n:[n]:[];for(var o=0,f=n.length;o<f;o++)this.addLayer(n[o])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[h(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var o=h(n);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,o=-1/0,f=this._getZoomSpan();for(var b in this._zoomBoundLayers){var k=this._zoomBoundLayers[b].options;n=k.minZoom===void 0?n:Math.min(n,k.minZoom),o=k.maxZoom===void 0?o:Math.max(o,k.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=n===1/0?void 0:n,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Cr=As.extend({initialize:function(n,o){j(this,o),this._layers={};var f,b;if(n)for(f=0,b=n.length;f<b;f++)this.addLayer(n[f])},addLayer:function(n){var o=this.getLayerId(n);return this._layers[o]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var o=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(n){var o=typeof n=="number"?n:this.getLayerId(n);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var o=Array.prototype.slice.call(arguments,1),f,b;for(f in this._layers)b=this._layers[f],b[n]&&b[n].apply(b,o);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,o){for(var f in this._layers)n.call(o,this._layers[f]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return h(n)}}),ko=function(n,o){return new Cr(n,o)},tn=Cr.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Cr.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Cr.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new W;for(var o in this._layers){var f=this._layers[o];n.extend(f.getBounds?f.getBounds():f.getLatLng())}return n}}),Yi=function(n,o){return new tn(n,o)},Pn=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){j(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,o){var f=this._getIconUrl(n);if(!f){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(f,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(b,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(n,o){var f=this.options,b=f[o+"Size"];typeof b=="number"&&(b=[b,b]);var k=ae(b),F=ae(o==="shadow"&&f.shadowAnchor||f.iconAnchor||k&&k.divideBy(2,!0));n.className="leaflet-marker-"+o+" "+(f.className||""),F&&(n.style.marginLeft=-F.x+"px",n.style.marginTop=-F.y+"px"),k&&(n.style.width=k.x+"px",n.style.height=k.y+"px")},_createImg:function(n,o){return o=o||document.createElement("img"),o.src=n,o},_getIconUrl:function(n){return Ye.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Ki(n){return new Pn(n)}var ta=Pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ta.imagePath!="string"&&(ta.imagePath=this._detectIconPath()),(this.options.imagePath||ta.imagePath)+Pn.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var o=function(f,b,k){var F=b.exec(f);return F&&F[k]};return n=o(n,/^url\((['"])?(.+)\1\)$/,2),n&&o(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Mt("div","leaflet-default-icon-path",document.body),o=Jr(n,"background-image")||Jr(n,"backgroundImage");if(document.body.removeChild(n),o=this._stripUrl(o),o)return o;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Wa=Fr.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new pn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var o=this._marker,f=o._map,b=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,F=Bn(o._icon),ce=f.getPixelBounds(),Ce=f.getPixelOrigin(),Ee=E(ce.min._subtract(Ce).add(k),ce.max._subtract(Ce).subtract(k));if(!Ee.contains(F)){var qe=ae((Math.max(Ee.max.x,F.x)-Ee.max.x)/(ce.max.x-Ee.max.x)-(Math.min(Ee.min.x,F.x)-Ee.min.x)/(ce.min.x-Ee.min.x),(Math.max(Ee.max.y,F.y)-Ee.max.y)/(ce.max.y-Ee.max.y)-(Math.min(Ee.min.y,F.y)-Ee.min.y)/(ce.min.y-Ee.min.y)).multiplyBy(b);f.panBy(qe,{animate:!1}),this._draggable._newPos._add(qe),this._draggable._startPos._add(qe),Ms(o._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=R(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,n)))},_onDrag:function(n){var o=this._marker,f=o._shadow,b=Bn(o._icon),k=o._map.layerPointToLatLng(b);f&&Ms(f,b),o._latlng=k,n.latlng=k,n.oldLatLng=this._oldLatLng,o.fire("move",n).fire("drag",n)},_onDragEnd:function(n){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Ws=As.extend({options:{icon:new ta,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,o){j(this,o),this._latlng=re(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var o=this._latlng;return this._latlng=re(n),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=n.icon.createIcon(this._icon),b=!1;f!==this._icon&&(this._icon&&this._removeIcon(),b=!0,n.title&&(f.title=n.title),f.tagName==="IMG"&&(f.alt=n.alt||"")),pt(f,o),n.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(f,"focus",this._panOnFocus,this);var k=n.icon.createShadow(this._shadow),F=!1;k!==this._shadow&&(this._removeShadow(),F=!0),k&&(pt(k,o),k.alt=""),this._shadow=k,n.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&F&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(this._icon,"focus",this._panOnFocus,this),Pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Ms(this._icon,n),this._shadow&&Ms(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wa)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wa(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&Os(this._icon,n),this._shadow&&Os(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var o=this.options.icon.options,f=o.iconSize?ae(o.iconSize):ae(0,0),b=o.iconAnchor?ae(o.iconAnchor):ae(0,0);n.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:f.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function li(n,o){return new Ws(n,o)}var sn=As.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return j(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sa=sn.extend({options:{fill:!0,radius:10},initialize:function(n,o){j(this,o),this._latlng=re(n),this._radius=this.options.radius},setLatLng:function(n){var o=this._latlng;return this._latlng=re(n),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var o=n&&n.radius||this._radius;return sn.prototype.setStyle.call(this,n),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,o=this._radiusY||n,f=this._clickTolerance(),b=[n+f,o+f];this._pxBounds=new fe(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ji(n,o){return new sa(n,o)}var vr=sa.extend({initialize:function(n,o,f){if(typeof o=="number"&&(o=i({},f,{radius:o})),j(this,o),this._latlng=re(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new W(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:sn.prototype.setStyle,_project:function(){var n=this._latlng.lng,o=this._latlng.lat,f=this._map,b=f.options.crs;if(b.distance===Ne.distance){var k=Math.PI/180,F=this._mRadius/Ne.R/k,ce=f.project([o+F,n]),Ce=f.project([o-F,n]),Ee=ce.add(Ce).divideBy(2),qe=f.unproject(Ee).lat,tt=Math.acos((Math.cos(F*k)-Math.sin(o*k)*Math.sin(qe*k))/(Math.cos(o*k)*Math.cos(qe*k)))/k;(isNaN(tt)||tt===0)&&(tt=F/Math.cos(Math.PI/180*o)),this._point=Ee.subtract(f.getPixelOrigin()),this._radius=isNaN(tt)?0:Ee.x-f.project([qe,n-tt]).x,this._radiusY=Ee.y-ce.y}else{var gt=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(gt).x}this._updateBounds()}});function pl(n,o,f){return new vr(n,o,f)}var rn=sn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,o){j(this,o),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var o=1/0,f=null,b=Qe,k,F,ce=0,Ce=this._parts.length;ce<Ce;ce++)for(var Ee=this._parts[ce],qe=1,tt=Ee.length;qe<tt;qe++){k=Ee[qe-1],F=Ee[qe];var gt=b(n,k,F,!0);gt<o&&(o=gt,f=b(n,k,F))}return f&&(f.distance=Math.sqrt(o)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Et(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,o){return o=o||this._defaultShape(),n=re(n),o.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new W,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return nt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var o=[],f=nt(n),b=0,k=n.length;b<k;b++)f?(o[b]=re(n[b]),this._bounds.extend(o[b])):o[b]=this._convertLatLngs(n[b]);return o},_project:function(){var n=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),o=new ne(n,n);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(n,o,f){var b=n[0]instanceof Q,k=n.length,F,ce;if(b){for(ce=[],F=0;F<k;F++)ce[F]=this._map.latLngToLayerPoint(n[F]),f.extend(ce[F]);o.push(ce)}else for(F=0;F<k;F++)this._projectLatlngs(n[F],o,f)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,f,b,k,F,ce,Ce,Ee;for(f=0,k=0,F=this._rings.length;f<F;f++)for(Ee=this._rings[f],b=0,ce=Ee.length;b<ce-1;b++)Ce=pe(Ee[b],Ee[b+1],n,b,!0),Ce&&(o[k]=o[k]||[],o[k].push(Ce[0]),(Ce[1]!==Ee[b+1]||b===ce-2)&&(o[k].push(Ce[1]),k++))}},_simplifyPoints:function(){for(var n=this._parts,o=this.options.smoothFactor,f=0,b=n.length;f<b;f++)n[f]=ba(n[f],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,o){var f,b,k,F,ce,Ce,Ee=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(f=0,F=this._parts.length;f<F;f++)for(Ce=this._parts[f],b=0,ce=Ce.length,k=ce-1;b<ce;k=b++)if(!(!o&&b===0)&&oi(n,Ce[k],Ce[b])<=Ee)return!0;return!1}});function Co(n,o){return new rn(n,o)}rn._flat=Rt;var cr=rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var o=rn.prototype._convertLatLngs.call(this,n),f=o.length;return f>=2&&o[0]instanceof Q&&o[0].equals(o[f-1])&&o.pop(),o},_setLatLngs:function(n){rn.prototype._setLatLngs.call(this,n),nt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return nt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,o=this.options.weight,f=new ne(o,o);if(n=new fe(n.min.subtract(f),n.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,k=this._rings.length,F;b<k;b++)F=ai(this._rings[b],n,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var o=!1,f,b,k,F,ce,Ce,Ee,qe;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(F=0,Ee=this._parts.length;F<Ee;F++)for(f=this._parts[F],ce=0,qe=f.length,Ce=qe-1;ce<qe;Ce=ce++)b=f[ce],k=f[Ce],b.y>n.y!=k.y>n.y&&n.x<(k.x-b.x)*(n.y-b.y)/(k.y-b.y)+b.x&&(o=!o);return o||rn.prototype._containsPoint.call(this,n,!0)}});function ci(n,o){return new cr(n,o)}var gn=tn.extend({initialize:function(n,o){j(this,o),this._layers={},n&&this.addData(n)},addData:function(n){var o=$(n)?n:n.features,f,b,k;if(o){for(f=0,b=o.length;f<b;f++)k=o[f],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var F=this.options;if(F.filter&&!F.filter(n))return this;var ce=Va(n,F);return ce?(ce.feature=xn(n),ce.defaultOptions=ce.options,this.resetStyle(ce),F.onEachFeature&&F.onEachFeature(n,ce),this.addLayer(ce)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=i({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(o){this._setLayerStyle(o,n)},this)},_setLayerStyle:function(n,o){n.setStyle&&(typeof o=="function"&&(o=o(n.feature)),n.setStyle(o))}});function Va(n,o){var f=n.type==="Feature"?n.geometry:n,b=f?f.coordinates:null,k=[],F=o&&o.pointToLayer,ce=o&&o.coordsToLatLng||na,Ce,Ee,qe,tt;if(!b&&!f)return null;switch(f.type){case"Point":return Ce=ce(b),ra(F,n,Ce,o);case"MultiPoint":for(qe=0,tt=b.length;qe<tt;qe++)Ce=ce(b[qe]),k.push(ra(F,n,Ce,o));return new tn(k);case"LineString":case"MultiLineString":return Ee=dr(b,f.type==="LineString"?0:1,ce),new rn(Ee,o);case"Polygon":case"MultiPolygon":return Ee=dr(b,f.type==="Polygon"?1:2,ce),new cr(Ee,o);case"GeometryCollection":for(qe=0,tt=f.geometries.length;qe<tt;qe++){var gt=Va({geometry:f.geometries[qe],type:"Feature",properties:n.properties},o);gt&&k.push(gt)}return new tn(k);case"FeatureCollection":for(qe=0,tt=f.features.length;qe<tt;qe++){var Ht=Va(f.features[qe],o);Ht&&k.push(Ht)}return new tn(k);default:throw new Error("Invalid GeoJSON object.")}}function ra(n,o,f,b){return n?n(o,f):new Ws(f,b&&b.markersInheritOptions&&b)}function na(n){return new Q(n[1],n[0],n[2])}function dr(n,o,f){for(var b=[],k=0,F=n.length,ce;k<F;k++)ce=o?dr(n[k],o-1,f):(f||na)(n[k]),b.push(ce);return b}function hr(n,o){return n=re(n),n.alt!==void 0?[N(n.lng,o),N(n.lat,o),N(n.alt,o)]:[N(n.lng,o),N(n.lat,o)]}function Ln(n,o,f,b){for(var k=[],F=0,ce=n.length;F<ce;F++)k.push(o?Ln(n[F],nt(n[F])?0:o-1,f,b):hr(n[F],b));return!o&&f&&k.length>0&&k.push(k[0].slice()),k}function zr(n,o){return n.feature?i({},n.feature,{geometry:o}):xn(o)}function xn(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Na={toGeoJSON:function(n){return zr(this,{type:"Point",coordinates:hr(this.getLatLng(),n)})}};Ws.include(Na),vr.include(Na),sa.include(Na),rn.include({toGeoJSON:function(n){var o=!nt(this._latlngs),f=Ln(this._latlngs,o?1:0,!1,n);return zr(this,{type:(o?"Multi":"")+"LineString",coordinates:f})}}),cr.include({toGeoJSON:function(n){var o=!nt(this._latlngs),f=o&&!nt(this._latlngs[0]),b=Ln(this._latlngs,f?2:o?1:0,!0,n);return o||(b=[b]),zr(this,{type:(f?"Multi":"")+"Polygon",coordinates:b})}}),Cr.include({toMultiPoint:function(n){var o=[];return this.eachLayer(function(f){o.push(f.toGeoJSON(n).geometry.coordinates)}),zr(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(n){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(n);var f=o==="GeometryCollection",b=[];return this.eachLayer(function(k){if(k.toGeoJSON){var F=k.toGeoJSON(n);if(f)b.push(F.geometry);else{var ce=xn(F);ce.type==="FeatureCollection"?b.push.apply(b,ce.features):b.push(ce)}}}),f?zr(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function qn(n,o){return new gn(n,o)}var Fs=qn,ja=As.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,o,f){this._url=n,this._bounds=Z(o),j(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&un(this._image),this},bringToBack:function(){return this._map&&Dr(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Z(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",o=this._image=n?this._url:Mt("img");if(pt(o,"leaflet-image-layer"),this._zoomAnimated&&pt(o,"leaflet-zoom-animated"),this.options.className&&pt(o,this.options.className),o.onselectstart=y,o.onmousemove=y,o.onload=d(this.fire,this,"load"),o.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(n){var o=this._map.getZoomScale(n.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;zn(this._image,f,o)},_reset:function(){var n=this._image,o=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=o.getSize();Ms(n,o.min),n.style.width=f.x+"px",n.style.height=f.y+"px"},_updateOpacity:function(){Os(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Pr=function(n,o,f){return new ja(n,o,f)},nn=ja.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",o=this._image=n?this._url:Mt("video");if(pt(o,"leaflet-image-layer"),this._zoomAnimated&&pt(o,"leaflet-zoom-animated"),this.options.className&&pt(o,this.options.className),o.onselectstart=y,o.onmousemove=y,o.onloadeddata=d(this.fire,this,"load"),n){for(var f=o.getElementsByTagName("source"),b=[],k=0;k<f.length;k++)b.push(f[k].src);this._url=f.length>0?b:[o.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var ce=Mt("source");ce.src=this._url[F],o.appendChild(ce)}}});function di(n,o,f){return new nn(n,o,f)}var Qi=ja.extend({_initImage:function(){var n=this._image=this._url;pt(n,"leaflet-image-layer"),this._zoomAnimated&&pt(n,"leaflet-zoom-animated"),this.options.className&&pt(n,this.options.className),n.onselectstart=y,n.onmousemove=y}});function Xi(n,o,f){return new Qi(n,o,f)}var yr=As.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,o){n&&(n instanceof Q||$(n))?(this._latlng=re(n),j(this,o)):(j(this,n),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&Os(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&Os(this._container,1),this.bringToFront(),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(Os(this._container,0),this._removeTimeout=setTimeout(d(Pt,void 0,this._container),200)):Pt(this._container),this.options.interactive&&(Bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=re(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&un(this._container),this},bringToBack:function(){return this._map&&Dr(this._container),this},_prepareOpen:function(n){var o=this._source;if(!o._map)return!1;if(o instanceof tn){o=null;var f=this._source._layers;for(var b in f)if(f[b]._map){o=f[b];break}if(!o)return!1;this._source=o}if(!n)if(o.getCenter)n=o.getCenter();else if(o.getLatLng)n=o.getLatLng();else if(o.getBounds)n=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")n.innerHTML=o;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),o=ae(this.options.offset),f=this._getAnchor();this._zoomAnimated?Ms(this._container,n.add(f)):o=o.add(n).add(f);var b=this._containerBottom=-o.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=b+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});Ut.include({_initOverlay:function(n,o,f,b){var k=o;return k instanceof n||(k=new n(b).setContent(o)),f&&k.setLatLng(f),k}}),As.include({_initOverlay:function(n,o,f,b){var k=f;return k instanceof n?(j(k,b),k._source=this):(k=o&&!b?o:new n(b,this),k.setContent(f)),k}});var Hn=yr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,yr.prototype.openOn.call(this,n)},onAdd:function(n){yr.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof sn||this._source.on("preclick",Xn))},onRemove:function(n){yr.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof sn||this._source.off("preclick",Xn))},getEvents:function(){var n=yr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",o=this._container=Mt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Mt("div",n+"-content-wrapper",o);if(this._contentNode=Mt("div",n+"-content",f),Ha(o),qi(this._contentNode),It(o,"contextmenu",Xn),this._tipContainer=Mt("div",n+"-tip-container",o),this._tip=Mt("div",n+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=Mt("a",n+"-close-button",o);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',It(b,"click",function(k){Ds(k),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,o=n.style;o.width="",o.whiteSpace="nowrap";var f=n.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),o.width=f+1+"px",o.whiteSpace="",o.height="";var b=n.offsetHeight,k=this.options.maxHeight,F="leaflet-popup-scrolled";k&&b>k?(o.height=k+"px",pt(n,F)):Bt(n,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),f=this._getAnchor();Ms(this._container,o.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,o=parseInt(Jr(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+o,b=this._containerWidth,k=new ne(this._containerLeft,-f-this._containerBottom);k._add(Bn(this._container));var F=n.layerPointToContainerPoint(k),ce=ae(this.options.autoPanPadding),Ce=ae(this.options.autoPanPaddingTopLeft||ce),Ee=ae(this.options.autoPanPaddingBottomRight||ce),qe=n.getSize(),tt=0,gt=0;F.x+b+Ee.x>qe.x&&(tt=F.x+b-qe.x+Ee.x),F.x-tt-Ce.x<0&&(tt=F.x-Ce.x),F.y+f+Ee.y>qe.y&&(gt=F.y+f-qe.y+Ee.y),F.y-gt-Ce.y<0&&(gt=F.y-Ce.y),(tt||gt)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([tt,gt]))}},_getAnchor:function(){return ae(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_a=function(n,o){return new Hn(n,o)};Ut.mergeOptions({closePopupOnClick:!0}),Ut.include({openPopup:function(n,o,f){return this._initOverlay(Hn,n,o,f).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),As.include({bindPopup:function(n,o){return this._popup=this._initOverlay(Hn,this._popup,n,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof tn||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Qr(n);var o=n.layer||n.target;if(this._popup._source===o&&!(o instanceof sn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=o,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var $n=yr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){yr.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){yr.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=yr.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",o=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Mt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var o,f,b=this._map,k=this._container,F=b.latLngToContainerPoint(b.getCenter()),ce=b.layerPointToContainerPoint(n),Ce=this.options.direction,Ee=k.offsetWidth,qe=k.offsetHeight,tt=ae(this.options.offset),gt=this._getAnchor();Ce==="top"?(o=Ee/2,f=qe):Ce==="bottom"?(o=Ee/2,f=0):Ce==="center"?(o=Ee/2,f=qe/2):Ce==="right"?(o=0,f=qe/2):Ce==="left"?(o=Ee,f=qe/2):ce.x<F.x?(Ce="right",o=0,f=qe/2):(Ce="left",o=Ee+(tt.x+gt.x)*2,f=qe/2),n=n.subtract(ae(o,f,!0)).add(tt).add(gt),Bt(k,"leaflet-tooltip-right"),Bt(k,"leaflet-tooltip-left"),Bt(k,"leaflet-tooltip-top"),Bt(k,"leaflet-tooltip-bottom"),pt(k,"leaflet-tooltip-"+Ce),Ms(k,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&Os(this._container,n)},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(o)},_getAnchor:function(){return ae(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),hi=function(n,o){return new $n(n,o)};Ut.include({openTooltip:function(n,o,f){return this._initOverlay($n,n,o,f).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),As.include({bindTooltip:function(n,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay($n,this._tooltip,n,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var o=n?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[o](f),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof tn||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var o=typeof n.getElement=="function"&&n.getElement();o&&(It(o,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),It(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var o=typeof n.getElement=="function"&&n.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var o=n.latlng,f,b;this._tooltip.options.sticky&&n.originalEvent&&(f=this._map.mouseEventToContainerPoint(n.originalEvent),b=this._map.containerPointToLayerPoint(f),o=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(o)}});var Sa=Pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var o=n&&n.tagName==="DIV"?n:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Dn(o),o.appendChild(f.html)):o.innerHTML=f.html!==!1?f.html:"",f.bgPos){var b=ae(f.bgPos);o.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function ka(n){return new Sa(n)}Pn.Default=ta;var aa=As.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){j(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Pt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Dr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof ne?n:new ne(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var o=this.getPane().children,f=-n(-1/0,1/0),b=0,k=o.length,F;b<k;b++)F=o[b].style.zIndex,o[b]!==this._container&&F&&(f=n(f,+F));isFinite(f)&&(this.options.zIndex=f+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ye.ielt9){Os(this._container,this.options.opacity);var n=+new Date,o=!1,f=!1;for(var b in this._tiles){var k=this._tiles[b];if(!(!k.current||!k.loaded)){var F=Math.min(1,(n-k.loaded)/200);Os(k.el,F),F<1?o=!0:(k.active?f=!0:this._onOpaqueTile(k),k.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),o&&(z(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Mt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,o=this.options.maxZoom;if(n!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===n?(this._levels[f].el.style.zIndex=o-Math.abs(n-f),this._onUpdateLevel(f)):(Pt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var b=this._levels[n],k=this._map;return b||(b=this._levels[n]={},b.el=Mt("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=o,b.origin=k.project(k.unproject(k.getPixelOrigin()),n).round(),b.zoom=n,this._setZoomTransform(b,k.getCenter(),k.getZoom()),y(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var n,o,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)o=this._tiles[n],o.retain=o.current;for(n in this._tiles)if(o=this._tiles[n],o.current&&!o.active){var b=o.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var o in this._tiles)this._tiles[o].coords.z===n&&this._removeTile(o)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Pt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,o,f,b){var k=Math.floor(n/2),F=Math.floor(o/2),ce=f-1,Ce=new ne(+k,+F);Ce.z=+ce;var Ee=this._tileCoordsToKey(Ce),qe=this._tiles[Ee];return qe&&qe.active?(qe.retain=!0,!0):(qe&&qe.loaded&&(qe.retain=!0),ce>b?this._retainParent(k,F,ce,b):!1)},_retainChildren:function(n,o,f,b){for(var k=2*n;k<2*n+2;k++)for(var F=2*o;F<2*o+2;F++){var ce=new ne(k,F);ce.z=f+1;var Ce=this._tileCoordsToKey(ce),Ee=this._tiles[Ce];if(Ee&&Ee.active){Ee.retain=!0;continue}else Ee&&Ee.loaded&&(Ee.retain=!0);f+1<b&&this._retainChildren(k,F,f+1,b)}},_resetView:function(n){var o=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var o=this.options;return o.minNativeZoom!==void 0&&n<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<n?o.maxNativeZoom:n},_setView:function(n,o,f,b){var k=Math.round(o);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var F=this.options.updateWhenZooming&&k!==this._tileZoom;(!b||F)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(n),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(n,o)},_setZoomTransforms:function(n,o){for(var f in this._levels)this._setZoomTransform(this._levels[f],n,o)},_setZoomTransform:function(n,o,f){var b=this._map.getZoomScale(f,n.zoom),k=n.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(o,f)).round();Ye.any3d?zn(n.el,k,b):Ms(n.el,k)},_resetGrid:function(){var n=this._map,o=n.options.crs,f=this._tileSize=this.getTileSize(),b=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,o.wrapLng[0]],b).x/f.x),Math.ceil(n.project([0,o.wrapLng[1]],b).x/f.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([o.wrapLat[0],0],b).y/f.x),Math.ceil(n.project([o.wrapLat[1],0],b).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var o=this._map,f=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),b=o.getZoomScale(f,this._tileZoom),k=o.project(n,this._tileZoom).floor(),F=o.getSize().divideBy(b*2);return new fe(k.subtract(F),k.add(F))},_update:function(n){var o=this._map;if(o){var f=this._clampZoom(o.getZoom());if(n===void 0&&(n=o.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(n),k=this._pxBoundsToTileRange(b),F=k.getCenter(),ce=[],Ce=this.options.keepBuffer,Ee=new fe(k.getBottomLeft().subtract([Ce,-Ce]),k.getTopRight().add([Ce,-Ce]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var qe in this._tiles){var tt=this._tiles[qe].coords;(tt.z!==this._tileZoom||!Ee.contains(new ne(tt.x,tt.y)))&&(this._tiles[qe].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(n,f);return}for(var gt=k.min.y;gt<=k.max.y;gt++)for(var Ht=k.min.x;Ht<=k.max.x;Ht++){var Lr=new ne(Ht,gt);if(Lr.z=this._tileZoom,!!this._isValidTile(Lr)){var Xs=this._tiles[this._tileCoordsToKey(Lr)];Xs?Xs.current=!0:ce.push(Lr)}}if(ce.sort(function(qr,mi){return qr.distanceTo(F)-mi.distanceTo(F)}),ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(Ht=0;Ht<ce.length;Ht++)this._addTile(ce[Ht],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(n){var o=this._map.options.crs;if(!o.infinite){var f=this._globalTileRange;if(!o.wrapLng&&(n.x<f.min.x||n.x>f.max.x)||!o.wrapLat&&(n.y<f.min.y||n.y>f.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(n);return Z(this.options.bounds).overlaps(b)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var o=this._map,f=this.getTileSize(),b=n.scaleBy(f),k=b.add(f),F=o.unproject(b,n.z),ce=o.unproject(k,n.z);return[F,ce]},_tileCoordsToBounds:function(n){var o=this._tileCoordsToNwSe(n),f=new W(o[0],o[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var o=n.split(":"),f=new ne(+o[0],+o[1]);return f.z=+o[2],f},_removeTile:function(n){var o=this._tiles[n];o&&(Pt(o.el),delete this._tiles[n],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){pt(n,"leaflet-tile");var o=this.getTileSize();n.style.width=o.x+"px",n.style.height=o.y+"px",n.onselectstart=y,n.onmousemove=y,Ye.ielt9&&this.options.opacity<1&&Os(n,this.options.opacity)},_addTile:function(n,o){var f=this._getTilePos(n),b=this._tileCoordsToKey(n),k=this.createTile(this._wrapCoords(n),d(this._tileReady,this,n));this._initTile(k),this.createTile.length<2&&R(d(this._tileReady,this,n,null,k)),Ms(k,f),this._tiles[b]={el:k,coords:n,current:!0},o.appendChild(k),this.fire("tileloadstart",{tile:k,coords:n})},_tileReady:function(n,o,f){o&&this.fire("tileerror",{error:o,tile:f,coords:n});var b=this._tileCoordsToKey(n);f=this._tiles[b],f&&(f.loaded=+new Date,this._map._fadeAnimated?(Os(f.el,0),z(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),o||(pt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ye.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var o=new ne(this._wrapX?v(n.x,this._wrapX):n.x,this._wrapY?v(n.y,this._wrapY):n.y);return o.z=n.z,o},_pxBoundsToTileRange:function(n){var o=this.getTileSize();return new fe(n.min.unscaleBy(o).floor(),n.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function vn(n){return new aa(n)}var ur=aa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,o){this._url=n,o=j(this,o),o.detectRetina&&Ye.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,o){return this._url===n&&o===void 0&&(o=!0),this._url=n,o||this.redraw(),this},createTile:function(n,o){var f=document.createElement("img");return It(f,"load",d(this._tileOnLoad,this,o,f)),It(f,"error",d(this._tileOnError,this,o,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(n),f},getTileUrl:function(n){var o={r:Ye.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-n.y;this.options.tms&&(o.y=f),o["-y"]=f}return S(this._url,i(o,this.options))},_tileOnLoad:function(n,o){Ye.ielt9?setTimeout(d(n,this,null,o),0):n(null,o)},_tileOnError:function(n,o,f){var b=this.options.errorTileUrl;b&&o.getAttribute("src")!==b&&(o.src=b),n(f,o)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,o=this.options.maxZoom,f=this.options.zoomReverse,b=this.options.zoomOffset;return f&&(n=o-n),n+b},_getSubdomain:function(n){var o=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var n,o;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(o=this._tiles[n].el,o.onload=y,o.onerror=y,!o.complete)){o.src=K;var f=this._tiles[n].coords;Pt(o),delete this._tiles[n],this.fire("tileabort",{tile:o,coords:f})}},_removeTile:function(n){var o=this._tiles[n];if(o)return o.el.setAttribute("src",K),aa.prototype._removeTile.call(this,n)},_tileReady:function(n,o,f){if(!(!this._map||f&&f.getAttribute("src")===K))return aa.prototype._tileReady.call(this,n,o,f)}});function us(n,o){return new ur(n,o)}var fs=ur.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,o){this._url=n;var f=i({},this.defaultWmsParams);for(var b in o)b in this.options||(f[b]=o[b]);o=j(this,o);var k=o.detectRetina&&Ye.retina?2:1,F=this.getTileSize();f.width=F.x*k,f.height=F.y*k,this.wmsParams=f},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,ur.prototype.onAdd.call(this,n)},getTileUrl:function(n){var o=this._tileCoordsToNwSe(n),f=this._crs,b=E(f.project(o[0]),f.project(o[1])),k=b.min,F=b.max,ce=(this._wmsVersion>=1.3&&this._crs===Qs?[k.y,k.x,F.y,F.x]:[k.x,k.y,F.x,F.y]).join(","),Ce=ur.prototype.getTileUrl.call(this,n);return Ce+T(this.wmsParams,Ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ce},setParams:function(n,o){return i(this.wmsParams,n),o||this.redraw(),this}});function zs(n,o){return new fs(n,o)}ur.WMS=fs,us.wms=zs;var ms=As.extend({options:{padding:.1},initialize:function(n){j(this,n),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,o){var f=this._map.getZoomScale(o,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,o),F=b.multiplyBy(-f).add(k).subtract(this._map._getNewPixelOrigin(n,o));Ye.any3d?zn(this._container,F,f):Ms(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,o=this._map.getSize(),f=this._map.containerPointToLayerPoint(o.multiplyBy(-n)).round();this._bounds=new fe(f,f.add(o.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Un=ms.extend({options:{tolerance:0},getEvents:function(){var n=ms.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ms.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");It(n,"mousemove",this._onMouseMove,this),It(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),It(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,Pt(this._container),Jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var o in this._layers)n=this._layers[o],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var n=this._bounds,o=this._container,f=n.getSize(),b=Ye.retina?2:1;Ms(o,n.min),o.width=b*f.x,o.height=b*f.y,o.style.width=f.x+"px",o.style.height=f.y+"px",Ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){ms.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[h(n)]=n;var o=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var o=n._order,f=o.next,b=o.prev;f?f.prev=b:this._drawLast=b,b?b.next=f:this._drawFirst=f,delete n._order,delete this._layers[h(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var o=n.options.dashArray.split(/[, ]+/),f=[],b,k;for(k=0;k<o.length;k++){if(b=Number(o[k]),isNaN(b))return;f.push(b)}n.options._dashArray=f}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var o=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(n._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(n._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var o=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,o=this._redrawBounds;if(this._ctx.save(),o){var f=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)n=b.layer,(!o||n._pxBounds&&n._pxBounds.intersects(o))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,o){if(this._drawing){var f,b,k,F,ce=n._parts,Ce=ce.length,Ee=this._ctx;if(Ce){for(Ee.beginPath(),f=0;f<Ce;f++){for(b=0,k=ce[f].length;b<k;b++)F=ce[f][b],Ee[b?"lineTo":"moveTo"](F.x,F.y);o&&Ee.closePath()}this._fillStroke(Ee,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var o=n._point,f=this._ctx,b=Math.max(Math.round(n._radius),1),k=(Math.max(Math.round(n._radiusY),1)||b)/b;k!==1&&(f.save(),f.scale(1,k)),f.beginPath(),f.arc(o.x,o.y/k,b,0,Math.PI*2,!1),k!==1&&f.restore(),this._fillStroke(f,n)}},_fillStroke:function(n,o){var f=o.options;f.fill&&(n.globalAlpha=f.fillOpacity,n.fillStyle=f.fillColor||f.color,n.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(n.setLineDash&&n.setLineDash(o.options&&o.options._dashArray||[]),n.globalAlpha=f.opacity,n.lineWidth=f.weight,n.strokeStyle=f.color,n.lineCap=f.lineCap,n.lineJoin=f.lineJoin,n.stroke())},_onClick:function(n){for(var o=this._map.mouseEventToLayerPoint(n),f,b,k=this._drawFirst;k;k=k.next)f=k.layer,f.options.interactive&&f._containsPoint(o)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(f))&&(b=f);this._fireEvent(b?[b]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,o)}},_handleMouseOut:function(n){var o=this._hoveredLayer;o&&(Bt(this._container,"leaflet-interactive"),this._fireEvent([o],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,o){if(!this._mouseHoverThrottled){for(var f,b,k=this._drawFirst;k;k=k.next)f=k.layer,f.options.interactive&&f._containsPoint(o)&&(b=f);b!==this._hoveredLayer&&(this._handleMouseOut(n),b&&(pt(this._container,"leaflet-interactive"),this._fireEvent([b],n,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,o,f){this._map._fireDOMEvent(o,f||o.type,n)},_bringToFront:function(n){var o=n._order;if(o){var f=o.next,b=o.prev;if(f)f.prev=b;else return;b?b.next=f:f&&(this._drawFirst=f),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(n)}},_bringToBack:function(n){var o=n._order;if(o){var f=o.next,b=o.prev;if(b)b.next=f;else return;f?f.prev=b:b&&(this._drawLast=b),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(n)}}});function ui(n){return Ye.canvas?new Un(n):null}var Wn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Po={_initContainer:function(){this._container=Mt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ms.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var o=n._container=Wn("shape");pt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",n._path=Wn("path"),o.appendChild(n._path),this._updateStyle(n),this._layers[h(n)]=n},_addPath:function(n){var o=n._container;this._container.appendChild(o),n.options.interactive&&n.addInteractiveTarget(o)},_removePath:function(n){var o=n._container;Pt(o),n.removeInteractiveTarget(o),delete this._layers[h(n)]},_updateStyle:function(n){var o=n._stroke,f=n._fill,b=n.options,k=n._container;k.stroked=!!b.stroke,k.filled=!!b.fill,b.stroke?(o||(o=n._stroke=Wn("stroke")),k.appendChild(o),o.weight=b.weight+"px",o.color=b.color,o.opacity=b.opacity,b.dashArray?o.dashStyle=$(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=b.lineCap.replace("butt","flat"),o.joinstyle=b.lineJoin):o&&(k.removeChild(o),n._stroke=null),b.fill?(f||(f=n._fill=Wn("fill")),k.appendChild(f),f.color=b.fillColor||b.color,f.opacity=b.fillOpacity):f&&(k.removeChild(f),n._fill=null)},_updateCircle:function(n){var o=n._point.round(),f=Math.round(n._radius),b=Math.round(n._radiusY||f);this._setPath(n,n._empty()?"M0 0":"AL "+o.x+","+o.y+" "+f+","+b+" 0,"+65535*360)},_setPath:function(n,o){n._path.v=o},_bringToFront:function(n){un(n._container)},_bringToBack:function(n){Dr(n._container)}},fi=Ye.vml?Wn:xe,Ca=ms.extend({_initContainer:function(){this._container=fi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pt(this._container),Jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var n=this._bounds,o=n.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,f.setAttribute("width",o.x),f.setAttribute("height",o.y)),Ms(f,n.min),f.setAttribute("viewBox",[n.min.x,n.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(n){var o=n._path=fi("path");n.options.className&&pt(o,n.options.className),n.options.interactive&&pt(o,"leaflet-interactive"),this._updateStyle(n),this._layers[h(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Pt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[h(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var o=n._path,f=n.options;o&&(f.stroke?(o.setAttribute("stroke",f.color),o.setAttribute("stroke-opacity",f.opacity),o.setAttribute("stroke-width",f.weight),o.setAttribute("stroke-linecap",f.lineCap),o.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?o.setAttribute("stroke-dasharray",f.dashArray):o.removeAttribute("stroke-dasharray"),f.dashOffset?o.setAttribute("stroke-dashoffset",f.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),f.fill?(o.setAttribute("fill",f.fillColor||f.color),o.setAttribute("fill-opacity",f.fillOpacity),o.setAttribute("fill-rule",f.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(n,o){this._setPath(n,G(n._parts,o))},_updateCircle:function(n){var o=n._point,f=Math.max(Math.round(n._radius),1),b=Math.max(Math.round(n._radiusY),1)||f,k="a"+f+","+b+" 0 1,0 ",F=n._empty()?"M0 0":"M"+(o.x-f)+","+o.y+k+f*2+",0 "+k+-f*2+",0 ";this._setPath(n,F)},_setPath:function(n,o){n._path.setAttribute("d",o)},_bringToFront:function(n){un(n._path)},_bringToBack:function(n){Dr(n._path)}});Ye.vml&&Ca.include(Po);function Br(n){return Ye.svg||Ye.vml?new Ca(n):null}Ut.include({getRenderer:function(n){var o=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var o=this._paneRenderers[n];return o===void 0&&(o=this._createRenderer({pane:n}),this._paneRenderers[n]=o),o},_createRenderer:function(n){return this.options.preferCanvas&&ui(n)||Br(n)}});var an=cr.extend({initialize:function(n,o){cr.prototype.initialize.call(this,this._boundsToLatLngs(n),o)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Z(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Lo(n,o){return new an(n,o)}Ca.create=fi,Ca.pointsToPath=G,gn.geometryToLayer=Va,gn.coordsToLatLng=na,gn.coordsToLatLngs=dr,gn.latLngToCoords=hr,gn.latLngsToCoords=Ln,gn.getFeature=zr,gn.asFeature=xn,Ut.mergeOptions({boxZoom:!0});var eo=Fr.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),za(),zi(),this._startPoint=this._map.mouseEventToContainerPoint(n),It(document,{contextmenu:Qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Mt("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var o=new fe(this._point,this._startPoint),f=o.getSize();Ms(this._box,o.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Pt(this._box),Bt(this._container,"leaflet-crosshair")),Jn(),kn(),Jt(document,{contextmenu:Qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var o=new W(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ut.addInitHook("addHandler","boxZoom",eo),Ut.mergeOptions({doubleClickZoom:!0});var gl=Fr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var o=this._map,f=o.getZoom(),b=o.options.zoomDelta,k=n.originalEvent.shiftKey?f-b:f+b;o.options.doubleClickZoom==="center"?o.setZoom(k):o.setZoomAround(n.containerPoint,k)}});Ut.addInitHook("addHandler","doubleClickZoom",gl),Ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var to=Fr.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new pn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Bt(this._map._container,"leaflet-grab"),Bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Z(this._map.options.maxBounds);this._offsetLimit=E(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var o=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(o),this._prunePositions(o)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,o){return n-(n-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;n.x<o.min.x&&(n.x=this._viscousLimit(n.x,o.min.x)),n.y<o.min.y&&(n.y=this._viscousLimit(n.y,o.min.y)),n.x>o.max.x&&(n.x=this._viscousLimit(n.x,o.max.x)),n.y>o.max.y&&(n.y=this._viscousLimit(n.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,o=Math.round(n/2),f=this._initialWorldOffset,b=this._draggable._newPos.x,k=(b-o+f)%n+o-f,F=(b+o+f)%n-o-f,ce=Math.abs(k+f)<Math.abs(F+f)?k:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ce},_onDragEnd:function(n){var o=this._map,f=o.options,b=!f.inertia||n.noInertia||this._times.length<2;if(o.fire("dragend",n),b)o.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,ce=f.easeLinearity,Ce=k.multiplyBy(ce/F),Ee=Ce.distanceTo([0,0]),qe=Math.min(f.inertiaMaxSpeed,Ee),tt=Ce.multiplyBy(qe/Ee),gt=qe/(f.inertiaDeceleration*ce),Ht=tt.multiplyBy(-gt/2).round();!Ht.x&&!Ht.y?o.fire("moveend"):(Ht=o._limitOffset(Ht,o.options.maxBounds),R(function(){o.panBy(Ht,{duration:gt,easeLinearity:ce,noMoveStart:!0,animate:!0})}))}}});Ut.addInitHook("addHandler","dragging",to),Ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var so=Fr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),It(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,o=document.documentElement,f=n.scrollTop||o.scrollTop,b=n.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(b,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var o=this._panKeys={},f=this.keyCodes,b,k;for(b=0,k=f.left.length;b<k;b++)o[f.left[b]]=[-1*n,0];for(b=0,k=f.right.length;b<k;b++)o[f.right[b]]=[n,0];for(b=0,k=f.down.length;b<k;b++)o[f.down[b]]=[0,n];for(b=0,k=f.up.length;b<k;b++)o[f.up[b]]=[0,-1*n]},_setZoomDelta:function(n){var o=this._zoomKeys={},f=this.keyCodes,b,k;for(b=0,k=f.zoomIn.length;b<k;b++)o[f.zoomIn[b]]=n;for(b=0,k=f.zoomOut.length;b<k;b++)o[f.zoomOut[b]]=-n},_addHooks:function(){It(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=n.keyCode,f=this._map,b;if(o in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(b=this._panKeys[o],n.shiftKey&&(b=ae(b).multiplyBy(3)),f.options.maxBounds&&(b=f._limitOffset(ae(b),f.options.maxBounds)),f.options.worldCopyJump){var k=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(b)));f.panTo(k)}else f.panBy(b)}else if(o in this._zoomKeys)f.setZoom(f.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Qr(n)}}});Ut.addInitHook("addHandler","keyboard",so),Ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ao=Fr.extend({addHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var o=ri(n),f=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var b=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),b),Qr(n)},_performZoom:function(){var n=this._map,o=n.getZoom(),f=this._map.options.zoomSnap||0;n._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,F=f?Math.ceil(k/f)*f:k,ce=n._limitZoom(o+(this._delta>0?F:-F))-o;this._delta=0,this._startTime=null,ce&&(n.options.scrollWheelZoom==="center"?n.setZoom(o+ce):n.setZoomAround(this._lastMousePos,o+ce))}});Ut.addInitHook("addHandler","scrollWheelZoom",Ao);var Zl=600;Ut.mergeOptions({tapHold:Ye.touchNative&&Ye.safari&&Ye.mobile,tapTolerance:15});var To=Fr.extend({addHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var o=n.touches[0];this._startPos=this._newPos=new ne(o.clientX,o.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(It(document,"touchend",Ds),It(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Zl),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Jt(document,"touchend",Ds),Jt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)},_onMove:function(n){var o=n.touches[0];this._newPos=new ne(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,o){var f=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});f._simulated=!0,o.target.dispatchEvent(f)}});Ut.addInitHook("addHandler","tapHold",To),Ut.mergeOptions({touchZoom:Ye.touch,bounceAtZoomLimits:!0});var Eo=Fr.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Bt(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var o=this._map;if(!(!n.touches||n.touches.length!==2||o._animatingZoom||this._zooming)){var f=o.mouseEventToContainerPoint(n.touches[0]),b=o.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(f.add(b)._divideBy(2))),this._startDist=f.distanceTo(b),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),Ds(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var o=this._map,f=o.mouseEventToContainerPoint(n.touches[0]),b=o.mouseEventToContainerPoint(n.touches[1]),k=f.distanceTo(b)/this._startDist;if(this._zoom=o.getScaleZoom(k,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&k<1||this._zoom>o.getMaxZoom()&&k>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var F=f._add(b)._divideBy(2)._subtract(this._centerPoint);if(k===1&&F.x===0&&F.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var ce=d(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(ce,this,!0),Ds(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ut.addInitHook("addHandler","touchZoom",Eo),Ut.BoxZoom=eo,Ut.DoubleClickZoom=gl,Ut.Drag=to,Ut.Keyboard=so,Ut.ScrollWheelZoom=Ao,Ut.TapHold=To,Ut.TouchZoom=Eo,r.Bounds=fe,r.Browser=Ye,r.CRS=de,r.Canvas=Un,r.Circle=vr,r.CircleMarker=sa,r.Class=B,r.Control=$s,r.DivIcon=Sa,r.DivOverlay=yr,r.DomEvent=No,r.DomUtil=Tt,r.Draggable=pn,r.Evented=be,r.FeatureGroup=tn,r.GeoJSON=gn,r.GridLayer=aa,r.Handler=Fr,r.Icon=Pn,r.ImageOverlay=ja,r.LatLng=Q,r.LatLngBounds=W,r.Layer=As,r.LayerGroup=Cr,r.LineUtil=Xt,r.Map=Ut,r.Marker=Ws,r.Mixin=So,r.Path=sn,r.Point=ne,r.PolyUtil=ii,r.Polygon=cr,r.Polyline=rn,r.Popup=Hn,r.PosAnimation=Hi,r.Projection=Us,r.Rectangle=an,r.Renderer=ms,r.SVG=Ca,r.SVGOverlay=Qi,r.TileLayer=ur,r.Tooltip=$n,r.Transformation=ie,r.Util=q,r.VideoOverlay=nn,r.bind=d,r.bounds=E,r.canvas=ui,r.circle=pl,r.circleMarker=Ji,r.control=Xr,r.divIcon=ka,r.extend=i,r.featureGroup=Yi,r.geoJSON=qn,r.geoJson=Fs,r.gridLayer=vn,r.icon=Ki,r.imageOverlay=Pr,r.latLng=re,r.latLngBounds=Z,r.layerGroup=ko,r.map=jo,r.marker=li,r.point=ae,r.polygon=ci,r.polyline=Co,r.popup=_a,r.rectangle=Lo,r.setOptions=j,r.stamp=h,r.svg=Br,r.svgOverlay=Xi,r.tileLayer=us,r.tooltip=hi,r.transformation=Te,r.version=a,r.videoOverlay=di;var Mo=window.L;r.noConflict=function(){return window.L=Mo,this},window.L=r})}(Cl,Cl.exports)),Cl.exports}var Vl=Q5();const df=hv(Vl);function Qh(s,t,r){return Object.freeze({instance:s,context:t,container:r})}function Xh(s,t){return t==null?function(a,i){const l=P.useRef();return l.current||(l.current=s(a,i)),l}:function(a,i){const l=P.useRef();l.current||(l.current=s(a,i));const d=P.useRef(a),{instance:u}=l.current;return P.useEffect(function(){d.current!==a&&(t(u,a,d.current),d.current=a)},[u,a,i]),l}}function X5(s,t){P.useEffect(function(){return(t.layerContainer??t.map).addLayer(s.instance),function(){t.layerContainer?.removeLayer(s.instance),t.map.removeLayer(s.instance)}},[t,s])}function Mg(s){return function(r){const a=Jc(),i=s(Eg(r,a),a);return W5(a.map,r.attribution),K5(i.current,r.eventHandlers),X5(i.current,a),i}}function eb(s,t){const r=Xh(s,t),a=Mg(r);return Tg(a)}function tb(s,t){const r=Xh(s,t),a=Mg(r);return G5(a)}function sb(s,t,r){const{opacity:a,zIndex:i}=t;a!=null&&a!==r.opacity&&s.setOpacity(a),i!=null&&i!==r.zIndex&&s.setZIndex(i)}function rb(){return Jc().map}const nb=Xh(function({children:t,...r},a){const i=new Vl.Control.Layers(void 0,void 0,r);return Qh(i,Kh(a,{layersControl:i}))},function(t,r,a){r.collapsed!==a.collapsed&&(r.collapsed===!0?t.collapse():t.expand())}),ab=Y5(nb),Tl=Tg(ab);function Ig(s){return function(r){const a=Jc(),i=P.useRef(r),[l,d]=P.useState(null),{layersControl:u,map:h}=a,p=P.useCallback(N=>{u!=null&&(i.current.checked&&h.addLayer(N),s(u,N,i.current.name),d(N))},[u,h]),v=P.useCallback(N=>{u?.removeLayer(N),d(null)},[u]),y=P.useMemo(()=>Kh(a,{layerContainer:{addLayer:p,removeLayer:v}}),[a,p,v]);return P.useEffect(()=>{l!==null&&i.current!==r&&(r.checked===!0&&(i.current.checked==null||i.current.checked===!1)?h.addLayer(l):i.current.checked===!0&&(r.checked==null||r.checked===!1)&&h.removeLayer(l),i.current=r)}),r.children?kc.createElement(Jh,{value:y},r.children):null}}Tl.BaseLayer=Ig(function(t,r,a){t.addBaseLayer(r,a)});Tl.Overlay=Ig(function(t,r,a){t.addOverlay(r,a)});function sh(){return sh=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},sh.apply(this,arguments)}function ib({bounds:s,boundsOptions:t,center:r,children:a,className:i,id:l,placeholder:d,style:u,whenReady:h,zoom:p,...v},y){const[N]=P.useState({className:i,id:l,style:u}),[g,C]=P.useState(null);P.useImperativeHandle(y,()=>g?.map??null,[g]);const j=P.useCallback(A=>{if(A!==null&&g===null){const S=new Vl.Map(A,v);r!=null&&p!=null?S.setView(r,p):s!=null&&S.fitBounds(s,t),h!=null&&S.whenReady(h),C(Z5(S))}},[]);P.useEffect(()=>()=>{g?.map.remove()},[g]);const T=g?kc.createElement(Jh,{value:g},a):d??null;return kc.createElement("div",sh({},N,{ref:j}),T)}const ob=P.forwardRef(ib),hf=eb(function({position:t,...r},a){const i=new Vl.Marker(t,r);return Qh(i,Kh(a,{overlayContainer:i}))},function(t,r,a){r.position!==a.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==a.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==a.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==a.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==a.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),uf=tb(function({url:t,...r},a){const i=new Vl.TileLayer(t,Eg(r,a));return Qh(i,a)},function(t,r,a){sb(t,r,a);const{url:i}=r;i!=null&&i!==a.url&&t.setUrl(i)}),lb="modulepreload",cb=function(s){return"/"+s},ff={},rh=function(t,r,a){let i=Promise.resolve();if(r&&r.length>0){let h=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");i=h(r.map(p=>{if(p=cb(p),p in ff)return;ff[p]=!0;const v=p.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":lb,v||(N.as="script"),N.crossOrigin="",N.href=p,u&&N.setAttribute("nonce",u),document.head.appendChild(N),v)return new Promise((g,C)=>{N.addEventListener("load",g),N.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return i.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return t().catch(l)})};function bs(s){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bs(s)}var Zr=Uint8Array,In=Uint16Array,eu=Int32Array,Qc=new Zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Xc=new Zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nh=new Zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rg=function(s,t){for(var r=new In(31),a=0;a<31;++a)r[a]=t+=1<<s[a-1];for(var i=new eu(r[30]),a=1;a<30;++a)for(var l=r[a];l<r[a+1];++l)i[l]=l-r[a]<<5|a;return{b:r,r:i}},Og=Rg(Qc,2),Dg=Og.b,ah=Og.r;Dg[28]=258,ah[258]=28;var Fg=Rg(Xc,0),db=Fg.b,mf=Fg.r,ih=new In(32768);for(var Es=0;Es<32768;++Es){var wi=(Es&43690)>>1|(Es&21845)<<1;wi=(wi&52428)>>2|(wi&13107)<<2,wi=(wi&61680)>>4|(wi&3855)<<4,ih[Es]=((wi&65280)>>8|(wi&255)<<8)>>1}var Da=function(s,t,r){for(var a=s.length,i=0,l=new In(t);i<a;++i)s[i]&&++l[s[i]-1];var d=new In(t);for(i=1;i<t;++i)d[i]=d[i-1]+l[i-1]<<1;var u;if(r){u=new In(1<<t);var h=15-t;for(i=0;i<a;++i)if(s[i])for(var p=i<<4|s[i],v=t-s[i],y=d[s[i]-1]++<<v,N=y|(1<<v)-1;y<=N;++y)u[ih[y]>>h]=p}else for(u=new In(a),i=0;i<a;++i)s[i]&&(u[i]=ih[d[s[i]-1]++]>>15-s[i]);return u},Ii=new Zr(288);for(var Es=0;Es<144;++Es)Ii[Es]=8;for(var Es=144;Es<256;++Es)Ii[Es]=9;for(var Es=256;Es<280;++Es)Ii[Es]=7;for(var Es=280;Es<288;++Es)Ii[Es]=8;var zl=new Zr(32);for(var Es=0;Es<32;++Es)zl[Es]=5;var hb=Da(Ii,9,0),ub=Da(Ii,9,1),fb=Da(zl,5,0),mb=Da(zl,5,1),Cd=function(s){for(var t=s[0],r=1;r<s.length;++r)s[r]>t&&(t=s[r]);return t},oa=function(s,t,r){var a=t/8|0;return(s[a]|s[a+1]<<8)>>(t&7)&r},Pd=function(s,t){var r=t/8|0;return(s[r]|s[r+1]<<8|s[r+2]<<16)>>(t&7)},tu=function(s){return(s+7)/8|0},zg=function(s,t,r){return(r==null||r>s.length)&&(r=s.length),new Zr(s.subarray(t,r))},pb=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],da=function(s,t,r){var a=new Error(t||pb[s]);if(a.code=s,Error.captureStackTrace&&Error.captureStackTrace(a,da),!r)throw a;return a},gb=function(s,t,r,a){var i=s.length,l=0;if(!i||t.f&&!t.l)return r||new Zr(0);var d=!r,u=d||t.i!=2,h=t.i;d&&(r=new Zr(i*3));var p=function(ie){var Te=r.length;if(ie>Te){var se=new Zr(Math.max(Te*2,ie));se.set(r),r=se}},v=t.f||0,y=t.p||0,N=t.b||0,g=t.l,C=t.d,j=t.m,T=t.n,A=i*8;do{if(!g){v=oa(s,y,1);var S=oa(s,y+1,3);if(y+=3,S)if(S==1)g=ub,C=mb,j=9,T=5;else if(S==2){var me=oa(s,y,31)+257,le=oa(s,y+10,15)+4,X=me+oa(s,y+5,31)+1;y+=14;for(var ee=new Zr(X),je=new Zr(19),R=0;R<le;++R)je[nh[R]]=oa(s,y+R*3,7);y+=le*3;for(var z=Cd(je),q=(1<<z)-1,B=Da(je,z,1),R=0;R<X;){var ge=B[oa(s,y,q)];y+=ge&15;var $=ge>>4;if($<16)ee[R++]=$;else{var ue=0,be=0;for($==16?(be=3+oa(s,y,3),y+=2,ue=ee[R-1]):$==17?(be=3+oa(s,y,7),y+=3):$==18&&(be=11+oa(s,y,127),y+=7);be--;)ee[R++]=ue}}var ne=ee.subarray(0,me),ve=ee.subarray(me);j=Cd(ne),T=Cd(ve),g=Da(ne,j,1),C=Da(ve,T,1)}else da(1);else{var $=tu(y)+4,V=s[$-4]|s[$-3]<<8,K=$+V;if(K>i){h&&da(0);break}u&&p(N+V),r.set(s.subarray($,K),N),t.b=N+=V,t.p=y=K*8,t.f=v;continue}if(y>A){h&&da(0);break}}u&&p(N+131072);for(var ae=(1<<j)-1,fe=(1<<T)-1,E=y;;E=y){var ue=g[Pd(s,y)&ae],W=ue>>4;if(y+=ue&15,y>A){h&&da(0);break}if(ue||da(2),W<256)r[N++]=W;else if(W==256){E=y,g=null;break}else{var Z=W-254;if(W>264){var R=W-257,Q=Qc[R];Z=oa(s,y,(1<<Q)-1)+Dg[R],y+=Q}var re=C[Pd(s,y)&fe],de=re>>4;re||da(3),y+=re&15;var ve=db[de];if(de>3){var Q=Xc[de];ve+=Pd(s,y)&(1<<Q)-1,y+=Q}if(y>A){h&&da(0);break}u&&p(N+131072);var Ne=N+Z;if(N<ve){var J=l-ve,oe=Math.min(ve,Ne);for(J+N<0&&da(3);N<oe;++N)r[N]=a[J+N]}for(;N<Ne;++N)r[N]=r[N-ve]}}t.l=g,t.p=E,t.b=N,t.f=v,g&&(v=1,t.m=j,t.d=C,t.n=T)}while(!v);return N!=r.length&&d?zg(r,0,N):r.subarray(0,N)},Ya=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8},_l=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8,s[a+2]|=r>>16},Ld=function(s,t){for(var r=[],a=0;a<s.length;++a)s[a]&&r.push({s:a,f:s[a]});var i=r.length,l=r.slice();if(!i)return{t:qg,l:0};if(i==1){var d=new Zr(r[0].s+1);return d[r[0].s]=1,{t:d,l:1}}r.sort(function(K,me){return K.f-me.f}),r.push({s:-1,f:25001});var u=r[0],h=r[1],p=0,v=1,y=2;for(r[0]={s:-1,f:u.f+h.f,l:u,r:h};v!=i-1;)u=r[r[p].f<r[y].f?p++:y++],h=r[p!=v&&r[p].f<r[y].f?p++:y++],r[v++]={s:-1,f:u.f+h.f,l:u,r:h};for(var N=l[0].s,a=1;a<i;++a)l[a].s>N&&(N=l[a].s);var g=new In(N+1),C=oh(r[v-1],g,0);if(C>t){var a=0,j=0,T=C-t,A=1<<T;for(l.sort(function(me,le){return g[le.s]-g[me.s]||me.f-le.f});a<i;++a){var S=l[a].s;if(g[S]>t)j+=A-(1<<C-g[S]),g[S]=t;else break}for(j>>=T;j>0;){var $=l[a].s;g[$]<t?j-=1<<t-g[$]++-1:++a}for(;a>=0&&j;--a){var V=l[a].s;g[V]==t&&(--g[V],++j)}C=t}return{t:new Zr(g),l:C}},oh=function(s,t,r){return s.s==-1?Math.max(oh(s.l,t,r+1),oh(s.r,t,r+1)):t[s.s]=r},pf=function(s){for(var t=s.length;t&&!s[--t];);for(var r=new In(++t),a=0,i=s[0],l=1,d=function(h){r[a++]=h},u=1;u<=t;++u)if(s[u]==i&&u!=t)++l;else{if(!i&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(i),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(i);l=1,i=s[u]}return{c:r.subarray(0,a),n:t}},Sl=function(s,t){for(var r=0,a=0;a<t.length;++a)r+=s[a]*t[a];return r},Bg=function(s,t,r){var a=r.length,i=tu(t+2);s[i]=a&255,s[i+1]=a>>8,s[i+2]=s[i]^255,s[i+3]=s[i+1]^255;for(var l=0;l<a;++l)s[i+l+4]=r[l];return(i+4+a)*8},gf=function(s,t,r,a,i,l,d,u,h,p,v){Ya(t,v++,r),++i[256];for(var y=Ld(i,15),N=y.t,g=y.l,C=Ld(l,15),j=C.t,T=C.l,A=pf(N),S=A.c,$=A.n,V=pf(j),K=V.c,me=V.n,le=new In(19),X=0;X<S.length;++X)++le[S[X]&31];for(var X=0;X<K.length;++X)++le[K[X]&31];for(var ee=Ld(le,7),je=ee.t,R=ee.l,z=19;z>4&&!je[nh[z-1]];--z);var q=p+5<<3,B=Sl(i,Ii)+Sl(l,zl)+d,ge=Sl(i,N)+Sl(l,j)+d+14+3*z+Sl(le,je)+2*le[16]+3*le[17]+7*le[18];if(h>=0&&q<=B&&q<=ge)return Bg(t,v,s.subarray(h,h+p));var ue,be,ne,ve;if(Ya(t,v,1+(ge<B)),v+=2,ge<B){ue=Da(N,g,0),be=N,ne=Da(j,T,0),ve=j;var ae=Da(je,R,0);Ya(t,v,$-257),Ya(t,v+5,me-1),Ya(t,v+10,z-4),v+=14;for(var X=0;X<z;++X)Ya(t,v+3*X,je[nh[X]]);v+=3*z;for(var fe=[S,K],E=0;E<2;++E)for(var W=fe[E],X=0;X<W.length;++X){var Z=W[X]&31;Ya(t,v,ae[Z]),v+=je[Z],Z>15&&(Ya(t,v,W[X]>>5&127),v+=W[X]>>12)}}else ue=hb,be=Ii,ne=fb,ve=zl;for(var X=0;X<u;++X){var Q=a[X];if(Q>255){var Z=Q>>18&31;_l(t,v,ue[Z+257]),v+=be[Z+257],Z>7&&(Ya(t,v,Q>>23&31),v+=Qc[Z]);var re=Q&31;_l(t,v,ne[re]),v+=ve[re],re>3&&(_l(t,v,Q>>5&8191),v+=Xc[re])}else _l(t,v,ue[Q]),v+=be[Q]}return _l(t,v,ue[256]),v+be[256]},xb=new eu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qg=new Zr(0),vb=function(s,t,r,a,i,l){var d=l.z||s.length,u=new Zr(a+d+5*(1+Math.ceil(d/7e3))+i),h=u.subarray(a,u.length-i),p=l.l,v=(l.r||0)&7;if(t){v&&(h[0]=l.r>>3);for(var y=xb[t-1],N=y>>13,g=y&8191,C=(1<<r)-1,j=l.p||new In(32768),T=l.h||new In(C+1),A=Math.ceil(r/3),S=2*A,$=function(Ae){return(s[Ae]^s[Ae+1]<<A^s[Ae+2]<<S)&C},V=new eu(25e3),K=new In(288),me=new In(32),le=0,X=0,ee=l.i||0,je=0,R=l.w||0,z=0;ee+2<d;++ee){var q=$(ee),B=ee&32767,ge=T[q];if(j[B]=ge,T[q]=B,R<=ee){var ue=d-ee;if((le>7e3||je>24576)&&(ue>423||!p)){v=gf(s,h,0,V,K,me,X,je,z,ee-z,v),je=le=X=0,z=ee;for(var be=0;be<286;++be)K[be]=0;for(var be=0;be<30;++be)me[be]=0}var ne=2,ve=0,ae=g,fe=B-ge&32767;if(ue>2&&q==$(ee-fe))for(var E=Math.min(N,ue)-1,W=Math.min(32767,ee),Z=Math.min(258,ue);fe<=W&&--ae&&B!=ge;){if(s[ee+ne]==s[ee+ne-fe]){for(var Q=0;Q<Z&&s[ee+Q]==s[ee+Q-fe];++Q);if(Q>ne){if(ne=Q,ve=fe,Q>E)break;for(var re=Math.min(fe,Q-2),de=0,be=0;be<re;++be){var Ne=ee-fe+be&32767,J=j[Ne],oe=Ne-J&32767;oe>de&&(de=oe,ge=Ne)}}}B=ge,ge=j[B],fe+=B-ge&32767}if(ve){V[je++]=268435456|ah[ne]<<18|mf[ve];var ie=ah[ne]&31,Te=mf[ve]&31;X+=Qc[ie]+Xc[Te],++K[257+ie],++me[Te],R=ee+ne,++le}else V[je++]=s[ee],++K[s[ee]]}}for(ee=Math.max(ee,R);ee<d;++ee)V[je++]=s[ee],++K[s[ee]];v=gf(s,h,p,V,K,me,X,je,z,ee-z,v),p||(l.r=v&7|h[v/8|0]<<3,v-=7,l.h=T,l.p=j,l.i=ee,l.w=R)}else{for(var ee=l.w||0;ee<d+p;ee+=65535){var se=ee+65535;se>=d&&(h[v/8|0]=p,se=d),v=Bg(h,v+1,s.subarray(ee,se))}l.i=d}return zg(u,0,a+tu(v)+i)},Hg=function(){var s=1,t=0;return{p:function(r){for(var a=s,i=t,l=r.length|0,d=0;d!=l;){for(var u=Math.min(d+2655,l);d<u;++d)i+=a+=r[d];a=(a&65535)+15*(a>>16),i=(i&65535)+15*(i>>16)}s=a,t=i},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},yb=function(s,t,r,a,i){if(!i&&(i={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),d=new Zr(l.length+s.length);d.set(l),d.set(s,l.length),s=d,i.w=l.length}return vb(s,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,r,a,i)},$g=function(s,t,r){for(;r;++t)s[t]=r,r>>>=8},bb=function(s,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(s[0]=120,s[1]=a<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var i=Hg();i.p(t.dictionary),$g(s,2,i.d())}},wb=function(s,t){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&da(6,"invalid zlib data"),(s[1]>>5&1)==1&&da(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function lh(s,t){t||(t={});var r=Hg();r.p(s);var a=yb(s,t,t.dictionary?6:2,4);return bb(a,t),$g(a,a.length-4,r.d()),a}function Nb(s,t){return gb(s.subarray(wb(s),-4),{i:2},t,t)}var jb=typeof TextDecoder<"u"&&new TextDecoder,_b=0;try{jb.decode(qg,{stream:!0}),_b=1}catch{}var _t=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Ad(){_t.console&&typeof _t.console.log=="function"&&_t.console.log.apply(_t.console,arguments)}var Cs={log:Ad,warn:function(s){_t.console&&(typeof _t.console.warn=="function"?_t.console.warn.apply(_t.console,arguments):Ad.call(null,arguments))},error:function(s){_t.console&&(typeof _t.console.error=="function"?_t.console.error.apply(_t.console,arguments):Ad(s))}};function Td(s,t,r){var a=new XMLHttpRequest;a.open("GET",s),a.responseType="blob",a.onload=function(){ao(a.response,t,r)},a.onerror=function(){Cs.error("could not download file")},a.send()}function xf(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function fc(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var El,ch,ao=_t.saveAs||((typeof window>"u"?"undefined":bs(window))!=="object"||window!==_t?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,t,r){var a=_t.URL||_t.webkitURL,i=document.createElement("a");t=t||s.name||"download",i.download=t,i.rel="noopener",typeof s=="string"?(i.href=s,i.origin!==location.origin?xf(i.href)?Td(s,t,r):fc(i,i.target="_blank"):fc(i)):(i.href=a.createObjectURL(s),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){fc(i)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,r){if(t=t||s.name||"download",typeof s=="string")if(xf(s))Td(s,t,r);else{var a=document.createElement("a");a.href=s,a.target="_blank",setTimeout(function(){fc(a)})}else navigator.msSaveOrOpenBlob(function(i,l){return l===void 0?l={autoBom:!1}:bs(l)!=="object"&&(Cs.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(s,r),t)}:function(s,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof s=="string")return Td(s,t,r);var i=s.type==="application/octet-stream",l=/constructor/i.test(_t.HTMLElement)||_t.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||i&&l)&&(typeof FileReader>"u"?"undefined":bs(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var v=u.result;v=d?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=v:location=v,a=null},u.readAsDataURL(s)}else{var h=_t.URL||_t.webkitURL,p=h.createObjectURL(s);a?a.location=p:location.href=p,a=null,setTimeout(function(){h.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Ug(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],a=0;a<r.length;a++){var i=r[a].re,l=r[a].process,d=i.exec(s);d&&(t=l(d),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),p=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),p.length==1&&(p="0"+p),"#"+u+h+p}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ed(s,t){var r=s[0],a=s[1],i=s[2],l=s[3];r=Hr(r,a,i,l,t[0],7,-680876936),l=Hr(l,r,a,i,t[1],12,-389564586),i=Hr(i,l,r,a,t[2],17,606105819),a=Hr(a,i,l,r,t[3],22,-1044525330),r=Hr(r,a,i,l,t[4],7,-176418897),l=Hr(l,r,a,i,t[5],12,1200080426),i=Hr(i,l,r,a,t[6],17,-1473231341),a=Hr(a,i,l,r,t[7],22,-45705983),r=Hr(r,a,i,l,t[8],7,1770035416),l=Hr(l,r,a,i,t[9],12,-1958414417),i=Hr(i,l,r,a,t[10],17,-42063),a=Hr(a,i,l,r,t[11],22,-1990404162),r=Hr(r,a,i,l,t[12],7,1804603682),l=Hr(l,r,a,i,t[13],12,-40341101),i=Hr(i,l,r,a,t[14],17,-1502002290),r=$r(r,a=Hr(a,i,l,r,t[15],22,1236535329),i,l,t[1],5,-165796510),l=$r(l,r,a,i,t[6],9,-1069501632),i=$r(i,l,r,a,t[11],14,643717713),a=$r(a,i,l,r,t[0],20,-373897302),r=$r(r,a,i,l,t[5],5,-701558691),l=$r(l,r,a,i,t[10],9,38016083),i=$r(i,l,r,a,t[15],14,-660478335),a=$r(a,i,l,r,t[4],20,-405537848),r=$r(r,a,i,l,t[9],5,568446438),l=$r(l,r,a,i,t[14],9,-1019803690),i=$r(i,l,r,a,t[3],14,-187363961),a=$r(a,i,l,r,t[8],20,1163531501),r=$r(r,a,i,l,t[13],5,-1444681467),l=$r(l,r,a,i,t[2],9,-51403784),i=$r(i,l,r,a,t[7],14,1735328473),r=Ur(r,a=$r(a,i,l,r,t[12],20,-1926607734),i,l,t[5],4,-378558),l=Ur(l,r,a,i,t[8],11,-2022574463),i=Ur(i,l,r,a,t[11],16,1839030562),a=Ur(a,i,l,r,t[14],23,-35309556),r=Ur(r,a,i,l,t[1],4,-1530992060),l=Ur(l,r,a,i,t[4],11,1272893353),i=Ur(i,l,r,a,t[7],16,-155497632),a=Ur(a,i,l,r,t[10],23,-1094730640),r=Ur(r,a,i,l,t[13],4,681279174),l=Ur(l,r,a,i,t[0],11,-358537222),i=Ur(i,l,r,a,t[3],16,-722521979),a=Ur(a,i,l,r,t[6],23,76029189),r=Ur(r,a,i,l,t[9],4,-640364487),l=Ur(l,r,a,i,t[12],11,-421815835),i=Ur(i,l,r,a,t[15],16,530742520),r=Wr(r,a=Ur(a,i,l,r,t[2],23,-995338651),i,l,t[0],6,-198630844),l=Wr(l,r,a,i,t[7],10,1126891415),i=Wr(i,l,r,a,t[14],15,-1416354905),a=Wr(a,i,l,r,t[5],21,-57434055),r=Wr(r,a,i,l,t[12],6,1700485571),l=Wr(l,r,a,i,t[3],10,-1894986606),i=Wr(i,l,r,a,t[10],15,-1051523),a=Wr(a,i,l,r,t[1],21,-2054922799),r=Wr(r,a,i,l,t[8],6,1873313359),l=Wr(l,r,a,i,t[15],10,-30611744),i=Wr(i,l,r,a,t[6],15,-1560198380),a=Wr(a,i,l,r,t[13],21,1309151649),r=Wr(r,a,i,l,t[4],6,-145523070),l=Wr(l,r,a,i,t[11],10,-1120210379),i=Wr(i,l,r,a,t[2],15,718787259),a=Wr(a,i,l,r,t[9],21,-343485551),s[0]=ki(r,s[0]),s[1]=ki(a,s[1]),s[2]=ki(i,s[2]),s[3]=ki(l,s[3])}function ed(s,t,r,a,i,l){return t=ki(ki(t,s),ki(a,l)),ki(t<<i|t>>>32-i,r)}function Hr(s,t,r,a,i,l,d){return ed(t&r|~t&a,s,t,i,l,d)}function $r(s,t,r,a,i,l,d){return ed(t&a|r&~a,s,t,i,l,d)}function Ur(s,t,r,a,i,l,d){return ed(t^r^a,s,t,i,l,d)}function Wr(s,t,r,a,i,l,d){return ed(r^(t|~a),s,t,i,l,d)}function Wg(s){var t,r=s.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)Ed(a,Sb(s.substring(t-64,t)));s=s.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)i[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Ed(a,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,Ed(a,i),a}function Sb(s){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return r}El=_t.atob.bind(_t),ch=_t.btoa.bind(_t);var vf="0123456789abcdef".split("");function kb(s){for(var t="",r=0;r<4;r++)t+=vf[s>>8*r+4&15]+vf[s>>8*r&15];return t}function Cb(s){return String.fromCharCode((255&s)>>0,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function dh(s){return Wg(s).map(Cb).join("")}var Pb=function(s){for(var t=0;t<s.length;t++)s[t]=kb(s[t]);return s.join("")}(Wg("hello"))!="5d41402abc4b2a76b9719d911017c592";function ki(s,t){if(Pb){var r=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(r>>16)<<16|65535&r}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function hh(s,t){var r,a,i,l;if(s!==r){for(var d=(i=s,l=1+(256/s.length>>0),new Array(l+1).join(i)),u=[],h=0;h<256;h++)u[h]=h;var p=0;for(h=0;h<256;h++){var v=u[h];p=(p+v+d.charCodeAt(h))%256,u[h]=u[p],u[p]=v}r=s,a=u}else u=a;var y=t.length,N=0,g=0,C="";for(h=0;h<y;h++)g=(g+(v=u[N=(N+1)%256]))%256,u[N]=u[g],u[g]=v,d=u[(u[N]+u[g])%256],C+=String.fromCharCode(t.charCodeAt(h)^d);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var yf={print:4,modify:8,copy:16,"annot-forms":32};function Ho(s,t,r,a){this.v=1,this.r=2;var i=192;s.forEach(function(u){if(yf.perm!==void 0)throw new Error("Invalid permission: "+u);i+=yf[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(t+this.padding).substr(0,32),d=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^i)),this.encryptionKey=dh(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=hh(this.encryptionKey,this.padding)}function $o(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",r=s.length,a=0;a<r;a++){var i=s.charCodeAt(a);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=s[a]}return t}function bf(s){if(bs(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,i){if(i=i||!1,typeof r!="string"||typeof a!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var l=Math.random().toString(35);return t[r][l]=[a,!!i],l},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),i=[];for(var l in t[r]){var d=t[r][l];try{d[0].apply(s,a)}catch(u){_t.console&&Cs.error("jsPDF PubSub Error",u.message,u)}d[1]&&i.push(l)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Rc(s){if(!(this instanceof Rc))return new Rc(s);var t="opacity,stroke-opacity".split(",");for(var r in s)s.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=s[r]);this.id="",this.objectNumber=-1}function Vg(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function io(s,t,r,a,i){if(!(this instanceof io))return new io(s,t,r,a,i);this.type=s==="axial"?2:3,this.coords=t,this.colors=r,Vg.call(this,a,i)}function Uo(s,t,r,a,i){if(!(this instanceof Uo))return new Uo(s,t,r,a,i);this.boundingBox=s,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Vg.call(this,a,i)}function jt(s){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],i=arguments[2],l=arguments[3],d=[],u=1,h=16,p="S",v=null;bs(s=s||{})==="object"&&(r=s.orientation,a=s.unit||a,i=s.format||i,l=s.compress||s.compressPdf||l,(v=s.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),u=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(h=s.floatPrecision),p=s.defaultPathOperation||"S"),d=s.filters||(l===!0?["FlateEncode"]:d),a=a||"mm",r=(""+(r||"P")).toLowerCase();var y=s.putOnlyUsedFonts||!1,N={},g={internal:{},__private__:{}};g.__private__.PubSub=bf;var C="1.3",j=g.__private__.getPdfVersion=function(){return C};g.__private__.setPdfVersion=function(x){C=x};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return T};var A=g.__private__.getPageFormat=function(x){return T[x]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},$=S.COMPAT;function V(){this.saveGraphicsState(),G(new vt(Je,0,0,-Je,0,wa()*Je).toString()+" cm"),this.setFontSize(this.getFontSize()/Je),p="n",$=S.ADVANCED}function K(){this.restoreGraphicsState(),p="S",$=S.COMPAT}var me=g.__private__.combineFontStyleAndFontWeight=function(x,I){if(x=="bold"&&I=="normal"||x=="bold"&&I==400||x=="normal"&&I=="italic"||x=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(x=I==400||I==="normal"?x==="italic"?"italic":"normal":I!=700&&I!=="bold"||x!=="normal"?(I==700?"bold":I)+""+x:"bold"),x};g.advancedAPI=function(x){var I=$===S.COMPAT;return I&&V.call(this),typeof x!="function"||(x(this),I&&K.call(this)),this},g.compatAPI=function(x){var I=$===S.ADVANCED;return I&&K.call(this),typeof x!="function"||(x(this),I&&V.call(this)),this},g.isAdvancedAPI=function(){return $===S.ADVANCED};var le,X=function(x){if($!==S.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=g.roundToPrecision=g.__private__.roundToPrecision=function(x,I){var te=t||I;if(isNaN(x)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(te).replace(/0+$/,"")};le=g.hpf=g.__private__.hpf=typeof h=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,h)}:h==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,16)};var je=g.f2=g.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return ee(x,2)},R=g.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return ee(x,3)},z=g.scale=g.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return $===S.COMPAT?x*Je:$===S.ADVANCED?x:void 0},q=function(x){return $===S.COMPAT?wa()-x:$===S.ADVANCED?x:void 0},B=function(x){return z(q(x))};g.__private__.setPrecision=g.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var ge,ue="00000000000000000000000000000000",be=g.__private__.getFileId=function(){return ue},ne=g.__private__.setFileId=function(x){return ue=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Js=new Ho(v.userPermissions,v.userPassword,v.ownerPassword,ue)),ue};g.setFileId=function(x){return ne(x),this},g.getFileId=function(){return be()};var ve=g.__private__.convertDateToPDFDate=function(x){var I=x.getTimezoneOffset(),te=I<0?"+":"-",pe=Math.floor(Math.abs(I/60)),ke=Math.abs(I%60),Me=[te,Z(pe),"'",Z(ke),"'"].join("");return["D:",x.getFullYear(),Z(x.getMonth()+1),Z(x.getDate()),Z(x.getHours()),Z(x.getMinutes()),Z(x.getSeconds()),Me].join("")},ae=g.__private__.convertPDFDateToDate=function(x){var I=parseInt(x.substr(2,4),10),te=parseInt(x.substr(6,2),10)-1,pe=parseInt(x.substr(8,2),10),ke=parseInt(x.substr(10,2),10),Me=parseInt(x.substr(12,2),10),Ue=parseInt(x.substr(14,2),10);return new Date(I,te,pe,ke,Me,Ue,0)},fe=g.__private__.setCreationDate=function(x){var I;if(x===void 0&&(x=new Date),x instanceof Date)I=ve(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=x}return ge=I},E=g.__private__.getCreationDate=function(x){var I=ge;return x==="jsDate"&&(I=ae(ge)),I};g.setCreationDate=function(x){return fe(x),this},g.getCreationDate=function(x){return E(x)};var W,Z=g.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},Q=g.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},re=0,de=[],Ne=[],J=0,oe=[],ie=[],Te=!1,se=Ne,Ae=function(){re=0,J=0,Ne=[],de=[],oe=[],Rr=Ye(),Or=Ye()};g.__private__.setCustomOutputDestination=function(x){Te=!0,se=x};var xe=function(x){Te||(se=x)};g.__private__.resetCustomOutputDestination=function(){Te=!1,se=Ne};var G=g.__private__.out=function(x){return x=x.toString(),J+=x.length+1,se.push(x),se},Ve=g.__private__.write=function(x){return G(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},et=g.__private__.getArrayBuffer=function(x){for(var I=x.length,te=new ArrayBuffer(I),pe=new Uint8Array(te);I--;)pe[I]=x.charCodeAt(I);return te},Be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Be};var We=s.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(x){return We=$===S.ADVANCED?x/Je:x,this};var Ze,Ge=g.__private__.getFontSize=g.getFontSize=function(){return $===S.COMPAT?We:We*Je},ct=s.R2L||!1;g.__private__.setR2L=g.setR2L=function(x){return ct=x,this},g.__private__.getR2L=g.getR2L=function(){return ct};var wt,St=g.__private__.setZoomMode=function(x){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Ze=x;else if(isNaN(x)){if(I.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Ze=x}else Ze=parseInt(x,10)};g.__private__.getZoomMode=function(){return Ze};var kt,Wt=g.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');wt=x};g.__private__.getPageMode=function(){return wt};var Yt=g.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');kt=x};g.__private__.getLayoutMode=function(){return kt},g.__private__.setDisplayMode=g.setDisplayMode=function(x,I,te){return St(x),Yt(I),Wt(te),this};var ut={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(x){if(Object.keys(ut).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ut[x]},g.__private__.getDocumentProperties=function(){return ut},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(x){for(var I in ut)ut.hasOwnProperty(I)&&x[I]&&(ut[I]=x[I]);return this},g.__private__.setDocumentProperty=function(x,I){if(Object.keys(ut).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ut[x]=I};var Dt,Je,Ys,Vt,kr,Qt={},ws={},rr=[],ss={},Rn={},js={},Mr={},dn=null,Ps=0,Ct=[],rs=new bf(g),Sn=s.hotfixes||[],Is={},nr={},Ir=[],vt=function x(I,te,pe,ke,Me,Ue){if(!(this instanceof x))return new x(I,te,pe,ke,Me,Ue);isNaN(I)&&(I=1),isNaN(te)&&(te=0),isNaN(pe)&&(pe=0),isNaN(ke)&&(ke=1),isNaN(Me)&&(Me=0),isNaN(Ue)&&(Ue=0),this._matrix=[I,te,pe,ke,Me,Ue]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(le).join(x)},vt.prototype.multiply=function(x){var I=x.sx*this.sx+x.shy*this.shx,te=x.sx*this.shy+x.shy*this.sy,pe=x.shx*this.sx+x.sy*this.shx,ke=x.shx*this.shy+x.sy*this.sy,Me=x.tx*this.sx+x.ty*this.shx+this.tx,Ue=x.tx*this.shy+x.ty*this.sy+this.ty;return new vt(I,te,pe,ke,Me,Ue)},vt.prototype.decompose=function(){var x=this.sx,I=this.shy,te=this.shx,pe=this.sy,ke=this.tx,Me=this.ty,Ue=Math.sqrt(x*x+I*I),Qe=(x/=Ue)*te+(I/=Ue)*pe;te-=x*Qe,pe-=I*Qe;var nt=Math.sqrt(te*te+pe*pe);return Qe/=nt,x*(pe/=nt)<I*(te/=nt)&&(x=-x,I=-I,Qe=-Qe,Ue=-Ue),{scale:new vt(Ue,0,0,nt,0,0),translate:new vt(1,0,0,1,ke,Me),rotate:new vt(x,I,-I,x,0,0),skew:new vt(1,0,Qe,1,0,0)}},vt.prototype.toString=function(x){return this.join(" ")},vt.prototype.inversed=function(){var x=this.sx,I=this.shy,te=this.shx,pe=this.sy,ke=this.tx,Me=this.ty,Ue=1/(x*pe-I*te),Qe=pe*Ue,nt=-I*Ue,Rt=-te*Ue,Et=x*Ue;return new vt(Qe,nt,Rt,Et,-Qe*ke-Rt*Me,-nt*ke-Et*Me)},vt.prototype.applyToPoint=function(x){var I=x.x*this.sx+x.y*this.shx+this.tx,te=x.x*this.shy+x.y*this.sy+this.ty;return new Ua(I,te)},vt.prototype.applyToRectangle=function(x){var I=this.applyToPoint(x),te=this.applyToPoint(new Ua(x.x+x.w,x.y+x.h));return new pn(I.x,I.y,te.x-I.x,te.y-I.y)},vt.prototype.clone=function(){var x=this.sx,I=this.shy,te=this.shx,pe=this.sy,ke=this.tx,Me=this.ty;return new vt(x,I,te,pe,ke,Me)},g.Matrix=vt;var Kr=g.matrixMult=function(x,I){return I.multiply(x)},hn=new vt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=hn;var gr=function(x,I){if(!Rn[x]){var te=(I instanceof io?"Sh":"P")+(Object.keys(ss).length+1).toString(10);I.id=te,Rn[x]=te,ss[te]=I,rs.publish("addPattern",I)}};g.ShadingPattern=io,g.TilingPattern=Uo,g.addShadingPattern=function(x,I){return X("addShadingPattern()"),gr(x,I),this},g.beginTilingPattern=function(x){X("beginTilingPattern()"),Vi(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},g.endTilingPattern=function(x,I){X("endTilingPattern()"),I.stream=ie[W].join(`
`),gr(x,I),rs.publish("endTilingPattern",I),Ir.pop().restore()};var is=g.__private__.newObject=function(){var x=Ye();return lr(x,!0),x},Ye=g.__private__.newObjectDeferred=function(){return re++,de[re]=function(){return J},re},lr=function(x,I){return I=typeof I=="boolean"&&I,de[x]=J,I&&G(x+" 0 obj"),x},On=g.__private__.newAdditionalObject=function(){var x={objId:Ye(),content:""};return oe.push(x),x},Rr=Ye(),Or=Ye(),he=g.__private__.decodeColorString=function(x){var I=x.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var te=parseFloat(I[0]);I=[te,te,te,"r"]}for(var pe="#",ke=0;ke<3;ke++)pe+=("0"+Math.floor(255*parseFloat(I[ke])).toString(16)).slice(-2);return pe},Re=g.__private__.encodeColorString=function(x){var I;typeof x=="string"&&(x={ch1:x});var te=x.ch1,pe=x.ch2,ke=x.ch3,Me=x.ch4,Ue=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var Qe=new Ug(te);if(Qe.ok)te=Qe.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var nt=parseInt(te.substr(1),16);te=nt>>16&255,pe=nt>>8&255,ke=255&nt}if(pe===void 0||Me===void 0&&te===pe&&pe===ke)if(typeof te=="string")I=te+" "+Ue[0];else switch(x.precision){case 2:I=je(te/255)+" "+Ue[0];break;case 3:default:I=R(te/255)+" "+Ue[0]}else if(Me===void 0||bs(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return I=["1.","1.","1.",Ue[1]].join(" ");if(typeof te=="string")I=[te,pe,ke,Ue[1]].join(" ");else switch(x.precision){case 2:I=[je(te/255),je(pe/255),je(ke/255),Ue[1]].join(" ");break;default:case 3:I=[R(te/255),R(pe/255),R(ke/255),Ue[1]].join(" ")}}else if(typeof te=="string")I=[te,pe,ke,Me,Ue[2]].join(" ");else switch(x.precision){case 2:I=[je(te),je(pe),je(ke),je(Me),Ue[2]].join(" ");break;case 3:default:I=[R(te),R(pe),R(ke),R(Me),Ue[2]].join(" ")}return I},$e=g.__private__.getFilters=function(){return d},st=g.__private__.putStream=function(x){var I=(x=x||{}).data||"",te=x.filters||$e(),pe=x.alreadyAppliedFilters||[],ke=x.addLength1||!1,Me=I.length,Ue=x.objectId,Qe=function(xr){return xr};if(v!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(Qe=Js.encryptor(Ue,0));var nt={};te===!0&&(te=["FlateEncode"]);var Rt=x.additionalKeyValues||[],Et=(nt=jt.API.processDataByFilters!==void 0?jt.API.processDataByFilters(I,te):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(nt.data.length!==0&&(Rt.push({key:"Length",value:nt.data.length}),ke===!0&&Rt.push({key:"Length1",value:Me})),Et.length!=0)if(Et.split("/").length-1==1)Rt.push({key:"Filter",value:Et});else{Rt.push({key:"Filter",value:"["+Et+"]"});for(var Xt=0;Xt<Rt.length;Xt+=1)if(Rt[Xt].key==="DecodeParms"){for(var Ss=[],Ls=0;Ls<nt.reverseChain.split("/").length-1;Ls+=1)Ss.push("null");Ss.push(Rt[Xt].value),Rt[Xt].value="["+Ss.join(" ")+"]"}}G("<<");for(var Us=0;Us<Rt.length;Us++)G("/"+Rt[Us].key+" "+Rt[Us].value);G(">>"),nt.data.length!==0&&(G("stream"),G(Qe(nt.data)),G("endstream"))},ht=g.__private__.putPage=function(x){var I=x.number,te=x.data,pe=x.objId,ke=x.contentsObjId;lr(pe,!0),G("<</Type /Page"),G("/Parent "+x.rootDictionaryObjId+" 0 R"),G("/Resources "+x.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(le(x.mediaBox.bottomLeftX))+" "+parseFloat(le(x.mediaBox.bottomLeftY))+" "+le(x.mediaBox.topRightX)+" "+le(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&G("/CropBox ["+le(x.cropBox.bottomLeftX)+" "+le(x.cropBox.bottomLeftY)+" "+le(x.cropBox.topRightX)+" "+le(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&G("/BleedBox ["+le(x.bleedBox.bottomLeftX)+" "+le(x.bleedBox.bottomLeftY)+" "+le(x.bleedBox.topRightX)+" "+le(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&G("/TrimBox ["+le(x.trimBox.bottomLeftX)+" "+le(x.trimBox.bottomLeftY)+" "+le(x.trimBox.topRightX)+" "+le(x.trimBox.topRightY)+"]"),x.artBox!==null&&G("/ArtBox ["+le(x.artBox.bottomLeftX)+" "+le(x.artBox.bottomLeftY)+" "+le(x.artBox.topRightX)+" "+le(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&G("/UserUnit "+x.userUnit),rs.publish("putPage",{objId:pe,pageContext:Ct[I],pageNumber:I,page:te}),G("/Contents "+ke+" 0 R"),G(">>"),G("endobj");var Me=te.join(`
`);return $===S.ADVANCED&&(Me+=`
Q`),lr(ke,!0),st({data:Me,filters:$e(),objectId:ke}),G("endobj"),pe},$t=g.__private__.putPages=function(){var x,I,te=[];for(x=1;x<=Ps;x++)Ct[x].objId=Ye(),Ct[x].contentsObjId=Ye();for(x=1;x<=Ps;x++)te.push(ht({number:x,data:ie[x],objId:Ct[x].objId,contentsObjId:Ct[x].contentsObjId,mediaBox:Ct[x].mediaBox,cropBox:Ct[x].cropBox,bleedBox:Ct[x].bleedBox,trimBox:Ct[x].trimBox,artBox:Ct[x].artBox,userUnit:Ct[x].userUnit,rootDictionaryObjId:Rr,resourceDictionaryObjId:Or}));lr(Rr,!0),G("<</Type /Pages");var pe="/Kids [";for(I=0;I<Ps;I++)pe+=te[I]+" 0 R ";G(pe+"]"),G("/Count "+Ps),G(">>"),G("endobj"),rs.publish("postPutPages")},Nt=function(x){rs.publish("putFont",{font:x,out:G,newObject:is,putStream:st}),x.isAlreadyPutted!==!0&&(x.objectNumber=is(),G("<<"),G("/Type /Font"),G("/BaseFont /"+$o(x.postScriptName)),G("/Subtype /Type1"),typeof x.encoding=="string"&&G("/Encoding /"+x.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},Lt=function(){for(var x in Qt)Qt.hasOwnProperty(x)&&(y===!1||y===!0&&N.hasOwnProperty(x))&&Nt(Qt[x])},At=function(x){x.objectNumber=is();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[le(x.x),le(x.y),le(x.x+x.width),le(x.y+x.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var te=x.pages[1].join(`
`);st({data:te,additionalKeyValues:I,objectId:x.objectNumber}),G("endobj")},Zt=function(){for(var x in Is)Is.hasOwnProperty(x)&&At(Is[x])},Ot=function(x,I){var te,pe=[],ke=1/(I-1);for(te=0;te<1;te+=ke)pe.push(te);if(pe.push(1),x[0].offset!=0){var Me={offset:0,color:x[0].color};x.unshift(Me)}if(x[x.length-1].offset!=1){var Ue={offset:1,color:x[x.length-1].color};x.push(Ue)}for(var Qe="",nt=0,Rt=0;Rt<pe.length;Rt++){for(te=pe[Rt];te>x[nt+1].offset;)nt++;var Et=x[nt].offset,Xt=(te-Et)/(x[nt+1].offset-Et),Ss=x[nt].color,Ls=x[nt+1].color;Qe+=Q(Math.round((1-Xt)*Ss[0]+Xt*Ls[0]).toString(16))+Q(Math.round((1-Xt)*Ss[1]+Xt*Ls[1]).toString(16))+Q(Math.round((1-Xt)*Ss[2]+Xt*Ls[2]).toString(16))}return Qe.trim()},yt=function(x,I){I||(I=21);var te=is(),pe=Ot(x.colors,I),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+I+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st({data:pe,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),G("endobj"),x.objectNumber=is(),G("<< /ShadingType "+x.type),G("/ColorSpace /DeviceRGB");var Me="/Coords ["+le(parseFloat(x.coords[0]))+" "+le(parseFloat(x.coords[1]))+" ";x.type===2?Me+=le(parseFloat(x.coords[2]))+" "+le(parseFloat(x.coords[3])):Me+=le(parseFloat(x.coords[2]))+" "+le(parseFloat(x.coords[3]))+" "+le(parseFloat(x.coords[4]))+" "+le(parseFloat(x.coords[5])),G(Me+="]"),x.matrix&&G("/Matrix ["+x.matrix.toString()+"]"),G("/Function "+te+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},dt=function(x,I){var te=Ye(),pe=is();I.push({resourcesOid:te,objectOid:pe}),x.objectNumber=pe;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+x.boundingBox.map(le).join(" ")+"]"}),ke.push({key:"XStep",value:le(x.xStep)}),ke.push({key:"YStep",value:le(x.yStep)}),ke.push({key:"Resources",value:te+" 0 R"}),x.matrix&&ke.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),st({data:x.stream,additionalKeyValues:ke,objectId:x.objectNumber}),G("endobj")},ts=function(x){var I;for(I in ss)ss.hasOwnProperty(I)&&(ss[I]instanceof io?yt(ss[I]):ss[I]instanceof Uo&&dt(ss[I],x))},_s=function(x){for(var I in x.objectNumber=is(),G("<<"),x)switch(I){case"opacity":G("/ca "+je(x[I]));break;case"stroke-opacity":G("/CA "+je(x[I]))}G(">>"),G("endobj")},Rs=function(){var x;for(x in js)js.hasOwnProperty(x)&&_s(js[x])},Hs=function(){for(var x in G("/XObject <<"),Is)Is.hasOwnProperty(x)&&Is[x].objectNumber>=0&&G("/"+x+" "+Is[x].objectNumber+" 0 R");rs.publish("putXobjectDict"),G(">>")},Ft=function(){Js.oid=is(),G("<<"),G("/Filter /Standard"),G("/V "+Js.v),G("/R "+Js.r),G("/U <"+Js.toHexString(Js.U)+">"),G("/O <"+Js.toHexString(Js.O)+">"),G("/P "+Js.P),G(">>"),G("endobj")},Kt=function(){for(var x in G("/Font <<"),Qt)Qt.hasOwnProperty(x)&&(y===!1||y===!0&&N.hasOwnProperty(x))&&G("/"+x+" "+Qt[x].objectNumber+" 0 R");G(">>")},ds=function(){if(Object.keys(ss).length>0){for(var x in G("/Shading <<"),ss)ss.hasOwnProperty(x)&&ss[x]instanceof io&&ss[x].objectNumber>=0&&G("/"+x+" "+ss[x].objectNumber+" 0 R");rs.publish("putShadingPatternDict"),G(">>")}},Jr=function(x){if(Object.keys(ss).length>0){for(var I in G("/Pattern <<"),ss)ss.hasOwnProperty(I)&&ss[I]instanceof g.TilingPattern&&ss[I].objectNumber>=0&&ss[I].objectNumber<x&&G("/"+I+" "+ss[I].objectNumber+" 0 R");rs.publish("putTilingPatternDict"),G(">>")}},Mt=function(){if(Object.keys(js).length>0){var x;for(x in G("/ExtGState <<"),js)js.hasOwnProperty(x)&&js[x].objectNumber>=0&&G("/"+x+" "+js[x].objectNumber+" 0 R");rs.publish("putGStateDict"),G(">>")}},Pt=function(x){lr(x.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Kt(),ds(),Jr(x.objectOid),Mt(),Hs(),G(">>"),G("endobj")},Dn=function(){var x=[];Lt(),Rs(),Zt(),ts(x),rs.publish("putResources"),x.forEach(Pt),Pt({resourcesOid:Or,objectOid:Number.MAX_SAFE_INTEGER}),rs.publish("postPutResources")},un=function(){rs.publish("putAdditionalObjects");for(var x=0;x<oe.length;x++){var I=oe[x];lr(I.objId,!0),G(I.content),G("endobj")}rs.publish("postPutAdditionalObjects")},Dr=function(x){ws[x.fontName]=ws[x.fontName]||{},ws[x.fontName][x.fontStyle]=x.id},fn=function(x,I,te,pe,ke){var Me={id:"F"+(Object.keys(Qt).length+1).toString(10),postScriptName:x,fontName:I,fontStyle:te,encoding:pe,isStandardFont:ke||!1,metadata:{}};return rs.publish("addFont",{font:Me,instance:this}),Qt[Me.id]=Me,Dr(Me),Me.id},pt=function(x){for(var I=0,te=Be.length;I<te;I++){var pe=fn.call(this,x[I][0],x[I][1],x[I][2],Be[I][3],!0);y===!1&&(N[pe]=!0);var ke=x[I][0].split("-");Dr({id:pe,fontName:ke[0],fontStyle:ke[1]||""})}rs.publish("addFonts",{fonts:Qt,dictionary:ws})},Bt=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(pe){var I=pe.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var te="Error in function "+I.split(`
`)[0].split("<")[0]+": "+pe.message;if(!_t.console)throw new Error(te);_t.console.error(te,pe),_t.alert&&alert(te)}},x.foo.bar=x,x.foo},Fn=function(x,I){var te,pe,ke,Me,Ue,Qe,nt,Rt,Et;if(ke=(I=I||{}).sourceEncoding||"Unicode",Ue=I.outputEncoding,(I.autoencode||Ue)&&Qt[Dt].metadata&&Qt[Dt].metadata[ke]&&Qt[Dt].metadata[ke].encoding&&(Me=Qt[Dt].metadata[ke].encoding,!Ue&&Qt[Dt].encoding&&(Ue=Qt[Dt].encoding),!Ue&&Me.codePages&&(Ue=Me.codePages[0]),typeof Ue=="string"&&(Ue=Me[Ue]),Ue)){for(nt=!1,Qe=[],te=0,pe=x.length;te<pe;te++)(Rt=Ue[x.charCodeAt(te)])?Qe.push(String.fromCharCode(Rt)):Qe.push(x[te]),Qe[te].charCodeAt(0)>>8&&(nt=!0);x=Qe.join("")}for(te=x.length;nt===void 0&&te!==0;)x.charCodeAt(te-1)>>8&&(nt=!0),te--;if(!nt)return x;for(Qe=I.noBOM?[]:[254,255],te=0,pe=x.length;te<pe;te++){if((Et=(Rt=x.charCodeAt(te))>>8)>>8)throw new Error("Character at position "+te+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(Et),Qe.push(Rt-(Et<<8))}return String.fromCharCode.apply(void 0,Qe)},Ks=g.__private__.pdfEscape=g.pdfEscape=function(x,I){return Fn(x,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Os=g.__private__.beginPage=function(x){ie[++Ps]=[],Ct[Ps]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},zn(Ps),xe(ie[W])},Xa=function(x,I){var te,pe,ke;switch(r=I||r,typeof x=="string"&&(te=A(x.toLowerCase()),Array.isArray(te)&&(pe=te[0],ke=te[1])),Array.isArray(x)&&(pe=x[0]*Je,ke=x[1]*Je),isNaN(pe)&&(pe=i[0],ke=i[1]),(pe>14400||ke>14400)&&(Cs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),ke=Math.min(14400,ke)),i=[pe,ke],r.substr(0,1)){case"l":ke>pe&&(i=[ke,pe]);break;case"p":pe>ke&&(i=[ke,pe])}Os(i),No(ri),G(en),Wi!==0&&G(Wi+" J"),Fr!==0&&G(Fr+" j"),rs.publish("addPage",{pageNumber:Ps})},ma=function(x){x>0&&x<=Ps&&(ie.splice(x,1),Ct.splice(x,1),Ps--,W>Ps&&(W=Ps),this.setPage(W))},zn=function(x){x>0&&x<=Ps&&(W=x)},Ms=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ie.length-1},Bn=function(x,I,te){var pe,ke=void 0;return te=te||{},x=x!==void 0?x:Qt[Dt].fontName,I=I!==void 0?I:Qt[Dt].fontStyle,pe=x.toLowerCase(),ws[pe]!==void 0&&ws[pe][I]!==void 0?ke=ws[pe][I]:ws[x]!==void 0&&ws[x][I]!==void 0?ke=ws[x][I]:te.disableWarning===!1&&Cs.warn("Unable to look up font label for font '"+x+"', '"+I+"'. Refer to getFontList() for available fonts."),ke||te.noFallback||(ke=ws.times[I])==null&&(ke=ws.times.normal),ke},za=g.__private__.putInfo=function(){var x=is(),I=function(pe){return pe};for(var te in v!==null&&(I=Js.encryptor(x,0)),G("<<"),G("/Producer ("+Ks(I("jsPDF "+jt.version))+")"),ut)ut.hasOwnProperty(te)&&ut[te]&&G("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+Ks(I(ut[te]))+")");G("/CreationDate ("+Ks(I(ge))+")"),G(">>"),G("endobj")},Jn=g.__private__.putCatalog=function(x){var I=(x=x||{}).rootDictionaryObjId||Rr;switch(is(),G("<<"),G("/Type /Catalog"),G("/Pages "+I+" 0 R"),Ze||(Ze="fullwidth"),Ze){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Ze;te.substr(te.length-1)==="%"&&(Ze=parseInt(Ze)/100),typeof Ze=="number"&&G("/OpenAction [3 0 R /XYZ null null "+je(Ze)+"]")}switch(kt||(kt="continuous"),kt){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}wt&&G("/PageMode /"+wt),rs.publish("putCatalog"),G(">>"),G("endobj")},Fi=g.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(re+1)),G("/Root "+re+" 0 R"),G("/Info "+(re-1)+" 0 R"),v!==null&&G("/Encrypt "+Js.oid+" 0 R"),G("/ID [ <"+ue+"> <"+ue+"> ]"),G(">>")},Ba=g.__private__.putHeader=function(){G("%PDF-"+C),G("%ºß¬à")},zi=g.__private__.putXRef=function(){var x="0000000000";G("xref"),G("0 "+(re+1)),G("0000000000 65535 f ");for(var I=1;I<=re;I++)typeof de[I]=="function"?G((x+de[I]()).slice(-10)+" 00000 n "):de[I]!==void 0?G((x+de[I]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},kn=g.__private__.buildDocument=function(){Ae(),xe(Ne),rs.publish("buildDocument"),Ba(),$t(),un(),Dn(),v!==null&&Ft(),za(),Jn();var x=J;return zi(),Fi(),G("startxref"),G(""+x),G("%%EOF"),xe(ie[W]),Ne.join(`
`)},Qn=g.__private__.getBlob=function(x){return new Blob([et(x)],{type:"application/pdf"})},pa=g.output=g.__private__.output=Bt(function(x,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",x){case void 0:return kn();case"save":g.save(I.filename);break;case"arraybuffer":return et(kn());case"blob":return Qn(kn());case"bloburi":case"bloburl":if(_t.URL!==void 0&&typeof _t.URL.createObjectURL=="function")return _t.URL&&_t.URL.createObjectURL(Qn(kn()))||void 0;Cs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",pe=kn();try{te=ch(pe)}catch{te=ch(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+I.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(_t)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(ke=I.pdfObjectUrl,Me="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",Qe=_t.open();return Qe!==null&&Qe.document.write(Ue),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(_t)==="[object Window]"){var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Rt=_t.open();if(Rt!==null){Rt.document.write(nt);var Et=this;Rt.document.documentElement.querySelector("#pdfViewer").onload=function(){Rt.document.title=I.filename,Rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Et.output("bloburl"))}}return Rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(_t)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Ss=_t.open();if(Ss!==null&&(Ss.document.write(Xt),Ss.document.title=I.filename),Ss||typeof safari>"u")return Ss;break;case"datauri":case"dataurl":return _t.document.location.href=this.output("datauristring",I);default:return null}}),ei=function(x){return Array.isArray(Sn)===!0&&Sn.indexOf(x)>-1};switch(a){case"pt":Je=1;break;case"mm":Je=72/25.4;break;case"cm":Je=72/2.54;break;case"in":Je=72;break;case"px":Je=ei("px_scaling")==1?.75:96/72;break;case"pc":case"em":Je=12;break;case"ex":Je=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Je=a}var Js=null;fe(),ne();var bo=function(x){return v!==null?Js.encryptor(x,0):function(I){return I}},ti=g.__private__.getPageInfo=g.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ct[x].objId,pageNumber:x,pageContext:Ct[x]}},Tt=g.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in Ct)if(Ct[I].objId===x)break;return ti(I)},It=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Ct[W].objId,pageNumber:W,pageContext:Ct[W]}};g.addPage=function(){return Xa.apply(this,arguments),this},g.setPage=function(){return zn.apply(this,arguments),xe.call(this,ie[W]),this},g.insertPage=function(x){return this.addPage(),this.movePage(W,x),this},g.movePage=function(x,I){var te,pe;if(x>I){te=ie[x],pe=Ct[x];for(var ke=x;ke>I;ke--)ie[ke]=ie[ke-1],Ct[ke]=Ct[ke-1];ie[I]=te,Ct[I]=pe,this.setPage(I)}else if(x<I){te=ie[x],pe=Ct[x];for(var Me=x;Me<I;Me++)ie[Me]=ie[Me+1],Ct[Me]=Ct[Me+1];ie[I]=te,Ct[I]=pe,this.setPage(I)}return this},g.deletePage=function(){return ma.apply(this,arguments),this},g.__private__.text=g.text=function(x,I,te,pe,ke){var Me,Ue,Qe,nt,Rt,Et,Xt,Ss,Ls,Us=(pe=pe||{}).scope||this;if(typeof x=="number"&&typeof I=="number"&&(typeof te=="string"||Array.isArray(te))){var xr=te;te=I,I=x,x=xr}if(arguments[3]instanceof vt?(X("The transform parameter of text() with a Matrix value"),Ls=ke):(Qe=arguments[4],nt=arguments[5],bs(Xt=arguments[3])==="object"&&Xt!==null||(typeof Qe=="string"&&(nt=Qe,Qe=null),typeof Xt=="string"&&(nt=Xt,Xt=null),typeof Xt=="number"&&(Qe=Xt,Xt=null),pe={flags:Xt,angle:Qe,align:nt})),isNaN(I)||isNaN(te)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Us;var Qs="",Cn=!1,As=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:$a,Cr=Us.internal.scaleFactor;function ko(us){return us=us.split("	").join(Array(pe.TabLen||9).join(" ")),Ks(us,Xt)}function tn(us){for(var fs,zs=us.concat(),ms=[],Un=zs.length;Un--;)typeof(fs=zs.shift())=="string"?ms.push(fs):Array.isArray(us)&&(fs.length===1||fs[1]===void 0&&fs[2]===void 0)?ms.push(fs[0]):ms.push([fs[0],fs[1],fs[2]]);return ms}function Yi(us,fs){var zs;if(typeof us=="string")zs=fs(us)[0];else if(Array.isArray(us)){for(var ms,Un,ui=us.concat(),Wn=[],Po=ui.length;Po--;)typeof(ms=ui.shift())=="string"?Wn.push(fs(ms)[0]):Array.isArray(ms)&&typeof ms[0]=="string"&&(Un=fs(ms[0],ms[1],ms[2]),Wn.push([Un[0],Un[1],Un[2]]));zs=Wn}return zs}var Pn=!1,Ki=!0;if(typeof x=="string")Pn=!0;else if(Array.isArray(x)){var ta=x.concat();Ue=[];for(var Wa,Ws=ta.length;Ws--;)(typeof(Wa=ta.shift())!="string"||Array.isArray(Wa)&&typeof Wa[0]!="string")&&(Ki=!1);Pn=Ki}if(Pn===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var li=We/Us.internal.scaleFactor,sn=li*(As-1);switch(pe.baseline){case"bottom":te-=sn;break;case"top":te+=li-sn;break;case"hanging":te+=li-2*sn;break;case"middle":te+=li/2-sn}if((Et=pe.maxWidth||0)>0&&(typeof x=="string"?x=Us.splitTextToSize(x,Et):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(us,fs){return us.concat(Us.splitTextToSize(fs,Et))},[]))),Me={text:x,x:I,y:te,options:pe,mutex:{pdfEscape:Ks,activeFontKey:Dt,fonts:Qt,activeFontSize:We}},rs.publish("preProcessText",Me),x=Me.text,Qe=(pe=Me.options).angle,!(Ls instanceof vt)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,pe.rotationDirection===0&&(Qe=-Qe),$===S.ADVANCED&&(Qe=-Qe);var sa=Math.cos(Qe),Ji=Math.sin(Qe);Ls=new vt(sa,Ji,-Ji,sa,0,0)}else Qe&&Qe instanceof vt&&(Ls=Qe);$!==S.ADVANCED||Ls||(Ls=hn),(Rt=pe.charSpace||ni)!==void 0&&(Qs+=le(z(Rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ss=pe.horizontalScale)!==void 0&&(Qs+=le(100*Ss)+` Tz
`),pe.lang;var vr=-1,pl=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,rn=Us.internal.getCurrentPageInfo().pageContext;switch(pl){case 0:case!1:case"fill":vr=0;break;case 1:case!0:case"stroke":vr=1;break;case 2:case"fillThenStroke":vr=2;break;case 3:case"invisible":vr=3;break;case 4:case"fillAndAddForClipping":vr=4;break;case 5:case"strokeAndAddPathForClipping":vr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vr=6;break;case 7:case"addToPathForClipping":vr=7}var Co=rn.usedRenderingMode!==void 0?rn.usedRenderingMode:-1;vr!==-1?Qs+=vr+` Tr
`:Co!==-1&&(Qs+=`0 Tr
`),vr!==-1&&(rn.usedRenderingMode=vr),nt=pe.align||"left";var cr,ci=We*As,gn=Us.internal.pageSize.getWidth(),Va=Qt[Dt];Rt=pe.charSpace||ni,Et=pe.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var ra=[],na=function(us){return Us.getStringUnitWidth(us,{font:Va,charSpace:Rt,fontSize:We,doKerning:!1})*We/Cr};if(Object.prototype.toString.call(x)==="[object Array]"){var dr;Ue=tn(x),nt!=="left"&&(cr=Ue.map(na));var hr,Ln=0;if(nt==="right"){I-=cr[0],x=[],Ws=Ue.length;for(var zr=0;zr<Ws;zr++)zr===0?(hr=$s(I),dr=Xr(te)):(hr=z(Ln-cr[zr]),dr=-ci),x.push([Ue[zr],hr,dr]),Ln=cr[zr]}else if(nt==="center"){I-=cr[0]/2,x=[],Ws=Ue.length;for(var xn=0;xn<Ws;xn++)xn===0?(hr=$s(I),dr=Xr(te)):(hr=z((Ln-cr[xn])/2),dr=-ci),x.push([Ue[xn],hr,dr]),Ln=cr[xn]}else if(nt==="left"){x=[],Ws=Ue.length;for(var Na=0;Na<Ws;Na++)x.push(Ue[Na])}else if(nt==="justify"&&Va.encoding==="Identity-H"){x=[],Ws=Ue.length,Et=Et!==0?Et:gn;for(var qn=0,Fs=0;Fs<Ws;Fs++)if(dr=Fs===0?Xr(te):-ci,hr=Fs===0?$s(I):qn,Fs<Ws-1){var ja=z((Et-cr[Fs])/(Ue[Fs].split(" ").length-1)),Pr=Ue[Fs].split(" ");x.push([Pr[0]+" ",hr,dr]),qn=0;for(var nn=1;nn<Pr.length;nn++){var di=(na(Pr[nn-1]+" "+Pr[nn])-na(Pr[nn]))*Cr+ja;nn==Pr.length-1?x.push([Pr[nn],di,0]):x.push([Pr[nn]+" ",di,0]),qn-=di}}else x.push([Ue[Fs],hr,dr]);x.push(["",qn,0])}else{if(nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Ws=Ue.length,Et=Et!==0?Et:gn,Fs=0;Fs<Ws;Fs++)dr=Fs===0?Xr(te):-ci,hr=Fs===0?$s(I):0,Fs<Ws-1?ra.push(le(z((Et-cr[Fs])/(Ue[Fs].split(" ").length-1)))):ra.push(0),x.push([Ue[Fs],hr,dr])}}var Qi=typeof pe.R2L=="boolean"?pe.R2L:ct;Qi===!0&&(x=Yi(x,function(us,fs,zs){return[us.split("").reverse().join(""),fs,zs]})),Me={text:x,x:I,y:te,options:pe,mutex:{pdfEscape:Ks,activeFontKey:Dt,fonts:Qt,activeFontSize:We}},rs.publish("postProcessText",Me),x=Me.text,Cn=Me.mutex.isHex||!1;var Xi=Qt[Dt].encoding;Xi!=="WinAnsiEncoding"&&Xi!=="StandardEncoding"||(x=Yi(x,function(us,fs,zs){return[ko(us),fs,zs]})),Ue=tn(x),x=[];for(var yr,Hn,_a,$n=0,hi=1,Sa=Array.isArray(Ue[0])?hi:$n,ka="",aa=function(us,fs,zs){var ms="";return zs instanceof vt?(zs=typeof pe.angle=="number"?Kr(zs,new vt(1,0,0,1,us,fs)):Kr(new vt(1,0,0,1,us,fs),zs),$===S.ADVANCED&&(zs=Kr(new vt(1,0,0,-1,0,0),zs)),ms=zs.join(" ")+` Tm
`):ms=le(us)+" "+le(fs)+` Td
`,ms},vn=0;vn<Ue.length;vn++){switch(ka="",Sa){case hi:_a=(Cn?"<":"(")+Ue[vn][0]+(Cn?">":")"),yr=parseFloat(Ue[vn][1]),Hn=parseFloat(Ue[vn][2]);break;case $n:_a=(Cn?"<":"(")+Ue[vn]+(Cn?">":")"),yr=$s(I),Hn=Xr(te)}ra!==void 0&&ra[vn]!==void 0&&(ka=ra[vn]+` Tw
`),vn===0?x.push(ka+aa(yr,Hn,Ls)+_a):Sa===$n?x.push(ka+_a):Sa===hi&&x.push(ka+aa(yr,Hn,Ls)+_a)}x=Sa===$n?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var ur=`BT
/`;return ur+=Dt+" "+We+` Tf
`,ur+=le(We*As)+` TL
`,ur+=ya+`
`,ur+=Qs,ur+=x,G(ur+="ET"),N[Dt]=!0,Us};var mn=g.__private__.clip=g.clip=function(x){return G(x==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return mn("evenodd")},g.__private__.discardPath=g.discardPath=function(){return G("n"),this};var Jt=g.__private__.isValidStyle=function(x){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(I=!0),I};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(x){return Jt(x)&&(p=x),this};var Bi=g.__private__.getStyle=g.getStyle=function(x){var I=p;switch(x){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=x}return I},si=g.close=function(){return G("h"),this};g.stroke=function(){return G("S"),this},g.fill=function(x){return ga("f",x),this},g.fillEvenOdd=function(x){return ga("f*",x),this},g.fillStroke=function(x){return ga("B",x),this},g.fillStrokeEvenOdd=function(x){return ga("B*",x),this};var ga=function(x,I){bs(I)==="object"?qi(I,x):G(x)},qa=function(x){x===null||$===S.ADVANCED&&x===void 0||(x=Bi(x),G(x))};function Xn(x,I,te,pe,ke){var Me=new Uo(I||this.boundingBox,te||this.xStep,pe||this.yStep,this.gState,ke||this.matrix);Me.stream=this.stream;var Ue=x+"$$"+this.cloneIndex+++"$$";return gr(Ue,Me),Me}var qi=function(x,I){var te=Rn[x.key],pe=ss[te];if(pe instanceof io)G("q"),G(Ha(I)),pe.gState&&g.setGState(pe.gState),G(x.matrix.toString()+" cm"),G("/"+te+" sh"),G("Q");else if(pe instanceof Uo){var ke=new vt(1,0,0,-1,0,wa());x.matrix&&(ke=ke.multiply(x.matrix||hn),te=Xn.call(pe,x.key,x.boundingBox,x.xStep,x.yStep,ke).id),G("q"),G("/Pattern cs"),G("/"+te+" scn"),pe.gState&&g.setGState(pe.gState),G(I),G("Q")}},Ha=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ds=g.moveTo=function(x,I){return G(le(z(x))+" "+le(B(I))+" m"),this},Qr=g.lineTo=function(x,I){return G(le(z(x))+" "+le(B(I))+" l"),this},ea=g.curveTo=function(x,I,te,pe,ke,Me){return G([le(z(x)),le(B(I)),le(z(te)),le(B(pe)),le(z(ke)),le(B(Me)),"c"].join(" ")),this};g.__private__.line=g.line=function(x,I,te,pe,ke){if(isNaN(x)||isNaN(I)||isNaN(te)||isNaN(pe)||!Jt(ke))throw new Error("Invalid arguments passed to jsPDF.line");return $===S.COMPAT?this.lines([[te-x,pe-I]],x,I,[1,1],ke||"S"):this.lines([[te-x,pe-I]],x,I,[1,1]).stroke()},g.__private__.lines=g.lines=function(x,I,te,pe,ke,Me){var Ue,Qe,nt,Rt,Et,Xt,Ss,Ls,Us,xr,Qs,Cn;if(typeof x=="number"&&(Cn=te,te=I,I=x,x=Cn),pe=pe||[1,1],Me=Me||!1,isNaN(I)||isNaN(te)||!Array.isArray(x)||!Array.isArray(pe)||!Jt(ke)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ds(I,te),Ue=pe[0],Qe=pe[1],Rt=x.length,xr=I,Qs=te,nt=0;nt<Rt;nt++)(Et=x[nt]).length===2?(xr=Et[0]*Ue+xr,Qs=Et[1]*Qe+Qs,Qr(xr,Qs)):(Xt=Et[0]*Ue+xr,Ss=Et[1]*Qe+Qs,Ls=Et[2]*Ue+xr,Us=Et[3]*Qe+Qs,xr=Et[4]*Ue+xr,Qs=Et[5]*Qe+Qs,ea(Xt,Ss,Ls,Us,xr,Qs));return Me&&si(),qa(ke),this},g.path=function(x){for(var I=0;I<x.length;I++){var te=x[I],pe=te.c;switch(te.op){case"m":Ds(pe[0],pe[1]);break;case"l":Qr(pe[0],pe[1]);break;case"c":ea.apply(this,pe);break;case"h":si()}}return this},g.__private__.rect=g.rect=function(x,I,te,pe,ke){if(isNaN(x)||isNaN(I)||isNaN(te)||isNaN(pe)||!Jt(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return $===S.COMPAT&&(pe=-pe),G([le(z(x)),le(B(I)),le(z(te)),le(z(pe)),"re"].join(" ")),qa(ke),this},g.__private__.triangle=g.triangle=function(x,I,te,pe,ke,Me,Ue){if(isNaN(x)||isNaN(I)||isNaN(te)||isNaN(pe)||isNaN(ke)||isNaN(Me)||!Jt(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-x,pe-I],[ke-te,Me-pe],[x-ke,I-Me]],x,I,[1,1],Ue,!0),this},g.__private__.roundedRect=g.roundedRect=function(x,I,te,pe,ke,Me,Ue){if(isNaN(x)||isNaN(I)||isNaN(te)||isNaN(pe)||isNaN(ke)||isNaN(Me)||!Jt(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*te),Me=Math.min(Me,.5*pe),this.lines([[te-2*ke,0],[ke*Qe,0,ke,Me-Me*Qe,ke,Me],[0,pe-2*Me],[0,Me*Qe,-ke*Qe,Me,-ke,Me],[2*ke-te,0],[-ke*Qe,0,-ke,-Me*Qe,-ke,-Me],[0,2*Me-pe],[0,-Me*Qe,ke*Qe,-Me,ke,-Me]],x+ke,I,[1,1],Ue,!0),this},g.__private__.ellipse=g.ellipse=function(x,I,te,pe,ke){if(isNaN(x)||isNaN(I)||isNaN(te)||isNaN(pe)||!Jt(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*te,Ue=4/3*(Math.SQRT2-1)*pe;return Ds(x+te,I),ea(x+te,I-Ue,x+Me,I-pe,x,I-pe),ea(x-Me,I-pe,x-te,I-Ue,x-te,I),ea(x-te,I+Ue,x-Me,I+pe,x,I+pe),ea(x+Me,I+pe,x+te,I+Ue,x+te,I),qa(ke),this},g.__private__.circle=g.circle=function(x,I,te,pe){if(isNaN(x)||isNaN(I)||isNaN(te)||!Jt(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,I,te,te,pe)},g.setFont=function(x,I,te){return te&&(I=me(I,te)),Dt=Bn(x,I,{disableWarning:!1}),this};var wo=g.__private__.getFont=g.getFont=function(){return Qt[Bn.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var x,I,te={};for(x in ws)if(ws.hasOwnProperty(x))for(I in te[x]=[],ws[x])ws[x].hasOwnProperty(I)&&te[x].push(I);return te},g.addFont=function(x,I,te,pe,ke){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(te=me(te,pe)),ke=ke||"Identity-H",fn.call(this,x,I,te,ke)};var $a,ri=s.lineWidth||.200025,xa=g.__private__.getLineWidth=g.getLineWidth=function(){return ri},No=g.__private__.setLineWidth=g.setLineWidth=function(x){return ri=x,G(le(z(x))+" w"),this};g.__private__.setLineDash=jt.API.setLineDash=jt.API.setLineDashPattern=function(x,I){if(x=x||[],I=I||0,isNaN(I)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(te){return le(z(te))}).join(" "),I=le(z(I)),G("["+x+"] "+I+" d"),this};var Hi=g.__private__.getLineHeight=g.getLineHeight=function(){return We*$a};g.__private__.getLineHeight=g.getLineHeight=function(){return We*$a};var Ut=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&($a=x),this},jo=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return $a};Ut(s.lineHeight);var $s=g.__private__.getHorizontalCoordinate=function(x){return z(x)},Xr=g.__private__.getVerticalCoordinate=function(x){return $===S.ADVANCED?x:Ct[W].mediaBox.topRightY-Ct[W].mediaBox.bottomLeftY-z(x)},_o=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(x){return le($s(x))},va=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(x){return le(Xr(x))},en=s.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return he(en)},g.__private__.setStrokeColor=g.setDrawColor=function(x,I,te,pe){return en=Re({ch1:x,ch2:I,ch3:te,ch4:pe,pdfColorType:"draw",precision:2}),G(en),this};var $i=s.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return he($i)},g.__private__.setFillColor=g.setFillColor=function(x,I,te,pe){return $i=Re({ch1:x,ch2:I,ch3:te,ch4:pe,pdfColorType:"fill",precision:2}),G($i),this};var ya=s.textColor||"0 g",ml=g.__private__.getTextColor=g.getTextColor=function(){return he(ya)};g.__private__.setTextColor=g.setTextColor=function(x,I,te,pe){return ya=Re({ch1:x,ch2:I,ch3:te,ch4:pe,pdfColorType:"text",precision:3}),this};var ni=s.charSpace,Ui=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(ni||0)};g.__private__.setCharSpace=g.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ni=x,this};var Wi=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wi=I,G(I+" J"),this};var Fr=0;g.__private__.setLineJoin=g.setLineJoin=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fr=I,G(I+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(le(z(x))+" M"),this},g.GState=Rc,g.setGState=function(x){(x=typeof x=="string"?js[Mr[x]]:So(null,x)).equals(dn)||(G("/"+x.id+" gs"),dn=x)};var So=function(x,I){if(!x||!Mr[x]){var te=!1;for(var pe in js)if(js.hasOwnProperty(pe)&&js[pe].equals(I)){te=!0;break}if(te)I=js[pe];else{var ke="GS"+(Object.keys(js).length+1).toString(10);js[ke]=I,I.id=ke}return x&&(Mr[x]=I.id),rs.publish("addGState",I),I}};g.addGState=function(x,I){return So(x,I),this},g.saveGraphicsState=function(){return G("q"),rr.push({key:Dt,size:We,color:ya}),this},g.restoreGraphicsState=function(){G("Q");var x=rr.pop();return Dt=x.key,We=x.size,ya=x.color,dn=null,this},g.setCurrentTransformationMatrix=function(x){return G(x.toString()+" cm"),this},g.comment=function(x){return G("#"+x),this};var Ua=function(x,I){var te=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(Me){isNaN(Me)||(te=parseFloat(Me))}});var pe=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Me){isNaN(Me)||(pe=parseFloat(Me))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Me){ke=Me.toString()}}),this},pn=function(x,I,te,pe){Ua.call(this,x,I),this.type="rect";var ke=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(Ue){isNaN(Ue)||(ke=parseFloat(Ue))}});var Me=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function(Ue){isNaN(Ue)||(Me=parseFloat(Ue))}}),this},ai=function(){this.page=Ps,this.currentPage=W,this.pages=ie.slice(0),this.pagesContext=Ct.slice(0),this.x=Ys,this.y=Vt,this.matrix=kr,this.width=ba(W),this.height=wa(W),this.outputDestination=se,this.id="",this.objectNumber=-1};ai.prototype.restore=function(){Ps=this.page,W=this.currentPage,Ct=this.pagesContext,ie=this.pages,Ys=this.x,Vt=this.y,kr=this.matrix,oi(W,this.width),Gi(W,this.height),se=this.outputDestination};var Vi=function(x,I,te,pe,ke){Ir.push(new ai),Ps=W=0,ie=[],Ys=x,Vt=I,kr=ke,Os([te,pe])},Zi=function(x){if(nr[x])Ir.pop().restore();else{var I=new ai,te="Xo"+(Object.keys(Is).length+1).toString(10);I.id=te,nr[x]=te,Is[te]=I,rs.publish("addFormObject",I),Ir.pop().restore()}};for(var ii in g.beginFormObject=function(x,I,te,pe,ke){return Vi(x,I,te,pe,ke),this},g.endFormObject=function(x){return Zi(x),this},g.doFormObject=function(x,I){var te=Is[nr[x]];return G("q"),G(I.toString()+" cm"),G("/"+te.id+" Do"),G("Q"),this},g.getFormObject=function(x){var I=Is[nr[x]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},g.save=function(x,I){return x=x||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(ao(Qn(kn()),x),typeof ao.unload=="function"&&_t.setTimeout&&setTimeout(ao.unload,911),this):new Promise(function(te,pe){try{var ke=ao(Qn(kn()),x);typeof ao.unload=="function"&&_t.setTimeout&&setTimeout(ao.unload,911),te(ke)}catch(Me){pe(Me.message)}})},jt.API)jt.API.hasOwnProperty(ii)&&(ii==="events"&&jt.API.events.length?function(x,I){var te,pe,ke;for(ke=I.length-1;ke!==-1;ke--)te=I[ke][0],pe=I[ke][1],x.subscribe.apply(x,[te].concat(typeof pe=="function"?[pe]:pe))}(rs,jt.API.events):g[ii]=jt.API[ii]);var ba=g.getPageWidth=function(x){return(Ct[x=x||W].mediaBox.topRightX-Ct[x].mediaBox.bottomLeftX)/Je},oi=g.setPageWidth=function(x,I){Ct[x].mediaBox.topRightX=I*Je+Ct[x].mediaBox.bottomLeftX},wa=g.getPageHeight=function(x){return(Ct[x=x||W].mediaBox.topRightY-Ct[x].mediaBox.bottomLeftY)/Je},Gi=g.setPageHeight=function(x,I){Ct[x].mediaBox.topRightY=I*Je+Ct[x].mediaBox.bottomLeftY};return g.internal={pdfEscape:Ks,getStyle:Bi,getFont:wo,getFontSize:Ge,getCharSpace:Ui,getTextColor:ml,getLineHeight:Hi,getLineHeightFactor:jo,getLineWidth:xa,write:Ve,getHorizontalCoordinate:$s,getVerticalCoordinate:Xr,getCoordinateString:_o,getVerticalCoordinateString:va,collections:{},newObject:is,newAdditionalObject:On,newObjectDeferred:Ye,newObjectDeferredBegin:lr,getFilters:$e,putStream:st,events:rs,scaleFactor:Je,pageSize:{getWidth:function(){return ba(W)},setWidth:function(x){oi(W,x)},getHeight:function(){return wa(W)},setHeight:function(x){Gi(W,x)}},encryptionOptions:v,encryption:Js,getEncryptor:bo,output:pa,getNumberOfPages:Ms,pages:ie,out:G,f2:je,f3:R,getPageInfo:ti,getPageInfoByObjId:Tt,getCurrentPageInfo:It,getPDFVersion:j,Point:Ua,Rectangle:pn,Matrix:vt,hasHotfix:ei},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return ba(W)},set:function(x){oi(W,x)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return wa(W)},set:function(x){Gi(W,x)},enumerable:!0,configurable:!0}),pt.call(g,Be),Dt="F1",Xa(i,r),rs.publish("initialized"),g}Ho.prototype.lsbFirstWord=function(s){return String.fromCharCode(s>>0&255,s>>8&255,s>>16&255,s>>24&255)},Ho.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ho.prototype.hexToBytes=function(s){for(var t=[],r=0;r<s.length;r+=2)t.push(String.fromCharCode(parseInt(s.substr(r,2),16)));return t.join("")},Ho.prototype.processOwnerPassword=function(s,t){return hh(dh(t).substr(0,5),s)},Ho.prototype.encryptor=function(s,t){var r=dh(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return hh(r,a)}},Rc.prototype.equals=function(s){var t,r="id,objectNumber,equals";if(!s||bs(s)!==bs(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;a++}for(t in s)s.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},jt.API={events:[]},jt.version="3.0.1";var Zs=jt.API,su=1,yo=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bo=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(s){return s.toFixed(2)},Ni=function(s){return s.toFixed(5)};Zs.__acroform__={};var _n=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},wf=function(s){return s*su},Ta=function(s){var t=new Gg,r=it.internal.getHeight(s)||0,a=it.internal.getWidth(s)||0;return t.BBox=[0,0,Number(zt(a)),Number(zt(r))],t},Lb=Zs.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|=1<<t},Ab=Zs.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&=~(1<<t)},Tb=Zs.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(s&1<<t)==0?0:1},er=Zs.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Tb(s,t-1)},tr=Zs.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Lb(s,t-1)},sr=Zs.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ab(s,t-1)},Eb=Zs.__acroform__.calculateCoordinates=function(s,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,i=s[0],l=s[1],d=s[2],u=s[3],h={};return h.lowerLeft_X=r(i)||0,h.lowerLeft_Y=a(l+u)||0,h.upperRight_X=r(i+d)||0,h.upperRight_Y=a(l)||0,[Number(zt(h.lowerLeft_X)),Number(zt(h.lowerLeft_Y)),Number(zt(h.upperRight_X)),Number(zt(h.upperRight_Y))]},Mb=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],r=s._V||s.DV,a=uh(s,r),i=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+i+" "+zt(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=Ta(s);return l.scope=s.scope,l.stream=t.join(`
`),l}},uh=function(s,t){var r=s.fontSize===0?s.maxFontSize:s.fontSize,a={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=s.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var l=r,d=it.internal.getHeight(s)||0;d=d<0?-d:d;var u=it.internal.getWidth(s)||0;u=u<0?-u:u;var h=function(R,z,q){if(R+1<i.length){var B=z+" "+i[R+1][0];return mc(B,s,q).width<=u-4}return!1};l++;e:for(;l>0;){t="",l--;var p,v,y=mc("3",s,l).height,N=s.multiline?d-l:(d-y)/2,g=N+=2,C=0,j=0,T=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+mc(t,s,l=12).width+", FieldWidth:"+u+`
`;break}for(var A="",S=0,$=0;$<i.length;$++)if(i.hasOwnProperty($)){var V=!1;if(i[$].length!==1&&T!==i[$].length-1){if((y+2)*(S+2)+2>d)continue e;A+=i[$][T],V=!0,j=$,$--}else{A=(A+=i[$][T]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var K=parseInt($),me=h(K,A,l),le=$>=i.length-1;if(me&&!le){A+=" ",T=0;continue}if(me||le){if(le)j=K;else if(s.multiline&&(y+2)*(S+2)+2>d)continue e}else{if(!s.multiline||(y+2)*(S+2)+2>d)continue e;j=K}}for(var X="",ee=C;ee<=j;ee++){var je=i[ee];if(s.multiline){if(ee===j){X+=je[T]+" ",T=(T+1)%je.length;continue}if(ee===C){X+=je[je.length-1]+" ";continue}}X+=je[0]+" "}switch(X=X.substr(X.length-1)==" "?X.substr(0,X.length-1):X,v=mc(X,s,l).width,s.textAlign){case"right":p=u-v-2;break;case"center":p=(u-v)/2;break;case"left":default:p=2}t+=zt(p)+" "+zt(g)+` Td
`,t+="("+yo(X)+`) Tj
`,t+=-zt(p)+` 0 Td
`,g=-(l+2),v=0,C=V?j:j+1,S++,A=""}break}return a.text=t,a.fontSize=l,a},mc=function(s,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(s,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Ib={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Rb=function(s,t){var r={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(r)},Ob=function(s,t){for(var r in s)if(s.hasOwnProperty(r)){var a=r,i=s[r];t.internal.newObjectDeferredBegin(i.objId,!0),bs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete s[a]}},Db=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(ua.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(Ib)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");su=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new Yg,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];l.objId=void 0,l.hasAnnotation&&Rb(l,r)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(r){(function(a,i){var l=!a;for(var d in a||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(d)){var u=a[d],h=[],p=u.Rect;if(u.Rect&&(u.Rect=Eb(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=it.createDefaultAppearanceStream(u),bs(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=p,u.hasAppearanceStream&&!u.appearanceStreamContent){var v=Mb(u);h.push({key:"AP",value:"<</N "+v+">>"}),i.internal.acroformPlugin.xForms.push(v)}if(u.appearanceStreamContent){var y="";for(var N in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(N)){var g=u.appearanceStreamContent[N];if(y+="/"+N+" ",y+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var d in g)if(g.hasOwnProperty(d)){var C=g[d];typeof C=="function"&&(C=C.call(i,u)),y+="/"+d+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=g)=="function"&&(C=C.call(i,u)),y+="/"+d+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:u.objId}),i.internal.out("endobj")}l&&Ob(i.internal.acroformPlugin.xForms,i)})(r,s)}),s.internal.acroformPlugin.isInitialized=!0}},Zg=Zs.__acroform__.arrayToPdfArray=function(s,t,r){var a=function(d){return d};if(Array.isArray(s)){for(var i="[",l=0;l<s.length;l++)switch(l!==0&&(i+=" "),bs(s[l])){case"boolean":case"number":case"object":i+=s[l].toString();break;case"string":s[l].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),i+="("+yo(a(s[l].toString()))+")"):i+=s[l].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Md=function(s,t,r){var a=function(i){return i};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(s=s||"").toString(),s="("+yo(a(s))+")"},Ra=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ra.prototype.toString=function(){return this.objId+" 0 R"},Ra.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},Ra.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],i=this[a];i&&(Array.isArray(i)?s.push({key:a,value:Zg(i,this.objId,this.scope)}):i instanceof Ra?(i.scope=this.scope,s.push({key:a,value:i.objId+" 0 R"})):typeof i!="function"&&s.push({key:a,value:i}))}return s};var Gg=function(){Ra.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){s=r.trim()},get:function(){return s||null}})};_n(Gg,Ra);var Yg=function(){Ra.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+yo(r(s))+")"}},set:function(r){s=r}})};_n(Yg,Ra);var ua=function s(){Ra.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!er(t,3)},set:function(A){A?this.F=tr(t,3):this.F=sr(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');r=A}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(A){a=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(A){a[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(A){a[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(A){a[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(A){a[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Oc)return;l="FieldObject"+s.FieldNum++}var A=function(S){return S};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+yo(A(l))+")"},set:function(A){l=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(A){l=A}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){h=A}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/su:p},set:function(A){p=A}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(A){v=A}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Oc||this instanceof lo))return Md(y,this.objId,this.scope)},set:function(A){A=A.toString(),y=A}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Nr?N:Md(N,this.objId,this.scope)},set:function(A){A=A.toString(),N=this instanceof Nr?A:A.substr(0,1)==="("?Bo(A.substr(1,A.length-2)):Bo(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr?Bo(N.substr(1,N.length-1)):N},set:function(A){A=A.toString(),N=this instanceof Nr?"/"+A:A}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Nr?g:Md(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=this instanceof Nr?A:A.substr(0,1)==="("?Bo(A.substr(1,A.length-2)):Bo(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr?Bo(g.substr(1,g.length-1)):g},set:function(A){A=A.toString(),g=this instanceof Nr?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(A){A=!!A,j=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(A){C=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,1)},set:function(A){A?this.Ff=tr(this.Ff,1):this.Ff=sr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,2)},set:function(A){A?this.Ff=tr(this.Ff,2):this.Ff=sr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,3)},set:function(A){A?this.Ff=tr(this.Ff,3):this.Ff=sr(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');T=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(T){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};_n(ua,Ra);var Vo=function(){ua.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(r){s=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Zg(t,this.objId,this.scope)},set:function(r){var a,i;i=[],typeof(a=r)=="string"&&(i=function(l,d,u){u||(u=1);for(var h,p=[];h=d.exec(l);)p.push(h[u]);return p}(a,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,18)},set:function(r){r?this.Ff=tr(this.Ff,18):this.Ff=sr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=tr(this.Ff,19):this.Ff=sr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,20)},set:function(r){r?(this.Ff=tr(this.Ff,20),t.sort()):this.Ff=sr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,22)},set:function(r){r?this.Ff=tr(this.Ff,22):this.Ff=sr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,23)},set:function(r){r?this.Ff=tr(this.Ff,23):this.Ff=sr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,27)},set:function(r){r?this.Ff=tr(this.Ff,27):this.Ff=sr(this.Ff,27)}}),this.hasAppearanceStream=!1};_n(Vo,ua);var Zo=function(){Vo.call(this),this.fontName="helvetica",this.combo=!1};_n(Zo,Vo);var Go=function(){Zo.call(this),this.combo=!0};_n(Go,Zo);var Nc=function(){Go.call(this),this.edit=!0};_n(Nc,Go);var Nr=function(){ua.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,15)},set:function(r){r?this.Ff=tr(this.Ff,15):this.Ff=sr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,16)},set:function(r){r?this.Ff=tr(this.Ff,16):this.Ff=sr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,17)},set:function(r){r?this.Ff=tr(this.Ff,17):this.Ff=sr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,26)},set:function(r){r?this.Ff=tr(this.Ff,26):this.Ff=sr(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,i=[];for(a in i.push("<<"),t)i.push("/"+a+" ("+yo(r(t[a]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){bs(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(r){s="/"+r}})};_n(Nr,ua);var jc=function(){Nr.call(this),this.pushButton=!0};_n(jc,Nr);var Yo=function(){Nr.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};_n(Yo,Nr);var Oc=function(){var s,t;ua.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(i){s=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),a)d.push("/"+l+" ("+yo(i(a[l]))+")");return d.push(">>"),d.join(`
`)},set:function(i){bs(i)==="object"&&(a=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(i){typeof i=="string"&&(a.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=it.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_n(Oc,ua),Yo.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=s.createAppearanceStream(r.optionName),r.caption=s.getCA()}},Yo.prototype.createOption=function(s){var t=new Oc;return t.Parent=this,t.optionName=s,this.Kids.push(t),Fb.call(this.scope,t),t};var _c=function(){Nr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=it.CheckBox.createAppearanceStream()};_n(_c,Nr);var lo=function(){ua.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,13)},set:function(t){t?this.Ff=tr(this.Ff,13):this.Ff=sr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,21)},set:function(t){t?this.Ff=tr(this.Ff,21):this.Ff=sr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,23)},set:function(t){t?this.Ff=tr(this.Ff,23):this.Ff=sr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,24)},set:function(t){t?this.Ff=tr(this.Ff,24):this.Ff=sr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,25)},set:function(t){t?this.Ff=tr(this.Ff,25):this.Ff=sr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,26)},set:function(t){t?this.Ff=tr(this.Ff,26):this.Ff=sr(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_n(lo,ua);var Sc=function(){lo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!er(this.Ff,14)},set:function(s){s?this.Ff=tr(this.Ff,14):this.Ff=sr(this.Ff,14)}}),this.password=!0};_n(Sc,lo);var it={CheckBox:{createAppearanceStream:function(){return{N:{On:it.CheckBox.YesNormal},D:{On:it.CheckBox.YesPushDown,Off:it.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=Ta(s);t.scope=s.scope;var r=[],a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,i=s.scope.__private__.encodeColorString(s.color),l=uh(s,s.caption);return r.push("0.749023 g"),r.push("0 0 "+zt(it.internal.getWidth(s))+" "+zt(it.internal.getHeight(s))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+zt(l.fontSize)+" Tf "+i),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(s){var t=Ta(s);t.scope=s.scope;var r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color),i=[],l=it.internal.getHeight(s),d=it.internal.getWidth(s),u=uh(s,s.caption);return i.push("1 g"),i.push("0 0 "+zt(d)+" "+zt(l)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+zt(d-1)+" "+zt(l-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+zt(u.fontSize)+" Tf "+a),i.push(u.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(s){var t=Ta(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zt(it.internal.getWidth(s))+" "+zt(it.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:it.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=it.RadioButton.Circle.YesNormal,t.D[s]=it.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=Ta(s);t.scope=s.scope;var r=[],a=it.internal.getWidth(s)<=it.internal.getHeight(s)?it.internal.getWidth(s)/4:it.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=it.internal.Bezier_C,l=Number((a*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),r.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),r.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),r.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ta(s);t.scope=s.scope;var r=[],a=it.internal.getWidth(s)<=it.internal.getHeight(s)?it.internal.getWidth(s)/4:it.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),l=Number((i*it.internal.Bezier_C).toFixed(5)),d=Number((a*it.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+d+" "+d+" "+a+" 0 "+a+" c"),r.push("-"+d+" "+a+" -"+a+" "+d+" -"+a+" 0 c"),r.push("-"+a+" -"+d+" -"+d+" -"+a+" 0 -"+a+" c"),r.push(d+" -"+a+" "+a+" -"+d+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=Ta(s);t.scope=s.scope;var r=[],a=it.internal.getWidth(s)<=it.internal.getHeight(s)?it.internal.getWidth(s)/4:it.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var i=Number((2*a).toFixed(5)),l=Number((i*it.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ni(it.internal.getWidth(s)/2)+" "+Ni(it.internal.getHeight(s)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:it.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=it.RadioButton.Cross.YesNormal,t.D[s]=it.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=Ta(s);t.scope=s.scope;var r=[],a=it.internal.calculateCross(s);return r.push("q"),r.push("1 1 "+zt(it.internal.getWidth(s)-2)+" "+zt(it.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(zt(a.x1.x)+" "+zt(a.x1.y)+" m"),r.push(zt(a.x2.x)+" "+zt(a.x2.y)+" l"),r.push(zt(a.x4.x)+" "+zt(a.x4.y)+" m"),r.push(zt(a.x3.x)+" "+zt(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ta(s);t.scope=s.scope;var r=it.internal.calculateCross(s),a=[];return a.push("0.749023 g"),a.push("0 0 "+zt(it.internal.getWidth(s))+" "+zt(it.internal.getHeight(s))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+zt(it.internal.getWidth(s)-2)+" "+zt(it.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(zt(r.x1.x)+" "+zt(r.x1.y)+" m"),a.push(zt(r.x2.x)+" "+zt(r.x2.y)+" l"),a.push(zt(r.x4.x)+" "+zt(r.x4.y)+" m"),a.push(zt(r.x3.x)+" "+zt(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=Ta(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zt(it.internal.getWidth(s))+" "+zt(it.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+r}};it.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=it.internal.getWidth(s),r=it.internal.getHeight(s),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},it.internal.getWidth=function(s){var t=0;return bs(s)==="object"&&(t=wf(s.Rect[2])),t},it.internal.getHeight=function(s){var t=0;return bs(s)==="object"&&(t=wf(s.Rect[3])),t};var Fb=Zs.addField=function(s){if(Db(this,s),!(s instanceof ua))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};Zs.AcroFormChoiceField=Vo,Zs.AcroFormListBox=Zo,Zs.AcroFormComboBox=Go,Zs.AcroFormEditBox=Nc,Zs.AcroFormButton=Nr,Zs.AcroFormPushButton=jc,Zs.AcroFormRadioButton=Yo,Zs.AcroFormCheckBox=_c,Zs.AcroFormTextField=lo,Zs.AcroFormPasswordField=Sc,Zs.AcroFormAppearance=it,Zs.AcroForm={ChoiceField:Vo,ListBox:Zo,ComboBox:Go,EditBox:Nc,Button:Nr,PushButton:jc,RadioButton:Yo,CheckBox:_c,TextField:lo,PasswordField:Sc,Appearance:it},jt.AcroForm={ChoiceField:Vo,ListBox:Zo,ComboBox:Go,EditBox:Nc,Button:Nr,PushButton:jc,RadioButton:Yo,CheckBox:_c,TextField:lo,PasswordField:Sc,Appearance:it};jt.AcroForm;function Kg(s){return s.reduce(function(t,r,a){return t[r]=a,t},{})}(function(s){s.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=s.__addimage__.getImageFileTypeByImageData=function(R,z){var q,B,ge,ue,be,ne=t;if((z=z||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(me(R))for(be in r)for(ge=r[be],q=0;q<ge.length;q+=1){for(ue=!0,B=0;B<ge[q].length;B+=1)if(ge[q][B]!==void 0&&ge[q][B]!==R[B]){ue=!1;break}if(ue===!0){ne=be;break}}else for(be in r)for(ge=r[be],q=0;q<ge.length;q+=1){for(ue=!0,B=0;B<ge[q].length;B+=1)if(ge[q][B]!==void 0&&ge[q][B]!==R.charCodeAt(B)){ue=!1;break}if(ue===!0){ne=be;break}}return ne===t&&z!==t&&(ne=z),ne},i=function R(z){for(var q=this.internal.write,B=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:z.width}),ue.push({key:"Height",value:z.height}),z.colorSpace===T.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===T.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var be="",ne=0,ve=z.transparency.length;ne<ve;ne++)be+=z.transparency[ne]+" "+z.transparency[ne]+" ";ue.push({key:"Mask",value:"["+be+"]"})}z.sMask!==void 0&&ue.push({key:"SMask",value:z.objectId+1+" 0 R"});var ae=z.filter!==void 0?["/"+z.filter]:void 0;if(B({data:z.data,additionalKeyValues:ue,alreadyAppliedFilters:ae,objectId:z.objectId}),q("endobj"),"sMask"in z&&z.sMask!==void 0){var fe="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,E={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:fe,data:z.sMask};"filter"in z&&(E.filter=z.filter),R.call(this,E)}if(z.colorSpace===T.INDEXED){var W=this.internal.newObject();B({data:X(new Uint8Array(z.palette)),objectId:W}),q("endobj")}},l=function(){var R=this.internal.collections.addImage_images;for(var z in R)i.call(this,R[z])},d=function(){var R,z=this.internal.collections.addImage_images,q=this.internal.write;for(var B in z)q("/I"+(R=z[B]).index,R.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",d))},h=function(){var R=this.internal.collections.addImage_images;return u.call(this),R},p=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(R){return typeof s["process"+R.toUpperCase()]=="function"},y=function(R){return bs(R)==="object"&&R.nodeType===1},N=function(R,z){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var q=""+R.getAttribute("src");if(q.indexOf("data:image/")===0)return El(unescape(q).split("base64,").pop());var B=s.loadFile(q,!0);if(B!==void 0)return B}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ge;switch(z){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;case"JPEG":case"JPG":default:ge="image/jpeg"}return El(R.toDataURL(ge,1).split("base64,").pop())}},g=function(R){var z=this.internal.collections.addImage_images;if(z){for(var q in z)if(R===z[q].alias)return z[q]}},C=function(R,z,q){return R||z||(R=-96,z=-96),R<0&&(R=-1*q.width*72/R/this.internal.scaleFactor),z<0&&(z=-1*q.height*72/z/this.internal.scaleFactor),R===0&&(R=z*q.width/q.height),z===0&&(z=R*q.height/q.width),[R,z]},j=function(R,z,q,B,ge,ue){var be=C.call(this,q,B,ge),ne=this.internal.getCoordinateString,ve=this.internal.getVerticalCoordinateString,ae=h.call(this);if(q=be[0],B=be[1],ae[ge.index]=ge,ue){ue*=Math.PI/180;var fe=Math.cos(ue),E=Math.sin(ue),W=function(Q){return Q.toFixed(4)},Z=[W(fe),W(E),W(-1*E),W(fe),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,ne(R),ve(z+B),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([ne(q),"0","0",ne(B),"0","0","cm"].join(" "))):this.internal.write([ne(q),"0","0",ne(B),ne(R),ve(z+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},T=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=s.__addimage__.sHashCode=function(R){var z,q,B=0;if(typeof R=="string")for(q=R.length,z=0;z<q;z++)B=(B<<5)-B+R.charCodeAt(z),B|=0;else if(me(R))for(q=R.byteLength/2,z=0;z<q;z++)B=(B<<5)-B+R[z],B|=0;return B},$=s.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var z=!0;return R.length===0&&(z=!1),R.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(z=!1),z},V=s.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var z=R.indexOf(",");return z<0?null:R.substring(0,z).trim().endsWith("base64")?R.substring(z+1):null},K=s.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};s.__addimage__.isArrayBuffer=function(R){return K()&&R instanceof ArrayBuffer};var me=s.__addimage__.isArrayBufferView=function(R){return K()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},le=s.__addimage__.binaryStringToUint8Array=function(R){for(var z=R.length,q=new Uint8Array(z),B=0;B<z;B++)q[B]=R.charCodeAt(B);return q},X=s.__addimage__.arrayBufferToBinaryString=function(R){for(var z="",q=me(R)?R:new Uint8Array(R),B=0;B<q.length;B+=8192)z+=String.fromCharCode.apply(null,q.subarray(B,B+8192));return z};s.addImage=function(){var R,z,q,B,ge,ue,be,ne,ve;if(typeof arguments[1]=="number"?(z=t,q=arguments[1],B=arguments[2],ge=arguments[3],ue=arguments[4],be=arguments[5],ne=arguments[6],ve=arguments[7]):(z=arguments[1],q=arguments[2],B=arguments[3],ge=arguments[4],ue=arguments[5],be=arguments[6],ne=arguments[7],ve=arguments[8]),bs(R=arguments[0])==="object"&&!y(R)&&"imageData"in R){var ae=R;R=ae.imageData,z=ae.format||z||t,q=ae.x||q||0,B=ae.y||B||0,ge=ae.w||ae.width||ge,ue=ae.h||ae.height||ue,be=ae.alias||be,ne=ae.compression||ne,ve=ae.rotation||ae.angle||ve}var fe=this.internal.getFilters();if(ne===void 0&&fe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(q)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var E=ee.call(this,R,z,be,ne);return j.call(this,q,B,ge,ue,E,ve),this};var ee=function(R,z,q,B){var ge,ue,be;if(typeof R=="string"&&a(R)===t){R=unescape(R);var ne=je(R,!1);(ne!==""||(ne=s.loadFile(R,!0))!==void 0)&&(R=ne)}if(y(R)&&(R=N(R,z)),z=a(R,z),!v(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((be=q)==null||be.length===0)&&(q=function(ve){return typeof ve=="string"||me(ve)?S(ve):me(ve.data)?S(ve.data):null}(R)),(ge=g.call(this,q))||(K()&&(R instanceof Uint8Array||z==="RGBA"||(ue=R,R=le(R))),ge=this["process"+z.toUpperCase()](R,p.call(this),q,function(ve){return ve&&typeof ve=="string"&&(ve=ve.toUpperCase()),ve in s.image_compression?ve:A.NONE}(B),ue)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},je=s.__addimage__.convertBase64ToBinaryString=function(R,z){z=typeof z!="boolean"||z;var q,B="";if(typeof R=="string"){var ge;q=(ge=V(R))!==null&&ge!==void 0?ge:R;try{B=El(q)}catch(ue){if(z)throw $(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};s.getImageProperties=function(R){var z,q,B="";if(y(R)&&(R=N(R)),typeof R=="string"&&a(R)===t&&((B=je(R,!1))===""&&(B=s.loadFile(R)||""),R=B),q=a(R),!v(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!K()||R instanceof Uint8Array||(R=le(R)),!(z=this["process"+q.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=q,z}})(jt.API),function(s){var t=function(r){if(r!==void 0&&r!="")return!0};jt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(r){for(var a,i,l,d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(r.objId),p=r.pageContext.annotations,v=!1,y=0;y<p.length&&!v;y++)switch((a=p[y]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var N=0;N<p.length;N++){a=p[N];var g=this.internal.pdfEscape,C=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(j.objId),S=a.title||"Note";l="<</Type /Annot /Subtype /Text "+(i="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y)+"] ")+"/Contents ("+g(A(a.contents))+")",l+=" /Popup "+T.objId+" 0 R",l+=" /P "+h.objId+" 0 R",l+=" /T ("+g(A(S))+") >>",j.content=l;var $=j.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+d(a.bounds.x+30)+" "+u(a.bounds.y+a.bounds.h)+" "+d(a.bounds.x+a.bounds.w+30)+" "+u(a.bounds.y)+"] ")+" /Parent "+$,a.open&&(l+=" /Open true"),l+=" >>",T.content=l,this.internal.write(j.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+d(a.bounds.x)+" "+u(a.bounds.y)+" "+d(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y+a.bounds.h)+"] ";var V=a.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(C(a.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(a.options.name){var K=this.annotations._nameMap[a.options.name];a.options.pageNumber=K.page,a.options.top=K.y}else a.options.top||(a.options.top=0);if(i="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",l="",a.options.url)l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(C(a.options.url))+") >>";else if(a.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,l+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var me=u(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),l+=" /XYZ "+a.options.left+" "+me+" "+a.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),s.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},s.link=function(r,a,i,l,d){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(r),y:p(a),w:h(r+i),h:p(a+l)},options:d,type:"link"})},s.textWithLink=function(r,a,i,l){var d,u,h=this.getTextWidth(r),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){u=l.maxWidth;var v=this.splitTextToSize(r,u).length;d=Math.ceil(p*v)}else u=h,d=p;return this.text(r,a,i,l),i+=.2*p,l.align==="center"&&(a-=h/2),l.align==="right"&&(a-=h),this.link(a,i-p,u,d,l),h},s.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(jt.API),function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];s.__arabicParser__={};var l=s.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},d=s.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},u=s.__arabicParser__.isArabicEndLetter=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length<=2},h=s.__arabicParser__.isArabicAlfLetter=function(j){return d(j)&&i.indexOf(j.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length>=1};var p=s.__arabicParser__.arabicLetterHasFinalForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length>=3};var v=s.__arabicParser__.arabicLetterHasMedialForm=function(j){return d(j)&&l(j)&&t[j.charCodeAt(0)].length==4},y=s.__arabicParser__.resolveLigatures=function(j){var T=0,A=r,S="",$=0;for(T=0;T<j.length;T+=1)A[j.charCodeAt(T)]!==void 0?($++,typeof(A=A[j.charCodeAt(T)])=="number"&&(S+=String.fromCharCode(A),A=r,$=0),T===j.length-1&&(A=r,S+=j.charAt(T-($-1)),T-=$-1,$=0)):(A=r,S+=j.charAt(T-$),T-=$,$=0);return S};s.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&a[j.charCodeAt(0)]!==void 0};var N=s.__arabicParser__.getCorrectForm=function(j,T,A){return d(j)?l(j)===!1?-1:!p(j)||!d(T)&&!d(A)||!d(A)&&u(T)||u(j)&&!d(T)||u(j)&&h(T)||u(j)&&u(T)?0:v(j)&&d(T)&&!u(T)&&d(A)&&p(A)?3:u(j)||!d(A)?1:2:-1},g=function(j){var T=0,A=0,S=0,$="",V="",K="",me=(j=j||"").split("\\s+"),le=[];for(T=0;T<me.length;T+=1){for(le.push(""),A=0;A<me[T].length;A+=1)$=me[T][A],V=me[T][A-1],K=me[T][A+1],d($)?(S=N($,V,K),le[T]+=S!==-1?String.fromCharCode(t[$.charCodeAt(0)][S]):$):le[T]+=$;le[T]=y(le[T])}return le.join(" ")},C=s.__arabicParser__.processArabic=s.processArabic=function(){var j,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(T)){var S=0;for(A=[],S=0;S<T.length;S+=1)Array.isArray(T[S])?A.push([g(T[S][0]),T[S][1],T[S][2]]):A.push([g(T[S])]);j=A}else j=g(T);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};s.events.push(["preProcessText",C])}(jt.API),jt.API.autoPrint=function(s){var t;switch((s=s||{}).variant=s.variant||"non-conform",s.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(s){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(u){l=u}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(u){d=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var i;if((r=r||"2d")!=="2d")return null;for(i in a)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=a[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(jt.API),function(s){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(j){v=j}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(j){y=j}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(j){N=j}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(j){C=j}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(h){return a.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},s.getTextDimensions=function(h,p){a.call(this);var v=(p=p||{}).fontSize||this.getFontSize(),y=p.font||this.getFont(),N=p.scaleFactor||this.internal.scaleFactor,g=0,C=0,j=0,T=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var A=p.maxWidth;A>0?typeof h=="string"?h=this.splitTextToSize(h,A):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function($,V){return $.concat(T.splitTextToSize(V,A))},[])):h=Array.isArray(h)?h:[h];for(var S=0;S<h.length;S++)g<(j=this.getStringUnitWidth(h[S],{font:y})*v)&&(g=j);return g!==0&&(C=h.length),{w:g/=N,h:Math.max((C*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/N,0)}},s.cellAddPage=function(){a.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=s.cell=function(){var h;h=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var p=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,y=this.internal.__cell__.margins||t,N=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===h.lineNumber?(h.x=(p.x||0)+(p.width||0),h.y=p.y||0):p.y+p.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,g&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=p.y+p.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,r===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-v,h.y+v,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+v,{align:"center",baseline:"top",maxWidth:h.width-v-v}):this.text(h.text,h.x+v,h.y+v,{align:"left",baseline:"top",maxWidth:h.width-v-v})),this.internal.__cell__.lastCell=h,this};s.table=function(h,p,v,y,N){if(a.call(this),!v)throw new Error("No data for PDF table.");var g,C,j,T,A=[],S=[],$=[],V={},K={},me=[],le=[],X=(N=N||{}).autoSize||!1,ee=N.printHeaders!==!1,je=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,R=N.margins||Object.assign({width:this.getPageWidth()},t),z=typeof N.padding=="number"?N.padding:3,q=N.headerBackgroundColor||"#c8c8c8",B=N.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=ee,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=je,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=B,this.setFontSize(je),y==null)S=A=Object.keys(v[0]),$=A.map(function(){return"left"});else if(Array.isArray(y)&&bs(y[0])==="object")for(A=y.map(function(ae){return ae.name}),S=y.map(function(ae){return ae.prompt||ae.name||""}),$=y.map(function(ae){return ae.align||"left"}),g=0;g<y.length;g+=1)K[y[g].name]=y[g].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(S=A=y,$=A.map(function(){return"left"}));if(X||Array.isArray(y)&&typeof y[0]=="string")for(g=0;g<A.length;g+=1){for(V[T=A[g]]=v.map(function(ae){return ae[T]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=V[T],this.setFont(void 0,"normal"),j=0;j<C.length;j+=1)me.push(this.getTextDimensions(C[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[T]=Math.max.apply(null,me)+z+z,me=[]}if(ee){var ge={};for(g=0;g<A.length;g+=1)ge[A[g]]={},ge[A[g]].text=S[g],ge[A[g]].align=$[g];var ue=u.call(this,ge,K);le=A.map(function(ae){return new l(h,p,K[ae],ue,ge[ae].text,void 0,ge[ae].align)}),this.setTableHeaderRow(le),this.printHeaderRow(1,!1)}var be=y.reduce(function(ae,fe){return ae[fe.name]=fe.align,ae},{});for(g=0;g<v.length;g+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:g,data:v[g]},this);var ne=u.call(this,v[g],K);for(j=0;j<A.length;j+=1){var ve=v[g][A[j]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:g,col:j,data:ve},this),d.call(this,new l(h,p,K[A[j]],ne,ve,g+2,be[A[j]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=p,this};var u=function(h,p){var v=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(g){var C=h[g];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,p[g]-v-v)},this).map(function(g){return this.getLineHeightFactor()*g.length*y/N+v+v},this).reduce(function(g,C){return Math.max(g,C)},0)};s.setTableHeaderRow=function(h){a.call(this),this.internal.__cell__.tableHeaderRow=h},s.printHeaderRow=function(h,p){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){v=this.internal.__cell__.tableHeaderRow[g].clone(),p&&(v.y=this.internal.__cell__.margins.top||0,N.push(v)),v.lineNumber=h;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,v),this.setTextColor(C)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),r=!1}}(jt.API);var Jg={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Qg=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fh=Kg(Qg),Xg=[100,200,300,400,500,600,700,800,900],zb=Kg(Xg);function mh(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),r=function(l){return Jg[l=l||"normal"]?l:"normal"}(s.style),a=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(s.weight),i=function(l){return typeof fh[l=l||"normal"]=="number"?l:"normal"}(s.stretch);return{family:t,style:r,weight:a,stretch:i,src:s.src||[],ref:s.ref||{name:t,style:[i,r,a].join(" ")}}}function Nf(s,t,r,a){var i;for(i=r;i>=0&&i<t.length;i+=a)if(s[t[i]])return s[t[i]];for(i=r;i>=0&&i<t.length;i-=a)if(s[t[i]])return s[t[i]]}var Bb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function _f(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function qb(s,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},Bb,r.genericFontFamilies||{}),l=null,d=null,u=0;u<t.length;++u)if(i[(l=mh(t[u])).family]&&(l.family=i[l.family]),s.hasOwnProperty(l.family)){d=s[l.family];break}if(!(d=d||s[a]))throw new Error("Could not find a font-family for the rule '"+_f(l)+"' and default family '"+a+"'.");if(d=function(h,p){if(p[h])return p[h];var v=fh[h],y=v<=fh.normal?-1:1,N=Nf(p,Qg,v,y);if(!N)throw new Error("Could not find a matching font-stretch value for "+h);return N}(l.stretch,d),d=function(h,p){if(p[h])return p[h];for(var v=Jg[h],y=0;y<v.length;++y)if(p[v[y]])return p[v[y]];throw new Error("Could not find a matching font-style for "+h)}(l.style,d),!(d=function(h,p){if(p[h])return p[h];if(h===400&&p[500])return p[500];if(h===500&&p[400])return p[400];var v=zb[h],y=Nf(p,Xg,v,h<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+h);return y}(l.weight,d)))throw new Error("Failed to resolve a font for the rule '"+_f(l)+"'.");return d}function Sf(s){return s.trimLeft()}function Hb(s,t){for(var r=0;r<s.length;){if(s.charAt(r)===t)return[s.substring(0,r),s.substring(r+1)];r+=1}return null}function $b(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var pc,kf,Cf,Id=["times"];(function(s){var t,r,a,i,l,d,u,h,p,v=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new h,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new d,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new d,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new y(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,p=new v}]);var y=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=E;Object.defineProperty(this,"pdf",{get:function(){return W}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(xe){Z=!!xe}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(xe){Q=!!xe}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(xe){isNaN(xe)||(re=xe)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(xe){isNaN(xe)||(de=xe)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(xe){var G;typeof xe=="number"?G=[xe,xe,xe,xe]:((G=new Array(4))[0]=xe[0],G[1]=xe.length>=2?xe[1]:G[0],G[2]=xe.length>=3?xe[2]:G[0],G[3]=xe.length>=4?xe[3]:G[1]),p.margin=G}});var Ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ne},set:function(xe){Ne=xe}});var J=0;Object.defineProperty(this,"lastBreak",{get:function(){return J},set:function(xe){J=xe}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(xe){oe=xe}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(xe){xe instanceof v&&(p=xe)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(xe){p.path=xe}});var ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return ie},set:function(xe){ie=xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xe){var G;G=N(xe),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xe){var G=N(xe);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xe){["butt","round","square"].indexOf(xe)!==-1&&(this.ctx.lineCap=xe,this.pdf.setLineCap(xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xe){isNaN(xe)||(this.ctx.lineWidth=xe,this.pdf.setLineWidth(xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xe){["bevel","round","miter"].indexOf(xe)!==-1&&(this.ctx.lineJoin=xe,this.pdf.setLineJoin(xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xe){isNaN(xe)||(this.ctx.miterLimit=xe,this.pdf.setMiterLimit(xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xe){this.ctx.textBaseline=xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xe){["right","end","center","left","start"].indexOf(xe)!==-1&&(this.ctx.textAlign=xe)}});var Te=null;function se(xe,G){if(Te===null){var Ve=function(et){var Be=[];return Object.keys(et).forEach(function(We){et[We].forEach(function(Ze){var Ge=null;switch(Ze){case"bold":Ge={family:We,weight:"bold"};break;case"italic":Ge={family:We,style:"italic"};break;case"bolditalic":Ge={family:We,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:We}}Ge!==null&&(Ge.ref={name:We,style:Ze},Be.push(Ge))})}),Be}(xe.getFontList());Te=function(et){for(var Be={},We=0;We<et.length;++We){var Ze=mh(et[We]),Ge=Ze.family,ct=Ze.stretch,wt=Ze.style,St=Ze.weight;Be[Ge]=Be[Ge]||{},Be[Ge][ct]=Be[Ge][ct]||{},Be[Ge][ct][wt]=Be[Ge][ct][wt]||{},Be[Ge][ct][wt][St]=Ze}return Be}(Ve.concat(G))}return Te}var Ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ae},set:function(xe){Te=null,Ae=xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xe){var G;if(this.ctx.font=xe,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xe))!==null){var Ve=G[1];G[2];var et=G[3],Be=G[4];G[5];var We=G[6],Ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Be)[2];Be=Math.floor(Ze==="px"?parseFloat(Be)*this.pdf.internal.scaleFactor:Ze==="em"?parseFloat(Be)*this.pdf.getFontSize():parseFloat(Be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Be);var Ge=function(ut){var Dt,Je,Ys=[],Vt=ut.trim();if(Vt==="")return Id;if(Vt in jf)return[jf[Vt]];for(;Vt!=="";){switch(Je=null,Dt=(Vt=Sf(Vt)).charAt(0)){case'"':case"'":Je=Hb(Vt.substring(1),Dt);break;default:Je=$b(Vt)}if(Je===null||(Ys.push(Je[0]),(Vt=Sf(Je[1]))!==""&&Vt.charAt(0)!==","))return Id;Vt=Vt.replace(/^,/,"")}return Ys}(We);if(this.fontFaces){var ct=qb(se(this.pdf,this.fontFaces),Ge.map(function(ut){return{family:ut,stretch:"normal",weight:et,style:Ve}}));this.pdf.setFont(ct.ref.name,ct.ref.style)}else{var wt="";(et==="bold"||parseInt(et,10)>=700||Ve==="bold")&&(wt="bold"),Ve==="italic"&&(wt+="italic"),wt.length===0&&(wt="normal");for(var St="",kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Wt=0;Wt<Ge.length;Wt++){if(this.pdf.internal.getFont(Ge[Wt],wt,{noFallback:!0,disableWarning:!0})!==void 0){St=Ge[Wt];break}if(wt==="bolditalic"&&this.pdf.internal.getFont(Ge[Wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)St=Ge[Wt],wt="bold";else if(this.pdf.internal.getFont(Ge[Wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){St=Ge[Wt],wt="normal";break}}if(St===""){for(var Yt=0;Yt<Ge.length;Yt++)if(kt[Ge[Yt]]){St=kt[Ge[Yt]];break}}St=St===""?"Times":St,this.pdf.setFont(St,wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xe){this.ctx.globalCompositeOperation=xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xe){this.ctx.globalAlpha=xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xe){this.ctx.lineDashOffset=xe,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xe){this.ctx.lineDash=xe,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xe){this.ctx.ignoreClearRect=!!xe}})};y.prototype.setLineDash=function(E){this.lineDash=E},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){V.call(this,"fill",!1)},y.prototype.stroke=function(){V.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(E,W){if(isNaN(E)||isNaN(W))throw Cs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new d(E,W));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new d(E,W)},y.prototype.closePath=function(){var E=new d(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&bs(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){E=new d(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(E.x,E.y)},y.prototype.lineTo=function(E,W){if(isNaN(E)||isNaN(W))throw Cs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new d(E,W));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new d(Z.x,Z.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},y.prototype.quadraticCurveTo=function(E,W,Z,Q){if(isNaN(Z)||isNaN(Q)||isNaN(E)||isNaN(W))throw Cs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new d(Z,Q)),de=this.ctx.transform.applyToPoint(new d(E,W));this.path.push({type:"qct",x1:de.x,y1:de.y,x:re.x,y:re.y}),this.ctx.lastPoint=new d(re.x,re.y)},y.prototype.bezierCurveTo=function(E,W,Z,Q,re,de){if(isNaN(re)||isNaN(de)||isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(Q))throw Cs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ne=this.ctx.transform.applyToPoint(new d(re,de)),J=this.ctx.transform.applyToPoint(new d(E,W)),oe=this.ctx.transform.applyToPoint(new d(Z,Q));this.path.push({type:"bct",x1:J.x,y1:J.y,x2:oe.x,y2:oe.y,x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new d(Ne.x,Ne.y)},y.prototype.arc=function(E,W,Z,Q,re,de){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(Q)||isNaN(re))throw Cs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var Ne=this.ctx.transform.applyToPoint(new d(E,W));E=Ne.x,W=Ne.y;var J=this.ctx.transform.applyToPoint(new d(0,Z)),oe=this.ctx.transform.applyToPoint(new d(0,0));Z=Math.sqrt(Math.pow(J.x-oe.x,2)+Math.pow(J.y-oe.y,2))}Math.abs(re-Q)>=2*Math.PI&&(Q=0,re=2*Math.PI),this.path.push({type:"arc",x:E,y:W,radius:Z,startAngle:Q,endAngle:re,counterclockwise:de})},y.prototype.arcTo=function(E,W,Z,Q,re){throw new Error("arcTo not implemented.")},y.prototype.rect=function(E,W,Z,Q){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(Q))throw Cs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,W),this.lineTo(E+Z,W),this.lineTo(E+Z,W+Q),this.lineTo(E,W+Q),this.lineTo(E,W),this.lineTo(E+Z,W),this.lineTo(E,W)},y.prototype.fillRect=function(E,W,Z,Q){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(Q))throw Cs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,W,Z,Q),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},y.prototype.strokeRect=function(E,W,Z,Q){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(Q))throw Cs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(E,W,Z,Q),this.stroke())},y.prototype.clearRect=function(E,W,Z,Q){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(Q))throw Cs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,W,Z,Q))},y.prototype.save=function(E){E=typeof E!="boolean"||E;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},y.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(W),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(E){var W,Z,Q,re;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))W=0,Z=0,Q=0,re=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(de!==null)W=parseInt(de[1]),Z=parseInt(de[2]),Q=parseInt(de[3]),re=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)W=parseInt(de[1]),Z=parseInt(de[2]),Q=parseInt(de[3]),re=parseFloat(de[4]);else{if(re=1,typeof E=="string"&&E.charAt(0)!=="#"){var Ne=new Ug(E);E=Ne.ok?Ne.toHex():"#000000"}E.length===4?(W=E.substring(1,2),W+=W,Z=E.substring(2,3),Z+=Z,Q=E.substring(3,4),Q+=Q):(W=E.substring(1,3),Z=E.substring(3,5),Q=E.substring(5,7)),W=parseInt(W,16),Z=parseInt(Z,16),Q=parseInt(Q,16)}}return{r:W,g:Z,b:Q,a:re,style:E}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(E,W,Z,Q){if(isNaN(W)||isNaN(Z)||typeof E!="string")throw Cs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!g.call(this)){var re=ne(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;z.call(this,{text:E,x:W,y:Z,scale:de,angle:re,align:this.textAlign,maxWidth:Q})}},y.prototype.strokeText=function(E,W,Z,Q){if(isNaN(W)||isNaN(Z)||typeof E!="string")throw Cs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){Q=isNaN(Q)?void 0:Q;var re=ne(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;z.call(this,{text:E,x:W,y:Z,scale:de,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:Q})}},y.prototype.measureText=function(E){if(typeof E!="string")throw Cs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Z=this.pdf.internal.scaleFactor,Q=W.internal.getFontSize(),re=W.getStringUnitWidth(E)*Q/W.internal.scaleFactor,de=function(Ne){var J=(Ne=Ne||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return J}}),this};return new de({width:re*=Math.round(96*Z/72*1e4)/1e4})},y.prototype.scale=function(E,W){if(isNaN(E)||isNaN(W))throw Cs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new h(E,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},y.prototype.rotate=function(E){if(isNaN(E))throw Cs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new h(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},y.prototype.translate=function(E,W){if(isNaN(E)||isNaN(W))throw Cs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new h(1,0,0,1,E,W);this.ctx.transform=this.ctx.transform.multiply(Z)},y.prototype.transform=function(E,W,Z,Q,re,de){if(isNaN(E)||isNaN(W)||isNaN(Z)||isNaN(Q)||isNaN(re)||isNaN(de))throw Cs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ne=new h(E,W,Z,Q,re,de);this.ctx.transform=this.ctx.transform.multiply(Ne)},y.prototype.setTransform=function(E,W,Z,Q,re,de){E=isNaN(E)?1:E,W=isNaN(W)?0:W,Z=isNaN(Z)?0:Z,Q=isNaN(Q)?1:Q,re=isNaN(re)?0:re,de=isNaN(de)?0:de,this.ctx.transform=new h(E,W,Z,Q,re,de)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(E,W,Z,Q,re,de,Ne,J,oe){var ie=this.pdf.getImageProperties(E),Te=1,se=1,Ae=1,xe=1;Q!==void 0&&J!==void 0&&(Ae=J/Q,xe=oe/re,Te=ie.width/Q*J/Q,se=ie.height/re*oe/re),de===void 0&&(de=W,Ne=Z,W=0,Z=0),Q!==void 0&&J===void 0&&(J=Q,oe=re),Q===void 0&&J===void 0&&(J=ie.width,oe=ie.height);for(var G,Ve=this.ctx.transform.decompose(),et=ne(Ve.rotate.shx),Be=new h,We=(Be=(Be=(Be=Be.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale)).applyToRectangle(new u(de-W*Ae,Ne-Z*xe,Q*Te,re*se)),Ze=T.call(this,We),Ge=[],ct=0;ct<Ze.length;ct+=1)Ge.indexOf(Ze[ct])===-1&&Ge.push(Ze[ct]);if($(Ge),this.autoPaging)for(var wt=Ge[0],St=Ge[Ge.length-1],kt=wt;kt<St+1;kt++){this.pdf.setPage(kt);var Wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Yt=kt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=kt===1?0:ut+(kt-2)*Dt;if(this.ctx.clip_path.length!==0){var Ys=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(G,this.posX+this.margin[3],-Je+Yt+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=Ys}var Vt=JSON.parse(JSON.stringify(We));Vt=S([Vt],this.posX+this.margin[3],-Je+Yt+this.ctx.prevPageLastElemOffset)[0];var kr=(kt>wt||kt<St)&&j.call(this);kr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,Dt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,et),kr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",We.x,We.y,We.w,We.h,null,null,et)};var T=function(E,W,Z){var Q=[];W=W||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":Q.push(Math.floor((E.y+re)/Z)+1);break;case"arc":Q.push(Math.floor((E.y+re-E.radius)/Z)+1),Q.push(Math.floor((E.y+re+E.radius)/Z)+1);break;case"qct":var de=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);Q.push(Math.floor((de.y+re)/Z)+1),Q.push(Math.floor((de.y+de.h+re)/Z)+1);break;case"bct":var Ne=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);Q.push(Math.floor((Ne.y+re)/Z)+1),Q.push(Math.floor((Ne.y+Ne.h+re)/Z)+1);break;case"rect":Q.push(Math.floor((E.y+re)/Z)+1),Q.push(Math.floor((E.y+E.h+re)/Z)+1)}for(var J=0;J<Q.length;J+=1)for(;this.pdf.internal.getNumberOfPages()<Q[J];)A.call(this);return Q},A=function(){var E=this.fillStyle,W=this.strokeStyle,Z=this.font,Q=this.lineCap,re=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=W,this.font=Z,this.lineCap=Q,this.lineWidth=re,this.lineJoin=de},S=function(E,W,Z){for(var Q=0;Q<E.length;Q++)switch(E[Q].type){case"bct":E[Q].x2+=W,E[Q].y2+=Z;case"qct":E[Q].x1+=W,E[Q].y1+=Z;case"mt":case"lt":case"arc":default:E[Q].x+=W,E[Q].y+=Z}return E},$=function(E){return E.sort(function(W,Z){return W-Z})},V=function(E,W){for(var Z,Q,re=this.fillStyle,de=this.strokeStyle,Ne=this.lineCap,J=this.lineWidth,oe=Math.abs(J*this.ctx.transform.scaleX),ie=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),se=JSON.parse(JSON.stringify(this.path)),Ae=[],xe=0;xe<se.length;xe++)if(se[xe].x!==void 0)for(var G=T.call(this,se[xe]),Ve=0;Ve<G.length;Ve+=1)Ae.indexOf(G[Ve])===-1&&Ae.push(G[Ve]);for(var et=0;et<Ae.length;et++)for(;this.pdf.internal.getNumberOfPages()<Ae[et];)A.call(this);if($(Ae),this.autoPaging)for(var Be=Ae[0],We=Ae[Ae.length-1],Ze=Be;Ze<We+1;Ze++){this.pdf.setPage(Ze),this.fillStyle=re,this.strokeStyle=de,this.lineCap=Ne,this.lineWidth=oe,this.lineJoin=ie;var Ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=Ze===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],kt=Ze===1?0:wt+(Ze-2)*St;if(this.ctx.clip_path.length!==0){var Wt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Z,this.posX+this.margin[3],-kt+ct+this.ctx.prevPageLastElemOffset),K.call(this,E,!0),this.path=Wt}if(Q=JSON.parse(JSON.stringify(Te)),this.path=S(Q,this.posX+this.margin[3],-kt+ct+this.ctx.prevPageLastElemOffset),W===!1||Ze===0){var Yt=(Ze>Be||Ze<We)&&j.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,St,null).clip().discardPath()),K.call(this,E,W),Yt&&this.pdf.restoreGraphicsState()}this.lineWidth=J}else this.lineWidth=oe,K.call(this,E,W),this.lineWidth=J;this.path=Te},K=function(E,W){if((E!=="stroke"||W||!C.call(this))&&(E==="stroke"||W||!g.call(this))){for(var Z,Q,re=[],de=this.path,Ne=0;Ne<de.length;Ne++){var J=de[Ne];switch(J.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:J,deltas:[],abs:[]});break;case"lt":var oe=re.length;if(de[Ne-1]&&!isNaN(de[Ne-1].x)&&(Z=[J.x-de[Ne-1].x,J.y-de[Ne-1].y],oe>0)){for(;oe>=0;oe--)if(re[oe-1].close!==!0&&re[oe-1].begin!==!0){re[oe-1].deltas.push(Z),re[oe-1].abs.push(J);break}}break;case"bct":Z=[J.x1-de[Ne-1].x,J.y1-de[Ne-1].y,J.x2-de[Ne-1].x,J.y2-de[Ne-1].y,J.x-de[Ne-1].x,J.y-de[Ne-1].y],re[re.length-1].deltas.push(Z);break;case"qct":var ie=de[Ne-1].x+2/3*(J.x1-de[Ne-1].x),Te=de[Ne-1].y+2/3*(J.y1-de[Ne-1].y),se=J.x+2/3*(J.x1-J.x),Ae=J.y+2/3*(J.y1-J.y),xe=J.x,G=J.y;Z=[ie-de[Ne-1].x,Te-de[Ne-1].y,se-de[Ne-1].x,Ae-de[Ne-1].y,xe-de[Ne-1].x,G-de[Ne-1].y],re[re.length-1].deltas.push(Z);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(J)}}Q=W?null:E==="stroke"?"stroke":"fill";for(var Ve=!1,et=0;et<re.length;et++)if(re[et].arc)for(var Be=re[et].abs,We=0;We<Be.length;We++){var Ze=Be[We];Ze.type==="arc"?X.call(this,Ze.x,Ze.y,Ze.radius,Ze.startAngle,Ze.endAngle,Ze.counterclockwise,void 0,W,!Ve):q.call(this,Ze.x,Ze.y),Ve=!0}else if(re[et].close===!0)this.pdf.internal.out("h"),Ve=!1;else if(re[et].begin!==!0){var Ge=re[et].start.x,ct=re[et].start.y;B.call(this,re[et].deltas,Ge,ct),Ve=!0}Q&&ee.call(this,Q),W&&je.call(this)}},me=function(E){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-Z;case"top":return E+W-Z;case"hanging":return E+W-2*Z;case"middle":return E+W/2-Z;case"ideographic":return E;case"alphabetic":default:return E}},le=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(W,Z){this.colorStops.push([W,Z])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var X=function(E,W,Z,Q,re,de,Ne,J,oe){for(var ie=ue.call(this,Z,Q,re,de),Te=0;Te<ie.length;Te++){var se=ie[Te];Te===0&&(oe?R.call(this,se.x1+E,se.y1+W):q.call(this,se.x1+E,se.y1+W)),ge.call(this,E,W,se.x2,se.y2,se.x3,se.y3,se.x4,se.y4)}J?je.call(this):ee.call(this,Ne)},ee=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},je=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(E,W){this.pdf.internal.out(r(E)+" "+a(W)+" m")},z=function(E){var W;switch(E.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Z=this.pdf.getTextDimensions(E.text),Q=me.call(this,E.y),re=le.call(this,Q)-Z.h,de=this.ctx.transform.applyToPoint(new d(E.x,Q)),Ne=this.ctx.transform.decompose(),J=new h;J=(J=(J=J.multiply(Ne.translate)).multiply(Ne.skew)).multiply(Ne.scale);for(var oe,ie,Te,se=this.ctx.transform.applyToRectangle(new u(E.x,Q,Z.w,Z.h)),Ae=J.applyToRectangle(new u(E.x,re,Z.w,Z.h)),xe=T.call(this,Ae),G=[],Ve=0;Ve<xe.length;Ve+=1)G.indexOf(xe[Ve])===-1&&G.push(xe[Ve]);if($(G),this.autoPaging)for(var et=G[0],Be=G[G.length-1],We=et;We<Be+1;We++){this.pdf.setPage(We);var Ze=We===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],wt=ct-this.margin[0],St=this.pdf.internal.pageSize.width-this.margin[1],kt=St-this.margin[3],Wt=We===1?0:Ge+(We-2)*wt;if(this.ctx.clip_path.length!==0){var Yt=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(oe,this.posX+this.margin[3],-1*Wt+Ze),K.call(this,"fill",!0),this.path=Yt}var ut=S([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-Wt+Ze+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*E.scale),Te=this.lineWidth,this.lineWidth=Te*E.scale);var Dt=this.autoPaging!=="text";if(Dt||ut.y+ut.h<=ct){if(Dt||ut.y>=Ze&&ut.x<=St){var Je=Dt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||St-ut.x)[0],Ys=S([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-Wt+Ze+this.ctx.prevPageLastElemOffset)[0],Vt=Dt&&(We>et||We<Be)&&j.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,wt,null).clip().discardPath()),this.pdf.text(Je,Ys.x,Ys.y,{angle:E.angle,align:W,renderingMode:E.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else ut.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-ut.y);E.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=Te)}else E.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*E.scale),Te=this.lineWidth,this.lineWidth=Te*E.scale),this.pdf.text(E.text,de.x+this.posX,de.y+this.posY,{angle:E.angle,align:W,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=Te)},q=function(E,W,Z,Q){Z=Z||0,Q=Q||0,this.pdf.internal.out(r(E+Z)+" "+a(W+Q)+" l")},B=function(E,W,Z){return this.pdf.lines(E,W,Z,null,null)},ge=function(E,W,Z,Q,re,de,Ne,J){this.pdf.internal.out([t(i(Z+E)),t(l(Q+W)),t(i(re+E)),t(l(de+W)),t(i(Ne+E)),t(l(J+W)),"c"].join(" "))},ue=function(E,W,Z,Q){for(var re=2*Math.PI,de=Math.PI/2;W>Z;)W-=re;var Ne=Math.abs(Z-W);Ne<re&&Q&&(Ne=re-Ne);for(var J=[],oe=Q?-1:1,ie=W;Ne>1e-5;){var Te=ie+oe*Math.min(Ne,de);J.push(be.call(this,E,ie,Te)),Ne-=Math.abs(Te-ie),ie=Te}return J},be=function(E,W,Z){var Q=(Z-W)/2,re=E*Math.cos(Q),de=E*Math.sin(Q),Ne=re,J=-de,oe=Ne*Ne+J*J,ie=oe+Ne*re+J*de,Te=4/3*(Math.sqrt(2*oe*ie)-ie)/(Ne*de-J*re),se=Ne-Te*J,Ae=J+Te*Ne,xe=se,G=-Ae,Ve=Q+W,et=Math.cos(Ve),Be=Math.sin(Ve);return{x1:E*Math.cos(W),y1:E*Math.sin(W),x2:se*et-Ae*Be,y2:se*Be+Ae*et,x3:xe*et-G*Be,y3:xe*Be+G*et,x4:E*Math.cos(Z),y4:E*Math.sin(Z)}},ne=function(E){return 180*E/Math.PI},ve=function(E,W,Z,Q,re,de){var Ne=E+.5*(Z-E),J=W+.5*(Q-W),oe=re+.5*(Z-re),ie=de+.5*(Q-de),Te=Math.min(E,re,Ne,oe),se=Math.max(E,re,Ne,oe),Ae=Math.min(W,de,J,ie),xe=Math.max(W,de,J,ie);return new u(Te,Ae,se-Te,xe-Ae)},ae=function(E,W,Z,Q,re,de,Ne,J){var oe,ie,Te,se,Ae,xe,G,Ve,et,Be,We,Ze,Ge,ct,wt=Z-E,St=Q-W,kt=re-Z,Wt=de-Q,Yt=Ne-re,ut=J-de;for(ie=0;ie<41;ie++)et=(G=(Te=E+(oe=ie/40)*wt)+oe*((Ae=Z+oe*kt)-Te))+oe*(Ae+oe*(re+oe*Yt-Ae)-G),Be=(Ve=(se=W+oe*St)+oe*((xe=Q+oe*Wt)-se))+oe*(xe+oe*(de+oe*ut-xe)-Ve),ie==0?(We=et,Ze=Be,Ge=et,ct=Be):(We=Math.min(We,et),Ze=Math.min(Ze,Be),Ge=Math.max(Ge,et),ct=Math.max(ct,Be));return new u(Math.round(We),Math.round(Ze),Math.round(Ge-We),Math.round(ct-Ze))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,W,Z=(E=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:W}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(jt.API),function(s){var t=function(l){var d,u,h,p,v,y,N,g,C,j;for(u=[],h=0,p=(l+=d="\0\0\0\0".slice(l.length%4||4)).length;p>h;h+=4)(v=(l.charCodeAt(h)<<24)+(l.charCodeAt(h+1)<<16)+(l.charCodeAt(h+2)<<8)+l.charCodeAt(h+3))!==0?(y=(v=((v=((v=((v=(v-(j=v%85))/85)-(C=v%85))/85)-(g=v%85))/85)-(N=v%85))/85)%85,u.push(y+33,N+33,g+33,C+33,j+33)):u.push(122);return function(T,A){for(var S=A;S>0;S--)T.pop()}(u,d.length),String.fromCharCode.apply(String,u)+"~>"},r=function(l){var d,u,h,p,v,y=String,N="length",g=255,C="charCodeAt",j="slice",T="replace";for(l[j](-2),l=l[j](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),h=[],p=0,v=(l+=d="uuuuu"[j](l[N]%5||5))[N];v>p;p+=5)u=52200625*(l[C](p)-33)+614125*(l[C](p+1)-33)+7225*(l[C](p+2)-33)+85*(l[C](p+3)-33)+(l[C](p+4)-33),h.push(g&u>>24,g&u>>16,g&u>>8,g&u);return function(A,S){for(var $=S;$>0;$--)A.pop()}(h,d[N]),y.fromCharCode.apply(y,h)},a=function(l){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),d.test(l)===!1)return"";for(var u="",h=0;h<l.length;h+=2)u+=String.fromCharCode("0x"+(l[h]+l[h+1]));return u},i=function(l){for(var d=new Uint8Array(l.length),u=l.length;u--;)d[u]=l.charCodeAt(u);return l=(d=lh(d)).reduce(function(h,p){return h+String.fromCharCode(p)},"")};s.processDataByFilters=function(l,d){var u=0,h=l||"",p=[];for(typeof(d=d||[])=="string"&&(d=[d]),u=0;u<d.length;u+=1)switch(d[u]){case"ASCII85Decode":case"/ASCII85Decode":h=r(h),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=a(h),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=i(h),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[u]+'" is not implemented')}return{data:h,reverseChain:p.reverse().join(" ")}}}(jt.API),function(s){s.loadFile=function(t,r,a){return function(i,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var u=void 0;try{u=function(h,p,v){var y=new XMLHttpRequest,N=0,g=function(C){var j=C.length,T=[],A=String.fromCharCode;for(N=0;N<j;N+=1)T.push(A(255&C.charCodeAt(N)));return T.join("")};if(y.open("GET",h,!p),y.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(y.onload=function(){y.status===200?v(g(this.responseText)):v(void 0)}),y.send(null),p&&y.status===200)return g(y.responseText)}(i,l,d)}catch{}return u}(t,r,a)},s.loadImageFile=s.loadFile}(jt.API),function(s){function t(){return(_t.html2canvas?Promise.resolve(_t.html2canvas):rh(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function r(){return(_t.DOMPurify?Promise.resolve(_t.DOMPurify):rh(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var a=function(d){var u=bs(d);return u==="undefined"?"undefined":u==="string"||d instanceof String?"string":u==="number"||d instanceof Number?"number":u==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(d,u){var h=document.createElement(d);for(var p in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[p]=u.style[p];return h},l=function d(u){var h=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),p=d.convert(Promise.resolve(),h);return p=(p=p.setProgress(1,d,1,[d])).set(u)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(d,u){return d.__proto__=u||l.prototype,d},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(d,u){return this.then(function(){switch(u=u||function(h){switch(a(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(d)){case"string":return this.then(r).then(function(h){return this.set({src:i("div",{innerHTML:d,dompurify:h})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},l.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function h(p,v){for(var y=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),N=p.firstChild;N;N=N.nextSibling)v!==!0&&N.nodeType===1&&N.nodeName==="SCRIPT"||y.appendChild(h(N,v));return p.nodeType===1&&(p.nodeName==="CANVAS"?(y.width=p.width,y.height=p.height,y.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(y.value=p.value),y.addEventListener("load",function(){y.scrollTop=p.scrollTop,y.scrollLeft=p.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(t).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(t).then(function(u){var h=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=p,p)for(var N=0;N<p.length;++N){var g=p[N],C=g.src.find(function(j){return j.format==="truetype"});C&&h.addFont(C.url,g.ref.name,g.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(d,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(d,u):this.outputPdf(d,u)},l.prototype.outputPdf=function(d,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,u)})},l.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},l.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(d){if(a(d)!=="object")return this;var u=Object.keys(d||{}).map(function(h){if(h in l.template.prop)return function(){this.prop[h]=d[h]};switch(h){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[h]=d[h]}}},this);return this.then(function(){return this.thenList(u)})},l.prototype.get=function(d,u){return this.then(function(){var h=d in l.template.prop?this.prop[d]:this.opt[d];return u?u(h):h})},l.prototype.setMargin=function(d){return this.then(function(){switch(a(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},l.prototype.setPageSize=function(d){function u(h,p){return Math.floor(h*p/72*96)}return this.then(function(){(d=d||jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:u(d.inner.width,d.k),height:u(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},l.prototype.setProgress=function(d,u,h,p){return d!=null&&(this.progress.val=d),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(d,u,h,p){return this.setProgress(d?this.progress.val+d:null,u||null,h?this.progress.n+h:null,p?this.progress.stack.concat(p):null)},l.prototype.then=function(d,u){var h=this;return this.thenCore(d,u,function(p,v){return h.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,p),y}).then(p,v).then(function(y){return h.updateProgress(1),y})})},l.prototype.thenCore=function(d,u,h){h=h||Promise.prototype.then,d&&(d=d.bind(this)),u&&(u=u.bind(this));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),v=h.call(p,d,u);return l.convert(v,this.__proto__)},l.prototype.thenExternal=function(d,u){return Promise.prototype.then.call(this,d,u)},l.prototype.thenList=function(d){var u=this;return d.forEach(function(h){u=u.thenCore(h)}),u},l.prototype.catch=function(d){d&&(d=d.bind(this));var u=Promise.prototype.catch.call(this,d);return l.convert(u,this)},l.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},l.prototype.error=function(d){return this.then(function(){throw new Error(d)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,jt.getPageSize=function(d,u,h){if(bs(d)==="object"){var p=d;d=p.orientation,u=p.unit||u,h=p.format||h}u=u||"mm",h=h||"a4",d=(""+(d||"P")).toLowerCase();var v,y=(""+h).toLowerCase(),N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+u}var g,C=0,j=0;if(N.hasOwnProperty(y))C=N[y][1]/v,j=N[y][0]/v;else try{C=h[1],j=h[0]}catch{throw new Error("Invalid format: "+h)}if(d==="p"||d==="portrait")d="p",j>C&&(g=j,j=C,C=g);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>j&&(g=j,j=C,C=g)}return{width:j,height:C,unit:u,k:v,orientation:d}},s.html=function(d,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(mh):null;var h=new l(u);return u.worker?h:h.from(d).doCallback()}}(jt.API),jt.API.addJS=function(s){return Cf=s,this.internal.events.subscribe("postPutResources",function(){pc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),kf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Cf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){pc!==void 0&&kf!==void 0&&this.internal.out("/Names <</JavaScript "+pc+" 0 R>>")}),this},function(s){var t;s.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),l=0;l<i.length;l++){var d=i[l],u=a.exec(d);if(u!=null){var h=u[1];r.internal.newObjectDeferredBegin(h,!1)}r.internal.write(d)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,v=[];for(l=0;l<p;l++){var y=r.internal.newObject();v.push(y);var N=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<v.length;l++)r.internal.write("(page_"+(l+1)+")"+v[l]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,i,l){var d={title:i,options:l,children:[]};return a==null&&(a=this.root),a.children.push(d),d},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var i=0;i<a.children.length;i++)this.genIds_r(a.children[i])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<a.children.length;l++){var d=a.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(a)),l>0&&this.line("/Prev "+this.makeRef(a.children[l-1])),l<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var u=this.count=this.count_r({count:0},d);if(u>0&&this.line("/Count "+u),d.options&&d.options.pageNumber){var h=r.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var p=0;p<a.children.length;p++)this.renderItems(a.children[p])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,i){for(var l=0;l<i.children.length;l++)a.count++,this.count_r(a,i.children[l]);return a.count}}])}(jt.API),function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(r,a,i,l,d,u){var h,p=this.decode.DCT_DECODE,v=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=d||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(h=function(y){for(var N,g=256*y.charCodeAt(4)+y.charCodeAt(5),C=y.length,j={width:0,height:0,numcomponents:1},T=4;T<C;T+=2){if(T+=g,t.indexOf(y.charCodeAt(T+1))!==-1){N=256*y.charCodeAt(T+5)+y.charCodeAt(T+6),j={width:256*y.charCodeAt(T+7)+y.charCodeAt(T+8),height:N,numcomponents:y.charCodeAt(T+9)};break}g=256*y.charCodeAt(T+2)+y.charCodeAt(T+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}v={data:r,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:p,index:a,alias:i}}return v}}(jt.API);var qo,gc,Pf,Lf,Af,Ub=function(){var s,t,r;function a(l){var d,u,h,p,v,y,N,g,C,j,T,A,S,$;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(d=this.readUInt32(),C=(function(){var V,K;for(K=[],V=0;V<4;++V)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(d);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),p=this.readUInt16()||100,y.delay=1e3*v/p,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,d-=4),l=y?.data||this.imgData,A=0;0<=d?A<d:A>d;0<=d?++A:--A)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(d),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((j=h-this.transparency.indexed.length)>0)for(S=0;0<=j?S<j:S>j;0<=j?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(d)[0];break;case 2:this.transparency.rgb=this.read(d)}break;case"tEXt":N=(T=this.read(d)).indexOf(0),g=String.fromCharCode.apply(String,T.slice(0,N)),this.text[g]=String.fromCharCode.apply(String,T.slice(N+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=($=this.colorType)===4||$===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=d}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(l){var d,u;for(u=[],d=0;0<=l?d<l:d>l;0<=l?++d:--d)u.push(this.data[this.pos++]);return u},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var d=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*d),h=0,p=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function v(y,N,g,C){var j,T,A,S,$,V,K,me,le,X,ee,je,R,z,q,B,ge,ue,be,ne,ve,ae=Math.ceil((p.width-y)/g),fe=Math.ceil((p.height-N)/C),E=p.width==ae&&p.height==fe;for(z=d*ae,je=E?u:new Uint8Array(z*fe),V=l.length,R=0,T=0;R<fe&&h<V;){switch(l[h++]){case 0:for(S=ge=0;ge<z;S=ge+=1)je[T++]=l[h++];break;case 1:for(S=ue=0;ue<z;S=ue+=1)j=l[h++],$=S<d?0:je[T-d],je[T++]=(j+$)%256;break;case 2:for(S=be=0;be<z;S=be+=1)j=l[h++],A=(S-S%d)/d,q=R&&je[(R-1)*z+A*d+S%d],je[T++]=(q+j)%256;break;case 3:for(S=ne=0;ne<z;S=ne+=1)j=l[h++],A=(S-S%d)/d,$=S<d?0:je[T-d],q=R&&je[(R-1)*z+A*d+S%d],je[T++]=(j+Math.floor(($+q)/2))%256;break;case 4:for(S=ve=0;ve<z;S=ve+=1)j=l[h++],A=(S-S%d)/d,$=S<d?0:je[T-d],R===0?q=B=0:(q=je[(R-1)*z+A*d+S%d],B=A&&je[(R-1)*z+(A-1)*d+S%d]),K=$+q-B,me=Math.abs(K-$),X=Math.abs(K-q),ee=Math.abs(K-B),le=me<=X&&me<=ee?$:X<=ee?q:B,je[T++]=(j+le)%256;break;default:throw new Error("Invalid filter algorithm: "+l[h-1])}if(!E){var W=((N+R*C)*p.width+y)*d,Z=R*z;for(S=0;S<ae;S+=1){for(var Q=0;Q<d;Q+=1)u[W++]=je[Z++];W+=(g-1)*d}}R++}}return l=Nb(l),p.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),u},a.prototype.decodePalette=function(){var l,d,u,h,p,v,y,N,g;for(u=this.palette,v=this.transparency.indexed||[],p=new Uint8Array((v.length||0)+u.length),h=0,l=0,d=y=0,N=u.length;y<N;d=y+=3)p[h++]=u[d],p[h++]=u[d+1],p[h++]=u[d+2],p[h++]=(g=v[l++])!=null?g:255;return p},a.prototype.copyToImageData=function(l,d){var u,h,p,v,y,N,g,C,j,T,A;if(h=this.colors,j=null,u=this.hasAlphaChannel,this.palette.length&&(j=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),h=4,u=!0),C=(p=l.data||l).length,y=j||d,v=N=0,h===1)for(;v<C;)g=j?4*d[v/4]:N,T=y[g++],p[v++]=T,p[v++]=T,p[v++]=T,p[v++]=u?y[g++]:255,N=g;else for(;v<C;)g=j?4*d[v/4]:N,p[v++]=y[g++],p[v++]=y[g++],p[v++]=y[g++],p[v++]=u?y[g++]:255,N=g},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var i=function(){if(Object.prototype.toString.call(_t)==="[object Window]"){try{t=_t.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),s=function(l){var d;if(i()===!0)return r.width=l.width,r.height=l.height,r.clearRect(0,0,l.width,l.height),r.putImageData(l,0,0),(d=new Image).src=t.toDataURL(),d;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(l){var d,u,h,p,v,y,N,g;if(this.animation){for(g=[],u=v=0,y=(N=this.animation.frames).length;v<y;u=++v)d=N[u],h=l.createImageData(d.width,d.height),p=this.decodePixels(new Uint8Array(d.data)),this.copyToImageData(h,p),d.imageData=h,g.push(d.image=s(h));return g}},a.prototype.renderFrame=function(l,d){var u,h,p;return u=(h=this.animation.frames)[d],p=h[d-1],d===0&&l.clearRect(0,0,this.width,this.height),p?.disposeOp===1?l.clearRect(p.xOffset,p.yOffset,p.width,p.height):p?.disposeOp===2&&l.putImageData(p.imageData,p.xOffset,p.yOffset),u.blendOp===0&&l.clearRect(u.xOffset,u.yOffset,u.width,u.height),l.drawImage(u.image,u.xOffset,u.yOffset)},a.prototype.animate=function(l){var d,u,h,p,v,y,N=this;return u=0,y=this.animation,p=y.numFrames,h=y.frames,v=y.numPlays,(d=function(){var g,C;if(g=u++%p,C=h[g],N.renderFrame(l,g),p>1&&u/p<v)return N.animation._timeout=setTimeout(d,C.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var d,u;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,d=l.getContext("2d"),this.animation?(this.decodeFrames(d),this.animate(d)):(u=d.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),d.putImageData(u,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Wb(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=s[t++]|s[t++]<<8,a=s[t++]|s[t++]<<8,i=s[t++],l=i>>7,d=1<<(7&i)+1;s[t++],s[t++];var u=null,h=null;l&&(u=t,h=d,t+=3*d);var p=!0,v=[],y=0,N=null,g=0,C=null;for(this.width=r,this.height=a;p&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,C=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((R=s[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=s[t++];y=s[t++]|s[t++]<<8,N=s[t++],(1&j)==0&&(N=null),g=j>>2&7,t++;break;case 254:for(;;){if(!((R=s[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var T=s[t++]|s[t++]<<8,A=s[t++]|s[t++]<<8,S=s[t++]|s[t++]<<8,$=s[t++]|s[t++]<<8,V=s[t++],K=V>>6&1,me=1<<(7&V)+1,le=u,X=h,ee=!1;V>>7&&(ee=!0,le=t,X=me,t+=3*me);var je=t;for(t++;;){var R;if(!((R=s[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}v.push({x:T,y:A,width:S,height:$,has_local_palette:ee,palette_offset:le,palette_size:X,data_offset:je,data_length:t-je,transparent_index:N,interlaced:!!K,delay:y,disposal:g});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return C},this.frameInfo=function(z){if(z<0||z>=v.length)throw new Error("Frame index out of range.");return v[z]},this.decodeAndBlitFrameBGRA=function(z,q){var B=this.frameInfo(z),ge=B.width*B.height,ue=new Uint8Array(ge);Tf(s,B.data_offset,ue,ge);var be=B.palette_offset,ne=B.transparent_index;ne===null&&(ne=256);var ve=B.width,ae=r-ve,fe=ve,E=4*(B.y*r+B.x),W=4*((B.y+B.height)*r+B.x),Z=E,Q=4*ae;B.interlaced===!0&&(Q+=4*r*7);for(var re=8,de=0,Ne=ue.length;de<Ne;++de){var J=ue[de];if(fe===0&&(fe=ve,(Z+=Q)>=W&&(Q=4*ae+4*r*(re-1),Z=E+(ve+ae)*(re<<1),re>>=1)),J===ne)Z+=4;else{var oe=s[be+3*J],ie=s[be+3*J+1],Te=s[be+3*J+2];q[Z++]=Te,q[Z++]=ie,q[Z++]=oe,q[Z++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(z,q){var B=this.frameInfo(z),ge=B.width*B.height,ue=new Uint8Array(ge);Tf(s,B.data_offset,ue,ge);var be=B.palette_offset,ne=B.transparent_index;ne===null&&(ne=256);var ve=B.width,ae=r-ve,fe=ve,E=4*(B.y*r+B.x),W=4*((B.y+B.height)*r+B.x),Z=E,Q=4*ae;B.interlaced===!0&&(Q+=4*r*7);for(var re=8,de=0,Ne=ue.length;de<Ne;++de){var J=ue[de];if(fe===0&&(fe=ve,(Z+=Q)>=W&&(Q=4*ae+4*r*(re-1),Z=E+(ve+ae)*(re<<1),re>>=1)),J===ne)Z+=4;else{var oe=s[be+3*J],ie=s[be+3*J+1],Te=s[be+3*J+2];q[Z++]=oe,q[Z++]=ie,q[Z++]=Te,q[Z++]=255}--fe}}}function Tf(s,t,r,a){for(var i=s[t++],l=1<<i,d=l+1,u=d+1,h=i+1,p=(1<<h)-1,v=0,y=0,N=0,g=s[t++],C=new Int32Array(4096),j=null;;){for(;v<16&&g!==0;)y|=s[t++]<<v,v+=8,g===1?g=s[t++]:--g;if(v<h)break;var T=y&p;if(y>>=h,v-=h,T!==l){if(T===d)break;for(var A=T<u?T:j,S=0,$=A;$>l;)$=C[$]>>8,++S;var V=$;if(N+S+(A!==T?1:0)>a)return void Cs.log("Warning, gif stream longer than expected.");r[N++]=V;var K=N+=S;for(A!==T&&(r[N++]=V),$=A;S--;)$=C[$],r[--K]=255&$,$>>=8;j!==null&&u<4096&&(C[u++]=j<<8|V,u>=p+1&&h<12&&(++h,p=p<<1|1)),j=T}else u=d+1,p=(1<<(h=i+1))-1,j=null}return N!==a&&Cs.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Rd(s){var t,r,a,i,l,d=Math.floor,u=new Array(64),h=new Array(64),p=new Array(64),v=new Array(64),y=new Array(65535),N=new Array(65535),g=new Array(64),C=new Array(64),j=[],T=0,A=7,S=new Array(64),$=new Array(64),V=new Array(64),K=new Array(256),me=new Array(2048),le=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],X=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],je=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(E,W){for(var Z=0,Q=0,re=new Array,de=1;de<=16;de++){for(var Ne=1;Ne<=E[de];Ne++)re[W[Q]]=[],re[W[Q]][0]=Z,re[W[Q]][1]=de,Q++,Z++;Z*=2}return re}function be(E){for(var W=E[0],Z=E[1]-1;Z>=0;)W&1<<Z&&(T|=1<<A),Z--,--A<0&&(T==255?(ne(255),ne(0)):ne(T),A=7,T=0)}function ne(E){j.push(E)}function ve(E){ne(E>>8&255),ne(255&E)}function ae(E,W,Z,Q,re){for(var de,Ne=re[0],J=re[240],oe=function(Be,We){var Ze,Ge,ct,wt,St,kt,Wt,Yt,ut,Dt,Je=0;for(ut=0;ut<8;++ut){Ze=Be[Je],Ge=Be[Je+1],ct=Be[Je+2],wt=Be[Je+3],St=Be[Je+4],kt=Be[Je+5],Wt=Be[Je+6];var Ys=Ze+(Yt=Be[Je+7]),Vt=Ze-Yt,kr=Ge+Wt,Qt=Ge-Wt,ws=ct+kt,rr=ct-kt,ss=wt+St,Rn=wt-St,js=Ys+ss,Mr=Ys-ss,dn=kr+ws,Ps=kr-ws;Be[Je]=js+dn,Be[Je+4]=js-dn;var Ct=.707106781*(Ps+Mr);Be[Je+2]=Mr+Ct,Be[Je+6]=Mr-Ct;var rs=.382683433*((js=Rn+rr)-(Ps=Qt+Vt)),Sn=.5411961*js+rs,Is=1.306562965*Ps+rs,nr=.707106781*(dn=rr+Qt),Ir=Vt+nr,vt=Vt-nr;Be[Je+5]=vt+Sn,Be[Je+3]=vt-Sn,Be[Je+1]=Ir+Is,Be[Je+7]=Ir-Is,Je+=8}for(Je=0,ut=0;ut<8;++ut){Ze=Be[Je],Ge=Be[Je+8],ct=Be[Je+16],wt=Be[Je+24],St=Be[Je+32],kt=Be[Je+40],Wt=Be[Je+48];var Kr=Ze+(Yt=Be[Je+56]),hn=Ze-Yt,gr=Ge+Wt,is=Ge-Wt,Ye=ct+kt,lr=ct-kt,On=wt+St,Rr=wt-St,Or=Kr+On,he=Kr-On,Re=gr+Ye,$e=gr-Ye;Be[Je]=Or+Re,Be[Je+32]=Or-Re;var st=.707106781*($e+he);Be[Je+16]=he+st,Be[Je+48]=he-st;var ht=.382683433*((Or=Rr+lr)-($e=is+hn)),$t=.5411961*Or+ht,Nt=1.306562965*$e+ht,Lt=.707106781*(Re=lr+is),At=hn+Lt,Zt=hn-Lt;Be[Je+40]=Zt+$t,Be[Je+24]=Zt-$t,Be[Je+8]=At+Nt,Be[Je+56]=At-Nt,Je++}for(ut=0;ut<64;++ut)Dt=Be[ut]*We[ut],g[ut]=Dt>0?Dt+.5|0:Dt-.5|0;return g}(E,W),ie=0;ie<64;++ie)C[le[ie]]=oe[ie];var Te=C[0]-Z;Z=C[0],Te==0?be(Q[0]):(be(Q[N[de=32767+Te]]),be(y[de]));for(var se=63;se>0&&C[se]==0;)se--;if(se==0)return be(Ne),Z;for(var Ae,xe=1;xe<=se;){for(var G=xe;C[xe]==0&&xe<=se;)++xe;var Ve=xe-G;if(Ve>=16){Ae=Ve>>4;for(var et=1;et<=Ae;++et)be(J);Ve&=15}de=32767+C[xe],be(re[(Ve<<4)+N[de]]),be(y[de]),xe++}return se!=63&&be(Ne),Z}function fe(E){E=Math.min(Math.max(E,1),100),l!=E&&(function(W){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var re=d((Z[Q]*W+50)/100);re=Math.min(Math.max(re,1),255),u[le[Q]]=re}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ne=0;Ne<64;Ne++){var J=d((de[Ne]*W+50)/100);J=Math.min(Math.max(J,1),255),h[le[Ne]]=J}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ie=0,Te=0;Te<8;Te++)for(var se=0;se<8;se++)p[ie]=1/(u[le[ie]]*oe[Te]*oe[se]*8),v[ie]=1/(h[le[ie]]*oe[Te]*oe[se]*8),ie++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),l=E)}this.encode=function(E,W){W&&fe(W),j=new Array,T=0,A=7,ve(65496),ve(65504),ve(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),ve(1),ve(1),ne(0),ne(0),function(){ve(65499),ve(132),ne(0);for(var Ge=0;Ge<64;Ge++)ne(u[Ge]);ne(1);for(var ct=0;ct<64;ct++)ne(h[ct])}(),function(Ge,ct){ve(65472),ve(17),ne(8),ve(ct),ve(Ge),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(E.width,E.height),function(){ve(65476),ve(418),ne(0);for(var Ge=0;Ge<16;Ge++)ne(X[Ge+1]);for(var ct=0;ct<=11;ct++)ne(ee[ct]);ne(16);for(var wt=0;wt<16;wt++)ne(je[wt+1]);for(var St=0;St<=161;St++)ne(R[St]);ne(1);for(var kt=0;kt<16;kt++)ne(z[kt+1]);for(var Wt=0;Wt<=11;Wt++)ne(q[Wt]);ne(17);for(var Yt=0;Yt<16;Yt++)ne(B[Yt+1]);for(var ut=0;ut<=161;ut++)ne(ge[ut])}(),ve(65498),ve(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var Z=0,Q=0,re=0;T=0,A=7,this.encode.displayName="_encode_";for(var de,Ne,J,oe,ie,Te,se,Ae,xe,G=E.data,Ve=E.width,et=E.height,Be=4*Ve,We=0;We<et;){for(de=0;de<Be;){for(ie=Be*We+de,se=-1,Ae=0,xe=0;xe<64;xe++)Te=ie+(Ae=xe>>3)*Be+(se=4*(7&xe)),We+Ae>=et&&(Te-=Be*(We+1+Ae-et)),de+se>=Be&&(Te-=de+se-Be+4),Ne=G[Te++],J=G[Te++],oe=G[Te++],S[xe]=(me[Ne]+me[J+256>>0]+me[oe+512>>0]>>16)-128,$[xe]=(me[Ne+768>>0]+me[J+1024>>0]+me[oe+1280>>0]>>16)-128,V[xe]=(me[Ne+1280>>0]+me[J+1536>>0]+me[oe+1792>>0]>>16)-128;Z=ae(S,p,Z,t,a),Q=ae($,v,Q,r,i),re=ae(V,v,re,r,i),de+=32}We+=8}if(A>=0){var Ze=[];Ze[1]=A+1,Ze[0]=(1<<A+1)-1,be(Ze)}return ve(65497),new Uint8Array(j)},s=s||50,function(){for(var E=String.fromCharCode,W=0;W<256;W++)K[W]=E(W)}(),t=ue(X,ee),r=ue(z,q),a=ue(je,R),i=ue(B,ge),function(){for(var E=1,W=2,Z=1;Z<=15;Z++){for(var Q=E;Q<W;Q++)N[32767+Q]=Z,y[32767+Q]=[],y[32767+Q][1]=Z,y[32767+Q][0]=Q;for(var re=-(W-1);re<=-E;re++)N[32767+re]=Z,y[32767+re]=[],y[32767+re][1]=Z,y[32767+re][0]=W-1+re;E<<=1,W<<=1}}(),function(){for(var E=0;E<256;E++)me[E]=19595*E,me[E+256>>0]=38470*E,me[E+512>>0]=7471*E+32768,me[E+768>>0]=-11059*E,me[E+1024>>0]=-21709*E,me[E+1280>>0]=32768*E+8421375,me[E+1536>>0]=-27439*E,me[E+1792>>0]=-5329*E}(),fe(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function la(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ef(s){function t(X){if(!X)throw Error("assert :P")}function r(X,ee,je){for(var R=0;4>R;R++)if(X[ee+R]!=je.charCodeAt(R))return!0;return!1}function a(X,ee,je,R,z){for(var q=0;q<z;q++)X[ee+q]=je[R+q]}function i(X,ee,je,R){for(var z=0;z<R;z++)X[ee+z]=je}function l(X){return new Int32Array(X)}function d(X,ee){for(var je=[],R=0;R<X;R++)je.push(new ee);return je}function u(X,ee){var je=[];return function R(z,q,B){for(var ge=B[q],ue=0;ue<ge&&(z.push(B.length>q+1?[]:new ee),!(B.length<q+1));ue++)R(z[ue],q+1,B)}(je,0,X),je}var h=function(){var X=this;function ee(c,m){for(var w=1<<m-1>>>0;c&w;)w>>>=1;return w?(c&w-1)+w:c}function je(c,m,w,_,M){t(!(_%w));do c[m+(_-=w)]=M;while(0<_)}function R(c,m,w,_,M){if(t(2328>=M),512>=M)var O=l(512);else if((O=l(M))==null)return 0;return function(D,H,U,Y,ye,Pe){var Le,Se,ze=H,Ie=1<<U,we=l(16),_e=l(16);for(t(ye!=0),t(Y!=null),t(D!=null),t(0<U),Se=0;Se<ye;++Se){if(15<Y[Se])return 0;++we[Y[Se]]}if(we[0]==ye)return 0;for(_e[1]=0,Le=1;15>Le;++Le){if(we[Le]>1<<Le)return 0;_e[Le+1]=_e[Le]+we[Le]}for(Se=0;Se<ye;++Se)Le=Y[Se],0<Y[Se]&&(Pe[_e[Le]++]=Se);if(_e[15]==1)return(Y=new z).g=0,Y.value=Pe[0],je(D,ze,1,Ie,Y),Ie;var De,He=-1,Fe=Ie-1,rt=0,Ke=1,bt=1,Xe=1<<U;for(Se=0,Le=1,ye=2;Le<=U;++Le,ye<<=1){if(Ke+=bt<<=1,0>(bt-=we[Le]))return 0;for(;0<we[Le];--we[Le])(Y=new z).g=Le,Y.value=Pe[Se++],je(D,ze+rt,ye,Xe,Y),rt=ee(rt,Le)}for(Le=U+1,ye=2;15>=Le;++Le,ye<<=1){if(Ke+=bt<<=1,0>(bt-=we[Le]))return 0;for(;0<we[Le];--we[Le]){if(Y=new z,(rt&Fe)!=He){for(ze+=Xe,De=1<<(He=Le)-U;15>He&&!(0>=(De-=we[He]));)++He,De<<=1;Ie+=Xe=1<<(De=He-U),D[H+(He=rt&Fe)].g=De+U,D[H+He].value=ze-H-He}Y.g=Le-U,Y.value=Pe[Se++],je(D,ze+(rt>>U),ye,Xe,Y),rt=ee(rt,Le)}}return Ke!=2*_e[15]-1?0:Ie}(c,m,w,_,M,O)}function z(){this.value=this.g=0}function q(){this.value=this.g=0}function B(){this.G=d(5,z),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(Ws,q)}function ge(c,m,w,_){t(c!=null),t(m!=null),t(2147483648>_),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=m,c.pa=w,c.Jd=m,c.Yc=w+_,c.Zc=4<=_?w+_-4+1:w,de(c)}function ue(c,m){for(var w=0;0<m--;)w|=J(c,128)<<m;return w}function be(c,m){var w=ue(c,m);return Ne(c)?-w:w}function ne(c,m,w,_){var M,O=0;for(t(c!=null),t(m!=null),t(4294967288>_),c.Sb=_,c.Ra=0,c.u=0,c.h=0,4<_&&(_=4),M=0;M<_;++M)O+=m[w+M]<<8*M;c.Ra=O,c.bb=_,c.oa=m,c.pa=w}function ve(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<sa-8>>>0,++c.bb,c.u-=8;Z(c)&&(c.h=1,c.u=0)}function ae(c,m){if(t(0<=m),!c.h&&m<=sn){var w=W(c)&li[m];return c.u+=m,ve(c),w}return c.h=1,c.u=0}function fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(c){return c.Ra>>>(c.u&sa-1)>>>0}function Z(c){return t(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>sa}function Q(c,m){c.u=m,c.h=Z(c)}function re(c){c.u>=Ji&&(t(c.u>=Ji),ve(c))}function de(c){t(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(t(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function Ne(c){return ue(c,1)}function J(c,m){var w=c.Ca;0>c.b&&de(c);var _=c.b,M=w*m>>>8,O=(c.I>>>_>M)+0;for(O?(w-=M,c.I-=M+1<<_>>>0):w=M+1,_=w,M=0;256<=_;)M+=8,_>>=8;return _=7^M+vr[_],c.b-=_,c.Ca=(w<<_)-1,O}function oe(c,m,w){c[m+0]=w>>24&255,c[m+1]=w>>16&255,c[m+2]=w>>8&255,c[m+3]=w>>0&255}function ie(c,m){return c[m+0]<<0|c[m+1]<<8}function Te(c,m){return ie(c,m)|c[m+2]<<16}function se(c,m){return ie(c,m)|ie(c,m+2)<<16}function Ae(c,m){var w=1<<m;return t(c!=null),t(0<m),c.X=l(w),c.X==null?0:(c.Mb=32-m,c.Xa=m,1)}function xe(c,m){t(c!=null),t(m!=null),t(c.Xa==m.Xa),a(m.X,0,c.X,0,1<<m.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function Ve(c,m,w,_){t(w!=null),t(_!=null);var M=w[0],O=_[0];return M==0&&(M=(c*O+m/2)/m),O==0&&(O=(m*M+c/2)/c),0>=M||0>=O?0:(w[0]=M,_[0]=O,1)}function et(c,m){return c+(1<<m)-1>>>m}function Be(c,m){return((4278255360&c)+(4278255360&m)>>>0&4278255360)+((16711935&c)+(16711935&m)>>>0&16711935)>>>0}function We(c,m){X[m]=function(w,_,M,O,D,H,U){var Y;for(Y=0;Y<D;++Y){var ye=X[c](H[U+Y-1],M,O+Y);H[U+Y]=Be(w[_+Y],ye)}}}function Ze(){this.ud=this.hd=this.jd=0}function Ge(c,m){return((4278124286&(c^m))>>>1)+(c&m)>>>0}function ct(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function wt(c,m){return ct(c+(c-m+.5>>1))}function St(c,m,w){return Math.abs(m-w)-Math.abs(c-w)}function kt(c,m,w,_,M,O,D){for(_=O[D-1],w=0;w<M;++w)O[D+w]=_=Be(c[m+w],_)}function Wt(c,m,w,_,M){var O;for(O=0;O<w;++O){var D=c[m+O],H=D>>8&255,U=16711935&(U=(U=16711935&D)+((H<<16)+H));_[M+O]=(4278255360&D)+U>>>0}}function Yt(c,m){m.jd=c>>0&255,m.hd=c>>8&255,m.ud=c>>16&255}function ut(c,m,w,_,M,O){var D;for(D=0;D<_;++D){var H=m[w+D],U=H>>>8,Y=H,ye=255&(ye=(ye=H>>>16)+((c.jd<<24>>24)*(U<<24>>24)>>>5));Y=255&(Y=(Y=Y+((c.hd<<24>>24)*(U<<24>>24)>>>5))+((c.ud<<24>>24)*(ye<<24>>24)>>>5)),M[O+D]=(4278255360&H)+(ye<<16)+Y}}function Dt(c,m,w,_,M){X[m]=function(O,D,H,U,Y,ye,Pe,Le,Se){for(U=Pe;U<Le;++U)for(Pe=0;Pe<Se;++Pe)Y[ye++]=M(H[_(O[D++])])},X[c]=function(O,D,H,U,Y,ye,Pe){var Le=8>>O.b,Se=O.Ea,ze=O.K[0],Ie=O.w;if(8>Le)for(O=(1<<O.b)-1,Ie=(1<<Le)-1;D<H;++D){var we,_e=0;for(we=0;we<Se;++we)we&O||(_e=_(U[Y++])),ye[Pe++]=M(ze[_e&Ie]),_e>>=Le}else X["VP8LMapColor"+w](U,Y,ze,Ie,ye,Pe,D,H,Se)}}function Je(c,m,w,_,M){for(w=m+w;m<w;){var O=c[m++];_[M++]=O>>16&255,_[M++]=O>>8&255,_[M++]=O>>0&255}}function Ys(c,m,w,_,M){for(w=m+w;m<w;){var O=c[m++];_[M++]=O>>16&255,_[M++]=O>>8&255,_[M++]=O>>0&255,_[M++]=O>>24&255}}function Vt(c,m,w,_,M){for(w=m+w;m<w;){var O=(D=c[m++])>>16&240|D>>12&15,D=D>>0&240|D>>28&15;_[M++]=O,_[M++]=D}}function kr(c,m,w,_,M){for(w=m+w;m<w;){var O=(D=c[m++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;_[M++]=O,_[M++]=D}}function Qt(c,m,w,_,M){for(w=m+w;m<w;){var O=c[m++];_[M++]=O>>0&255,_[M++]=O>>8&255,_[M++]=O>>16&255}}function ws(c,m,w,_,M,O){if(O==0)for(w=m+w;m<w;)oe(_,((O=c[m++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),M+=32;else a(_,M,c,m,w)}function rr(c,m){X[m][0]=X[c+"0"],X[m][1]=X[c+"1"],X[m][2]=X[c+"2"],X[m][3]=X[c+"3"],X[m][4]=X[c+"4"],X[m][5]=X[c+"5"],X[m][6]=X[c+"6"],X[m][7]=X[c+"7"],X[m][8]=X[c+"8"],X[m][9]=X[c+"9"],X[m][10]=X[c+"10"],X[m][11]=X[c+"11"],X[m][12]=X[c+"12"],X[m][13]=X[c+"13"],X[m][14]=X[c+"0"],X[m][15]=X[c+"0"]}function ss(c){return c==To||c==Eo||c==Mo||c==n}function Rn(){this.eb=[],this.size=this.A=this.fb=0}function js(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Mr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rn,this.f.kb=new js,this.sd=null}function dn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ps(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ct(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function rs(c,m){var w=c.T,_=m.ba.f.RGBA,M=_.eb,O=_.fb+c.ka*_.A,D=Ar[m.ba.S],H=c.y,U=c.O,Y=c.f,ye=c.N,Pe=c.ea,Le=c.W,Se=m.cc,ze=m.dc,Ie=m.Mc,we=m.Nc,_e=c.ka,De=c.ka+c.T,He=c.U,Fe=He+1>>1;for(_e==0?D(H,U,null,null,Y,ye,Pe,Le,Y,ye,Pe,Le,M,O,null,null,He):(D(m.ec,m.fc,H,U,Se,ze,Ie,we,Y,ye,Pe,Le,M,O-_.A,M,O,He),++w);_e+2<De;_e+=2)Se=Y,ze=ye,Ie=Pe,we=Le,ye+=c.Rc,Le+=c.Rc,O+=2*_.A,D(H,(U+=2*c.fa)-c.fa,H,U,Se,ze,Ie,we,Y,ye,Pe,Le,M,O-_.A,M,O,He);return U+=c.fa,c.j+De<c.o?(a(m.ec,m.fc,H,U,He),a(m.cc,m.dc,Y,ye,Fe),a(m.Mc,m.Nc,Pe,Le,Fe),w--):1&De||D(H,U,null,null,Y,ye,Pe,Le,Y,ye,Pe,Le,M,O+_.A,null,null,He),w}function Sn(c,m,w){var _=c.F,M=[c.J];if(_!=null){var O=c.U,D=m.ba.S,H=D==so||D==Mo;m=m.ba.f.RGBA;var U=[0],Y=c.ka;U[0]=c.T,c.Kb&&(Y==0?--U[0]:(--Y,M[0]-=c.width),c.j+c.ka+c.T==c.o&&(U[0]=c.o-c.j-Y));var ye=m.eb;Y=m.fb+Y*m.A,c=fs(_,M[0],c.width,O,U,ye,Y+(H?0:3),m.A),t(w==U),c&&ss(D)&&ur(ye,Y,H,O,U,m.A)}return 0}function Is(c){var m=c.ma,w=m.ba.S,_=11>w,M=w==eo||w==to||w==so||w==Ao||w==12||ss(w);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Ki(m.Oa,c,M?11:12))return 0;if(M&&ss(w)&&Ue(),c.da)alert("todo:use_scaling");else{if(_){if(m.Ib=Ct,c.Kb){if(w=c.U+1>>1,m.memory=l(c.U+2*w),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+c.U,m.Mc=m.cc,m.Nc=m.dc+w,m.Ib=rs,Ue()}}else alert("todo:EmitYUV");M&&(m.Jb=Sn,_&&ke())}if(_&&!hu){for(c=0;256>c;++c)_x[c]=89858*(c-128)+Jl>>Kl,Cx[c]=-22014*(c-128)+Jl,kx[c]=-45773*(c-128),Sx[c]=113618*(c-128)+Jl>>Kl;for(c=yl;c<cd;++c)m=76283*(c-16)+Jl>>Kl,Px[c-yl]=As(m,255),Lx[c-yl]=As(m+8>>4,15);hu=1}return 1}function nr(c){var m=c.ma,w=c.U,_=c.T;return t(!(1&c.ka)),0>=w||0>=_?0:(w=m.Ib(c,m),m.Jb!=null&&m.Jb(c,m,w),m.Dc+=w,1)}function Ir(c){c.ma.memory=null}function vt(c,m,w,_){return ae(c,8)!=47?0:(m[0]=ae(c,14)+1,w[0]=ae(c,14)+1,_[0]=ae(c,1),ae(c,3)!=0?0:!c.h)}function Kr(c,m){if(4>c)return c+1;var w=c-2>>1;return(2+(1&c)<<w)+ae(m,w)+1}function hn(c,m){return 120<m?m-120:1<=(w=((w=ce[m-1])>>4)*c+(8-(15&w)))?w:1;var w}function gr(c,m,w){var _=W(w),M=c[m+=255&_].g-8;return 0<M&&(Q(w,w.u+8),_=W(w),m+=c[m].value,m+=_&(1<<M)-1),Q(w,w.u+c[m].g),c[m].value}function is(c,m,w){return w.g+=c.g,w.value+=c.value<<m>>>0,t(8>=w.g),c.g}function Ye(c,m,w){var _=c.xc;return t((m=_==0?0:c.vc[c.md*(w>>_)+(m>>_)])<c.Wb),c.Ya[m]}function lr(c,m,w,_){var M=c.ab,O=c.c*m,D=c.C;m=D+m;var H=w,U=_;for(_=c.Ta,w=c.Ua;0<M--;){var Y=c.gc[M],ye=D,Pe=m,Le=H,Se=U,ze=(U=_,H=w,Y.Ea);switch(t(ye<Pe),t(Pe<=Y.nc),Y.hc){case 2:Co(Le,Se,(Pe-ye)*ze,U,H);break;case 0:var Ie=ye,we=Pe,_e=U,De=H,He=(Xe=Y).Ea;Ie==0&&(pl(Le,Se,null,null,1,_e,De),kt(Le,Se+1,0,0,He-1,_e,De+1),Se+=He,De+=He,++Ie);for(var Fe=1<<Xe.b,rt=Fe-1,Ke=et(He,Xe.b),bt=Xe.K,Xe=Xe.w+(Ie>>Xe.b)*Ke;Ie<we;){var os=bt,gs=Xe,as=1;for(rn(Le,Se,_e,De-He,1,_e,De);as<He;){var es=(as&~rt)+Fe;es>He&&(es=He),(0,ra[os[gs++]>>8&15])(Le,Se+ +as,_e,De+as-He,es-as,_e,De+as),as=es}Se+=He,De+=He,++Ie&rt||(Xe+=Ke)}Pe!=Y.nc&&a(U,H-ze,U,H+(Pe-ye-1)*ze,ze);break;case 1:for(ze=Le,we=Se,He=(Le=Y.Ea)-(De=Le&~(_e=(Se=1<<Y.b)-1)),Ie=et(Le,Y.b),Fe=Y.K,Y=Y.w+(ye>>Y.b)*Ie;ye<Pe;){for(rt=Fe,Ke=Y,bt=new Ze,Xe=we+De,os=we+Le;we<Xe;)Yt(rt[Ke++],bt),na(bt,ze,we,Se,U,H),we+=Se,H+=Se;we<os&&(Yt(rt[Ke++],bt),na(bt,ze,we,He,U,H),we+=He,H+=He),++ye&_e||(Y+=Ie)}break;case 3:if(Le==U&&Se==H&&0<Y.b){for(we=U,Le=ze=H+(Pe-ye)*ze-(De=(Pe-ye)*et(Y.Ea,Y.b)),Se=U,_e=H,Ie=[],De=(He=De)-1;0<=De;--De)Ie[De]=Se[_e+De];for(De=He-1;0<=De;--De)we[Le+De]=Ie[De];cr(Y,ye,Pe,U,ze,U,H)}else cr(Y,ye,Pe,Le,Se,U,H)}H=_,U=w}U!=w&&a(_,w,H,U,O)}function On(c,m){var w=c.V,_=c.Ba+c.c*c.C,M=m-c.C;if(t(m<=c.l.o),t(16>=M),0<M){var O=c.l,D=c.Ta,H=c.Ua,U=O.width;if(lr(c,M,w,_),M=H=[H],t((w=c.C)<(_=m)),t(O.v<O.va),_>O.o&&(_=O.o),w<O.j){var Y=O.j-w;w=O.j,M[0]+=Y*U}if(w>=_?w=0:(M[0]+=4*O.v,O.ka=w-O.j,O.U=O.va-O.v,O.T=_-w,w=1),w){if(H=H[0],11>(w=c.ca).S){var ye=w.f.RGBA,Pe=(_=w.S,M=O.U,O=O.T,Y=ye.eb,ye.A),Le=O;for(ye=ye.fb+c.Ma*ye.A;0<Le--;){var Se=D,ze=H,Ie=M,we=Y,_e=ye;switch(_){case Lo:dr(Se,ze,Ie,we,_e);break;case eo:hr(Se,ze,Ie,we,_e);break;case To:hr(Se,ze,Ie,we,_e),ur(we,_e,0,Ie,1,0);break;case gl:xn(Se,ze,Ie,we,_e);break;case to:ws(Se,ze,Ie,we,_e,1);break;case Eo:ws(Se,ze,Ie,we,_e,1),ur(we,_e,0,Ie,1,0);break;case so:ws(Se,ze,Ie,we,_e,0);break;case Mo:ws(Se,ze,Ie,we,_e,0),ur(we,_e,1,Ie,1,0);break;case Ao:Ln(Se,ze,Ie,we,_e);break;case n:Ln(Se,ze,Ie,we,_e),us(we,_e,Ie,1,0);break;case Zl:zr(Se,ze,Ie,we,_e);break;default:t(0)}H+=U,ye+=Pe}c.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");t(c.Ma<=w.height)}}c.C=m,t(c.C<=c.i)}function Rr(c){var m;if(0<c.ua)return 0;for(m=0;m<c.Wb;++m){var w=c.Ya[m].G,_=c.Ya[m].H;if(0<w[1][_[1]+0].g||0<w[2][_[2]+0].g||0<w[3][_[3]+0].g)return 0}return 1}function Or(c,m,w,_,M,O){if(c.Z!=0){var D=c.qd,H=c.rd;for(t(ps[c.Z]!=null);m<w;++m)ps[c.Z](D,H,_,M,_,M,O),D=_,H=M,M+=O;c.qd=D,c.rd=H}}function he(c,m){var w=c.l.ma,_=w.Z==0||w.Z==1?c.l.j:c.C;if(_=c.C<_?_:c.C,t(m<=c.l.o),m>_){var M=c.l.width,O=w.ca,D=w.tb+M*_,H=c.V,U=c.Ba+c.c*_,Y=c.gc;t(c.ab==1),t(Y[0].hc==3),gn(Y[0],_,m,H,U,O,D),Or(w,_,m,O,D,M)}c.C=c.Ma=m}function Re(c,m,w,_,M,O,D){var H=c.$/_,U=c.$%_,Y=c.m,ye=c.s,Pe=w+c.$,Le=Pe;M=w+_*M;var Se=w+_*O,ze=280+ye.ua,Ie=c.Pb?H:16777216,we=0<ye.ua?ye.Wa:null,_e=ye.wc,De=Pe<Se?Ye(ye,U,H):null;t(c.C<O),t(Se<=M);var He=!1;e:for(;;){for(;He||Pe<Se;){var Fe=0;if(H>=Ie){var rt=Pe-w;t((Ie=c).Pb),Ie.wd=Ie.m,Ie.xd=rt,0<Ie.s.ua&&xe(Ie.s.Wa,Ie.s.vb),Ie=H+Ee}if(U&_e||(De=Ye(ye,U,H)),t(De!=null),De.Qb&&(m[Pe]=De.qb,He=!0),!He)if(re(Y),De.jc){Fe=Y,rt=m;var Ke=Pe,bt=De.pd[W(Fe)&Ws-1];t(De.jc),256>bt.g?(Q(Fe,Fe.u+bt.g),rt[Ke]=bt.value,Fe=0):(Q(Fe,Fe.u+bt.g-256),t(256<=bt.value),Fe=bt.value),Fe==0&&(He=!0)}else Fe=gr(De.G[0],De.H[0],Y);if(Y.h)break;if(He||256>Fe){if(!He)if(De.nd)m[Pe]=(De.qb|Fe<<8)>>>0;else{if(re(Y),He=gr(De.G[1],De.H[1],Y),re(Y),rt=gr(De.G[2],De.H[2],Y),Ke=gr(De.G[3],De.H[3],Y),Y.h)break;m[Pe]=(Ke<<24|He<<16|Fe<<8|rt)>>>0}if(He=!1,++Pe,++U>=_&&(U=0,++H,D!=null&&H<=O&&!(H%16)&&D(c,H),we!=null))for(;Le<Pe;)Fe=m[Le++],we.X[(506832829*Fe&4294967295)>>>we.Mb]=Fe}else if(280>Fe){if(Fe=Kr(Fe-256,Y),rt=gr(De.G[4],De.H[4],Y),re(Y),rt=hn(_,rt=Kr(rt,Y)),Y.h)break;if(Pe-w<rt||M-Pe<Fe)break e;for(Ke=0;Ke<Fe;++Ke)m[Pe+Ke]=m[Pe+Ke-rt];for(Pe+=Fe,U+=Fe;U>=_;)U-=_,++H,D!=null&&H<=O&&!(H%16)&&D(c,H);if(t(Pe<=M),U&_e&&(De=Ye(ye,U,H)),we!=null)for(;Le<Pe;)Fe=m[Le++],we.X[(506832829*Fe&4294967295)>>>we.Mb]=Fe}else{if(!(Fe<ze))break e;for(He=Fe-280,t(we!=null);Le<Pe;)Fe=m[Le++],we.X[(506832829*Fe&4294967295)>>>we.Mb]=Fe;Fe=Pe,t(!(He>>>(rt=we).Xa)),m[Fe]=rt.X[He],He=!0}He||t(Y.h==Z(Y))}if(c.Pb&&Y.h&&Pe<M)t(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&xe(c.s.vb,c.s.Wa);else{if(Y.h)break e;D?.(c,H>O?O:H),c.a=0,c.$=Pe-w}return 1}return c.a=3,0}function $e(c){t(c!=null),c.vc=null,c.yc=null,c.Ya=null;var m=c.Wa;m!=null&&(m.X=null),c.vb=null,t(c!=null)}function st(){var c=new Zi;return c==null?null:(c.a=0,c.xb=xl,rr("Predictor","VP8LPredictors"),rr("Predictor","VP8LPredictors_C"),rr("PredictorAdd","VP8LPredictorsAdd"),rr("PredictorAdd","VP8LPredictorsAdd_C"),Co=Wt,na=ut,dr=Je,hr=Ys,Ln=Vt,zr=kr,xn=Qt,X.VP8LMapColor32b=ci,X.VP8LMapColor8b=Va,c)}function ht(c,m,w,_,M){var O=1,D=[c],H=[m],U=_.m,Y=_.s,ye=null,Pe=0;e:for(;;){if(w)for(;O&&ae(U,1);){var Le=D,Se=H,ze=_,Ie=1,we=ze.m,_e=ze.gc[ze.ab],De=ae(we,2);if(ze.Oc&1<<De)O=0;else{switch(ze.Oc|=1<<De,_e.hc=De,_e.Ea=Le[0],_e.nc=Se[0],_e.K=[null],++ze.ab,t(4>=ze.ab),De){case 0:case 1:_e.b=ae(we,3)+2,Ie=ht(et(_e.Ea,_e.b),et(_e.nc,_e.b),0,ze,_e.K),_e.K=_e.K[0];break;case 3:var He,Fe=ae(we,8)+1,rt=16<Fe?0:4<Fe?1:2<Fe?2:3;if(Le[0]=et(_e.Ea,rt),_e.b=rt,He=Ie=ht(Fe,1,0,ze,_e.K)){var Ke,bt=Fe,Xe=_e,os=1<<(8>>Xe.b),gs=l(os);if(gs==null)He=0;else{var as=Xe.K[0],es=Xe.w;for(gs[0]=Xe.K[0][0],Ke=1;Ke<1*bt;++Ke)gs[Ke]=Be(as[es+Ke],gs[Ke-1]);for(;Ke<4*os;++Ke)gs[Ke]=0;Xe.K[0]=null,Xe.K[0]=gs,He=1}}Ie=He;break;case 2:break;default:t(0)}O=Ie}}if(D=D[0],H=H[0],O&&ae(U,1)&&!(O=1<=(Pe=ae(U,4))&&11>=Pe)){_.a=3;break e}var ks;if(ks=O)t:{var Ns,qt,ar,bn=_,ir=D,wn=H,xs=Pe,Tn=w,En=bn.m,br=bn.s,Tr=[null],on=1,Zn=0,La=Ce[xs];s:for(;;){if(Tn&&ae(En,1)){var wr=ae(En,3)+2,Za=et(ir,wr),ro=et(wn,wr),Ro=Za*ro;if(!ht(Za,ro,0,bn,Tr))break s;for(Tr=Tr[0],br.xc=wr,Ns=0;Ns<Ro;++Ns){var pi=Tr[Ns]>>8&65535;Tr[Ns]=pi,pi>=on&&(on=pi+1)}}if(En.h)break s;for(qt=0;5>qt;++qt){var Vs=b[qt];!qt&&0<xs&&(Vs+=1<<xs),Zn<Vs&&(Zn=Vs)}var dd=d(on*La,z),mu=on,pu=d(mu,B);if(pu==null)var Xl=null;else t(65536>=mu),Xl=pu;var bl=l(Zn);if(Xl==null||bl==null||dd==null){bn.a=1;break s}var ec=dd;for(Ns=ar=0;Ns<on;++Ns){var ia=Xl[Ns],Oo=ia.G,Do=ia.H,gu=0,tc=1,xu=0;for(qt=0;5>qt;++qt){Vs=b[qt],Oo[qt]=ec,Do[qt]=ar,!qt&&0<xs&&(Vs+=1<<xs);n:{var sc,hd=Vs,rc=bn,wl=bl,Ex=ec,Mx=ar,ud=0,gi=rc.m,Ix=ae(gi,1);if(i(wl,0,0,hd),Ix){var Rx=ae(gi,1)+1,Ox=ae(gi,1),vu=ae(gi,Ox==0?1:8);wl[vu]=1,Rx==2&&(wl[vu=ae(gi,8)]=1);var nc=1}else{var yu=l(19),bu=ae(gi,4)+4;if(19<bu){rc.a=3;var ac=0;break n}for(sc=0;sc<bu;++sc)yu[F[sc]]=ae(gi,3);var fd=void 0,Nl=void 0,wu=rc,Dx=yu,ic=hd,Nu=wl,md=0,xi=wu.m,ju=8,_u=d(128,z);r:for(;R(_u,0,7,Dx,19);){if(ae(xi,1)){var Fx=2+2*ae(xi,3);if((fd=2+ae(xi,Fx))>ic)break r}else fd=ic;for(Nl=0;Nl<ic&&fd--;){re(xi);var Su=_u[0+(127&W(xi))];Q(xi,xi.u+Su.g);var Fo=Su.value;if(16>Fo)Nu[Nl++]=Fo,Fo!=0&&(ju=Fo);else{var zx=Fo==16,ku=Fo-16,Bx=f[ku],Cu=ae(xi,o[ku])+Bx;if(Nl+Cu>ic)break r;for(var qx=zx?ju:0;0<Cu--;)Nu[Nl++]=qx}}md=1;break r}md||(wu.a=3),nc=md}(nc=nc&&!gi.h)&&(ud=R(Ex,Mx,8,wl,hd)),nc&&ud!=0?ac=ud:(rc.a=3,ac=0)}if(ac==0)break s;if(tc&&k[qt]==1&&(tc=ec[ar].g==0),gu+=ec[ar].g,ar+=ac,3>=qt){var jl,pd=bl[0];for(jl=1;jl<Vs;++jl)bl[jl]>pd&&(pd=bl[jl]);xu+=pd}}if(ia.nd=tc,ia.Qb=0,tc&&(ia.qb=(Oo[3][Do[3]+0].value<<24|Oo[1][Do[1]+0].value<<16|Oo[2][Do[2]+0].value)>>>0,gu==0&&256>Oo[0][Do[0]+0].value&&(ia.Qb=1,ia.qb+=Oo[0][Do[0]+0].value<<8)),ia.jc=!ia.Qb&&6>xu,ia.jc){var oc,Ga=ia;for(oc=0;oc<Ws;++oc){var vi=oc,yi=Ga.pd[vi],lc=Ga.G[0][Ga.H[0]+vi];256<=lc.value?(yi.g=lc.g+256,yi.value=lc.value):(yi.g=0,yi.value=0,vi>>=is(lc,8,yi),vi>>=is(Ga.G[1][Ga.H[1]+vi],16,yi),vi>>=is(Ga.G[2][Ga.H[2]+vi],0,yi),is(Ga.G[3][Ga.H[3]+vi],24,yi))}}}br.vc=Tr,br.Wb=on,br.Ya=Xl,br.yc=dd,ks=1;break t}ks=0}if(!(O=ks)){_.a=3;break e}if(0<Pe){if(Y.ua=1<<Pe,!Ae(Y.Wa,Pe)){_.a=1,O=0;break e}}else Y.ua=0;var gd=_,Pu=D,Hx=H,xd=gd.s,vd=xd.xc;if(gd.c=Pu,gd.i=Hx,xd.md=et(Pu,vd),xd.wc=vd==0?-1:(1<<vd)-1,w){_.xb=id;break e}if((ye=l(D*H))==null){_.a=1,O=0;break e}O=(O=Re(_,ye,0,D,H,H,null))&&!U.h;break e}return O?(M!=null?M[0]=ye:(t(ye==null),t(w)),_.$=0,w||$e(Y)):$e(Y),O}function $t(c,m){var w=c.c*c.i,_=w+m+16*m;return t(c.c<=m),c.V=l(_),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+w+m,1)}function Nt(c,m){var w=c.C,_=m-w,M=c.V,O=c.Ba+c.c*w;for(t(m<=c.l.o);0<_;){var D=16<_?16:_,H=c.l.ma,U=c.l.width,Y=U*D,ye=H.ca,Pe=H.tb+U*w,Le=c.Ta,Se=c.Ua;lr(c,D,M,O),zs(Le,Se,ye,Pe,Y),Or(H,w,w+D,ye,Pe,U),_-=D,M+=D*c.c,w+=D}t(w==m),c.C=c.Ma=m}function Lt(){this.ub=this.yd=this.td=this.Rb=0}function At(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Zt(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Ot(){this.Yb=function(){var c=[];return function m(w,_,M){for(var O=M[_],D=0;D<O&&(w.push(M.length>_+1?[]:0),!(M.length<_+1));D++)m(w[D],_+1,M)}(c,0,[3,11]),c}()}function yt(){this.jb=l(3),this.Wc=u([4,8],Ot),this.Xc=u([4,17],Ot)}function dt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function ts(){this.ld=this.La=this.dd=this.tc=0}function _s(){this.Na=this.la=0}function Rs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hs(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ft(){this.uc=this.M=this.Nb=0,this.wa=Array(new ts),this.Y=0,this.ya=Array(new Hs),this.aa=0,this.l=new Jr}function Kt(){this.y=l(16),this.f=l(8),this.ea=l(8)}function ds(){this.cb=this.a=0,this.sc="",this.m=new fe,this.Od=new Lt,this.Kc=new At,this.ed=new dt,this.Qa=new Zt,this.Ic=this.$c=this.Aa=0,this.D=new Ft,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,fe),this.ia=0,this.pb=d(4,Rs),this.Pa=new yt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Kt),this.Hd=0,this.rb=Array(new _s),this.sb=0,this.wa=Array(new ts),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hs),this.L=this.aa=0,this.gd=u([4,2],ts),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Jr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mt(){var c=new ds;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,gt||(gt=Dr)),c}function Pt(c,m,w){return c.a==0&&(c.a=m,c.sc=w,c.cb=0),0}function Dn(c,m,w){return 3<=w&&c[m+0]==157&&c[m+1]==1&&c[m+2]==42}function un(c,m){if(c==null)return 0;if(c.a=0,c.sc="OK",m==null)return Pt(c,2,"null VP8Io passed to VP8GetHeaders()");var w=m.data,_=m.w,M=m.ha;if(4>M)return Pt(c,7,"Truncated header.");var O=w[_+0]|w[_+1]<<8|w[_+2]<<16,D=c.Od;if(D.Rb=!(1&O),D.td=O>>1&7,D.yd=O>>4&1,D.ub=O>>5,3<D.td)return Pt(c,3,"Incorrect keyframe parameters.");if(!D.yd)return Pt(c,4,"Frame not displayable.");_+=3,M-=3;var H=c.Kc;if(D.Rb){if(7>M)return Pt(c,7,"cannot parse picture header");if(!Dn(w,_,M))return Pt(c,3,"Bad code word");H.c=16383&(w[_+4]<<8|w[_+3]),H.Td=w[_+4]>>6,H.i=16383&(w[_+6]<<8|w[_+5]),H.Ud=w[_+6]>>6,_+=7,M-=7,c.za=H.c+15>>4,c.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((O=c.Pa).jb,0,255,O.jb.length),t((O=c.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(D.ub>M)return Pt(c,7,"bad partition length");ge(O=c.m,w,_,D.ub),_+=D.ub,M-=D.ub,D.Rb&&(H.Ld=Ne(O),H.Kd=Ne(O)),H=c.Qa;var U,Y=c.Pa;if(t(O!=null),t(H!=null),H.Cb=Ne(O),H.Cb){if(H.Bb=Ne(O),Ne(O)){for(H.Fb=Ne(O),U=0;4>U;++U)H.Zb[U]=Ne(O)?be(O,7):0;for(U=0;4>U;++U)H.Lb[U]=Ne(O)?be(O,6):0}if(H.Bb)for(U=0;3>U;++U)Y.jb[U]=Ne(O)?ue(O,8):255}else H.Bb=0;if(O.Ka)return Pt(c,3,"cannot parse segment header");if((H=c.ed).zd=Ne(O),H.Tb=ue(O,6),H.wb=ue(O,3),H.Pc=Ne(O),H.Pc&&Ne(O)){for(Y=0;4>Y;++Y)Ne(O)&&(H.vd[Y]=be(O,6));for(Y=0;4>Y;++Y)Ne(O)&&(H.od[Y]=be(O,6))}if(c.L=H.Tb==0?0:H.zd?1:2,O.Ka)return Pt(c,3,"cannot parse filter header");var ye=M;if(M=U=_,_=U+ye,H=ye,c.Xb=(1<<ue(c.m,2))-1,ye<3*(Y=c.Xb))w=7;else{for(U+=3*Y,H-=3*Y,ye=0;ye<Y;++ye){var Pe=w[M+0]|w[M+1]<<8|w[M+2]<<16;Pe>H&&(Pe=H),ge(c.Jc[+ye],w,U,Pe),U+=Pe,H-=Pe,M+=3}ge(c.Jc[+Y],w,U,H),w=U<_?0:5}if(w!=0)return Pt(c,w,"cannot parse partitions");for(w=ue(U=c.m,7),M=Ne(U)?be(U,4):0,_=Ne(U)?be(U,4):0,H=Ne(U)?be(U,4):0,Y=Ne(U)?be(U,4):0,U=Ne(U)?be(U,4):0,ye=c.Qa,Pe=0;4>Pe;++Pe){if(ye.Cb){var Le=ye.Zb[Pe];ye.Fb||(Le+=w)}else{if(0<Pe){c.pb[Pe]=c.pb[0];continue}Le=w}var Se=c.pb[Pe];Se.Sc[0]=qe[As(Le+M,127)],Se.Sc[1]=tt[As(Le+0,127)],Se.Eb[0]=2*qe[As(Le+_,127)],Se.Eb[1]=101581*tt[As(Le+H,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=qe[As(Le+Y,117)],Se.Qc[1]=tt[As(Le+U,127)],Se.lc=Le+U}if(!D.Rb)return Pt(c,4,"Not a key frame.");for(Ne(O),D=c.Pa,w=0;4>w;++w){for(M=0;8>M;++M)for(_=0;3>_;++_)for(H=0;11>H;++H)Y=J(O,mi[w][M][_][H])?ue(O,8):yn[w][M][_][H],D.Wc[w][M].Yb[_][H]=Y;for(M=0;17>M;++M)D.Xc[w][M]=D.Wc[w][ad[M]]}return c.kc=Ne(O),c.kc&&(c.Bd=ue(O,8)),c.cb=1}function Dr(c,m,w,_,M,O,D){var H=m[M].Yb[w];for(w=0;16>M;++M){if(!J(c,H[w+0]))return M;for(;!J(c,H[w+1]);)if(H=m[++M].Yb[0],w=0,M==16)return 16;var U=m[M+1].Yb;if(J(c,H[w+2])){var Y=c,ye=0;if(J(Y,(Le=H)[(Pe=w)+3]))if(J(Y,Le[Pe+6])){for(H=0,Pe=2*(ye=J(Y,Le[Pe+8]))+(Le=J(Y,Le[Pe+9+ye])),ye=0,Le=Ht[Pe];Le[H];++H)ye+=ye+J(Y,Le[H]);ye+=3+(8<<Pe)}else J(Y,Le[Pe+7])?(ye=7+2*J(Y,165),ye+=J(Y,145)):ye=5+J(Y,159);else ye=J(Y,Le[Pe+4])?3+J(Y,Le[Pe+5]):2;H=U[2]}else ye=1,H=U[1];U=D+Lr[M],0>(Y=c).b&&de(Y);var Pe,Le=Y.b,Se=(Pe=Y.Ca>>1)-(Y.I>>Le)>>31;--Y.b,Y.Ca+=Se,Y.Ca|=1,Y.I-=(Pe+1&Se)<<Le,O[U]=((ye^Se)-Se)*_[(0<M)+0]}return 16}function fn(c){var m=c.rb[c.sb-1];m.la=0,m.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function pt(c,m){if(c==null)return 0;if(m==null)return Pt(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!un(c,m))return 0;if(t(c.cb),m.ac==null||m.ac(m)){m.ob&&(c.L=0);var w=Ql[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=m.v-w>>4,c.zb=m.j-w>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=m.o+15+w>>4,c.Hb=m.va+15+w>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var _=c.ed;for(w=0;4>w;++w){var M;if(c.Qa.Cb){var O=c.Qa.Lb[w];c.Qa.Fb||(O+=_.Tb)}else O=_.Tb;for(M=0;1>=M;++M){var D=c.gd[w][M],H=O;if(_.Pc&&(H+=_.vd[0],M&&(H+=_.od[0])),0<(H=0>H?0:63<H?63:H)){var U=H;0<_.wb&&(U=4<_.wb?U>>2:U>>1)>9-_.wb&&(U=9-_.wb),1>U&&(U=1),D.dd=U,D.tc=2*H+U,D.ld=40<=H?2:15<=H?1:0}else D.tc=0;D.La=M}}}w=0}else Pt(c,6,"Frame setup failed"),w=c.a;if(w=w==0){if(w){c.$c=0,0<c.Aa||(c.Ic=Tx);e:{w=c.Ic,_=4*(U=c.za);var Y=32*U,ye=U+1,Pe=0<c.L?U*(0<c.Aa?2:1):0,Le=(c.Aa==2?2:1)*U;if((D=_+832+(M=3*(16*w+Ql[c.L])/2*Y)+(O=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=D)w=0;else{if(D>c.Vb){if(c.Vb=0,c.Ec=l(D),c.Fc=0,c.Ec==null){w=Pt(c,1,"no memory during frame initialization.");break e}c.Vb=D}D=c.Ec,H=c.Fc,c.Ac=D,c.Bc=H,H+=_,c.Gd=d(Y,Kt),c.Hd=0,c.rb=d(ye+1,_s),c.sb=1,c.wa=Pe?d(Pe,ts):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=U),t(!0),c.oc=D,c.pc=H,H+=832,c.ya=d(Le,Hs),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=U),c.R=16*U,c.B=8*U,U=(Y=Ql[c.L])*c.R,Y=Y/2*c.B,c.sa=D,c.ta=H+U,c.qa=c.sa,c.ra=c.ta+16*w*c.R+Y,c.Ha=c.qa,c.Ia=c.ra+8*w*c.B+Y,c.$c=0,H+=M,c.mb=O?D:null,c.nb=O?H:null,t(H+O<=c.Fc+c.Vb),fn(c),i(c.Ac,c.Bc,0,_),w=1}}if(w){if(m.ka=0,m.y=c.sa,m.O=c.ta,m.f=c.qa,m.N=c.ra,m.ea=c.Ha,m.Vd=c.Ia,m.fa=c.R,m.Rc=c.B,m.F=null,m.J=0,!Po){for(w=-255;255>=w;++w)ms[255+w]=0>w?-w:w;for(w=-1020;1020>=w;++w)Un[1020+w]=-128>w?-128:127<w?127:w;for(w=-112;112>=w;++w)ui[112+w]=-16>w?-16:15<w?15:w;for(w=-255;510>=w;++w)Wn[255+w]=0>w?0:255<w?255:w;Po=1}Na=za,qn=ma,ja=zn,Pr=Ms,nn=Bn,Fs=Xa,di=$i,Qi=ya,Xi=Ui,yr=Wi,Hn=ml,_a=ni,$n=Fr,hi=So,Sa=jo,ka=$s,aa=Xr,vn=_o,An[0]=Jt,An[1]=Fi,An[2]=It,An[3]=mn,An[4]=Bi,An[5]=ga,An[6]=si,An[7]=qa,An[8]=qi,An[9]=Xn,Pa[0]=ei,Pa[1]=zi,Pa[2]=kn,Pa[3]=Qn,Pa[4]=Js,Pa[5]=bo,Pa[6]=ti,Vn[0]=ea,Vn[1]=Ba,Vn[2]=Ha,Vn[3]=Ds,Vn[4]=$a,Vn[5]=wo,Vn[6]=ri,w=1}else w=0}w&&(w=function(Se,ze){for(Se.M=0;Se.M<Se.Va;++Se.M){var Ie,we=Se.Jc[Se.M&Se.Xb],_e=Se.m,De=Se;for(Ie=0;Ie<De.za;++Ie){var He=_e,Fe=De,rt=Fe.Ac,Ke=Fe.Bc+4*Ie,bt=Fe.zc,Xe=Fe.ya[Fe.aa+Ie];if(Fe.Qa.Bb?Xe.$b=J(He,Fe.Pa.jb[0])?2+J(He,Fe.Pa.jb[2]):J(He,Fe.Pa.jb[1]):Xe.$b=0,Fe.kc&&(Xe.Ad=J(He,Fe.Bd)),Xe.Za=!J(He,145)+0,Xe.Za){var os=Xe.Ob,gs=0;for(Fe=0;4>Fe;++Fe){var as,es=bt[0+Fe];for(as=0;4>as;++as){es=qr[rt[Ke+as]][es];for(var ks=Xs[J(He,es[0])];0<ks;)ks=Xs[2*ks+J(He,es[ks])];es=-ks,rt[Ke+as]=es}a(os,gs,rt,Ke,4),gs+=4,bt[0+Fe]=es}}else es=J(He,156)?J(He,128)?1:3:J(He,163)?2:0,Xe.Ob[0]=es,i(rt,Ke,es,4),i(bt,0,es,4);Xe.Dd=J(He,142)?J(He,114)?J(He,183)?1:3:2:0}if(De.m.Ka)return Pt(Se,7,"Premature end-of-partition0 encountered.");for(;Se.ja<Se.za;++Se.ja){if(De=we,He=(_e=Se).rb[_e.sb-1],rt=_e.rb[_e.sb+_e.ja],Ie=_e.ya[_e.aa+_e.ja],Ke=_e.kc?Ie.Ad:0)He.la=rt.la=0,Ie.Za||(He.Na=rt.Na=0),Ie.Hc=0,Ie.Gc=0,Ie.ia=0;else{var Ns,qt;if(He=rt,rt=De,Ke=_e.Pa.Xc,bt=_e.ya[_e.aa+_e.ja],Xe=_e.pb[bt.$b],Fe=bt.ad,os=0,gs=_e.rb[_e.sb-1],es=as=0,i(Fe,os,0,384),bt.Za)var ar=0,bn=Ke[3];else{ks=l(16);var ir=He.Na+gs.Na;if(ir=gt(rt,Ke[1],ir,Xe.Eb,0,ks,0),He.Na=gs.Na=(0<ir)+0,1<ir)Na(ks,0,Fe,os);else{var wn=ks[0]+3>>3;for(ks=0;256>ks;ks+=16)Fe[os+ks]=wn}ar=1,bn=Ke[0]}var xs=15&He.la,Tn=15&gs.la;for(ks=0;4>ks;++ks){var En=1&Tn;for(wn=qt=0;4>wn;++wn)xs=xs>>1|(En=(ir=gt(rt,bn,ir=En+(1&xs),Xe.Sc,ar,Fe,os))>ar)<<7,qt=qt<<2|(3<ir?3:1<ir?2:Fe[os+0]!=0),os+=16;xs>>=4,Tn=Tn>>1|En<<7,as=(as<<8|qt)>>>0}for(bn=xs,ar=Tn>>4,Ns=0;4>Ns;Ns+=2){for(qt=0,xs=He.la>>4+Ns,Tn=gs.la>>4+Ns,ks=0;2>ks;++ks){for(En=1&Tn,wn=0;2>wn;++wn)ir=En+(1&xs),xs=xs>>1|(En=0<(ir=gt(rt,Ke[2],ir,Xe.Qc,0,Fe,os)))<<3,qt=qt<<2|(3<ir?3:1<ir?2:Fe[os+0]!=0),os+=16;xs>>=2,Tn=Tn>>1|En<<5}es|=qt<<4*Ns,bn|=xs<<4<<Ns,ar|=(240&Tn)<<Ns}He.la=bn,gs.la=ar,bt.Hc=as,bt.Gc=es,bt.ia=43690&es?0:Xe.ia,Ke=!(as|es)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[Ie.$b][Ie.Za],_e.wa[_e.Y+_e.ja].La|=!Ke),De.Ka)return Pt(Se,7,"Premature end-of-file encountered.")}if(fn(Se),_e=ze,De=1,Ie=(we=Se).D,He=0<we.L&&we.M>=we.zb&&we.M<=we.Va,we.Aa==0)e:{if(Ie.M=we.M,Ie.uc=He,Yi(we,Ie),De=1,Ie=(qt=we.D).Nb,He=(es=Ql[we.L])*we.R,rt=es/2*we.B,ks=16*Ie*we.R,wn=8*Ie*we.B,Ke=we.sa,bt=we.ta-He+ks,Xe=we.qa,Fe=we.ra-rt+wn,os=we.Ha,gs=we.Ia-rt+wn,Tn=(xs=qt.M)==0,as=xs>=we.Va-1,we.Aa==2&&Yi(we,qt),qt.uc)for(En=(ir=we).D.M,t(ir.D.uc),qt=ir.yb;qt<ir.Hb;++qt){ar=qt,bn=En;var br=(Tr=(Vs=ir).D).Nb;Ns=Vs.R;var Tr=Tr.wa[Tr.Y+ar],on=Vs.sa,Zn=Vs.ta+16*br*Ns+16*ar,La=Tr.dd,wr=Tr.tc;if(wr!=0)if(t(3<=wr),Vs.L==1)0<ar&&ka(on,Zn,Ns,wr+4),Tr.La&&vn(on,Zn,Ns,wr),0<bn&&Sa(on,Zn,Ns,wr+4),Tr.La&&aa(on,Zn,Ns,wr);else{var Za=Vs.B,ro=Vs.qa,Ro=Vs.ra+8*br*Za+8*ar,pi=Vs.Ha,Vs=Vs.Ia+8*br*Za+8*ar;br=Tr.ld,0<ar&&(Qi(on,Zn,Ns,wr+4,La,br),yr(ro,Ro,pi,Vs,Za,wr+4,La,br)),Tr.La&&(_a(on,Zn,Ns,wr,La,br),hi(ro,Ro,pi,Vs,Za,wr,La,br)),0<bn&&(di(on,Zn,Ns,wr+4,La,br),Xi(ro,Ro,pi,Vs,Za,wr+4,La,br)),Tr.La&&(Hn(on,Zn,Ns,wr,La,br),$n(ro,Ro,pi,Vs,Za,wr,La,br))}}if(we.ia&&alert("todo:DitherRow"),_e.put!=null){if(qt=16*xs,xs=16*(xs+1),Tn?(_e.y=we.sa,_e.O=we.ta+ks,_e.f=we.qa,_e.N=we.ra+wn,_e.ea=we.Ha,_e.W=we.Ia+wn):(qt-=es,_e.y=Ke,_e.O=bt,_e.f=Xe,_e.N=Fe,_e.ea=os,_e.W=gs),as||(xs-=es),xs>_e.o&&(xs=_e.o),_e.F=null,_e.J=null,we.Fa!=null&&0<we.Fa.length&&qt<xs&&(_e.J=Gi(we,_e,qt,xs-qt),_e.F=we.mb,_e.F==null&&_e.F.length==0)){De=Pt(we,3,"Could not decode alpha data.");break e}qt<_e.j&&(es=_e.j-qt,qt=_e.j,t(!(1&es)),_e.O+=we.R*es,_e.N+=we.B*(es>>1),_e.W+=we.B*(es>>1),_e.F!=null&&(_e.J+=_e.width*es)),qt<xs&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=qt-_e.j,_e.U=_e.va-_e.v,_e.T=xs-qt,De=_e.put(_e))}Ie+1!=we.Ic||as||(a(we.sa,we.ta-He,Ke,bt+16*we.R,He),a(we.qa,we.ra-rt,Xe,Fe+8*we.B,rt),a(we.Ha,we.Ia-rt,os,gs+8*we.B,rt))}if(!De)return Pt(Se,6,"Output aborted.")}return 1}(c,m)),m.bc!=null&&m.bc(m),w&=1}return w?(c.cb=0,w):0}function Bt(c,m,w,_,M){M=c[m+w+32*_]+(M>>3),c[m+w+32*_]=-256&M?0>M?0:255:M}function Fn(c,m,w,_,M,O){Bt(c,m,0,w,_+M),Bt(c,m,1,w,_+O),Bt(c,m,2,w,_-O),Bt(c,m,3,w,_-M)}function Ks(c){return(20091*c>>16)+c}function Os(c,m,w,_){var M,O=0,D=l(16);for(M=0;4>M;++M){var H=c[m+0]+c[m+8],U=c[m+0]-c[m+8],Y=(35468*c[m+4]>>16)-Ks(c[m+12]),ye=Ks(c[m+4])+(35468*c[m+12]>>16);D[O+0]=H+ye,D[O+1]=U+Y,D[O+2]=U-Y,D[O+3]=H-ye,O+=4,m++}for(M=O=0;4>M;++M)H=(c=D[O+0]+4)+D[O+8],U=c-D[O+8],Y=(35468*D[O+4]>>16)-Ks(D[O+12]),Bt(w,_,0,0,H+(ye=Ks(D[O+4])+(35468*D[O+12]>>16))),Bt(w,_,1,0,U+Y),Bt(w,_,2,0,U-Y),Bt(w,_,3,0,H-ye),O++,_+=32}function Xa(c,m,w,_){var M=c[m+0]+4,O=35468*c[m+4]>>16,D=Ks(c[m+4]),H=35468*c[m+1]>>16;Fn(w,_,0,M+D,c=Ks(c[m+1]),H),Fn(w,_,1,M+O,c,H),Fn(w,_,2,M-O,c,H),Fn(w,_,3,M-D,c,H)}function ma(c,m,w,_,M){Os(c,m,w,_),M&&Os(c,m+16,w,_+4)}function zn(c,m,w,_){qn(c,m+0,w,_,1),qn(c,m+32,w,_+128,1)}function Ms(c,m,w,_){var M;for(c=c[m+0]+4,M=0;4>M;++M)for(m=0;4>m;++m)Bt(w,_,m,M,c)}function Bn(c,m,w,_){c[m+0]&&Pr(c,m+0,w,_),c[m+16]&&Pr(c,m+16,w,_+4),c[m+32]&&Pr(c,m+32,w,_+128),c[m+48]&&Pr(c,m+48,w,_+128+4)}function za(c,m,w,_){var M,O=l(16);for(M=0;4>M;++M){var D=c[m+0+M]+c[m+12+M],H=c[m+4+M]+c[m+8+M],U=c[m+4+M]-c[m+8+M],Y=c[m+0+M]-c[m+12+M];O[0+M]=D+H,O[8+M]=D-H,O[4+M]=Y+U,O[12+M]=Y-U}for(M=0;4>M;++M)D=(c=O[0+4*M]+3)+O[3+4*M],H=O[1+4*M]+O[2+4*M],U=O[1+4*M]-O[2+4*M],Y=c-O[3+4*M],w[_+0]=D+H>>3,w[_+16]=Y+U>>3,w[_+32]=D-H>>3,w[_+48]=Y-U>>3,_+=64}function Jn(c,m,w){var _,M=m-32,O=Br,D=255-c[M-1];for(_=0;_<w;++_){var H,U=O,Y=D+c[m-1];for(H=0;H<w;++H)c[m+H]=U[Y+c[M+H]];m+=32}}function Fi(c,m){Jn(c,m,4)}function Ba(c,m){Jn(c,m,8)}function zi(c,m){Jn(c,m,16)}function kn(c,m){var w;for(w=0;16>w;++w)a(c,m+32*w,c,m-32,16)}function Qn(c,m){var w;for(w=16;0<w;--w)i(c,m,c[m-1],16),m+=32}function pa(c,m,w){var _;for(_=0;16>_;++_)i(m,w+32*_,c,16)}function ei(c,m){var w,_=16;for(w=0;16>w;++w)_+=c[m-1+32*w]+c[m+w-32];pa(_>>5,c,m)}function Js(c,m){var w,_=8;for(w=0;16>w;++w)_+=c[m-1+32*w];pa(_>>4,c,m)}function bo(c,m){var w,_=8;for(w=0;16>w;++w)_+=c[m+w-32];pa(_>>4,c,m)}function ti(c,m){pa(128,c,m)}function Tt(c,m,w){return c+2*m+w+2>>2}function It(c,m){var w,_=m-32;for(_=new Uint8Array([Tt(c[_-1],c[_+0],c[_+1]),Tt(c[_+0],c[_+1],c[_+2]),Tt(c[_+1],c[_+2],c[_+3]),Tt(c[_+2],c[_+3],c[_+4])]),w=0;4>w;++w)a(c,m+32*w,_,0,_.length)}function mn(c,m){var w=c[m-1],_=c[m-1+32],M=c[m-1+64],O=c[m-1+96];oe(c,m+0,16843009*Tt(c[m-1-32],w,_)),oe(c,m+32,16843009*Tt(w,_,M)),oe(c,m+64,16843009*Tt(_,M,O)),oe(c,m+96,16843009*Tt(M,O,O))}function Jt(c,m){var w,_=4;for(w=0;4>w;++w)_+=c[m+w-32]+c[m-1+32*w];for(_>>=3,w=0;4>w;++w)i(c,m+32*w,_,4)}function Bi(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1-32],D=c[m+0-32],H=c[m+1-32],U=c[m+2-32],Y=c[m+3-32];c[m+0+96]=Tt(_,M,c[m-1+96]),c[m+1+96]=c[m+0+64]=Tt(w,_,M),c[m+2+96]=c[m+1+64]=c[m+0+32]=Tt(O,w,_),c[m+3+96]=c[m+2+64]=c[m+1+32]=c[m+0+0]=Tt(D,O,w),c[m+3+64]=c[m+2+32]=c[m+1+0]=Tt(H,D,O),c[m+3+32]=c[m+2+0]=Tt(U,H,D),c[m+3+0]=Tt(Y,U,H)}function si(c,m){var w=c[m+1-32],_=c[m+2-32],M=c[m+3-32],O=c[m+4-32],D=c[m+5-32],H=c[m+6-32],U=c[m+7-32];c[m+0+0]=Tt(c[m+0-32],w,_),c[m+1+0]=c[m+0+32]=Tt(w,_,M),c[m+2+0]=c[m+1+32]=c[m+0+64]=Tt(_,M,O),c[m+3+0]=c[m+2+32]=c[m+1+64]=c[m+0+96]=Tt(M,O,D),c[m+3+32]=c[m+2+64]=c[m+1+96]=Tt(O,D,H),c[m+3+64]=c[m+2+96]=Tt(D,H,U),c[m+3+96]=Tt(H,U,U)}function ga(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1-32],D=c[m+0-32],H=c[m+1-32],U=c[m+2-32],Y=c[m+3-32];c[m+0+0]=c[m+1+64]=O+D+1>>1,c[m+1+0]=c[m+2+64]=D+H+1>>1,c[m+2+0]=c[m+3+64]=H+U+1>>1,c[m+3+0]=U+Y+1>>1,c[m+0+96]=Tt(M,_,w),c[m+0+64]=Tt(_,w,O),c[m+0+32]=c[m+1+96]=Tt(w,O,D),c[m+1+32]=c[m+2+96]=Tt(O,D,H),c[m+2+32]=c[m+3+96]=Tt(D,H,U),c[m+3+32]=Tt(H,U,Y)}function qa(c,m){var w=c[m+0-32],_=c[m+1-32],M=c[m+2-32],O=c[m+3-32],D=c[m+4-32],H=c[m+5-32],U=c[m+6-32],Y=c[m+7-32];c[m+0+0]=w+_+1>>1,c[m+1+0]=c[m+0+64]=_+M+1>>1,c[m+2+0]=c[m+1+64]=M+O+1>>1,c[m+3+0]=c[m+2+64]=O+D+1>>1,c[m+0+32]=Tt(w,_,M),c[m+1+32]=c[m+0+96]=Tt(_,M,O),c[m+2+32]=c[m+1+96]=Tt(M,O,D),c[m+3+32]=c[m+2+96]=Tt(O,D,H),c[m+3+64]=Tt(D,H,U),c[m+3+96]=Tt(H,U,Y)}function Xn(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1+96];c[m+0+0]=w+_+1>>1,c[m+2+0]=c[m+0+32]=_+M+1>>1,c[m+2+32]=c[m+0+64]=M+O+1>>1,c[m+1+0]=Tt(w,_,M),c[m+3+0]=c[m+1+32]=Tt(_,M,O),c[m+3+32]=c[m+1+64]=Tt(M,O,O),c[m+3+64]=c[m+2+64]=c[m+0+96]=c[m+1+96]=c[m+2+96]=c[m+3+96]=O}function qi(c,m){var w=c[m-1+0],_=c[m-1+32],M=c[m-1+64],O=c[m-1+96],D=c[m-1-32],H=c[m+0-32],U=c[m+1-32],Y=c[m+2-32];c[m+0+0]=c[m+2+32]=w+D+1>>1,c[m+0+32]=c[m+2+64]=_+w+1>>1,c[m+0+64]=c[m+2+96]=M+_+1>>1,c[m+0+96]=O+M+1>>1,c[m+3+0]=Tt(H,U,Y),c[m+2+0]=Tt(D,H,U),c[m+1+0]=c[m+3+32]=Tt(w,D,H),c[m+1+32]=c[m+3+64]=Tt(_,w,D),c[m+1+64]=c[m+3+96]=Tt(M,_,w),c[m+1+96]=Tt(O,M,_)}function Ha(c,m){var w;for(w=0;8>w;++w)a(c,m+32*w,c,m-32,8)}function Ds(c,m){var w;for(w=0;8>w;++w)i(c,m,c[m-1],8),m+=32}function Qr(c,m,w){var _;for(_=0;8>_;++_)i(m,w+32*_,c,8)}function ea(c,m){var w,_=8;for(w=0;8>w;++w)_+=c[m+w-32]+c[m-1+32*w];Qr(_>>4,c,m)}function wo(c,m){var w,_=4;for(w=0;8>w;++w)_+=c[m+w-32];Qr(_>>3,c,m)}function $a(c,m){var w,_=4;for(w=0;8>w;++w)_+=c[m-1+32*w];Qr(_>>3,c,m)}function ri(c,m){Qr(128,c,m)}function xa(c,m,w){var _=c[m-w],M=c[m+0],O=3*(M-_)+fi[1020+c[m-2*w]-c[m+w]],D=Ca[112+(O+4>>3)];c[m-w]=Br[255+_+Ca[112+(O+3>>3)]],c[m+0]=Br[255+M-D]}function No(c,m,w,_){var M=c[m+0],O=c[m+w];return an[255+c[m-2*w]-c[m-w]]>_||an[255+O-M]>_}function Hi(c,m,w,_){return 4*an[255+c[m-w]-c[m+0]]+an[255+c[m-2*w]-c[m+w]]<=_}function Ut(c,m,w,_,M){var O=c[m-3*w],D=c[m-2*w],H=c[m-w],U=c[m+0],Y=c[m+w],ye=c[m+2*w],Pe=c[m+3*w];return 4*an[255+H-U]+an[255+D-Y]>_?0:an[255+c[m-4*w]-O]<=M&&an[255+O-D]<=M&&an[255+D-H]<=M&&an[255+Pe-ye]<=M&&an[255+ye-Y]<=M&&an[255+Y-U]<=M}function jo(c,m,w,_){var M=2*_+1;for(_=0;16>_;++_)Hi(c,m+_,w,M)&&xa(c,m+_,w)}function $s(c,m,w,_){var M=2*_+1;for(_=0;16>_;++_)Hi(c,m+_*w,1,M)&&xa(c,m+_*w,1)}function Xr(c,m,w,_){var M;for(M=3;0<M;--M)jo(c,m+=4*w,w,_)}function _o(c,m,w,_){var M;for(M=3;0<M;--M)$s(c,m+=4,w,_)}function va(c,m,w,_,M,O,D,H){for(O=2*O+1;0<M--;){if(Ut(c,m,w,O,D))if(No(c,m,w,H))xa(c,m,w);else{var U=c,Y=m,ye=w,Pe=U[Y-2*ye],Le=U[Y-ye],Se=U[Y+0],ze=U[Y+ye],Ie=U[Y+2*ye],we=27*(De=fi[1020+3*(Se-Le)+fi[1020+Pe-ze]])+63>>7,_e=18*De+63>>7,De=9*De+63>>7;U[Y-3*ye]=Br[255+U[Y-3*ye]+De],U[Y-2*ye]=Br[255+Pe+_e],U[Y-ye]=Br[255+Le+we],U[Y+0]=Br[255+Se-we],U[Y+ye]=Br[255+ze-_e],U[Y+2*ye]=Br[255+Ie-De]}m+=_}}function en(c,m,w,_,M,O,D,H){for(O=2*O+1;0<M--;){if(Ut(c,m,w,O,D))if(No(c,m,w,H))xa(c,m,w);else{var U=c,Y=m,ye=w,Pe=U[Y-ye],Le=U[Y+0],Se=U[Y+ye],ze=Ca[112+((Ie=3*(Le-Pe))+4>>3)],Ie=Ca[112+(Ie+3>>3)],we=ze+1>>1;U[Y-2*ye]=Br[255+U[Y-2*ye]+we],U[Y-ye]=Br[255+Pe+Ie],U[Y+0]=Br[255+Le-ze],U[Y+ye]=Br[255+Se-we]}m+=_}}function $i(c,m,w,_,M,O){va(c,m,w,1,16,_,M,O)}function ya(c,m,w,_,M,O){va(c,m,1,w,16,_,M,O)}function ml(c,m,w,_,M,O){var D;for(D=3;0<D;--D)en(c,m+=4*w,w,1,16,_,M,O)}function ni(c,m,w,_,M,O){var D;for(D=3;0<D;--D)en(c,m+=4,1,w,16,_,M,O)}function Ui(c,m,w,_,M,O,D,H){va(c,m,M,1,8,O,D,H),va(w,_,M,1,8,O,D,H)}function Wi(c,m,w,_,M,O,D,H){va(c,m,1,M,8,O,D,H),va(w,_,1,M,8,O,D,H)}function Fr(c,m,w,_,M,O,D,H){en(c,m+4*M,M,1,8,O,D,H),en(w,_+4*M,M,1,8,O,D,H)}function So(c,m,w,_,M,O,D,H){en(c,m+4,1,M,8,O,D,H),en(w,_+4,1,M,8,O,D,H)}function Ua(){this.ba=new Mr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ps,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ai(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vi(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new z}function Zi(){this.xb=this.a=0,this.l=new Jr,this.ca=new Mr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vi,this.ab=0,this.gc=d(4,ai),this.Oc=0}function ii(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Jr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ba(c,m,w,_,M,O,D){for(c=c==null?0:c[m+0],m=0;m<D;++m)M[O+m]=c+w[_+m]&255,c=M[O+m]}function oi(c,m,w,_,M,O,D){var H;if(c==null)ba(null,null,w,_,M,O,D);else for(H=0;H<D;++H)M[O+H]=c[m+H]+w[_+H]&255}function wa(c,m,w,_,M,O,D){if(c==null)ba(null,null,w,_,M,O,D);else{var H,U=c[m+0],Y=U,ye=U;for(H=0;H<D;++H)Y=ye+(U=c[m+H])-Y,ye=w[_+H]+(-256&Y?0>Y?0:255:Y)&255,Y=U,M[O+H]=ye}}function Gi(c,m,w,_){var M=m.width,O=m.o;if(t(c!=null&&m!=null),0>w||0>=_||w+_>O)return null;if(!c.Cc){if(c.ga==null){var D;if(c.ga=new ii,(D=c.ga==null)||(D=m.width*m.o,t(c.Gb.length==0),c.Gb=l(D),c.Uc=0,c.Gb==null?D=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,D=1),D=!D),!D){D=c.ga;var H=c.Fa,U=c.P,Y=c.qc,ye=c.mb,Pe=c.nb,Le=U+1,Se=Y-1,ze=D.l;if(t(H!=null&&ye!=null&&m!=null),ps[0]=null,ps[1]=ba,ps[2]=oi,ps[3]=wa,D.ca=ye,D.tb=Pe,D.c=m.width,D.i=m.height,t(0<D.c&&0<D.i),1>=Y)m=0;else if(D.$a=H[U+0]>>0&3,D.Z=H[U+0]>>2&3,D.Lc=H[U+0]>>4&3,U=H[U+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||U)m=0;else if(ze.put=nr,ze.ac=Is,ze.bc=Ir,ze.ma=D,ze.width=m.width,ze.height=m.height,ze.Da=m.Da,ze.v=m.v,ze.va=m.va,ze.j=m.j,ze.o=m.o,D.$a)e:{t(D.$a==1),m=st();t:for(;;){if(m==null){m=0;break e}if(t(D!=null),D.mc=m,m.c=D.c,m.i=D.i,m.l=D.l,m.l.ma=D,m.l.width=D.c,m.l.height=D.i,m.a=0,ne(m.m,H,Le,Se),!ht(D.c,D.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Rr(m.s)?(D.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=l(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(D.ic=0,m=$t(m,D.c)),!m))break t;m=1;break e}D.mc=null,m=0}else m=Se>=D.c*D.i;D=!m}if(D)return null;c.ga.Lc!=1?c.Ga=0:_=O-w}t(c.ga!=null),t(w+_<=O);e:{if(m=(H=c.ga).c,O=H.l.o,H.$a==0){if(Le=c.rc,Se=c.Vc,ze=c.Fa,U=c.P+1+w*m,Y=c.mb,ye=c.nb+w*m,t(U<=c.P+c.qc),H.Z!=0)for(t(ps[H.Z]!=null),D=0;D<_;++D)ps[H.Z](Le,Se,ze,U,Y,ye,m),Le=Y,Se=ye,ye+=m,U+=m;else for(D=0;D<_;++D)a(Y,ye,ze,U,m),Le=Y,Se=ye,ye+=m,U+=m;c.rc=Le,c.Vc=Se}else{if(t(H.mc!=null),m=w+_,t((D=H.mc)!=null),t(m<=D.i),D.C>=m)m=1;else if(H.ic||ke(),H.ic){H=D.V,Le=D.Ba,Se=D.c;var Ie=D.i,we=(ze=1,U=D.$/Se,Y=D.$%Se,ye=D.m,Pe=D.s,D.$),_e=Se*Ie,De=Se*m,He=Pe.wc,Fe=we<De?Ye(Pe,Y,U):null;t(we<=_e),t(m<=Ie),t(Rr(Pe));t:for(;;){for(;!ye.h&&we<De;){if(Y&He||(Fe=Ye(Pe,Y,U)),t(Fe!=null),re(ye),256>(Ie=gr(Fe.G[0],Fe.H[0],ye)))H[Le+we]=Ie,++we,++Y>=Se&&(Y=0,++U<=m&&!(U%16)&&he(D,U));else{if(!(280>Ie)){ze=0;break t}Ie=Kr(Ie-256,ye);var rt,Ke=gr(Fe.G[4],Fe.H[4],ye);if(re(ye),!(we>=(Ke=hn(Se,Ke=Kr(Ke,ye)))&&_e-we>=Ie)){ze=0;break t}for(rt=0;rt<Ie;++rt)H[Le+we+rt]=H[Le+we+rt-Ke];for(we+=Ie,Y+=Ie;Y>=Se;)Y-=Se,++U<=m&&!(U%16)&&he(D,U);we<De&&Y&He&&(Fe=Ye(Pe,Y,U))}t(ye.h==Z(ye))}he(D,U>m?m:U);break t}!ze||ye.h&&we<_e?(ze=0,D.a=ye.h?5:3):D.$=we,m=ze}else m=Re(D,D.V,D.Ba,D.c,D.i,m,Nt);if(!m){_=0;break e}}w+_>=O&&(c.Cc=1),_=1}if(!_)return null;if(c.Cc&&((_=c.ga)!=null&&(_.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+w*M}function x(c,m,w,_,M,O){for(;0<M--;){var D,H=c,U=m+(w?1:0),Y=c,ye=m+(w?0:3);for(D=0;D<_;++D){var Pe=Y[ye+4*D];Pe!=255&&(Pe*=32897,H[U+4*D+0]=H[U+4*D+0]*Pe>>23,H[U+4*D+1]=H[U+4*D+1]*Pe>>23,H[U+4*D+2]=H[U+4*D+2]*Pe>>23)}m+=O}}function I(c,m,w,_,M){for(;0<_--;){var O;for(O=0;O<w;++O){var D=c[m+2*O+0],H=15&(Y=c[m+2*O+1]),U=4369*H,Y=(240&Y|Y>>4)*U>>16;c[m+2*O+0]=(240&D|D>>4)*U>>16&240|(15&D|D<<4)*U>>16>>4&15,c[m+2*O+1]=240&Y|H}m+=M}}function te(c,m,w,_,M,O,D,H){var U,Y,ye=255;for(Y=0;Y<M;++Y){for(U=0;U<_;++U){var Pe=c[m+U];O[D+4*U]=Pe,ye&=Pe}m+=w,D+=H}return ye!=255}function pe(c,m,w,_,M){var O;for(O=0;O<M;++O)w[_+O]=c[m+O]>>8}function ke(){ur=x,us=I,fs=te,zs=pe}function Me(c,m,w){X[c]=function(_,M,O,D,H,U,Y,ye,Pe,Le,Se,ze,Ie,we,_e,De,He){var Fe,rt=He-1>>1,Ke=H[U+0]|Y[ye+0]<<16,bt=Pe[Le+0]|Se[ze+0]<<16;t(_!=null);var Xe=3*Ke+bt+131074>>2;for(m(_[M+0],255&Xe,Xe>>16,Ie,we),O!=null&&(Xe=3*bt+Ke+131074>>2,m(O[D+0],255&Xe,Xe>>16,_e,De)),Fe=1;Fe<=rt;++Fe){var os=H[U+Fe]|Y[ye+Fe]<<16,gs=Pe[Le+Fe]|Se[ze+Fe]<<16,as=Ke+os+bt+gs+524296,es=as+2*(os+bt)>>3;Xe=es+Ke>>1,Ke=(as=as+2*(Ke+gs)>>3)+os>>1,m(_[M+2*Fe-1],255&Xe,Xe>>16,Ie,we+(2*Fe-1)*w),m(_[M+2*Fe-0],255&Ke,Ke>>16,Ie,we+(2*Fe-0)*w),O!=null&&(Xe=as+bt>>1,Ke=es+gs>>1,m(O[D+2*Fe-1],255&Xe,Xe>>16,_e,De+(2*Fe-1)*w),m(O[D+2*Fe+0],255&Ke,Ke>>16,_e,De+(2*Fe+0)*w)),Ke=os,bt=gs}1&He||(Xe=3*Ke+bt+131074>>2,m(_[M+He-1],255&Xe,Xe>>16,Ie,we+(He-1)*w),O!=null&&(Xe=3*bt+Ke+131074>>2,m(O[D+He-1],255&Xe,Xe>>16,_e,De+(He-1)*w)))}}function Ue(){Ar[Lo]=od,Ar[eo]=Gl,Ar[gl]=ld,Ar[to]=Io,Ar[so]=vl,Ar[Ao]=Yl,Ar[Zl]=Nx,Ar[To]=Gl,Ar[Eo]=Io,Ar[Mo]=vl,Ar[n]=Yl}function Qe(c){return c&-16384?0>c?0:255:c>>jx}function nt(c,m){return Qe((19077*c>>8)+(26149*m>>8)-14234)}function Rt(c,m,w){return Qe((19077*c>>8)-(6419*m>>8)-(13320*w>>8)+8708)}function Et(c,m){return Qe((19077*c>>8)+(33050*m>>8)-17685)}function Xt(c,m,w,_,M){_[M+0]=nt(c,w),_[M+1]=Rt(c,m,w),_[M+2]=Et(c,m)}function Ss(c,m,w,_,M){_[M+0]=Et(c,m),_[M+1]=Rt(c,m,w),_[M+2]=nt(c,w)}function Ls(c,m,w,_,M){var O=Rt(c,m,w);m=O<<3&224|Et(c,m)>>3,_[M+0]=248&nt(c,w)|O>>5,_[M+1]=m}function Us(c,m,w,_,M){var O=240&Et(c,m)|15;_[M+0]=240&nt(c,w)|Rt(c,m,w)>>4,_[M+1]=O}function xr(c,m,w,_,M){_[M+0]=255,Xt(c,m,w,_,M+1)}function Qs(c,m,w,_,M){Ss(c,m,w,_,M),_[M+3]=255}function Cn(c,m,w,_,M){Xt(c,m,w,_,M),_[M+3]=255}function As(c,m){return 0>c?0:c>m?m:c}function Cr(c,m,w){X[c]=function(_,M,O,D,H,U,Y,ye,Pe){for(var Le=ye+(-2&Pe)*w;ye!=Le;)m(_[M+0],O[D+0],H[U+0],Y,ye),m(_[M+1],O[D+0],H[U+0],Y,ye+w),M+=2,++D,++U,ye+=2*w;1&Pe&&m(_[M+0],O[D+0],H[U+0],Y,ye)}}function ko(c,m,w){return w==0?c==0?m==0?6:5:m==0?4:0:w}function tn(c,m,w,_,M){switch(c>>>30){case 3:qn(m,w,_,M,0);break;case 2:Fs(m,w,_,M);break;case 1:Pr(m,w,_,M)}}function Yi(c,m){var w,_,M=m.M,O=m.Nb,D=c.oc,H=c.pc+40,U=c.oc,Y=c.pc+584,ye=c.oc,Pe=c.pc+600;for(w=0;16>w;++w)D[H+32*w-1]=129;for(w=0;8>w;++w)U[Y+32*w-1]=129,ye[Pe+32*w-1]=129;for(0<M?D[H-1-32]=U[Y-1-32]=ye[Pe-1-32]=129:(i(D,H-32-1,127,21),i(U,Y-32-1,127,9),i(ye,Pe-32-1,127,9)),_=0;_<c.za;++_){var Le=m.ya[m.aa+_];if(0<_){for(w=-1;16>w;++w)a(D,H+32*w-4,D,H+32*w+12,4);for(w=-1;8>w;++w)a(U,Y+32*w-4,U,Y+32*w+4,4),a(ye,Pe+32*w-4,ye,Pe+32*w+4,4)}var Se=c.Gd,ze=c.Hd+_,Ie=Le.ad,we=Le.Hc;if(0<M&&(a(D,H-32,Se[ze].y,0,16),a(U,Y-32,Se[ze].f,0,8),a(ye,Pe-32,Se[ze].ea,0,8)),Le.Za){var _e=D,De=H-32+16;for(0<M&&(_>=c.za-1?i(_e,De,Se[ze].y[15],4):a(_e,De,Se[ze+1].y,0,4)),w=0;4>w;w++)_e[De+128+w]=_e[De+256+w]=_e[De+384+w]=_e[De+0+w];for(w=0;16>w;++w,we<<=2)_e=D,De=H+uu[w],An[Le.Ob[w]](_e,De),tn(we,Ie,16*+w,_e,De)}else if(_e=ko(_,M,Le.Ob[0]),Pa[_e](D,H),we!=0)for(w=0;16>w;++w,we<<=2)tn(we,Ie,16*+w,D,H+uu[w]);for(w=Le.Gc,_e=ko(_,M,Le.Dd),Vn[_e](U,Y),Vn[_e](ye,Pe),we=Ie,_e=U,De=Y,255&(Le=w>>0)&&(170&Le?ja(we,256,_e,De):nn(we,256,_e,De)),Le=ye,we=Pe,255&(w>>=8)&&(170&w?ja(Ie,320,Le,we):nn(Ie,320,Le,we)),M<c.Ub-1&&(a(Se[ze].y,0,D,H+480,16),a(Se[ze].f,0,U,Y+224,8),a(Se[ze].ea,0,ye,Pe+224,8)),w=8*O*c.B,Se=c.sa,ze=c.ta+16*_+16*O*c.R,Ie=c.qa,Le=c.ra+8*_+w,we=c.Ha,_e=c.Ia+8*_+w,w=0;16>w;++w)a(Se,ze+w*c.R,D,H+32*w,16);for(w=0;8>w;++w)a(Ie,Le+w*c.B,U,Y+32*w,8),a(we,_e+w*c.B,ye,Pe+32*w,8)}}function Pn(c,m,w,_,M,O,D,H,U){var Y=[0],ye=[0],Pe=0,Le=U!=null?U.kd:0,Se=U??new pn;if(c==null||12>w)return 7;Se.data=c,Se.w=m,Se.ha=w,m=[m],w=[w],Se.gb=[Se.gb];e:{var ze=m,Ie=w,we=Se.gb;if(t(c!=null),t(Ie!=null),t(we!=null),we[0]=0,12<=Ie[0]&&!r(c,ze[0],"RIFF")){if(r(c,ze[0]+8,"WEBP")){we=3;break e}var _e=se(c,ze[0]+4);if(12>_e||4294967286<_e){we=3;break e}if(Le&&_e>Ie[0]-8){we=7;break e}we[0]=_e,ze[0]+=12,Ie[0]-=12}we=0}if(we!=0)return we;for(_e=0<Se.gb[0],w=w[0];;){e:{var De=c;Ie=m,we=w;var He=Y,Fe=ye,rt=ze=[0];if((Xe=Pe=[Pe])[0]=0,8>we[0])we=7;else{if(!r(De,Ie[0],"VP8X")){if(se(De,Ie[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var Ke=se(De,Ie[0]+8),bt=1+Te(De,Ie[0]+12);if(2147483648<=bt*(De=1+Te(De,Ie[0]+15))){we=3;break e}rt!=null&&(rt[0]=Ke),He!=null&&(He[0]=bt),Fe!=null&&(Fe[0]=De),Ie[0]+=18,we[0]-=18,Xe[0]=1}we=0}}if(Pe=Pe[0],ze=ze[0],we!=0)return we;if(Ie=!!(2&ze),!_e&&Pe)return 3;if(O!=null&&(O[0]=!!(16&ze)),D!=null&&(D[0]=Ie),H!=null&&(H[0]=0),D=Y[0],ze=ye[0],Pe&&Ie&&U==null){we=0;break}if(4>w){we=7;break}if(_e&&Pe||!_e&&!Pe&&!r(c,m[0],"ALPH")){w=[w],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{Ke=c,we=m,_e=w;var Xe=Se.gb;He=Se.na,Fe=Se.P,rt=Se.Sa,bt=22,t(Ke!=null),t(_e!=null),De=we[0];var os=_e[0];for(t(He!=null),t(rt!=null),He[0]=null,Fe[0]=null,rt[0]=0;;){if(we[0]=De,_e[0]=os,8>os){we=7;break e}var gs=se(Ke,De+4);if(4294967286<gs){we=3;break e}var as=8+gs+1&-2;if(bt+=as,0<Xe&&bt>Xe){we=3;break e}if(!r(Ke,De,"VP8 ")||!r(Ke,De,"VP8L")){we=0;break e}if(os[0]<as){we=7;break e}r(Ke,De,"ALPH")||(He[0]=Ke,Fe[0]=De+8,rt[0]=gs),De+=as,os-=as}}if(w=w[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],we!=0)break}w=[w],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(Xe=c,we=m,_e=w,He=Se.gb[0],Fe=Se.Ja,rt=Se.xa,Ke=we[0],De=!r(Xe,Ke,"VP8 "),bt=!r(Xe,Ke,"VP8L"),t(Xe!=null),t(_e!=null),t(Fe!=null),t(rt!=null),8>_e[0])we=7;else{if(De||bt){if(Xe=se(Xe,Ke+4),12<=He&&Xe>He-12){we=3;break e}if(Le&&Xe>_e[0]-8){we=7;break e}Fe[0]=Xe,we[0]+=8,_e[0]-=8,rt[0]=bt}else rt[0]=5<=_e[0]&&Xe[Ke+0]==47&&!(Xe[Ke+4]>>5),Fe[0]=_e[0];we=0}if(w=w[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],m=m[0],we!=0)break;if(4294967286<Se.Ja)return 3;if(H==null||Ie||(H[0]=Se.xa?2:1),D=[D],ze=[ze],Se.xa){if(5>w){we=7;break}H=D,Le=ze,Ie=O,c==null||5>w?c=0:5<=w&&c[m+0]==47&&!(c[m+4]>>5)?(_e=[0],Xe=[0],He=[0],ne(Fe=new E,c,m,w),vt(Fe,_e,Xe,He)?(H!=null&&(H[0]=_e[0]),Le!=null&&(Le[0]=Xe[0]),Ie!=null&&(Ie[0]=He[0]),c=1):c=0):c=0}else{if(10>w){we=7;break}H=ze,c==null||10>w||!Dn(c,m+3,w-3)?c=0:(Le=c[m+0]|c[m+1]<<8|c[m+2]<<16,Ie=16383&(c[m+7]<<8|c[m+6]),c=16383&(c[m+9]<<8|c[m+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=Se.Ja||!Ie||!c?c=0:(D&&(D[0]=Ie),H&&(H[0]=c),c=1))}if(!c||(D=D[0],ze=ze[0],Pe&&(Y[0]!=D||ye[0]!=ze)))return 3;U!=null&&(U[0]=Se,U.offset=m-U.w,t(4294967286>m-U.w),t(U.offset==U.ha-w));break}return we==0||we==7&&Pe&&U==null?(O!=null&&(O[0]|=Se.na!=null&&0<Se.na.length),_!=null&&(_[0]=D),M!=null&&(M[0]=ze),0):we}function Ki(c,m,w){var _=m.width,M=m.height,O=0,D=0,H=_,U=M;if(m.Da=c!=null&&0<c.Da,m.Da&&(H=c.cd,U=c.bd,O=c.v,D=c.j,11>w||(O&=-2,D&=-2),0>O||0>D||0>=H||0>=U||O+H>_||D+U>M))return 0;if(m.v=O,m.j=D,m.va=O+H,m.o=D+U,m.U=H,m.T=U,m.da=c!=null&&0<c.da,m.da){if(!Ve(H,U,w=[c.ib],O=[c.hb]))return 0;m.ib=w[0],m.hb=O[0]}return m.ob=c!=null&&c.ob,m.Kb=c==null||!c.Sd,m.da&&(m.ob=m.ib<3*_/4&&m.hb<3*M/4,m.Kb=0),1}function ta(c){if(c==null)return 2;if(11>c.S){var m=c.f.RGBA;m.fb+=(c.height-1)*m.A,m.A=-m.A}else m=c.f.kb,c=c.height,m.O+=(c-1)*m.fa,m.fa=-m.fa,m.N+=(c-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(c-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(c-1)*m.lb,m.lb=-m.lb);return 0}function Wa(c,m,w,_){if(_==null||0>=c||0>=m)return 2;if(w!=null){if(w.Da){var M=w.cd,O=w.bd,D=-2&w.v,H=-2&w.j;if(0>D||0>H||0>=M||0>=O||D+M>c||H+O>m)return 2;c=M,m=O}if(w.da){if(!Ve(c,m,M=[w.ib],O=[w.hb]))return 2;c=M[0],m=O[0]}}_.width=c,_.height=m;e:{var U=_.width,Y=_.height;if(c=_.S,0>=U||0>=Y||!(c>=Lo&&13>c))c=2;else{if(0>=_.Rd&&_.sd==null){D=O=M=m=0;var ye=(H=U*fu[c])*Y;if(11>c||(O=(Y+1)/2*(m=(U+1)/2),c==12&&(D=(M=U)*Y)),(Y=l(ye+2*O+D))==null){c=1;break e}_.sd=Y,11>c?((U=_.f.RGBA).eb=Y,U.fb=0,U.A=H,U.size=ye):((U=_.f.kb).y=Y,U.O=0,U.fa=H,U.Fd=ye,U.f=Y,U.N=0+ye,U.Ab=m,U.Cd=O,U.ea=Y,U.W=0+ye+O,U.Db=m,U.Ed=O,c==12&&(U.F=Y,U.J=0+ye+2*O),U.Tc=D,U.lb=M)}if(m=1,M=_.S,O=_.width,D=_.height,M>=Lo&&13>M)if(11>M)c=_.f.RGBA,m&=(H=Math.abs(c.A))*(D-1)+O<=c.size,m&=H>=O*fu[M],m&=c.eb!=null;else{c=_.f.kb,H=(O+1)/2,ye=(D+1)/2,U=Math.abs(c.fa),Y=Math.abs(c.Ab);var Pe=Math.abs(c.Db),Le=Math.abs(c.lb),Se=Le*(D-1)+O;m&=U*(D-1)+O<=c.Fd,m&=Y*(ye-1)+H<=c.Cd,m=(m&=Pe*(ye-1)+H<=c.Ed)&U>=O&Y>=H&Pe>=H,m&=c.y!=null,m&=c.f!=null,m&=c.ea!=null,M==12&&(m&=Le>=O,m&=Se<=c.Tc,m&=c.F!=null)}else m=0;c=m?0:2}}return c!=0||w!=null&&w.fd&&(c=ta(_)),c}var Ws=64,li=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sn=24,sa=32,Ji=8,vr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),X.Predictor0=function(){return 4278190080},X.Predictor1=function(c){return c},X.Predictor2=function(c,m,w){return m[w+0]},X.Predictor3=function(c,m,w){return m[w+1]},X.Predictor4=function(c,m,w){return m[w-1]},X.Predictor5=function(c,m,w){return Ge(Ge(c,m[w+1]),m[w+0])},X.Predictor6=function(c,m,w){return Ge(c,m[w-1])},X.Predictor7=function(c,m,w){return Ge(c,m[w+0])},X.Predictor8=function(c,m,w){return Ge(m[w-1],m[w+0])},X.Predictor9=function(c,m,w){return Ge(m[w+0],m[w+1])},X.Predictor10=function(c,m,w){return Ge(Ge(c,m[w-1]),Ge(m[w+0],m[w+1]))},X.Predictor11=function(c,m,w){var _=m[w+0];return 0>=St(_>>24&255,c>>24&255,(m=m[w-1])>>24&255)+St(_>>16&255,c>>16&255,m>>16&255)+St(_>>8&255,c>>8&255,m>>8&255)+St(255&_,255&c,255&m)?_:c},X.Predictor12=function(c,m,w){var _=m[w+0];return(ct((c>>24&255)+(_>>24&255)-((m=m[w-1])>>24&255))<<24|ct((c>>16&255)+(_>>16&255)-(m>>16&255))<<16|ct((c>>8&255)+(_>>8&255)-(m>>8&255))<<8|ct((255&c)+(255&_)-(255&m)))>>>0},X.Predictor13=function(c,m,w){var _=m[w-1];return(wt((c=Ge(c,m[w+0]))>>24&255,_>>24&255)<<24|wt(c>>16&255,_>>16&255)<<16|wt(c>>8&255,_>>8&255)<<8|wt(c>>0&255,_>>0&255))>>>0};var pl=X.PredictorAdd0;X.PredictorAdd1=kt,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var rn=X.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var Co,cr=X.ColorIndexInverseTransform,ci=X.MapARGB,gn=X.VP8LColorIndexInverseTransformAlpha,Va=X.MapAlpha,ra=X.VP8LPredictorsAdd=[];ra.length=16,(X.VP8LPredictors=[]).length=16,(X.VP8LPredictorsAdd_C=[]).length=16,(X.VP8LPredictors_C=[]).length=16;var na,dr,hr,Ln,zr,xn,Na,qn,Fs,ja,Pr,nn,di,Qi,Xi,yr,Hn,_a,$n,hi,Sa,ka,aa,vn,ur,us,fs,zs,ms=l(511),Un=l(2041),ui=l(225),Wn=l(767),Po=0,fi=Un,Ca=ui,Br=Wn,an=ms,Lo=0,eo=1,gl=2,to=3,so=4,Ao=5,Zl=6,To=7,Eo=8,Mo=9,n=10,o=[2,3,7],f=[3,3,11],b=[280,256,256,256,40],k=[0,1,1,1,0],F=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ce=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ce=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ee=8,qe=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gt=null,Ht=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],yn=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],qr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],mi=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ad=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Pa=[],An=[],Vn=[],id=1,xl=2,ps=[],Ar=[];Me("UpsampleRgbLinePair",Xt,3),Me("UpsampleBgrLinePair",Ss,3),Me("UpsampleRgbaLinePair",Cn,4),Me("UpsampleBgraLinePair",Qs,4),Me("UpsampleArgbLinePair",xr,4),Me("UpsampleRgba4444LinePair",Us,2),Me("UpsampleRgb565LinePair",Ls,2);var od=X.UpsampleRgbLinePair,ld=X.UpsampleBgrLinePair,Gl=X.UpsampleRgbaLinePair,Io=X.UpsampleBgraLinePair,vl=X.UpsampleArgbLinePair,Yl=X.UpsampleRgba4444LinePair,Nx=X.UpsampleRgb565LinePair,Kl=16,Jl=1<<Kl-1,yl=-227,cd=482,jx=6,hu=0,_x=l(256),Sx=l(256),kx=l(256),Cx=l(256),Px=l(cd-yl),Lx=l(cd-yl);Cr("YuvToRgbRow",Xt,3),Cr("YuvToBgrRow",Ss,3),Cr("YuvToRgbaRow",Cn,4),Cr("YuvToBgraRow",Qs,4),Cr("YuvToArgbRow",xr,4),Cr("YuvToRgba4444Row",Us,2),Cr("YuvToRgb565Row",Ls,2);var uu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ql=[0,2,8],Ax=[8,7,6,4,4,2,2,2,1,1,1,1],Tx=1;this.WebPDecodeRGBA=function(c,m,w,_,M){var O=eo,D=new Ua,H=new Mr;D.ba=H,H.S=O,H.width=[H.width],H.height=[H.height];var U=H.width,Y=H.height,ye=new dn;if(ye==null||c==null)var Pe=2;else t(ye!=null),Pe=Pn(c,m,w,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Pe!=0?U=0:(U!=null&&(U[0]=ye.width[0]),Y!=null&&(Y[0]=ye.height[0]),U=1),U){H.width=H.width[0],H.height=H.height[0],_!=null&&(_[0]=H.width),M!=null&&(M[0]=H.height);e:{if(_=new Jr,(M=new pn).data=c,M.w=m,M.ha=w,M.kd=1,m=[0],t(M!=null),((c=Pn(M.data,M.w,M.ha,null,null,null,m,null,M))==0||c==7)&&m[0]&&(c=4),(m=c)==0){if(t(D!=null),_.data=M.data,_.w=M.w+M.offset,_.ha=M.ha-M.offset,_.put=nr,_.ac=Is,_.bc=Ir,_.ma=D,M.xa){if((c=st())==null){D=1;break e}if(function(Le,Se){var ze=[0],Ie=[0],we=[0];t:for(;;){if(Le==null)return 0;if(Se==null)return Le.a=2,0;if(Le.l=Se,Le.a=0,ne(Le.m,Se.data,Se.w,Se.ha),!vt(Le.m,ze,Ie,we)){Le.a=3;break t}if(Le.xb=xl,Se.width=ze[0],Se.height=Ie[0],!ht(ze[0],Ie[0],1,Le,null))break t;return 1}return t(Le.a!=0),0}(c,_)){if(_=(m=Wa(_.width,_.height,D.Oa,D.ba))==0){t:{_=c;s:for(;;){if(_==null){_=0;break t}if(t(_.s.yc!=null),t(_.s.Ya!=null),t(0<_.s.Wb),t((w=_.l)!=null),t((M=w.ma)!=null),_.xb!=0){if(_.ca=M.ba,_.tb=M.tb,t(_.ca!=null),!Ki(M.Oa,w,to)){_.a=2;break s}if(!$t(_,w.width)||w.da)break s;if((w.da||ss(_.ca.S))&&ke(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ke()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!Ae(_.s.vb,_.s.Wa.Xa)){_.a=1;break s}_.xb=0}if(!Re(_,_.V,_.Ba,_.c,_.i,w.o,On))break s;M.Dc=_.Ma,_=1;break t}t(_.a!=0),_=0}_=!_}_&&(m=c.a)}else m=c.a}else{if((c=new Mt)==null){D=1;break e}if(c.Fa=M.na,c.P=M.P,c.qc=M.Sa,un(c,_)){if((m=Wa(_.width,_.height,D.Oa,D.ba))==0){if(c.Aa=0,w=D.Oa,t((M=c)!=null),w!=null){if(0<(U=0>(U=w.Md)?0:100<U?255:255*U/100)){for(Y=ye=0;4>Y;++Y)12>(Pe=M.pb[Y]).lc&&(Pe.ia=U*Ax[0>Pe.lc?0:Pe.lc]>>3),ye|=Pe.ia;ye&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=w.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}pt(c,_)||(m=c.a)}}else m=c.a}m==0&&D.Oa!=null&&D.Oa.fd&&(m=ta(D.ba))}D=m}O=D!=0?null:11>O?H.f.RGBA.eb:H.f.kb.y}else O=null;return O};var fu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(X,ee){for(var je="",R=0;R<4;R++)je+=String.fromCharCode(X[ee++]);return je}function v(X,ee){return(X[ee+0]<<0|X[ee+1]<<8|X[ee+2]<<16)>>>0}function y(X,ee){return(X[ee+0]<<0|X[ee+1]<<8|X[ee+2]<<16|X[ee+3]<<24)>>>0}new h;var N=[0],g=[0],C=[],j=new h,T=s,A=function(X,ee){var je={},R=0,z=!1,q=0,B=0;if(je.frames=[],!function(W,Z,Q,re){for(var de=0;de<re;de++)if(W[Z+de]!=Q.charCodeAt(de))return!0;return!1}(X,ee,"RIFF",4)){for(y(X,ee+=4),ee+=8;ee<X.length;){var ge=p(X,ee),ue=y(X,ee+=4);ee+=4;var be=ue+(1&ue);switch(ge){case"VP8 ":case"VP8L":je.frames[R]===void 0&&(je.frames[R]={}),(ae=je.frames[R]).src_off=z?B:ee-8,ae.src_size=q+ue+8,R++,z&&(z=!1,q=0,B=0);break;case"VP8X":(ae=je.header={}).feature_flags=X[ee];var ne=ee+4;ae.canvas_width=1+v(X,ne),ne+=3,ae.canvas_height=1+v(X,ne),ne+=3;break;case"ALPH":z=!0,q=be+8,B=ee-8;break;case"ANIM":(ae=je.header).bgcolor=y(X,ee),ne=ee+4,ae.loop_count=(fe=X)[(E=ne)+0]<<0|fe[E+1]<<8,ne+=2;break;case"ANMF":var ve,ae;(ae=je.frames[R]={}).offset_x=2*v(X,ee),ee+=3,ae.offset_y=2*v(X,ee),ee+=3,ae.width=1+v(X,ee),ee+=3,ae.height=1+v(X,ee),ee+=3,ae.duration=v(X,ee),ee+=3,ve=X[ee++],ae.dispose=1&ve,ae.blend=ve>>1&1}ge!="ANMF"&&(ee+=be)}var fe,E;return je}}(T,0);A.response=T,A.rgbaoutput=!0,A.dataurl=!1;var S=A.header?A.header:null,$=A.frames?A.frames:null;if(S){S.loop_counter=S.loop_count,N=[S.canvas_height],g=[S.canvas_width];for(var V=0;V<$.length&&$[V].blend!=0;V++);}var K=$[0],me=j.WebPDecodeRGBA(T,K.src_off,K.src_size,g,N);K.rgba=me,K.imgwidth=g[0],K.imgheight=N[0];for(var le=0;le<g[0]*N[0]*4;le++)C[le]=me[le];return this.width=g,this.height=N,this.data=C,this}(function(s){var t=function(){return typeof lh=="function"},r=function(N,g,C,j){var T=4,A=d;switch(j){case s.image_compression.FAST:T=1,A=l;break;case s.image_compression.MEDIUM:T=6,A=u;break;case s.image_compression.SLOW:T=9,A=h}N=a(N,g,C,A);var S=lh(N,{level:T});return s.__addimage__.arrayBufferToBinaryString(S)},a=function(N,g,C,j){for(var T,A,S,$=N.length/g,V=new Uint8Array(N.length+$),K=v(),me=0;me<$;me+=1){if(S=me*g,T=N.subarray(S,S+g),j)V.set(j(T,C,A),S+me);else{for(var le,X=K.length,ee=[];le<X;le+=1)ee[le]=K[le](T,C,A);var je=y(ee.concat());V.set(ee[je],S+me)}A=T}return V},i=function(N){var g=Array.apply([],N);return g.unshift(0),g},l=function(N,g){var C,j=[],T=N.length;j[0]=1;for(var A=0;A<T;A+=1)C=N[A-g]||0,j[A+1]=N[A]-C+256&255;return j},d=function(N,g,C){var j,T=[],A=N.length;T[0]=2;for(var S=0;S<A;S+=1)j=C&&C[S]||0,T[S+1]=N[S]-j+256&255;return T},u=function(N,g,C){var j,T,A=[],S=N.length;A[0]=3;for(var $=0;$<S;$+=1)j=N[$-g]||0,T=C&&C[$]||0,A[$+1]=N[$]+256-(j+T>>>1)&255;return A},h=function(N,g,C){var j,T,A,S,$=[],V=N.length;$[0]=4;for(var K=0;K<V;K+=1)j=N[K-g]||0,T=C&&C[K]||0,A=C&&C[K-g]||0,S=p(j,T,A),$[K+1]=N[K]-S+256&255;return $},p=function(N,g,C){if(N===g&&g===C)return N;var j=Math.abs(g-C),T=Math.abs(N-C),A=Math.abs(N+g-C-C);return j<=T&&j<=A?N:T<=A?g:C},v=function(){return[i,l,d,u,h]},y=function(N){var g=N.map(function(C){return C.reduce(function(j,T){return j+Math.abs(T)},0)});return g.indexOf(Math.min.apply(null,g))};s.processPNG=function(N,g,C,j){var T,A,S,$,V,K,me,le,X,ee,je,R,z,q,B,ge=this.decode.FLATE_DECODE,ue="";if(this.__addimage__.isArrayBuffer(N)&&(N=new Uint8Array(N)),this.__addimage__.isArrayBufferView(N)){if(N=(S=new Ub(N)).imgData,A=S.bits,T=S.colorSpace,V=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){X=(le=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,je=new Uint8Array(X*S.colors),ee=new Uint8Array(X);var be,ne=S.pixelBitlength-S.bits;for(q=0,B=0;q<X;q++){for(z=le[q],be=0;be<ne;)je[B++]=z>>>be&255,be+=S.bits;ee[q]=z>>>be&255}}if(S.bits===16){X=(le=new Uint32Array(S.decodePixels().buffer)).length,je=new Uint8Array(X*(32/S.pixelBitlength)*S.colors),ee=new Uint8Array(X*(32/S.pixelBitlength)),R=S.colors>1,q=0,B=0;for(var ve=0;q<X;)z=le[q++],je[B++]=z>>>0&255,R&&(je[B++]=z>>>16&255,z=le[q++],je[B++]=z>>>0&255),ee[ve++]=z>>>16&255;A=8}j!==s.image_compression.NONE&&t()?(N=r(je,S.width*S.colors,S.colors,j),me=r(ee,S.width,1,j)):(N=je,me=ee,ge=void 0)}if(S.colorType===3&&(T=this.color_spaces.INDEXED,K=S.palette,S.transparency.indexed)){var ae=S.transparency.indexed,fe=0;for(q=0,X=ae.length;q<X;++q)fe+=ae[q];if((fe/=255)===X-1&&ae.indexOf(0)!==-1)$=[ae.indexOf(0)];else if(fe!==X){for(le=S.decodePixels(),ee=new Uint8Array(le.length),q=0,X=le.length;q<X;q++)ee[q]=ae[le[q]];me=r(ee,S.width,1)}}var E=function(W){var Z;switch(W){case s.image_compression.FAST:Z=11;break;case s.image_compression.MEDIUM:Z=13;break;case s.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(j);return ge===this.decode.FLATE_DECODE&&(ue="/Predictor "+E+" "),ue+="/Colors "+V+" /BitsPerComponent "+A+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),(me&&this.__addimage__.isArrayBuffer(me)||this.__addimage__.isArrayBufferView(me))&&(me=this.__addimage__.arrayBufferToBinaryString(me)),{alias:C,data:N,index:g,filter:ge,decodeParameters:ue,transparency:$,palette:K,sMask:me,predictor:E,width:S.width,height:S.height,bitsPerComponent:A,colorSpace:T}}}})(jt.API),function(s){s.processGIF89A=function(t,r,a,i){var l=new Wb(t),d=l.width,u=l.height,h=[];l.decodeAndBlitFrameRGBA(0,h);var p={data:h,width:d,height:u},v=new Rd(100).encode(p,100);return s.processJPEG.call(this,v,r,a,i)},s.processGIF87A=s.processGIF89A}(jt.API),la.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:a,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},la.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(r){Cs.log("bit decode error:"+r)}},la.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),r=t%4;for(s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<t;i++)for(var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var h=this.palette[l>>7-u&1];this.data[d+4*u]=h.blue,this.data[d+4*u+1]=h.green,this.data[d+4*u+2]=h.red,this.data[d+4*u+3]=255}r!==0&&(this.pos+=4-r)}},la.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<s;i++){var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+2*i*4,u=l>>4,h=15&l,p=this.palette[u];if(this.data[d]=p.blue,this.data[d+1]=p.green,this.data[d+2]=p.red,this.data[d+3]=255,2*i+1>=this.width)break;p=this.palette[h],this.data[d+4]=p.blue,this.data[d+4+1]=p.green,this.data[d+4+2]=p.red,this.data[d+4+3]=255}t!==0&&(this.pos+=4-t)}},la.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*a;if(i<this.palette.length){var d=this.palette[i];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}s!==0&&(this.pos+=4-s)}},la.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&t)/t*255|0,u=(l>>5&t)/t*255|0,h=(l>>10&t)/t*255|0,p=l>>15?255:0,v=a*this.width*4+4*i;this.data[v]=h,this.data[v+1]=u,this.data[v+2]=d,this.data[v+3]=p}this.pos+=s}},la.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var i=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(d&t)/t*255|0,h=(d>>5&r)/r*255|0,p=(d>>11)/t*255|0,v=i*this.width*4+4*l;this.data[v]=p,this.data[v+1]=h,this.data[v+2]=u,this.data[v+3]=255}this.pos+=s}},la.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=t*this.width*4+4*r;this.data[d]=l,this.data[d+1]=i,this.data[d+2]=a,this.data[d+3]=255}this.pos+=this.width%4}},la.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=l,this.data[u+1]=i,this.data[u+2]=a,this.data[u+3]=d}},la.prototype.getData=function(){return this.data},function(s){s.processBMP=function(t,r,a,i){var l=new la(t,!1),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},p=new Rd(100).encode(h,100);return s.processJPEG.call(this,p,r,a,i)}}(jt.API),Ef.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(t,r,a,i){var l=new Ef(t),d=l.width,u=l.height,h={data:l.getData(),width:d,height:u},p=new Rd(100).encode(h,100);return s.processJPEG.call(this,p,r,a,i)}}(jt.API),jt.API.processRGBA=function(s,t,r){for(var a=s.data,i=a.length,l=new Uint8Array(i/4*3),d=new Uint8Array(i/4),u=0,h=0,p=0;p<i;p+=4){var v=a[p],y=a[p+1],N=a[p+2],g=a[p+3];l[u++]=v,l[u++]=y,l[u++]=N,d[h++]=g}var C=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:C,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},jt.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},qo=jt.API,gc=qo.getCharWidthsArray=function(s,t){var r,a,i=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),d=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:i.metadata.Unicode.widths,h=u.fof?u.fof:1,p=t.kerning?t.kerning:i.metadata.Unicode.kerning,v=p.fof?p.fof:1,y=t.doKerning!==!1,N=0,g=s.length,C=0,j=u[0]||h,T=[];for(r=0;r<g;r++)a=s.charCodeAt(r),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(a))+d*(1e3/l)||0)/1e3):(N=y&&bs(p[a])==="object"&&!isNaN(parseInt(p[a][C],10))?p[a][C]/v:0,T.push((u[a]||j)/h+N)),C=a;return T},Pf=qo.getStringUnitWidth=function(s,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return qo.processArabic&&(s=qo.processArabic(s)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(s,r,i)/r:gc.apply(this,arguments).reduce(function(l,d){return l+d},0)},Lf=function(s,t,r,a){for(var i=[],l=0,d=s.length,u=0;l!==d&&u+t[l]<r;)u+=t[l],l++;i.push(s.slice(0,l));var h=l;for(u=0;l!==d;)u+t[l]>a&&(i.push(s.slice(h,l)),u=0,h=l),u+=t[l],l++;return h!==l&&i.push(s.slice(h,l)),i},Af=function(s,t,r){r||(r={});var a,i,l,d,u,h,p,v=[],y=[v],N=r.textIndent||0,g=0,C=0,j=s.split(" "),T=gc.apply(this,[" ",r])[0];if(h=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var A=Array(h).join(" "),S=[];j.map(function(V){(V=V.split(/\s*\n/)).length>1?S=S.concat(V.map(function(K,me){return(me&&K.length?`
`:"")+K})):S.push(V[0])}),j=S,h=Pf.apply(this,[A,r])}for(l=0,d=j.length;l<d;l++){var $=0;if(a=j[l],h&&a[0]==`
`&&(a=a.substr(1),$=1),N+g+(C=(i=gc.apply(this,[a,r])).reduce(function(V,K){return V+K},0))>t||$){if(C>t){for(u=Lf.apply(this,[a,i,t-(N+g),t]),v.push(u.shift()),v=[u.pop()];u.length;)y.push([u.shift()]);C=i.slice(a.length-(v[0]?v[0].length:0)).reduce(function(V,K){return V+K},0)}else v=[a];y.push(v),N=C+h,g=T}else v.push(a),N+=g+C,g=T}return p=h?function(V,K){return(K?A:"")+V.join(" ")}:function(V){return V.join(" ")},y.map(p)},qo.splitTextToSize=function(s,t,r){var a,i=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var y=this.internal.getFont(v.fontName,v.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(s)?s:String(s).split(/\r?\n/);var d=1*this.internal.scaleFactor*t/i;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,l.lineIndent=r.lineIndent;var u,h,p=[];for(u=0,h=a.length;u<h;u++)p=p.concat(Af.apply(this,[a[u],d,l]));return p},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},i=0;i<t.length;i++)r[t[i]]="0123456789abcdef"[i],a["0123456789abcdef"[i]]=t[i];var l=function(y){return"0x"+parseInt(y,10).toString(16)},d=s.__fontmetrics__.compress=function(y){var N,g,C,j,T=["{"];for(var A in y){if(N=y[A],isNaN(parseInt(A,10))?g="'"+A+"'":(A=parseInt(A,10),g=(g=l(A).slice(2)).slice(0,-1)+a[g.slice(-1)]),typeof N=="number")N<0?(C=l(N).slice(3),j="-"):(C=l(N).slice(2),j=""),C=j+C.slice(0,-1)+a[C.slice(-1)];else{if(bs(N)!=="object")throw new Error("Don't know what to do with value type "+bs(N)+".");C=d(N)}T.push(g+C)}return T.push("}"),T.join("")},u=s.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var N,g,C,j,T={},A=1,S=T,$=[],V="",K="",me=y.length-1,le=1;le<me;le+=1)(j=y[le])=="'"?N?(C=N.join(""),N=void 0):N=[]:N?N.push(j):j=="{"?($.push([S,C]),S={},C=void 0):j=="}"?((g=$.pop())[0][g[1]]=S,C=void 0,S=g[0]):j=="-"?A=-1:C===void 0?r.hasOwnProperty(j)?(V+=r[j],C=parseInt(V,16)*A,A=1,V=""):V+=j:r.hasOwnProperty(j)?(K+=r[j],S[C]=parseInt(K,16)*A,A=1,C=void 0,K=""):K+=j;return T},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},v={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(y){var N=y.font,g=v.Unicode[N.postScriptName];g&&(N.metadata.Unicode={},N.metadata.Unicode.widths=g.widths,N.metadata.Unicode.kerning=g.kerning);var C=p.Unicode[N.postScriptName];C&&(N.metadata.Unicode.encoding=C,N.encoding=C.codePages[0])}])}(jt.API),function(s){var t=function(r){for(var a=r.length,i=new Uint8Array(a),l=0;l<a;l++)i[l]=r.charCodeAt(l);return i};s.API.events.push(["addFont",function(r){var a=void 0,i=r.font,l=r.instance;if(!i.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(a=l.existsFileInVFS(i.postScriptName)===!1?l.loadFile(i.postScriptName):l.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(d,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(El(u)),d.metadata=s.API.TTFFont.open(u),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(i,a)}}])}(jt),function(s){function t(){return(_t.canvg?Promise.resolve(_t.canvg):rh(()=>import("./index.es-BPoMe8la.js"),__vite__mapDeps([0,1,2,3]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}jt.API.addSvgAsImage=function(r,a,i,l,d,u,h,p){if(isNaN(a)||isNaN(i))throw Cs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(d))throw Cs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=l,v.height=d;var y=v.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,v.width,v.height);var N={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(C){return C.fromString(y,r,N)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(N)}).then(function(){g.addImage(v.toDataURL("image/jpeg",1),a,i,l,d,h,p)})}}(),jt.API.putTotalPages=function(s){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var i=0;i<this.internal.pages[a].length;i++)this.internal.pages[a][i]=this.internal.pages[a][i].replace(t,r);return this},jt.API.viewerPreferences=function(s,t){var r;s=s||{},t=t||!1;var a,i,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(d),h=[],p=0,v=0,y=0;function N(C,j){var T,A=!1;for(T=0;T<C.length;T+=1)C[T]===j&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var g=u.length;for(y=0;y<g;y+=1)r[u[y]].value=r[u[y]].defaultValue,r[u[y]].explicitSet=!1}if(bs(s)==="object"){for(i in s)if(l=s[i],N(u,i)&&l!==void 0){if(r[i].type==="boolean"&&typeof l=="boolean")r[i].value=l;else if(r[i].type==="name"&&N(r[i].valueSet,l))r[i].value=l;else if(r[i].type==="integer"&&Number.isInteger(l))r[i].value=l;else if(r[i].type==="array"){for(p=0;p<l.length;p+=1)if(a=!0,l[p].length===1&&typeof l[p][0]=="number")h.push(String(l[p]-1));else if(l[p].length>1){for(v=0;v<l[p].length;v+=1)typeof l[p][v]!="number"&&(a=!1);a===!0&&h.push([l[p][0]-1,l[p][1]-1].join(" "))}r[i].value="["+h.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,j=[];for(C in r)r[C].explicitSet===!0&&(r[C].type==="name"?j.push("/"+C+" /"+r[C].value):j.push("/"+C+" "+r[C].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(s){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(a)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),p=l.length+d.length+u.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(i+l+d+u+h),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(a,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(jt.API),function(s){var t=s.API,r=t.pdfEscape16=function(l,d){for(var u,h=d.metadata.Unicode.widths,p=["","0","00","000","0000"],v=[""],y=0,N=l.length;y<N;++y){if(u=d.metadata.characterToGlyph(l.charCodeAt(y)),d.metadata.glyIdsUsed.push(u),d.metadata.toUnicode[u]=l.charCodeAt(y),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(d.metadata.widthOfGlyph(u),10)])),u=="0")return v.join("");u=u.toString(16),v.push(p[4-u.length],u)}return v.join("")},a=function(l){var d,u,h,p,v,y,N;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,N=(u=Object.keys(l).sort(function(g,C){return g-C})).length;y<N;y++)d=u[y],h.length>=100&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(p=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),h.push("<"+d+"><"+p+">"));return h.length&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,p=d.newObject,v=d.putStream;if(u.metadata instanceof s.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,N=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),g="",C=0;C<N.length;C++)g+=String.fromCharCode(N[C]);var j=p();v({data:g,addLength1:!0,objectId:j}),h("endobj");var T=p();v({data:a(u.metadata.toUnicode),addLength1:!0,objectId:T}),h("endobj");var A=p();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+$o(u.fontName)),h("/FontFile2 "+j+" 0 R"),h("/FontBBox "+s.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var S=p();h("<<"),h("/Type /Font"),h("/BaseFont /"+$o(u.fontName)),h("/FontDescriptor "+A+" 0 R"),h("/W "+s.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=p(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+T+" 0 R"),h("/BaseFont /"+$o(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+S+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(d){var u=d.font,h=d.out,p=d.newObject,v=d.putStream;if(u.metadata instanceof s.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,N="",g=0;g<y.length;g++)N+=String.fromCharCode(y[g]);var C=p();v({data:N,addLength1:!0,objectId:C}),h("endobj");var j=p();v({data:a(u.metadata.toUnicode),addLength1:!0,objectId:j}),h("endobj");var T=p();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+C+" 0 R"),h("/Flags 96"),h("/FontBBox "+s.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+$o(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=p();for(var A=0;A<u.metadata.hmtx.widths.length;A++)u.metadata.hmtx.widths[A]=parseInt(u.metadata.hmtx.widths[A]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+$o(u.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]);var i=function(l){var d,u=l.text||"",h=l.x,p=l.y,v=l.options||{},y=l.mutex||{},N=y.pdfEscape,g=y.activeFontKey,C=y.fonts,j=g,T="",A=0,S="",$=C[j].encoding;if(C[j].encoding!=="Identity-H")return{text:u,x:h,y:p,options:v,mutex:y};for(S=u,j=g,Array.isArray(u)&&(S=u[0]),A=0;A<S.length;A+=1)C[j].metadata.hasOwnProperty("cmap")&&(d=C[j].metadata.cmap.unicode.codeMap[S[A].charCodeAt(0)]),d||S[A].charCodeAt(0)<256&&C[j].metadata.hasOwnProperty("Unicode")?T+=S[A]:T+="";var V="";return parseInt(j.slice(1))<14||$==="WinAnsiEncoding"?V=N(T,j).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(V=r(T,C[j])),y.isHex=!0,{text:V,x:h,y:p,options:v,mutex:y}};t.events.push(["postProcessText",function(l){var d=l.text||"",u=[],h={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var p=0;for(p=0;p<d.length;p+=1)Array.isArray(d[p])&&d[p].length===3?u.push([i(Object.assign({},h,{text:d[p][0]})).text,d[p][1],d[p][2]]):u.push(i(Object.assign({},h,{text:d[p]})).text);l.text=u}else l.text=i(Object.assign({},h,{text:d})).text}])}(jt),function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},s.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},s.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(jt.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(a){var i,l,d,u,h,p,v,y=t,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,$=0;this.__bidiEngine__={};var V=function(R){var z=R.charCodeAt(),q=z>>8,B=j[q];return B!==void 0?y[256*B+(255&z)]:q===252||q===253?"AL":A.test(q)?"L":q===8?"R":"N"},K=function(R){for(var z,q=0;q<R.length;q++){if((z=V(R.charAt(q)))==="L")return!1;if(z==="R")return!0}return!1},me=function(R,z,q,B){var ge,ue,be,ne,ve=z[B];switch(ve){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(ve="AN");break;case"AL":S=!0,ve="R";break;case"WS":ve="N";break;case"CS":B<1||B+1>=z.length||(ge=q[B-1])!=="EN"&&ge!=="AN"||(ue=z[B+1])!=="EN"&&ue!=="AN"?ve="N":S&&(ue="AN"),ve=ue===ge?ue:"N";break;case"ES":ve=(ge=B>0?q[B-1]:"B")==="EN"&&B+1<z.length&&z[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&q[B-1]==="EN"){ve="EN";break}if(S){ve="N";break}for(be=B+1,ne=z.length;be<ne&&z[be]==="ET";)be++;ve=be<ne&&z[be]==="EN"?"EN":"N";break;case"NSM":if(d&&!u){for(ne=z.length,be=B+1;be<ne&&z[be]==="NSM";)be++;if(be<ne){var ae=R[B],fe=ae>=1425&&ae<=2303||ae===64286;if(ge=z[be],fe&&(ge==="R"||ge==="AL")){ve="R";break}}}ve=B<1||(ge=z[B-1])==="B"?"N":q[B-1];break;case"B":S=!1,i=!0,ve=$;break;case"S":l=!0,ve="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":ve="N"}return ve},le=function(R,z,q){var B=R.split("");return q&&X(B,q,{hiLevel:$}),B.reverse(),z&&z.reverse(),B.join("")},X=function(R,z,q){var B,ge,ue,be,ne,ve=-1,ae=R.length,fe=0,E=[],W=$?g:N,Z=[];for(S=!1,i=!1,l=!1,ge=0;ge<ae;ge++)Z[ge]=V(R[ge]);for(ue=0;ue<ae;ue++){if(ne=fe,E[ue]=me(R,Z,E,ue),B=240&(fe=W[ne][C[E[ue]]]),fe&=15,z[ue]=be=W[fe][5],B>0)if(B===16){for(ge=ve;ge<ue;ge++)z[ge]=1;ve=-1}else ve=-1;if(W[fe][6])ve===-1&&(ve=ue);else if(ve>-1){for(ge=ve;ge<ue;ge++)z[ge]=be;ve=-1}Z[ue]==="B"&&(z[ue]=0),q.hiLevel|=be}l&&function(Q,re,de){for(var Ne=0;Ne<de;Ne++)if(Q[Ne]==="S"){re[Ne]=$;for(var J=Ne-1;J>=0&&Q[J]==="WS";J--)re[J]=$}}(Z,z,ae)},ee=function(R,z,q,B,ge){if(!(ge.hiLevel<R)){if(R===1&&$===1&&!i)return z.reverse(),void(q&&q.reverse());for(var ue,be,ne,ve,ae=z.length,fe=0;fe<ae;){if(B[fe]>=R){for(ne=fe+1;ne<ae&&B[ne]>=R;)ne++;for(ve=fe,be=ne-1;ve<be;ve++,be--)ue=z[ve],z[ve]=z[be],z[be]=ue,q&&(ue=q[ve],q[ve]=q[be],q[be]=ue);fe=ne}fe++}}},je=function(R,z,q){var B=R.split(""),ge={hiLevel:$};return q||(q=[]),X(B,q,ge),function(ue,be,ne){if(ne.hiLevel!==0&&v)for(var ve,ae=0;ae<ue.length;ae++)be[ae]===1&&(ve=T.indexOf(ue[ae]))>=0&&(ue[ae]=T[ve+1])}(B,q,ge),ee(2,B,z,q,ge),ee(1,B,z,q,ge),B.join("")};return this.__bidiEngine__.doBidiReorder=function(R,z,q){if(function(ge,ue){if(ue)for(var be=0;be<ge.length;be++)ue[be]=be;u===void 0&&(u=K(ge)),p===void 0&&(p=K(ge))}(R,z),d||!h||p)if(d&&h&&u^p)$=u?1:0,R=le(R,z,q);else if(!d&&h&&p)$=u?1:0,R=je(R,z,q),R=le(R,z);else if(!d||u||h||p){if(d&&!h&&u^p)R=le(R,z),u?($=0,R=je(R,z,q)):($=1,R=je(R,z,q),R=le(R,z));else if(d&&u&&!h&&p)$=1,R=je(R,z,q),R=le(R,z);else if(!d&&!h&&u^p){var B=v;u?($=1,R=je(R,z,q),$=0,v=!1,R=je(R,z,q),v=B):($=0,R=je(R,z,q),R=le(R,z),$=1,v=!1,R=je(R,z,q),v=B,R=le(R,z))}}else $=0,R=je(R,z,q);else $=u?1:0,R=je(R,z,q);return R},this.__bidiEngine__.setOptions=function(R){R&&(d=R.isInputVisual,h=R.isOutputVisual,u=R.isInputRtl,p=R.isOutputRtl,v=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(a){var i=a.text;a.x,a.y;var l=a.options||{};a.mutex,l.lang;var d=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(d=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?d.push([r.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):d.push([r.doBidiReorder(i[u])]);a.text=d}else a.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(jt),jt.API.TTFFont=function(){function s(t){var r;if(this.rawData=t,r=this.contents=new Ri(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new iw(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new Vb(this.contents),this.head=new Gb(this),this.name=new Xb(this),this.cmap=new e0(this),this.toUnicode={},this.hhea=new Yb(this),this.maxp=new ew(this),this.hmtx=new tw(this),this.post=new Jb(this),this.os2=new Kb(this),this.loca=new aw(this),this.glyf=new sw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,r,a,i,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,u,h,p;for(p=[],d=0,u=(h=this.bbox).length;d<u;d++)t=h[d],p.push(Math.round(t*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(a=255&(i=this.post.italic_angle),(32768&(r=i>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},s.prototype.widthOfString=function(t,r,a){var i,l,d,u;for(d=0,l=0,u=(t=""+t).length;0<=u?l<u:l>u;l=0<=u?++l:--l)i=t.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(i))+a*(1e3/r)||0;return d*(r/1e3)},s.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},s}();var fa,Ri=function(){function s(t){this.data=t??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},s.prototype.writeString=function(t){var r,a,i;for(i=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,r,a,i,l,d,u,h;return t=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),d=this.readByte(),u=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^i)+16777216*(255^l)+65536*(255^d)+256*(255^u)+(255^h)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*i+16777216*l+65536*d+256*u+h},s.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},s.prototype.write=function(t){var r,a,i,l;for(l=[],a=0,i=t.length;a<i;a++)r=t[a],l.push(this.writeByte(r));return l},s}(),Vb=function(){var s;function t(r){var a,i,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,l=this.tableCount;0<=l?i<l:i>l;i=0<=l?++i:--i)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,i,l,d,u,h,p,v,y,N,g,C,j;for(j in g=Object.keys(r).length,h=Math.log(2),y=16*Math.floor(Math.log(g)/h),d=Math.floor(y/h),v=16*g-y,(i=new Ri).writeInt(this.scalarType),i.writeShort(g),i.writeShort(y),i.writeShort(d),i.writeShort(v),l=16*g,p=i.pos+l,u=null,C=[],r)for(N=r[j],i.writeString(j),i.writeInt(s(N)),i.writeInt(p),i.writeInt(N.length),C=C.concat(N),j==="head"&&(u=p),p+=N.length;p%4;)C.push(0),p++;return i.write(C),a=2981146554-s(i.data),i.pos=u+8,i.writeUInt32(a),i.data},s=function(r){var a,i,l,d;for(r=t0.call(r);r.length%4;)r.push(0);for(l=new Ri(r),i=0,a=0,d=r.length;a<d;a=a+=4)i+=l.readUInt32();return 4294967295&i},t}(),Zb={}.hasOwnProperty,Fa=function(s,t){for(var r in t)Zb.call(t,r)&&(s[r]=t[r]);function a(){this.constructor=s}return a.prototype=t.prototype,s.prototype=new a,s.__super__=t.prototype,s};fa=function(){function s(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var Gb=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new Ri).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),Mf=function(){function s(t,r){var a,i,l,d,u,h,p,v,y,N,g,C,j,T,A,S,$;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),y=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(g=t.readUInt16(),N=g/2,t.pos+=6,l=function(){var V,K;for(K=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)K.push(t.readUInt16());return K}(),t.pos+=2,j=function(){var V,K;for(K=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)K.push(t.readUInt16());return K}(),p=function(){var V,K;for(K=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)K.push(t.readUInt16());return K}(),v=function(){var V,K;for(K=[],h=V=0;0<=N?V<N:V>N;h=0<=N?++V:--V)K.push(t.readUInt16());return K}(),i=(this.length-t.pos+this.offset)/2,u=function(){var V,K;for(K=[],h=V=0;0<=i?V<i:V>i;h=0<=i?++V:--V)K.push(t.readUInt16());return K}(),h=A=0,$=l.length;A<$;h=++A)for(T=l[h],a=S=C=j[h];C<=T?S<=T:S>=T;a=C<=T?++S:--S)v[h]===0?d=a+p[h]:(d=u[v[h]/2+(a-C)-(N-h)]||0)!==0&&(d+=p[h]),this.codeMap[a]=65535&d}t.pos=y}return s.encode=function(t,r){var a,i,l,d,u,h,p,v,y,N,g,C,j,T,A,S,$,V,K,me,le,X,ee,je,R,z,q,B,ge,ue,be,ne,ve,ae,fe,E,W,Z,Q,re,de,Ne,J,oe,ie,Te;switch(B=new Ri,d=Object.keys(t).sort(function(se,Ae){return se-Ae}),r){case"macroman":for(j=0,T=function(){var se=[];for(C=0;C<256;++C)se.push(0);return se}(),S={0:0},l={},ge=0,ve=d.length;ge<ve;ge++)S[J=t[i=d[ge]]]==null&&(S[J]=++j),l[i]={old:t[i],new:S[t[i]]},T[i]=S[t[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(T),{charMap:l,subtable:B.data,maxGlyphID:j+1};case"unicode":for(z=[],y=[],$=0,S={},a={},A=p=null,ue=0,ae=d.length;ue<ae;ue++)S[K=t[i=d[ue]]]==null&&(S[K]=++$),a[i]={old:K,new:S[K]},u=S[K]-i,A!=null&&u===p||(A&&y.push(A),z.push(i),p=u),A=i;for(A&&y.push(A),y.push(65535),z.push(65535),je=2*(ee=z.length),X=2*Math.pow(Math.log(ee)/Math.LN2,2),N=Math.log(X/2)/Math.LN2,le=2*ee-X,h=[],me=[],g=[],C=be=0,fe=z.length;be<fe;C=++be){if(R=z[C],v=y[C],R===65535){h.push(0),me.push(0);break}if(R-(q=a[R].new)>=32768)for(h.push(0),me.push(2*(g.length+ee-C)),i=ne=R;R<=v?ne<=v:ne>=v;i=R<=v?++ne:--ne)g.push(a[i].new);else h.push(q-R),me.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*ee+2*g.length),B.writeUInt16(0),B.writeUInt16(je),B.writeUInt16(X),B.writeUInt16(N),B.writeUInt16(le),de=0,E=y.length;de<E;de++)i=y[de],B.writeUInt16(i);for(B.writeUInt16(0),Ne=0,W=z.length;Ne<W;Ne++)i=z[Ne],B.writeUInt16(i);for(oe=0,Z=h.length;oe<Z;oe++)u=h[oe],B.writeUInt16(u);for(ie=0,Q=me.length;ie<Q;ie++)V=me[ie],B.writeUInt16(V);for(Te=0,re=g.length;Te<re;Te++)j=g[Te],B.writeUInt16(j);return{charMap:a,subtable:B.data,maxGlyphID:$+1}}},s}(),e0=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,i,l;for(r.pos=this.offset,this.version=r.readUInt16(),l=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=l?i<l:i>l;i=0<=l?++i:--i)a=new Mf(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var i,l;return a==null&&(a="macroman"),i=Mf.encode(r,a),(l=new Ri).writeUInt16(0),l.writeUInt16(1),i.table=l.data.concat(i.subtable),i},t}(),Yb=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),Kb=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,i;for(i=[],a=0;a<10;++a)i.push(r.readByte());return i}(),this.charRange=function(){var a,i;for(i=[],a=0;a<4;++a)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,i;for(i=[],a=0;a<2;a=++a)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),Jb=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="post",t.prototype.parse=function(r){var a,i,l;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var d;for(i=r.readUInt16(),this.glyphNameIndex=[],d=0;0<=i?d<i:d>i;d=0<=i?++d:--d)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],l=[];r.pos<this.offset+this.length;)a=r.readByte(),l.push(this.names.push(r.readString(a)));return l;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var u,h,p;for(p=[],d=u=0,h=this.file.maxp.numGlyphs;0<=h?u<h:u>h;d=0<=h?++u:--u)p.push(r.readUInt32());return p}).call(this)}},t}(),Qb=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Xb=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="name",t.prototype.parse=function(r){var a,i,l,d,u,h,p,v,y,N,g;for(r.pos=this.offset,r.readShort(),a=r.readShort(),h=r.readShort(),i=[],d=0;0<=a?d<a:d>a;d=0<=a?++d:--d)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+h+r.readShort()});for(p={},d=y=0,N=i.length;y<N;d=++y)l=i[d],r.pos=l.offset,v=r.readString(l.length),u=new Qb(v,l),p[g=l.nameID]==null&&(p[g]=[]),p[l.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},t}(),ew=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),tw=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,i,l,d,u,h,p;for(r.pos=this.offset,this.metrics=[],a=0,h=this.file.hhea.numberOfMetrics;0<=h?a<h:a>h;a=0<=h?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,y;for(y=[],a=v=0;0<=l?v<l:v>l;a=0<=l?++v:--v)y.push(r.readInt16());return y}(),this.widths=(function(){var v,y,N,g;for(g=[],v=0,y=(N=this.metrics).length;v<y;v++)d=N[v],g.push(d.advance);return g}).call(this),i=this.widths[this.widths.length-1],p=[],a=u=0;0<=l?u<l:u>l;a=0<=l?++u:--u)p.push(this.widths.push(i));return p},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),t0=[].slice,sw=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,i,l,d,u,h,p,v,y,N;return r in this.cache?this.cache[r]:(d=this.file.loca,a=this.file.contents,i=d.indexOf(r),(l=d.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+i,u=(h=new Ri(a.read(l))).readShort(),v=h.readShort(),N=h.readShort(),p=h.readShort(),y=h.readShort(),this.cache[r]=u===-1?new nw(h,v,N,p,y):new rw(h,u,v,N,p,y),this.cache[r]))},t.prototype.encode=function(r,a,i){var l,d,u,h,p;for(u=[],d=[],h=0,p=a.length;h<p;h++)l=r[a[h]],d.push(u.length),l&&(u=u.concat(l.encode(i)));return d.push(u.length),{table:u,offsets:d}},t}(),rw=function(){function s(t,r,a,i,l,d){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=i,this.xMax=l,this.yMax=d,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),nw=function(){function s(t,r,a,i,l){var d,u;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;u=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&u;)d.pos+=1&u?4:2,128&u?d.pos+=8:64&u?d.pos+=4:8&u&&(d.pos+=2)}return s.prototype.encode=function(){var t,r,a;for(r=new Ri(t0.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},s}(),aw=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Fa(t,fa),t.prototype.tag="loca",t.prototype.parse=function(r){var a,i;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var l,d;for(d=[],i=0,l=this.length;i<l;i+=2)d.push(2*r.readUInt16());return d}).call(this):(function(){var l,d;for(d=[],i=0,l=this.length;i<l;i+=4)d.push(r.readUInt32());return d}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var i=new Uint32Array(this.offsets.length),l=0,d=0,u=0;u<i.length;++u)if(i[u]=l,d<a.length&&a[d]==u){++d,i[u]=l;var h=this.offsets[u],p=this.offsets[u+1]-h;p>0&&(l+=p)}for(var v=new Array(4*i.length),y=0;y<i.length;++y)v[4*y+3]=255&i[y],v[4*y+2]=(65280&i[y])>>8,v[4*y+1]=(16711680&i[y])>>16,v[4*y]=(4278190080&i[y])>>24;return v},t}(),iw=function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,r,a,i,l;for(r in i=this.font.cmap.tables[0].codeMap,t={},l=this.subset)a=l[r],t[r]=i[a];return t},s.prototype.glyphsFor=function(t){var r,a,i,l,d,u,h;for(i={},d=0,u=t.length;d<u;d++)i[l=t[d]]=this.font.glyf.glyphFor(l);for(l in r=[],i)(a=i[l])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(l in h=this.glyphsFor(r))a=h[l],i[l]=a;return i},s.prototype.encode=function(t,r){var a,i,l,d,u,h,p,v,y,N,g,C,j,T,A;for(i in a=e0.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(t),g={0:0},A=a.charMap)g[(h=A[i]).old]=h.new;for(C in N=a.maxGlyphID,d)C in g||(g[C]=N++);return v=function(S){var $,V;for($ in V={},S)V[S[$]]=$;return V}(g),y=Object.keys(v).sort(function(S,$){return S-$}),j=function(){var S,$,V;for(V=[],S=0,$=y.length;S<$;S++)u=y[S],V.push(v[u]);return V}(),l=this.font.glyf.encode(d,j,g),p=this.font.loca.encode(l.offsets,j),T={cmap:this.font.cmap.raw(),glyf:l.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},s}();jt.API.PDFObject=function(){var s;function t(){}return s=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,i,l,d;if(Array.isArray(r))return"["+function(){var u,h,p;for(p=[],u=0,h=r.length;u<h;u++)a=r[u],p.push(t.convert(a));return p}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+s(r.getUTCFullYear(),4)+s(r.getUTCMonth(),2)+s(r.getUTCDate(),2)+s(r.getUTCHours(),2)+s(r.getUTCMinutes(),2)+s(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in l=["<<"],r)d=r[i],l.push("/"+i+" "+t.convert(d));return l.push(">>"),l.join(`
`)}return""+r},t}();function s0(s,t,r,a,i){a=a||{};var l=1.15,d=i.internal.scaleFactor,u=i.internal.getFontSize()/d,h=i.getLineHeightFactor?i.getLineHeightFactor():l,p=u*h,v=/\r\n|\r|\n/g,y="",N=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(y=typeof s=="string"?s.split(v):s,N=y.length||1),r+=u*(2-l),a.valign==="middle"?r-=N/2*p:a.valign==="bottom"&&(r-=N*p),a.halign==="center"||a.halign==="right"){var g=u;if(a.halign==="center"&&(g*=.5),y&&N>=1){for(var C=0;C<y.length;C++)i.text(y[C],t-i.getStringUnitWidth(y[C])*g,r),r+=p;return i}t-=i.getStringUnitWidth(s)*g}return a.halign==="justify"?i.text(s,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):i.text(s,t,r),i}var If={},Ko=function(){function s(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:If=t},s.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},s.prototype.applyStyles=function(t,r){var a,i,l;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var d=this.jsPDFDocument.internal.getFont(),u=d.fontStyle,h=d.fontName;if(t.font&&(h=t.font),t.fontStyle){u=t.fontStyle;var p=this.getFontList()[h];p&&p.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(p[0]),u=p[0])}if(this.jsPDFDocument.setFont(h,u),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var v=s.unifyColor(t.fillColor);v&&(a=this.jsPDFDocument).setFillColor.apply(a,v),v=s.unifyColor(t.textColor),v&&(i=this.jsPDFDocument).setTextColor.apply(i,v),v=s.unifyColor(t.lineColor),v&&(l=this.jsPDFDocument).setDrawColor.apply(l,v),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},s.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},s.prototype.rect=function(t,r,a,i,l){return this.jsPDFDocument.rect(t,r,a,i,l)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return If||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s}(),ph=function(s,t){return ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},ph(s,t)};function r0(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ph(s,t);function r(){this.constructor=s}s.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var n0=function(s){r0(t,s);function t(r){var a=s.call(this)||this;return a._element=r,a}return t}(Array);function ow(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function lw(s){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[s]}function Dc(s,t,r){r.applyStyles(t,!0);var a=Array.isArray(s)?s:[s],i=a.map(function(l){return r.getTextWidth(l)}).reduce(function(l,d){return Math.max(l,d)},0);return i}function a0(s,t,r,a){var i=t.settings.tableLineWidth,l=t.settings.tableLineColor;s.applyStyles({lineWidth:i,lineColor:l});var d=i0(i,!1);d&&s.rect(r.x,r.y,t.getWidth(s.pageSize().width),a.y-r.y,d)}function i0(s,t){var r=s>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function td(s,t){var r,a,i,l;if(s=s||t,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=t}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(r=s.left)!==null&&r!==void 0?r:t,top:(a=s.top)!==null&&a!==void 0?a:t,right:(i=s.right)!==null&&i!==void 0?i:t,bottom:(l=s.bottom)!==null&&l!==void 0?l:t}):(typeof s!="number"&&(s=t),{top:s,right:s,bottom:s,left:s})}function o0(s,t){var r=td(t.settings.margin,0);return s.pageSize().width-(r.left+r.right)}function cw(s,t,r,a,i){var l={},d=1.3333333333333333,u=Od(t,function($){return i.getComputedStyle($).backgroundColor});u!=null&&(l.fillColor=u);var h=Od(t,function($){return i.getComputedStyle($).color});h!=null&&(l.textColor=h);var p=hw(a,r);p&&(l.cellPadding=p);var v="borderTopColor",y=d*r,N=a.borderTopWidth;if(a.borderBottomWidth===N&&a.borderRightWidth===N&&a.borderLeftWidth===N){var g=(parseFloat(N)||0)/y;g&&(l.lineWidth=g)}else l.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/y,right:(parseFloat(a.borderRightWidth)||0)/y,bottom:(parseFloat(a.borderBottomWidth)||0)/y,left:(parseFloat(a.borderLeftWidth)||0)/y},l.lineWidth.top||(l.lineWidth.right?v="borderRightColor":l.lineWidth.bottom?v="borderBottomColor":l.lineWidth.left&&(v="borderLeftColor"));var C=Od(t,function($){return i.getComputedStyle($)[v]});C!=null&&(l.lineColor=C);var j=["left","right","center","justify"];j.indexOf(a.textAlign)!==-1&&(l.halign=a.textAlign),j=["middle","bottom","top"],j.indexOf(a.verticalAlign)!==-1&&(l.valign=a.verticalAlign);var T=parseInt(a.fontSize||"");isNaN(T)||(l.fontSize=T/d);var A=dw(a);A&&(l.fontStyle=A);var S=(a.fontFamily||"").toLowerCase();return s.indexOf(S)!==-1&&(l.font=S),l}function dw(s){var t="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(t="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(t+="italic"),t}function Od(s,t){var r=l0(s,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var i=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],l=parseInt(a[4]);return l===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function l0(s,t){var r=t(s);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?s.parentElement==null?null:l0(s.parentElement,t):r}function hw(s,t){var r=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],a=96/(72/t),i=(parseInt(s.lineHeight)-parseInt(s.fontSize))/t/2,l=r.map(function(u){return parseInt(u||"0")/a}),d=td(l,0);return i>d.top&&(d.top=i),i>d.bottom&&(d.bottom=i),d}function c0(s,t,r,a,i){var l,d;a===void 0&&(a=!1),i===void 0&&(i=!1);var u;typeof t=="string"?u=r.document.querySelector(t):u=t;var h=Object.keys(s.getFontList()),p=s.scaleFactor(),v=[],y=[],N=[];if(!u)return console.error("Html table could not be found with input: ",t),{head:v,body:y,foot:N};for(var g=0;g<u.rows.length;g++){var C=u.rows[g],j=(d=(l=C?.parentElement)===null||l===void 0?void 0:l.tagName)===null||d===void 0?void 0:d.toLowerCase(),T=uw(h,p,r,C,a,i);T&&(j==="thead"?v.push(T):j==="tfoot"?N.push(T):y.push(T))}return{head:v,body:y,foot:N}}function uw(s,t,r,a,i,l){for(var d=new n0(a),u=0;u<a.cells.length;u++){var h=a.cells[u],p=r.getComputedStyle(h);if(i||p.display!=="none"){var v=void 0;l&&(v=cw(s,h,t,p,r)),d.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:v,_element:h,content:fw(h)})}}var y=r.getComputedStyle(a);if(d.length>0&&(i||y.display!=="none"))return d}function fw(s){var t=s.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function mw(s,t,r){for(var a=0,i=[s,t,r];a<i.length;a++){var l=i[a];l&&typeof l!="object"&&console.error("The options parameter should be of type object, is: "+typeof l),l.startY&&typeof l.startY!="number"&&(console.error("Invalid value for startY option",l.startY),delete l.startY)}}function Ka(s,t,r,a,i){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(s),d=1;d<arguments.length;d++){var u=arguments[d];if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(l[h]=u[h])}return l}function d0(s,t){var r=new Ko(s),a=r.getDocumentOptions(),i=r.getGlobalOptions();mw(i,a,t);var l=Ka({},i,a,t),d;typeof window<"u"&&(d=window);var u=pw(i,a,t),h=gw(i,a,t),p=xw(r,l),v=yw(r,l,d);return{id:t.tableId,content:v,hooks:h,styles:u,settings:p}}function pw(s,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(h){if(h==="columnStyles"){var p=s[h],v=t[h],y=r[h];a.columnStyles=Ka({},p,v,y)}else{var N=[s,t,r],g=N.map(function(C){return C[h]||{}});a[h]=Ka({},g[0],g[1],g[2])}},l=0,d=Object.keys(a);l<d.length;l++){var u=d[l];i(u)}return a}function gw(s,t,r){for(var a=[s,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},l=0,d=a;l<d.length;l++){var u=d[l];u.didParseCell&&i.didParseCell.push(u.didParseCell),u.willDrawCell&&i.willDrawCell.push(u.willDrawCell),u.didDrawCell&&i.didDrawCell.push(u.didDrawCell),u.willDrawPage&&i.willDrawPage.push(u.willDrawPage),u.didDrawPage&&i.didDrawPage.push(u.didDrawPage)}return i}function xw(s,t){var r,a,i,l,d,u,h,p,v,y,N,g,C=td(t.margin,40/s.scaleFactor()),j=(r=vw(s,t.startY))!==null&&r!==void 0?r:C.top,T;t.showFoot===!0?T="everyPage":t.showFoot===!1?T="never":T=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var A;t.showHead===!0?A="everyPage":t.showHead===!1?A="never":A=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var S=(l=t.useCss)!==null&&l!==void 0?l:!1,$=t.theme||(S?"plain":"striped"),V=!!t.horizontalPageBreak,K=(d=t.horizontalPageBreakRepeat)!==null&&d!==void 0?d:null;return{includeHiddenHtml:(u=t.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:S,theme:$,startY:j,margin:C,pageBreak:(h=t.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(p=t.rowPageBreak)!==null&&p!==void 0?p:"auto",tableWidth:(v=t.tableWidth)!==null&&v!==void 0?v:"auto",showHead:A,showFoot:T,tableLineWidth:(y=t.tableLineWidth)!==null&&y!==void 0?y:0,tableLineColor:(N=t.tableLineColor)!==null&&N!==void 0?N:200,horizontalPageBreak:V,horizontalPageBreakRepeat:K,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function vw(s,t){var r=s.getLastAutoTable(),a=s.scaleFactor(),i=s.pageNumber(),l=!1;if(r&&r.startPageNumber){var d=r.startPageNumber+r.pageNumber-1;l=d===i}return typeof t=="number"?t:(t==null||t===!1)&&l&&r?.finalY!=null?r.finalY+20/a:null}function yw(s,t,r){var a=t.head||[],i=t.body||[],l=t.foot||[];if(t.html){var d=t.includeHiddenHtml;if(r){var u=c0(s,t.html,r,d,t.useCss)||{};a=u.head||a,i=u.body||a,l=u.foot||a}else console.error("Cannot parse html in non browser environment")}var h=t.columns||bw(a,i,l);return{columns:h,head:a,body:i,foot:l}}function bw(s,t,r){var a=s[0]||t[0]||r[0]||[],i=[];return Object.keys(a).filter(function(l){return l!=="_element"}).forEach(function(l){var d=1,u;Array.isArray(a)?u=a[parseInt(l)]:u=a[l],typeof u=="object"&&!Array.isArray(u)&&(d=u?.colSpan||1);for(var h=0;h<d;h++){var p=void 0;Array.isArray(a)?p=i.length:p=l+(h>0?"_".concat(h):"");var v={dataKey:p};i.push(v)}}),i}var gh=function(){function s(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return s}(),ww=function(s){r0(t,s);function t(r,a,i,l,d,u){var h=s.call(this,r,a,u)||this;return h.cell=i,h.row=l,h.column=d,h.section=l.section,h}return t}(gh),Nw=function(){function s(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return s.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(t,r,a,i,l,d){for(var u=0,h=r;u<h.length;u++){var p=h[u],v=new ww(t,this,a,i,l,d),y=p(v)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],y)return!1}return!0},s.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,i=this.hooks.didDrawPage;a<i.length;a++){var l=i[a];l(new gh(t,this,r))}},s.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,i=this.hooks.willDrawPage;a<i.length;a++){var l=i[a];l(new gh(t,this,r))}},s.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,l){return i+l.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},s}(),h0=function(){function s(t,r,a,i,l){l===void 0&&(l=!1),this.height=0,this.raw=t,t instanceof n0&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=i,this.spansMultiplePages=l}return s.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,i){var l;return Math.max(a,((l=r.cells[i.index])===null||l===void 0?void 0:l.height)||0)},0)},s.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var i=r.cells[a.index];return i?i.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},s.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(i,l){var d=a.cells[l.index];if(!d)return 0;var u=r.getLineHeight(d.styles.fontSize),h=d.padding("vertical"),p=h+u;return p>i?p:i},0)},s}(),u0=function(){function s(t,r,a){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var l=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,l=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var d=l!=null?""+l:"",u=/\r\n|\r|\n/g;this.text=d.split(u)}return s.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");a=this.x+i/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},s.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,l=a*i+this.padding("vertical");return Math.max(l,this.styles.minCellHeight)},s.prototype.padding=function(t){var r=td(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},s}(),jw=function(){function s(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return s.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,i=t.allRows();a<i.length;a++){var l=i[a],d=l.cells[this.index];d&&typeof d.styles.cellWidth=="number"&&(r=Math.max(r,d.styles.cellWidth))}return r},s}();function _w(s,t){Sw(s,t);var r=[],a=0;t.columns.forEach(function(l){var d=l.getMaxCustomCellWidth(t);d?l.width=d:(l.width=l.wrappedWidth,r.push(l)),a+=l.width});var i=t.getWidth(s.pageSize().width)-a;i&&(i=xh(r,i,function(l){return Math.max(l.minReadableWidth,l.minWidth)})),i&&(i=xh(r,i,function(l){return l.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/s.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Cw(t),Pw(t,s),kw(t)}function Sw(s,t){var r=s.scaleFactor(),a=t.settings.horizontalPageBreak,i=o0(s,t);t.allRows().forEach(function(l){for(var d=0,u=t.columns;d<u.length;d++){var h=u[d],p=l.cells[h.index];if(p){var v=t.hooks.didParseCell;t.callCellHooks(s,v,p,l,h,null);var y=p.padding("horizontal");p.contentWidth=Dc(p.text,p.styles,s)+y;var N=Dc(p.text.join(" ").split(/[^\S\u00A0]+/),p.styles,s);if(p.minReadableWidth=N+p.padding("horizontal"),typeof p.styles.cellWidth=="number")p.minWidth=p.styles.cellWidth,p.wrappedWidth=p.styles.cellWidth;else if(p.styles.cellWidth==="wrap"||a===!0)p.contentWidth>i?(p.minWidth=i,p.wrappedWidth=i):(p.minWidth=p.contentWidth,p.wrappedWidth=p.contentWidth);else{var g=10/r;p.minWidth=p.styles.minCellWidth||g,p.wrappedWidth=p.contentWidth,p.minWidth>p.wrappedWidth&&(p.wrappedWidth=p.minWidth)}}}}),t.allRows().forEach(function(l){for(var d=0,u=t.columns;d<u.length;d++){var h=u[d],p=l.cells[h.index];if(p&&p.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,p.wrappedWidth),h.minWidth=Math.max(h.minWidth,p.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,p.minReadableWidth);else{var v=t.styles.columnStyles[h.dataKey]||t.styles.columnStyles[h.index]||{},y=v.cellWidth||v.minCellWidth;y&&typeof y=="number"&&(h.minWidth=y,h.wrappedWidth=y)}p&&(p.colSpan>1&&!h.minWidth&&(h.minWidth=p.minWidth),p.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=p.minWidth))}})}function xh(s,t,r){for(var a=t,i=s.reduce(function(g,C){return g+C.wrappedWidth},0),l=0;l<s.length;l++){var d=s[l],u=d.wrappedWidth/i,h=a*u,p=d.width+h,v=r(d),y=p<v?v:p;t-=y-d.width,d.width=y}if(t=Math.round(t*1e10)/1e10,t){var N=s.filter(function(g){return t<0?g.width>r(g):!0});N.length&&(t=xh(N,t,r))}return t}function kw(s){for(var t={},r=1,a=s.allRows(),i=0;i<a.length;i++)for(var l=a[i],d=0,u=s.columns;d<u.length;d++){var h=u[d],p=t[h.index];if(r>1)r--,delete l.cells[h.index];else if(p)p.cell.height+=l.height,r=p.cell.colSpan,delete l.cells[h.index],p.left--,p.left<=1&&delete t[h.index];else{var v=l.cells[h.index];if(!v)continue;if(v.height=l.height,v.rowSpan>1){var y=a.length-i,N=v.rowSpan>y?y:v.rowSpan;t[h.index]={cell:v,left:N,row:l}}}}}function Cw(s){for(var t=s.allRows(),r=0;r<t.length;r++)for(var a=t[r],i=null,l=0,d=0,u=0;u<s.columns.length;u++){var h=s.columns[u];if(d-=1,d>1&&s.columns[u+1])l+=h.width,delete a.cells[h.index];else if(i){var p=i;delete a.cells[h.index],i=null,p.width=h.width+l}else{var p=a.cells[h.index];if(!p)continue;if(d=p.colSpan,l=0,p.colSpan>1){i=p,l+=h.width;continue}p.width=h.width+l}}}function Pw(s,t){for(var r={count:0,height:0},a=0,i=s.allRows();a<i.length;a++){for(var l=i[a],d=0,u=s.columns;d<u.length;d++){var h=u[d],p=l.cells[h.index];if(p){t.applyStyles(p.styles,!0);var v=p.width-p.padding("horizontal");if(p.styles.overflow==="linebreak")p.text=t.splitTextToSize(p.text,v+1/t.scaleFactor(),{fontSize:p.styles.fontSize});else if(p.styles.overflow==="ellipsize")p.text=Rf(p.text,v,p.styles,t,"...");else if(p.styles.overflow==="hidden")p.text=Rf(p.text,v,p.styles,t,"");else if(typeof p.styles.overflow=="function"){var y=p.styles.overflow(p.text,v);typeof y=="string"?p.text=[y]:p.text=y}p.contentHeight=p.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var N=p.contentHeight/p.rowSpan;p.rowSpan>1&&r.count*r.height<N*p.rowSpan?r={height:N,count:p.rowSpan}:r&&r.count>0&&r.height>N&&(N=r.height),N>l.height&&(l.height=N)}}r.count--}}function Rf(s,t,r,a,i){return s.map(function(l){return Lw(l,t,r,a,i)})}function Lw(s,t,r,a,i){var l=1e4*a.scaleFactor();if(t=Math.ceil(t*l)/l,t>=Dc(s,r,a))return s;for(;t<Dc(s+i,r,a)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+i}function f0(s,t){var r=new Ko(s),a=Aw(t,r.scaleFactor()),i=new Nw(t,a);return _w(r,i),r.applyStyles(r.userStyles),i}function Aw(s,t){var r=s.content,a=Ew(r.columns);if(r.head.length===0){var i=Of(a,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=Of(a,"foot");i&&r.foot.push(i)}var l=s.settings.theme,d=s.styles;return{columns:a,head:Dd("head",r.head,a,d,l,t),body:Dd("body",r.body,a,d,l,t),foot:Dd("foot",r.foot,a,d,l,t)}}function Dd(s,t,r,a,i,l){var d={},u=t.map(function(h,p){for(var v=0,y={},N=0,g=0,C=0,j=r;C<j.length;C++){var T=j[C];if(d[T.index]==null||d[T.index].left===0)if(g===0){var A=void 0;Array.isArray(h)?A=h[T.index-N-v]:A=h[T.dataKey];var S={};typeof A=="object"&&!Array.isArray(A)&&(S=A?.styles||{});var $=Mw(s,T,p,i,a,l,S),V=new u0(A,$,s);y[T.dataKey]=V,y[T.index]=V,g=V.colSpan-1,d[T.index]={left:V.rowSpan-1,times:g}}else g--,N++;else d[T.index].left--,g=d[T.index].times,v++}return new h0(h,p,s,y)});return u}function Of(s,t){var r={};return s.forEach(function(a){if(a.raw!=null){var i=Tw(t,a.raw);i!=null&&(r[a.dataKey]=i)}}),Object.keys(r).length>0?r:null}function Tw(s,t){if(s==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(s==="foot"&&typeof t=="object")return t.footer;return null}function Ew(s){return s.map(function(t,r){var a,i;return typeof t=="object"?i=(a=t.dataKey)!==null&&a!==void 0?a:r:i=r,new jw(i,t,r)})}function Mw(s,t,r,a,i,l,d){var u=lw(a),h;s==="head"?h=i.headStyles:s==="body"?h=i.bodyStyles:s==="foot"&&(h=i.footStyles);var p=Ka({},u.table,u[s],i.styles,h),v=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},y=s==="body"?v:{},N=s==="body"&&r%2===0?Ka({},u.alternateRow,i.alternateRowStyles):{},g=ow(l),C=Ka({},g,p,N,y);return Ka(C,d)}function Iw(s,t,r){var a;r===void 0&&(r={});var i=o0(s,t),l=new Map,d=[],u=[],h=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?h=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(h=[t.settings.horizontalPageBreakRepeat]),h.forEach(function(N){var g=t.columns.find(function(C){return C.dataKey===N||C.index===N});g&&!l.has(g.index)&&(l.set(g.index,!0),d.push(g.index),u.push(t.columns[g.index]),i-=g.wrappedWidth)});for(var p=!0,v=(a=r?.start)!==null&&a!==void 0?a:0;v<t.columns.length;){if(l.has(v)){v++;continue}var y=t.columns[v].wrappedWidth;if(p||i>=y)p=!1,d.push(v),u.push(t.columns[v]),i-=y;else break;v++}return{colIndexes:d,columns:u,lastIndex:v-1}}function Rw(s,t){for(var r=[],a=0;a<t.columns.length;a++){var i=Iw(s,t,{start:a});i.columns.length&&(r.push(i),a=i.lastIndex)}return r}function m0(s,t){var r=t.settings,a=r.startY,i=r.margin,l={x:i.left,y:a},d=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),u=a+i.bottom+d;if(r.pageBreak==="avoid"){var h=t.body,p=h.reduce(function(N,g){return N+g.height},0);u+=p}var v=new Ko(s);(r.pageBreak==="always"||r.startY!=null&&u>v.pageSize().height)&&(g0(v),l.y=i.top),t.callWillDrawPageHooks(v,l);var y=Ka({},l);t.startPageNumber=v.pageNumber(),r.horizontalPageBreak?Ow(v,t,y,l):(v.applyStyles(v.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(N){return Ja(v,t,N,l,t.columns)}),v.applyStyles(v.userStyles),t.body.forEach(function(N,g){var C=g===t.body.length-1;Fc(v,t,N,C,y,l,t.columns)}),v.applyStyles(v.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(N){return Ja(v,t,N,l,t.columns)})),a0(v,t,y,l),t.callEndPageHooks(v,l),t.finalY=l.y,s.lastAutoTable=t,v.applyStyles(v.userStyles)}function Ow(s,t,r,a){var i=Rw(s,t),l=t.settings;if(l.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(p,v){s.applyStyles(s.userStyles),v>0?Ml(s,t,r,a,p.columns,!0):Df(s,t,a,p.columns),Dw(s,t,r,a,p.columns),Fd(s,t,a,p.columns)});else for(var d=-1,u=i[0],h=function(){var p=d;if(u){s.applyStyles(s.userStyles);var v=u.columns;d>=0?Ml(s,t,r,a,v,!0):Df(s,t,a,v),p=Ff(s,t,d+1,a,v),Fd(s,t,a,v)}var y=p-d;i.slice(1).forEach(function(N){s.applyStyles(s.userStyles),Ml(s,t,r,a,N.columns,!0),Ff(s,t,d+1,a,N.columns,y),Fd(s,t,a,N.columns)}),d=p};d<t.body.length-1;)h()}function Df(s,t,r,a){var i=t.settings;s.applyStyles(s.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(l){return Ja(s,t,l,r,a)})}function Dw(s,t,r,a,i){s.applyStyles(s.userStyles),t.body.forEach(function(l,d){var u=d===t.body.length-1;Fc(s,t,l,u,r,a,i)})}function Ff(s,t,r,a,i,l){s.applyStyles(s.userStyles),l=l??t.body.length;var d=Math.min(r+l,t.body.length),u=-1;return t.body.slice(r,d).forEach(function(h,p){var v=r+p===t.body.length-1,y=p0(s,t,v,a);h.canEntireRowFit(y,i)&&(Ja(s,t,h,a,i),u=r+p)}),u}function Fd(s,t,r,a){var i=t.settings;s.applyStyles(s.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(l){return Ja(s,t,l,r,a)})}function Fw(s,t,r){var a=r.getLineHeight(s.styles.fontSize),i=s.padding("vertical"),l=Math.floor((t-i)/a);return Math.max(0,l)}function zw(s,t,r,a){var i={};s.spansMultiplePages=!0,s.height=0;for(var l=0,d=0,u=r.columns;d<u.length;d++){var h=u[d],p=s.cells[h.index];if(p){Array.isArray(p.text)||(p.text=[p.text]);var v=new u0(p.raw,p.styles,p.section);v=Ka(v,p),v.text=[];var y=Fw(p,t,a);p.text.length>y&&(v.text=p.text.splice(y,p.text.length));var N=a.scaleFactor(),g=a.getLineHeightFactor();p.contentHeight=p.getContentHeight(N,g),p.contentHeight>=t&&(p.contentHeight=t,v.styles.minCellHeight-=t),p.contentHeight>s.height&&(s.height=p.contentHeight),v.contentHeight=v.getContentHeight(N,g),v.contentHeight>l&&(l=v.contentHeight),i[h.index]=v}}var C=new h0(s.raw,-1,s.section,i,!0);C.height=l;for(var j=0,T=r.columns;j<T.length;j++){var h=T[j],v=C.cells[h.index];v&&(v.height=C.height);var p=s.cells[h.index];p&&(p.height=s.height)}return C}function Bw(s,t,r,a){var i=s.pageSize().height,l=a.settings.margin,d=l.top+l.bottom,u=i-d;t.section==="body"&&(u-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var h=t.getMinimumRowHeight(a.columns,s),p=h<r;if(h>u)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!p)return!1;var v=t.hasRowSpan(a.columns),y=t.getMaxCellHeight(a.columns)>u;return y?(v&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(v||a.settings.rowPageBreak==="avoid")}function Fc(s,t,r,a,i,l,d){var u=p0(s,t,a,l);if(r.canEntireRowFit(u,d))Ja(s,t,r,l,d);else if(Bw(s,r,u,t)){var h=zw(r,u,t,s);Ja(s,t,r,l,d),Ml(s,t,i,l,d),Fc(s,t,h,a,i,l,d)}else Ml(s,t,i,l,d),Fc(s,t,r,a,i,l,d)}function Ja(s,t,r,a,i){a.x=t.settings.margin.left;for(var l=0,d=i;l<d.length;l++){var u=d[l],h=r.cells[u.index];if(!h){a.x+=u.width;continue}s.applyStyles(h.styles),h.x=a.x,h.y=a.y;var p=t.callCellHooks(s,t.hooks.willDrawCell,h,r,u,a);if(p===!1){a.x+=u.width;continue}qw(s,h,a);var v=h.getTextPos();s0(h.text,v.x,v.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},s.getDocument()),t.callCellHooks(s,t.hooks.didDrawCell,h,r,u,a),a.x+=u.width}a.y+=r.height}function qw(s,t,r){var a=t.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof a.lineWidth=="number"){var i=i0(a.lineWidth,a.fillColor);i&&s.rect(t.x,r.y,t.width,t.height,i)}else typeof a.lineWidth=="object"&&(a.fillColor&&s.rect(t.x,r.y,t.width,t.height,"F"),Hw(s,t,r,a.lineWidth))}function Hw(s,t,r,a){var i,l,d,u;a.top&&(i=r.x,l=r.y,d=r.x+t.width,u=r.y,a.right&&(d+=.5*a.right),a.left&&(i-=.5*a.left),h(a.top,i,l,d,u)),a.bottom&&(i=r.x,l=r.y+t.height,d=r.x+t.width,u=r.y+t.height,a.right&&(d+=.5*a.right),a.left&&(i-=.5*a.left),h(a.bottom,i,l,d,u)),a.left&&(i=r.x,l=r.y,d=r.x,u=r.y+t.height,a.top&&(l-=.5*a.top),a.bottom&&(u+=.5*a.bottom),h(a.left,i,l,d,u)),a.right&&(i=r.x+t.width,l=r.y,d=r.x+t.width,u=r.y+t.height,a.top&&(l-=.5*a.top),a.bottom&&(u+=.5*a.bottom),h(a.right,i,l,d,u));function h(p,v,y,N,g){s.getDocument().setLineWidth(p),s.getDocument().line(v,y,N,g,"S")}}function p0(s,t,r,a){var i=t.settings.margin.bottom,l=t.settings.showFoot;return(l==="everyPage"||l==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),s.pageSize().height-a.y-i}function Ml(s,t,r,a,i,l){i===void 0&&(i=[]),l===void 0&&(l=!1),s.applyStyles(s.userStyles),t.settings.showFoot==="everyPage"&&!l&&t.foot.forEach(function(u){return Ja(s,t,u,a,i)}),t.callEndPageHooks(s,a);var d=t.settings.margin;a0(s,t,r,a),g0(s),t.pageNumber++,a.x=d.left,a.y=d.top,r.y=d.top,t.callWillDrawPageHooks(s,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(u){return Ja(s,t,u,a,i)}),s.applyStyles(s.userStyles))}function g0(s){var t=s.pageNumber();s.setPage(t+1);var r=s.pageNumber();return r===t?(s.addPage(),!0):!1}function $w(s){s.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],i=d0(this,a),l=f0(this,i);return m0(this,l),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(t,r,a,i){s0(t,r,a,i,this)},s.API.autoTableSetDefaults=function(t){return Ko.setDefaults(t,this),this},s.autoTableSetDefaults=function(t,r){Ko.setDefaults(t,r)},s.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Ko(this),l=c0(i,t,window,r,!1),d=l.head,u=l.body,h=((a=d[0])===null||a===void 0?void 0:a.map(function(p){return p.content}))||[];return{columns:h,rows:u,data:u}}}var zd;function Uw(s,t){var r=d0(s,t),a=f0(s,r);m0(s,a)}try{if(typeof window<"u"&&window){var zf=window,Bf=zf.jsPDF||((zd=zf.jspdf)===null||zd===void 0?void 0:zd.jsPDF);Bf&&$w(Bf)}}catch(s){console.error("Could not apply autoTable plugin",s)}function Ww({userLocation:s}){const t=rb();return P.useEffect(()=>{t&&s&&(console.log("🗺️ Centralizando mapa em:",s),t.setView(s,15))},[t,s]),null}function qf(){const[s,t]=P.useState(null),[r,a]=P.useState(!0),[i,l]=P.useState(5),[d,u]=P.useState(!1),[h,p]=P.useState(null),[v,y]=P.useState(!1),[N,g]=P.useState(!1),[C,j]=P.useState(!1),[T,A]=P.useState(!1),[S,$]=P.useState(null),[V,K]=P.useState(!1),{theme:me,setTheme:le}=Em(),{logout:X,user:ee}=Yr(),{toast:je}=qs(),[R,z]=P.useState(0),[q,B]=P.useState(!1),[ge,ue]=P.useState(null),[be,ne]=P.useState([]),[ve,ae]=P.useState(0),[fe,E]=P.useState(0),[W,Z]=P.useState(0),[Q,re]=P.useState(0),[de,Ne]=P.useState(()=>{const he=localStorage.getItem("lb_monthly_goal_mode");return he==="revenue"||he==="services"?he:"services"}),[J,oe]=P.useState(()=>{const he=localStorage.getItem("lb_monthly_goal_services"),Re=he?parseInt(he):20;return Number.isFinite(Re)&&Re>0?Re:20}),[ie,Te]=P.useState(()=>{const he=localStorage.getItem("lb_monthly_goal_revenue"),Re=he?parseFloat(he):5e3;return Number.isFinite(Re)&&Re>0?Re:5e3}),[se,Ae]=P.useState(()=>localStorage.getItem("lb_report_taxpayer_id")||""),[xe,G]=P.useState(()=>{const he=localStorage.getItem("lb_report_start");if(he)return he;const Re=new Date;return new Date(Re.getFullYear(),Re.getMonth(),1).toISOString().slice(0,10)}),[Ve,et]=P.useState(()=>{const he=localStorage.getItem("lb_report_end");if(he)return he;const Re=new Date;return new Date(Re.getFullYear(),Re.getMonth()+1,0).toISOString().slice(0,10)}),Be=()=>{try{const he=new jt({unit:"pt",format:"a4"}),Re=48;let $e=56;he.setTextColor(33,33,33),he.setFont(void 0,"bold"),he.setFontSize(16),he.text("Relatório de Ganhos",Re,$e),$e+=8,he.setFont(void 0,"normal"),he.setFontSize(10),he.setTextColor(90,90,90),he.text(`Período: ${new Date(xe).toLocaleDateString("pt-BR")} a ${new Date(Ve).toLocaleDateString("pt-BR")}`,Re,$e),$e+=14,he.setDrawColor(180,180,180),he.line(Re,$e,595-Re,$e),$e+=16,he.setFontSize(11),he.setTextColor(33,33,33),he.text(`Profissional: ${ee?.name||"Profissional"}`,Re,$e),$e+=14,se&&(he.text(`CPF/CNPJ: ${se}`,Re,$e),$e+=14),he.text(`Meta de receita: R$ ${ie.toLocaleString("pt-BR")}`,Re,$e),$e+=14;const st=new Date(xe),ht=new Date(Ve),$t=be.filter(yt=>{const dt=yt.scheduledFor?new Date(yt.scheduledFor):yt.createdAt?new Date(yt.createdAt):null;return dt&&dt>=st&&dt<=ht&&(yt.status||"")==="completed"}).sort((yt,dt)=>new Date(yt.scheduledFor||yt.createdAt).getTime()-new Date(dt.scheduledFor||dt.createdAt).getTime()),Nt=$t.length,Lt=$t.reduce((yt,dt)=>{const ts=typeof dt.totalCost=="string"?parseFloat(dt.totalCost):Number(dt.totalCost||0);return yt+(Number.isFinite(ts)?ts:0)},0);he.text(`Serviços concluídos no período: ${Nt}`,Re,$e),$e+=14,he.text(`Receita no período: R$ ${Lt.toLocaleString("pt-BR")}`,Re,$e),$e+=10;const At=$t.map(yt=>{const dt=typeof yt.totalCost=="string"?parseFloat(yt.totalCost):Number(yt.totalCost||0),ts=new Date(yt.scheduledFor||yt.createdAt).toLocaleDateString("pt-BR"),_s=yt.serviceType||"Serviço";return[ts,_s,`R$ ${Number(dt).toLocaleString("pt-BR")}`]});Uw(he,{head:[["Data","Serviço","Valor (R$)"]],body:At,startY:$e+10,styles:{fontSize:10,textColor:[33,33,33],lineColor:[200,200,200],lineWidth:.5},headStyles:{fillColor:[240,240,240],textColor:[33,33,33],lineColor:[200,200,200]},columnStyles:{2:{halign:"right"}},margin:{left:Re,right:Re}});const Zt=he.lastAutoTable?he.lastAutoTable.finalY+24:$e+60;he.setFontSize(9),he.setTextColor(120,120,120),he.text("Documento gerado automaticamente pelo LifeBee.",Re,Zt);const Ot=`${new Date(xe).toLocaleDateString("pt-BR")}__${new Date(Ve).toLocaleDateString("pt-BR")}`.replace(/[\\/]/g,"-");he.save(`Relatorio-Ganhos-${Ot}.pdf`)}catch{alert("Não foi possível gerar o relatório agora. Tente novamente.")}};P.useEffect(()=>{z(he=>he+1)},[me]),P.useEffect(()=>{try{localStorage.setItem("lb_monthly_goal_mode",de),localStorage.setItem("lb_monthly_goal_services",String(J)),localStorage.setItem("lb_monthly_goal_revenue",String(ie))}catch{}},[de,J,ie]),P.useEffect(()=>{try{localStorage.setItem("lb_report_taxpayer_id",se),xe&&localStorage.setItem("lb_report_start",xe),Ve&&localStorage.setItem("lb_report_end",Ve)}catch{}},[se,xe,Ve]),P.useEffect(()=>{(async()=>{try{const Re=localStorage.getItem("token"),$e=await fetch(`${ft()}/api/appointments/provider`,{headers:{Authorization:`Bearer ${Re}`,Accept:"application/json"}});if(!$e.ok)return;const st=await $e.json();ne(Array.isArray(st)?st:[]);const ht=new Date,$t=new Date(ht.getFullYear(),ht.getMonth(),1),Nt=new Date(ht.getFullYear(),ht.getMonth()+1,0,23,59,59,999),Lt=(Array.isArray(st)?st:[]).filter(Ot=>{const yt=Ot.scheduledFor?new Date(Ot.scheduledFor):Ot.createdAt?new Date(Ot.createdAt):null,dt=(Ot.status||"").toString();return yt&&yt>=$t&&yt<=Nt&&dt==="completed"}),At=Lt.length,Zt=Lt.reduce((Ot,yt)=>{const dt=typeof yt.totalCost=="string"?parseFloat(yt.totalCost):Number(yt.totalCost||0);return Ot+(Number.isFinite(dt)?dt:0)},0);ae(At),E(Zt)}catch{}})()},[]),P.useEffect(()=>{A(!1)},[ee?.profileImage]),P.useEffect(()=>{const he="geolocation"in navigator,Re=window.location.protocol==="https:"||window.location.hostname==="localhost";j(he),console.log("📍 Geolocalização suportada:",he),console.log("📍 Contexto seguro (HTTPS/localhost):",Re),console.log("📍 Protocolo atual:",window.location.protocol),console.log("📍 Hostname atual:",window.location.hostname)},[]),P.useEffect(()=>{console.log("📍 Localização do usuário atualizada:",h)},[h]),P.useEffect(()=>{C&&!h&&!v&&(console.log("📍 Ativando geolocalização automática..."),Rr())},[C,h,v]);const We={monthlyEarnings:0,totalServices:0,averageRating:0,monthlyGrowth:0,servicesThisWeek:0},[Ze,Ge]=P.useState([]),[ct,wt]=P.useState(!1),[St,kt]=P.useState(0),[Wt,Yt]=P.useState(""),[ut,Dt]=P.useState({}),[Je,Ys]=P.useState(null),[Vt,kr]=P.useState([]),[Qt,ws]=P.useState(null),rr=[],ss=0,Rn=he=>{t(he),window.location.href=`/service-offer/${he}`},js=he=>{$(he),K(!0)},Mr=()=>{K(!1),$(null)},dn=()=>{$(null)},Ps=()=>{X(),window.location.href="/"},Ct=async he=>{try{const Re=localStorage.getItem("token");if(!Re){je({title:"Erro",description:"Token de autenticação não encontrado.",variant:"destructive"});return}(await fetch(`${ft()}/api/provider/availability`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Re}`},body:JSON.stringify({available:he})})).ok?(a(he),je({title:he?"Disponível":"Indisponível",description:he?"Você está agora disponível para receber solicitações de serviço.":"Você está agora indisponível. Os clientes não verão seu perfil."})):je({title:"Erro",description:"Não foi possível atualizar sua disponibilidade.",variant:"destructive"})}catch(Re){console.error("Error updating availability:",Re),je({title:"Erro",description:"Erro ao conectar com o servidor.",variant:"destructive"})}},rs=he=>{console.log(`Marking notification ${he} as read`)},Sn=(he,Re,$e,st)=>{const $t=($e-he)*Math.PI/180,Nt=(st-Re)*Math.PI/180,Lt=Math.sin($t/2)*Math.sin($t/2)+Math.cos(he*Math.PI/180)*Math.cos($e*Math.PI/180)*Math.sin(Nt/2)*Math.sin(Nt/2);return 6371*(2*Math.atan2(Math.sqrt(Lt),Math.sqrt(1-Lt)))},Is={"rua das flores, 150, vila madalena, são paulo, sp":[-23.55,-46.68],"av. albert einstein, 627, morumbi, são paulo, sp":[-23.62,-46.72],"rua harmonia, 456, vila madalena, são paulo, sp":[-23.55,-46.68],"rua dos pinheiros, 789, pinheiros, são paulo, sp":[-23.5671,-46.7034],"rua dona adma jafet, 91, bela vista, são paulo, sp":[-23.56,-46.65],"av. paulista, 1000, bela vista, são paulo, sp":[-23.56,-46.66],"av. paulista, são paulo, sp":[-23.56,-46.66],"rua augusta, jardins, são paulo, sp":[-23.56,-46.66],"rua harmonia, vila madalena, são paulo, sp":[-23.55,-46.68],"rua das flores, vila madalena, são paulo, sp":[-23.55,-46.68],"rua dos pinheiros, pinheiros, são paulo, sp":[-23.5671,-46.7034],"rua dona adma jafet, bela vista, são paulo, sp":[-23.56,-46.65],"av. brigadeiro faria lima, são paulo, sp":[-23.59,-46.68],"shopping morumbi, são paulo, sp":[-23.62,-46.72],"hospital albert einstein, são paulo, sp":[-23.62,-46.72],"hospital sírio-libanês, são paulo, sp":[-23.56,-46.65],"vila madalena, são paulo, sp":[-23.55,-46.68],"jardins, são paulo, sp":[-23.56,-46.66],"morumbi, são paulo, sp":[-23.62,-46.72],"itaim bibi, são paulo, sp":[-23.6,-46.68],"moema, são paulo, sp":[-23.6,-46.66],"pinheiros, são paulo, sp":[-23.5671,-46.7034],"vila mariana, são paulo, sp":[-23.59,-46.63],"centro, são paulo, sp":[-23.5505,-46.6333],"sé, são paulo, sp":[-23.5505,-46.6333],"republica, são paulo, sp":[-23.54,-46.64],"bela vista, são paulo, sp":[-23.56,-46.65],"consolação, são paulo, sp":[-23.56,-46.66],"liberdade, são paulo, sp":[-23.56,-46.64],"bom retiro, são paulo, sp":[-23.53,-46.64],"brás, são paulo, sp":[-23.54,-46.62],"cambuci, são paulo, sp":[-23.57,-46.62],"tatuapé, são paulo, sp":[-23.54,-46.57],"vila prudente, são paulo, sp":[-23.58,-46.58],"mooca, são paulo, sp":[-23.55,-46.6],"belenzinho, são paulo, sp":[-23.54,-46.62],"penha, são paulo, sp":[-23.52,-46.54],"santana, são paulo, sp":[-23.5,-46.64],"tucuruvi, são paulo, sp":[-23.48,-46.62],"casa verde, são paulo, sp":[-23.51,-46.66],"vila guilherme, são paulo, sp":[-23.52,-46.61],"lapa, são paulo, sp":[-23.52,-46.7],"perdizes, são paulo, sp":[-23.53,-46.68],"vila pompeia, são paulo, sp":[-23.54,-46.68],"butantã, são paulo, sp":[-23.57,-46.72],"jabaquara, são paulo, sp":[-23.65,-46.64],"santo amaro, são paulo, sp":[-23.65,-46.72],"campo belo, são paulo, sp":[-23.61,-46.68],"vila olímpia, são paulo, sp":[-23.6,-46.69],"brooklin, são paulo, sp":[-23.61,-46.7],"vila andrade, são paulo, sp":[-23.63,-46.72],"jardim paulista, são paulo, sp":[-23.57,-46.67],"jardim europa, são paulo, sp":[-23.57,-46.68],"jardim paulistano, são paulo, sp":[-23.58,-46.68],"alto de pinheiros, são paulo, sp":[-23.57,-46.71],"vila leopoldina, são paulo, sp":[-23.53,-46.73],"barra funda, são paulo, sp":[-23.52,-46.66],"campos elíseos, são paulo, sp":[-23.54,-46.65],"santa cecília, são paulo, sp":[-23.54,-46.66],"vila buarque, são paulo, sp":[-23.54,-46.65],"higienópolis, são paulo, sp":[-23.55,-46.66],"pacifica, são paulo, sp":[-23.55,-46.67],"vila romana, são paulo, sp":[-23.54,-46.69],"sumaré, são paulo, sp":[-23.55,-46.67],"agua branca, são paulo, sp":[-23.52,-46.68],"vila nova cachoeirinha, são paulo, sp":[-23.49,-46.67],"limão, são paulo, sp":[-23.5,-46.65],"brasilândia, são paulo, sp":[-23.47,-46.64],"freguesia do ó, são paulo, sp":[-23.52,-46.7],"rua leão xiii, 431, serrinha, fortaleza, ce":[-3.7319,-38.5267],"rua leão xiii, serrinha, fortaleza, ce":[-3.7319,-38.5267],"leão xiii, serrinha, fortaleza, ce":[-3.7319,-38.5267],"serrinha, fortaleza, ce":[-3.7319,-38.5267],"avenida beira mar, fortaleza, ce":[-3.7319,-38.5267],"praça do ferreira, fortaleza, ce":[-3.7319,-38.5267],"centro, fortaleza, ce":[-3.7319,-38.5267],"aldeota, fortaleza, ce":[-3.7319,-38.5267],"meireles, fortaleza, ce":[-3.7319,-38.5267],"dionísio torres, fortaleza, ce":[-3.7319,-38.5267],"papicu, fortaleza, ce":[-3.7319,-38.5267],"cocó, fortaleza, ce":[-3.7319,-38.5267],"varjota, fortaleza, ce":[-3.7319,-38.5267],"montese, fortaleza, ce":[-3.7319,-38.5267],"fátima, fortaleza, ce":[-3.7319,-38.5267],"joaquim távora, fortaleza, ce":[-3.7319,-38.5267],"benfica, fortaleza, ce":[-3.7319,-38.5267],"damas, fortaleza, ce":[-3.7319,-38.5267],"são gerardo, fortaleza, ce":[-3.7319,-38.5267],"parangaba, fortaleza, ce":[-3.7319,-38.5267],"messejana, fortaleza, ce":[-3.7319,-38.5267],"conjunto ceará, fortaleza, ce":[-3.7319,-38.5267],"sabiguaba, fortaleza, ce":[-3.7319,-38.5267],"copacabana, rio de janeiro, rj":[-22.9707,-43.1824],"ipanema, rio de janeiro, rj":[-22.9844,-43.2034],"centro, belo horizonte, mg":[-19.9167,-43.9345],"centro, salvador, ba":[-12.9714,-38.5011],"centro, recife, pe":[-8.0476,-34.877],"centro, brasília, df":[-15.7942,-47.8822],"centro, curitiba, pr":[-25.4289,-49.2671],"centro, porto alegre, rs":[-30.0346,-51.2177],"centro, belém, pa":[-1.4554,-48.4898],"centro, manaus, am":[-3.119,-60.0217]},nr=new Map,Ir=he=>{let Re=String(he||"").trim();return Re=Re.replace(/\s-\s/g,", "),Re=Re.replace(/\s*,\s*/g,", ").replace(/\s+/g," ").replace(/,+/g,","),Re=Re.replace(/\bcep:?\s*\d{5}-?\d{3}\b/gi,"").replace(/\bbrasil\b/gi,""),Re=Re.replace(/,\s*$/g,""),Re},vt=he=>{const Re={},$e=he.match(/\b([A-Za-zÀ-ÿ\s]+),\s*([A-Za-z]{2})\b/);if($e)return Re.city=$e[1].trim(),Re.state=$e[2].trim().toUpperCase(),Re;const st=he.match(/\b([A-Za-zÀ-ÿ\s]+)\s*-\s*([A-Za-z]{2})\b/);return st&&(Re.city=st[1].trim(),Re.state=st[2].trim().toUpperCase()),Re},Kr=he=>{const Re="https://nominatim.openstreetmap.org/search?format=json&limit=5&countrycodes=br&addressdetails=1&accept-language=pt-BR";if(h){const[$e,st]=h,ht=.3,$t=(st-ht).toFixed(6),Nt=(st+ht).toFixed(6),Lt=($e+ht).toFixed(6),At=($e-ht).toFixed(6);return`${Re}&q=${encodeURIComponent(he)}&viewbox=${$t},${Lt},${Nt},${At}&bounded=1`}return`${Re}&q=${encodeURIComponent(he)}`},hn=async(he,Re)=>{try{if(nr.has(he)){const Ft=nr.get(he);return console.log(`✅ Coordenadas encontradas no cache: "${he}" → [${Ft[0]}, ${Ft[1]}]`),Ft}const $e=Ir(he),st=$e.toLowerCase(),ht=Ft=>Ft.normalize("NFD").replace(/[\u0300-\u036f]/g,""),$t=Ft=>Ft.replace(/\b\d+[\w\s\/\-]*?(?=,|$)/g,"").replace(/,\s*,/g,",").replace(/,\s*$/,"").trim(),Nt=Ft=>Array.from(new Set(Ft.filter(Boolean))),Lt=Nt([st,ht(st),$t(st),ht($t(st))]);for(const[Ft,Kt]of Object.entries(Is))if(st===Ft)return nr.set(he,Kt),console.log(`✅ Busca exata no mapeamento local: "${he}" → [${Kt[0]}, ${Kt[1]}]`),Kt;const At=["rua leão xiii","serrinha","fortaleza"];for(const Ft of At)if(st.includes(Ft)){for(const[Kt,ds]of Object.entries(Is))if(Kt.includes(Ft))return nr.set(he,ds),console.log(`✅ Busca por palavra-chave "${Ft}": "${he}" → [${ds[0]}, ${ds[1]}]`),ds}let Zt=null;for(const[Ft,Kt]of Object.entries(Is)){const ds=gr(st,Ft);ds>.6&&(!Zt||ds>Zt.score)&&(Zt={key:Ft,coords:Kt,score:ds})}if(Zt)return nr.set(he,Zt.coords),console.log(`✅ Busca parcial no mapeamento local: "${he}" → "${Zt.key}" (score: ${Zt.score.toFixed(2)}) → [${Zt.coords[0]}, ${Zt.coords[1]}]`),Zt.coords;const Ot=vt($e),yt=st.match(/([^,]+),\s*([a-z]{2})/);let dt="",ts="";Ot.city&&Ot.state?(dt=Ot.city,ts=Ot.state):yt&&(dt=yt[1].trim(),ts=yt[2].trim().toUpperCase());const _s=[];if(dt&&ts)Lt.forEach(Ft=>{_s.push(Ft+", "+dt+", "+ts+", brasil",Ft+", "+dt+", "+ts,Ft+", "+ts+", brasil",Ft+", brasil")});else{const Ft=Qt?.city?String(Qt.city).toLowerCase():"",Kt=Qt?.stateCode||(Qt?.state?String(Qt.state).toUpperCase():"");Ft&&Kt?Lt.forEach(ds=>{_s.push(ds+", "+Ft+", "+Kt+", brasil",ds+", "+Ft+", "+Kt,ds+", "+Kt+", brasil",ds+", brasil")}):Lt.forEach(ds=>{_s.push(ds+", brasil",ds)})}const Rs=Nt(_s);for(const Ft of Rs)try{console.log(`🌐 Tentando geocoding externo para: "${Ft}"`);const Kt=new AbortController,ds=setTimeout(()=>Kt.abort(),7e3),Jr=Kr(Ft),Mt=await fetch(Jr,{signal:Kt.signal,headers:{Accept:"application/json"}});if(clearTimeout(ds),Mt.ok){const Pt=await Mt.json();if(Pt.length>0){const Dn=pt=>{const Bt=pt.address||{},Fn=(Bt.city||Bt.town||Bt.village||Bt.suburb||"").toString().toLowerCase(),Ks=(Bt.state||"").toString().toUpperCase();let Os=parseFloat(pt.importance||0);if(dt&&Fn.includes(dt.toLowerCase())&&(Os+=.5),ts&&Ks===ts.toUpperCase()&&(Os+=.5),h){const Xa=Sn(parseFloat(pt.lat),parseFloat(pt.lon),h[0],h[1]),ma=Math.max(0,50-Xa)/100;Os+=ma}return Os},un=Pt.reduce((pt,Bt)=>Dn(Bt)>Dn(pt)?Bt:pt),Dr=parseFloat(un.lat),fn=parseFloat(un.lon);if(is(Dr,fn)){const pt=[Dr,fn];return nr.set(he,pt),console.log(`✅ Geocoding externo bem-sucedido para "${he}": [${Dr}, ${fn}] (ajustado por contexto)`),pt}else console.log(`⚠️ Coordenadas inválidas para "${he}": [${Dr}, ${fn}]`)}}}catch(Kt){Kt.name==="AbortError"?console.warn(`⏰ Timeout na tentativa "${Ft}"`):console.warn(`❌ Erro na tentativa "${Ft}":`,Kt)}if(Re?.allowFallback===!1)return console.log(`🔄 Fallback desabilitado para "${he}". Retornando null.`),null;const Hs=Ye(st,dt,ts);return nr.set(he,Hs),console.log(`🔄 Usando fallback inteligente para "${he}": [${Hs[0].toFixed(6)}, ${Hs[1].toFixed(6)}]`),Hs}catch($e){return console.error("Erro geral no geocoding:",$e),console.log(`🔄 Fallback final desabilitado para "${he}". Retornando null.`),null}},gr=(he,Re)=>{const $e=he.split(" ").filter(At=>At.length>2),st=Re.split(" ").filter(At=>At.length>2);if($e.length===0||st.length===0)return 0;const $t=["rua","avenida","fortaleza","serrinha","leão","xiii"].some(At=>he.includes(At)&&Re.includes(At));let Lt=$e.filter(At=>st.some(Zt=>Zt.includes(At)||At.includes(Zt))).length/Math.max($e.length,st.length);return $t&&(Lt+=.3),Math.min(Lt,1)},is=(he,Re)=>he>=-34&&he<=6&&Re>=-74&&Re<=-34,Ye=(he,Re,$e)=>{const st={"são paulo":[-23.5505,-46.6333],sp:[-23.5505,-46.6333],fortaleza:[-3.7319,-38.5267],ce:[-3.7319,-38.5267],serrinha:[-3.7319,-38.5267],"rio de janeiro":[-22.9068,-43.1729],rj:[-22.9068,-43.1729],"belo horizonte":[-19.9167,-43.9345],mg:[-19.9167,-43.9345],salvador:[-12.9714,-38.5011],ba:[-12.9714,-38.5011],recife:[-8.0476,-34.877],pe:[-8.0476,-34.877],brasília:[-15.7942,-47.8822],df:[-15.7942,-47.8822],curitiba:[-25.4289,-49.2671],pr:[-25.4289,-49.2671],"porto alegre":[-30.0346,-51.2177],rs:[-30.0346,-51.2177],belém:[-1.4554,-48.4898],pa:[-1.4554,-48.4898],manaus:[-3.119,-60.0217],am:[-3.119,-60.0217]};if(he.includes("fortaleza")||he.includes("ce")||he.includes("serrinha")||Re.includes("fortaleza")||Re.includes("ce")||Re.includes("serrinha")||$e.includes("CE"))return console.log(`🎯 Detecção específica de Fortaleza para: "${he}"`),[-3.7319,-38.5267];for(const[Lt,At]of Object.entries(st))if(he.includes(Lt)||Re.includes(Lt)||$e.includes(Lt))return At;const ht=he.split("").reduce((Lt,At)=>(Lt=(Lt<<5)-Lt+At.charCodeAt(0),Lt&Lt),0),$t=Math.abs(ht)%2e3/1e4-.1,Nt=Math.abs(ht>>10)%2e3/1e4-.1;return[-15.7942+$t,-47.8822+Nt]},lr=async()=>{if(ee)try{const he=localStorage.getItem("token");if(!he)return;const Re=await fetch(`${ft()}/api/professional/${ee.id}/completed-services`,{headers:{Authorization:`Bearer ${he}`,"Content-Type":"application/json"}});if(Re.ok){const st=(await Re.json()).data||[],ht=new Date,$t=ht.getMonth(),Nt=ht.getFullYear(),Lt=st.filter(Ot=>{const yt=new Date(Ot.completedAt||Ot.createdAt);return yt.getMonth()===$t&&yt.getFullYear()===Nt}),At=Lt.reduce((Ot,yt)=>Ot+(Number(yt.amount)||0),0),Zt=st.reduce((Ot,yt)=>Ot+(Number(yt.amount)||0),0);ae(Lt.length),E(At),Z(st.length),re(Zt),console.log("📊 Estatísticas carregadas:",{totalServices:st.length,monthlyServices:Lt.length,monthlyEarnings:At,totalEarnings:Zt})}}catch(he){console.error("❌ Erro ao carregar estatísticas:",he)}},On=async()=>{if(console.log("🚀 Iniciando busca de solicitações..."),console.log("👤 Usuário:",ee),!ee){console.log("❌ Usuário não autenticado");return}wt(!0),kt(0),Yt("Iniciando busca de solicitações..."),Ge([]),Dt({});try{const he=localStorage.getItem("token");if(console.log("🔑 Token encontrado:",!!he),!he){je({title:"Erro de Autenticação",description:"Token de autenticação não encontrado. Faça login novamente.",variant:"destructive"}),wt(!1);return}const Re=["acompanhante_hospitalar"],$e=[];let st=0;console.log("🌐 URL da API:",ft()),console.log("🔑 Token presente:",!!he);const ht=Re.map(async dt=>{const ts=`${ft()}/api/service-requests/category/${dt}`;console.log(`📡 Buscando solicitações para categoria: ${dt}`),console.log(`🔗 URL completa: ${ts}`);try{const _s=await fetch(ts,{headers:{Authorization:`Bearer ${he}`,"Content-Type":"application/json"}});if(console.log(`📊 Resposta para ${dt}:`,_s.status,_s.statusText),_s.ok){const Rs=await _s.json();return console.log(`✅ Solicitações encontradas para ${dt}:`,Rs),console.log(`📈 Quantidade de solicitações para ${dt}:`,Rs.length),st+=Rs.length,Rs}else{const Rs=await _s.text();return console.error(`❌ Erro na API para ${dt}:`,Rs),console.error(`Status: ${_s.status}, StatusText: ${_s.statusText}`),[]}}catch(_s){return console.error(`💥 Erro na requisição para ${dt}:`,_s),[]}});if(kt(30),Yt("Buscando solicitações das categorias..."),(await Promise.all(ht)).forEach(dt=>$e.push(...dt)),console.log("📋 Total de solicitações encontradas:",$e.length),$e.length===0){wt(!1),je({title:"Nenhuma solicitação encontrada",description:"Não há solicitações disponíveis no momento. Tente novamente mais tarde."});return}const Nt=$e.filter(dt=>dt.status==="open").sort((dt,ts)=>new Date(ts.createdAt).getTime()-new Date(dt.createdAt).getTime());console.log("🔓 Solicitações abertas encontradas:",Nt.length),kt(50),Yt(`Processando ${Nt.length} solicitações...`),Ge(Nt);const Lt={},At=[],Zt=3;for(let dt=0;dt<Nt.length;dt+=Zt){const _s=Nt.slice(dt,dt+Zt).map(async Hs=>{const Ft=Hs.address||Hs.location||"",Kt=String(Ft||"").trim(),ds=Kt.toLowerCase();if(Kt&&!(ds==="não informado"||ds==="nao informado"||ds==="não definido"||ds==="nao definido")&&Kt.length>=5)try{const Mt=await hn(Kt,{allowFallback:!1});Mt?(Lt[Hs.id]=Mt,console.log(`✅ Endereço geocodificado: ${Kt} → [${Mt[0]}, ${Mt[1]}]`)):(At.push(Kt),console.warn(`❌ Falha no geocoding: ${Kt}`))}catch(Mt){At.push(Kt),console.error(`❌ Erro no geocoding para ${Kt}:`,Mt)}});await Promise.all(_s);const Rs=50+Math.min((dt+Zt)/Nt.length*40,40);kt(Rs),Yt(`Processando localizações... ${Math.round((dt+Zt)/Nt.length*100)}%`),console.log(`🔄 Progresso do geocoding: ${Rs.toFixed(1)}%`)}kt(100),Yt("Finalizando..."),Dt(Lt),kr(At);const Ot=Object.keys(Lt).length,yt=Nt.length-Ot;console.log(`✅ Processamento concluído: ${Nt.length} solicitações`),console.log(`📍 Com coordenadas: ${Ot}`),console.log(`❓ Sem coordenadas: ${yt}`),At.length>0?je({title:"Solicitações Carregadas!",description:`${Nt.length} solicitações encontradas. ${Ot} com localização precisa. ${At.length} com problemas de localização.`,variant:"default"}):je({title:"Solicitações Carregadas!",description:`${Nt.length} solicitações encontradas. Todos os endereços foram localizados com sucesso!`,variant:"default"})}catch(he){console.error("💥 Erro geral ao buscar solicitações:",he),je({title:"Erro de Conexão",description:"Erro ao carregar solicitações. Verifique sua conexão e tente novamente.",variant:"destructive"})}finally{wt(!1)}},Rr=()=>{if(console.log("📍 Iniciando geolocalização..."),console.log("📍 Geolocalização suportada:",C),y(!0),g(!0),C){console.log("📍 Geolocalização suportada pelo navegador");const he={enableHighAccuracy:!0,timeout:3e4,maximumAge:0};navigator.geolocation.getCurrentPosition(async Re=>{const{latitude:$e,longitude:st,accuracy:ht}=Re.coords;if(console.log("📍 Localização obtida com sucesso:",{latitude:$e,longitude:st,accuracy:`${ht}m de precisão`}),$e&&st&&!isNaN($e)&&!isNaN(st)&&$e>=-90&&$e<=90&&st>=-180&&st<=180){console.log("📍 Coordenadas válidas:",[$e,st]),p([$e,st]),ue(ht||0),z(Nt=>Nt+1),y(!1),B(!0);const $t=ht<=10?"Excelente":ht<=30?"Muito Boa":ht<=50?"Boa":ht<=100?"Regular":"Baixa";je({title:`Localização ${$t}`,description:`Precisão: ${Math.round(ht||0)}m | ${$e.toFixed(6)}, ${st.toFixed(6)}`}),setTimeout(()=>{z(Nt=>Nt+1)},200),setTimeout(()=>{B(!1)},3e3);try{const Nt=new AbortController,Lt=setTimeout(()=>Nt.abort(),5e3),At=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${$e}&lon=${st}&zoom=10&addressdetails=1&accept-language=pt-BR`,{signal:Nt.signal});if(clearTimeout(Lt),At.ok){const Ot=(await At.json())?.address||{},yt=Ot.city||Ot.town||Ot.village||Ot.suburb||"",dt=Ot.state||"",ts=Ot["ISO3166-2-lvl4"]?.split("-")?.pop?.()||Ot.state_code||"";ws({city:yt,state:dt,stateCode:ts}),console.log("🧭 Contexto geográfico detectado:",{city:yt,state:dt,stateCode:ts})}}catch(Nt){console.warn("⚠️ Falha no reverse geocoding do contexto local:",Nt)}}else console.warn("📍 Coordenadas inválidas:",{latitude:$e,longitude:st}),y(!1),je({title:"Erro na Localização",description:"Coordenadas inválidas obtidas. Tente novamente.",variant:"destructive"})},Re=>{console.error("📍 Erro na geolocalização:",Re);let $e="Erro desconhecido na geolocalização";switch(Re.code){case Re.PERMISSION_DENIED:$e="Permissão negada. Ative a localização nas configurações do navegador.";break;case Re.POSITION_UNAVAILABLE:$e="Localização indisponível. Verifique sua conexão de internet.";break;case Re.TIMEOUT:$e="Tempo limite excedido. Tente novamente em alguns segundos.";break}console.log(`📍 ${$e}`),y(!1)},he)}else console.log("📍 Geolocalização não suportada pelo navegador"),y(!1)};P.useEffect(()=>{console.log("useEffect triggered - user:",ee),ee?(console.log("User authenticated, calling fetchServiceRequests"),On(),lr()):console.log("User not authenticated yet")},[ee]);const Or=()=>{h&&(console.log("🗺️ Centralizando mapa na localização do usuário:",h),z(he=>he+1))};return e.jsxs(ol,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-32",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b-2 border-gray-200 dark:border-gray-700 rounded-b-lg px-3 sm:px-4 py-2 sm:py-3",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:ee?.profileImage&&!T?e.jsx("img",{src:`${ft()}${ee.profileImage}`,alt:`Foto de ${ee?.name||"Profissional"}`,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",onError:he=>{A(!0);const Re=he.target;Re.src.includes("http")||(Re.src=`https://lifebee.onrender.com${ee.profileImage}`)},onLoad:()=>{console.log("Imagem carregada com sucesso:",ee.profileImage),A(!1)}}):e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-yellow-500 flex items-center justify-center border-2 border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold",children:ee?.name?ee.name.charAt(0).toUpperCase():"P"})})}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white truncate",children:"Painel do Profissional"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Bem-vindo, ",ee?.name||"Profissional","!"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 flex-shrink-0 min-w-0 ml-auto self-end",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-emerald-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:`text-xs sm:text-sm font-medium ${r?"text-emerald-700 dark:text-emerald-300":"text-gray-600 dark:text-gray-400"}`,children:r?"Disponível":"Indisponível"})]}),e.jsx(zp,{children:e.jsxs(_2,{children:[e.jsx(S2,{asChild:!0,children:e.jsx(ji,{checked:r,onCheckedChange:Ct,className:"h-6 w-11 sm:h-7 sm:w-12 [&>span]:h-5 [&>span]:w-5 sm:[&>span]:h-6 sm:[&>span]:w-6 flex-shrink-0 data-[state=checked]:bg-blue-500 data-[state=checked]:hover:bg-blue-600 data-[state=unchecked]:bg-gray-400 data-[state=unchecked]:hover:bg-gray-500 transition-all duration-300 ease-in-out shadow-md hover:shadow-lg"})}),e.jsx(Bp,{children:e.jsx("p",{children:r?"Clique para ficar indisponível":"Clique para ficar disponível"})})]})})]}),e.jsxs(q5,{open:d,onOpenChange:u,children:[e.jsx(H5,{asChild:!0,children:e.jsxs(Oe,{variant:"outline",size:"sm",className:"relative h-8 sm:h-9 w-8 sm:w-auto px-2.5 sm:px-3 min-w-0 flex-shrink-0 justify-center aspect-square sm:aspect-auto",children:[e.jsx(Al,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),ss>0]})}),e.jsxs(Lg,{className:"w-80 p-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl backdrop-blur-sm",align:"end",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Notificações"}),e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:e.jsx(hl,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:rr.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma notificação"}):rr.map(he=>{const Re=he.icon;return e.jsx("div",{className:`p-4 border-b hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer ${he.read?"":"bg-blue-50 dark:bg-blue-900/20"}`,onClick:()=>rs(he.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full bg-gray-100 dark:bg-gray-700 ${he.color}`,children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-medium ${he.read?"text-gray-900 dark:text-white":"text-blue-900 dark:text-blue-100"}`,children:he.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:he.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:he.time})]}),!he.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})]})},he.id)})}),rr.length>0&&e.jsx("div",{className:"p-3 border-t",children:e.jsx(Oe,{variant:"ghost",size:"sm",className:"w-full",children:"Ver todas as notificações"})})]})]}),e.jsxs(I5,{children:[e.jsx(R5,{asChild:!0,children:e.jsx(Oe,{variant:"outline",size:"sm",className:"h-8 sm:h-9 w-8 sm:w-auto px-2 sm:px-3 min-w-0 flex-shrink-0 gap-1 sm:gap-1.5 justify-center aspect-square sm:aspect-auto",children:e.jsx(Fh,{className:"h-2 w-2 sm:h-3 sm:w-3 flex-shrink-0"})})}),e.jsxs(Pg,{align:"end",className:"w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg z-[100]",children:[e.jsx(Aa,{asChild:!0,children:e.jsxs(Gs,{href:"/provider-profile",className:"flex items-center cursor-pointer",children:[e.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Meu Perfil"]})}),e.jsx(Aa,{asChild:!0,children:e.jsxs(Gs,{href:"/provider-proposals",className:"flex items-center cursor-pointer",children:[e.jsx(Ia,{className:"mr-2 h-4 w-4"}),"Propostas"]})}),e.jsx(Aa,{asChild:!0,children:e.jsxs(Gs,{href:"/settings",className:"flex items-center cursor-pointer",children:[e.jsx(dp,{className:"mr-2 h-4 w-4"}),"Configurações"]})}),e.jsx(Aa,{onClick:()=>le(me==="dark"?"light":"dark"),children:me==="dark"?e.jsxs(e.Fragment,{children:[e.jsx(fp,{className:"mr-2 h-4 w-4"}),"Modo Claro"]}):e.jsxs(e.Fragment,{children:[e.jsx(ap,{className:"mr-2 h-4 w-4"}),"Modo Escuro"]})}),e.jsx(eh,{}),e.jsxs(Aa,{children:[e.jsx(el,{className:"mr-2 h-4 w-4"}),"Privacidade e Segurança"]}),e.jsxs(Aa,{children:[e.jsx(Al,{className:"mr-2 h-4 w-4"}),"Preferências de Notificação"]}),e.jsxs(Aa,{children:[e.jsx(Vr,{className:"mr-2 h-4 w-4"}),"Métodos de Pagamento"]}),e.jsxs(Aa,{children:[e.jsx(np,{className:"mr-2 h-4 w-4"}),"Central de Ajuda"]}),e.jsx(eh,{}),e.jsxs(Aa,{onClick:Ps,className:"text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400",children:[e.jsx(Rl,{className:"mr-2 h-4 w-4"}),"Sair da Conta"]})]})]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 pb-8 sm:pb-12 lg:pb-16 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ot,{children:e.jsxs(lt,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ganhos do Mês"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",We.monthlyEarnings.toLocaleString("pt-BR")]})]}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900 p-2 rounded-full",children:e.jsx(Vr,{className:"h-6 w-6 text-green-600"})})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(uc,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",We.monthlyGrowth,"% vs mês anterior"]})]})]})}),e.jsx(ot,{children:e.jsxs(lt,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Serviços Realizados"}),e.jsx("p",{className:"text-2xl font-bold",children:We.totalServices})]}),e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-2 rounded-full",children:e.jsx(I1,{className:"h-6 w-6 text-blue-600"})})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[We.servicesThisWeek," esta semana"]})]})}),!1]}),e.jsxs(Cg,{defaultValue:"opportunities",className:"space-y-6 sm:space-y-8",children:[e.jsxs(Yh,{className:"grid w-full grid-cols-3 sm:grid-cols-3 h-auto min-h-12 p-1.5 gap-1.5 sm:gap-2 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsxs(_i,{value:"opportunities",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Oportunidades"}),e.jsx("span",{className:"xs:hidden",children:"Oport."})]}),e.jsxs(_i,{value:"performance",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Performance"}),e.jsx("span",{className:"xs:hidden",children:"Perf."})]}),e.jsxs(_i,{value:"history",className:"text-xs sm:text-sm px-2 sm:px-3 lg:px-4 py-2.5 sm:py-3 whitespace-nowrap min-h-10 sm:min-h-11 text-center font-medium transition-all duration-200 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:text-yellow-600 dark:data-[state=active]:text-yellow-400 data-[state=active]:shadow-md data-[state=active]:font-semibold",children:[e.jsx("span",{className:"hidden xs:inline",children:"Histórico"}),e.jsx("span",{className:"xs:hidden",children:"Hist."})]})]}),e.jsx(Si,{value:"opportunities",className:"space-y-8",children:e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs(hs,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(ys,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"text-base sm:text-lg lg:text-xl",children:"Serviços Próximos a Você"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Raio:"}),e.jsx(xt,{type:"number",value:i,onChange:he=>l(Number(he.target.value)),className:"w-12 sm:w-16 h-7 sm:h-8 text-xs sm:text-sm",min:"1",max:"50"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"km"})]})})]})}),e.jsxs(lt,{children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg h-48 sm:h-56 md:h-64 mb-4 sm:mb-6 overflow-hidden relative sticky top-2 sm:top-4 z-10",children:[e.jsx("div",{className:"absolute top-2 right-2 z-20",children:e.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>{console.log("🔘 Botão de localização clicado!"),N&&h?Or():Rr()},className:"bg-white dark:bg-gray-800 shadow-md hover:shadow-lg",disabled:v,children:v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}):N?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs hidden sm:inline",children:"Centralizar"})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs hidden sm:inline",children:"Minha Localização"})]})})}),v?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Obtendo sua localização..."})]})}):h?e.jsxs(ob,{center:h||[-23.55052,-46.633308],zoom:15,style:{height:"100%",width:"100%"},children:[h&&e.jsx(Ww,{userLocation:h}),e.jsxs(Tl,{position:"topright",children:[e.jsx(Tl.BaseLayer,{checked:me!=="dark",name:"OSM Claro",children:e.jsx(uf,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),e.jsx(Tl.BaseLayer,{checked:me==="dark",name:"Carto Escuro",children:e.jsx(uf,{attribution:'© <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"})})]}),h&&e.jsx(hf,{position:h,icon:df.divIcon({className:"custom-div-icon",html:`<div style="position: relative; width: 28px; height: 34px;">
                                <div style="position:absolute; left:50%; top:50%; transform: translate(-50%, -55%); background-color: ${q?"#10b981":"#3b82f6"}; width: 24px; height: 24px; border-radius: 50%; border: 4px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.4); animation: pulse 2s infinite; ${q?"border-color: #10b981;":""}"></div>
                                <div style="position:absolute; left:50%; bottom:0; transform: translate(-50%, 50%); width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #fff; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.25));"></div>
                              </div>`,iconSize:[28,34],iconAnchor:[14,30]})}),Ze.map(he=>{const Re=ut[he.id];if(!Re)return null;const $e=Je===he.id,st=S?.id===he.id;return e.jsx(hf,{position:Re,draggable:$e,icon:df.divIcon({className:"custom-div-icon",html:`<div style="position: relative; width: 34px; height: 34px;">
                                    <div style="position:absolute; left:50%; top:50%; transform: translate(-50%, -50%); width: 32px; height: 32px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); background-image: url('/service-icon.png'); background-size: cover; background-position: center; background-repeat: no-repeat; ${st?"animation: pulse 2s infinite;":""}"></div>
                                    <div style="position:absolute; left:50%; bottom:0; transform: translate(-50%, 50%); width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #fff; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.25));"></div>
                                  </div>`,iconSize:[34,40],iconAnchor:[17,34]}),eventHandlers:{click:()=>{$e?Ys(null):js(he)},dragend:ht=>{if($e){const $t=ht.target.getLatLng();Dt(Nt=>({...Nt,[he.id]:[$t.lat,$t.lng]})),Ys(null),je({title:"Posição Atualizada",description:"A posição da solicitação foi ajustada manualmente."})}}}},he.id)})]},`map-${R}-${h?`${h[0]}-${h[1]}`:"fallback"}`):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ys,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Clique para obter sua localização"}),e.jsx(Oe,{size:"sm",onClick:Rr,disabled:v,className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-1"}),"Obter Localização"]})})]})}),e.jsx("div",{className:"absolute left-0 right-0 bottom-0 p-2 text-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-lg px-3 py-2 shadow-lg",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium mb-1",children:["Mostrando serviços em um raio de ",i,"km"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Sua localização"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsxs("span",{children:["Solicitações (",Ze.length,")"]})]}),S&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Selecionado"})]})]})]})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Solicitações Disponíveis"}),Vt.length>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["⚠️ ",Vt.length," endereço(s) não localizados"]})]}),e.jsx(Oe,{variant:"outline",size:"sm",onClick:On,disabled:ct,className:"h-8 sm:h-9 px-3 sm:px-4 text-xs sm:text-sm",children:ct?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-primary mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Carregando..."}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Uu,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atualizar"})]})})]}),ct?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsxs("div",{className:"relative mx-auto mb-3 sm:mb-4",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 border-4 border-gray-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 sm:w-16 sm:h-16 border-4 border-primary rounded-full",style:{clipPath:`polygon(50% 50%, 50% 0%, ${50+St*.36}% 0%, ${50+St*.36}% 50%)`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-primary",children:[St,"%"]})})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2",children:Wt}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 sm:h-2 max-w-xs mx-auto",children:e.jsx("div",{className:"bg-primary h-1.5 sm:h-2 rounded-full transition-all duration-300",style:{width:`${St}%`}})})]}):Ze.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center mx-auto mb-3 sm:mb-4",children:e.jsx(Al,{className:"h-6 w-6 sm:h-8 sm:w-8 text-gray-400"})}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-2",children:"Nenhuma solicitação disponível"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-4",children:"Novas solicitações aparecerão aqui automaticamente"}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"Dica:"})," Clique nos pins amarelos no mapa para ver detalhes dos serviços!"]})})]}):Ze.map(he=>e.jsx(ot,{id:`service-${he.id}`,className:"border-l-4 border-l-primary transition-all duration-300",children:e.jsx(lt,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-semibold text-sm sm:text-base lg:text-lg",children:["Solicitação #",he.id]}),e.jsx(Bs,{variant:"outline",className:"text-xs w-fit",children:he.category==="fisioterapeuta"?"Fisioterapeuta":he.category==="acompanhante_hospitalar"?"Acompanhante":he.category==="tecnico_enfermagem"?"Técnico Enfermagem":he.category})]}),e.jsx("p",{className:"font-medium text-primary mb-1 text-sm sm:text-base",children:he.serviceType}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:he.description}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-1 sm:gap-2 text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(ys,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:he.address||he.location||"Não informado"})]}),e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(pr,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[new Date(he.scheduledDate).toLocaleDateString("pt-BR")," às ",he.scheduledTime]})]}),e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(Mn,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{children:[he.responses||0," respostas"]})]}),ut[he.id]&&h&&e.jsxs("span",{className:"flex items-center gap-1 min-w-0",children:[e.jsx("span",{className:"h-3 w-3 flex-shrink-0",children:"📏"}),e.jsxs("span",{children:[Sn(h[0],h[1],ut[he.id][0],ut[he.id][1]).toFixed(1)," km"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[he.budget&&e.jsxs("p",{className:"text-sm sm:text-base lg:text-lg font-bold text-green-600",children:["R$ ",parseFloat(he.budget).toFixed(2)]}),e.jsx(Oe,{size:"sm",className:"w-full sm:w-auto h-9 sm:h-10 text-xs sm:text-sm",onClick:()=>Rn(he.id),children:"Ofertar Serviço"})]})]})})},he.id))]})]})]})}),e.jsxs(Si,{value:"performance",className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Performance e Estatísticas"}),e.jsxs(Oe,{onClick:lr,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Uu,{className:"h-4 w-4"}),"Atualizar Dados"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(ot,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total de Serviços"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:ve}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Este mês"})]}),e.jsx("div",{className:"p-3 bg-blue-500 rounded-full",children:e.jsx(Ts,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(ot,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Receita Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:["R$ ",fe.toLocaleString("pt-BR")]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Este mês"})]}),e.jsx("div",{className:"p-3 bg-green-500 rounded-full",children:e.jsx(Vr,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(ot,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Média por Serviço"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["R$ ",ve>0?(fe/ve).toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"]}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Valor médio"})]}),e.jsx("div",{className:"p-3 bg-purple-500 rounded-full",children:e.jsx(Hu,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(ot,{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border-orange-200 dark:border-orange-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Taxa de Conclusão"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:[be.length>0?Math.round(ve/be.length*100):0,"%"]}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Serviços finalizados"})]}),e.jsx("div",{className:"p-3 bg-orange-500 rounded-full",children:e.jsx(uc,{className:"h-6 w-6 text-white"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ot,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 border-indigo-200 dark:border-indigo-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Total Geral de Serviços"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-900 dark:text-indigo-100",children:W}),e.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"Todos os tempos"})]}),e.jsx("div",{className:"p-3 bg-indigo-500 rounded-full",children:e.jsx(Ac,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(ot,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-emerald-200 dark:border-emerald-700",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:"Receita Total Geral"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:["R$ ",Q.toLocaleString("pt-BR")]}),e.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"Todos os tempos"})]}),e.jsx("div",{className:"p-3 bg-emerald-500 rounded-full",children:e.jsx(uc,{className:"h-6 w-6 text-white"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(M1,{className:"h-5 w-5"}),"Metas do Mês"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>Ne("services"),className:`px-3 py-1.5 rounded-md text-sm font-medium ${de==="services"?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:"Meta por Serviços"}),e.jsx("button",{onClick:()=>Ne("revenue"),className:`px-3 py-1.5 rounded-md text-sm font-medium ${de==="revenue"?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:"Meta por Receita"}),e.jsxs("button",{onClick:Be,className:"ml-2 inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium bg-white dark:bg-gray-900 border hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx(zh,{className:"h-4 w-4"}),"Gerar Relatório (PDF)"]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto w-full sm:w-auto sm:flex-nowrap flex-wrap",children:[e.jsx("input",{type:"date",value:xe,onChange:he=>G(he.target.value),className:"px-3 py-1.5 rounded-md border bg-white dark:bg-gray-900 text-sm w-[140px]"}),e.jsx("span",{className:"text-sm text-gray-500",children:"a"}),e.jsx("input",{type:"date",value:Ve,onChange:he=>et(he.target.value),className:"px-3 py-1.5 rounded-md border bg-white dark:bg-gray-900 text-sm w-[140px]"})]})]}),de==="services"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Defina sua meta de serviços no mês"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:1,value:J,onChange:he=>oe(Math.max(1,parseInt(he.target.value||"0"))),className:"w-28 px-3 py-2 rounded-md border bg-white dark:bg-gray-900"}),e.jsx("span",{className:"self-center text-sm text-gray-500",children:"serviços"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Defina sua meta de receita no mês"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"self-center text-sm text-gray-500",children:"R$"}),e.jsx("input",{type:"number",min:100,step:50,value:ie,onChange:he=>Te(Math.max(100,parseFloat(he.target.value||"0"))),className:"w-32 px-3 py-2 rounded-md border bg-white dark:bg-gray-900"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Serviços concluídos"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[ve,"/",J," (",Math.min(100,Math.round(ve/(J||1)*100)),"%)"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-2.5 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full transition-all",style:{width:`${Math.min(100,ve/(J||1)*100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Receita do mês"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",fe.toLocaleString("pt-BR")," / R$ ",ie.toLocaleString("pt-BR")," (",Math.min(100,Math.round(fe/(ie||1)*100)),"%)"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-2.5 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all",style:{width:`${Math.min(100,fe/(ie||1)*100)}%`}})})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Dica: aumente sua disponibilidade e responda rápido para bater a meta!"})]})})]}),e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(uc,{className:"h-5 w-5"}),"Performance Semanal"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:(()=>{const he=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],Re=new Date,$e=new Date(Re.getTime()-Re.getDay()*24*60*60*1e3),st=he.map((ht,$t)=>{const Nt=new Date($e.getTime()+$t*24*60*60*1e3),Lt=new Date(Nt.getTime()+24*60*60*1e3),At=be.filter(yt=>{const dt=yt.scheduledFor?new Date(yt.scheduledFor):yt.createdAt?new Date(yt.createdAt):null;return dt&&dt>=Nt&&dt<Lt&&(yt.status||"")==="completed"}).length,Zt=Math.max(...he.map((yt,dt)=>{const ts=new Date($e.getTime()+dt*24*60*60*1e3),_s=new Date(ts.getTime()+24*60*60*1e3);return be.filter(Rs=>{const Hs=Rs.scheduledFor?new Date(Rs.scheduledFor):Rs.createdAt?new Date(Rs.createdAt):null;return Hs&&Hs>=ts&&Hs<_s&&(Rs.status||"")==="completed"}).length})),Ot=Zt>0?At/Zt*100:0;return{day:ht,count:At,height:Ot}});return e.jsx("div",{className:"flex items-end justify-between h-32",children:st.map((ht,$t)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:ht.count}),e.jsx("div",{className:"w-8 bg-gradient-to-t from-yellow-500 to-orange-500 rounded-t-sm transition-all duration-300",style:{height:`${ht.height}%`}}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ht.day})]},$t))})})()}),e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Serviços concluídos por dia da semana"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Hu,{className:"h-5 w-5"}),"Serviços Concluídos (mês)"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-3 max-h-80 overflow-auto pr-1",children:[be.filter(he=>(he.status||"")==="completed").length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Nenhum serviço concluído neste mês ainda."}),be.filter(he=>{const Re=new Date,$e=new Date(Re.getFullYear(),Re.getMonth(),1),st=new Date(Re.getFullYear(),Re.getMonth()+1,0,23,59,59,999),ht=he.scheduledFor?new Date(he.scheduledFor):he.createdAt?new Date(he.createdAt):null;return ht&&ht>=$e&&ht<=st&&(he.status||"")==="completed"}).sort((he,Re)=>new Date(Re.scheduledFor||Re.createdAt).getTime()-new Date(he.scheduledFor||he.createdAt).getTime()).map((he,Re)=>{const $e=typeof he.totalCost=="string"?parseFloat(he.totalCost):Number(he.totalCost||0);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:he.serviceType||"Serviço"}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[he.professionalName||"Cliente"," • ",new Date(he.scheduledFor||he.createdAt).toLocaleDateString("pt-BR")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["+ R$ ",Number($e).toLocaleString("pt-BR")]}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-green-100 text-green-700",children:"Concluído"})]})]},Re)})]})})]}),e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Vr,{className:"h-5 w-5"}),"Histórico de Ganhos (mês)"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto pr-1",children:[be.filter(he=>(he.status||"")==="completed").length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Sem ganhos registrados neste mês ainda."}),be.filter(he=>{const Re=new Date,$e=new Date(Re.getFullYear(),Re.getMonth(),1),st=new Date(Re.getFullYear(),Re.getMonth()+1,0,23,59,59,999),ht=he.scheduledFor?new Date(he.scheduledFor):he.createdAt?new Date(he.createdAt):null;return ht&&ht>=$e&&ht<=st&&(he.status||"")==="completed"}).sort((he,Re)=>new Date(Re.scheduledFor||Re.createdAt).getTime()-new Date(he.scheduledFor||he.createdAt).getTime()).map((he,Re)=>{const $e=typeof he.totalCost=="string"?parseFloat(he.totalCost):Number(he.totalCost||0);return e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg bg-white dark:bg-gray-900",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:he.serviceType||"Serviço"}),e.jsx("p",{className:"text-xs text-gray-600",children:new Date(he.scheduledFor||he.createdAt).toLocaleDateString("pt-BR")})]}),e.jsxs("p",{className:"font-semibold text-green-600",children:["+ R$ ",Number($e).toLocaleString("pt-BR")]})]},Re)})]})})]})]}),e.jsxs(ot,{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Ac,{className:"h-5 w-5 text-yellow-600"}),"Resumo de Performance"]})}),e.jsx(lt,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:ve}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Serviços Concluídos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:["R$ ",fe.toLocaleString("pt-BR")]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receita Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:ve>0?(fe/ve).toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ticket Médio"})]})]})})]})]}),e.jsx(Si,{value:"history",className:"space-y-8",children:e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5"}),"Histórico de Serviços Concluídos"]})}),e.jsx(lt,{children:e.jsx(U5,{professionalId:ee?.id||0})})]})})]})]})]}),e.jsx(Dl,{open:V,onOpenChange:K,children:e.jsxs(rl,{className:"max-w-2xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-xl",children:[e.jsxs(nl,{children:[e.jsxs(al,{className:"flex items-center gap-2 text-xl",children:[e.jsx(ys,{className:"h-6 w-6 text-yellow-500"}),"Detalhes da Solicitação"]}),e.jsx(Jp,{children:"Informações completas sobre o cliente e o serviço solicitado"})]}),S&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:[e.jsx("div",{className:"flex flex-col space-y-1.5 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[S.clientProfileImage?e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${ft()}${S.clientProfileImage}`,alt:S.clientName||"Cliente",className:"w-full h-full object-cover",onError:he=>{const Re=he.target;Re.style.display="none";const $e=Re.parentElement;$e&&($e.innerHTML=`
                                  <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                    <span class="text-white text-xl font-bold">
                                      ${S.clientName?S.clientName.charAt(0).toUpperCase():"C"}
                                    </span>
                                  </div>
                                `)}})}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:S.clientName?S.clientName.charAt(0).toUpperCase():"C"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:S.clientName||"Cliente"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(cn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:S.clientRating||"5.0"}),e.jsx("span",{className:"text-gray-500",children:"•"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[S.clientServices||"0"," serviços"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente desde ",S.clientSince?new Date(S.clientSince).getFullYear():"2024"]})]})]}),e.jsx("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent hover:bg-primary/80 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:S.status==="open"?"Aberta":S.status==="in_progress"?"Em Andamento":S.status==="completed"?"Concluída":"Normal"})]})}),e.jsxs("div",{className:"p-6 pt-0 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-primary mb-2",children:S.serviceType||"Serviço Solicitado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:S.description||"Descrição do serviço não disponível"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Vr,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Orçamento"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["R$ ",S.budget?parseFloat(S.budget).toFixed(2):"0,00"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ys,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Distância"}),e.jsx("p",{className:"font-semibold text-blue-600",children:ut[S.id]&&h?`${Sn(h[0],h[1],ut[S.id][0],ut[S.id][1]).toFixed(1)} km`:"0 km"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(mr,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Horário"}),e.jsx("p",{className:"font-semibold text-purple-600",children:S.scheduledTime||"Não definido"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Mn,{className:"h-5 w-5 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Respostas"}),e.jsx("p",{className:"font-semibold text-orange-600",children:S.responses||0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-gray-500"}),"Endereço"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:S.address||"Endereço não informado"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(pr,{className:"h-4 w-4 text-gray-500"}),"Data"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:S.scheduledDate?new Date(S.scheduledDate).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Data não definida"})]}),S.additionalInfo&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Er,{className:"h-4 w-4 text-gray-500"}),"Detalhes Adicionais"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:S.additionalInfo})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(Oe,{onClick:()=>Rn(S.id),className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold",children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Fazer Proposta"]}),e.jsx(Oe,{variant:"outline",onClick:Mr,className:"flex-1",children:"Fechar"})]}),e.jsxs(Oe,{variant:"ghost",size:"sm",onClick:dn,className:"w-full text-xs",children:[e.jsx(ys,{className:"h-3 w-3 mr-1"}),"Limpar Seleção no Mapa"]})]})]})})]})}function Hf(s,[t,r]){return Math.min(r,Math.max(t,s))}var Vw=[" ","Enter","ArrowUp","ArrowDown"],Zw=[" ","Enter"],po="Select",[sd,rd,Gw]=Wf(po),[fl,ij]=xo(po,[Gw,Bc]),nd=Bc(),[Yw,Oi]=fl(po),[Kw,Jw]=fl(po),x0=s=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:i,onOpenChange:l,value:d,defaultValue:u,onValueChange:h,dir:p,name:v,autoComplete:y,disabled:N,required:g,form:C}=s,j=nd(t),[T,A]=P.useState(null),[S,$]=P.useState(null),[V,K]=P.useState(!1),me=rm(p),[le,X]=Qo({prop:a,defaultProp:i??!1,onChange:l,caller:po}),[ee,je]=Qo({prop:d,defaultProp:u,onChange:h,caller:po}),R=P.useRef(null),z=T?C||!!T.closest("form"):!0,[q,B]=P.useState(new Set),ge=Array.from(q).map(ue=>ue.props.value).join(";");return e.jsx(Kf,{...j,children:e.jsxs(Yw,{required:g,scope:t,trigger:T,onTriggerChange:A,valueNode:S,onValueNodeChange:$,valueNodeHasChildren:V,onValueNodeHasChildrenChange:K,contentId:Hl(),value:ee,onValueChange:je,open:le,onOpenChange:X,dir:me,triggerPointerDownPosRef:R,disabled:N,children:[e.jsx(sd.Provider,{scope:t,children:e.jsx(Kw,{scope:s.__scopeSelect,onNativeOptionAdd:P.useCallback(ue=>{B(be=>new Set(be).add(ue))},[]),onNativeOptionRemove:P.useCallback(ue=>{B(be=>{const ne=new Set(be);return ne.delete(ue),ne})},[]),children:r})}),z?e.jsxs(q0,{"aria-hidden":!0,required:g,tabIndex:-1,name:v,autoComplete:y,value:ee,onChange:ue=>je(ue.target.value),disabled:N,form:C,children:[ee===void 0?e.jsx("option",{value:""}):null,Array.from(q)]},ge):null]})})};x0.displayName=po;var v0="SelectTrigger",y0=P.forwardRef((s,t)=>{const{__scopeSelect:r,disabled:a=!1,...i}=s,l=nd(r),d=Oi(v0,r),u=d.disabled||a,h=Sr(t,d.onTriggerChange),p=rd(r),v=P.useRef("touch"),[y,N,g]=$0(j=>{const T=p().filter($=>!$.disabled),A=T.find($=>$.value===d.value),S=U0(T,j,A);S!==void 0&&d.onValueChange(S.value)}),C=j=>{u||(d.onOpenChange(!0),g()),j&&(d.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return e.jsx(Jf,{asChild:!0,...l,children:e.jsx(cs.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":H0(d.value)?"":void 0,...i,ref:h,onClick:Gt(i.onClick,j=>{j.currentTarget.focus(),v.current!=="mouse"&&C(j)}),onPointerDown:Gt(i.onPointerDown,j=>{v.current=j.pointerType;const T=j.target;T.hasPointerCapture(j.pointerId)&&T.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(C(j),j.preventDefault())}),onKeyDown:Gt(i.onKeyDown,j=>{const T=y.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&N(j.key),!(T&&j.key===" ")&&Vw.includes(j.key)&&(C(),j.preventDefault())})})})});y0.displayName=v0;var b0="SelectValue",w0=P.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:i,children:l,placeholder:d="",...u}=s,h=Oi(b0,r),{onValueNodeHasChildrenChange:p}=h,v=l!==void 0,y=Sr(t,h.onValueNodeChange);return Kn(()=>{p(v)},[p,v]),e.jsx(cs.span,{...u,ref:y,style:{pointerEvents:"none"},children:H0(h.value)?e.jsx(e.Fragment,{children:d}):l})});w0.displayName=b0;var Qw="SelectIcon",N0=P.forwardRef((s,t)=>{const{__scopeSelect:r,children:a,...i}=s;return e.jsx(cs.span,{"aria-hidden":!0,...i,ref:t,children:a||"▼"})});N0.displayName=Qw;var Xw="SelectPortal",j0=s=>e.jsx(Vf,{asChild:!0,...s});j0.displayName=Xw;var go="SelectContent",_0=P.forwardRef((s,t)=>{const r=Oi(go,s.__scopeSelect),[a,i]=P.useState();if(Kn(()=>{i(new DocumentFragment)},[]),!r.open){const l=a;return l?_h.createPortal(e.jsx(S0,{scope:s.__scopeSelect,children:e.jsx(sd.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),l):null}return e.jsx(k0,{...s,ref:t})});_0.displayName=go;var ca=10,[S0,Di]=fl(go),eN="SelectContentImpl",tN=iv("SelectContent.RemoveScroll"),k0=P.forwardRef((s,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:l,onPointerDownOutside:d,side:u,sideOffset:h,align:p,alignOffset:v,arrowPadding:y,collisionBoundary:N,collisionPadding:g,sticky:C,hideWhenDetached:j,avoidCollisions:T,...A}=s,S=Oi(go,r),[$,V]=P.useState(null),[K,me]=P.useState(null),le=Sr(t,de=>V(de)),[X,ee]=P.useState(null),[je,R]=P.useState(null),z=rd(r),[q,B]=P.useState(!1),ge=P.useRef(!1);P.useEffect(()=>{if($)return rv($)},[$]),nv();const ue=P.useCallback(de=>{const[Ne,...J]=z().map(Te=>Te.ref.current),[oe]=J.slice(-1),ie=document.activeElement;for(const Te of de)if(Te===ie||(Te?.scrollIntoView({block:"nearest"}),Te===Ne&&K&&(K.scrollTop=0),Te===oe&&K&&(K.scrollTop=K.scrollHeight),Te?.focus(),document.activeElement!==ie))return},[z,K]),be=P.useCallback(()=>ue([X,$]),[ue,X,$]);P.useEffect(()=>{q&&be()},[q,be]);const{onOpenChange:ne,triggerPointerDownPosRef:ve}=S;P.useEffect(()=>{if($){let de={x:0,y:0};const Ne=oe=>{de={x:Math.abs(Math.round(oe.pageX)-(ve.current?.x??0)),y:Math.abs(Math.round(oe.pageY)-(ve.current?.y??0))}},J=oe=>{de.x<=10&&de.y<=10?oe.preventDefault():$.contains(oe.target)||ne(!1),document.removeEventListener("pointermove",Ne),ve.current=null};return ve.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",J,{capture:!0})}}},[$,ne,ve]),P.useEffect(()=>{const de=()=>ne(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[ne]);const[ae,fe]=$0(de=>{const Ne=z().filter(ie=>!ie.disabled),J=Ne.find(ie=>ie.ref.current===document.activeElement),oe=U0(Ne,de,J);oe&&setTimeout(()=>oe.ref.current.focus())}),E=P.useCallback((de,Ne,J)=>{const oe=!ge.current&&!J;(S.value!==void 0&&S.value===Ne||oe)&&(ee(de),oe&&(ge.current=!0))},[S.value]),W=P.useCallback(()=>$?.focus(),[$]),Z=P.useCallback((de,Ne,J)=>{const oe=!ge.current&&!J;(S.value!==void 0&&S.value===Ne||oe)&&R(de)},[S.value]),Q=a==="popper"?vh:C0,re=Q===vh?{side:u,sideOffset:h,align:p,alignOffset:v,arrowPadding:y,collisionBoundary:N,collisionPadding:g,sticky:C,hideWhenDetached:j,avoidCollisions:T}:{};return e.jsx(S0,{scope:r,content:$,viewport:K,onViewportChange:me,itemRefCallback:E,selectedItem:X,onItemLeave:W,itemTextRefCallback:Z,focusSelectedItem:be,selectedItemText:je,position:a,isPositioned:q,searchRef:ae,children:e.jsx(av,{as:tN,allowPinchZoom:!0,children:e.jsx(ov,{asChild:!0,trapped:S.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Gt(i,de=>{S.trigger?.focus({preventScroll:!0}),de.preventDefault()}),children:e.jsx(Zf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:e.jsx(Q,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:de=>de.preventDefault(),...A,...re,onPlaced:()=>B(!0),ref:le,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:Gt(A.onKeyDown,de=>{const Ne=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!Ne&&de.key.length===1&&fe(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let oe=z().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(de.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const ie=de.target,Te=oe.indexOf(ie);oe=oe.slice(Te+1)}setTimeout(()=>ue(oe)),de.preventDefault()}})})})})})})});k0.displayName=eN;var sN="SelectItemAlignedPosition",C0=P.forwardRef((s,t)=>{const{__scopeSelect:r,onPlaced:a,...i}=s,l=Oi(go,r),d=Di(go,r),[u,h]=P.useState(null),[p,v]=P.useState(null),y=Sr(t,le=>v(le)),N=rd(r),g=P.useRef(!1),C=P.useRef(!0),{viewport:j,selectedItem:T,selectedItemText:A,focusSelectedItem:S}=d,$=P.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&p&&j&&T&&A){const le=l.trigger.getBoundingClientRect(),X=p.getBoundingClientRect(),ee=l.valueNode.getBoundingClientRect(),je=A.getBoundingClientRect();if(l.dir!=="rtl"){const ie=je.left-X.left,Te=ee.left-ie,se=le.left-Te,Ae=le.width+se,xe=Math.max(Ae,X.width),G=window.innerWidth-ca,Ve=Hf(Te,[ca,Math.max(ca,G-xe)]);u.style.minWidth=Ae+"px",u.style.left=Ve+"px"}else{const ie=X.right-je.right,Te=window.innerWidth-ee.right-ie,se=window.innerWidth-le.right-Te,Ae=le.width+se,xe=Math.max(Ae,X.width),G=window.innerWidth-ca,Ve=Hf(Te,[ca,Math.max(ca,G-xe)]);u.style.minWidth=Ae+"px",u.style.right=Ve+"px"}const R=N(),z=window.innerHeight-ca*2,q=j.scrollHeight,B=window.getComputedStyle(p),ge=parseInt(B.borderTopWidth,10),ue=parseInt(B.paddingTop,10),be=parseInt(B.borderBottomWidth,10),ne=parseInt(B.paddingBottom,10),ve=ge+ue+q+ne+be,ae=Math.min(T.offsetHeight*5,ve),fe=window.getComputedStyle(j),E=parseInt(fe.paddingTop,10),W=parseInt(fe.paddingBottom,10),Z=le.top+le.height/2-ca,Q=z-Z,re=T.offsetHeight/2,de=T.offsetTop+re,Ne=ge+ue+de,J=ve-Ne;if(Ne<=Z){const ie=R.length>0&&T===R[R.length-1].ref.current;u.style.bottom="0px";const Te=p.clientHeight-j.offsetTop-j.offsetHeight,se=Math.max(Q,re+(ie?W:0)+Te+be),Ae=Ne+se;u.style.height=Ae+"px"}else{const ie=R.length>0&&T===R[0].ref.current;u.style.top="0px";const se=Math.max(Z,ge+j.offsetTop+(ie?E:0)+re)+J;u.style.height=se+"px",j.scrollTop=Ne-Z+j.offsetTop}u.style.margin=`${ca}px 0`,u.style.minHeight=ae+"px",u.style.maxHeight=z+"px",a?.(),requestAnimationFrame(()=>g.current=!0)}},[N,l.trigger,l.valueNode,u,p,j,T,A,l.dir,a]);Kn(()=>$(),[$]);const[V,K]=P.useState();Kn(()=>{p&&K(window.getComputedStyle(p).zIndex)},[p]);const me=P.useCallback(le=>{le&&C.current===!0&&($(),S?.(),C.current=!1)},[$,S]);return e.jsx(nN,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:me,children:e.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:V},children:e.jsx(cs.div,{...i,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});C0.displayName=sN;var rN="SelectPopperPosition",vh=P.forwardRef((s,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:i=ca,...l}=s,d=nd(r);return e.jsx(Gf,{...d,...l,ref:t,align:a,collisionPadding:i,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vh.displayName=rN;var[nN,ru]=fl(go,{}),yh="SelectViewport",P0=P.forwardRef((s,t)=>{const{__scopeSelect:r,nonce:a,...i}=s,l=Di(yh,r),d=ru(yh,r),u=Sr(t,l.onViewportChange),h=P.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(sd.Slot,{scope:r,children:e.jsx(cs.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Gt(i.onScroll,p=>{const v=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:N}=d;if(N?.current&&y){const g=Math.abs(h.current-v.scrollTop);if(g>0){const C=window.innerHeight-ca*2,j=parseFloat(y.style.minHeight),T=parseFloat(y.style.height),A=Math.max(j,T);if(A<C){const S=A+g,$=Math.min(C,S),V=S-$;y.style.height=$+"px",y.style.bottom==="0px"&&(v.scrollTop=V>0?V:0,y.style.justifyContent="flex-end")}}}h.current=v.scrollTop})})})]})});P0.displayName=yh;var L0="SelectGroup",[aN,iN]=fl(L0),oN=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=Hl();return e.jsx(aN,{scope:r,id:i,children:e.jsx(cs.div,{role:"group","aria-labelledby":i,...a,ref:t})})});oN.displayName=L0;var A0="SelectLabel",T0=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=iN(A0,r);return e.jsx(cs.div,{id:i.id,...a,ref:t})});T0.displayName=A0;var zc="SelectItem",[lN,E0]=fl(zc),M0=P.forwardRef((s,t)=>{const{__scopeSelect:r,value:a,disabled:i=!1,textValue:l,...d}=s,u=Oi(zc,r),h=Di(zc,r),p=u.value===a,[v,y]=P.useState(l??""),[N,g]=P.useState(!1),C=Sr(t,S=>h.itemRefCallback?.(S,a,i)),j=Hl(),T=P.useRef("touch"),A=()=>{i||(u.onValueChange(a),u.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(lN,{scope:r,value:a,disabled:i,textId:j,isSelected:p,onItemTextChange:P.useCallback(S=>{y($=>$||(S?.textContent??"").trim())},[]),children:e.jsx(sd.ItemSlot,{scope:r,value:a,disabled:i,textValue:v,children:e.jsx(cs.div,{role:"option","aria-labelledby":j,"data-highlighted":N?"":void 0,"aria-selected":p&&N,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...d,ref:C,onFocus:Gt(d.onFocus,()=>g(!0)),onBlur:Gt(d.onBlur,()=>g(!1)),onClick:Gt(d.onClick,()=>{T.current!=="mouse"&&A()}),onPointerUp:Gt(d.onPointerUp,()=>{T.current==="mouse"&&A()}),onPointerDown:Gt(d.onPointerDown,S=>{T.current=S.pointerType}),onPointerMove:Gt(d.onPointerMove,S=>{T.current=S.pointerType,i?h.onItemLeave?.():T.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Gt(d.onPointerLeave,S=>{S.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:Gt(d.onKeyDown,S=>{h.searchRef?.current!==""&&S.key===" "||(Zw.includes(S.key)&&A(),S.key===" "&&S.preventDefault())})})})})});M0.displayName=zc;var Pl="SelectItemText",I0=P.forwardRef((s,t)=>{const{__scopeSelect:r,className:a,style:i,...l}=s,d=Oi(Pl,r),u=Di(Pl,r),h=E0(Pl,r),p=Jw(Pl,r),[v,y]=P.useState(null),N=Sr(t,A=>y(A),h.onItemTextChange,A=>u.itemTextRefCallback?.(A,h.value,h.disabled)),g=v?.textContent,C=P.useMemo(()=>e.jsx("option",{value:h.value,disabled:h.disabled,children:g},h.value),[h.disabled,h.value,g]),{onNativeOptionAdd:j,onNativeOptionRemove:T}=p;return Kn(()=>(j(C),()=>T(C)),[j,T,C]),e.jsxs(e.Fragment,{children:[e.jsx(cs.span,{id:h.textId,...l,ref:N}),h.isSelected&&d.valueNode&&!d.valueNodeHasChildren?_h.createPortal(l.children,d.valueNode):null]})});I0.displayName=Pl;var R0="SelectItemIndicator",O0=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return E0(R0,r).isSelected?e.jsx(cs.span,{"aria-hidden":!0,...a,ref:t}):null});O0.displayName=R0;var bh="SelectScrollUpButton",D0=P.forwardRef((s,t)=>{const r=Di(bh,s.__scopeSelect),a=ru(bh,s.__scopeSelect),[i,l]=P.useState(!1),d=Sr(t,a.onScrollButtonChange);return Kn(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=h.scrollTop>0;l(p)};const h=r.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),i?e.jsx(z0,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=r;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});D0.displayName=bh;var wh="SelectScrollDownButton",F0=P.forwardRef((s,t)=>{const r=Di(wh,s.__scopeSelect),a=ru(wh,s.__scopeSelect),[i,l]=P.useState(!1),d=Sr(t,a.onScrollButtonChange);return Kn(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=h.scrollHeight-h.clientHeight,v=Math.ceil(h.scrollTop)<p;l(v)};const h=r.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),i?e.jsx(z0,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=r;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});F0.displayName=wh;var z0=P.forwardRef((s,t)=>{const{__scopeSelect:r,onAutoScroll:a,...i}=s,l=Di("SelectScrollButton",r),d=P.useRef(null),u=rd(r),h=P.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return P.useEffect(()=>()=>h(),[h]),Kn(()=>{u().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(cs.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Gt(i.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(a,50))}),onPointerMove:Gt(i.onPointerMove,()=>{l.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(a,50))}),onPointerLeave:Gt(i.onPointerLeave,()=>{h()})})}),cN="SelectSeparator",B0=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s;return e.jsx(cs.div,{"aria-hidden":!0,...a,ref:t})});B0.displayName=cN;var Nh="SelectArrow",dN=P.forwardRef((s,t)=>{const{__scopeSelect:r,...a}=s,i=nd(r),l=Oi(Nh,r),d=Di(Nh,r);return l.open&&d.position==="popper"?e.jsx(Qf,{...i,...a,ref:t}):null});dN.displayName=Nh;var hN="SelectBubbleInput",q0=P.forwardRef(({__scopeSelect:s,value:t,...r},a)=>{const i=P.useRef(null),l=Sr(a,i),d=og(t);return P.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==t&&v){const y=new Event("change",{bubbles:!0});v.call(u,t),u.dispatchEvent(y)}},[d,t]),e.jsx(cs.select,{...r,style:{...Mm,...r.style},ref:l,defaultValue:t})});q0.displayName=hN;function H0(s){return s===""||s===void 0}function $0(s){const t=Xo(s),r=P.useRef(""),a=P.useRef(0),i=P.useCallback(d=>{const u=r.current+d;t(u),function h(p){r.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>h(""),1e3))}(u)},[t]),l=P.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,i,l]}function U0(s,t,r){const i=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,l=r?s.indexOf(r):-1;let d=uN(s,Math.max(l,0));i.length===1&&(d=d.filter(p=>p!==r));const h=d.find(p=>p.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==r?h:void 0}function uN(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var fN=x0,W0=y0,mN=w0,pN=N0,gN=j0,V0=_0,xN=P0,Z0=T0,G0=M0,vN=I0,yN=O0,Y0=D0,K0=F0,J0=B0;const Bl=fN,ql=mN,ll=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(W0,{ref:a,className:mt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white dark:bg-gray-800 px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(pN,{asChild:!0,children:e.jsx(Fh,{className:"h-4 w-4 opacity-50"})})]}));ll.displayName=W0.displayName;const Q0=P.forwardRef(({className:s,...t},r)=>e.jsx(Y0,{ref:r,className:mt("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(k1,{className:"h-4 w-4"})}));Q0.displayName=Y0.displayName;const X0=P.forwardRef(({className:s,...t},r)=>e.jsx(K0,{ref:r,className:mt("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Fh,{className:"h-4 w-4"})}));X0.displayName=K0.displayName;const cl=P.forwardRef(({className:s,children:t,position:r="popper",...a},i)=>e.jsx(gN,{children:e.jsxs(V0,{ref:i,className:mt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(Q0,{}),e.jsx(xN,{className:mt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(X0,{})]})}));cl.displayName=V0.displayName;const bN=P.forwardRef(({className:s,...t},r)=>e.jsx(Z0,{ref:r,className:mt("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));bN.displayName=Z0.displayName;const co=P.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(G0,{ref:a,className:mt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(yN,{children:e.jsx(Ul,{className:"h-4 w-4"})})}),e.jsx(vN,{children:t})]}));co.displayName=G0.displayName;const wN=P.forwardRef(({className:s,...t},r)=>e.jsx(J0,{ref:r,className:mt("-mx-1 my-1 h-px bg-muted",s),...t}));wN.displayName=J0.displayName;const Bd={acompanhante_hospitalar:{name:"Acompanhante Hospitalar",icon:"🏥",subServices:[{id:"acompanhamento_hospitalar",name:"Acompanhamento Hospitalar"},{id:"companhia_apoio_emocional",name:"Companhia e Apoio Emocional"}]}};function NN({onComplete:s}){const[t,r]=P.useState(1),[a,i]=P.useState({name:"",email:"",phone:"",address:"",category:"",subService:"",specialization:"",description:"",experience:"",certifications:"",hourlyRate:"",profileImage:null,documents:[]}),l=4,d=()=>{t<l?r(t+1):s()},u=()=>{t>1&&r(t-1)},h=(v,y)=>{i(N=>({...N,[v]:y}))},p=()=>{switch(t){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Informações Pessoais"}),e.jsx("p",{className:"text-gray-600",children:"Vamos começar com seus dados básicos"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"text",placeholder:"Nome completo",value:a.name,onChange:v=>h("name",v.target.value),className:"pl-10 py-3",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Tc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"email",placeholder:"E-mail profissional",value:a.email,onChange:v=>h("email",v.target.value),className:"pl-10 py-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Li,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"tel",placeholder:"(11) 99999-9999",value:a.phone,onChange:v=>h("phone",v.target.value),className:"pl-10 py-3",required:!0})]}),a.phone&&a.phone.length>=10&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(Ts,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:"Telefone válido"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"text",placeholder:"Cidade, Estado",value:a.address,onChange:v=>h("address",v.target.value),className:"pl-10 py-3",required:!0})]})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Área de Atuação"}),e.jsx("p",{className:"text-gray-600",children:"Selecione sua especialidade profissional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Categoria Principal"}),e.jsxs(Bl,{value:a.category,onValueChange:v=>h("category",v),children:[e.jsx(ll,{className:"bg-white dark:bg-gray-800",children:e.jsx(ql,{placeholder:"Selecione sua área de atuação"})}),e.jsx(cl,{children:Object.entries(Bd).map(([v,y])=>e.jsxs(co,{value:v,children:[y.icon," ",y.name]},v))})]})]}),a.category&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Serviço Específico"}),e.jsxs(Bl,{value:a.subService,onValueChange:v=>h("subService",v),children:[e.jsx(ll,{className:"bg-white dark:bg-gray-800",children:e.jsx(ql,{placeholder:"Selecione o serviço específico"})}),e.jsx(cl,{children:Bd[a.category]?.subServices.map(v=>e.jsx(co,{value:v.id,children:v.name},v.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Especialização"}),e.jsx(xt,{placeholder:"Ex: Fisioterapia respiratória, Reabilitação neurológica...",value:a.specialization,onChange:v=>h("specialization",v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Descrição dos Serviços"}),e.jsx(Yn,{placeholder:"Descreva em detalhes como você realiza seus serviços, metodologia e diferenciais...",rows:4,value:a.description,onChange:v=>h("description",v.target.value)})]})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Experiência e Qualificações"}),e.jsx("p",{className:"text-gray-600",children:"Conte-nos sobre sua experiência profissional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{placeholder:"Ex: 5 anos",value:a.experience,onChange:v=>h("experience",v.target.value),className:"pl-10"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tempo de Experiência"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(xt,{type:"number",placeholder:"80.00",value:a.hourlyRate,onChange:v=>h("hourlyRate",v.target.value),className:"pl-10"}),e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Valor por Hora (R$)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(Ac,{className:"h-4 w-4"}),"Certificações e Qualificações"]}),e.jsx(Yn,{placeholder:"Liste suas certificações, cursos e qualificações relevantes...",rows:4,value:a.certifications,onChange:v=>h("certifications",v.target.value)})]})]})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Documentação"}),e.jsx("p",{className:"text-gray-600",children:"Adicione sua foto e documentos profissionais"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(vo,{className:"h-4 w-4"}),"Foto de Perfil"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Wu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Clique para adicionar uma foto profissional"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG até 2MB"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsx(zh,{className:"h-4 w-4"}),"Documentos Profissionais"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Wu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Adicione diplomas, certificados e registros profissionais"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG até 5MB cada"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5 text-blue-600"}),"Revisão dos Dados"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Categoria:"})," ",a.category&&Bd[a.category]?.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Especialização:"})," ",a.specialization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Experiência:"})," ",a.experience]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor/Hora:"})," R$ ",a.hourlyRate]})]})]})]})]});default:return null}};return e.jsx(ol,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx(or,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cadastro de Profissional"})]})}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Wl,{size:40})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Cadastro do Profissional"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Junte-se à nossa rede de profissionais de saúde"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-white/80 text-sm",children:["Etapa ",t," de ",l]}),e.jsxs("span",{className:"text-white/80 text-sm",children:[Math.round(t/l*100),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${t/l*100}%`}})})]}),e.jsx(ot,{className:"bg-white/95 backdrop-blur-sm",children:e.jsxs(lt,{className:"p-6",children:[p(),e.jsxs("div",{className:"flex gap-3 mt-8",children:[t>1&&e.jsx(Oe,{variant:"outline",onClick:u,className:"flex-1",children:"Voltar"}),e.jsxs(Oe,{onClick:d,className:"flex-1",children:[t===l?"Finalizar Cadastro":"Continuar",e.jsx(tp,{className:"ml-2 h-4 w-4"})]})]})]})})]})]})})}function jN(){const{toast:s}=qs(),[t,r]=P.useState(""),[a,i]=P.useState("all"),[l,d]=P.useState([]),[u,h]=P.useState(!0),[p,v]=P.useState(null);P.useEffect(()=>{y()},[]);const y=async()=>{try{h(!0);const V=await fetch(`${ft()}/api/provider/orders`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(V.ok){const K=await V.json();d(K)}else console.error("Erro ao buscar pedidos:",V.statusText),s({title:"Erro",description:"Não foi possível carregar os pedidos",variant:"destructive"})}catch(V){console.error("Erro ao buscar pedidos:",V),s({title:"Erro",description:"Erro de conexão ao carregar pedidos",variant:"destructive"})}finally{h(!1)}},N=V=>{switch(V){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},g=V=>{switch(V){case"pending":return"Pendente";case"accepted":return"Aceito";case"rejected":return"Rejeitado";case"completed":return"Concluído";default:return"Desconhecido"}},C=V=>{switch(V){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},j=V=>{switch(V){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return"Desconhecida"}},T=l.filter(V=>{const K=V.clientName.toLowerCase().includes(t.toLowerCase())||V.serviceType.toLowerCase().includes(t.toLowerCase()),me=a==="all"||V.status===a;return K&&me}),A=async V=>{try{v(V);const K=await fetch(`${ft()}/api/provider/orders/${V}/accept`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(K.ok)s({title:"Sucesso",description:"Pedido aceito com sucesso!"}),y();else{const me=await K.json();s({title:"Erro",description:me.message||"Erro ao aceitar pedido",variant:"destructive"})}}catch(K){console.error("Erro ao aceitar pedido:",K),s({title:"Erro",description:"Erro de conexão ao aceitar pedido",variant:"destructive"})}finally{v(null)}},S=async V=>{try{v(V);const K=await fetch(`${ft()}/api/provider/orders/${V}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(K.ok)s({title:"Sucesso",description:"Pedido rejeitado com sucesso!"}),y();else{const me=await K.json();s({title:"Erro",description:me.message||"Erro ao rejeitar pedido",variant:"destructive"})}}catch(K){console.error("Erro ao rejeitar pedido:",K),s({title:"Erro",description:"Erro de conexão ao rejeitar pedido",variant:"destructive"})}finally{v(null)}},$=V=>{console.log(`Entrando em contato com cliente do pedido ${V}`)};return e.jsx(ol,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"lg:hidden",children:e.jsx(or,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Meus Pedidos"})]})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(xt,{placeholder:"Buscar pedidos...",value:t,onChange:V=>r(V.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx(Oe,{variant:a==="all"?"default":"outline",size:"sm",onClick:()=>i("all"),children:"Todos"}),e.jsx(Oe,{variant:a==="pending"?"default":"outline",size:"sm",onClick:()=>i("pending"),children:"Pendentes"}),e.jsx(Oe,{variant:a==="accepted"?"default":"outline",size:"sm",onClick:()=>i("accepted"),children:"Aceitos"}),e.jsx(Oe,{variant:a==="completed"?"default":"outline",size:"sm",onClick:()=>i("completed"),children:"Concluídos"})]})]}),e.jsx("div",{className:"space-y-4",children:u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(jr,{className:"h-8 w-8 text-gray-400 animate-spin"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Carregando pedidos..."})]}):T.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fo,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhum pedido encontrado"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"Tente ajustar sua busca":"Você ainda não tem pedidos"})]}):T.map(V=>e.jsxs(ot,{className:"overflow-hidden",children:[e.jsx(ns,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:V.clientName}),e.jsx(Bs,{className:N(V.status),children:g(V.status)})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:V.serviceType})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["R$ ",V.budget]}),e.jsx("p",{className:"text-xs text-gray-500",children:V.timePosted})]})]})}),e.jsxs(lt,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:V.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{children:V.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(op,{className:"h-4 w-4"}),e.jsxs("span",{children:[V.distance,"km"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mr,{className:"h-4 w-4"}),e.jsxs("span",{children:[V.responses," respostas"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Bs,{className:C(V.urgency),children:j(V.urgency)}),V.clientRating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm",children:V.clientRating})]})]}),e.jsxs("div",{className:"flex gap-2",children:[V.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(Oe,{size:"sm",className:"flex-1",onClick:()=>A(V.id),disabled:p===V.id,children:[p===V.id?e.jsx(jr,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Aceitar"]}),e.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>S(V.id),disabled:p===V.id,children:[p===V.id?e.jsx(jr,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(mo,{className:"h-4 w-4 mr-2"}),"Rejeitar"]})]}),V.status==="accepted"&&e.jsxs(Oe,{size:"sm",className:"flex-1",onClick:()=>$(V.id),children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Entrar em Contato"]}),V.clientPhone&&e.jsxs(Oe,{variant:"outline",size:"sm",children:[e.jsx(Li,{className:"h-4 w-4 mr-2"}),"Ligar"]})]}),V.scheduledDate&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_1,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:["Agendado para: ",V.scheduledDate]})]})})]})]},V.id))})]})]})})}function _N(){const[,s]=_r(),{user:t,logout:r}=Yr(),{toast:a}=qs(),[i,l]=P.useState(!0),[d,u]=P.useState(!1),[h,p]=P.useState(!1),[v,y]=P.useState(!1),N=P.useRef(null),[g,C]=P.useState(null),[j,T]=P.useState(null),[A,S]=P.useState({name:"",email:"",phone:"",taxpayerId:"",specialization:"",category:"",subCategory:"",description:"",experience:"",certifications:"",hourlyRate:"",location:"",available:!0});P.useEffect(()=>{t?.userType==="provider"&&$()},[t]);const $=async()=>{try{l(!0);const ae=localStorage.getItem("token"),fe={"Content-Type":"application/json"};ae&&(fe.Authorization=`Bearer ${ae}`);const E=await fetch(`${ft()}/api/provider/profile`,{credentials:"include",headers:fe});if(E.ok){const Z=await E.json();C(Z)}const W=await fetch(`${ft()}/api/user`,{credentials:"include",headers:fe});if(W.ok){const Z=await W.json();T(Z),S(Q=>({name:Q.name||g?.name||Z.name||"",email:Z.email||Q.email||"",phone:Z.phone||Q.phone||"",taxpayerId:Q.taxpayerId||Z.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"",specialization:g?.specialization||Q.specialization||"",category:g?.category||Q.category||"",subCategory:g?.subCategory||Q.subCategory||"",description:g?.description||Q.description||"",experience:g?.experience||Q.experience||"",certifications:g?.certifications||Q.certifications||"",hourlyRate:g?.hourlyRate||Q.hourlyRate||"",location:g?.location||Z.address||Q.location||"",available:g?.available??Q.available??!0}))}}catch(ae){console.error("Erro ao carregar dados do perfil:",ae),a({title:"Erro",description:"Não foi possível carregar os dados do perfil",variant:"destructive"})}finally{l(!1)}},V=async()=>{try{u(!0);const ae=localStorage.getItem("token"),fe={"Content-Type":"application/json"};ae&&(fe.Authorization=`Bearer ${ae}`);const E={name:A.name,email:A.email,phone:A.phone,address:A.location},W=await fetch(`${ft()}/api/user/profile`,{method:"PUT",credentials:"include",headers:fe,body:JSON.stringify(E)}),Z={name:A.name,specialization:A.specialization,category:A.category,subCategory:A.subCategory,description:A.description,experience:A.experience,certifications:A.certifications,hourlyRate:A.hourlyRate,location:A.location,available:A.available},Q=await fetch(`${ft()}/api/provider/profile`,{method:"PUT",credentials:"include",headers:fe,body:JSON.stringify(Z)});if(W.ok&&Q.ok){try{localStorage.setItem("lb_report_taxpayer_id",(A.taxpayerId||"").trim())}catch{}a({title:"Sucesso",description:"Perfil atualizado com sucesso!"}),p(!1),await $()}else{let re="Erro ao atualizar perfil";try{const de=W.ok?null:await W.json(),Ne=Q.ok?null:await Q.json();re=de?.message||Ne?.message||re}catch{}a({title:"Erro",description:re,variant:"destructive"})}}catch(ae){console.error("Erro ao salvar perfil:",ae),a({title:"Erro",description:"Erro de conexão ao salvar perfil",variant:"destructive"})}finally{u(!1)}},K=()=>{p(!1),g&&j&&S({name:g.name||"",email:j.email||"",phone:j.phone||"",taxpayerId:A.taxpayerId||"",specialization:g.specialization||"",category:g.category||"",subCategory:g.subCategory||"",description:g.description||"",experience:g.experience||"",certifications:g.certifications||"",hourlyRate:g.hourlyRate||"",location:g.location||"",available:g.available||!0})},me=async ae=>{const fe=ae.target.files?.[0];if(!fe)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(fe.type)){a({title:"Erro",description:"Apenas imagens são permitidas (JPEG, PNG, GIF, WebP)",variant:"destructive"});return}if(fe.size>5*1024*1024){a({title:"Erro",description:"A imagem deve ter no máximo 5MB",variant:"destructive"});return}try{y(!0);const W=localStorage.getItem("token"),Z=new FormData;Z.append("profileImage",fe);const Q=await fetch(`${ft()}/api/provider/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${W}`},body:Z});if(Q.ok){const re=await Q.json();g&&C({...g,imageUrl:re.imageUrl}),a({title:"Sucesso",description:"Imagem de perfil atualizada com sucesso!"})}else{const re=await Q.json();a({title:"Erro",description:re.message||"Erro ao fazer upload da imagem",variant:"destructive"})}}catch(W){console.error("Erro ao fazer upload da imagem:",W),a({title:"Erro",description:"Erro de conexão ao fazer upload da imagem",variant:"destructive"})}finally{y(!1)}},le=()=>{N.current?.click()},X=()=>{r(),window.location.href="/"},ee=ae=>/.+@.+\..+/.test((ae||"").trim()),je=ae=>{const fe=(ae||"").replace(/\D/g,"");return!(fe.length!==11||fe[0]==="0"||fe[1]==="0"||fe[2]!=="9")},R=ae=>{const fe=(ae||"").replace(/\D/g,"");if(!fe||fe.length!==11||/^(\d)\1{10}$/.test(fe))return!1;const E=W=>{let Z=0;for(let re=0;re<W;re++)Z+=parseInt(fe[re],10)*(W+1-re);const Q=Z*10%11;return Q===10?0:Q};return E(9)===parseInt(fe[9],10)&&E(10)===parseInt(fe[10],10)},z=ae=>{const fe=(ae||"").replace(/\D/g,"");if(!fe||fe.length!==14||/^(\d)\1{13}$/.test(fe))return!1;const E=(Q,re)=>{const Ne=Q.split("").reduce((J,oe,ie)=>J+parseInt(oe,10)*re[ie],0)%11;return Ne<2?0:11-Ne},W=E(fe.slice(0,12),[5,4,3,2,9,8,7,6,5,4,3,2]),Z=E(fe.slice(0,12)+W.toString(),[6,5,4,3,2,9,8,7,6,5,4,3,2]);return W===parseInt(fe[12],10)&&Z===parseInt(fe[13],10)},q=ee(j?.email||A.email),B=je(j?.phone||A.phone),ge=A.taxpayerId||j?.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"",ue=R(ge)||z(ge),be=[q,B,ue].filter(Boolean).length,ne=ae=>({acompanhante_hospitalar:"Acompanhante Hospitalar"})[ae]||ae,ve=ae=>({companhia_apoio_emocional:"Companhia e Apoio Emocional",acompanhamento_hospitalar:"Acompanhamento Hospitalar"})[ae]||ae;return i?e.jsx(ol,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando perfil..."})]})})}):e.jsx(ol,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:e.jsxs("div",{className:"w-full max-w-sm lg:max-w-none mx-auto lg:mx-0 relative px-3 sm:px-4 lg:px-8 py-3 sm:py-4 lg:py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>s("/provider-dashboard"),className:"p-2",children:e.jsx(or,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Meu Perfil"})]}),h?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Oe,{onClick:K,variant:"outline",size:"sm",children:[e.jsx(hl,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),e.jsx(Oe,{onClick:V,size:"sm",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ec,{className:"h-4 w-4 mr-2"}),"Salvar"]})})]}):e.jsxs(Oe,{onClick:()=>p(!0),size:"sm",children:[e.jsx(up,{className:"h-4 w-4 mr-2"}),"Editar"]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"mb-6",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsxs(Ai,{className:"w-24 h-24 mx-auto border-4 border-yellow-500",children:[e.jsx(Ti,{src:g.imageUrl?`${ft()}${g.imageUrl}`:void 0,alt:g.name}),e.jsx(Ei,{className:"bg-yellow-500 text-white text-2xl font-bold",children:g.name?.charAt(0)||"P"})]}),e.jsx(Oe,{size:"sm",variant:"secondary",className:"absolute -bottom-1 -right-1 rounded-full w-8 h-8 p-0 bg-white border-2 border-gray-200 hover:bg-gray-50",onClick:le,disabled:v,children:v?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full"}):e.jsx(vo,{className:"h-4 w-4"})})]}),e.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:me,className:"hidden"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:h?e.jsx(xt,{value:A.name,onChange:ae=>S(fe=>({...fe,name:ae.target.value})),className:"text-center text-2xl font-bold"}):g.name}),e.jsx("p",{className:"text-lg text-primary font-semibold mb-2",children:h?e.jsx(xt,{value:A.specialization,onChange:ae=>S(fe=>({...fe,specialization:ae.target.value})),className:"text-center text-lg"}):g.specialization}),e.jsxs("div",{className:"flex justify-center gap-6 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g.totalReviews}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avaliações"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g.rating}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nota"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["R$ ",parseFloat(g.hourlyRate||"0").toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Hora"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Bs,{variant:g.available?"secondary":"outline",className:`${g.available?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:g.available?e.jsxs(e.Fragment,{children:[e.jsx(Ts,{className:"h-3 w-3 mr-1"}),"Disponível"]}):e.jsxs(e.Fragment,{children:[e.jsx(fo,{className:"h-3 w-3 mr-1"}),"Indisponível"]})})})]})})}),e.jsxs(ot,{className:"mb-6",children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Gr,{className:"h-5 w-5"}),"Informações Profissionais"]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Nn,{children:"CPF/CNPJ"}),h?e.jsx(xt,{type:"text",inputMode:"numeric",autoComplete:"off",spellCheck:!1,placeholder:"CPF/CNPJ",value:A.taxpayerId,onChange:ae=>S(fe=>({...fe,taxpayerId:ae.target.value})),className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.taxpayerId||j?.taxpayerId||localStorage.getItem("lb_report_taxpayer_id")||"").trim()||"Não informado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Nn,{children:"Categoria"}),h?e.jsxs(Bl,{value:A.category,onValueChange:ae=>S(fe=>({...fe,category:ae})),children:[e.jsx(ll,{className:"bg-white dark:bg-gray-800",children:e.jsx(ql,{placeholder:"Selecione a categoria"})}),e.jsx(cl,{children:e.jsx(co,{value:"acompanhante_hospitalar",children:"Acompanhante Hospitalar"})})]}):e.jsx("p",{className:"font-medium",children:ne(g.category)})]}),e.jsxs("div",{children:[e.jsx(Nn,{children:"Subcategoria"}),h?e.jsxs(Bl,{value:A.subCategory,onValueChange:ae=>S(fe=>({...fe,subCategory:ae})),children:[e.jsx(ll,{className:"bg-white dark:bg-gray-800",children:e.jsx(ql,{placeholder:"Selecione a subcategoria"})}),e.jsxs(cl,{children:[e.jsx(co,{value:"companhia_apoio_emocional",children:"Companhia e Apoio Emocional"}),e.jsx(co,{value:"acompanhamento_hospitalar",children:"Acompanhamento Hospitalar"})]})]}):e.jsx("p",{className:"font-medium",children:ve(g.subCategory)})]})]}),e.jsxs("div",{children:[e.jsx(Nn,{children:"Descrição"}),h?e.jsx(Yn,{value:A.description,onChange:ae=>S(fe=>({...fe,description:ae.target.value})),placeholder:"Descreva seus serviços...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.description})]}),e.jsxs("div",{children:[e.jsx(Nn,{children:"Experiência"}),h?e.jsx(Yn,{value:A.experience,onChange:ae=>S(fe=>({...fe,experience:ae.target.value})),placeholder:"Descreva sua experiência...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.experience||"Não informado"})]}),e.jsxs("div",{children:[e.jsx(Nn,{children:"Certificações"}),h?e.jsx(Yn,{value:A.certifications,onChange:ae=>S(fe=>({...fe,certifications:ae.target.value})),placeholder:"Liste suas certificações...",rows:3}):e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:g.certifications||"Não informado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Nn,{children:"Valor por Hora (R$)"}),h?e.jsx(xt,{type:"number",value:A.hourlyRate,onChange:ae=>S(fe=>({...fe,hourlyRate:ae.target.value})),placeholder:"0.00"}):e.jsxs("p",{className:"font-medium",children:["R$ ",parseFloat(g.hourlyRate||"0").toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(Nn,{children:"Localização"}),h?e.jsx(xt,{value:A.location,onChange:ae=>S(fe=>({...fe,location:ae.target.value})),placeholder:"Sua localização"}):e.jsx("p",{className:"font-medium",children:g.location||"Não informado"})]})]})]})]}),e.jsxs(ot,{className:"mb-6",children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(Tc,{className:"h-5 w-5"}),"Informações de Contato"]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Tc,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),h?e.jsx(xt,{type:"email",value:A.email,onChange:ae=>S(fe=>({...fe,email:ae.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.email||j?.email||"").trim()||"Não informado"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Li,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Telefone"}),h?e.jsx(xt,{value:A.phone,onChange:ae=>S(fe=>({...fe,phone:ae.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.phone||j?.phone||"").trim()||"Não informado"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ys,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Endereço"}),h?e.jsx(xt,{value:A.location,onChange:ae=>S(fe=>({...fe,location:ae.target.value})),placeholder:"Não informado",className:"bg-white dark:bg-gray-800"}):e.jsx("p",{className:"font-medium",children:(A.location||g.location||"").trim()||"Não informado"})]})]})]})]}),e.jsx(ot,{className:`mb-6 ${be===3?"border-green-100 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20":"border-yellow-100 bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20"}`,children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${be===3?"bg-green-500":"bg-yellow-500"} rounded-full flex items-center justify-center shadow-lg`,children:e.jsx(el,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:be===3?"Conta Verificada":"Verificação em andamento"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:be===3?"Todos os dados foram validados":`Complete ${be}/3 etapas para verificar sua conta`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Email"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Telefone"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ue?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"CPF/CNPJ"})]})]})]}),e.jsx(Bs,{className:`${be===3?"bg-green-500":"bg-yellow-500"} text-white shadow-md hover:opacity-90 transition-opacity`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg",children:[be,"/3"]}),e.jsx("span",{children:be===3?"Verificado":"Pendente"})]})})]})})}),e.jsx(ot,{className:"mb-6 border-red-100 bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Rl,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Sair da Conta"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Encerre sua sessão e saia do aplicativo"})]})]}),e.jsxs(Oe,{onClick:X,variant:"destructive",className:"bg-red-500 hover:bg-red-600 text-white shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Sair"]})]})})})]})]})})})}function SN(){const{user:s}=Yr(),{toast:t}=qs();_r();const[r,a]=P.useState([]),[i,l]=P.useState(!0),[d,u]=P.useState(""),[h,p]=P.useState("all");P.useEffect(()=>{(async()=>{if(s)try{l(!0);const $=await fetch(`${ft()}/api/professionals/${s.id}/proposals`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if($.ok){const V=await $.json();a(V)}else console.error("Erro ao buscar propostas:",$.status),t({title:"Erro",description:"Não foi possível carregar suas propostas",variant:"destructive"})}catch($){console.error("Erro ao buscar propostas:",$),t({title:"Erro",description:"Erro ao carregar propostas",variant:"destructive"})}finally{l(!1)}})()},[s,t]);const v=r.filter(S=>{const $=S.serviceRequest.serviceType.toLowerCase().includes(d.toLowerCase())||S.serviceRequest.clientName.toLowerCase().includes(d.toLowerCase())||S.serviceRequest.description.toLowerCase().includes(d.toLowerCase()),V=h==="all"||S.status===h;return $&&V}),y=S=>{switch(S){case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},N=S=>{switch(S){case"accepted":return"Aceita";case"rejected":return"Rejeitada";case"completed":return"Concluída";case"pending":return"Pendente";default:return"Desconhecido"}},g=S=>{switch(S){case"accepted":return e.jsx(Ts,{className:"h-4 w-4"});case"rejected":return e.jsx(mo,{className:"h-4 w-4"});case"completed":return e.jsx(Ts,{className:"h-4 w-4"});case"pending":return e.jsx(mr,{className:"h-4 w-4"});default:return e.jsx(mr,{className:"h-4 w-4"})}},C=S=>new Date(S).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),j=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(S)),T=S=>{t({title:"Chat",description:"Funcionalidade de chat será implementada em breve"})},A=async S=>{if(s)try{const $=await fetch(`${ft()}/api/service/${S.serviceRequestId}/complete`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({notes:"Serviço concluído com sucesso"})});if($.ok)t({title:"Sucesso!",description:"Serviço marcado como concluído. Aguardando confirmação do cliente."}),window.location.reload();else{const V=await $.json();t({title:"Erro",description:V.error||"Erro ao confirmar conclusão do serviço",variant:"destructive"})}}catch($){console.error("Erro ao confirmar conclusão:",$),t({title:"Erro",description:"Erro ao confirmar conclusão do serviço",variant:"destructive"})}};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-yellow-500"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando suas propostas..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gs,{href:"/provider-dashboard",children:e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(or,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Minhas Propostas"})]})}),e.jsxs("div",{className:"p-4 space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(xt,{placeholder:"Buscar por serviço, cliente ou descrição...",value:d,onChange:S=>u(S.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Oe,{variant:h==="all"?"default":"outline",size:"sm",onClick:()=>p("all"),children:"Todas"}),e.jsx(Oe,{variant:h==="pending"?"default":"outline",size:"sm",onClick:()=>p("pending"),children:"Pendentes"}),e.jsx(Oe,{variant:h==="accepted"?"default":"outline",size:"sm",onClick:()=>p("accepted"),children:"Aceitas"}),e.jsx(Oe,{variant:h==="rejected"?"default":"outline",size:"sm",onClick:()=>p("rejected"),children:"Rejeitadas"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Propostas"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),e.jsx(Ia,{className:"h-6 w-6 text-blue-600"})]})})}),e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(S=>S.status==="pending").length})]}),e.jsx(mr,{className:"h-6 w-6 text-yellow-600"})]})})}),e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aceitas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(S=>S.status==="accepted").length})]}),e.jsx(Ts,{className:"h-6 w-6 text-green-600"})]})})}),e.jsx(ot,{children:e.jsx(lt,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Concluídas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.filter(S=>S.status==="completed").length})]}),e.jsx(Ts,{className:"h-6 w-6 text-blue-600"})]})})})]}),e.jsx("div",{className:"space-y-4",children:v.length===0?e.jsx(ot,{children:e.jsxs(lt,{className:"p-8 text-center",children:[e.jsx(Ia,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:d||h!=="all"?"Nenhuma proposta encontrada":"Nenhuma proposta ainda"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d||h!=="all"?"Tente ajustar os filtros de busca":"Você ainda não fez nenhuma proposta. Explore os serviços disponíveis!"}),!d&&h==="all"&&e.jsx(Gs,{href:"/provider-dashboard",children:e.jsx(Oe,{className:"mt-4",children:"Explorar Serviços"})})]})}):v.map(S=>e.jsx(ot,{className:"hover:shadow-md transition-shadow",children:e.jsx(lt,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S.serviceRequest.serviceType}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:S.serviceRequest.description})]}),e.jsx(Bs,{className:y(S.status),children:e.jsxs("div",{className:"flex items-center gap-1",children:[g(S.status),N(S.status)]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[S.serviceRequest.clientProfileImage?e.jsx("img",{src:`${ft()}${S.serviceRequest.clientProfileImage}`,alt:S.serviceRequest.clientName,className:"w-10 h-10 rounded-full object-cover",onError:$=>{const V=$.target;V.style.display="none";const K=V.parentElement;K&&(K.innerHTML=`
                                  <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-bold">
                                      ${S.serviceRequest.clientName.charAt(0).toUpperCase()}
                                    </span>
                                  </div>
                                `)}}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:S.serviceRequest.clientName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.serviceRequest.clientName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Cliente desde ",new Date(S.serviceRequest.clientCreatedAt).getFullYear()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Vr,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sua Proposta"}),e.jsx("p",{className:"font-semibold text-green-600",children:j(S.proposedPrice)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Vr,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Orçamento Cliente"}),e.jsx("p",{className:"font-semibold text-blue-600",children:j(S.serviceRequest.budget)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(mr,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tempo Estimado"}),e.jsx("p",{className:"font-semibold text-purple-600",children:S.estimatedTime})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(pr,{className:"h-5 w-5 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Agendada"}),e.jsx("p",{className:"font-semibold text-orange-600",children:S.serviceRequest.scheduledDate?new Date(S.serviceRequest.scheduledDate).toLocaleDateString("pt-BR"):"Não definida"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{children:S.serviceRequest.address})]}),S.message&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sua mensagem:"})," ",S.message]})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Proposta enviada em ",C(S.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col gap-2 lg:flex-shrink-0",children:[e.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>T(),children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Chat com Cliente"]}),S.status==="accepted"&&S.serviceRequest?.status!=="awaiting_confirmation"&&e.jsxs(Oe,{variant:"default",size:"sm",onClick:()=>A(S),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Confirmar Conclusão"]}),S.status==="accepted"&&S.serviceRequest?.status==="awaiting_confirmation"&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Serviço Concluído - Aguardando Confirmação do Cliente"})]})})]})]})})},S.id))})]})]})}function kN(){const t=Pp()?.id;Yr();const{toast:r}=qs(),[a,i]=P.useState(""),[l,d]=P.useState(""),[u,h]=P.useState(""),[p,v]=P.useState(!1),[y,N]=P.useState(!0),[g,C]=P.useState(null),[j,T]=P.useState(null),[A,S]=P.useState(!1),[$,V]=P.useState([]),[K,me]=P.useState(!1),[le,X]=P.useState(!1),[ee,je]=P.useState(""),[R,z]=P.useState(!1),[q,B]=P.useState(!1),[ge,ue]=P.useState(""),[be,ne]=P.useState(!1),[ve,ae]=P.useState({id:parseInt(t||"0"),clientName:"",clientAvatar:"",clientProfileImage:"",serviceType:"",location:"",distance:0,urgency:"low",budget:0,description:"",timePosted:"",responses:0,preferredTime:"",scheduledTime:"",clientRating:0,previousServices:0,additionalDetails:"",additionalInfo:"",address:"",scheduledDate:"",status:"open",clientCreatedAt:""}),fe=(J,oe,ie,Te)=>{const Ae=(ie-J)*Math.PI/180,xe=(Te-oe)*Math.PI/180,G=Math.sin(Ae/2)*Math.sin(Ae/2)+Math.cos(J*Math.PI/180)*Math.cos(ie*Math.PI/180)*Math.sin(xe/2)*Math.sin(xe/2);return 6371*(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)))},E=()=>new Promise(J=>{if(!navigator.geolocation){J(null);return}navigator.geolocation.getCurrentPosition(oe=>{const{latitude:ie,longitude:Te}=oe.coords;J([ie,Te])},oe=>{J(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),W=async J=>{try{const oe=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(J)}&limit=1&countrycodes=br`,{method:"GET",headers:{Accept:"application/json","User-Agent":"LifeBee-App/1.0"}});if(!oe.ok)return null;const ie=await oe.json();if(ie&&ie.length>0){const{lat:Te,lon:se}=ie[0];return[parseFloat(Te),parseFloat(se)]}return null}catch{return null}};P.useEffect(()=>{(async()=>{if(!t){C("ID do serviço não fornecido"),N(!1);return}try{N(!0),C(null);const oe=await fetch(`${ft()}/api/service-requests/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!oe.ok)throw new Error(`Erro ao carregar serviço: ${oe.status}`);const ie=await oe.json(),Te={id:ie.id,clientName:ie.clientName||"Cliente",clientAvatar:ie.clientProfileImage||"",clientProfileImage:ie.clientProfileImage||"",serviceType:ie.serviceType||"Serviço",location:ie.address||"",distance:0,urgency:ie.urgency||"low",budget:ie.budget||0,description:ie.description||"Descrição não disponível",timePosted:ie.createdAt||"",responses:ie.responses||0,preferredTime:ie.scheduledTime||"Não definido",scheduledTime:ie.scheduledTime||"Não definido",clientRating:5,previousServices:0,additionalDetails:ie.description||"",additionalInfo:ie.description||"",address:ie.address||"Endereço não informado",scheduledDate:ie.scheduledDate||"",status:ie.status||"open",clientCreatedAt:ie.clientCreatedAt||""};if(ae(Te),Te.address&&Te.address!=="Endereço não informado"){S(!0);try{const se=await E();T(se);const Ae=await W(Te.address);if(Ae&&se){const xe=fe(se[0],se[1],Ae[0],Ae[1]);ae(G=>({...G,distance:Math.round(xe*10)/10}))}else ae(xe=>({...xe,distance:-1}))}catch{ae(Ae=>({...Ae,distance:-1}))}finally{S(!1)}}}catch(oe){console.error("Erro ao carregar serviço:",oe),C(oe instanceof Error?oe.message:"Erro desconhecido"),r({title:"Erro",description:"Não foi possível carregar os detalhes do serviço",variant:"destructive"})}finally{N(!1)}})()},[t,r]),P.useEffect(()=>{(async()=>{if(t)try{me(!0);const oe=await fetch(`${ft()}/api/service-requests/${t}/offers`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(oe.ok){const ie=await oe.json();V(ie)}else console.error("Erro ao buscar propostas:",oe.status)}catch(oe){console.error("Erro ao buscar propostas:",oe)}finally{me(!1)}})()},[t]);const Z=async()=>{if(a.trim()&&l&&u)try{const J=await fetch(`${ft()}/api/service-requests/${t}/offers`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({proposedPrice:parseFloat(l),estimatedTime:u,message:a})});if(J.ok){const oe=await J.json();r({title:"Sucesso!",description:"Sua proposta foi enviada com sucesso"});const ie=await fetch(`${ft()}/api/service-requests/${t}/offers`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(ie.ok){const Te=await ie.json();V(Te)}v(!0)}else{const oe=await J.json();r({title:"Erro",description:oe.message||"Não foi possível enviar a proposta",variant:"destructive"})}}catch{r({title:"Erro",description:"Não foi possível enviar a proposta",variant:"destructive"})}},Q=async()=>{if(!ee.trim()){r({title:"Erro",description:"Digite uma mensagem antes de enviar",variant:"destructive"});return}z(!0);try{await new Promise(J=>setTimeout(J,1e3)),r({title:"Sucesso",description:"Mensagem enviada com sucesso!"}),je(""),X(!1)}catch(J){console.error("Erro ao enviar mensagem:",J),r({title:"Erro",description:"Erro ao enviar mensagem. Tente novamente.",variant:"destructive"})}finally{z(!1)}},re=async()=>{if(!ge.trim()){r({title:"Erro",description:"Digite uma mensagem antes de enviar",variant:"destructive"});return}ne(!0);try{await new Promise(J=>setTimeout(J,1e3)),r({title:"Sucesso",description:"Mensagem enviada com sucesso!"}),ue(""),B(!1)}catch(J){console.error("Erro ao enviar mensagem:",J),r({title:"Erro",description:"Erro ao enviar mensagem. Tente novamente.",variant:"destructive"})}finally{ne(!1)}},de=J=>{switch(J){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},Ne=J=>{const oe=new Date(J),Te=Math.floor((new Date().getTime()-oe.getTime())/(1e3*60));return Te<1?"agora mesmo":Te<60?`há ${Te} min`:Te<1440?`há ${Math.floor(Te/60)}h`:`há ${Math.floor(Te/1440)} dias`};return y?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-yellow-500"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando detalhes do serviço..."})]})}):g?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx(fo,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Erro ao carregar serviço"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g}),e.jsx(Gs,{href:"/provider-dashboard",children:e.jsxs(Oe,{children:[e.jsx(or,{className:"h-4 w-4 mr-2"}),"Voltar ao Dashboard"]})})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gs,{href:"/provider-dashboard",children:e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(or,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Detalhes do Serviço"})]})}),e.jsx("div",{className:"p-3 sm:p-4 space-y-4 sm:space-y-6 max-w-4xl mx-auto",children:p?e.jsx(ot,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:e.jsxs(lt,{className:"p-4 sm:p-6 text-center",children:[e.jsx(Ts,{className:"h-12 w-12 sm:h-16 sm:w-16 text-green-600 mx-auto mb-3 sm:mb-4"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-green-800 dark:text-green-200 mb-2",children:"Oferta Enviada com Sucesso!"}),e.jsxs("p",{className:"text-sm sm:text-base text-green-700 dark:text-green-300 mb-4",children:["Sua proposta foi enviada para ",ve.clientName,". Você receberá uma notificação quando ela responder."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(Gs,{href:"/provider-dashboard",children:e.jsx(Oe,{variant:"outline",className:"h-10 sm:h-11 text-sm sm:text-base",children:"Voltar ao Dashboard"})}),e.jsxs(Dl,{open:le,onOpenChange:X,children:[e.jsx(Qd,{asChild:!0,children:e.jsxs(Oe,{className:"h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})}),e.jsxs(rl,{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700",children:[e.jsx(nl,{children:e.jsxs(al,{className:"text-lg sm:text-xl",children:["Mensagem para ",ve.clientName]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Yn,{placeholder:"Digite uma mensagem adicional...",rows:4,className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]",value:ee,onChange:J=>je(J.target.value)}),e.jsx(Oe,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",onClick:Q,disabled:R,children:R?e.jsxs(e.Fragment,{children:[e.jsx(jr,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ia,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})})]})]})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[ve.clientProfileImage?e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:`${ft()}${ve.clientProfileImage}`,alt:ve.clientName||"Cliente",className:"w-full h-full object-cover",onError:J=>{const oe=J.target;oe.style.display="none";const ie=oe.parentElement;ie&&(ie.innerHTML=`
                                <div class="w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                                  <span class="text-white text-xl font-bold">
                                    ${ve.clientName?ve.clientName.charAt(0).toUpperCase():"C"}
                                  </span>
                                </div>
                              `)}})}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:ve.clientName?ve.clientName.charAt(0).toUpperCase():"C"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:ve.clientName||"Cliente"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(cn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:ve.clientRating||"5.0"}),e.jsx("span",{className:"text-gray-500",children:"•"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[ve.previousServices||"0"," serviços"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente desde ",ve.clientCreatedAt?new Date(ve.clientCreatedAt).getFullYear():"2024"]})]})]}),e.jsx(Bs,{className:de(ve.urgency),children:ve.status==="open"?"Aberta":ve.status==="in_progress"?"Em Andamento":ve.status==="completed"?"Concluída":"Normal"})]})}),e.jsxs(lt,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-primary mb-2",children:ve.serviceType||"Serviço Solicitado"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:ve.description||"Descrição do serviço não disponível"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Vr,{className:"h-5 w-5 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Orçamento"}),e.jsxs("div",{className:"font-semibold text-green-600",children:["R$ ",ve.budget?typeof ve.budget=="string"?parseFloat(ve.budget).toFixed(2):ve.budget.toFixed(2):"0,00"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ys,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Distância"}),e.jsx("div",{className:"font-semibold text-blue-600",children:A?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(jr,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Calculando..."})]}):ve.distance===-1?"Não disponível":`${ve.distance||"0"} km`})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(mr,{className:"h-5 w-5 text-purple-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Horário"}),e.jsx("div",{className:"font-semibold text-purple-600",children:ve.preferredTime||"Não definido"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Mn,{className:"h-5 w-5 text-orange-600 mx-auto mb-1"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Respostas"}),e.jsx("div",{className:"font-semibold text-orange-600",children:ve.responses||0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-gray-500"}),"Endereço"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:ve.address||"Endereço não informado"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(pr,{className:"h-4 w-4 text-gray-500"}),"Data"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:ve.scheduledDate?new Date(ve.scheduledDate).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Data não definida"})]}),ve.additionalInfo&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-1 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Er,{className:"h-4 w-4 text-gray-500"}),"Detalhes Adicionais"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:ve.additionalInfo})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(Ia,{className:"h-5 w-5"}),"Fazer Proposta"]})}),e.jsxs(lt,{className:"space-y-4 p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Valor Proposto (R$)"}),e.jsx(xt,{type:"number",placeholder:"120.00",value:l,onChange:J=>d(J.target.value),className:"h-10 sm:h-11 text-sm sm:text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Tempo Estimado"}),e.jsx(xt,{placeholder:"1 hora",value:u,onChange:J=>h(J.target.value),className:"h-10 sm:h-11 text-sm sm:text-base"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium block",children:"Mensagem da Proposta"}),e.jsx(Yn,{placeholder:"Olá! Sou fisioterapeuta especializada em reabilitação respiratória pós-COVID. Tenho experiência com pacientes na sua faixa etária e posso levar equipamentos específicos para o atendimento domiciliar...",rows:4,value:a,onChange:J=>i(J.target.value),className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]"})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(fo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Dicas para uma boa proposta:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Demonstre sua experiência específica no tipo de serviço"}),e.jsx("li",{children:"• Mencione equipamentos ou materiais que você possui"}),e.jsx("li",{children:"• Seja claro sobre disponibilidade e tempo de resposta"}),e.jsx("li",{children:"• Ofereça um valor competitivo mas justo"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[e.jsxs(Oe,{onClick:Z,disabled:!a.trim()||!l||!u,className:"flex-1 h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(Ia,{className:"h-4 w-4 mr-2"}),"Enviar Proposta"]}),e.jsxs(Dl,{open:q,onOpenChange:B,children:[e.jsx(Qd,{asChild:!0,children:e.jsxs(Oe,{variant:"outline",className:"h-10 sm:h-11 text-sm sm:text-base",children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Observações"]})}),e.jsxs(rl,{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700",children:[e.jsx(nl,{children:e.jsxs(al,{className:"text-lg sm:text-xl",children:["Observações para ",ve.clientName]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Yn,{placeholder:"Faça uma pergunta sobre o serviço...",rows:4,className:"text-sm sm:text-base min-h-[100px] sm:min-h-[120px]",value:ge,onChange:J=>ue(J.target.value)}),e.jsx(Oe,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",onClick:re,disabled:be,children:be?e.jsxs(e.Fragment,{children:[e.jsx(jr,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ia,{className:"h-4 w-4 mr-2"}),"Enviar Mensagem"]})})]})]})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Outras Propostas"}),K&&e.jsx(jr,{className:"h-4 w-4 animate-spin text-gray-500"})]})}),e.jsx(lt,{children:$.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Mn,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:K?"Carregando propostas...":"Nenhuma proposta ainda"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Seja o primeiro a fazer uma proposta!"})]}):e.jsx("div",{className:"space-y-3",children:$.map(J=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[J.professionalProfileImage?e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:e.jsx("img",{src:`${ft()}${J.professionalProfileImage}`,alt:J.professionalName||"Profissional",className:"w-full h-full object-cover",onError:oe=>{const ie=oe.target;ie.style.display="none";const Te=ie.parentElement;Te&&(Te.innerHTML=`
                                       <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                                         <span class="text-white text-xs font-bold">
                                           ${J.professionalName?J.professionalName.charAt(0).toUpperCase():"P"}
                                         </span>
                                       </div>
                                     `)}})}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:J.professionalName?J.professionalName.charAt(0).toUpperCase():"P"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:J.professionalName||"Profissional"}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["⭐ ",J.professionalRating||"5.0"," • ",J.professionalTotalReviews||"0"," serviços"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-sm",children:["R$ ",J.proposedPrice?parseFloat(J.proposedPrice).toFixed(2):"0,00"]}),e.jsx("p",{className:"text-xs text-gray-500",children:Ne(J.createdAt)})]})]},J.id))})})]})]})})]})}function CN(){console.log("Servico component rendering");const[,s]=_r(),{toast:t}=qs(),{isAuthenticated:r,isLoading:a,user:i}=Yr(),[l,d]=P.useState(""),[u,h]=P.useState(""),[p,v]=P.useState(""),[y,N]=P.useState(""),[g,C]=P.useState(""),[j,T]=P.useState(""),[A,S]=P.useState(""),[$,V]=P.useState(""),[K,me]=P.useState(""),[le,X]=P.useState(""),[ee,je]=P.useState(""),[R,z]=P.useState(""),[q,B]=P.useState(!1),[ge,ue]=P.useState(!1),[be,ne]=P.useState(!1),ve=J=>!!(J&&/.+@.+\..+/.test(J.trim())),ae=J=>{const oe=(J||"").replace(/\D/g,"");return oe.length===11&&oe[0]!=="0"&&oe[1]!=="0"&&oe[2]==="9"},fe=J=>{const ie=(J||"").replace(/\D/g,"");if(ie.length!==11||/^(\d)\1{10}$/.test(ie))return!1;const Te=se=>{let Ae=0;for(let G=0;G<se;G++)Ae+=parseInt(ie[G],10)*(se+1-G);const xe=Ae*10%11;return xe===10?0:xe};return Te(9)===parseInt(ie[9],10)&&Te(10)===parseInt(ie[10],10)},E=()=>{const J=ve(i?.email),oe=ae(i?.phone),ie=i?.taxpayerId,Te=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",se=fe(ie||Te),Ae=[J,oe,se].filter(Boolean).length;return{verified:Ae===3,steps:Ae}};if(P.useEffect(()=>{if(console.log("Auth state:",{isAuthenticated:r,isLoading:a}),!a&&!r&&(t({title:"Acesso Negado",description:"Você precisa estar logado para acessar esta página",variant:"destructive"}),s("/")),!a&&r){const{verified:J,steps:oe}=E();J||(t({title:"Verificação em andamento",description:`Conclua seu cadastro (${oe}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile"))}},[r,a,s,t]),a)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jr,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Redirecionando para login..."})})});const W=[{value:"acompanhante_hospitalar",label:"Acompanhante Hospitalar",icon:"🏥"}],Z=async J=>{J.preventDefault(),B(!0),ue(!1);const oe=localStorage.getItem("token");if(!oe){t({title:"Erro",description:"Você precisa estar logado para solicitar um serviço",variant:"destructive"}),B(!1);return}try{const ie=await fetch(`${ft()}/api/service-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe}`},body:JSON.stringify({category:l,serviceType:u,description:p,address:Ne(),scheduledDate:le,scheduledTime:ee,budget:R?parseFloat(R):null}),credentials:"include"});if(ie.ok){const Te=await ie.json();ue(!0),t({title:"Sucesso!",description:"Sua solicitação foi enviada com sucesso. Profissionais serão notificados."}),d(""),h(""),v(""),N(""),C(""),T(""),S(""),V(""),me(""),X(""),je(""),z("")}else{const Te=await ie.json();t({title:"Erro",description:Te.message||"Erro ao enviar solicitação",variant:"destructive"})}}catch{t({title:"Erro",description:"Erro de conexão. Tente novamente.",variant:"destructive"})}finally{B(!1)}},Q=J=>W.find(oe=>oe.value===J)?.icon||"📋",re=async J=>{if(J.length===8){ne(!0);try{const ie=await(await fetch(`https://viacep.com.br/ws/${J}/json/`)).json();ie.erro?t({title:"CEP não encontrado",description:"Verifique se o CEP está correto",variant:"destructive"}):(C(ie.logradouro||""),S(ie.bairro||""),V(ie.localidade||""),me(ie.uf||""),t({title:"Endereço encontrado!",description:"Endereço preenchido automaticamente pelo CEP",variant:"default"}))}catch(oe){console.error("Erro ao buscar CEP:",oe),t({title:"Erro",description:"Erro ao buscar endereço pelo CEP",variant:"destructive"})}finally{ne(!1)}}},de=J=>J.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"),Ne=()=>[g,j,A,$,K].filter(Boolean).join(", ");return console.log("Rendering Servico component, auth state:",{isAuthenticated:r,isLoading:a}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col pb-24",children:[e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Solicitar Serviço"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preencha os dados abaixo para solicitar um profissional"})]}),e.jsxs(ot,{className:"w-full",children:[e.jsx(ns,{children:e.jsxs(hs,{className:"flex items-center gap-2",children:[e.jsx(pr,{className:"h-5 w-5"}),"Nova Solicitação"]})}),e.jsxs(lt,{children:[e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Categoria do Serviço"}),e.jsxs(Bl,{value:l,onValueChange:d,required:!0,children:[e.jsx(ll,{className:"bg-white",children:e.jsx(ql,{placeholder:"Selecione uma categoria"})}),e.jsx(cl,{className:"bg-white",children:W.map(J=>e.jsx(co,{value:J.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:J.icon}),e.jsx("span",{children:J.label})]})},J.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Tipo de Serviço"}),e.jsx(xt,{placeholder:"Ex: Fisioterapia domiciliar, Acompanhamento hospitalar...",value:u,onChange:J=>h(J.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Descrição Detalhada"}),e.jsx(Yn,{placeholder:"Descreva o serviço que precisa, sintomas, necessidades específicas...",value:p,onChange:J=>v(J.target.value),rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(ys,{className:"h-4 w-4 inline mr-1"}),"Endereço"]}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{placeholder:"CEP (00000-000)",value:y,onChange:J=>{const oe=de(J.target.value);N(oe),oe.length===9&&re(oe.replace(/\D/g,""))},maxLength:9,required:!0}),be&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(jr,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(xt,{placeholder:"Rua/Avenida",value:g,onChange:J=>C(J.target.value),required:!0})}),e.jsx("div",{children:e.jsx(xt,{placeholder:"Número",value:j,onChange:J=>T(J.target.value),required:!0})})]}),e.jsx(xt,{placeholder:"Bairro",value:A,onChange:J=>S(J.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(xt,{placeholder:"Cidade",value:$,onChange:J=>V(J.target.value),required:!0}),e.jsx(xt,{placeholder:"Estado",value:K,onChange:J=>me(J.target.value),maxLength:2,required:!0})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Endereço Completo"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:Ne()||"Preencha os campos acima ou digite o CEP para preenchimento automático"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Data"}),e.jsx(xt,{type:"date",value:le,onChange:J=>X(J.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Hora"}),e.jsx(xt,{type:"time",value:ee,onChange:J=>je(J.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Orçamento Previsto (Opcional)"}),e.jsx(xt,{type:"number",placeholder:"R$ 0,00",value:R,onChange:J=>z(J.target.value),min:"0",step:"0.01"})]}),e.jsx(Oe,{type:"submit",className:"w-full",disabled:q,size:"lg",children:q?e.jsxs(e.Fragment,{children:[e.jsx(jr,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Solicitar Serviço"]})})]}),ge&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800 dark:text-green-200",children:[e.jsx(Ts,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Solicitação Enviada!"})]}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 text-sm mt-1",children:["Profissionais da categoria ",Q(l)," serão notificados sobre sua solicitação."]})]})]})]})]})}),e.jsx(Oa,{hidePlus:!0})]})}var ex="AlertDialog",[PN,oj]=xo(ex,[mm]),Qa=mm(),tx=s=>{const{__scopeAlertDialog:t,...r}=s,a=Qa(t);return e.jsx(em,{...a,...r,modal:!0})};tx.displayName=ex;var LN="AlertDialogTrigger",sx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Qa(r);return e.jsx(tm,{...i,...a,ref:t})});sx.displayName=LN;var AN="AlertDialogPortal",rx=s=>{const{__scopeAlertDialog:t,...r}=s,a=Qa(t);return e.jsx(Xf,{...a,...r})};rx.displayName=AN;var TN="AlertDialogOverlay",nx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Qa(r);return e.jsx(Sh,{...i,...a,ref:t})});nx.displayName=TN;var Jo="AlertDialogContent",[EN,MN]=PN(Jo),IN=Yf("AlertDialogContent"),ax=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:a,...i}=s,l=Qa(r),d=P.useRef(null),u=Sr(t,d),h=P.useRef(null);return e.jsx(lv,{contentName:Jo,titleName:ix,docsSlug:"alert-dialog",children:e.jsx(EN,{scope:r,cancelRef:h,children:e.jsxs(kh,{role:"alertdialog",...l,...i,ref:u,onOpenAutoFocus:Gt(i.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(IN,{children:a}),e.jsx(ON,{contentRef:d})]})})})});ax.displayName=Jo;var ix="AlertDialogTitle",ox=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Qa(r);return e.jsx(Ph,{...i,...a,ref:t})});ox.displayName=ix;var lx="AlertDialogDescription",cx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Qa(r);return e.jsx(Lh,{...i,...a,ref:t})});cx.displayName=lx;var RN="AlertDialogAction",dx=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,i=Qa(r);return e.jsx(Ch,{...i,...a,ref:t})});dx.displayName=RN;var hx="AlertDialogCancel",ux=P.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...a}=s,{cancelRef:i}=MN(hx,r),l=Qa(r),d=Sr(t,i);return e.jsx(Ch,{...l,...a,ref:d})});ux.displayName=hx;var ON=({contentRef:s})=>{const t=`\`${Jo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Jo}\` by passing a \`${lx}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Jo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return P.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},DN=tx,FN=sx,zN=rx,fx=nx,mx=ax,px=dx,gx=ux,xx=ox,vx=cx;const yx=DN,bx=FN,BN=zN,wx=P.forwardRef(({className:s,...t},r)=>e.jsx(fx,{className:mt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));wx.displayName=fx.displayName;const nu=P.forwardRef(({className:s,...t},r)=>e.jsxs(BN,{children:[e.jsx(wx,{}),e.jsx(mx,{ref:r,className:mt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));nu.displayName=mx.displayName;const au=({className:s,...t})=>e.jsx("div",{className:mt("flex flex-col space-y-2 text-center sm:text-left",s),...t});au.displayName="AlertDialogHeader";const iu=({className:s,...t})=>e.jsx("div",{className:mt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});iu.displayName="AlertDialogFooter";const ou=P.forwardRef(({className:s,...t},r)=>e.jsx(xx,{ref:r,className:mt("text-lg font-semibold",s),...t}));ou.displayName=xx.displayName;const lu=P.forwardRef(({className:s,...t},r)=>e.jsx(vx,{ref:r,className:mt("text-sm text-muted-foreground",s),...t}));lu.displayName=vx.displayName;const cu=P.forwardRef(({className:s,...t},r)=>e.jsx(px,{ref:r,className:mt(Vh(),s),...t}));cu.displayName=px.displayName;const du=P.forwardRef(({className:s,...t},r)=>e.jsx(gx,{ref:r,className:mt(Vh({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));du.displayName=gx.displayName;function qN(){const[,s]=_r(),{user:t}=Yr(),{toast:r}=qs(),[a,i]=P.useState([]),[l,d]=P.useState(!0),[u,h]=P.useState(null),p=async()=>{if(t){d(!0);try{const j=localStorage.getItem("token");if(console.log("👤 Usuário:",t),!j){r({title:"Erro de Autenticação",description:"Token não encontrado. Faça login novamente.",variant:"destructive"});return}const A=`${ft()}/api/service-requests/my-requests`;console.log("🌐 Fazendo requisição para:",A),console.log("🔑 Token:",j.substring(0,20)+"...");const S=await fetch(A,{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(console.log("📡 Resposta do servidor:",S.status,S.statusText),S.ok){const $=await S.json();console.log("✅ Dados recebidos:",$),i($)}else{console.error("❌ Erro ao buscar solicitações:",S.status);const $=await S.text();console.error("📄 Resposta de erro:",$),r({title:"Erro",description:"Erro ao carregar suas solicitações.",variant:"destructive"})}}catch(j){console.error("💥 Erro ao buscar solicitações:",j),r({title:"Erro de Conexão",description:"Erro ao conectar com o servidor.",variant:"destructive"})}finally{d(!1)}}},v=async j=>{h(j);try{const T=localStorage.getItem("token");if(!T){r({title:"Erro de Autenticação",description:"Token não encontrado. Faça login novamente.",variant:"destructive"});return}const A=await fetch(`${ft()}/api/service-requests/${j}`,{method:"DELETE",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(A.ok)i(S=>S.filter($=>$.id!==j)),r({title:"Solicitação Excluída",description:"Sua solicitação foi excluída com sucesso."});else{const S=await A.json();r({title:"Erro",description:S.message||"Erro ao excluir solicitação.",variant:"destructive"})}}catch(T){console.error("Erro ao excluir solicitação:",T),r({title:"Erro de Conexão",description:"Erro ao conectar com o servidor.",variant:"destructive"})}finally{h(null)}};P.useEffect(()=>{p()},[t]);const y=j=>{switch(j){case"open":return"bg-blue-100 text-blue-800 border-blue-200";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=j=>{switch(j){case"open":return"Aberta";case"in_progress":return"Em Andamento";case"completed":return"Concluída";case"cancelled":return"Cancelada";default:return"Desconhecido"}},g=j=>{switch(j){case"open":return e.jsx(oo,{className:"h-4 w-4"});case"in_progress":return e.jsx(mr,{className:"h-4 w-4"});case"completed":return e.jsx(Ts,{className:"h-4 w-4"});case"cancelled":return e.jsx(mo,{className:"h-4 w-4"});default:return e.jsx(ep,{className:"h-4 w-4"})}},C=j=>{switch(j){case"acompanhante_hospitalar":return"Acompanhante Hospitalar";default:return j}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col pb-24",children:[e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"mr-2",children:e.jsx(or,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Minhas Solicitações"})]}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(jr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando suas solicitações..."})]}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(Er,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Nenhuma solicitação encontrada"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Você ainda não fez nenhuma solicitação de serviço"}),e.jsx(Oe,{onClick:()=>{const j=!!(t?.email&&/.+@.+\..+/.test(t.email.trim())),T=(t?.phone||"").replace(/\D/g,""),A=T.length===11&&T[0]!=="0"&&T[1]!=="0"&&T[2]==="9",S=me=>{const le=me.replace(/\D/g,"");if(le.length!==11||/^(\d)\1{10}$/.test(le))return!1;const X=ee=>{let je=0;for(let z=0;z<ee;z++)je+=parseInt(le[z],10)*(ee+1-z);const R=je*10%11;return R===10?0:R};return X(9)===parseInt(le[9],10)&&X(10)===parseInt(le[10],10)},$=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",V=S($),K=[j,A,V].filter(Boolean).length;if(K!==3){r({title:"Verificação em andamento",description:`Conclua seu cadastro (${K}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile");return}s("/servico")},children:"Fazer Primeira Solicitação"})]}):e.jsx("div",{className:"space-y-4",children:a.map(j=>e.jsxs(ot,{className:"border-l-4 border-l-primary",children:[e.jsx(ns,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Solicitação #",j.id]}),e.jsx(Bs,{variant:"outline",className:`text-xs ${y(j.status)}`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[g(j.status),N(j.status)]})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:C(j.category)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>s(`/service-offer/${j.id}`),disabled:j.status!=="open",children:e.jsx(oo,{className:"h-4 w-4"})}),e.jsxs(yx,{children:[e.jsx(bx,{asChild:!0,children:e.jsx(Oe,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:j.status!=="open"||u===j.id,children:u===j.id?e.jsx(jr,{className:"h-4 w-4 animate-spin"}):e.jsx(tl,{className:"h-4 w-4"})})}),e.jsxs(nu,{children:[e.jsxs(au,{children:[e.jsx(ou,{children:"Excluir Solicitação"}),e.jsx(lu,{children:"Tem certeza que deseja excluir esta solicitação? Esta ação não pode ser desfeita e todos os profissionais que responderam não poderão mais ver sua solicitação."})]}),e.jsxs(iu,{children:[e.jsx(du,{children:"Cancelar"}),e.jsx(cu,{onClick:()=>v(j.id),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})]})]})]})}),e.jsx(lt,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary mb-1",children:j.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 truncate",children:j.address})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:new Date(j.scheduledDate).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:j.scheduledTime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vr,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["R$ ",j.budget&&!isNaN(Number(j.budget))?Number(j.budget).toFixed(2):"Não informado"]})]})]}),j.responses!==void 0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Er,{className:"h-4 w-4"}),e.jsxs("span",{children:[j.responses," profissional(is) responderam"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Criada em ",new Date(j.createdAt).toLocaleDateString("pt-BR")," às"," ",new Date(j.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})})]},j.id))}),e.jsx("div",{className:"mt-6",children:e.jsx(Oe,{onClick:()=>{const j=!!(t?.email&&/.+@.+\..+/.test(t.email.trim())),T=(t?.phone||"").replace(/\D/g,""),A=T.length===11&&T[0]!=="0"&&T[1]!=="0"&&T[2]==="9",S=me=>{const le=me.replace(/\D/g,"");if(le.length!==11||/^(\d)\1{10}$/.test(le))return!1;const X=ee=>{let je=0;for(let z=0;z<ee;z++)je+=parseInt(le[z],10)*(ee+1-z);const R=je*10%11;return R===10?0:R};return X(9)===parseInt(le[9],10)&&X(10)===parseInt(le[10],10)},$=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",V=S($),K=[j,A,V].filter(Boolean).length;if(K!==3){r({title:"Verificação em andamento",description:`Conclua seu cadastro (${K}/3): Email, Telefone e CPF para criar um serviço.`}),s("/profile");return}s("/servico")},className:"w-full",children:"Nova Solicitação"})})]})}),e.jsx(Oa,{})]})}function HN({isOpen:s,onClose:t,serviceRequestId:r,onRatingSubmitted:a}){const[i,l]=P.useState(0),[d,u]=P.useState(0),[h,p]=P.useState(""),[v,y]=P.useState(!1),{toast:N}=qs(),g=S=>{l(S)},C=S=>{u(S)},j=()=>{u(0)},T=async()=>{if(i===0){N({title:"Avaliação obrigatória",description:"Por favor, selecione uma avaliação de 1 a 5 estrelas.",variant:"destructive"});return}y(!0);try{const S=localStorage.getItem("token"),$=await fetch(`${ft()}/api/service/${r}/review`,{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({rating:i,comment:h.trim()||null})});if($.ok)N({title:"Avaliação enviada!",description:"Obrigado por avaliar o serviço. Sua opinião é muito importante para nós."}),a(),t();else{const V=await $.json();N({title:"Erro ao enviar avaliação",description:V.error||"Não foi possível enviar sua avaliação. Tente novamente.",variant:"destructive"})}}catch(S){console.error("Erro ao enviar avaliação:",S),N({title:"Erro de conexão",description:"Erro de conexão ao enviar avaliação. Verifique sua internet e tente novamente.",variant:"destructive"})}finally{y(!1)}},A=()=>{v||(l(0),p(""),t())};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Avaliar Serviço"}),e.jsx("button",{onClick:A,disabled:v,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:e.jsx(hl,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Como você avalia o serviço prestado pelo profissional?"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(S=>e.jsx("button",{onClick:()=>g(S),onMouseEnter:()=>C(S),onMouseLeave:j,disabled:v,className:"transition-all duration-200 transform hover:scale-110 disabled:opacity-50",children:e.jsx(cn,{size:40,className:`${S<=(d||i)?"fill-yellow-400 text-yellow-400":"text-gray-300"} transition-colors duration-200`})},S))})}),i>0&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("p",{className:"text-lg font-medium text-gray-800",children:[i===1&&"Péssimo",i===2&&"Ruim",i===3&&"Regular",i===4&&"Bom",i===5&&"Excelente"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i," ",i===1?"estrela":"estrelas"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentário (opcional)"}),e.jsx("textarea",{id:"comment",value:h,onChange:S=>p(S.target.value),placeholder:"Conte-nos sobre sua experiência com o serviço...",disabled:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none h-24 disabled:opacity-50"})]}),e.jsx("button",{onClick:T,disabled:i===0||v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Enviando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ia,{size:20}),e.jsx("span",{children:"Enviar Avaliação"})]})})]})]})}):null}function $N(){const[s,t]=_r(),{user:r}=Yr(),{toast:a}=qs(),[i,l]=P.useState([]),[d,u]=P.useState([]),[h,p]=P.useState(!0),[v,y]=P.useState("requests"),[N,g]=P.useState(null),[C,j]=P.useState(null),[T,A]=P.useState(null),[S,$]=P.useState(""),[V,K]=P.useState("all"),[me,le]=P.useState({}),[X,ee]=P.useState(!1),[je,R]=P.useState(null),z=(se,Ae=0)=>{if(typeof se=="number"&&!Number.isNaN(se))return se;const xe=parseFloat(String(se??""));return Number.isNaN(xe)?Ae:xe},q=P.useCallback(se=>{const Ae=se.replace(/\D/g,"");if(Ae.length!==11||/^(\d)\1{10}$/.test(Ae))return!1;const xe=G=>{let Ve=0;for(let Be=0;Be<G;Be++)Ve+=parseInt(Ae[Be],10)*(G+1-Be);const et=Ve*10%11;return et===10?0:et};return xe(9)===parseInt(Ae[9],10)&&xe(10)===parseInt(Ae[10],10)},[]),B=P.useCallback(se=>{const Ae=se.replace(/\D/g,"");return Ae.length===11&&Ae[0]!=="0"&&Ae[1]!=="0"&&Ae[2]==="9"},[]),ge=P.useCallback(se=>!!(se&&/.+@.+\..+/.test(se.trim())),[]),ue=P.useCallback(()=>{const se=ge(r?.email||""),Ae=B(r?.phone||""),xe=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",G=q(xe),Ve=[se,Ae,G].filter(Boolean).length;return{complete:Ve===3,steps:Ve,total:3}},[r?.email,r?.phone,ge,B,q]);console.log("🔍 Services Component - Estado atual:",{activeTab:v,serviceRequestsLength:i.length,serviceOffersLength:d.length,loading:h});const be=P.useCallback(async()=>{try{const se=localStorage.getItem("token");if(!se)return console.error("❌ Token não encontrado"),[];console.log("🔍 Buscando pedidos...");const Ae=await fetch(`${ft()}/api/service-requests/client`,{headers:{Authorization:`Bearer ${se}`}});if(Ae.ok){const xe=await Ae.json();return console.log("✅ Pedidos carregados:",xe),l(xe),xe}else{const xe=await Ae.text();console.error("❌ Erro ao buscar pedidos:",Ae.status,xe),a({title:"Erro",description:"Não foi possível carregar seus pedidos de serviço",variant:"destructive"})}}catch(se){console.error("❌ Erro ao buscar pedidos:",se),a({title:"Erro de conexão",description:"Verifique sua conexão com a internet",variant:"destructive"})}return[]},[a]),ne=P.useCallback(async()=>{try{const se=localStorage.getItem("token");if(!se)return console.error("❌ Token não encontrado"),[];console.log("🔍 Buscando propostas...");const Ae=await fetch(`${ft()}/api/service-offers/client`,{headers:{Authorization:`Bearer ${se}`}});if(Ae.ok){const xe=await Ae.json();console.log("✅ Propostas carregadas:",xe);let G=Array.isArray(xe)?xe:[];return G=G.map(Ve=>({...Ve,professionalRating:z(Ve?.professionalRating,5),professionalTotalReviews:z(Ve?.professionalTotalReviews,0),price:z(Ve?.price??Ve?.proposedPrice,0),estimatedTime:z(Ve?.estimatedTime,0),serviceStatus:Ve?.serviceStatus||"open"})),u(G),G}else{const xe=await Ae.text();console.error("❌ Erro ao buscar propostas:",Ae.status,xe),a({title:"Erro",description:"Não foi possível carregar as propostas",variant:"destructive"})}}catch(se){console.error("❌ Erro ao buscar propostas:",se),a({title:"Erro de conexão",description:"Verifique sua conexão com a internet",variant:"destructive"})}finally{p(!1)}return[]},[a]);P.useEffect(()=>{r?.id&&(async()=>(p(!0),await Promise.all([be(),ne()])))()},[r?.id,be,ne]),P.useEffect(()=>{r?.id&&(v==="offers"?ne():v==="requests"&&be())},[v,r?.id,be,ne]),P.useEffect(()=>{const se=()=>{!document.hidden&&r?.id&&(v==="offers"?ne():be())};return document.addEventListener("visibilitychange",se),()=>document.removeEventListener("visibilitychange",se)},[v,r?.id,be,ne]);const ve=async se=>{try{const Ae=localStorage.getItem("token"),xe=await fetch(`${ft()}/api/service-offers/${se}/accept`,{method:"PUT",headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(xe.ok)a({title:"Sucesso!",description:"Proposta aceita com sucesso!"}),await Promise.all([ne(),be()]);else{const G=await xe.json();a({title:"Erro",description:G.message||"Não foi possível aceitar a proposta",variant:"destructive"})}}catch(Ae){console.error("Erro ao aceitar proposta:",Ae),a({title:"Erro",description:"Erro de conexão ao aceitar a proposta",variant:"destructive"})}},ae=async se=>{try{const Ae=localStorage.getItem("token"),xe=await fetch(`${ft()}/api/service-offers/${se}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(xe.ok)a({title:"Proposta rejeitada",description:"A proposta foi rejeitada com sucesso."}),u(G=>G.filter(Ve=>Ve.id!==se)),g(null),await Promise.all([be(),ne()]);else{const G=await xe.json();a({title:"Erro",description:G.message||"Não foi possível rejeitar a proposta",variant:"destructive"})}}catch(Ae){console.error("Erro ao rejeitar proposta:",Ae),a({title:"Erro",description:"Erro de conexão ao rejeitar a proposta",variant:"destructive"})}},fe=async(se,Ae)=>{j(Ae);try{const xe=localStorage.getItem("token"),Ve=`Olá! Gostaria de conversar sobre sua proposta para "${d.find(Be=>Be.id===Ae)?.serviceTitle}".`,et=await fetch(`${ft()}/api/messages/start-conversation`,{method:"POST",headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"},body:JSON.stringify({professionalId:se,message:Ve})});if(et.ok)a({title:"Conversa iniciada!",description:"Redirecionando para as mensagens..."}),t("/messages");else{const Be=await et.json();a({title:"Erro",description:Be.message||"Não foi possível iniciar a conversa",variant:"destructive"})}}catch(xe){console.error("Erro ao iniciar conversa:",xe),a({title:"Erro",description:"Erro de conexão ao iniciar conversa",variant:"destructive"})}finally{j(null)}},E=async se=>{try{A(se);const Ae=localStorage.getItem("token"),xe=await fetch(`${ft()}/api/service/${se}/confirm`,{method:"POST",headers:{Authorization:`Bearer ${Ae}`,"Content-Type":"application/json"}});if(xe.ok){const G=await xe.json();a({title:"Sucesso!",description:"Serviço confirmado como concluído. O pagamento será liberado para o profissional."}),await Promise.all([ne(),be()]),G.requiresReview&&(R(se),ee(!0))}else{const G=await xe.json();a({title:"Erro",description:G.message||"Não foi possível confirmar a conclusão do serviço",variant:"destructive"})}}catch(Ae){console.error("Erro ao confirmar conclusão do serviço:",Ae),a({title:"Erro",description:"Erro de conexão ao confirmar conclusão do serviço",variant:"destructive"})}finally{A(null)}},W=se=>{switch(se){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Z=se=>{switch(se){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return se}},Q=se=>({acompanhante_hospitalar:"Acompanhante Hospitalar"})[se]||se.replace(/_/g," ").replace(/\b\w/g,xe=>xe.toUpperCase()),re=async se=>{try{const Ae=localStorage.getItem("token"),xe=await fetch(`${ft()}/api/service-requests/${se}`,{method:"DELETE",headers:{Authorization:`Bearer ${Ae}`}});if(xe.ok)a({title:"Pedido excluído",description:"O pedido foi excluído com sucesso."}),l(G=>G.filter(Ve=>Ve.id!==se));else{const G=await xe.json();a({title:"Erro",description:G.message||"Não foi possível excluir o pedido",variant:"destructive"})}}catch(Ae){console.error("Erro ao excluir pedido:",Ae),a({title:"Erro",description:"Erro de conexão ao excluir o pedido",variant:"destructive"})}},de=()=>{const se=ue();if(!se.complete){a({title:"Verificação em andamento",description:`Conclua seu cadastro (${se.steps}/${se.total}): Email, Telefone e CPF para criar um serviço.`}),t("/profile");return}t("/servico")},Ne=()=>{ne(),be()},J=()=>{ee(!1),R(null)},oe=new Set(i.map(se=>se.id)),ie=d.filter(se=>{if(!(i.length===0||oe.has(se.serviceRequestId)))return!1;const xe=S===""||se.professionalName.toLowerCase().includes(S.toLowerCase())||se.serviceTitle.toLowerCase().includes(S.toLowerCase())||se.message.toLowerCase().includes(S.toLowerCase()),G=V==="all"?se.status!=="rejected":se.status===V;return xe&&G}),Te=d.reduce((se,Ae)=>(se[Ae.serviceRequestId]||(se[Ae.serviceRequestId]=[]),se[Ae.serviceRequestId].push(Ae),se),{});return h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jr,{className:"h-8 w-8 animate-spin text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando serviços..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(or,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Gn,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Meus Serviços"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{href:"/agenda",children:e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-yellow-600 transition-colors",children:[e.jsx(pr,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Agenda"})]})}),e.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg text-sm font-medium hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(qh,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Novo Pedido"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>{console.log("🔍 Clicou na aba Pedidos"),y("requests")},className:`py-4 px-1 border-b-2 font-medium text-sm ${v==="requests"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pedidos (",i.length,")"]}),e.jsxs("button",{onClick:()=>{console.log("🔍 Clicou na aba Propostas"),y("offers")},className:`py-4 px-1 border-b-2 font-medium text-sm ${v==="offers"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Propostas (",d.length,")"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[v==="offers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por profissional, serviço ou mensagem...",value:S,onChange:se=>$(se.target.value),className:"w-full pl-10 pr-4 py-2.5 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>K("all"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="all"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todas"}),e.jsx("button",{onClick:()=>K("pending"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="pending"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pendentes"}),e.jsx("button",{onClick:()=>K("accepted"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="accepted"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Aceitas"}),e.jsx("button",{onClick:()=>K("rejected"),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${V==="rejected"?"bg-red-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Rejeitadas"})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Er,{className:"h-5 w-5 text-orange-500"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"Propostas Recebidas"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white",children:ie.length})]})}),ie.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(Er,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Não há propostas no momento"}),e.jsx("p",{className:"text-gray-600",children:"Assim que profissionais enviarem propostas, elas aparecerão aqui."})]}):e.jsx("div",{className:"space-y-4",children:ie.map(se=>e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-md border border-gray-100 hover:shadow-lg hover:ring-1 hover:ring-orange-200 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 rounded-full flex items-center justify-center overflow-hidden shadow-md ring-2 ring-white",children:se.professionalProfileImage&&!me[se.id]?e.jsx("img",{src:se.professionalProfileImage.startsWith("http")?se.professionalProfileImage:`${ft()}${se.professionalProfileImage}`,alt:se.professionalName,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",sizes:"(max-width: 640px) 3rem, (max-width: 1024px) 3.5rem, 4rem",onError:()=>le(Ae=>({...Ae,[se.id]:!0}))}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:e.jsx(Gr,{className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8 text-white"})})}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-900 truncate",children:se.professionalName}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:se.professionalRating})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["(",se.professionalTotalReviews," ",se.professionalTotalReviews===1?"avaliação":"avaliações",")"]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-2 sm:mt-0",children:e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${se.status==="accepted"?"bg-green-100 text-green-800":se.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:se.status==="accepted"?"Aceita":se.status==="rejected"?"Rejeitada":"Pendente"})})]})})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Gn,{className:"h-4 w-4 text-blue-600"}),e.jsx("p",{className:"text-sm text-blue-800 font-semibold",children:"Serviço Solicitado"})]}),e.jsx("p",{className:"text-base text-blue-900 font-bold",children:Q(se.serviceTitle)}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-xs text-blue-700",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pr,{className:"h-3 w-3"}),new Date(se.createdAt).toLocaleDateString("pt-BR")]})})]}),(()=>{const Ae=i.find(Be=>Be.id===se.serviceRequestId);if(!Ae)return null;const xe=typeof Ae.budget=="number"?Ae.budget:parseFloat(Ae.budget??"0")||0,G=typeof se.price=="number"?se.price:parseFloat(se.price??"0")||0,Ve=G<=xe,et=Math.abs(xe-G);return e.jsxs("div",{className:"mb-4 p-4 rounded-lg border bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Comparação com orçamento"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Ve?"bg-green-100 text-green-700":"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-sm"}`,children:Ve?"Dentro do orçamento":"Acima do orçamento"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Orçamento do pedido"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["R$ ",xe.toFixed(2)]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Proposta do profissional"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["R$ ",G.toFixed(2)]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-gradient-to-r from-orange-50 to-yellow-50",children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Diferença"}),e.jsxs("p",{className:`text-sm font-semibold ${Ve?"text-green-700":"text-red-700"}`,children:[Ve?"-":"+"," R$ ",et.toFixed(2)]})]})]})]})})(),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Er,{className:"h-4 w-4 text-gray-600"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Proposta do Profissional"})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-4 border border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed italic",children:['"',se.message,'"']})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Vr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Preço"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold text-green-800 truncate",children:["R$ ",z(se.price,0).toFixed(2)]})]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(mr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Tempo estimado"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold text-blue-800 truncate",children:[se.estimatedTime," horas"]})]})]})})]}),se.status==="pending"&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>ve(se.id),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:[e.jsx(Ts,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Aceitar"}),e.jsx("span",{className:"sm:hidden",children:"Aceitar"})]}),e.jsxs(yx,{open:N===se.id,onOpenChange:Ae=>!Ae&&g(null),children:[e.jsx(bx,{asChild:!0,children:e.jsxs("button",{onClick:()=>g(se.id),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02]",children:[e.jsx(mo,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Rejeitar"}),e.jsx("span",{className:"sm:hidden",children:"Rejeitar"})]})}),e.jsxs(nu,{className:"bg-white border border-gray-200",children:[e.jsxs(au,{children:[e.jsxs(ou,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ep,{className:"h-5 w-5 text-red-500"})}),"Rejeitar Proposta"]}),e.jsx(lu,{asChild:!0,children:e.jsxs("div",{className:"text-left space-y-4",children:[e.jsxs("p",{children:["Tem certeza que deseja rejeitar a proposta de ",e.jsx("strong",{children:se.professionalName}),"?"]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center overflow-hidden",children:se.professionalProfileImage&&!me[se.id]?e.jsx("img",{src:se.professionalProfileImage.startsWith("http")?se.professionalProfileImage:`${ft()}${se.professionalProfileImage}`,alt:se.professionalName,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",sizes:"2.5rem",onError:()=>le(Ae=>({...Ae,[se.id]:!0}))}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:e.jsx(Gr,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:se.professionalName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Vr,{className:"h-4 w-4"}),"R$ ",z(se.price,0).toFixed(2)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mr,{className:"h-4 w-4"}),se.estimatedTime," horas"]})]})]})]})}),e.jsx("p",{className:"text-red-600 font-medium",children:"Esta ação não pode ser desfeita e o profissional será notificado."})]})})]}),e.jsxs(iu,{children:[e.jsx(du,{children:"Cancelar"}),e.jsx(cu,{onClick:()=>ae(se.id),className:"bg-red-500 hover:bg-red-600 text-white",children:"Sim, Rejeitar"})]})]})]}),e.jsxs("button",{onClick:()=>fe(se.professionalId,se.id),disabled:C===se.id,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2.5 sm:py-3 px-4 sm:px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[C===se.id?e.jsx(jr,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin"}):e.jsx(Er,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Conversar"}),e.jsx("span",{className:"sm:hidden",children:"Chat"})]})]}),se.status==="accepted"&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:se.serviceStatus==="awaiting_confirmation"?e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-4 border border-orange-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mr,{className:"h-5 w-5 text-orange-600"}),e.jsx("p",{className:"text-sm font-semibold text-orange-800",children:"Serviço Concluído - Aguardando Confirmação"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"O profissional marcou o serviço como concluído. Confirme se tudo está correto para liberar o pagamento."})]}),e.jsxs("button",{onClick:()=>E(se.serviceRequestId),disabled:T===se.serviceRequestId,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[T===se.serviceRequestId?e.jsx(jr,{className:"h-4 w-4 animate-spin"}):e.jsx($u,{className:"h-4 w-4"}),e.jsx("span",{children:"Confirmar Conclusão do Serviço"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Confirme para liberar o pagamento ao profissional"})]}):e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($u,{className:"h-5 w-5 text-green-600"}),e.jsx("p",{className:"text-sm font-semibold text-green-800",children:"Proposta Aceita"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"O profissional foi contratado e está realizando o serviço. O botão de confirmação aparecerá quando o profissional concluir o trabalho."})]})})]},se.id))})]}),v==="requests"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gn,{className:"h-5 w-5 text-orange-500"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"Meus Pedidos"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white",children:i.length})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Gn,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Er,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Propostas Recebidas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(Ts,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(se=>se.status==="open").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500",children:e.jsx(mr,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Em Andamento"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(se=>se.status==="in_progress").length})]})]})})]}),i.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx(Gn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido criado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Crie seu primeiro pedido de serviço e receba propostas de profissionais qualificados."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(Gs,{href:"/servico",children:e.jsx("button",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-lg font-medium hover:from-yellow-600 hover:to-orange-600 transition-all duration-200",children:"Criar Pedido"})}),e.jsx(Gs,{href:"/my-service-requests",children:e.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:"Ver Todos os Pedidos"})})]})]}):e.jsx("div",{className:"space-y-4",children:i.map(se=>{const Ae=Te[se.id]||[];return Ae.filter(xe=>xe.status==="pending"),Ae.filter(xe=>xe.status==="accepted"),e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-5 shadow-md border border-gray-100 hover:shadow-lg hover:ring-1 hover:ring-orange-200 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(Gn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg text-gray-900 mb-1 line-clamp-2",children:se.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:Q(se.category)})]})]}),e.jsxs("div",{className:"flex flex-row gap-2 items-center sm:items-end",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${se.status==="completed"?"bg-green-100 text-green-800":se.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:se.status==="completed"?"Concluído":se.status==="in_progress"?"Em Andamento":"Aberto"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W(se.urgency)}`,children:Z(se.urgency)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Descrição do serviço"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed line-clamp-3",children:se.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ys,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Localização"}),e.jsx("p",{className:"text-sm font-medium text-blue-800 truncate",children:(()=>{const xe=se.location??se.address??"",G=typeof xe=="string"?xe:String(xe??"");return G.trim()!==""?G:"Não informado"})()})]})]})}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Vr,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Orçamento"}),e.jsxs("p",{className:"text-sm font-medium text-green-800 truncate",children:["R$ ",(()=>{const xe=typeof se.budget=="number"?se.budget:parseFloat(se.budget??"0");return isNaN(xe)?"0,00":xe.toFixed(2)})()]})]})]})}),e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(pr,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-purple-700 mb-1",children:"Criado em"}),e.jsx("p",{className:"text-sm font-medium text-purple-800 truncate",children:new Date(se.createdAt).toLocaleDateString("pt-BR")})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[se.responseCount>0&&e.jsxs("button",{onClick:()=>y("offers"),className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:["Ver Propostas (",se.responseCount,")"]}),e.jsx(Gs,{href:"/my-service-requests",children:e.jsx("button",{className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Ver Detalhes"})}),e.jsx(Gs,{href:"/servico",children:e.jsx("button",{className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg text-sm font-medium hover:from-green-600 hover:to-green-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Editar"})}),e.jsx("button",{onClick:()=>re(se.id),className:"flex-1 sm:flex-none px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg text-sm font-medium hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Excluir"})]})]})]},se.id)})})]}),v!=="offers"&&v!=="requests"&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Selecione uma aba para continuar"})})]}),e.jsx(HN,{isOpen:X,onClose:J,serviceRequestId:je||0,onRatingSubmitted:Ne})]})}function UN(){const[s,t]=_r(),{user:r}=Yr(),{toast:a}=qs(),[i,l]=P.useState([]),[d,u]=P.useState(!0);P.useEffect(()=>{r?.id&&h()},[r]);const h=async()=>{try{u(!0);const C=localStorage.getItem("token"),j=await fetch(`${ft()}/api/service-requests/client`,{headers:{Authorization:`Bearer ${C}`}});if(j.ok){const T=await j.json();l(T),console.log("✅ Pedidos carregados:",T.length)}else console.error("❌ Erro ao buscar pedidos - Status:",j.status)}catch(C){console.error("❌ Erro ao buscar pedidos:",C)}finally{u(!1)}},p=C=>{switch(C){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=C=>{switch(C){case"high":return"Alta";case"medium":return"Média";case"low":return"Baixa";default:return C}},y=C=>{switch(C){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}},N=C=>{switch(C){case"completed":return"Concluído";case"in_progress":return"Em Andamento";case"cancelled":return"Cancelado";case"open":return"Aberto";default:return C}},g=C=>({acompanhante_hospitalar:"Acompanhante Hospitalar",cuidador_idosos:"Cuidador de Idosos",enfermagem_domiciliar:"Enfermagem Domiciliar",fisioterapia:"Fisioterapia",nutricao:"Nutrição",psicologia:"Psicologia",terapia_ocupacional:"Terapia Ocupacional",servicos_gerais:"Serviços Gerais"})[C]||C.replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase());return d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jr,{className:"h-8 w-8 animate-spin text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando seus pedidos..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/services"),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(or,{className:"h-5 w-5 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Gn,{className:"h-5 w-5 text-white"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Meus Pedidos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{href:"/services",children:e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(Er,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Propostas"})]})}),e.jsxs("button",{onClick:()=>{const C=!!(r?.email&&/.+@.+\..+/.test(r.email.trim())),j=(r?.phone||"").replace(/\D/g,""),T=j.length===11&&j[0]!=="0"&&j[1]!=="0"&&j[2]==="9",A=K=>{const me=K.replace(/\D/g,"");if(me.length!==11||/^(\d)\1{10}$/.test(me))return!1;const le=X=>{let ee=0;for(let R=0;R<X;R++)ee+=parseInt(me[R],10)*(X+1-R);const je=ee*10%11;return je===10?0:je};return le(9)===parseInt(me[9],10)&&le(10)===parseInt(me[10],10)},S=(typeof window<"u"?localStorage.getItem("client_cpf"):"")||"",$=A(S),V=[C,T,$].filter(Boolean).length;if(V!==3){a({title:"Verificação em andamento",description:`Conclua seu cadastro (${V}/3): Email, Telefone e CPF para criar um serviço.`}),t("/profile");return}t("/servico")},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(qh,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Novo Pedido"})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Gn,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Er,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Propostas Recebidas"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.reduce((C,j)=>C+(Number(j.responseCount)||0),0)})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(mr,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos Ativos"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:i.filter(C=>C.status==="open"||C.status==="in_progress").length})]})]})})]}),e.jsx("div",{className:"space-y-6",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido criado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Crie seu primeiro pedido de serviço e receba propostas de profissionais qualificados."}),e.jsx(Gs,{href:"/servico",children:e.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:"Criar Primeiro Pedido"})})]}):i.map(C=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:e.jsx(Gn,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2",children:C.title}),e.jsx("p",{className:"text-sm text-blue-600 font-semibold mb-3 bg-blue-50 px-3 py-1 rounded-full inline-block",children:g(C.category)})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${y(C.status)}`,children:N(C.status)}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${p(C.urgency)}`,children:["Urgência ",v(C.urgency)]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Descrição do Serviço"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:C.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(ys,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"Localização"}),e.jsx("p",{className:"text-sm font-semibold text-blue-800 truncate",children:C.location})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Vr,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-green-700 font-medium mb-1",children:"Orçamento Máximo"}),e.jsxs("p",{className:"text-sm font-semibold text-green-800",children:["R$ ",(()=>{const j=typeof C.budget=="number"?C.budget:parseFloat(C.budget??"0");return isNaN(j)?"0,00":j.toFixed(2)})()]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx(pr,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-purple-700 font-medium mb-1",children:"Criado em"}),e.jsx("p",{className:"text-sm font-semibold text-purple-800",children:new Date(C.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Er,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Propostas Recebidas"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-orange-600",children:C.responseCount}),e.jsx("span",{className:"text-sm text-gray-600",children:C.responseCount===1?"proposta recebida":"propostas recebidas"})]}),C.responseCount>0&&e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-semibold",children:"Aguardando análise"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[C.responseCount>0&&e.jsx(Gs,{href:"/services",className:"flex-1",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(oo,{className:"h-4 w-4"}),"Ver Propostas (",C.responseCount,")"]})}),e.jsx(Gs,{href:"/servico",className:"flex-1",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(cp,{className:"h-4 w-4"}),"Editar Pedido"]})}),C.status==="open"&&e.jsxs("button",{className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:[e.jsx(tl,{className:"h-4 w-4"}),"Cancelar"]})]})]},C.id))})]})]})}function WN({onLogin:s}){const[t,r]=P.useState(!0),[a,i]=P.useState(!1),[l,d]=P.useState("client"),[u,h]=P.useState(""),[p,v]=P.useState(""),[y,N]=P.useState(""),[g,C]=P.useState(""),[j,T]=P.useState(""),[A,S]=P.useState(!1),{toast:$}=qs(),[V,K]=P.useState(""),[me,le]=P.useState(""),[X,ee]=P.useState(""),[je,R]=P.useState(""),[z,q]=P.useState(""),B=oe=>{const ie=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return oe?ie.test(oe)?oe.length>100?"Email muito longo":"":"Digite um email válido":"Email é obrigatório"},ge=oe=>{const ie=/^\(\d{2}\) \d{4,5}-\d{4}$/;return oe?ie.test(oe)?"":"Digite um telefone válido: (11) 99999-9999":"Telefone é obrigatório"},ue=oe=>oe?oe.length<8?"Senha deve ter pelo menos 8 caracteres":/(?=.*[a-z])/.test(oe)?/(?=.*[A-Z])/.test(oe)?/(?=.*\d)/.test(oe)?/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(oe)?oe.length>50?"Senha muito longa":"":"Senha deve conter pelo menos um caractere especial":"Senha deve conter pelo menos um número":"Senha deve conter pelo menos uma letra maiúscula":"Senha deve conter pelo menos uma letra minúscula":"Senha é obrigatória",be=oe=>oe?oe.length<2?"Nome deve ter pelo menos 2 caracteres":oe.length>100?"Nome muito longo":/^[a-zA-ZÀ-ÿ\s]+$/.test(oe)?"":"Nome deve conter apenas letras":"Nome é obrigatório",ne=oe=>oe?oe!==p?"As senhas não coincidem":"":"Confirme sua senha",ve=oe=>{if(!oe)return{strength:0,color:"bg-gray-200",text:""};let ie=0;return oe.length>=8&&ie++,/(?=.*[a-z])/.test(oe)&&ie++,/(?=.*[A-Z])/.test(oe)&&ie++,/(?=.*\d)/.test(oe)&&ie++,/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(oe)&&ie++,ie<=1?{strength:ie,color:"bg-red-500",text:"Muito fraca"}:ie<=2?{strength:ie,color:"bg-orange-500",text:"Fraca"}:ie<=3?{strength:ie,color:"bg-yellow-500",text:"Média"}:ie<=4?{strength:ie,color:"bg-blue-500",text:"Forte"}:{strength:ie,color:"bg-green-500",text:"Muito forte"}},ae=oe=>{const Te=oe.replace(/\D/g,"").substring(0,11);return Te.length<=2?Te:Te.length<=7?`(${Te.substring(0,2)}) ${Te.substring(2)}`:`(${Te.substring(0,2)}) ${Te.substring(2,7)}-${Te.substring(7)}`},fe=oe=>{const ie=ae(oe.target.value);T(ie),t||le(ge(ie))},E=oe=>{const ie=oe.target.value;h(ie),K(B(ie))},W=oe=>{const ie=oe.target.value;v(ie),ee(t?ie?"":"Senha é obrigatória":ue(ie)),y&&R(ne(y))},Z=oe=>{const ie=oe.target.value;N(ie),R(ne(ie))},Q=oe=>{const ie=oe.target.value;C(ie),t||q(be(ie))},re=async oe=>{console.log("🔐 Iniciando login social:",oe),S(!0);try{const Te=`http://localhost:8080/api/auth/${oe}`;console.log("🔐 URL de autenticação:",Te),console.log("🔐 Redirecionando diretamente..."),window.location.href=Te}catch(ie){console.error("❌ Erro no login social:",ie),S(!1),$({title:"Erro no login social",description:ie.message,variant:"destructive"})}},de=()=>{K(""),le(""),ee(""),R(""),q("")},Ne=()=>{r(!t),de(),t||ee("")},J=async oe=>{oe.preventDefault();const ie=B(u),Te=p?"":"Senha é obrigatória";if(K(ie),ee(Te),t){if(ie||Te){$({title:"Erro de validação",description:"Por favor, preencha todos os campos",variant:"destructive"});return}}else{const se=be(g),Ae=ge(j),xe=ne(y),G=ue(p);if(q(se),le(Ae),R(xe),ee(G),ie||G||se||Ae||xe){$({title:"Erro de validação",description:"Por favor, corrija os campos destacados",variant:"destructive"});return}}S(!0);try{if(t){const se=await Fl("POST","/api/auth/login",{email:u,password:p,userType:l}),Ae=await se.json();if(se.ok)localStorage.setItem("token",Ae.token),localStorage.setItem("user",JSON.stringify(Ae.user)),$({title:"Login realizado com sucesso!",description:`Bem-vindo(a), ${Ae.user.name}`}),s(Ae.user.userType);else throw new Error(Ae.message||"Erro no login")}else{const se=await Fl("POST","/api/auth/register",{username:u,email:u,password:p,name:g,userType:l,phone:j}),Ae=await se.json();if(se.ok)localStorage.setItem("token",Ae.token),localStorage.setItem("user",JSON.stringify(Ae.user)),$({title:"Conta criada com sucesso!",description:`Bem-vindo(a), ${Ae.user.name}`}),s(Ae.user.userType);else throw new Error(Ae.message||"Erro no cadastro")}}catch(se){$({title:t?"Erro no login":"Erro no cadastro",description:se.message,variant:"destructive"})}finally{S(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-8 xl:p-12",children:e.jsxs("div",{className:"max-w-md w-full text-center lg:text-left space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 sm:gap-3",children:[e.jsx(Wl,{size:40,className:"sm:w-12 sm:h-12"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"LifeBee"}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400 text-xs sm:text-sm font-medium",children:"Cuidados Profissionais"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white leading-tight",children:"Conectamos você com profissionais de saúde qualificados"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base lg:text-lg",children:"Acompanhantes hospitalares prontos para cuidar de você"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center lg:justify-start",children:[e.jsx(Bs,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 text-xs sm:text-sm",children:"🏃‍♂️ Fisioterapia"}),e.jsx(Bs,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 text-xs sm:text-sm",children:"💉 Enfermagem"}),e.jsx(Bs,{variant:"secondary",className:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200 text-xs sm:text-sm",children:"🏥 Acompanhamento"})]})]})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-6 lg:p-8 xl:p-12",children:e.jsxs(ot,{className:"w-full max-w-md shadow-xl border-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:[e.jsxs(ns,{className:"space-y-3 sm:space-y-4 pb-4 sm:pb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t?"Entrar na conta":"Criar conta"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs sm:text-sm",children:t?"Acesse sua conta para continuar":"Junte-se à nossa comunidade de cuidados"})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-1 flex w-full",children:[e.jsx(Oe,{variant:"ghost",className:`flex-1 rounded-lg transition-all duration-200 text-xs sm:text-sm lg:text-base py-2 sm:py-3 lg:py-4 px-2 sm:px-4 lg:px-6 ${t?"bg-white shadow-sm text-gray-900 dark:bg-gray-600 dark:text-white":"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"}`,onClick:()=>{r(!0),de()},children:"Entrar"}),e.jsx(Oe,{variant:"ghost",className:`flex-1 rounded-lg transition-all duration-200 text-xs sm:text-sm lg:text-base py-2 sm:py-3 lg:py-4 px-2 sm:px-4 lg:px-6 ${t?"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white":"bg-white shadow-sm text-gray-900 dark:bg-gray-600 dark:text-white"}`,onClick:()=>{r(!1),de()},children:"Cadastrar"})]})]}),e.jsxs(lt,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("form",{onSubmit:J,className:"space-y-3 sm:space-y-4",children:[!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Você é:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 lg:gap-4",children:[e.jsxs(Oe,{type:"button",variant:l==="client"?"default":"outline",className:`h-10 sm:h-12 lg:h-14 text-xs sm:text-sm lg:text-base px-2 sm:px-4 lg:px-6 ${l==="client"?"bg-yellow-500 hover:bg-yellow-600":"border-gray-300"}`,onClick:()=>d("client"),children:[e.jsx(Gr,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 mr-1 sm:mr-2"}),"Cliente"]}),e.jsxs(Oe,{type:"button",variant:l==="provider"?"default":"outline",className:`h-10 sm:h-12 lg:h-14 text-xs sm:text-sm lg:text-base px-2 sm:px-4 lg:px-6 ${l==="provider"?"bg-yellow-500 hover:bg-yellow-600":"border-gray-300"}`,onClick:()=>d("provider"),children:[e.jsx(E1,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 mr-1 sm:mr-2"}),"Profissional"]})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome completo"}),e.jsx(xt,{type:"text",placeholder:"Seu nome completo",value:g,onChange:Q,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${z?"border-red-500 focus:border-red-500":""}`,autoComplete:"name",required:!t}),z&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:z})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefone"}),e.jsx(xt,{type:"tel",placeholder:"(11) 99999-9999",value:j,onChange:fe,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${me?"border-red-500 focus:border-red-500":""}`,autoComplete:"tel",required:!t}),me&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:me})]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx(xt,{type:"email",placeholder:"seu@email.com",value:u,onChange:E,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${V?"border-red-500 focus:border-red-500":""}`,autoComplete:"email",required:!0}),V&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:V})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{type:a?"text":"password",placeholder:"Sua senha",value:p,onChange:W,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 pr-10 ${X?"border-red-500 focus:border-red-500":""}`,autoComplete:t?"current-password":"new-password",required:!0}),e.jsx(Oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-10 sm:h-12 w-10 sm:w-12 p-0 hover:bg-transparent",onClick:()=>i(!a),children:a?e.jsx(bc,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}):e.jsx(oo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]}),X&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:X}),!t&&p&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(oe=>{const ie=ve(p);return e.jsx("div",{className:`h-1 flex-1 rounded-full transition-all duration-300 ${oe<=ie.strength?ie.color:"bg-gray-200"}`},oe)})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Força da senha: ",ve(p).text]})]})]}),!t&&e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar senha"}),e.jsx(xt,{type:"password",placeholder:"Confirme sua senha",value:y,onChange:Z,className:`h-10 sm:h-12 text-sm sm:text-base px-3 sm:px-4 ${je?"border-red-500 focus:border-red-500":""}`,autoComplete:"new-password",required:!t}),je&&e.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:je})]}),e.jsx(Oe,{type:"submit",disabled:A,className:"w-full h-10 sm:h-12 lg:h-14 bg-yellow-500 hover:bg-yellow-600 text-white font-medium text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8",children:A?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),t?"Entrando...":"Cadastrando..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t?"Entrar":"Criar conta"}),e.jsx(tp,{className:"h-4 w-4"})]})})]}),e.jsxs("div",{className:"text-center space-y-2 sm:space-y-3",children:[e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[t?"Não tem uma conta?":"Já tem uma conta?",e.jsx("button",{type:"button",className:"ml-1 text-yellow-600 hover:text-yellow-700 font-medium",onClick:Ne,children:t?"Cadastre-se":"Faça login"})]}),t&&e.jsx("button",{type:"button",className:"text-xs sm:text-sm text-yellow-600 hover:text-yellow-700",children:"Esqueceu sua senha?"})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:e.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-500 dark:text-gray-400",children:"Ou continue com"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs(Oe,{type:"button",variant:"outline",className:"h-10 sm:h-12 flex items-center justify-center gap-2 text-xs sm:text-sm border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),console.log("🔘 Botão Google clicado!"),console.log("🔘 Estado isLoading:",A),console.log("🔘 Evento:",oe),console.log("🔘 Target:",oe.target),console.log("🔘 Current Target:",oe.currentTarget),A?console.log("❌ Botão desabilitado devido ao estado de loading"):re("google")},disabled:A,children:[e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),e.jsxs(Oe,{type:"button",variant:"outline",className:"h-10 sm:h-12 flex items-center justify-center gap-2 text-xs sm:text-sm border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",onClick:()=>re("apple"),disabled:A,children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Apple"]})]})]})]})]})})]})}function $f(){const[,s]=_r();return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(ot,{className:"w-full max-w-md mx-4",children:e.jsxs(lt,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(fo,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Página não encontrada"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600 mb-6",children:"A página que você está procurando não existe ou foi movida."}),e.jsxs(Oe,{onClick:()=>s("/"),className:"w-full",children:[e.jsx(or,{className:"h-4 w-4 mr-2"}),"Voltar para Home"]})]})})})}function VN(){const{user:s}=Yr(),{toast:t}=qs(),[r,a]=P.useState([]),[i,l]=P.useState(!0),[d,u]=P.useState("all");P.useEffect(()=>{s?.userType==="provider"&&h()},[s]);const h=async()=>{l(!0);try{const g=await fetch(`${ft()}/api/appointments/provider`,{credentials:"include"});if(g.ok){const C=await g.json();a(C)}else a([])}catch{a([])}finally{l(!1)}},p=g=>{switch(g){case"agendado":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"confirmado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"em_andamento":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"concluido":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},v=g=>{switch(g){case"confirmado":return e.jsx(Ts,{className:"h-3 w-3"});case"cancelado":return e.jsx(mo,{className:"h-3 w-3"});case"em_andamento":return e.jsx(Xm,{className:"h-3 w-3"});case"concluido":return e.jsx(Ts,{className:"h-3 w-3"});default:return e.jsx(fo,{className:"h-3 w-3"})}},y=g=>{switch(g){case"agendado":return"Agendado";case"confirmado":return"Confirmado";case"em_andamento":return"Em Andamento";case"concluido":return"Concluído";case"cancelado":return"Cancelado";default:return g}},N=d==="all"?r:r.filter(g=>g.status===d);return e.jsx(ol,{children:e.jsxs("div",{className:"max-w-3xl mx-auto py-4 sm:py-6 px-2 sm:px-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),children:e.jsx(or,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Agenda do Profissional"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx(Oe,{variant:d==="all"?"default":"outline",size:"sm",onClick:()=>u("all"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="all"?"bg-yellow-500 hover:bg-yellow-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Todos"}),e.jsx(Oe,{variant:d==="agendado"?"default":"outline",size:"sm",onClick:()=>u("agendado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="agendado"?"bg-blue-500 hover:bg-blue-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Agendados"}),e.jsx(Oe,{variant:d==="confirmado"?"default":"outline",size:"sm",onClick:()=>u("confirmado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="confirmado"?"bg-green-500 hover:bg-green-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Confirmados"}),e.jsx(Oe,{variant:d==="em_andamento"?"default":"outline",size:"sm",onClick:()=>u("em_andamento"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="em_andamento"?"bg-orange-500 hover:bg-orange-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Em andamento"}),e.jsx(Oe,{variant:d==="concluido"?"default":"outline",size:"sm",onClick:()=>u("concluido"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="concluido"?"bg-gray-500 hover:bg-gray-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Concluídos"}),e.jsx(Oe,{variant:d==="cancelado"?"default":"outline",size:"sm",onClick:()=>u("cancelado"),className:`text-xs sm:text-sm px-3 py-2 h-auto font-medium transition-all duration-200 ${d==="cancelado"?"bg-red-500 hover:bg-red-600 text-white shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Cancelados"})]}),i?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Carregando agendamentos..."}):N.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Nenhum agendamento encontrado."}):e.jsx("div",{className:"space-y-4",children:N.map(g=>e.jsxs(ot,{children:[e.jsxs(ns,{className:"flex flex-col sm:flex-row sm:items-center gap-3 p-4",children:[e.jsx(Gr,{className:"h-6 w-6 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(hs,{className:"text-base sm:text-lg font-semibold truncate",children:g.clientName}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[kl(new Date(g.date),"dd 'de' MMMM 'de' yyyy",{locale:Xd})," às ",g.time]})]}),e.jsxs(Bs,{className:`${p(g.status)} flex-shrink-0`,children:[v(g.status),e.jsx("span",{className:"ml-1 hidden sm:inline",children:y(g.status)}),e.jsx("span",{className:"ml-1 sm:hidden",children:y(g.status).charAt(0)})]})]}),e.jsx(lt,{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Tipo: ",e.jsx("span",{className:"font-medium",children:g.type==="presencial"?"Presencial":"Online"})]}),g.location&&e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Local: ",e.jsx("span",{className:"font-medium truncate block",children:g.location})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Duração: ",e.jsxs("span",{className:"font-medium",children:[g.duration," min"]})]}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["Valor: ",e.jsxs("span",{className:"font-medium",children:["R$ ",g.price]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.canConfirm&&e.jsx(Oe,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Agendamento confirmado!"}),children:"Confirmar"}),g.canStart&&e.jsx(Oe,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Atendimento iniciado!"}),children:"Iniciar"}),g.canFinish&&e.jsx(Oe,{size:"sm",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Atendimento concluído!"}),children:"Concluir"}),g.canCancel&&e.jsx(Oe,{size:"sm",variant:"destructive",className:"flex-1 sm:flex-none",onClick:()=>t({title:"Agendamento cancelado!"}),children:"Cancelar"})]})]})})]},g.id))})]})})}function Uf({params:s}){const{user:t}=Yr(),{toast:r}=qs(),[a,i]=P.useState(""),[l,d]=P.useState(""),u=P.useRef(null),[h,p]=P.useState([]),[v,y]=P.useState([]),[N,g]=P.useState(!0),[,C]=_r(),[j,T]=Lp("/messages/:conversationId"),A=s?.conversationId||null,S=async()=>{try{g(!0);const q=localStorage.getItem("token");if(!q){r({title:"Erro de autenticação",description:"Faça login para acessar as mensagens",variant:"destructive"});return}const B=await fetch(`${ft()}/api/messages`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`}});if(B.ok){const ge=await B.json();y(ge)}else B.status===401?r({title:"Sessão expirada",description:"Faça login novamente",variant:"destructive"}):r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}catch{r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}finally{g(!1)}},$=async q=>{try{const B=localStorage.getItem("token");if(!B)return;const ge=await fetch(`${ft()}/api/messages/${q}`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}});if(ge.ok){const ue=await ge.json();p(ue)}else ge.status===404&&(r({title:"Conversa não encontrada",description:"Esta conversa não existe ou você não tem acesso.",variant:"destructive"}),C("/messages"))}catch{}};P.useEffect(()=>{S()},[]),P.useEffect(()=>{A&&$(A)},[A]);const V=v.filter(q=>q.professionalName.toLowerCase().includes(l.toLowerCase())||q.specialization.toLowerCase().includes(l.toLowerCase())),K=v.find(q=>String(q.id)===String(A)),me=()=>{u.current?.scrollIntoView({behavior:"smooth"})};P.useEffect(()=>{me()},[h]);const le=q=>{const B=new Date,ge=new Date(q),ue=B.getTime()-ge.getTime(),be=Math.floor(ue/(1e3*60)),ne=Math.floor(ue/(1e3*60*60)),ve=Math.floor(ue/(1e3*60*60*24));return be<1?"agora":be<60?`${be}m`:ne<24?`${ne}h`:ve<7?`${ve}d`:ge.toLocaleDateString("pt-BR")},X=q=>new Date(q).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),ee=async()=>{if(!a.trim()||!K)return;const q=localStorage.getItem("token");if(!q){r({title:"Erro de autenticação",description:"Faça login para enviar mensagens",variant:"destructive"});return}try{const B={id:Date.now(),senderId:t?.id||0,content:a,timestamp:new Date,isRead:!1,type:"text"};p(ue=>[...ue,B]),i(""),(await fetch(`${ft()}/api/messages`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({recipientId:K.professionalId,conversationId:Number(A),content:a,type:"text"})})).ok?A&&$(A):(p(ue=>ue.filter(be=>be.id!==B.id)),r({title:"Erro",description:"Não foi possível enviar a mensagem",variant:"destructive"}))}catch{r({title:"Erro de conexão",description:"Não foi possível enviar a mensagem",variant:"destructive"})}},je=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),ee())},R=q=>{C(`/messages/${q}`)},z=async q=>{try{const B=localStorage.getItem("token");if(!B)return;(await fetch(`${ft()}/api/messages/conversation/${q}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}})).ok?(r({title:"Conversa excluída",description:"A conversa foi removida com sucesso."}),S()):r({title:"Erro",description:"Não foi possível excluir a conversa",variant:"destructive"})}catch{r({title:"Erro",description:"Erro ao excluir conversa",variant:"destructive"})}};return A?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>C("/messages"),className:"lg:hidden",children:e.jsx(or,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",className:"lg:hidden p-2",onClick:()=>C("/messages"),children:e.jsx(or,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs(Ai,{className:"w-10 h-10",children:[e.jsx(Ti,{src:K?.professionalAvatar,alt:K?.professionalName}),e.jsx(Ei,{className:"bg-yellow-500 text-white",children:K?.professionalName.split(" ").map(q=>q[0]).join("")})]}),K?.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:K?.professionalName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:K?.specialization}),K?.isOnline&&e.jsx("span",{className:"text-xs text-green-600",children:"online"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(pr,{className:"h-4 w-4"})}),e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(ip,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{maxHeight:"60vh"},children:[h.map(q=>{const B=q.senderId===t?.id;return e.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md ${B?"order-2":""}`,children:[!B&&e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:K?.professionalName})}),e.jsx("div",{className:`rounded-2xl px-4 py-2 ${B?"bg-yellow-500 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:q.content})}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${B?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:X(q.timestamp)}),B&&e.jsx("div",{className:"text-gray-500",children:q.isRead?e.jsx(sp,{className:"h-3 w-3 text-blue-500"}):e.jsx(Ul,{className:"h-3 w-3"})})]})]})},q.id)}),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(lp,{className:"h-4 w-4"})}),e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(vo,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(xt,{placeholder:"Digite sua mensagem...",value:a,onChange:q=>i(q.target.value),onKeyPress:je,className:"pr-10"}),e.jsx(Oe,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2",children:e.jsx(hp,{className:"h-4 w-4"})})]}),e.jsx(Oe,{onClick:ee,disabled:!a.trim(),className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e.jsx(Ia,{className:"h-4 w-4"})})]})})]}),e.jsx(Oa,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})})}),e.jsxs("div",{className:"w-full lg:w-96 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(xt,{placeholder:"Buscar conversas...",value:l,onChange:q=>d(q.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Carregando conversas..."})]})}):V.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Er,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma conversa encontrada"}),e.jsx("p",{className:"text-gray-500",children:"Você ainda não tem conversas ativas"})]})}):V.map(q=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",onClick:()=>R(q.id),children:[e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Ai,{className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx(Ti,{src:q.professionalAvatar,alt:q.professionalName}),e.jsx(Ei,{className:"bg-yellow-500 text-white text-xs sm:text-sm",children:q.professionalName.split(" ").map(B=>B[0]).join("")})]}),q.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm sm:text-base",children:q.professionalName}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:le(q.lastMessageTime)})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mb-1 flex-wrap",children:[e.jsx(Bs,{variant:"secondary",className:"text-xs px-2 py-0 bg-yellow-100 text-yellow-800",children:q.specialization}),q.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600",children:q.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex-1 min-w-0",children:q.lastMessage}),q.unreadCount>0&&e.jsx(Bs,{className:"bg-yellow-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center flex-shrink-0",children:q.unreadCount})]}),q.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ys,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:q.location})]})]})]}),e.jsx("button",{className:"ml-1 sm:ml-2 p-1.5 sm:p-2 rounded-full hover:bg-red-100 text-red-600 flex-shrink-0",title:"Excluir conversa",onClick:B=>{B.stopPropagation(),z(q.id)},children:e.jsx(tl,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]},q.id))})]}),e.jsx(Oa,{})]})}function xc({params:s}){const{user:t}=Yr(),{toast:r}=qs(),[a,i]=P.useState(""),[l,d]=P.useState(""),u=P.useRef(null),[h,p]=P.useState([]),[v,y]=P.useState([]),[N,g]=P.useState(!0),[,C]=_r(),[j,T]=Lp("/messages-provider/:conversationId"),A=s?.conversationId||null,S=async()=>{try{console.log("🔄 fetchConversations - Iniciando busca de conversas..."),g(!0);const q=localStorage.getItem("token");if(!q){console.log("❌ Token não encontrado"),r({title:"Erro de autenticação",description:"Faça login para acessar as mensagens",variant:"destructive"});return}const B=await fetch(`${ft()}/api/messages`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`}});if(B.ok){const ge=await B.json();console.log("📋 Dados recebidos do backend:",ge),y(ge),console.log("✅ Conversas atualizadas no estado:",ge.length,"conversas")}else B.status===401?(console.log("❌ Erro 401 - Sessão expirada"),r({title:"Sessão expirada",description:"Faça login novamente",variant:"destructive"})):(console.log("❌ Erro na resposta:",B.status),r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"}))}catch(q){console.log("❌ Erro na busca de conversas:",q),r({title:"Erro de conexão",description:"Não foi possível carregar as conversas",variant:"destructive"})}finally{g(!1),console.log("🔄 fetchConversations - Finalizado")}},$=async q=>{try{const B=localStorage.getItem("token");if(!B)return;const ge=await fetch(`${ft()}/api/messages/${q}`,{credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}});if(ge.ok){const ue=await ge.json();p(ue)}}catch{}};P.useEffect(()=>{S()},[]),P.useEffect(()=>{A&&$(A)},[A]),P.useEffect(()=>{console.log("Mensagens carregadas do backend:",h)},[h]);const V=v.filter(q=>q.clientName?.toLowerCase().includes(l.toLowerCase())),K=v.find(q=>String(q.id)===String(A)),me=()=>{u.current?.scrollIntoView({behavior:"smooth"})};P.useEffect(()=>{me()},[h]);const le=q=>{const B=new Date,ge=new Date(q),ue=B.getTime()-ge.getTime(),be=Math.floor(ue/(1e3*60)),ne=Math.floor(ue/(1e3*60*60)),ve=Math.floor(ue/(1e3*60*60*24));return be<1?"agora":be<60?`${be}m`:ne<24?`${ne}h`:ve<7?`${ve}d`:ge.toLocaleDateString("pt-BR")},X=q=>new Date(q).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),ee=async()=>{if(!a.trim()||!K)return;const q=localStorage.getItem("token");if(!q){r({title:"Erro de autenticação",description:"Faça login para enviar mensagens",variant:"destructive"});return}try{const B={id:Date.now(),senderId:t?.id||0,content:a,timestamp:new Date,isRead:!1,type:"text"};p(ue=>[...ue,B]),i(""),(await fetch(`${ft()}/api/messages`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({recipientId:K.clientId,conversationId:Number(A),content:a,type:"text"})})).ok?A&&$(A):(p(ue=>ue.filter(be=>be.id!==B.id)),r({title:"Erro",description:"Não foi possível enviar a mensagem",variant:"destructive"}))}catch{r({title:"Erro de conexão",description:"Não foi possível enviar a mensagem",variant:"destructive"})}},je=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),ee())},R=q=>{C(`/messages-provider/${q}`)},z=async q=>{try{console.log("🗑️ Tentando excluir conversa:",q);const B=localStorage.getItem("token");if(!B)return;const ge=await fetch(`${ft()}/api/messages/conversation/${q}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}});ge.ok?(console.log("✅ Conversa excluída com sucesso, recarregando lista..."),r({title:"Conversa excluída",description:"A conversa foi removida com sucesso."}),await S(),console.log("✅ Lista de conversas recarregada")):(console.log("❌ Erro ao excluir conversa:",ge.status),r({title:"Erro",description:"Não foi possível excluir a conversa",variant:"destructive"}))}catch(B){console.log("❌ Erro ao excluir conversa:",B),r({title:"Erro",description:"Erro ao excluir conversa",variant:"destructive"})}};return A?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>C("/messages"),className:"lg:hidden",children:e.jsx(or,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})]})}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{variant:"ghost",size:"sm",className:"lg:hidden p-2",onClick:()=>C("/messages"),children:e.jsx(or,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs(Ai,{className:"w-10 h-10",children:[e.jsx(Ti,{src:K?.clientAvatar,alt:K?.clientName}),e.jsx(Ei,{className:"bg-yellow-500 text-white",children:K?.clientName?.split(" ").map(q=>q[0]).join("")})]}),K?.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:K?.clientName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:K?.specialization}),K?.isOnline&&e.jsx("span",{className:"text-xs text-green-600",children:"online"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(pr,{className:"h-4 w-4"})}),e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(ip,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{maxHeight:"60vh"},children:[h.map(q=>{const B=q.senderId===t?.id;return e.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md ${B?"order-2":""}`,children:[!B&&e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:K?.clientName})}),e.jsx("div",{className:`rounded-2xl px-4 py-2 ${B?"bg-yellow-500 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:q.content})}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${B?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:X(q.timestamp)}),B&&e.jsx("div",{className:"text-gray-500",children:q.isRead?e.jsx(sp,{className:"h-3 w-3 text-blue-500"}):e.jsx(Ul,{className:"h-3 w-3"})})]})]})},q.id)}),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(lp,{className:"h-4 w-4"})}),e.jsx(Oe,{variant:"ghost",size:"sm",children:e.jsx(vo,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(xt,{placeholder:"Digite sua mensagem...",value:a,onChange:q=>i(q.target.value),onKeyPress:je,className:"pr-10"}),e.jsx(Oe,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2",children:e.jsx(hp,{className:"h-4 w-4"})})]}),e.jsx(Oe,{onClick:ee,disabled:!a.trim(),className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e.jsx(Ia,{className:"h-4 w-4"})})]})})]}),e.jsx(th,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 shadow-sm",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mensagens"})})}),e.jsxs("div",{className:"w-full lg:w-96 bg-white border-r border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(xt,{placeholder:"Buscar conversas...",value:l,onChange:q=>d(q.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Carregando conversas..."})]})}):V.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Er,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma conversa encontrada"}),e.jsx("p",{className:"text-gray-500",children:"Você ainda não tem conversas ativas"})]})}):V.map(q=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",onClick:()=>R(q.id),children:[e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Ai,{className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx(Ti,{src:q.clientAvatar,alt:q.clientName}),e.jsx(Ei,{className:"bg-yellow-500 text-white text-xs sm:text-sm",children:q.clientName?.split(" ").map(B=>B[0]).join("")})]}),q.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm sm:text-base",children:q.clientName}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:le(q.lastMessageTime)})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mb-1 flex-wrap",children:[e.jsx(Bs,{variant:"secondary",className:"text-xs px-1.5 sm:px-2 py-0 bg-yellow-100 text-yellow-800",children:q.specialization}),q.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(cn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600",children:q.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate flex-1 min-w-0",children:q.lastMessage}),q.unreadCount>0&&e.jsx(Bs,{className:"bg-yellow-500 text-white text-xs min-w-[18px] sm:min-w-[20px] h-4 sm:h-5 flex items-center justify-center flex-shrink-0",children:q.unreadCount})]}),q.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ys,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:q.location})]})]})]}),e.jsx("button",{className:"ml-1 sm:ml-2 p-1.5 sm:p-2 rounded-full hover:bg-red-100 text-red-600 flex-shrink-0",title:"Excluir conversa",onClick:B=>{B.stopPropagation(),z(q.id)},children:e.jsx(tl,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]},q.id))})]}),e.jsx(th,{})]})}function ZN(){const{toast:s}=qs();return P.useEffect(()=>{console.log("🔄 AuthCallback iniciado"),console.log("🔄 URL atual:",window.location.href),console.log("🔄 Search params:",window.location.search);const t=new URLSearchParams(window.location.search),r=t.get("token"),a=t.get("userType"),i=t.get("error");if(console.log("🔄 Token:",r?"Presente":"Ausente"),console.log("🔄 UserType:",a),console.log("🔄 Error:",i),i){console.log("❌ Erro detectado:",i),s({title:"Erro na autenticação",description:i==="google_auth_failed"?"Falha no login com Google":"Falha no login com Apple",variant:"destructive"}),window.location.href="/login";return}if(r&&a){console.log("✅ Token e userType presentes, processando..."),localStorage.setItem("token",r),console.log("✅ Token salvo no localStorage");try{console.log("🔍 Decodificando token...");const l=JSON.parse(atob(r.split(".")[1]));console.log("🔍 Payload decodificado:",l);const d={id:l.id,email:l.email,userType:l.userType,name:l.name||"Usuário"};console.log("👤 Usuário processado:",d),localStorage.setItem("user",JSON.stringify(d)),console.log("✅ Usuário salvo no localStorage"),s({title:"Login realizado com sucesso!",description:`Bem-vindo(a), ${d.name}`});const u=a==="provider"?"/provider-dashboard":"/home";console.log("🔄 Redirecionando para:",u),window.location.href=u}catch(l){console.error("❌ Erro ao decodificar token:",l),s({title:"Erro na autenticação",description:"Token inválido",variant:"destructive"}),console.log("🔄 Redirecionando para /login devido a erro no token"),window.location.href="/login"}}else console.log("❌ Token ou userType ausentes"),s({title:"Erro na autenticação",description:"Dados de autenticação inválidos",variant:"destructive"}),console.log("🔄 Redirecionando para /login devido a dados inválidos"),window.location.href="/login"},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Wl,{size:48,className:"text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"LifeBee"}),e.jsx("p",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:"Cuidados Profissionais"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processando autenticação..."})]})]})})}function GN(){const{user:s,isLoading:t,isAuthenticated:r}=Yr();return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-yellow-500 border-t-transparent rounded-full"})}):r?s?.userType==="provider"?e.jsxs(Sd,{children:[e.jsx(ls,{path:"/",component:qf}),e.jsx(ls,{path:"/provider-dashboard",component:qf}),e.jsx(ls,{path:"/provider-registration",children:e.jsx(NN,{onComplete:()=>window.location.reload()})}),e.jsx(ls,{path:"/provider-orders",component:jN}),e.jsx(ls,{path:"/provider-proposals",component:SN}),e.jsx(ls,{path:"/service-offer/:id",component:kN}),e.jsx(ls,{path:"/messages/:conversationId",component:xc}),e.jsx(ls,{path:"/messages",component:xc}),e.jsx(ls,{path:"/messages-provider/:conversationId",component:xc}),e.jsx(ls,{path:"/messages-provider",component:xc}),e.jsx(ls,{path:"/agenda",component:af}),e.jsx(ls,{path:"/agenda-profissional",component:VN}),e.jsx(ls,{path:"/profile",component:of}),e.jsx(ls,{path:"/provider-profile",component:_N}),e.jsx(ls,{path:"/settings",component:lf}),e.jsx(ls,{component:$f})]}):e.jsxs(Sd,{children:[e.jsx(ls,{path:"/",component:P2}),e.jsx(ls,{path:"/services",component:$N}),e.jsx(ls,{path:"/my-service-requests",component:UN}),e.jsx(ls,{path:"/agenda",component:af}),e.jsx(ls,{path:"/messages/:conversationId",component:Uf}),e.jsx(ls,{path:"/messages",component:Uf}),e.jsx(ls,{path:"/profile",component:of}),e.jsx(ls,{path:"/settings",component:lf}),e.jsx(ls,{path:"/payment",component:L5}),e.jsx(ls,{path:"/professional/:id",component:M5}),e.jsx(ls,{path:"/servico",component:CN}),e.jsx(ls,{path:"/my-requests",component:qN}),e.jsx(ls,{component:$f})]}):e.jsxs(Sd,{children:[e.jsx(ls,{path:"/auth-callback",component:ZN}),e.jsx(ls,{path:"*",children:e.jsx(WN,{onLogin:()=>{window.location.reload()}})})]})}function YN(){const[s,t]=P.useState(!0);return e.jsx(Cm,{client:Lm,children:e.jsx(Tm,{defaultTheme:"light",storageKey:"lifebee-theme",children:e.jsxs(zp,{children:[s?e.jsx(C2,{onComplete:()=>t(!1)}):e.jsx(GN,{}),e.jsx(yp,{})]})})})}window.addEventListener("unhandledrejection",s=>{console.warn("Unhandled promise rejection:",s.reason),s.preventDefault()});window.addEventListener("error",s=>{console.warn("Uncaught error:",s.error)});(()=>{const s=()=>{try{const r=document.getElementById("torrent-scanner-popup");r&&r.parentNode&&r.parentNode.removeChild(r),document.querySelectorAll('[id*="torrent-scanner-popup"], [class*="torrent-scanner-popup"]').forEach(i=>i.parentNode&&i.parentNode.removeChild(i))}catch{}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s,{once:!0}):s();const t=new MutationObserver(r=>{for(const a of r)a.addedNodes.forEach(i=>{if(!(i instanceof HTMLElement))return;const l=i.id||"",d=i.className?.toString?.()||"";if(l.includes("torrent-scanner-popup")||d.includes("torrent-scanner-popup"))try{i.parentNode&&i.parentNode.removeChild(i)}catch{}i.querySelectorAll?.('[id*="torrent-scanner-popup"], [class*="torrent-scanner-popup"]')?.forEach(h=>{try{h.parentNode&&h.parentNode.removeChild(h)}catch{}})})});try{t.observe(document.documentElement,{childList:!0,subtree:!0})}catch{}})();pv.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(F1,{children:e.jsx(Cm,{client:Lm,children:e.jsxs(Tm,{defaultTheme:"light",storageKey:"lifebee-ui-theme",children:[e.jsx(YN,{}),e.jsx(yp,{})]})})})}));export{bs as _};
